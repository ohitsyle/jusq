
> nucash-server@3.0.0 start
> node scripts/update-ip.mjs && node server.js


ğŸ” Detecting local IP address...
ğŸ“ Detected IP: 172.20.10.2

ğŸ”„ Updating configuration files...
âŒ .env file not found
âŒ Mobile config file not found

âœ… Configuration updated successfully!

ğŸ“± Mobile app will connect to: http://172.20.10.2:3000/api
ğŸ’¡ Restart your React Native app to pick up the new IP

ğŸ”‘ Merchant admin JWT_SECRET: nucash_secret_2025
âœ… Email service loaded
ğŸ“§ sendReceipt available: true
ğŸ“§ sendRefundReceipt available: true
âœ… ShuttlePosition model loaded
(node:83988) [MONGOOSE] Warning: Duplicate schema index on {"shuttleId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)

ğŸš€ NUCash Server Started!
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“± Mobile API:        http://localhost:3000/api
â”‚ ğŸŒ Network Access:    http://172.20.10.2:3000/api
â”‚ ğŸ–¥ï¸  Admin Dashboard:   http://localhost:3000/admin
â”‚ ğŸšŒ Motorpool Admin:   http://localhost:3000/motorpool
â”‚ ğŸ’š Health Check:      http://localhost:3000/health
â”‚ ğŸ§ª Test Endpoint:     http://localhost:3000/api/test
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… Available Endpoints:
   Mobile App:
   - GET  /api/user/balance/:rfidUid
   - POST /api/driver/login
   - POST /api/shuttle/pay
   - POST /api/merchant/pay
   - GET  /api/geofences
   - GET  /api/system/config
   - GET  /api/routes
   - GET  /api/shuttles/available
   - POST /api/trips/start
   - GET  /api/analytics/dashboard
   - GET  /api/logs

   Admin Dashboard:
   - GET  /api/admin/analytics
   - GET  /api/admin/drivers
   - POST /api/admin/drivers
   - PUT  /api/admin/drivers/:id
   - GET  /api/admin/shuttles
   - GET  /api/admin/routes
   - GET  /api/admin/phones
   - GET  /api/admin/event-logs
   - GET  /api/admin/user-concerns
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Schema v3.0 - ES6 Modules              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… MongoDB connected
[Auto-Export] Initializing auto-export cron job...
[Auto-Export] Cron job scheduled to run every minute
[Auto-Export] Checking for scheduled exports...
[Auto-Export] Checking for scheduled exports...
âš ï¸  SIGTERM received, closing server...
âœ… MongoDB connection closed
