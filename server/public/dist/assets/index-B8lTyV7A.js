function a2(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(n,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();function rx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nx={exports:{}},ao={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r2=Symbol.for("react.transitional.element"),n2=Symbol.for("react.fragment");function sx(e,t,r){var n=null;if(r!==void 0&&(n=""+r),t.key!==void 0&&(n=""+t.key),"key"in t){r={};for(var s in t)s!=="key"&&(r[s]=t[s])}else r=t;return t=r.ref,{$$typeof:r2,type:e,key:n,ref:t!==void 0?t:null,props:r}}ao.Fragment=n2;ao.jsx=sx;ao.jsxs=sx;nx.exports=ao;var a=nx.exports,lx={exports:{}},te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _c=Symbol.for("react.transitional.element"),s2=Symbol.for("react.portal"),l2=Symbol.for("react.fragment"),o2=Symbol.for("react.strict_mode"),i2=Symbol.for("react.profiler"),c2=Symbol.for("react.consumer"),d2=Symbol.for("react.context"),u2=Symbol.for("react.forward_ref"),p2=Symbol.for("react.suspense"),x2=Symbol.for("react.memo"),ox=Symbol.for("react.lazy"),f2=Symbol.for("react.activity"),Vd=Symbol.iterator;function g2(e){return e===null||typeof e!="object"?null:(e=Vd&&e[Vd]||e["@@iterator"],typeof e=="function"?e:null)}var ix={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cx=Object.assign,dx={};function gn(e,t,r){this.props=e,this.context=t,this.refs=dx,this.updater=r||ix}gn.prototype.isReactComponent={};gn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ux(){}ux.prototype=gn.prototype;function Lc(e,t,r){this.props=e,this.context=t,this.refs=dx,this.updater=r||ix}var Oc=Lc.prototype=new ux;Oc.constructor=Lc;cx(Oc,gn.prototype);Oc.isPureReactComponent=!0;var Qd=Array.isArray;function Fi(){}var Ne={H:null,A:null,T:null,S:null},px=Object.prototype.hasOwnProperty;function Ic(e,t,r){var n=r.ref;return{$$typeof:_c,type:e,key:t,ref:n!==void 0?n:null,props:r}}function h2(e,t){return Ic(e.type,t,e.props)}function Uc(e){return typeof e=="object"&&e!==null&&e.$$typeof===_c}function m2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Zd=/\/+/g;function Ao(e,t){return typeof e=="object"&&e!==null&&e.key!=null?m2(""+e.key):t.toString(36)}function b2(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Fi,Fi):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Br(e,t,r,n,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case _c:case s2:o=!0;break;case ox:return o=e._init,Br(o(e._payload),t,r,n,s)}}if(o)return s=s(e),o=n===""?"."+Ao(e,0):n,Qd(s)?(r="",o!=null&&(r=o.replace(Zd,"$&/")+"/"),Br(s,t,r,"",function(u){return u})):s!=null&&(Uc(s)&&(s=h2(s,r+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(Zd,"$&/")+"/")+o)),t.push(s)),1;o=0;var i=n===""?".":n+":";if(Qd(e))for(var d=0;d<e.length;d++)n=e[d],l=i+Ao(n,d),o+=Br(n,t,r,l,s);else if(d=g2(e),typeof d=="function")for(e=d.call(e),d=0;!(n=e.next()).done;)n=n.value,l=i+Ao(n,d++),o+=Br(n,t,r,l,s);else if(l==="object"){if(typeof e.then=="function")return Br(b2(e),t,r,n,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return o}function $s(e,t,r){if(e==null)return e;var n=[],s=0;return Br(e,n,"","",function(l){return t.call(r,l,s++)}),n}function y2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Kd=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},v2={map:$s,forEach:function(e,t,r){$s(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return $s(e,function(){t++}),t},toArray:function(e){return $s(e,function(t){return t})||[]},only:function(e){if(!Uc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};te.Activity=f2;te.Children=v2;te.Component=gn;te.Fragment=l2;te.Profiler=i2;te.PureComponent=Lc;te.StrictMode=o2;te.Suspense=p2;te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ne;te.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Ne.H.useMemoCache(e)}};te.cache=function(e){return function(){return e.apply(null,arguments)}};te.cacheSignal=function(){return null};te.cloneElement=function(e,t,r){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var n=cx({},e.props),s=e.key;if(t!=null)for(l in t.key!==void 0&&(s=""+t.key),t)!px.call(t,l)||l==="key"||l==="__self"||l==="__source"||l==="ref"&&t.ref===void 0||(n[l]=t[l]);var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){for(var o=Array(l),i=0;i<l;i++)o[i]=arguments[i+2];n.children=o}return Ic(e.type,s,n)};te.createContext=function(e){return e={$$typeof:d2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:c2,_context:e},e};te.createElement=function(e,t,r){var n,s={},l=null;if(t!=null)for(n in t.key!==void 0&&(l=""+t.key),t)px.call(t,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(s[n]=t[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var i=Array(o),d=0;d<o;d++)i[d]=arguments[d+2];s.children=i}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return Ic(e,l,s)};te.createRef=function(){return{current:null}};te.forwardRef=function(e){return{$$typeof:u2,render:e}};te.isValidElement=Uc;te.lazy=function(e){return{$$typeof:ox,_payload:{_status:-1,_result:e},_init:y2}};te.memo=function(e,t){return{$$typeof:x2,type:e,compare:t===void 0?null:t}};te.startTransition=function(e){var t=Ne.T,r={};Ne.T=r;try{var n=e(),s=Ne.S;s!==null&&s(r,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(Fi,Kd)}catch(l){Kd(l)}finally{t!==null&&r.types!==null&&(t.types=r.types),Ne.T=t}};te.unstable_useCacheRefresh=function(){return Ne.H.useCacheRefresh()};te.use=function(e){return Ne.H.use(e)};te.useActionState=function(e,t,r){return Ne.H.useActionState(e,t,r)};te.useCallback=function(e,t){return Ne.H.useCallback(e,t)};te.useContext=function(e){return Ne.H.useContext(e)};te.useDebugValue=function(){};te.useDeferredValue=function(e,t){return Ne.H.useDeferredValue(e,t)};te.useEffect=function(e,t){return Ne.H.useEffect(e,t)};te.useEffectEvent=function(e){return Ne.H.useEffectEvent(e)};te.useId=function(){return Ne.H.useId()};te.useImperativeHandle=function(e,t,r){return Ne.H.useImperativeHandle(e,t,r)};te.useInsertionEffect=function(e,t){return Ne.H.useInsertionEffect(e,t)};te.useLayoutEffect=function(e,t){return Ne.H.useLayoutEffect(e,t)};te.useMemo=function(e,t){return Ne.H.useMemo(e,t)};te.useOptimistic=function(e,t){return Ne.H.useOptimistic(e,t)};te.useReducer=function(e,t,r){return Ne.H.useReducer(e,t,r)};te.useRef=function(e){return Ne.H.useRef(e)};te.useState=function(e){return Ne.H.useState(e)};te.useSyncExternalStore=function(e,t,r){return Ne.H.useSyncExternalStore(e,t,r)};te.useTransition=function(){return Ne.H.useTransition()};te.version="19.2.3";lx.exports=te;var x=lx.exports;const xe=rx(x),j2=a2({__proto__:null,default:xe},[x]);var xx={exports:{}},ro={},fx={exports:{}},gx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,U){var F=B.length;B.push(U);e:for(;0<F;){var f=F-1>>>1,E=B[f];if(0<s(E,U))B[f]=U,B[F]=E,F=f;else break e}}function r(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var U=B[0],F=B.pop();if(F!==U){B[0]=F;e:for(var f=0,E=B.length,N=E>>>1;f<N;){var W=2*(f+1)-1,O=B[W],P=W+1,Q=B[P];if(0>s(O,F))P<E&&0>s(Q,O)?(B[f]=Q,B[P]=F,f=P):(B[f]=O,B[W]=F,f=W);else if(P<E&&0>s(Q,F))B[f]=Q,B[P]=F,f=P;else break e}}return U}function s(B,U){var F=B.sortIndex-U.sortIndex;return F!==0?F:B.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var d=[],u=[],c=1,p=null,h=3,v=!1,w=!1,j=!1,S=!1,m=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;function y(B){for(var U=r(u);U!==null;){if(U.callback===null)n(u);else if(U.startTime<=B)n(u),U.sortIndex=U.expirationTime,t(d,U);else break;U=r(u)}}function T(B){if(j=!1,y(B),!w)if(r(d)!==null)w=!0,R||(R=!0,k());else{var U=r(u);U!==null&&_(T,U.startTime-B)}}var R=!1,z=-1,A=5,I=-1;function L(){return S?!0:!(e.unstable_now()-I<A)}function M(){if(S=!1,R){var B=e.unstable_now();I=B;var U=!0;try{e:{w=!1,j&&(j=!1,b(z),z=-1),v=!0;var F=h;try{t:{for(y(B),p=r(d);p!==null&&!(p.expirationTime>B&&L());){var f=p.callback;if(typeof f=="function"){p.callback=null,h=p.priorityLevel;var E=f(p.expirationTime<=B);if(B=e.unstable_now(),typeof E=="function"){p.callback=E,y(B),U=!0;break t}p===r(d)&&n(d),y(B)}else n(d);p=r(d)}if(p!==null)U=!0;else{var N=r(u);N!==null&&_(T,N.startTime-B),U=!1}}break e}finally{p=null,h=F,v=!1}U=void 0}}finally{U?k():R=!1}}}var k;if(typeof g=="function")k=function(){g(M)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,D=q.port2;q.port1.onmessage=M,k=function(){D.postMessage(null)}}else k=function(){m(M,0)};function _(B,U){z=m(function(){B(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(B){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var F=h;h=U;try{return B()}finally{h=F}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(B,U){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var F=h;h=B;try{return U()}finally{h=F}},e.unstable_scheduleCallback=function(B,U,F){var f=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?f+F:f):F=f,B){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=F+E,B={id:c++,callback:U,priorityLevel:B,startTime:F,expirationTime:E,sortIndex:-1},F>f?(B.sortIndex=F,t(u,B),r(d)===null&&B===r(u)&&(j?(b(z),z=-1):j=!0,_(T,F-f))):(B.sortIndex=E,t(d,B),w||v||(w=!0,R||(R=!0,k()))),B},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(B){var U=h;return function(){var F=h;h=U;try{return B.apply(this,arguments)}finally{h=F}}}})(gx);fx.exports=gx;var S2=fx.exports,hx={exports:{}},nt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w2=x;function mx(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ea(){}var at={d:{f:Ea,r:function(){throw Error(mx(522))},D:Ea,C:Ea,L:Ea,m:Ea,X:Ea,S:Ea,M:Ea},p:0,findDOMNode:null},C2=Symbol.for("react.portal");function N2(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C2,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}var Yn=w2.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function no(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}nt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=at;nt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(mx(299));return N2(e,t,null,r)};nt.flushSync=function(e){var t=Yn.T,r=at.p;try{if(Yn.T=null,at.p=2,e)return e()}finally{Yn.T=t,at.p=r,at.d.f()}};nt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,at.d.C(e,t))};nt.prefetchDNS=function(e){typeof e=="string"&&at.d.D(e)};nt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var r=t.as,n=no(r,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,l=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;r==="style"?at.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:n,integrity:s,fetchPriority:l}):r==="script"&&at.d.X(e,{crossOrigin:n,integrity:s,fetchPriority:l,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};nt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var r=no(t.as,t.crossOrigin);at.d.M(e,{crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&at.d.M(e)};nt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var r=t.as,n=no(r,t.crossOrigin);at.d.L(e,r,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};nt.preloadModule=function(e,t){if(typeof e=="string")if(t){var r=no(t.as,t.crossOrigin);at.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else at.d.m(e)};nt.requestFormReset=function(e){at.d.r(e)};nt.unstable_batchedUpdates=function(e,t){return e(t)};nt.useFormState=function(e,t,r){return Yn.H.useFormState(e,t,r)};nt.useFormStatus=function(){return Yn.H.useHostTransitionStatus()};nt.version="19.2.3";function bx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bx)}catch(e){console.error(e)}}bx(),hx.exports=nt;var T2=hx.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ue=S2,yx=x,k2=T2;function H(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function vx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ss(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function jx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Sx(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jd(e){if(Ss(e)!==e)throw Error(H(188))}function E2(e){var t=e.alternate;if(!t){if(t=Ss(e),t===null)throw Error(H(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var l=s.alternate;if(l===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===r)return Jd(s),e;if(l===n)return Jd(s),t;l=l.sibling}throw Error(H(188))}if(r.return!==n.return)r=s,n=l;else{for(var o=!1,i=s.child;i;){if(i===r){o=!0,r=s,n=l;break}if(i===n){o=!0,n=s,r=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===r){o=!0,r=l,n=s;break}if(i===n){o=!0,n=l,r=s;break}i=i.sibling}if(!o)throw Error(H(189))}}if(r.alternate!==n)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?e:t}function wx(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=wx(e),t!==null)return t;e=e.sibling}return null}var Te=Object.assign,F2=Symbol.for("react.element"),Ws=Symbol.for("react.transitional.element"),Un=Symbol.for("react.portal"),Lr=Symbol.for("react.fragment"),Cx=Symbol.for("react.strict_mode"),zi=Symbol.for("react.profiler"),Nx=Symbol.for("react.consumer"),pa=Symbol.for("react.context"),$c=Symbol.for("react.forward_ref"),Di=Symbol.for("react.suspense"),Ri=Symbol.for("react.suspense_list"),Wc=Symbol.for("react.memo"),za=Symbol.for("react.lazy"),Ai=Symbol.for("react.activity"),z2=Symbol.for("react.memo_cache_sentinel"),eu=Symbol.iterator;function Rn(e){return e===null||typeof e!="object"?null:(e=eu&&e[eu]||e["@@iterator"],typeof e=="function"?e:null)}var D2=Symbol.for("react.client.reference");function Bi(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===D2?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Lr:return"Fragment";case zi:return"Profiler";case Cx:return"StrictMode";case Di:return"Suspense";case Ri:return"SuspenseList";case Ai:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Un:return"Portal";case pa:return e.displayName||"Context";case Nx:return(e._context.displayName||"Context")+".Consumer";case $c:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wc:return t=e.displayName||null,t!==null?t:Bi(e.type)||"Memo";case za:t=e._payload,e=e._init;try{return Bi(e(t))}catch{}}return null}var $n=Array.isArray,J=yx.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=k2.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pr={pending:!1,data:null,method:null,action:null},Mi=[],Or=-1;function ra(e){return{current:e}}function qe(e){0>Or||(e.current=Mi[Or],Mi[Or]=null,Or--)}function Se(e,t){Or++,Mi[Or]=e.current,e.current=t}var aa=ra(null),ss=ra(null),Wa=ra(null),Nl=ra(null);function Tl(e,t){switch(Se(Wa,t),Se(ss,e),Se(aa,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?lp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=lp(t),e=P0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}qe(aa),Se(aa,e)}function an(){qe(aa),qe(ss),qe(Wa)}function _i(e){e.memoizedState!==null&&Se(Nl,e);var t=aa.current,r=P0(t,e.type);t!==r&&(Se(ss,e),Se(aa,r))}function kl(e){ss.current===e&&(qe(aa),qe(ss)),Nl.current===e&&(qe(Nl),hs._currentValue=pr)}var Bo,tu;function or(e){if(Bo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Bo=t&&t[1]||"",tu=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bo+e+tu}var Mo=!1;function _o(e,t){if(!e||Mo)return"";Mo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(v){var h=v}Reflect.construct(e,[],p)}else{try{p.call()}catch(v){h=v}e.call(p.prototype)}}else{try{throw Error()}catch(v){h=v}(p=e())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(v){if(v&&h&&typeof v.stack=="string")return[v.stack,h.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=n.DetermineComponentFrameRoot(),o=l[0],i=l[1];if(o&&i){var d=o.split(`
`),u=i.split(`
`);for(s=n=0;n<d.length&&!d[n].includes("DetermineComponentFrameRoot");)n++;for(;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;if(n===d.length||s===u.length)for(n=d.length-1,s=u.length-1;1<=n&&0<=s&&d[n]!==u[s];)s--;for(;1<=n&&0<=s;n--,s--)if(d[n]!==u[s]){if(n!==1||s!==1)do if(n--,s--,0>s||d[n]!==u[s]){var c=`
`+d[n].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=n&&0<=s);break}}}finally{Mo=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?or(r):""}function R2(e,t){switch(e.tag){case 26:case 27:case 5:return or(e.type);case 16:return or("Lazy");case 13:return e.child!==t&&t!==null?or("Suspense Fallback"):or("Suspense");case 19:return or("SuspenseList");case 0:case 15:return _o(e.type,!1);case 11:return _o(e.type.render,!1);case 1:return _o(e.type,!0);case 31:return or("Activity");default:return""}}function au(e){try{var t="",r=null;do t+=R2(e,r),r=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var Li=Object.prototype.hasOwnProperty,Hc=Ue.unstable_scheduleCallback,Lo=Ue.unstable_cancelCallback,A2=Ue.unstable_shouldYield,B2=Ue.unstable_requestPaint,Nt=Ue.unstable_now,M2=Ue.unstable_getCurrentPriorityLevel,Tx=Ue.unstable_ImmediatePriority,kx=Ue.unstable_UserBlockingPriority,El=Ue.unstable_NormalPriority,_2=Ue.unstable_LowPriority,Ex=Ue.unstable_IdlePriority,L2=Ue.log,O2=Ue.unstable_setDisableYieldValue,ws=null,Tt=null;function _a(e){if(typeof L2=="function"&&O2(e),Tt&&typeof Tt.setStrictMode=="function")try{Tt.setStrictMode(ws,e)}catch{}}var kt=Math.clz32?Math.clz32:$2,I2=Math.log,U2=Math.LN2;function $2(e){return e>>>=0,e===0?32:31-(I2(e)/U2|0)|0}var Hs=256,qs=262144,Ys=4194304;function ir(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function so(e,t,r){var n=e.pendingLanes;if(n===0)return 0;var s=0,l=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var i=n&134217727;return i!==0?(n=i&~l,n!==0?s=ir(n):(o&=i,o!==0?s=ir(o):r||(r=i&~e,r!==0&&(s=ir(r))))):(i=n&~l,i!==0?s=ir(i):o!==0?s=ir(o):r||(r=n&~e,r!==0&&(s=ir(r)))),s===0?0:t!==0&&t!==s&&!(t&l)&&(l=s&-s,r=t&-t,l>=r||l===32&&(r&4194048)!==0)?t:s}function Cs(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function W2(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fx(){var e=Ys;return Ys<<=1,!(Ys&62914560)&&(Ys=4194304),e}function Oo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ns(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function H2(e,t,r,n,s,l){var o=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var i=e.entanglements,d=e.expirationTimes,u=e.hiddenUpdates;for(r=o&~r;0<r;){var c=31-kt(r),p=1<<c;i[c]=0,d[c]=-1;var h=u[c];if(h!==null)for(u[c]=null,c=0;c<h.length;c++){var v=h[c];v!==null&&(v.lane&=-536870913)}r&=~p}n!==0&&zx(e,n,0),l!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=l&~(o&~t))}function zx(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-kt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|r&261930}function Dx(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-kt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}function Rx(e,t){var r=t&-t;return r=r&42?1:qc(r),r&(e.suspendedLanes|t)?0:r}function qc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Yc(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Ax(){var e=pe.p;return e!==0?e:(e=window.event,e===void 0?32:rg(e.type))}function ru(e,t){var r=pe.p;try{return pe.p=e,t()}finally{pe.p=r}}var ar=Math.random().toString(36).slice(2),Ge="__reactFiber$"+ar,mt="__reactProps$"+ar,hn="__reactContainer$"+ar,Oi="__reactEvents$"+ar,q2="__reactListeners$"+ar,Y2="__reactHandles$"+ar,nu="__reactResources$"+ar,Ts="__reactMarker$"+ar;function Pc(e){delete e[Ge],delete e[mt],delete e[Oi],delete e[q2],delete e[Y2]}function Ir(e){var t=e[Ge];if(t)return t;for(var r=e.parentNode;r;){if(t=r[hn]||r[Ge]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=up(e);e!==null;){if(r=e[Ge])return r;e=up(e)}return t}e=r,r=e.parentNode}return null}function mn(e){if(e=e[Ge]||e[hn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Wn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(H(33))}function Vr(e){var t=e[nu];return t||(t=e[nu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function He(e){e[Ts]=!0}var Bx=new Set,Mx={};function Tr(e,t){rn(e,t),rn(e+"Capture",t)}function rn(e,t){for(Mx[e]=t,e=0;e<t.length;e++)Bx.add(t[e])}var P2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),su={},lu={};function G2(e){return Li.call(lu,e)?!0:Li.call(su,e)?!1:P2.test(e)?lu[e]=!0:(su[e]=!0,!1)}function ol(e,t,r){if(G2(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function Ps(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function sa(e,t,r,n){if(n===null)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+n)}}function Rt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _x(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function X2(e,t,r){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ii(e){if(!e._valueTracker){var t=_x(e)?"checked":"value";e._valueTracker=X2(e,t,""+e[t])}}function Lx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=_x(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Fl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var V2=/[\n"\\]/g;function Mt(e){return e.replace(V2,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ui(e,t,r,n,s,l,o,i){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Rt(t)):e.value!==""+Rt(t)&&(e.value=""+Rt(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?$i(e,o,Rt(t)):r!=null?$i(e,o,Rt(r)):n!=null&&e.removeAttribute("value"),s==null&&l!=null&&(e.defaultChecked=!!l),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.name=""+Rt(i):e.removeAttribute("name")}function Ox(e,t,r,n,s,l,o,i){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),t!=null||r!=null){if(!(l!=="submit"&&l!=="reset"||t!=null)){Ii(e);return}r=r!=null?""+Rt(r):"",t=t!=null?""+Rt(t):r,i||t===e.value||(e.value=t),e.defaultValue=t}n=n??s,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=i?e.checked:!!n,e.defaultChecked=!!n,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o),Ii(e)}function $i(e,t,r){t==="number"&&Fl(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Qr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Rt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ix(e,t,r){if(t!=null&&(t=""+Rt(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+Rt(r):""}function Ux(e,t,r,n){if(t==null){if(n!=null){if(r!=null)throw Error(H(92));if($n(n)){if(1<n.length)throw Error(H(93));n=n[0]}r=n}r==null&&(r=""),t=r}r=Rt(t),e.defaultValue=r,n=e.textContent,n===r&&n!==""&&n!==null&&(e.value=n),Ii(e)}function nn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Q2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ou(e,t,r){var n=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,r):typeof r!="number"||r===0||Q2.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function $x(e,t,r){if(t!=null&&typeof t!="object")throw Error(H(62));if(e=e.style,r!=null){for(var n in r)!r.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&r[s]!==n&&ou(e,s,n)}else for(var l in t)t.hasOwnProperty(l)&&ou(e,l,t[l])}function Gc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),K2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function il(e){return K2.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function xa(){}var Wi=null;function Xc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ur=null,Zr=null;function iu(e){var t=mn(e);if(t&&(e=t.stateNode)){var r=e[mt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ui(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Mt(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=n[mt]||null;if(!s)throw Error(H(90));Ui(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<r.length;t++)n=r[t],n.form===e.form&&Lx(n)}break e;case"textarea":Ix(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&Qr(e,!!r.multiple,t,!1)}}}var Io=!1;function Wx(e,t,r){if(Io)return e(t,r);Io=!0;try{var n=e(t);return n}finally{if(Io=!1,(Ur!==null||Zr!==null)&&(bo(),Ur&&(t=Ur,e=Zr,Zr=Ur=null,iu(t),e)))for(t=0;t<e.length;t++)iu(e[t])}}function ls(e,t){var r=e.stateNode;if(r===null)return null;var n=r[mt]||null;if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(H(231,t,typeof r));return r}var ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hi=!1;if(ba)try{var An={};Object.defineProperty(An,"passive",{get:function(){Hi=!0}}),window.addEventListener("test",An,An),window.removeEventListener("test",An,An)}catch{Hi=!1}var La=null,Vc=null,cl=null;function Hx(){if(cl)return cl;var e,t=Vc,r=t.length,n,s="value"in La?La.value:La.textContent,l=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[l-n];n++);return cl=s.slice(e,1<n?1-n:void 0)}function dl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gs(){return!0}function cu(){return!1}function yt(e){function t(r,n,s,l,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Gs:cu,this.isPropagationStopped=cu,this}return Te(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Gs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Gs)},persist:function(){},isPersistent:Gs}),t}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lo=yt(kr),ks=Te({},kr,{view:0,detail:0}),J2=yt(ks),Uo,$o,Bn,oo=Te({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bn&&(Bn&&e.type==="mousemove"?(Uo=e.screenX-Bn.screenX,$o=e.screenY-Bn.screenY):$o=Uo=0,Bn=e),Uo)},movementY:function(e){return"movementY"in e?e.movementY:$o}}),du=yt(oo),eh=Te({},oo,{dataTransfer:0}),th=yt(eh),ah=Te({},ks,{relatedTarget:0}),Wo=yt(ah),rh=Te({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),nh=yt(rh),sh=Te({},kr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lh=yt(sh),oh=Te({},kr,{data:0}),uu=yt(oh),ih={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ch={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dh[e])?!!t[e]:!1}function Qc(){return uh}var ph=Te({},ks,{key:function(e){if(e.key){var t=ih[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=dl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ch[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qc,charCode:function(e){return e.type==="keypress"?dl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xh=yt(ph),fh=Te({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pu=yt(fh),gh=Te({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qc}),hh=yt(gh),mh=Te({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),bh=yt(mh),yh=Te({},oo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vh=yt(yh),jh=Te({},kr,{newState:0,oldState:0}),Sh=yt(jh),wh=[9,13,27,32],Zc=ba&&"CompositionEvent"in window,Pn=null;ba&&"documentMode"in document&&(Pn=document.documentMode);var Ch=ba&&"TextEvent"in window&&!Pn,qx=ba&&(!Zc||Pn&&8<Pn&&11>=Pn),xu=" ",fu=!1;function Yx(e,t){switch(e){case"keyup":return wh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Px(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $r=!1;function Nh(e,t){switch(e){case"compositionend":return Px(t);case"keypress":return t.which!==32?null:(fu=!0,xu);case"textInput":return e=t.data,e===xu&&fu?null:e;default:return null}}function Th(e,t){if($r)return e==="compositionend"||!Zc&&Yx(e,t)?(e=Hx(),cl=Vc=La=null,$r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qx&&t.locale!=="ko"?null:t.data;default:return null}}var kh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kh[e.type]:t==="textarea"}function Gx(e,t,r,n){Ur?Zr?Zr.push(n):Zr=[n]:Ur=n,t=Gl(t,"onChange"),0<t.length&&(r=new lo("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Gn=null,os=null;function Eh(e){H0(e,0)}function io(e){var t=Wn(e);if(Lx(t))return e}function hu(e,t){if(e==="change")return t}var Xx=!1;if(ba){var Ho;if(ba){var qo="oninput"in document;if(!qo){var mu=document.createElement("div");mu.setAttribute("oninput","return;"),qo=typeof mu.oninput=="function"}Ho=qo}else Ho=!1;Xx=Ho&&(!document.documentMode||9<document.documentMode)}function bu(){Gn&&(Gn.detachEvent("onpropertychange",Vx),os=Gn=null)}function Vx(e){if(e.propertyName==="value"&&io(os)){var t=[];Gx(t,os,e,Xc(e)),Wx(Eh,t)}}function Fh(e,t,r){e==="focusin"?(bu(),Gn=t,os=r,Gn.attachEvent("onpropertychange",Vx)):e==="focusout"&&bu()}function zh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return io(os)}function Dh(e,t){if(e==="click")return io(t)}function Rh(e,t){if(e==="input"||e==="change")return io(t)}function Ah(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ft=typeof Object.is=="function"?Object.is:Ah;function is(e,t){if(Ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Li.call(t,s)||!Ft(e[s],t[s]))return!1}return!0}function yu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vu(e,t){var r=yu(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=yu(r)}}function Qx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zx(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Fl(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Fl(e.document)}return t}function Kc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Bh=ba&&"documentMode"in document&&11>=document.documentMode,Wr=null,qi=null,Xn=null,Yi=!1;function ju(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Yi||Wr==null||Wr!==Fl(n)||(n=Wr,"selectionStart"in n&&Kc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xn&&is(Xn,n)||(Xn=n,n=Gl(qi,"onSelect"),0<n.length&&(t=new lo("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Wr)))}function sr(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Hr={animationend:sr("Animation","AnimationEnd"),animationiteration:sr("Animation","AnimationIteration"),animationstart:sr("Animation","AnimationStart"),transitionrun:sr("Transition","TransitionRun"),transitionstart:sr("Transition","TransitionStart"),transitioncancel:sr("Transition","TransitionCancel"),transitionend:sr("Transition","TransitionEnd")},Yo={},Kx={};ba&&(Kx=document.createElement("div").style,"AnimationEvent"in window||(delete Hr.animationend.animation,delete Hr.animationiteration.animation,delete Hr.animationstart.animation),"TransitionEvent"in window||delete Hr.transitionend.transition);function Er(e){if(Yo[e])return Yo[e];if(!Hr[e])return e;var t=Hr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Kx)return Yo[e]=t[r];return e}var Jx=Er("animationend"),ef=Er("animationiteration"),tf=Er("animationstart"),Mh=Er("transitionrun"),_h=Er("transitionstart"),Lh=Er("transitioncancel"),af=Er("transitionend"),rf=new Map,Pi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pi.push("scrollEnd");function Pt(e,t){rf.set(e,t),Tr(t,[e])}var zl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Dt=[],qr=0,Jc=0;function co(){for(var e=qr,t=Jc=qr=0;t<e;){var r=Dt[t];Dt[t++]=null;var n=Dt[t];Dt[t++]=null;var s=Dt[t];Dt[t++]=null;var l=Dt[t];if(Dt[t++]=null,n!==null&&s!==null){var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}l!==0&&nf(r,s,l)}}function uo(e,t,r,n){Dt[qr++]=e,Dt[qr++]=t,Dt[qr++]=r,Dt[qr++]=n,Jc|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function ed(e,t,r,n){return uo(e,t,r,n),Dl(e)}function Fr(e,t){return uo(e,null,null,t),Dl(e)}function nf(e,t,r){e.lanes|=r;var n=e.alternate;n!==null&&(n.lanes|=r);for(var s=!1,l=e.return;l!==null;)l.childLanes|=r,n=l.alternate,n!==null&&(n.childLanes|=r),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(s=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,s&&t!==null&&(s=31-kt(r),e=l.hiddenUpdates,n=e[s],n===null?e[s]=[t]:n.push(t),t.lane=r|536870912),l):null}function Dl(e){if(50<rs)throw rs=0,xc=null,Error(H(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Yr={};function Oh(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,t,r,n){return new Oh(e,t,r,n)}function td(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ga(e,t){var r=e.alternate;return r===null?(r=wt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function sf(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ul(e,t,r,n,s,l){var o=0;if(n=e,typeof e=="function")td(e)&&(o=1);else if(typeof e=="string")o=Hm(e,r,aa.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ai:return e=wt(31,r,t,s),e.elementType=Ai,e.lanes=l,e;case Lr:return xr(r.children,s,l,t);case Cx:o=8,s|=24;break;case zi:return e=wt(12,r,t,s|2),e.elementType=zi,e.lanes=l,e;case Di:return e=wt(13,r,t,s),e.elementType=Di,e.lanes=l,e;case Ri:return e=wt(19,r,t,s),e.elementType=Ri,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pa:o=10;break e;case Nx:o=9;break e;case $c:o=11;break e;case Wc:o=14;break e;case za:o=16,n=null;break e}o=29,r=Error(H(130,e===null?"null":typeof e,"")),n=null}return t=wt(o,r,t,s),t.elementType=e,t.type=n,t.lanes=l,t}function xr(e,t,r,n){return e=wt(7,e,n,t),e.lanes=r,e}function Po(e,t,r){return e=wt(6,e,null,t),e.lanes=r,e}function lf(e){var t=wt(18,null,null,0);return t.stateNode=e,t}function Go(e,t,r){return t=wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Su=new WeakMap;function _t(e,t){if(typeof e=="object"&&e!==null){var r=Su.get(e);return r!==void 0?r:(t={value:e,source:t,stack:au(t)},Su.set(e,t),t)}return{value:e,source:t,stack:au(t)}}var Pr=[],Gr=0,Rl=null,cs=0,At=[],Bt=0,Ka=null,Jt=1,ea="";function da(e,t){Pr[Gr++]=cs,Pr[Gr++]=Rl,Rl=e,cs=t}function of(e,t,r){At[Bt++]=Jt,At[Bt++]=ea,At[Bt++]=Ka,Ka=e;var n=Jt;e=ea;var s=32-kt(n)-1;n&=~(1<<s),r+=1;var l=32-kt(t)+s;if(30<l){var o=s-s%5;l=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Jt=1<<32-kt(t)+s|r<<s|n,ea=l+e}else Jt=1<<l|r<<s|n,ea=e}function ad(e){e.return!==null&&(da(e,1),of(e,1,0))}function rd(e){for(;e===Rl;)Rl=Pr[--Gr],Pr[Gr]=null,cs=Pr[--Gr],Pr[Gr]=null;for(;e===Ka;)Ka=At[--Bt],At[Bt]=null,ea=At[--Bt],At[Bt]=null,Jt=At[--Bt],At[Bt]=null}function cf(e,t){At[Bt++]=Jt,At[Bt++]=ea,At[Bt++]=Ka,Jt=t.id,ea=t.overflow,Ka=e}var Xe=null,Ce=null,ce=!1,Ha=null,Lt=!1,Gi=Error(H(519));function Ja(e){var t=Error(H(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ds(_t(t,e)),Gi}function wu(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[Ge]=e,t[mt]=n,r){case"dialog":le("cancel",t),le("close",t);break;case"iframe":case"object":case"embed":le("load",t);break;case"video":case"audio":for(r=0;r<fs.length;r++)le(fs[r],t);break;case"source":le("error",t);break;case"img":case"image":case"link":le("error",t),le("load",t);break;case"details":le("toggle",t);break;case"input":le("invalid",t),Ox(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":le("invalid",t);break;case"textarea":le("invalid",t),Ux(t,n.value,n.defaultValue,n.children)}r=n.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||n.suppressHydrationWarning===!0||Y0(t.textContent,r)?(n.popover!=null&&(le("beforetoggle",t),le("toggle",t)),n.onScroll!=null&&le("scroll",t),n.onScrollEnd!=null&&le("scrollend",t),n.onClick!=null&&(t.onclick=xa),t=!0):t=!1,t||Ja(e,!0)}function Cu(e){for(Xe=e.return;Xe;)switch(Xe.tag){case 5:case 31:case 13:Lt=!1;return;case 27:case 3:Lt=!0;return;default:Xe=Xe.return}}function Dr(e){if(e!==Xe)return!1;if(!ce)return Cu(e),ce=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||bc(e.type,e.memoizedProps)),r=!r),r&&Ce&&Ja(e),Cu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));Ce=dp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));Ce=dp(e)}else t===27?(t=Ce,rr(e.type)?(e=Sc,Sc=null,Ce=e):Ce=t):Ce=Xe?Ut(e.stateNode.nextSibling):null;return!0}function yr(){Ce=Xe=null,ce=!1}function Xo(){var e=Ha;return e!==null&&(xt===null?xt=e:xt.push.apply(xt,e),Ha=null),e}function ds(e){Ha===null?Ha=[e]:Ha.push(e)}var Xi=ra(null),zr=null,fa=null;function Ra(e,t,r){Se(Xi,t._currentValue),t._currentValue=r}function ha(e){e._currentValue=Xi.current,qe(Xi)}function Vi(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Qi(e,t,r,n){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){var o=s.child;l=l.firstContext;e:for(;l!==null;){var i=l;l=s;for(var d=0;d<t.length;d++)if(i.context===t[d]){l.lanes|=r,i=l.alternate,i!==null&&(i.lanes|=r),Vi(l.return,r,e),n||(o=null);break e}l=i.next}}else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Vi(o,r,e),o=null}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}}function bn(e,t,r,n){e=null;for(var s=t,l=!1;s!==null;){if(!l){if(s.flags&524288)l=!0;else if(s.flags&262144)break}if(s.tag===10){var o=s.alternate;if(o===null)throw Error(H(387));if(o=o.memoizedProps,o!==null){var i=s.type;Ft(s.pendingProps.value,o.value)||(e!==null?e.push(i):e=[i])}}else if(s===Nl.current){if(o=s.alternate,o===null)throw Error(H(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(hs):e=[hs])}s=s.return}e!==null&&Qi(t,e,r,n),t.flags|=262144}function Al(e){for(e=e.firstContext;e!==null;){if(!Ft(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function vr(e){zr=e,fa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ve(e){return df(zr,e)}function Xs(e,t){return zr===null&&vr(e),df(e,t)}function df(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},fa===null){if(e===null)throw Error(H(308));fa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else fa=fa.next=t;return r}var Ih=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},Uh=Ue.unstable_scheduleCallback,$h=Ue.unstable_NormalPriority,Le={$$typeof:pa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nd(){return{controller:new Ih,data:new Map,refCount:0}}function Es(e){e.refCount--,e.refCount===0&&Uh($h,function(){e.controller.abort()})}var Vn=null,Zi=0,sn=0,Kr=null;function Wh(e,t){if(Vn===null){var r=Vn=[];Zi=0,sn=Fd(),Kr={status:"pending",value:void 0,then:function(n){r.push(n)}}}return Zi++,t.then(Nu,Nu),t}function Nu(){if(--Zi===0&&Vn!==null){Kr!==null&&(Kr.status="fulfilled");var e=Vn;Vn=null,sn=0,Kr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Hh(e,t){var r=[],n={status:"pending",value:null,reason:null,then:function(s){r.push(s)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var s=0;s<r.length;s++)(0,r[s])(t)},function(s){for(n.status="rejected",n.reason=s,s=0;s<r.length;s++)(0,r[s])(void 0)}),n}var Tu=J.S;J.S=function(e,t){C0=Nt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Wh(e,t),Tu!==null&&Tu(e,t)};var fr=ra(null);function sd(){var e=fr.current;return e!==null?e:ye.pooledCache}function pl(e,t){t===null?Se(fr,fr.current):Se(fr,t.pool)}function uf(){var e=sd();return e===null?null:{parent:Le._currentValue,pool:e}}var yn=Error(H(460)),ld=Error(H(474)),po=Error(H(542)),Bl={then:function(){}};function ku(e){return e=e.status,e==="fulfilled"||e==="rejected"}function pf(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(xa,xa),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Fu(e),e;default:if(typeof t.status=="string")t.then(xa,xa);else{if(e=ye,e!==null&&100<e.shellSuspendCounter)throw Error(H(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=n}},function(n){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Fu(e),e}throw gr=t,yn}}function cr(e){try{var t=e._init;return t(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(gr=r,yn):r}}var gr=null;function Eu(){if(gr===null)throw Error(H(459));var e=gr;return gr=null,e}function Fu(e){if(e===yn||e===po)throw Error(H(483))}var Jr=null,us=0;function Vs(e){var t=us;return us+=1,Jr===null&&(Jr=[]),pf(Jr,e,t)}function Mn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Qs(e,t){throw t.$$typeof===F2?Error(H(525)):(e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function xf(e){function t(m,b){if(e){var g=m.deletions;g===null?(m.deletions=[b],m.flags|=16):g.push(b)}}function r(m,b){if(!e)return null;for(;b!==null;)t(m,b),b=b.sibling;return null}function n(m){for(var b=new Map;m!==null;)m.key!==null?b.set(m.key,m):b.set(m.index,m),m=m.sibling;return b}function s(m,b){return m=ga(m,b),m.index=0,m.sibling=null,m}function l(m,b,g){return m.index=g,e?(g=m.alternate,g!==null?(g=g.index,g<b?(m.flags|=67108866,b):g):(m.flags|=67108866,b)):(m.flags|=1048576,b)}function o(m){return e&&m.alternate===null&&(m.flags|=67108866),m}function i(m,b,g,y){return b===null||b.tag!==6?(b=Po(g,m.mode,y),b.return=m,b):(b=s(b,g),b.return=m,b)}function d(m,b,g,y){var T=g.type;return T===Lr?c(m,b,g.props.children,y,g.key):b!==null&&(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===za&&cr(T)===b.type)?(b=s(b,g.props),Mn(b,g),b.return=m,b):(b=ul(g.type,g.key,g.props,null,m.mode,y),Mn(b,g),b.return=m,b)}function u(m,b,g,y){return b===null||b.tag!==4||b.stateNode.containerInfo!==g.containerInfo||b.stateNode.implementation!==g.implementation?(b=Go(g,m.mode,y),b.return=m,b):(b=s(b,g.children||[]),b.return=m,b)}function c(m,b,g,y,T){return b===null||b.tag!==7?(b=xr(g,m.mode,y,T),b.return=m,b):(b=s(b,g),b.return=m,b)}function p(m,b,g){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=Po(""+b,m.mode,g),b.return=m,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ws:return g=ul(b.type,b.key,b.props,null,m.mode,g),Mn(g,b),g.return=m,g;case Un:return b=Go(b,m.mode,g),b.return=m,b;case za:return b=cr(b),p(m,b,g)}if($n(b)||Rn(b))return b=xr(b,m.mode,g,null),b.return=m,b;if(typeof b.then=="function")return p(m,Vs(b),g);if(b.$$typeof===pa)return p(m,Xs(m,b),g);Qs(m,b)}return null}function h(m,b,g,y){var T=b!==null?b.key:null;if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return T!==null?null:i(m,b,""+g,y);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ws:return g.key===T?d(m,b,g,y):null;case Un:return g.key===T?u(m,b,g,y):null;case za:return g=cr(g),h(m,b,g,y)}if($n(g)||Rn(g))return T!==null?null:c(m,b,g,y,null);if(typeof g.then=="function")return h(m,b,Vs(g),y);if(g.$$typeof===pa)return h(m,b,Xs(m,g),y);Qs(m,g)}return null}function v(m,b,g,y,T){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return m=m.get(g)||null,i(b,m,""+y,T);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ws:return m=m.get(y.key===null?g:y.key)||null,d(b,m,y,T);case Un:return m=m.get(y.key===null?g:y.key)||null,u(b,m,y,T);case za:return y=cr(y),v(m,b,g,y,T)}if($n(y)||Rn(y))return m=m.get(g)||null,c(b,m,y,T,null);if(typeof y.then=="function")return v(m,b,g,Vs(y),T);if(y.$$typeof===pa)return v(m,b,g,Xs(b,y),T);Qs(b,y)}return null}function w(m,b,g,y){for(var T=null,R=null,z=b,A=b=0,I=null;z!==null&&A<g.length;A++){z.index>A?(I=z,z=null):I=z.sibling;var L=h(m,z,g[A],y);if(L===null){z===null&&(z=I);break}e&&z&&L.alternate===null&&t(m,z),b=l(L,b,A),R===null?T=L:R.sibling=L,R=L,z=I}if(A===g.length)return r(m,z),ce&&da(m,A),T;if(z===null){for(;A<g.length;A++)z=p(m,g[A],y),z!==null&&(b=l(z,b,A),R===null?T=z:R.sibling=z,R=z);return ce&&da(m,A),T}for(z=n(z);A<g.length;A++)I=v(z,m,A,g[A],y),I!==null&&(e&&I.alternate!==null&&z.delete(I.key===null?A:I.key),b=l(I,b,A),R===null?T=I:R.sibling=I,R=I);return e&&z.forEach(function(M){return t(m,M)}),ce&&da(m,A),T}function j(m,b,g,y){if(g==null)throw Error(H(151));for(var T=null,R=null,z=b,A=b=0,I=null,L=g.next();z!==null&&!L.done;A++,L=g.next()){z.index>A?(I=z,z=null):I=z.sibling;var M=h(m,z,L.value,y);if(M===null){z===null&&(z=I);break}e&&z&&M.alternate===null&&t(m,z),b=l(M,b,A),R===null?T=M:R.sibling=M,R=M,z=I}if(L.done)return r(m,z),ce&&da(m,A),T;if(z===null){for(;!L.done;A++,L=g.next())L=p(m,L.value,y),L!==null&&(b=l(L,b,A),R===null?T=L:R.sibling=L,R=L);return ce&&da(m,A),T}for(z=n(z);!L.done;A++,L=g.next())L=v(z,m,A,L.value,y),L!==null&&(e&&L.alternate!==null&&z.delete(L.key===null?A:L.key),b=l(L,b,A),R===null?T=L:R.sibling=L,R=L);return e&&z.forEach(function(k){return t(m,k)}),ce&&da(m,A),T}function S(m,b,g,y){if(typeof g=="object"&&g!==null&&g.type===Lr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Ws:e:{for(var T=g.key;b!==null;){if(b.key===T){if(T=g.type,T===Lr){if(b.tag===7){r(m,b.sibling),y=s(b,g.props.children),y.return=m,m=y;break e}}else if(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===za&&cr(T)===b.type){r(m,b.sibling),y=s(b,g.props),Mn(y,g),y.return=m,m=y;break e}r(m,b);break}else t(m,b);b=b.sibling}g.type===Lr?(y=xr(g.props.children,m.mode,y,g.key),y.return=m,m=y):(y=ul(g.type,g.key,g.props,null,m.mode,y),Mn(y,g),y.return=m,m=y)}return o(m);case Un:e:{for(T=g.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===g.containerInfo&&b.stateNode.implementation===g.implementation){r(m,b.sibling),y=s(b,g.children||[]),y.return=m,m=y;break e}else{r(m,b);break}else t(m,b);b=b.sibling}y=Go(g,m.mode,y),y.return=m,m=y}return o(m);case za:return g=cr(g),S(m,b,g,y)}if($n(g))return w(m,b,g,y);if(Rn(g)){if(T=Rn(g),typeof T!="function")throw Error(H(150));return g=T.call(g),j(m,b,g,y)}if(typeof g.then=="function")return S(m,b,Vs(g),y);if(g.$$typeof===pa)return S(m,b,Xs(m,g),y);Qs(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint"?(g=""+g,b!==null&&b.tag===6?(r(m,b.sibling),y=s(b,g),y.return=m,m=y):(r(m,b),y=Po(g,m.mode,y),y.return=m,m=y),o(m)):r(m,b)}return function(m,b,g,y){try{us=0;var T=S(m,b,g,y);return Jr=null,T}catch(z){if(z===yn||z===po)throw z;var R=wt(29,z,null,m.mode);return R.lanes=y,R.return=m,R}finally{}}}var jr=xf(!0),ff=xf(!1),Da=!1;function od(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ki(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function qa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ya(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ue&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=Dl(e),nf(e,null,r),t}return uo(e,n,t,r),Dl(e)}function Qn(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Dx(e,r)}}function Vo(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var o={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};l===null?s=l=o:l=l.next=o,r=r.next}while(r!==null);l===null?s=l=t:l=l.next=t}else s=l=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:n.shared,callbacks:n.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var Ji=!1;function Zn(){if(Ji){var e=Kr;if(e!==null)throw e}}function Kn(e,t,r,n){Ji=!1;var s=e.updateQueue;Da=!1;var l=s.firstBaseUpdate,o=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var d=i,u=d.next;d.next=null,o===null?l=u:o.next=u,o=d;var c=e.alternate;c!==null&&(c=c.updateQueue,i=c.lastBaseUpdate,i!==o&&(i===null?c.firstBaseUpdate=u:i.next=u,c.lastBaseUpdate=d))}if(l!==null){var p=s.baseState;o=0,c=u=d=null,i=l;do{var h=i.lane&-536870913,v=h!==i.lane;if(v?(ie&h)===h:(n&h)===h){h!==0&&h===sn&&(Ji=!0),c!==null&&(c=c.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var w=e,j=i;h=t;var S=r;switch(j.tag){case 1:if(w=j.payload,typeof w=="function"){p=w.call(S,p,h);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=j.payload,h=typeof w=="function"?w.call(S,p,h):w,h==null)break e;p=Te({},p,h);break e;case 2:Da=!0}}h=i.callback,h!==null&&(e.flags|=64,v&&(e.flags|=8192),v=s.callbacks,v===null?s.callbacks=[h]:v.push(h))}else v={lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},c===null?(u=c=v,d=p):c=c.next=v,o|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;v=i,i=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);c===null&&(d=p),s.baseState=d,s.firstBaseUpdate=u,s.lastBaseUpdate=c,l===null&&(s.shared.lanes=0),tr|=o,e.lanes=o,e.memoizedState=p}}function gf(e,t){if(typeof e!="function")throw Error(H(191,e));e.call(t)}function hf(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)gf(r[e],t)}var ln=ra(null),Ml=ra(0);function zu(e,t){e=Sa,Se(Ml,e),Se(ln,t),Sa=e|t.baseLanes}function ec(){Se(Ml,Sa),Se(ln,ln.current)}function id(){Sa=Ml.current,qe(ln),qe(Ml)}var zt=ra(null),It=null;function Aa(e){var t=e.alternate;Se(Re,Re.current&1),Se(zt,e),It===null&&(t===null||ln.current!==null||t.memoizedState!==null)&&(It=e)}function tc(e){Se(Re,Re.current),Se(zt,e),It===null&&(It=e)}function mf(e){e.tag===22?(Se(Re,Re.current),Se(zt,e),It===null&&(It=e)):Ba()}function Ba(){Se(Re,Re.current),Se(zt,zt.current)}function St(e){qe(zt),It===e&&(It=null),qe(Re)}var Re=ra(0);function _l(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||vc(r)||jc(r)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ya=0,re=null,be=null,Me=null,Ll=!1,en=!1,Sr=!1,Ol=0,ps=0,tn=null,qh=0;function ze(){throw Error(H(321))}function cd(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ft(e[r],t[r]))return!1;return!0}function dd(e,t,r,n,s,l){return ya=l,re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,J.H=e===null||e.memoizedState===null?Xf:jd,Sr=!1,l=r(n,s),Sr=!1,en&&(l=yf(t,r,n,s)),bf(e),l}function bf(e){J.H=xs;var t=be!==null&&be.next!==null;if(ya=0,Me=be=re=null,Ll=!1,ps=0,tn=null,t)throw Error(H(300));e===null||Oe||(e=e.dependencies,e!==null&&Al(e)&&(Oe=!0))}function yf(e,t,r,n){re=e;var s=0;do{if(en&&(tn=null),ps=0,en=!1,25<=s)throw Error(H(301));if(s+=1,Me=be=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}J.H=Vf,l=t(r,n)}while(en);return l}function Yh(){var e=J.H,t=e.useState()[0];return t=typeof t.then=="function"?Fs(t):t,e=e.useState()[0],(be!==null?be.memoizedState:null)!==e&&(re.flags|=1024),t}function ud(){var e=Ol!==0;return Ol=0,e}function pd(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function xd(e){if(Ll){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ll=!1}ya=0,Me=be=re=null,en=!1,ps=Ol=0,tn=null}function tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?re.memoizedState=Me=e:Me=Me.next=e,Me}function Ae(){if(be===null){var e=re.alternate;e=e!==null?e.memoizedState:null}else e=be.next;var t=Me===null?re.memoizedState:Me.next;if(t!==null)Me=t,be=e;else{if(e===null)throw re.alternate===null?Error(H(467)):Error(H(310));be=e,e={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Me===null?re.memoizedState=Me=e:Me=Me.next=e}return Me}function xo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fs(e){var t=ps;return ps+=1,tn===null&&(tn=[]),e=pf(tn,e,t),t=re,(Me===null?t.memoizedState:Me.next)===null&&(t=t.alternate,J.H=t===null||t.memoizedState===null?Xf:jd),e}function fo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Fs(e);if(e.$$typeof===pa)return Ve(e)}throw Error(H(438,String(e)))}function fd(e){var t=null,r=re.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var n=re.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=xo(),re.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=z2;return t.index++,r}function va(e,t){return typeof t=="function"?t(e):t}function xl(e){var t=Ae();return gd(t,be,e)}function gd(e,t,r){var n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=r;var s=e.baseQueue,l=n.pending;if(l!==null){if(s!==null){var o=s.next;s.next=l.next,l.next=o}t.baseQueue=s=l,n.pending=null}if(l=e.baseState,s===null)e.memoizedState=l;else{t=s.next;var i=o=null,d=null,u=t,c=!1;do{var p=u.lane&-536870913;if(p!==u.lane?(ie&p)===p:(ya&p)===p){var h=u.revertLane;if(h===0)d!==null&&(d=d.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),p===sn&&(c=!0);else if((ya&h)===h){u=u.next,h===sn&&(c=!0);continue}else p={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},d===null?(i=d=p,o=l):d=d.next=p,re.lanes|=h,tr|=h;p=u.action,Sr&&r(l,p),l=u.hasEagerState?u.eagerState:r(l,p)}else h={lane:p,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},d===null?(i=d=h,o=l):d=d.next=h,re.lanes|=p,tr|=p;u=u.next}while(u!==null&&u!==t);if(d===null?o=l:d.next=i,!Ft(l,e.memoizedState)&&(Oe=!0,c&&(r=Kr,r!==null)))throw r;e.memoizedState=l,e.baseState=o,e.baseQueue=d,n.lastRenderedState=l}return s===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Qo(e){var t=Ae(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,l=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do l=e(l,o.action),o=o.next;while(o!==s);Ft(l,t.memoizedState)||(Oe=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function vf(e,t,r){var n=re,s=Ae(),l=ce;if(l){if(r===void 0)throw Error(H(407));r=r()}else r=t();var o=!Ft((be||s).memoizedState,r);if(o&&(s.memoizedState=r,Oe=!0),s=s.queue,hd(wf.bind(null,n,s,e),[e]),s.getSnapshot!==t||o||Me!==null&&Me.memoizedState.tag&1){if(n.flags|=2048,on(9,{destroy:void 0},Sf.bind(null,n,s,r,t),null),ye===null)throw Error(H(349));l||ya&127||jf(n,t,r)}return r}function jf(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=re.updateQueue,t===null?(t=xo(),re.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Sf(e,t,r,n){t.value=r,t.getSnapshot=n,Cf(t)&&Nf(e)}function wf(e,t,r){return r(function(){Cf(t)&&Nf(e)})}function Cf(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ft(e,r)}catch{return!0}}function Nf(e){var t=Fr(e,2);t!==null&&ft(t,e,2)}function ac(e){var t=tt();if(typeof e=="function"){var r=e;if(e=r(),Sr){_a(!0);try{r()}finally{_a(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:e},t}function Tf(e,t,r,n){return e.baseState=r,gd(e,be,typeof n=="function"?n:va)}function Ph(e,t,r,n,s){if(ho(e))throw Error(H(485));if(e=t.action,e!==null){var l={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){l.listeners.push(o)}};J.T!==null?r(!0):l.isTransition=!1,n(l),r=t.pending,r===null?(l.next=t.pending=l,kf(t,l)):(l.next=r.next,t.pending=r.next=l)}}function kf(e,t){var r=t.action,n=t.payload,s=e.state;if(t.isTransition){var l=J.T,o={};J.T=o;try{var i=r(s,n),d=J.S;d!==null&&d(o,i),Du(e,t,i)}catch(u){rc(e,t,u)}finally{l!==null&&o.types!==null&&(l.types=o.types),J.T=l}}else try{l=r(s,n),Du(e,t,l)}catch(u){rc(e,t,u)}}function Du(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(n){Ru(e,t,n)},function(n){return rc(e,t,n)}):Ru(e,t,r)}function Ru(e,t,r){t.status="fulfilled",t.value=r,Ef(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,kf(e,r)))}function rc(e,t,r){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=r,Ef(t),t=t.next;while(t!==n)}e.action=null}function Ef(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ff(e,t){return t}function Au(e,t){if(ce){var r=ye.formState;if(r!==null){e:{var n=re;if(ce){if(Ce){t:{for(var s=Ce,l=Lt;s.nodeType!==8;){if(!l){s=null;break t}if(s=Ut(s.nextSibling),s===null){s=null;break t}}l=s.data,s=l==="F!"||l==="F"?s:null}if(s){Ce=Ut(s.nextSibling),n=s.data==="F!";break e}}Ja(n)}n=!1}n&&(t=r[0])}}return r=tt(),r.memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ff,lastRenderedState:t},r.queue=n,r=Yf.bind(null,re,n),n.dispatch=r,n=ac(!1),l=vd.bind(null,re,!1,n.queue),n=tt(),s={state:t,dispatch:null,action:e,pending:null},n.queue=s,r=Ph.bind(null,re,s,l,r),s.dispatch=r,n.memoizedState=e,[t,r,!1]}function Bu(e){var t=Ae();return zf(t,be,e)}function zf(e,t,r){if(t=gd(e,t,Ff)[0],e=xl(va)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=Fs(t)}catch(o){throw o===yn?po:o}else n=t;t=Ae();var s=t.queue,l=s.dispatch;return r!==t.memoizedState&&(re.flags|=2048,on(9,{destroy:void 0},Gh.bind(null,s,r),null)),[n,l,e]}function Gh(e,t){e.action=t}function Mu(e){var t=Ae(),r=be;if(r!==null)return zf(t,r,e);Ae(),t=t.memoizedState,r=Ae();var n=r.queue.dispatch;return r.memoizedState=e,[t,n,!1]}function on(e,t,r,n){return e={tag:e,create:r,deps:n,inst:t,next:null},t=re.updateQueue,t===null&&(t=xo(),re.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Df(){return Ae().memoizedState}function fl(e,t,r,n){var s=tt();re.flags|=e,s.memoizedState=on(1|t,{destroy:void 0},r,n===void 0?null:n)}function go(e,t,r,n){var s=Ae();n=n===void 0?null:n;var l=s.memoizedState.inst;be!==null&&n!==null&&cd(n,be.memoizedState.deps)?s.memoizedState=on(t,l,r,n):(re.flags|=e,s.memoizedState=on(1|t,l,r,n))}function _u(e,t){fl(8390656,8,e,t)}function hd(e,t){go(2048,8,e,t)}function Xh(e){re.flags|=4;var t=re.updateQueue;if(t===null)t=xo(),re.updateQueue=t,t.events=[e];else{var r=t.events;r===null?t.events=[e]:r.push(e)}}function Rf(e){var t=Ae().memoizedState;return Xh({ref:t,nextImpl:e}),function(){if(ue&2)throw Error(H(440));return t.impl.apply(void 0,arguments)}}function Af(e,t){return go(4,2,e,t)}function Bf(e,t){return go(4,4,e,t)}function Mf(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _f(e,t,r){r=r!=null?r.concat([e]):null,go(4,4,Mf.bind(null,t,e),r)}function md(){}function Lf(e,t){var r=Ae();t=t===void 0?null:t;var n=r.memoizedState;return t!==null&&cd(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Of(e,t){var r=Ae();t=t===void 0?null:t;var n=r.memoizedState;if(t!==null&&cd(t,n[1]))return n[0];if(n=e(),Sr){_a(!0);try{e()}finally{_a(!1)}}return r.memoizedState=[n,t],n}function bd(e,t,r){return r===void 0||ya&1073741824&&!(ie&261930)?e.memoizedState=t:(e.memoizedState=r,e=T0(),re.lanes|=e,tr|=e,r)}function If(e,t,r,n){return Ft(r,t)?r:ln.current!==null?(e=bd(e,r,n),Ft(e,t)||(Oe=!0),e):!(ya&42)||ya&1073741824&&!(ie&261930)?(Oe=!0,e.memoizedState=r):(e=T0(),re.lanes|=e,tr|=e,t)}function Uf(e,t,r,n,s){var l=pe.p;pe.p=l!==0&&8>l?l:8;var o=J.T,i={};J.T=i,vd(e,!1,t,r);try{var d=s(),u=J.S;if(u!==null&&u(i,d),d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=Hh(d,n);Jn(e,t,c,Et(e))}else Jn(e,t,n,Et(e))}catch(p){Jn(e,t,{then:function(){},status:"rejected",reason:p},Et())}finally{pe.p=l,o!==null&&i.types!==null&&(o.types=i.types),J.T=o}}function Vh(){}function nc(e,t,r,n){if(e.tag!==5)throw Error(H(476));var s=$f(e).queue;Uf(e,s,t,pr,r===null?Vh:function(){return Wf(e),r(n)})}function $f(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:pr,baseState:pr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:pr},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Wf(e){var t=$f(e);t.next===null&&(t=e.alternate.memoizedState),Jn(e,t.next.queue,{},Et())}function yd(){return Ve(hs)}function Hf(){return Ae().memoizedState}function qf(){return Ae().memoizedState}function Qh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=Et();e=qa(r);var n=Ya(t,e,r);n!==null&&(ft(n,t,r),Qn(n,t,r)),t={cache:nd()},e.payload=t;return}t=t.return}}function Zh(e,t,r){var n=Et();r={lane:n,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ho(e)?Pf(t,r):(r=ed(e,t,r,n),r!==null&&(ft(r,e,n),Gf(r,t,n)))}function Yf(e,t,r){var n=Et();Jn(e,t,r,n)}function Jn(e,t,r,n){var s={lane:n,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(ho(e))Pf(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,i=l(o,r);if(s.hasEagerState=!0,s.eagerState=i,Ft(i,o))return uo(e,t,s,0),ye===null&&co(),!1}catch{}finally{}if(r=ed(e,t,s,n),r!==null)return ft(r,e,n),Gf(r,t,n),!0}return!1}function vd(e,t,r,n){if(n={lane:2,revertLane:Fd(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ho(e)){if(t)throw Error(H(479))}else t=ed(e,r,n,2),t!==null&&ft(t,e,2)}function ho(e){var t=e.alternate;return e===re||t!==null&&t===re}function Pf(e,t){en=Ll=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Gf(e,t,r){if(r&4194048){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Dx(e,r)}}var xs={readContext:Ve,use:fo,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useLayoutEffect:ze,useInsertionEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useSyncExternalStore:ze,useId:ze,useHostTransitionStatus:ze,useFormState:ze,useActionState:ze,useOptimistic:ze,useMemoCache:ze,useCacheRefresh:ze};xs.useEffectEvent=ze;var Xf={readContext:Ve,use:fo,useCallback:function(e,t){return tt().memoizedState=[e,t===void 0?null:t],e},useContext:Ve,useEffect:_u,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,fl(4194308,4,Mf.bind(null,t,e),r)},useLayoutEffect:function(e,t){return fl(4194308,4,e,t)},useInsertionEffect:function(e,t){fl(4,2,e,t)},useMemo:function(e,t){var r=tt();t=t===void 0?null:t;var n=e();if(Sr){_a(!0);try{e()}finally{_a(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=tt();if(r!==void 0){var s=r(t);if(Sr){_a(!0);try{r(t)}finally{_a(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=Zh.bind(null,re,e),[n.memoizedState,e]},useRef:function(e){var t=tt();return e={current:e},t.memoizedState=e},useState:function(e){e=ac(e);var t=e.queue,r=Yf.bind(null,re,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:md,useDeferredValue:function(e,t){var r=tt();return bd(r,e,t)},useTransition:function(){var e=ac(!1);return e=Uf.bind(null,re,e.queue,!0,!1),tt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=re,s=tt();if(ce){if(r===void 0)throw Error(H(407));r=r()}else{if(r=t(),ye===null)throw Error(H(349));ie&127||jf(n,t,r)}s.memoizedState=r;var l={value:r,getSnapshot:t};return s.queue=l,_u(wf.bind(null,n,l,e),[e]),n.flags|=2048,on(9,{destroy:void 0},Sf.bind(null,n,l,r,t),null),r},useId:function(){var e=tt(),t=ye.identifierPrefix;if(ce){var r=ea,n=Jt;r=(n&~(1<<32-kt(n)-1)).toString(32)+r,t="_"+t+"R_"+r,r=Ol++,0<r&&(t+="H"+r.toString(32)),t+="_"}else r=qh++,t="_"+t+"r_"+r.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:yd,useFormState:Au,useActionState:Au,useOptimistic:function(e){var t=tt();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=vd.bind(null,re,!0,r),r.dispatch=t,[e,t]},useMemoCache:fd,useCacheRefresh:function(){return tt().memoizedState=Qh.bind(null,re)},useEffectEvent:function(e){var t=tt(),r={impl:e};return t.memoizedState=r,function(){if(ue&2)throw Error(H(440));return r.impl.apply(void 0,arguments)}}},jd={readContext:Ve,use:fo,useCallback:Lf,useContext:Ve,useEffect:hd,useImperativeHandle:_f,useInsertionEffect:Af,useLayoutEffect:Bf,useMemo:Of,useReducer:xl,useRef:Df,useState:function(){return xl(va)},useDebugValue:md,useDeferredValue:function(e,t){var r=Ae();return If(r,be.memoizedState,e,t)},useTransition:function(){var e=xl(va)[0],t=Ae().memoizedState;return[typeof e=="boolean"?e:Fs(e),t]},useSyncExternalStore:vf,useId:Hf,useHostTransitionStatus:yd,useFormState:Bu,useActionState:Bu,useOptimistic:function(e,t){var r=Ae();return Tf(r,be,e,t)},useMemoCache:fd,useCacheRefresh:qf};jd.useEffectEvent=Rf;var Vf={readContext:Ve,use:fo,useCallback:Lf,useContext:Ve,useEffect:hd,useImperativeHandle:_f,useInsertionEffect:Af,useLayoutEffect:Bf,useMemo:Of,useReducer:Qo,useRef:Df,useState:function(){return Qo(va)},useDebugValue:md,useDeferredValue:function(e,t){var r=Ae();return be===null?bd(r,e,t):If(r,be.memoizedState,e,t)},useTransition:function(){var e=Qo(va)[0],t=Ae().memoizedState;return[typeof e=="boolean"?e:Fs(e),t]},useSyncExternalStore:vf,useId:Hf,useHostTransitionStatus:yd,useFormState:Mu,useActionState:Mu,useOptimistic:function(e,t){var r=Ae();return be!==null?Tf(r,be,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:fd,useCacheRefresh:qf};Vf.useEffectEvent=Rf;function Zo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Te({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var sc={enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Et(),s=qa(n);s.payload=t,r!=null&&(s.callback=r),t=Ya(e,s,n),t!==null&&(ft(t,e,n),Qn(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Et(),s=qa(n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Ya(e,s,n),t!==null&&(ft(t,e,n),Qn(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Et(),n=qa(r);n.tag=2,t!=null&&(n.callback=t),t=Ya(e,n,r),t!==null&&(ft(t,e,r),Qn(t,e,r))}};function Lu(e,t,r,n,s,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,o):t.prototype&&t.prototype.isPureReactComponent?!is(r,n)||!is(s,l):!0}function Ou(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&sc.enqueueReplaceState(t,t.state,null)}function wr(e,t){var r=t;if("ref"in t){r={};for(var n in t)n!=="ref"&&(r[n]=t[n])}if(e=e.defaultProps){r===t&&(r=Te({},r));for(var s in e)r[s]===void 0&&(r[s]=e[s])}return r}function Qf(e){zl(e)}function Zf(e){console.error(e)}function Kf(e){zl(e)}function Il(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Iu(e,t,r){try{var n=e.onCaughtError;n(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function lc(e,t,r){return r=qa(r),r.tag=3,r.payload={element:null},r.callback=function(){Il(e,t)},r}function Jf(e){return e=qa(e),e.tag=3,e}function e0(e,t,r,n){var s=r.type.getDerivedStateFromError;if(typeof s=="function"){var l=n.value;e.payload=function(){return s(l)},e.callback=function(){Iu(t,r,n)}}var o=r.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){Iu(t,r,n),typeof s!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var i=n.stack;this.componentDidCatch(n.value,{componentStack:i!==null?i:""})})}function Kh(e,t,r,n,s){if(r.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=r.alternate,t!==null&&bn(t,r,s,!0),r=zt.current,r!==null){switch(r.tag){case 31:case 13:return It===null?ql():r.alternate===null&&De===0&&(De=3),r.flags&=-257,r.flags|=65536,r.lanes=s,n===Bl?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([n]):t.add(n),ii(e,n,s)),!1;case 22:return r.flags|=65536,n===Bl?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([n]):r.add(n)),ii(e,n,s)),!1}throw Error(H(435,r.tag))}return ii(e,n,s),ql(),!1}if(ce)return t=zt.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==Gi&&(e=Error(H(422),{cause:n}),ds(_t(e,r)))):(n!==Gi&&(t=Error(H(423),{cause:n}),ds(_t(t,r))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,n=_t(n,r),s=lc(e.stateNode,n,s),Vo(e,s),De!==4&&(De=2)),!1;var l=Error(H(520),{cause:n});if(l=_t(l,r),as===null?as=[l]:as.push(l),De!==4&&(De=2),t===null)return!0;n=_t(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=s&-s,r.lanes|=e,e=lc(r.stateNode,n,e),Vo(r,e),!1;case 1:if(t=r.type,l=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(Pa===null||!Pa.has(l))))return r.flags|=65536,s&=-s,r.lanes|=s,s=Jf(s),e0(s,e,r,n),Vo(r,s),!1}r=r.return}while(r!==null);return!1}var Sd=Error(H(461)),Oe=!1;function Pe(e,t,r,n){t.child=e===null?ff(t,null,r,n):jr(t,e.child,r,n)}function Uu(e,t,r,n,s){r=r.render;var l=t.ref;if("ref"in n){var o={};for(var i in n)i!=="ref"&&(o[i]=n[i])}else o=n;return vr(t),n=dd(e,t,r,o,l,s),i=ud(),e!==null&&!Oe?(pd(e,t,s),ja(e,t,s)):(ce&&i&&ad(t),t.flags|=1,Pe(e,t,n,s),t.child)}function $u(e,t,r,n,s){if(e===null){var l=r.type;return typeof l=="function"&&!td(l)&&l.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=l,t0(e,t,l,n,s)):(e=ul(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!wd(e,s)){var o=l.memoizedProps;if(r=r.compare,r=r!==null?r:is,r(o,n)&&e.ref===t.ref)return ja(e,t,s)}return t.flags|=1,e=ga(l,n),e.ref=t.ref,e.return=t,t.child=e}function t0(e,t,r,n,s){if(e!==null){var l=e.memoizedProps;if(is(l,n)&&e.ref===t.ref)if(Oe=!1,t.pendingProps=n=l,wd(e,s))e.flags&131072&&(Oe=!0);else return t.lanes=e.lanes,ja(e,t,s)}return oc(e,t,r,n,s)}function a0(e,t,r,n){var s=n.children,l=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if(t.flags&128){if(l=l!==null?l.baseLanes|r:r,e!==null){for(n=t.child=e.child,s=0;n!==null;)s=s|n.lanes|n.childLanes,n=n.sibling;n=s&~l}else n=0,t.child=null;return Wu(e,t,l,r,n)}if(r&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&pl(t,l!==null?l.cachePool:null),l!==null?zu(t,l):ec(),mf(t);else return n=t.lanes=536870912,Wu(e,t,l!==null?l.baseLanes|r:r,r,n)}else l!==null?(pl(t,l.cachePool),zu(t,l),Ba(),t.memoizedState=null):(e!==null&&pl(t,null),ec(),Ba());return Pe(e,t,s,r),t.child}function Hn(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Wu(e,t,r,n,s){var l=sd();return l=l===null?null:{parent:Le._currentValue,pool:l},t.memoizedState={baseLanes:r,cachePool:l},e!==null&&pl(t,null),ec(),mf(t),e!==null&&bn(e,t,n,!0),t.childLanes=s,null}function gl(e,t){return t=Ul({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Hu(e,t,r){return jr(t,e.child,null,r),e=gl(t,t.pendingProps),e.flags|=2,St(t),t.memoizedState=null,e}function Jh(e,t,r){var n=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ce){if(n.mode==="hidden")return e=gl(t,n),t.lanes=536870912,Hn(null,e);if(tc(t),(e=Ce)?(e=X0(e,Lt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ka!==null?{id:Jt,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},r=lf(e),r.return=t,t.child=r,Xe=t,Ce=null)):e=null,e===null)throw Ja(t);return t.lanes=536870912,null}return gl(t,n)}var l=e.memoizedState;if(l!==null){var o=l.dehydrated;if(tc(t),s)if(t.flags&256)t.flags&=-257,t=Hu(e,t,r);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(H(558));else if(Oe||bn(e,t,r,!1),s=(r&e.childLanes)!==0,Oe||s){if(n=ye,n!==null&&(o=Rx(n,r),o!==0&&o!==l.retryLane))throw l.retryLane=o,Fr(e,o),ft(n,e,o),Sd;ql(),t=Hu(e,t,r)}else e=l.treeContext,Ce=Ut(o.nextSibling),Xe=t,ce=!0,Ha=null,Lt=!1,e!==null&&cf(t,e),t=gl(t,n),t.flags|=4096;return t}return e=ga(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function hl(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(H(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function oc(e,t,r,n,s){return vr(t),r=dd(e,t,r,n,void 0,s),n=ud(),e!==null&&!Oe?(pd(e,t,s),ja(e,t,s)):(ce&&n&&ad(t),t.flags|=1,Pe(e,t,r,s),t.child)}function qu(e,t,r,n,s,l){return vr(t),t.updateQueue=null,r=yf(t,n,r,s),bf(e),n=ud(),e!==null&&!Oe?(pd(e,t,l),ja(e,t,l)):(ce&&n&&ad(t),t.flags|=1,Pe(e,t,r,l),t.child)}function Yu(e,t,r,n,s){if(vr(t),t.stateNode===null){var l=Yr,o=r.contextType;typeof o=="object"&&o!==null&&(l=Ve(o)),l=new r(n,l),t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=sc,t.stateNode=l,l._reactInternals=t,l=t.stateNode,l.props=n,l.state=t.memoizedState,l.refs={},od(t),o=r.contextType,l.context=typeof o=="object"&&o!==null?Ve(o):Yr,l.state=t.memoizedState,o=r.getDerivedStateFromProps,typeof o=="function"&&(Zo(t,r,o,n),l.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(o=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),o!==l.state&&sc.enqueueReplaceState(l,l.state,null),Kn(t,n,l,s),Zn(),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){l=t.stateNode;var i=t.memoizedProps,d=wr(r,i);l.props=d;var u=l.context,c=r.contextType;o=Yr,typeof c=="object"&&c!==null&&(o=Ve(c));var p=r.getDerivedStateFromProps;c=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function",i=t.pendingProps!==i,c||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(i||u!==o)&&Ou(t,l,n,o),Da=!1;var h=t.memoizedState;l.state=h,Kn(t,n,l,s),Zn(),u=t.memoizedState,i||h!==u||Da?(typeof p=="function"&&(Zo(t,r,p,n),u=t.memoizedState),(d=Da||Lu(t,r,d,n,h,u,o))?(c||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),l.props=n,l.state=u,l.context=o,n=d):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,Ki(e,t),o=t.memoizedProps,c=wr(r,o),l.props=c,p=t.pendingProps,h=l.context,u=r.contextType,d=Yr,typeof u=="object"&&u!==null&&(d=Ve(u)),i=r.getDerivedStateFromProps,(u=typeof i=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==p||h!==d)&&Ou(t,l,n,d),Da=!1,h=t.memoizedState,l.state=h,Kn(t,n,l,s),Zn();var v=t.memoizedState;o!==p||h!==v||Da||e!==null&&e.dependencies!==null&&Al(e.dependencies)?(typeof i=="function"&&(Zo(t,r,i,n),v=t.memoizedState),(c=Da||Lu(t,r,c,n,h,v,d)||e!==null&&e.dependencies!==null&&Al(e.dependencies))?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,v,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,v,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),l.props=n,l.state=v,l.context=d,n=c):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return l=n,hl(e,t),n=(t.flags&128)!==0,l||n?(l=t.stateNode,r=n&&typeof r.getDerivedStateFromError!="function"?null:l.render(),t.flags|=1,e!==null&&n?(t.child=jr(t,e.child,null,s),t.child=jr(t,null,r,s)):Pe(e,t,r,s),t.memoizedState=l.state,e=t.child):e=ja(e,t,s),e}function Pu(e,t,r,n){return yr(),t.flags|=256,Pe(e,t,r,n),t.child}var Ko={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jo(e){return{baseLanes:e,cachePool:uf()}}function ei(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=Ct),e}function r0(e,t,r){var n=t.pendingProps,s=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(Re.current&2)!==0),o&&(s=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(ce){if(s?Aa(t):Ba(),(e=Ce)?(e=X0(e,Lt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ka!==null?{id:Jt,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},r=lf(e),r.return=t,t.child=r,Xe=t,Ce=null)):e=null,e===null)throw Ja(t);return jc(e)?t.lanes=32:t.lanes=536870912,null}var i=n.children;return n=n.fallback,s?(Ba(),s=t.mode,i=Ul({mode:"hidden",children:i},s),n=xr(n,s,r,null),i.return=t,n.return=t,i.sibling=n,t.child=i,n=t.child,n.memoizedState=Jo(r),n.childLanes=ei(e,o,r),t.memoizedState=Ko,Hn(null,n)):(Aa(t),ic(t,i))}var d=e.memoizedState;if(d!==null&&(i=d.dehydrated,i!==null)){if(l)t.flags&256?(Aa(t),t.flags&=-257,t=ti(e,t,r)):t.memoizedState!==null?(Ba(),t.child=e.child,t.flags|=128,t=null):(Ba(),i=n.fallback,s=t.mode,n=Ul({mode:"visible",children:n.children},s),i=xr(i,s,r,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,jr(t,e.child,null,r),n=t.child,n.memoizedState=Jo(r),n.childLanes=ei(e,o,r),t.memoizedState=Ko,t=Hn(null,n));else if(Aa(t),jc(i)){if(o=i.nextSibling&&i.nextSibling.dataset,o)var u=o.dgst;o=u,n=Error(H(419)),n.stack="",n.digest=o,ds({value:n,source:null,stack:null}),t=ti(e,t,r)}else if(Oe||bn(e,t,r,!1),o=(r&e.childLanes)!==0,Oe||o){if(o=ye,o!==null&&(n=Rx(o,r),n!==0&&n!==d.retryLane))throw d.retryLane=n,Fr(e,n),ft(o,e,n),Sd;vc(i)||ql(),t=ti(e,t,r)}else vc(i)?(t.flags|=192,t.child=e.child,t=null):(e=d.treeContext,Ce=Ut(i.nextSibling),Xe=t,ce=!0,Ha=null,Lt=!1,e!==null&&cf(t,e),t=ic(t,n.children),t.flags|=4096);return t}return s?(Ba(),i=n.fallback,s=t.mode,d=e.child,u=d.sibling,n=ga(d,{mode:"hidden",children:n.children}),n.subtreeFlags=d.subtreeFlags&65011712,u!==null?i=ga(u,i):(i=xr(i,s,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,Hn(null,n),n=t.child,i=e.child.memoizedState,i===null?i=Jo(r):(s=i.cachePool,s!==null?(d=Le._currentValue,s=s.parent!==d?{parent:d,pool:d}:s):s=uf(),i={baseLanes:i.baseLanes|r,cachePool:s}),n.memoizedState=i,n.childLanes=ei(e,o,r),t.memoizedState=Ko,Hn(e.child,n)):(Aa(t),r=e.child,e=r.sibling,r=ga(r,{mode:"visible",children:n.children}),r.return=t,r.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=r,t.memoizedState=null,r)}function ic(e,t){return t=Ul({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ul(e,t){return e=wt(22,e,null,t),e.lanes=0,e}function ti(e,t,r){return jr(t,e.child,null,r),e=ic(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Gu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Vi(e.return,t,r)}function ai(e,t,r,n,s,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s,treeForkCount:l}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s,o.treeForkCount=l)}function n0(e,t,r){var n=t.pendingProps,s=n.revealOrder,l=n.tail;n=n.children;var o=Re.current,i=(o&2)!==0;if(i?(o=o&1|2,t.flags|=128):o&=1,Se(Re,o),Pe(e,t,n,r),n=ce?cs:0,!i&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gu(e,r,t);else if(e.tag===19)Gu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&_l(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),ai(t,!1,s,r,l,n);break;case"backwards":case"unstable_legacy-backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&_l(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}ai(t,!0,r,null,l,n);break;case"together":ai(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function ja(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),tr|=t.lanes,!(r&t.childLanes))if(e!==null){if(bn(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,r=ga(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ga(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function wd(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Al(e)))}function em(e,t,r){switch(t.tag){case 3:Tl(t,t.stateNode.containerInfo),Ra(t,Le,e.memoizedState.cache),yr();break;case 27:case 5:_i(t);break;case 4:Tl(t,t.stateNode.containerInfo);break;case 10:Ra(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,tc(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Aa(t),t.flags|=128,null):r&t.child.childLanes?r0(e,t,r):(Aa(t),e=ja(e,t,r),e!==null?e.sibling:null);Aa(t);break;case 19:var s=(e.flags&128)!==0;if(n=(r&t.childLanes)!==0,n||(bn(e,t,r,!1),n=(r&t.childLanes)!==0),s){if(n)return n0(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Se(Re,Re.current),n)break;return null;case 22:return t.lanes=0,a0(e,t,r,t.pendingProps);case 24:Ra(t,Le,e.memoizedState.cache)}return ja(e,t,r)}function s0(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)Oe=!0;else{if(!wd(e,r)&&!(t.flags&128))return Oe=!1,em(e,t,r);Oe=!!(e.flags&131072)}else Oe=!1,ce&&t.flags&1048576&&of(t,cs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=cr(t.elementType),t.type=e,typeof e=="function")td(e)?(n=wr(e,n),t.tag=1,t=Yu(null,t,e,n,r)):(t.tag=0,t=oc(null,t,e,n,r));else{if(e!=null){var s=e.$$typeof;if(s===$c){t.tag=11,t=Uu(null,t,e,n,r);break e}else if(s===Wc){t.tag=14,t=$u(null,t,e,n,r);break e}}throw t=Bi(e)||e,Error(H(306,t,""))}}return t;case 0:return oc(e,t,t.type,t.pendingProps,r);case 1:return n=t.type,s=wr(n,t.pendingProps),Yu(e,t,n,s,r);case 3:e:{if(Tl(t,t.stateNode.containerInfo),e===null)throw Error(H(387));n=t.pendingProps;var l=t.memoizedState;s=l.element,Ki(e,t),Kn(t,n,null,r);var o=t.memoizedState;if(n=o.cache,Ra(t,Le,n),n!==l.cache&&Qi(t,[Le],r,!0),Zn(),n=o.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){t=Pu(e,t,n,r);break e}else if(n!==s){s=_t(Error(H(424)),t),ds(s),t=Pu(e,t,n,r);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ce=Ut(e.firstChild),Xe=t,ce=!0,Ha=null,Lt=!0,r=ff(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(yr(),n===s){t=ja(e,t,r);break e}Pe(e,t,n,r)}t=t.child}return t;case 26:return hl(e,t),e===null?(r=xp(t.type,null,t.pendingProps,null))?t.memoizedState=r:ce||(r=t.type,e=t.pendingProps,n=Xl(Wa.current).createElement(r),n[Ge]=t,n[mt]=e,Qe(n,r,e),He(n),t.stateNode=n):t.memoizedState=xp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return _i(t),e===null&&ce&&(n=t.stateNode=V0(t.type,t.pendingProps,Wa.current),Xe=t,Lt=!0,s=Ce,rr(t.type)?(Sc=s,Ce=Ut(n.firstChild)):Ce=s),Pe(e,t,t.pendingProps.children,r),hl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ce&&((s=n=Ce)&&(n=zm(n,t.type,t.pendingProps,Lt),n!==null?(t.stateNode=n,Xe=t,Ce=Ut(n.firstChild),Lt=!1,s=!0):s=!1),s||Ja(t)),_i(t),s=t.type,l=t.pendingProps,o=e!==null?e.memoizedProps:null,n=l.children,bc(s,l)?n=null:o!==null&&bc(s,o)&&(t.flags|=32),t.memoizedState!==null&&(s=dd(e,t,Yh,null,null,r),hs._currentValue=s),hl(e,t),Pe(e,t,n,r),t.child;case 6:return e===null&&ce&&((e=r=Ce)&&(r=Dm(r,t.pendingProps,Lt),r!==null?(t.stateNode=r,Xe=t,Ce=null,e=!0):e=!1),e||Ja(t)),null;case 13:return r0(e,t,r);case 4:return Tl(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=jr(t,null,n,r):Pe(e,t,n,r),t.child;case 11:return Uu(e,t,t.type,t.pendingProps,r);case 7:return Pe(e,t,t.pendingProps,r),t.child;case 8:return Pe(e,t,t.pendingProps.children,r),t.child;case 12:return Pe(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,Ra(t,t.type,n.value),Pe(e,t,n.children,r),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,vr(t),s=Ve(s),n=n(s),t.flags|=1,Pe(e,t,n,r),t.child;case 14:return $u(e,t,t.type,t.pendingProps,r);case 15:return t0(e,t,t.type,t.pendingProps,r);case 19:return n0(e,t,r);case 31:return Jh(e,t,r);case 22:return a0(e,t,r,t.pendingProps);case 24:return vr(t),n=Ve(Le),e===null?(s=sd(),s===null&&(s=ye,l=nd(),s.pooledCache=l,l.refCount++,l!==null&&(s.pooledCacheLanes|=r),s=l),t.memoizedState={parent:n,cache:s},od(t),Ra(t,Le,s)):(e.lanes&r&&(Ki(e,t),Kn(t,null,null,r),Zn()),s=e.memoizedState,l=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Ra(t,Le,n)):(n=l.cache,Ra(t,Le,n),n!==s.cache&&Qi(t,[Le],r,!0))),Pe(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(H(156,t.tag))}function la(e){e.flags|=4}function ri(e,t,r,n,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(F0())e.flags|=8192;else throw gr=Bl,ld}else e.flags&=-16777217}function Xu(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!K0(t))if(F0())e.flags|=8192;else throw gr=Bl,ld}function Zs(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Fx():536870912,e.lanes|=t,cn|=t)}function _n(e,t){if(!ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function we(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&65011712,n|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function tm(e,t,r){var n=t.pendingProps;switch(rd(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(t),null;case 1:return we(t),null;case 3:return r=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ha(Le),an(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Dr(t)?la(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xo())),we(t),null;case 26:var s=t.type,l=t.memoizedState;return e===null?(la(t),l!==null?(we(t),Xu(t,l)):(we(t),ri(t,s,null,n,r))):l?l!==e.memoizedState?(la(t),we(t),Xu(t,l)):(we(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&la(t),we(t),ri(t,s,e,n,r)),null;case 27:if(kl(t),r=Wa.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&la(t);else{if(!n){if(t.stateNode===null)throw Error(H(166));return we(t),null}e=aa.current,Dr(t)?wu(t):(e=V0(s,n,r),t.stateNode=e,la(t))}return we(t),null;case 5:if(kl(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&la(t);else{if(!n){if(t.stateNode===null)throw Error(H(166));return we(t),null}if(l=aa.current,Dr(t))wu(t);else{var o=Xl(Wa.current);switch(l){case 1:l=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:l=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":l=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":l=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":l=o.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof n.is=="string"?o.createElement("select",{is:n.is}):o.createElement("select"),n.multiple?l.multiple=!0:n.size&&(l.size=n.size);break;default:l=typeof n.is=="string"?o.createElement(s,{is:n.is}):o.createElement(s)}}l[Ge]=t,l[mt]=n;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)l.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=l;e:switch(Qe(l,s,n),s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&la(t)}}return we(t),ri(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,r),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&la(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(H(166));if(e=Wa.current,Dr(t)){if(e=t.stateNode,r=t.memoizedProps,n=null,s=Xe,s!==null)switch(s.tag){case 27:case 5:n=s.memoizedProps}e[Ge]=t,e=!!(e.nodeValue===r||n!==null&&n.suppressHydrationWarning===!0||Y0(e.nodeValue,r)),e||Ja(t,!0)}else e=Xl(e).createTextNode(n),e[Ge]=t,t.stateNode=e}return we(t),null;case 31:if(r=t.memoizedState,e===null||e.memoizedState!==null){if(n=Dr(t),r!==null){if(e===null){if(!n)throw Error(H(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(557));e[Ge]=t}else yr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;we(t),e=!1}else r=Xo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return t.flags&256?(St(t),t):(St(t),null);if(t.flags&128)throw Error(H(558))}return we(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=Dr(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(H(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[Ge]=t}else yr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;we(t),s=!1}else s=Xo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(St(t),t):(St(t),null)}return St(t),t.flags&128?(t.lanes=r,t):(r=n!==null,e=e!==null&&e.memoizedState!==null,r&&(n=t.child,s=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(s=n.alternate.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==s&&(n.flags|=2048)),r!==e&&r&&(t.child.flags|=8192),Zs(t,t.updateQueue),we(t),null);case 4:return an(),e===null&&zd(t.stateNode.containerInfo),we(t),null;case 10:return ha(t.type),we(t),null;case 19:if(qe(Re),n=t.memoizedState,n===null)return we(t),null;if(s=(t.flags&128)!==0,l=n.rendering,l===null)if(s)_n(n,!1);else{if(De!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=_l(e),l!==null){for(t.flags|=128,_n(n,!1),e=l.updateQueue,t.updateQueue=e,Zs(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)sf(r,e),r=r.sibling;return Se(Re,Re.current&1|2),ce&&da(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&Nt()>Wl&&(t.flags|=128,s=!0,_n(n,!1),t.lanes=4194304)}else{if(!s)if(e=_l(l),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Zs(t,e),_n(n,!0),n.tail===null&&n.tailMode==="hidden"&&!l.alternate&&!ce)return we(t),null}else 2*Nt()-n.renderingStartTime>Wl&&r!==536870912&&(t.flags|=128,s=!0,_n(n,!1),t.lanes=4194304);n.isBackwards?(l.sibling=t.child,t.child=l):(e=n.last,e!==null?e.sibling=l:t.child=l,n.last=l)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=Nt(),e.sibling=null,r=Re.current,Se(Re,s?r&1|2:r&1),ce&&da(t,n.treeForkCount),e):(we(t),null);case 22:case 23:return St(t),id(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?r&536870912&&!(t.flags&128)&&(we(t),t.subtreeFlags&6&&(t.flags|=8192)):we(t),r=t.updateQueue,r!==null&&Zs(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),e!==null&&qe(fr),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ha(Le),we(t),null;case 25:return null;case 30:return null}throw Error(H(156,t.tag))}function am(e,t){switch(rd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ha(Le),an(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return kl(t),null;case 31:if(t.memoizedState!==null){if(St(t),t.alternate===null)throw Error(H(340));yr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(St(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));yr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qe(Re),null;case 4:return an(),null;case 10:return ha(t.type),null;case 22:case 23:return St(t),id(),e!==null&&qe(fr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ha(Le),null;case 25:return null;default:return null}}function l0(e,t){switch(rd(t),t.tag){case 3:ha(Le),an();break;case 26:case 27:case 5:kl(t);break;case 4:an();break;case 31:t.memoizedState!==null&&St(t);break;case 13:St(t);break;case 19:qe(Re);break;case 10:ha(t.type);break;case 22:case 23:St(t),id(),e!==null&&qe(fr);break;case 24:ha(Le)}}function zs(e,t){try{var r=t.updateQueue,n=r!==null?r.lastEffect:null;if(n!==null){var s=n.next;r=s;do{if((r.tag&e)===e){n=void 0;var l=r.create,o=r.inst;n=l(),o.destroy=n}r=r.next}while(r!==s)}}catch(i){ge(t,t.return,i)}}function er(e,t,r){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var l=s.next;n=l;do{if((n.tag&e)===e){var o=n.inst,i=o.destroy;if(i!==void 0){o.destroy=void 0,s=t;var d=r,u=i;try{u()}catch(c){ge(s,d,c)}}}n=n.next}while(n!==l)}}catch(c){ge(t,t.return,c)}}function o0(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{hf(t,r)}catch(n){ge(e,e.return,n)}}}function i0(e,t,r){r.props=wr(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(n){ge(e,t,n)}}function es(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof r=="function"?e.refCleanup=r(n):r.current=n}}catch(s){ge(e,t,s)}}function ta(e,t){var r=e.ref,n=e.refCleanup;if(r!==null)if(typeof n=="function")try{n()}catch(s){ge(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(s){ge(e,t,s)}else r.current=null}function c0(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(s){ge(e,e.return,s)}}function ni(e,t,r){try{var n=e.stateNode;Cm(n,e.type,r,t),n[mt]=t}catch(s){ge(e,e.return,s)}}function d0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&rr(e.type)||e.tag===4}function si(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||d0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&rr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=xa));else if(n!==4&&(n===27&&rr(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(cc(e,t,r),e=e.sibling;e!==null;)cc(e,t,r),e=e.sibling}function $l(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(n===27&&rr(e.type)&&(r=e.stateNode),e=e.child,e!==null))for($l(e,t,r),e=e.sibling;e!==null;)$l(e,t,r),e=e.sibling}function u0(e){var t=e.stateNode,r=e.memoizedProps;try{for(var n=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Qe(t,n,r),t[Ge]=e,t[mt]=r}catch(l){ge(e,e.return,l)}}var ua=!1,_e=!1,li=!1,Vu=typeof WeakSet=="function"?WeakSet:Set,We=null;function rm(e,t){if(e=e.containerInfo,hc=Kl,e=Zx(e),Kc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var o=0,i=-1,d=-1,u=0,c=0,p=e,h=null;t:for(;;){for(var v;p!==r||s!==0&&p.nodeType!==3||(i=o+s),p!==l||n!==0&&p.nodeType!==3||(d=o+n),p.nodeType===3&&(o+=p.nodeValue.length),(v=p.firstChild)!==null;)h=p,p=v;for(;;){if(p===e)break t;if(h===r&&++u===s&&(i=o),h===l&&++c===n&&(d=o),(v=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=v}r=i===-1||d===-1?null:{start:i,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(mc={focusedElem:e,selectionRange:r},Kl=!1,We=t;We!==null;)if(t=We,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,We=e;else for(;We!==null;){switch(t=We,l=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)s=e[r],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&l!==null){e=void 0,r=t,s=l.memoizedProps,l=l.memoizedState,n=r.stateNode;try{var w=wr(r.type,s);e=n.getSnapshotBeforeUpdate(w,l),n.__reactInternalSnapshotBeforeUpdate=e}catch(j){ge(r,r.return,j)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)yc(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(H(163))}if(e=t.sibling,e!==null){e.return=t.return,We=e;break}We=t.return}}function p0(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:ia(e,r),n&4&&zs(5,r);break;case 1:if(ia(e,r),n&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(o){ge(r,r.return,o)}else{var s=wr(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){ge(r,r.return,o)}}n&64&&o0(r),n&512&&es(r,r.return);break;case 3:if(ia(e,r),n&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{hf(e,t)}catch(o){ge(r,r.return,o)}}break;case 27:t===null&&n&4&&u0(r);case 26:case 5:ia(e,r),t===null&&n&4&&c0(r),n&512&&es(r,r.return);break;case 12:ia(e,r);break;case 31:ia(e,r),n&4&&g0(e,r);break;case 13:ia(e,r),n&4&&h0(e,r),n&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=pm.bind(null,r),Rm(e,r))));break;case 22:if(n=r.memoizedState!==null||ua,!n){t=t!==null&&t.memoizedState!==null||_e,s=ua;var l=_e;ua=n,(_e=t)&&!l?ca(e,r,(r.subtreeFlags&8772)!==0):ia(e,r),ua=s,_e=l}break;case 30:break;default:ia(e,r)}}function x0(e){var t=e.alternate;t!==null&&(e.alternate=null,x0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Pc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ke=null,pt=!1;function oa(e,t,r){for(r=r.child;r!==null;)f0(e,t,r),r=r.sibling}function f0(e,t,r){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(ws,r)}catch{}switch(r.tag){case 26:_e||ta(r,t),oa(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:_e||ta(r,t);var n=ke,s=pt;rr(r.type)&&(ke=r.stateNode,pt=!1),oa(e,t,r),ns(r.stateNode),ke=n,pt=s;break;case 5:_e||ta(r,t);case 6:if(n=ke,s=pt,ke=null,oa(e,t,r),ke=n,pt=s,ke!==null)if(pt)try{(ke.nodeType===9?ke.body:ke.nodeName==="HTML"?ke.ownerDocument.body:ke).removeChild(r.stateNode)}catch(l){ge(r,t,l)}else try{ke.removeChild(r.stateNode)}catch(l){ge(r,t,l)}break;case 18:ke!==null&&(pt?(e=ke,ip(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),xn(e)):ip(ke,r.stateNode));break;case 4:n=ke,s=pt,ke=r.stateNode.containerInfo,pt=!0,oa(e,t,r),ke=n,pt=s;break;case 0:case 11:case 14:case 15:er(2,r,t),_e||er(4,r,t),oa(e,t,r);break;case 1:_e||(ta(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"&&i0(r,t,n)),oa(e,t,r);break;case 21:oa(e,t,r);break;case 22:_e=(n=_e)||r.memoizedState!==null,oa(e,t,r),_e=n;break;default:oa(e,t,r)}}function g0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{xn(e)}catch(r){ge(t,t.return,r)}}}function h0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{xn(e)}catch(r){ge(t,t.return,r)}}function nm(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Vu),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Vu),t;default:throw Error(H(435,e.tag))}}function Ks(e,t){var r=nm(e);t.forEach(function(n){if(!r.has(n)){r.add(n);var s=xm.bind(null,e,n);n.then(s,s)}})}function ct(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n],l=e,o=t,i=o;e:for(;i!==null;){switch(i.tag){case 27:if(rr(i.type)){ke=i.stateNode,pt=!1;break e}break;case 5:ke=i.stateNode,pt=!1;break e;case 3:case 4:ke=i.stateNode.containerInfo,pt=!0;break e}i=i.return}if(ke===null)throw Error(H(160));f0(l,o,s),ke=null,pt=!1,l=s.alternate,l!==null&&(l.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)m0(t,e),t=t.sibling}var qt=null;function m0(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ct(t,e),dt(e),n&4&&(er(3,e,e.return),zs(3,e),er(5,e,e.return));break;case 1:ct(t,e),dt(e),n&512&&(_e||r===null||ta(r,r.return)),n&64&&ua&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?n:r.concat(n))));break;case 26:var s=qt;if(ct(t,e),dt(e),n&512&&(_e||r===null||ta(r,r.return)),n&4){var l=r!==null?r.memoizedState:null;if(n=e.memoizedState,r===null)if(n===null)if(e.stateNode===null){e:{n=e.type,r=e.memoizedProps,s=s.ownerDocument||s;t:switch(n){case"title":l=s.getElementsByTagName("title")[0],(!l||l[Ts]||l[Ge]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=s.createElement(n),s.head.insertBefore(l,s.querySelector("head > title"))),Qe(l,n,r),l[Ge]=e,He(l),n=l;break e;case"link":var o=gp("link","href",s).get(n+(r.href||""));if(o){for(var i=0;i<o.length;i++)if(l=o[i],l.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&l.getAttribute("rel")===(r.rel==null?null:r.rel)&&l.getAttribute("title")===(r.title==null?null:r.title)&&l.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){o.splice(i,1);break t}}l=s.createElement(n),Qe(l,n,r),s.head.appendChild(l);break;case"meta":if(o=gp("meta","content",s).get(n+(r.content||""))){for(i=0;i<o.length;i++)if(l=o[i],l.getAttribute("content")===(r.content==null?null:""+r.content)&&l.getAttribute("name")===(r.name==null?null:r.name)&&l.getAttribute("property")===(r.property==null?null:r.property)&&l.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&l.getAttribute("charset")===(r.charSet==null?null:r.charSet)){o.splice(i,1);break t}}l=s.createElement(n),Qe(l,n,r),s.head.appendChild(l);break;default:throw Error(H(468,n))}l[Ge]=e,He(l),n=l}e.stateNode=n}else hp(s,e.type,e.stateNode);else e.stateNode=fp(s,n,e.memoizedProps);else l!==n?(l===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):l.count--,n===null?hp(s,e.type,e.stateNode):fp(s,n,e.memoizedProps)):n===null&&e.stateNode!==null&&ni(e,e.memoizedProps,r.memoizedProps)}break;case 27:ct(t,e),dt(e),n&512&&(_e||r===null||ta(r,r.return)),r!==null&&n&4&&ni(e,e.memoizedProps,r.memoizedProps);break;case 5:if(ct(t,e),dt(e),n&512&&(_e||r===null||ta(r,r.return)),e.flags&32){s=e.stateNode;try{nn(s,"")}catch(w){ge(e,e.return,w)}}n&4&&e.stateNode!=null&&(s=e.memoizedProps,ni(e,s,r!==null?r.memoizedProps:s)),n&1024&&(li=!0);break;case 6:if(ct(t,e),dt(e),n&4){if(e.stateNode===null)throw Error(H(162));n=e.memoizedProps,r=e.stateNode;try{r.nodeValue=n}catch(w){ge(e,e.return,w)}}break;case 3:if(yl=null,s=qt,qt=Vl(t.containerInfo),ct(t,e),qt=s,dt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{xn(t.containerInfo)}catch(w){ge(e,e.return,w)}li&&(li=!1,b0(e));break;case 4:n=qt,qt=Vl(e.stateNode.containerInfo),ct(t,e),dt(e),qt=n;break;case 12:ct(t,e),dt(e);break;case 31:ct(t,e),dt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ks(e,n)));break;case 13:ct(t,e),dt(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(mo=Nt()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ks(e,n)));break;case 22:s=e.memoizedState!==null;var d=r!==null&&r.memoizedState!==null,u=ua,c=_e;if(ua=u||s,_e=c||d,ct(t,e),_e=c,ua=u,dt(e),n&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(r===null||d||ua||_e||dr(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){d=r=t;try{if(l=d.stateNode,s)o=l.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{i=d.stateNode;var p=d.memoizedProps.style,h=p!=null&&p.hasOwnProperty("display")?p.display:null;i.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(w){ge(d,d.return,w)}}}else if(t.tag===6){if(r===null){d=t;try{d.stateNode.nodeValue=s?"":d.memoizedProps}catch(w){ge(d,d.return,w)}}}else if(t.tag===18){if(r===null){d=t;try{var v=d.stateNode;s?cp(v,!0):cp(d.stateNode,!1)}catch(w){ge(d,d.return,w)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(r=n.retryQueue,r!==null&&(n.retryQueue=null,Ks(e,r))));break;case 19:ct(t,e),dt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ks(e,n)));break;case 30:break;case 21:break;default:ct(t,e),dt(e)}}function dt(e){var t=e.flags;if(t&2){try{for(var r,n=e.return;n!==null;){if(d0(n)){r=n;break}n=n.return}if(r==null)throw Error(H(160));switch(r.tag){case 27:var s=r.stateNode,l=si(e);$l(e,l,s);break;case 5:var o=r.stateNode;r.flags&32&&(nn(o,""),r.flags&=-33);var i=si(e);$l(e,i,o);break;case 3:case 4:var d=r.stateNode.containerInfo,u=si(e);cc(e,u,d);break;default:throw Error(H(161))}}catch(c){ge(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function b0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;b0(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ia(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)p0(e,t.alternate,t),t=t.sibling}function dr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:er(4,t,t.return),dr(t);break;case 1:ta(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&i0(t,t.return,r),dr(t);break;case 27:ns(t.stateNode);case 26:case 5:ta(t,t.return),dr(t);break;case 22:t.memoizedState===null&&dr(t);break;case 30:dr(t);break;default:dr(t)}e=e.sibling}}function ca(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,s=e,l=t,o=l.flags;switch(l.tag){case 0:case 11:case 15:ca(s,l,r),zs(4,l);break;case 1:if(ca(s,l,r),n=l,s=n.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(u){ge(n,n.return,u)}if(n=l,s=n.updateQueue,s!==null){var i=n.stateNode;try{var d=s.shared.hiddenCallbacks;if(d!==null)for(s.shared.hiddenCallbacks=null,s=0;s<d.length;s++)gf(d[s],i)}catch(u){ge(n,n.return,u)}}r&&o&64&&o0(l),es(l,l.return);break;case 27:u0(l);case 26:case 5:ca(s,l,r),r&&n===null&&o&4&&c0(l),es(l,l.return);break;case 12:ca(s,l,r);break;case 31:ca(s,l,r),r&&o&4&&g0(s,l);break;case 13:ca(s,l,r),r&&o&4&&h0(s,l);break;case 22:l.memoizedState===null&&ca(s,l,r),es(l,l.return);break;case 30:break;default:ca(s,l,r)}t=t.sibling}}function Cd(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Es(r))}function Nd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Es(e))}function Ht(e,t,r,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)y0(e,t,r,n),t=t.sibling}function y0(e,t,r,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Ht(e,t,r,n),s&2048&&zs(9,t);break;case 1:Ht(e,t,r,n);break;case 3:Ht(e,t,r,n),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Es(e)));break;case 12:if(s&2048){Ht(e,t,r,n),e=t.stateNode;try{var l=t.memoizedProps,o=l.id,i=l.onPostCommit;typeof i=="function"&&i(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(d){ge(t,t.return,d)}}else Ht(e,t,r,n);break;case 31:Ht(e,t,r,n);break;case 13:Ht(e,t,r,n);break;case 23:break;case 22:l=t.stateNode,o=t.alternate,t.memoizedState!==null?l._visibility&2?Ht(e,t,r,n):ts(e,t):l._visibility&2?Ht(e,t,r,n):(l._visibility|=2,Mr(e,t,r,n,(t.subtreeFlags&10256)!==0||!1)),s&2048&&Cd(o,t);break;case 24:Ht(e,t,r,n),s&2048&&Nd(t.alternate,t);break;default:Ht(e,t,r,n)}}function Mr(e,t,r,n,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var l=e,o=t,i=r,d=n,u=o.flags;switch(o.tag){case 0:case 11:case 15:Mr(l,o,i,d,s),zs(8,o);break;case 23:break;case 22:var c=o.stateNode;o.memoizedState!==null?c._visibility&2?Mr(l,o,i,d,s):ts(l,o):(c._visibility|=2,Mr(l,o,i,d,s)),s&&u&2048&&Cd(o.alternate,o);break;case 24:Mr(l,o,i,d,s),s&&u&2048&&Nd(o.alternate,o);break;default:Mr(l,o,i,d,s)}t=t.sibling}}function ts(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,n=t,s=n.flags;switch(n.tag){case 22:ts(r,n),s&2048&&Cd(n.alternate,n);break;case 24:ts(r,n),s&2048&&Nd(n.alternate,n);break;default:ts(r,n)}t=t.sibling}}var qn=8192;function Rr(e,t,r){if(e.subtreeFlags&qn)for(e=e.child;e!==null;)v0(e,t,r),e=e.sibling}function v0(e,t,r){switch(e.tag){case 26:Rr(e,t,r),e.flags&qn&&e.memoizedState!==null&&qm(r,qt,e.memoizedState,e.memoizedProps);break;case 5:Rr(e,t,r);break;case 3:case 4:var n=qt;qt=Vl(e.stateNode.containerInfo),Rr(e,t,r),qt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=qn,qn=16777216,Rr(e,t,r),qn=n):Rr(e,t,r));break;default:Rr(e,t,r)}}function j0(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ln(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var r=0;r<t.length;r++){var n=t[r];We=n,w0(n,e)}j0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)S0(e),e=e.sibling}function S0(e){switch(e.tag){case 0:case 11:case 15:Ln(e),e.flags&2048&&er(9,e,e.return);break;case 3:Ln(e);break;case 12:Ln(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ml(e)):Ln(e);break;default:Ln(e)}}function ml(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var r=0;r<t.length;r++){var n=t[r];We=n,w0(n,e)}j0(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:er(8,t,t.return),ml(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,ml(t));break;default:ml(t)}e=e.sibling}}function w0(e,t){for(;We!==null;){var r=We;switch(r.tag){case 0:case 11:case 15:er(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var n=r.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Es(r.memoizedState.cache)}if(n=r.child,n!==null)n.return=r,We=n;else e:for(r=e;We!==null;){n=We;var s=n.sibling,l=n.return;if(x0(n),n===r){We=null;break e}if(s!==null){s.return=l,We=s;break e}We=l}}}var sm={getCacheForType:function(e){var t=Ve(Le),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r},cacheSignal:function(){return Ve(Le).controller.signal}},lm=typeof WeakMap=="function"?WeakMap:Map,ue=0,ye=null,oe=null,ie=0,fe=0,jt=null,Oa=!1,vn=!1,Td=!1,Sa=0,De=0,tr=0,hr=0,kd=0,Ct=0,cn=0,as=null,xt=null,dc=!1,mo=0,C0=0,Wl=1/0,Hl=null,Pa=null,Ie=0,Ga=null,dn=null,ma=0,uc=0,pc=null,N0=null,rs=0,xc=null;function Et(){return ue&2&&ie!==0?ie&-ie:J.T!==null?Fd():Ax()}function T0(){if(Ct===0)if(!(ie&536870912)||ce){var e=qs;qs<<=1,!(qs&3932160)&&(qs=262144),Ct=e}else Ct=536870912;return e=zt.current,e!==null&&(e.flags|=32),Ct}function ft(e,t,r){(e===ye&&(fe===2||fe===9)||e.cancelPendingCommit!==null)&&(un(e,0),Ia(e,ie,Ct,!1)),Ns(e,r),(!(ue&2)||e!==ye)&&(e===ye&&(!(ue&2)&&(hr|=r),De===4&&Ia(e,ie,Ct,!1)),na(e))}function k0(e,t,r){if(ue&6)throw Error(H(327));var n=!r&&(t&127)===0&&(t&e.expiredLanes)===0||Cs(e,t),s=n?cm(e,t):oi(e,t,!0),l=n;do{if(s===0){vn&&!n&&Ia(e,t,0,!1);break}else{if(r=e.current.alternate,l&&!om(r)){s=oi(e,t,!1),l=!1;continue}if(s===2){if(l=t,e.errorRecoveryDisabledLanes&l)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var i=e;s=as;var d=i.current.memoizedState.isDehydrated;if(d&&(un(i,o).flags|=256),o=oi(i,o,!1),o!==2){if(Td&&!d){i.errorRecoveryDisabledLanes|=l,hr|=l,s=4;break e}l=xt,xt=s,l!==null&&(xt===null?xt=l:xt.push.apply(xt,l))}s=o}if(l=!1,s!==2)continue}}if(s===1){un(e,0),Ia(e,t,0,!0);break}e:{switch(n=e,l=s,l){case 0:case 1:throw Error(H(345));case 4:if((t&4194048)!==t)break;case 6:Ia(n,t,Ct,!Oa);break e;case 2:xt=null;break;case 3:case 5:break;default:throw Error(H(329))}if((t&62914560)===t&&(s=mo+300-Nt(),10<s)){if(Ia(n,t,Ct,!Oa),so(n,0,!0)!==0)break e;ma=t,n.timeoutHandle=G0(Qu.bind(null,n,r,xt,Hl,dc,t,Ct,hr,cn,Oa,l,"Throttled",-0,0),s);break e}Qu(n,r,xt,Hl,dc,t,Ct,hr,cn,Oa,l,null,-0,0)}}break}while(!0);na(e)}function Qu(e,t,r,n,s,l,o,i,d,u,c,p,h,v){if(e.timeoutHandle=-1,p=t.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xa},v0(t,l,p);var w=(l&62914560)===l?mo-Nt():(l&4194048)===l?C0-Nt():0;if(w=Ym(p,w),w!==null){ma=l,e.cancelPendingCommit=w(Ku.bind(null,e,t,l,r,n,s,o,i,d,c,p,null,h,v)),Ia(e,l,o,!u);return}}Ku(e,t,l,r,n,s,o,i,d)}function om(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var n=0;n<r.length;n++){var s=r[n],l=s.getSnapshot;s=s.value;try{if(!Ft(l(),s))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ia(e,t,r,n){t&=~kd,t&=~hr,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var l=31-kt(s),o=1<<l;n[l]=-1,s&=~o}r!==0&&zx(e,r,t)}function bo(){return ue&6?!0:(Ds(0),!1)}function Ed(){if(oe!==null){if(fe===0)var e=oe.return;else e=oe,fa=zr=null,xd(e),Jr=null,us=0,e=oe;for(;e!==null;)l0(e.alternate,e),e=e.return;oe=null}}function un(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,km(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),ma=0,Ed(),ye=e,oe=r=ga(e.current,null),ie=t,fe=0,jt=null,Oa=!1,vn=Cs(e,t),Td=!1,cn=Ct=kd=hr=tr=De=0,xt=as=null,dc=!1,t&8&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var s=31-kt(n),l=1<<s;t|=e[s],n&=~l}return Sa=t,co(),r}function E0(e,t){re=null,J.H=xs,t===yn||t===po?(t=Eu(),fe=3):t===ld?(t=Eu(),fe=4):fe=t===Sd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,jt=t,oe===null&&(De=1,Il(e,_t(t,e.current)))}function F0(){var e=zt.current;return e===null?!0:(ie&4194048)===ie?It===null:(ie&62914560)===ie||ie&536870912?e===It:!1}function z0(){var e=J.H;return J.H=xs,e===null?xs:e}function D0(){var e=J.A;return J.A=sm,e}function ql(){De=4,Oa||(ie&4194048)!==ie&&zt.current!==null||(vn=!0),!(tr&134217727)&&!(hr&134217727)||ye===null||Ia(ye,ie,Ct,!1)}function oi(e,t,r){var n=ue;ue|=2;var s=z0(),l=D0();(ye!==e||ie!==t)&&(Hl=null,un(e,t)),t=!1;var o=De;e:do try{if(fe!==0&&oe!==null){var i=oe,d=jt;switch(fe){case 8:Ed(),o=6;break e;case 3:case 2:case 9:case 6:zt.current===null&&(t=!0);var u=fe;if(fe=0,jt=null,Xr(e,i,d,u),r&&vn){o=0;break e}break;default:u=fe,fe=0,jt=null,Xr(e,i,d,u)}}im(),o=De;break}catch(c){E0(e,c)}while(!0);return t&&e.shellSuspendCounter++,fa=zr=null,ue=n,J.H=s,J.A=l,oe===null&&(ye=null,ie=0,co()),o}function im(){for(;oe!==null;)R0(oe)}function cm(e,t){var r=ue;ue|=2;var n=z0(),s=D0();ye!==e||ie!==t?(Hl=null,Wl=Nt()+500,un(e,t)):vn=Cs(e,t);e:do try{if(fe!==0&&oe!==null){t=oe;var l=jt;t:switch(fe){case 1:fe=0,jt=null,Xr(e,t,l,1);break;case 2:case 9:if(ku(l)){fe=0,jt=null,Zu(t);break}t=function(){fe!==2&&fe!==9||ye!==e||(fe=7),na(e)},l.then(t,t);break e;case 3:fe=7;break e;case 4:fe=5;break e;case 7:ku(l)?(fe=0,jt=null,Zu(t)):(fe=0,jt=null,Xr(e,t,l,7));break;case 5:var o=null;switch(oe.tag){case 26:o=oe.memoizedState;case 5:case 27:var i=oe;if(o?K0(o):i.stateNode.complete){fe=0,jt=null;var d=i.sibling;if(d!==null)oe=d;else{var u=i.return;u!==null?(oe=u,yo(u)):oe=null}break t}}fe=0,jt=null,Xr(e,t,l,5);break;case 6:fe=0,jt=null,Xr(e,t,l,6);break;case 8:Ed(),De=6;break e;default:throw Error(H(462))}}dm();break}catch(c){E0(e,c)}while(!0);return fa=zr=null,J.H=n,J.A=s,ue=r,oe!==null?0:(ye=null,ie=0,co(),De)}function dm(){for(;oe!==null&&!A2();)R0(oe)}function R0(e){var t=s0(e.alternate,e,Sa);e.memoizedProps=e.pendingProps,t===null?yo(e):oe=t}function Zu(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=qu(r,t,t.pendingProps,t.type,void 0,ie);break;case 11:t=qu(r,t,t.pendingProps,t.type.render,t.ref,ie);break;case 5:xd(t);default:l0(r,t),t=oe=sf(t,Sa),t=s0(r,t,Sa)}e.memoizedProps=e.pendingProps,t===null?yo(e):oe=t}function Xr(e,t,r,n){fa=zr=null,xd(t),Jr=null,us=0;var s=t.return;try{if(Kh(e,s,t,r,ie)){De=1,Il(e,_t(r,e.current)),oe=null;return}}catch(l){if(s!==null)throw oe=s,l;De=1,Il(e,_t(r,e.current)),oe=null;return}t.flags&32768?(ce||n===1?e=!0:vn||ie&536870912?e=!1:(Oa=e=!0,(n===2||n===9||n===3||n===6)&&(n=zt.current,n!==null&&n.tag===13&&(n.flags|=16384))),A0(t,e)):yo(t)}function yo(e){var t=e;do{if(t.flags&32768){A0(t,Oa);return}e=t.return;var r=tm(t.alternate,t,Sa);if(r!==null){oe=r;return}if(t=t.sibling,t!==null){oe=t;return}oe=t=e}while(t!==null);De===0&&(De=5)}function A0(e,t){do{var r=am(e.alternate,e);if(r!==null){r.flags&=32767,oe=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){oe=e;return}oe=e=r}while(e!==null);De=6,oe=null}function Ku(e,t,r,n,s,l,o,i,d){e.cancelPendingCommit=null;do vo();while(Ie!==0);if(ue&6)throw Error(H(327));if(t!==null){if(t===e.current)throw Error(H(177));if(l=t.lanes|t.childLanes,l|=Jc,H2(e,r,l,o,i,d),e===ye&&(oe=ye=null,ie=0),dn=t,Ga=e,ma=r,uc=l,pc=s,N0=n,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,fm(El,function(){return O0(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,t.subtreeFlags&13878||n){n=J.T,J.T=null,s=pe.p,pe.p=2,o=ue,ue|=4;try{rm(e,t,r)}finally{ue=o,pe.p=s,J.T=n}}Ie=1,B0(),M0(),_0()}}function B0(){if(Ie===1){Ie=0;var e=Ga,t=dn,r=(t.flags&13878)!==0;if(t.subtreeFlags&13878||r){r=J.T,J.T=null;var n=pe.p;pe.p=2;var s=ue;ue|=4;try{m0(t,e);var l=mc,o=Zx(e.containerInfo),i=l.focusedElem,d=l.selectionRange;if(o!==i&&i&&i.ownerDocument&&Qx(i.ownerDocument.documentElement,i)){if(d!==null&&Kc(i)){var u=d.start,c=d.end;if(c===void 0&&(c=u),"selectionStart"in i)i.selectionStart=u,i.selectionEnd=Math.min(c,i.value.length);else{var p=i.ownerDocument||document,h=p&&p.defaultView||window;if(h.getSelection){var v=h.getSelection(),w=i.textContent.length,j=Math.min(d.start,w),S=d.end===void 0?j:Math.min(d.end,w);!v.extend&&j>S&&(o=S,S=j,j=o);var m=vu(i,j),b=vu(i,S);if(m&&b&&(v.rangeCount!==1||v.anchorNode!==m.node||v.anchorOffset!==m.offset||v.focusNode!==b.node||v.focusOffset!==b.offset)){var g=p.createRange();g.setStart(m.node,m.offset),v.removeAllRanges(),j>S?(v.addRange(g),v.extend(b.node,b.offset)):(g.setEnd(b.node,b.offset),v.addRange(g))}}}}for(p=[],v=i;v=v.parentNode;)v.nodeType===1&&p.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<p.length;i++){var y=p[i];y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}Kl=!!hc,mc=hc=null}finally{ue=s,pe.p=n,J.T=r}}e.current=t,Ie=2}}function M0(){if(Ie===2){Ie=0;var e=Ga,t=dn,r=(t.flags&8772)!==0;if(t.subtreeFlags&8772||r){r=J.T,J.T=null;var n=pe.p;pe.p=2;var s=ue;ue|=4;try{p0(e,t.alternate,t)}finally{ue=s,pe.p=n,J.T=r}}Ie=3}}function _0(){if(Ie===4||Ie===3){Ie=0,B2();var e=Ga,t=dn,r=ma,n=N0;t.subtreeFlags&10256||t.flags&10256?Ie=5:(Ie=0,dn=Ga=null,L0(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(Pa=null),Yc(r),t=t.stateNode,Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(ws,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=J.T,s=pe.p,pe.p=2,J.T=null;try{for(var l=e.onRecoverableError,o=0;o<n.length;o++){var i=n[o];l(i.value,{componentStack:i.stack})}}finally{J.T=t,pe.p=s}}ma&3&&vo(),na(e),s=e.pendingLanes,r&261930&&s&42?e===xc?rs++:(rs=0,xc=e):rs=0,Ds(0)}}function L0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Es(t)))}function vo(){return B0(),M0(),_0(),O0()}function O0(){if(Ie!==5)return!1;var e=Ga,t=uc;uc=0;var r=Yc(ma),n=J.T,s=pe.p;try{pe.p=32>r?32:r,J.T=null,r=pc,pc=null;var l=Ga,o=ma;if(Ie=0,dn=Ga=null,ma=0,ue&6)throw Error(H(331));var i=ue;if(ue|=4,S0(l.current),y0(l,l.current,o,r),ue=i,Ds(0,!1),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(ws,l)}catch{}return!0}finally{pe.p=s,J.T=n,L0(e,t)}}function Ju(e,t,r){t=_t(r,t),t=lc(e.stateNode,t,2),e=Ya(e,t,2),e!==null&&(Ns(e,2),na(e))}function ge(e,t,r){if(e.tag===3)Ju(e,e,r);else for(;t!==null;){if(t.tag===3){Ju(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Pa===null||!Pa.has(n))){e=_t(r,e),r=Jf(2),n=Ya(t,r,2),n!==null&&(e0(r,n,t,e),Ns(n,2),na(n));break}}t=t.return}}function ii(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new lm;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(Td=!0,s.add(r),e=um.bind(null,e,t,r),t.then(e,e))}function um(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,ye===e&&(ie&r)===r&&(De===4||De===3&&(ie&62914560)===ie&&300>Nt()-mo?!(ue&2)&&un(e,0):kd|=r,cn===ie&&(cn=0)),na(e)}function I0(e,t){t===0&&(t=Fx()),e=Fr(e,t),e!==null&&(Ns(e,t),na(e))}function pm(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),I0(e,r)}function xm(e,t){var r=0;switch(e.tag){case 31:case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(H(314))}n!==null&&n.delete(t),I0(e,r)}function fm(e,t){return Hc(e,t)}var Yl=null,_r=null,fc=!1,Pl=!1,ci=!1,Ua=0;function na(e){e!==_r&&e.next===null&&(_r===null?Yl=_r=e:_r=_r.next=e),Pl=!0,fc||(fc=!0,hm())}function Ds(e,t){if(!ci&&Pl){ci=!0;do for(var r=!1,n=Yl;n!==null;){if(e!==0){var s=n.pendingLanes;if(s===0)var l=0;else{var o=n.suspendedLanes,i=n.pingedLanes;l=(1<<31-kt(42|e)+1)-1,l&=s&~(o&~i),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(r=!0,ep(n,l))}else l=ie,l=so(n,n===ye?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(l&3)||Cs(n,l)||(r=!0,ep(n,l));n=n.next}while(r);ci=!1}}function gm(){U0()}function U0(){Pl=fc=!1;var e=0;Ua!==0&&Tm()&&(e=Ua);for(var t=Nt(),r=null,n=Yl;n!==null;){var s=n.next,l=$0(n,t);l===0?(n.next=null,r===null?Yl=s:r.next=s,s===null&&(_r=r)):(r=n,(e!==0||l&3)&&(Pl=!0)),n=s}Ie!==0&&Ie!==5||Ds(e),Ua!==0&&(Ua=0)}function $0(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var o=31-kt(l),i=1<<o,d=s[o];d===-1?(!(i&r)||i&n)&&(s[o]=W2(i,t)):d<=t&&(e.expiredLanes|=i),l&=~i}if(t=ye,r=ie,r=so(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,r===0||e===t&&(fe===2||fe===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Lo(n),e.callbackNode=null,e.callbackPriority=0;if(!(r&3)||Cs(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(n!==null&&Lo(n),Yc(r)){case 2:case 8:r=kx;break;case 32:r=El;break;case 268435456:r=Ex;break;default:r=El}return n=W0.bind(null,e),r=Hc(r,n),e.callbackPriority=t,e.callbackNode=r,t}return n!==null&&n!==null&&Lo(n),e.callbackPriority=2,e.callbackNode=null,2}function W0(e,t){if(Ie!==0&&Ie!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(vo()&&e.callbackNode!==r)return null;var n=ie;return n=so(e,e===ye?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(k0(e,n,t),$0(e,Nt()),e.callbackNode!=null&&e.callbackNode===r?W0.bind(null,e):null)}function ep(e,t){if(vo())return null;k0(e,t,!0)}function hm(){Em(function(){ue&6?Hc(Tx,gm):U0()})}function Fd(){if(Ua===0){var e=sn;e===0&&(e=Hs,Hs<<=1,!(Hs&261888)&&(Hs=256)),Ua=e}return Ua}function tp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:il(""+e)}function ap(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function mm(e,t,r,n,s){if(t==="submit"&&r&&r.stateNode===s){var l=tp((s[mt]||null).action),o=n.submitter;o&&(t=(t=o[mt]||null)?tp(t.formAction):o.getAttribute("formAction"),t!==null&&(l=t,o=null));var i=new lo("action","action",null,n,s);e.push({event:i,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ua!==0){var d=o?ap(s,o):new FormData(s);nc(r,{pending:!0,data:d,method:s.method,action:l},null,d)}}else typeof l=="function"&&(i.preventDefault(),d=o?ap(s,o):new FormData(s),nc(r,{pending:!0,data:d,method:s.method,action:l},l,d))},currentTarget:s}]})}}for(var di=0;di<Pi.length;di++){var ui=Pi[di],bm=ui.toLowerCase(),ym=ui[0].toUpperCase()+ui.slice(1);Pt(bm,"on"+ym)}Pt(Jx,"onAnimationEnd");Pt(ef,"onAnimationIteration");Pt(tf,"onAnimationStart");Pt("dblclick","onDoubleClick");Pt("focusin","onFocus");Pt("focusout","onBlur");Pt(Mh,"onTransitionRun");Pt(_h,"onTransitionStart");Pt(Lh,"onTransitionCancel");Pt(af,"onTransitionEnd");rn("onMouseEnter",["mouseout","mouseover"]);rn("onMouseLeave",["mouseout","mouseover"]);rn("onPointerEnter",["pointerout","pointerover"]);rn("onPointerLeave",["pointerout","pointerover"]);Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fs));function H0(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var o=n.length-1;0<=o;o--){var i=n[o],d=i.instance,u=i.currentTarget;if(i=i.listener,d!==l&&s.isPropagationStopped())break e;l=i,s.currentTarget=u;try{l(s)}catch(c){zl(c)}s.currentTarget=null,l=d}else for(o=0;o<n.length;o++){if(i=n[o],d=i.instance,u=i.currentTarget,i=i.listener,d!==l&&s.isPropagationStopped())break e;l=i,s.currentTarget=u;try{l(s)}catch(c){zl(c)}s.currentTarget=null,l=d}}}}function le(e,t){var r=t[Oi];r===void 0&&(r=t[Oi]=new Set);var n=e+"__bubble";r.has(n)||(q0(t,e,2,!1),r.add(n))}function pi(e,t,r){var n=0;t&&(n|=4),q0(r,e,n,t)}var Js="_reactListening"+Math.random().toString(36).slice(2);function zd(e){if(!e[Js]){e[Js]=!0,Bx.forEach(function(r){r!=="selectionchange"&&(vm.has(r)||pi(r,!1,e),pi(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Js]||(t[Js]=!0,pi("selectionchange",!1,t))}}function q0(e,t,r,n){switch(rg(t)){case 2:var s=Xm;break;case 8:s=Vm;break;default:s=Bd}r=s.bind(null,t,r,e),s=void 0,!Hi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function xi(e,t,r,n,s){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var i=n.stateNode.containerInfo;if(i===s)break;if(o===4)for(o=n.return;o!==null;){var d=o.tag;if((d===3||d===4)&&o.stateNode.containerInfo===s)return;o=o.return}for(;i!==null;){if(o=Ir(i),o===null)return;if(d=o.tag,d===5||d===6||d===26||d===27){n=l=o;continue e}i=i.parentNode}}n=n.return}Wx(function(){var u=l,c=Xc(r),p=[];e:{var h=rf.get(e);if(h!==void 0){var v=lo,w=e;switch(e){case"keypress":if(dl(r)===0)break e;case"keydown":case"keyup":v=xh;break;case"focusin":w="focus",v=Wo;break;case"focusout":w="blur",v=Wo;break;case"beforeblur":case"afterblur":v=Wo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=du;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=th;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=hh;break;case Jx:case ef:case tf:v=nh;break;case af:v=bh;break;case"scroll":case"scrollend":v=J2;break;case"wheel":v=vh;break;case"copy":case"cut":case"paste":v=lh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=pu;break;case"toggle":case"beforetoggle":v=Sh}var j=(t&4)!==0,S=!j&&(e==="scroll"||e==="scrollend"),m=j?h!==null?h+"Capture":null:h;j=[];for(var b=u,g;b!==null;){var y=b;if(g=y.stateNode,y=y.tag,y!==5&&y!==26&&y!==27||g===null||m===null||(y=ls(b,m),y!=null&&j.push(gs(b,y,g))),S)break;b=b.return}0<j.length&&(h=new v(h,w,null,r,c),p.push({event:h,listeners:j}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",h&&r!==Wi&&(w=r.relatedTarget||r.fromElement)&&(Ir(w)||w[hn]))break e;if((v||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,v?(w=r.relatedTarget||r.toElement,v=u,w=w?Ir(w):null,w!==null&&(S=Ss(w),j=w.tag,w!==S||j!==5&&j!==27&&j!==6)&&(w=null)):(v=null,w=u),v!==w)){if(j=du,y="onMouseLeave",m="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(j=pu,y="onPointerLeave",m="onPointerEnter",b="pointer"),S=v==null?h:Wn(v),g=w==null?h:Wn(w),h=new j(y,b+"leave",v,r,c),h.target=S,h.relatedTarget=g,y=null,Ir(c)===u&&(j=new j(m,b+"enter",w,r,c),j.target=g,j.relatedTarget=S,y=j),S=y,v&&w)t:{for(j=jm,m=v,b=w,g=0,y=m;y;y=j(y))g++;y=0;for(var T=b;T;T=j(T))y++;for(;0<g-y;)m=j(m),g--;for(;0<y-g;)b=j(b),y--;for(;g--;){if(m===b||b!==null&&m===b.alternate){j=m;break t}m=j(m),b=j(b)}j=null}else j=null;v!==null&&rp(p,h,v,j,!1),w!==null&&S!==null&&rp(p,S,w,j,!0)}}e:{if(h=u?Wn(u):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var R=hu;else if(gu(h))if(Xx)R=Rh;else{R=zh;var z=Fh}else v=h.nodeName,!v||v.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?u&&Gc(u.elementType)&&(R=hu):R=Dh;if(R&&(R=R(e,u))){Gx(p,R,r,c);break e}z&&z(e,h,u),e==="focusout"&&u&&h.type==="number"&&u.memoizedProps.value!=null&&$i(h,"number",h.value)}switch(z=u?Wn(u):window,e){case"focusin":(gu(z)||z.contentEditable==="true")&&(Wr=z,qi=u,Xn=null);break;case"focusout":Xn=qi=Wr=null;break;case"mousedown":Yi=!0;break;case"contextmenu":case"mouseup":case"dragend":Yi=!1,ju(p,r,c);break;case"selectionchange":if(Bh)break;case"keydown":case"keyup":ju(p,r,c)}var A;if(Zc)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else $r?Yx(e,r)&&(I="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(qx&&r.locale!=="ko"&&($r||I!=="onCompositionStart"?I==="onCompositionEnd"&&$r&&(A=Hx()):(La=c,Vc="value"in La?La.value:La.textContent,$r=!0)),z=Gl(u,I),0<z.length&&(I=new uu(I,e,null,r,c),p.push({event:I,listeners:z}),A?I.data=A:(A=Px(r),A!==null&&(I.data=A)))),(A=Ch?Nh(e,r):Th(e,r))&&(I=Gl(u,"onBeforeInput"),0<I.length&&(z=new uu("onBeforeInput","beforeinput",null,r,c),p.push({event:z,listeners:I}),z.data=A)),mm(p,e,u,r,c)}H0(p,t)})}function gs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gl(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,l=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||l===null||(s=ls(e,r),s!=null&&n.unshift(gs(e,s,l)),s=ls(e,t),s!=null&&n.push(gs(e,s,l))),e.tag===3)return n;e=e.return}return[]}function jm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function rp(e,t,r,n,s){for(var l=t._reactName,o=[];r!==null&&r!==n;){var i=r,d=i.alternate,u=i.stateNode;if(i=i.tag,d!==null&&d===n)break;i!==5&&i!==26&&i!==27||u===null||(d=u,s?(u=ls(r,l),u!=null&&o.unshift(gs(r,u,d))):s||(u=ls(r,l),u!=null&&o.push(gs(r,u,d)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Sm=/\r\n?/g,wm=/\u0000|\uFFFD/g;function np(e){return(typeof e=="string"?e:""+e).replace(Sm,`
`).replace(wm,"")}function Y0(e,t){return t=np(t),np(e)===t}function me(e,t,r,n,s,l){switch(r){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||nn(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&nn(e,""+n);break;case"className":Ps(e,"class",n);break;case"tabIndex":Ps(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Ps(e,r,n);break;case"style":$x(e,n,l);break;case"data":if(t!=="object"){Ps(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(r);break}n=il(""+n),e.setAttribute(r,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(r==="formAction"?(t!=="input"&&me(e,t,"name",s.name,s,null),me(e,t,"formEncType",s.formEncType,s,null),me(e,t,"formMethod",s.formMethod,s,null),me(e,t,"formTarget",s.formTarget,s,null)):(me(e,t,"encType",s.encType,s,null),me(e,t,"method",s.method,s,null),me(e,t,"target",s.target,s,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(r);break}n=il(""+n),e.setAttribute(r,n);break;case"onClick":n!=null&&(e.onclick=xa);break;case"onScroll":n!=null&&le("scroll",e);break;case"onScrollEnd":n!=null&&le("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(H(61));if(r=n.__html,r!=null){if(s.children!=null)throw Error(H(60));e.innerHTML=r}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}r=il(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(r,""+n):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":n===!0?e.setAttribute(r,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(r,n):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(r,n):e.removeAttribute(r);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(r):e.setAttribute(r,n);break;case"popover":le("beforetoggle",e),le("toggle",e),ol(e,"popover",n);break;case"xlinkActuate":sa(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":sa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":sa(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":sa(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":sa(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":sa(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":sa(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":sa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":sa(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":ol(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Z2.get(r)||r,ol(e,r,n))}}function gc(e,t,r,n,s,l){switch(r){case"style":$x(e,n,l);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(H(61));if(r=n.__html,r!=null){if(s.children!=null)throw Error(H(60));e.innerHTML=r}}break;case"children":typeof n=="string"?nn(e,n):(typeof n=="number"||typeof n=="bigint")&&nn(e,""+n);break;case"onScroll":n!=null&&le("scroll",e);break;case"onScrollEnd":n!=null&&le("scrollend",e);break;case"onClick":n!=null&&(e.onclick=xa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mx.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(s=r.endsWith("Capture"),t=r.slice(2,s?r.length-7:void 0),l=e[mt]||null,l=l!=null?l[r]:null,typeof l=="function"&&e.removeEventListener(t,l,s),typeof n=="function")){typeof l!="function"&&l!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,n,s);break e}r in e?e[r]=n:n===!0?e.setAttribute(r,""):ol(e,r,n)}}}function Qe(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":le("error",e),le("load",e);var n=!1,s=!1,l;for(l in r)if(r.hasOwnProperty(l)){var o=r[l];if(o!=null)switch(l){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(H(137,t));default:me(e,t,l,o,r,null)}}s&&me(e,t,"srcSet",r.srcSet,r,null),n&&me(e,t,"src",r.src,r,null);return;case"input":le("invalid",e);var i=l=o=s=null,d=null,u=null;for(n in r)if(r.hasOwnProperty(n)){var c=r[n];if(c!=null)switch(n){case"name":s=c;break;case"type":o=c;break;case"checked":d=c;break;case"defaultChecked":u=c;break;case"value":l=c;break;case"defaultValue":i=c;break;case"children":case"dangerouslySetInnerHTML":if(c!=null)throw Error(H(137,t));break;default:me(e,t,n,c,r,null)}}Ox(e,l,i,d,u,o,s,!1);return;case"select":le("invalid",e),n=o=l=null;for(s in r)if(r.hasOwnProperty(s)&&(i=r[s],i!=null))switch(s){case"value":l=i;break;case"defaultValue":o=i;break;case"multiple":n=i;default:me(e,t,s,i,r,null)}t=l,r=o,e.multiple=!!n,t!=null?Qr(e,!!n,t,!1):r!=null&&Qr(e,!!n,r,!0);return;case"textarea":le("invalid",e),l=s=n=null;for(o in r)if(r.hasOwnProperty(o)&&(i=r[o],i!=null))switch(o){case"value":n=i;break;case"defaultValue":s=i;break;case"children":l=i;break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(H(91));break;default:me(e,t,o,i,r,null)}Ux(e,n,s,l);return;case"option":for(d in r)if(r.hasOwnProperty(d)&&(n=r[d],n!=null))switch(d){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:me(e,t,d,n,r,null)}return;case"dialog":le("beforetoggle",e),le("toggle",e),le("cancel",e),le("close",e);break;case"iframe":case"object":le("load",e);break;case"video":case"audio":for(n=0;n<fs.length;n++)le(fs[n],e);break;case"image":le("error",e),le("load",e);break;case"details":le("toggle",e);break;case"embed":case"source":case"link":le("error",e),le("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in r)if(r.hasOwnProperty(u)&&(n=r[u],n!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(H(137,t));default:me(e,t,u,n,r,null)}return;default:if(Gc(t)){for(c in r)r.hasOwnProperty(c)&&(n=r[c],n!==void 0&&gc(e,t,c,n,r,void 0));return}}for(i in r)r.hasOwnProperty(i)&&(n=r[i],n!=null&&me(e,t,i,n,r,null))}function Cm(e,t,r,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,l=null,o=null,i=null,d=null,u=null,c=null;for(v in r){var p=r[v];if(r.hasOwnProperty(v)&&p!=null)switch(v){case"checked":break;case"value":break;case"defaultValue":d=p;default:n.hasOwnProperty(v)||me(e,t,v,null,n,p)}}for(var h in n){var v=n[h];if(p=r[h],n.hasOwnProperty(h)&&(v!=null||p!=null))switch(h){case"type":l=v;break;case"name":s=v;break;case"checked":u=v;break;case"defaultChecked":c=v;break;case"value":o=v;break;case"defaultValue":i=v;break;case"children":case"dangerouslySetInnerHTML":if(v!=null)throw Error(H(137,t));break;default:v!==p&&me(e,t,h,v,n,p)}}Ui(e,o,i,d,u,c,l,s);return;case"select":v=o=i=h=null;for(l in r)if(d=r[l],r.hasOwnProperty(l)&&d!=null)switch(l){case"value":break;case"multiple":v=d;default:n.hasOwnProperty(l)||me(e,t,l,null,n,d)}for(s in n)if(l=n[s],d=r[s],n.hasOwnProperty(s)&&(l!=null||d!=null))switch(s){case"value":h=l;break;case"defaultValue":i=l;break;case"multiple":o=l;default:l!==d&&me(e,t,s,l,n,d)}t=i,r=o,n=v,h!=null?Qr(e,!!r,h,!1):!!n!=!!r&&(t!=null?Qr(e,!!r,t,!0):Qr(e,!!r,r?[]:"",!1));return;case"textarea":v=h=null;for(i in r)if(s=r[i],r.hasOwnProperty(i)&&s!=null&&!n.hasOwnProperty(i))switch(i){case"value":break;case"children":break;default:me(e,t,i,null,n,s)}for(o in n)if(s=n[o],l=r[o],n.hasOwnProperty(o)&&(s!=null||l!=null))switch(o){case"value":h=s;break;case"defaultValue":v=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(H(91));break;default:s!==l&&me(e,t,o,s,n,l)}Ix(e,h,v);return;case"option":for(var w in r)if(h=r[w],r.hasOwnProperty(w)&&h!=null&&!n.hasOwnProperty(w))switch(w){case"selected":e.selected=!1;break;default:me(e,t,w,null,n,h)}for(d in n)if(h=n[d],v=r[d],n.hasOwnProperty(d)&&h!==v&&(h!=null||v!=null))switch(d){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:me(e,t,d,h,n,v)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var j in r)h=r[j],r.hasOwnProperty(j)&&h!=null&&!n.hasOwnProperty(j)&&me(e,t,j,null,n,h);for(u in n)if(h=n[u],v=r[u],n.hasOwnProperty(u)&&h!==v&&(h!=null||v!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(H(137,t));break;default:me(e,t,u,h,n,v)}return;default:if(Gc(t)){for(var S in r)h=r[S],r.hasOwnProperty(S)&&h!==void 0&&!n.hasOwnProperty(S)&&gc(e,t,S,void 0,n,h);for(c in n)h=n[c],v=r[c],!n.hasOwnProperty(c)||h===v||h===void 0&&v===void 0||gc(e,t,c,h,n,v);return}}for(var m in r)h=r[m],r.hasOwnProperty(m)&&h!=null&&!n.hasOwnProperty(m)&&me(e,t,m,null,n,h);for(p in n)h=n[p],v=r[p],!n.hasOwnProperty(p)||h===v||h==null&&v==null||me(e,t,p,h,n,v)}function sp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Nm(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,r=performance.getEntriesByType("resource"),n=0;n<r.length;n++){var s=r[n],l=s.transferSize,o=s.initiatorType,i=s.duration;if(l&&i&&sp(o)){for(o=0,i=s.responseEnd,n+=1;n<r.length;n++){var d=r[n],u=d.startTime;if(u>i)break;var c=d.transferSize,p=d.initiatorType;c&&sp(p)&&(d=d.responseEnd,o+=c*(d<i?1:(i-u)/(d-u)))}if(--n,t+=8*(l+o)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var hc=null,mc=null;function Xl(e){return e.nodeType===9?e:e.ownerDocument}function lp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function P0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function bc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fi=null;function Tm(){var e=window.event;return e&&e.type==="popstate"?e===fi?!1:(fi=e,!0):(fi=null,!1)}var G0=typeof setTimeout=="function"?setTimeout:void 0,km=typeof clearTimeout=="function"?clearTimeout:void 0,op=typeof Promise=="function"?Promise:void 0,Em=typeof queueMicrotask=="function"?queueMicrotask:typeof op<"u"?function(e){return op.resolve(null).then(e).catch(Fm)}:G0;function Fm(e){setTimeout(function(){throw e})}function rr(e){return e==="head"}function ip(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"||r==="/&"){if(n===0){e.removeChild(s),xn(t);return}n--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")n++;else if(r==="html")ns(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,ns(r);for(var l=r.firstChild;l;){var o=l.nextSibling,i=l.nodeName;l[Ts]||i==="SCRIPT"||i==="STYLE"||i==="LINK"&&l.rel.toLowerCase()==="stylesheet"||r.removeChild(l),l=o}}else r==="body"&&ns(e.ownerDocument.body);r=s}while(r);xn(t)}function cp(e,t){var r=e;e=0;do{var n=r.nextSibling;if(r.nodeType===1?t?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(t?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=n}while(r)}function yc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":yc(r),Pc(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function zm(e,t,r,n){for(;e.nodeType===1;){var s=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Ts])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var l=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=Ut(e.nextSibling),e===null)break}return null}function Dm(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Ut(e.nextSibling),e===null))return null;return e}function X0(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Ut(e.nextSibling),e===null))return null;return e}function vc(e){return e.data==="$?"||e.data==="$~"}function jc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Rm(e,t){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||r.readyState!=="loading")t();else{var n=function(){t(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Ut(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Sc=null;function dp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(t===0)return Ut(e.nextSibling);t--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||t++}e=e.nextSibling}return null}function up(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(t===0)return e;t--}else r!=="/$"&&r!=="/&"||t++}e=e.previousSibling}return null}function V0(e,t,r){switch(t=Xl(r),e){case"html":if(e=t.documentElement,!e)throw Error(H(452));return e;case"head":if(e=t.head,!e)throw Error(H(453));return e;case"body":if(e=t.body,!e)throw Error(H(454));return e;default:throw Error(H(451))}}function ns(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Pc(e)}var $t=new Map,pp=new Set;function Vl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Na=pe.d;pe.d={f:Am,r:Bm,D:Mm,C:_m,L:Lm,m:Om,X:Um,S:Im,M:$m};function Am(){var e=Na.f(),t=bo();return e||t}function Bm(e){var t=mn(e);t!==null&&t.tag===5&&t.type==="form"?Wf(t):Na.r(e)}var jn=typeof document>"u"?null:document;function Q0(e,t,r){var n=jn;if(n&&typeof t=="string"&&t){var s=Mt(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof r=="string"&&(s+='[crossorigin="'+r+'"]'),pp.has(s)||(pp.add(s),e={rel:e,crossOrigin:r,href:t},n.querySelector(s)===null&&(t=n.createElement("link"),Qe(t,"link",e),He(t),n.head.appendChild(t)))}}function Mm(e){Na.D(e),Q0("dns-prefetch",e,null)}function _m(e,t){Na.C(e,t),Q0("preconnect",e,t)}function Lm(e,t,r){Na.L(e,t,r);var n=jn;if(n&&e&&t){var s='link[rel="preload"][as="'+Mt(t)+'"]';t==="image"&&r&&r.imageSrcSet?(s+='[imagesrcset="'+Mt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(s+='[imagesizes="'+Mt(r.imageSizes)+'"]')):s+='[href="'+Mt(e)+'"]';var l=s;switch(t){case"style":l=pn(e);break;case"script":l=Sn(e)}$t.has(l)||(e=Te({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),$t.set(l,e),n.querySelector(s)!==null||t==="style"&&n.querySelector(Rs(l))||t==="script"&&n.querySelector(As(l))||(t=n.createElement("link"),Qe(t,"link",e),He(t),n.head.appendChild(t)))}}function Om(e,t){Na.m(e,t);var r=jn;if(r&&e){var n=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+Mt(n)+'"][href="'+Mt(e)+'"]',l=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=Sn(e)}if(!$t.has(l)&&(e=Te({rel:"modulepreload",href:e},t),$t.set(l,e),r.querySelector(s)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(As(l)))return}n=r.createElement("link"),Qe(n,"link",e),He(n),r.head.appendChild(n)}}}function Im(e,t,r){Na.S(e,t,r);var n=jn;if(n&&e){var s=Vr(n).hoistableStyles,l=pn(e);t=t||"default";var o=s.get(l);if(!o){var i={loading:0,preload:null};if(o=n.querySelector(Rs(l)))i.loading=5;else{e=Te({rel:"stylesheet",href:e,"data-precedence":t},r),(r=$t.get(l))&&Dd(e,r);var d=o=n.createElement("link");He(d),Qe(d,"link",e),d._p=new Promise(function(u,c){d.onload=u,d.onerror=c}),d.addEventListener("load",function(){i.loading|=1}),d.addEventListener("error",function(){i.loading|=2}),i.loading|=4,bl(o,t,n)}o={type:"stylesheet",instance:o,count:1,state:i},s.set(l,o)}}}function Um(e,t){Na.X(e,t);var r=jn;if(r&&e){var n=Vr(r).hoistableScripts,s=Sn(e),l=n.get(s);l||(l=r.querySelector(As(s)),l||(e=Te({src:e,async:!0},t),(t=$t.get(s))&&Rd(e,t),l=r.createElement("script"),He(l),Qe(l,"link",e),r.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},n.set(s,l))}}function $m(e,t){Na.M(e,t);var r=jn;if(r&&e){var n=Vr(r).hoistableScripts,s=Sn(e),l=n.get(s);l||(l=r.querySelector(As(s)),l||(e=Te({src:e,async:!0,type:"module"},t),(t=$t.get(s))&&Rd(e,t),l=r.createElement("script"),He(l),Qe(l,"link",e),r.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},n.set(s,l))}}function xp(e,t,r,n){var s=(s=Wa.current)?Vl(s):null;if(!s)throw Error(H(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=pn(r.href),r=Vr(s).hoistableStyles,n=r.get(t),n||(n={type:"style",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=pn(r.href);var l=Vr(s).hoistableStyles,o=l.get(e);if(o||(s=s.ownerDocument||s,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,o),(l=s.querySelector(Rs(e)))&&!l._p&&(o.instance=l,o.state.loading=5),$t.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},$t.set(e,r),l||Wm(s,e,r,o.state))),t&&n===null)throw Error(H(528,""));return o}if(t&&n!==null)throw Error(H(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Sn(r),r=Vr(s).hoistableScripts,n=r.get(t),n||(n={type:"script",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(H(444,e))}}function pn(e){return'href="'+Mt(e)+'"'}function Rs(e){return'link[rel="stylesheet"]['+e+"]"}function Z0(e){return Te({},e,{"data-precedence":e.precedence,precedence:null})}function Wm(e,t,r,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Qe(t,"link",r),He(t),e.head.appendChild(t))}function Sn(e){return'[src="'+Mt(e)+'"]'}function As(e){return"script[async]"+e}function fp(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Mt(r.href)+'"]');if(n)return t.instance=n,He(n),n;var s=Te({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),He(n),Qe(n,"style",s),bl(n,r.precedence,e),t.instance=n;case"stylesheet":s=pn(r.href);var l=e.querySelector(Rs(s));if(l)return t.state.loading|=4,t.instance=l,He(l),l;n=Z0(r),(s=$t.get(s))&&Dd(n,s),l=(e.ownerDocument||e).createElement("link"),He(l);var o=l;return o._p=new Promise(function(i,d){o.onload=i,o.onerror=d}),Qe(l,"link",n),t.state.loading|=4,bl(l,r.precedence,e),t.instance=l;case"script":return l=Sn(r.src),(s=e.querySelector(As(l)))?(t.instance=s,He(s),s):(n=r,(s=$t.get(l))&&(n=Te({},r),Rd(n,s)),e=e.ownerDocument||e,s=e.createElement("script"),He(s),Qe(s,"link",n),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(H(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(n=t.instance,t.state.loading|=4,bl(n,r.precedence,e));return t.instance}function bl(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,l=s,o=0;o<n.length;o++){var i=n[o];if(i.dataset.precedence===t)l=i;else if(l!==s)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function Dd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Rd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var yl=null;function gp(e,t,r){if(yl===null){var n=new Map,s=yl=new Map;s.set(r,n)}else s=yl,n=s.get(r),n||(n=new Map,s.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),s=0;s<r.length;s++){var l=r[s];if(!(l[Ts]||l[Ge]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var o=l.getAttribute(t)||"";o=e+o;var i=n.get(o);i?i.push(l):n.set(o,[l])}}return n}function hp(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function Hm(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function K0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function qm(e,t,r,n){if(r.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(r.state.loading&4)){if(r.instance===null){var s=pn(n.href),l=t.querySelector(Rs(s));if(l){t=l._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ql.bind(e),t.then(e,e)),r.state.loading|=4,r.instance=l,He(l);return}l=t.ownerDocument||t,n=Z0(n),(s=$t.get(s))&&Dd(n,s),l=l.createElement("link"),He(l);var o=l;o._p=new Promise(function(i,d){o.onload=i,o.onerror=d}),Qe(l,"link",n),r.instance=l}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,t),(t=r.state.preload)&&!(r.state.loading&3)&&(e.count++,r=Ql.bind(e),t.addEventListener("load",r),t.addEventListener("error",r))}}var gi=0;function Ym(e,t){return e.stylesheets&&e.count===0&&vl(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var n=setTimeout(function(){if(e.stylesheets&&vl(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4+t);0<e.imgBytes&&gi===0&&(gi=62500*Nm());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&vl(e,e.stylesheets),e.unsuspend)){var l=e.unsuspend;e.unsuspend=null,l()}},(e.imgBytes>gi?50:800)+t);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(s)}}:null}function Ql(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Zl=null;function vl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Zl=new Map,t.forEach(Pm,e),Zl=null,Ql.call(e))}function Pm(e,t){if(!(t.state.loading&4)){var r=Zl.get(e);if(r)var n=r.get(null);else{r=new Map,Zl.set(e,r);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<s.length;l++){var o=s[l];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(r.set(o.dataset.precedence,o),n=o)}n&&r.set(null,n)}s=t.instance,o=s.getAttribute("data-precedence"),l=r.get(o)||n,l===n&&r.set(null,s),r.set(o,s),this.count++,n=Ql.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),l?l.parentNode.insertBefore(s,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var hs={$$typeof:pa,Provider:null,Consumer:null,_currentValue:pr,_currentValue2:pr,_threadCount:0};function Gm(e,t,r,n,s,l,o,i,d){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oo(0),this.hiddenUpdates=Oo(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=l,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=d,this.incompleteTransitions=new Map}function J0(e,t,r,n,s,l,o,i,d,u,c,p){return e=new Gm(e,t,r,o,d,u,c,p,i),t=1,l===!0&&(t|=24),l=wt(3,null,null,t),e.current=l,l.stateNode=e,t=nd(),t.refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:n,isDehydrated:r,cache:t},od(l),e}function eg(e){return e?(e=Yr,e):Yr}function tg(e,t,r,n,s,l){s=eg(s),n.context===null?n.context=s:n.pendingContext=s,n=qa(t),n.payload={element:r},l=l===void 0?null:l,l!==null&&(n.callback=l),r=Ya(e,n,t),r!==null&&(ft(r,e,t),Qn(r,e,t))}function mp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ad(e,t){mp(e,t),(e=e.alternate)&&mp(e,t)}function ag(e){if(e.tag===13||e.tag===31){var t=Fr(e,67108864);t!==null&&ft(t,e,67108864),Ad(e,67108864)}}function bp(e){if(e.tag===13||e.tag===31){var t=Et();t=qc(t);var r=Fr(e,t);r!==null&&ft(r,e,t),Ad(e,t)}}var Kl=!0;function Xm(e,t,r,n){var s=J.T;J.T=null;var l=pe.p;try{pe.p=2,Bd(e,t,r,n)}finally{pe.p=l,J.T=s}}function Vm(e,t,r,n){var s=J.T;J.T=null;var l=pe.p;try{pe.p=8,Bd(e,t,r,n)}finally{pe.p=l,J.T=s}}function Bd(e,t,r,n){if(Kl){var s=wc(n);if(s===null)xi(e,t,n,Jl,r),yp(e,n);else if(Zm(s,e,t,r,n))n.stopPropagation();else if(yp(e,n),t&4&&-1<Qm.indexOf(e)){for(;s!==null;){var l=mn(s);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var o=ir(l.pendingLanes);if(o!==0){var i=l;for(i.pendingLanes|=2,i.entangledLanes|=2;o;){var d=1<<31-kt(o);i.entanglements[1]|=d,o&=~d}na(l),!(ue&6)&&(Wl=Nt()+500,Ds(0))}}break;case 31:case 13:i=Fr(l,2),i!==null&&ft(i,l,2),bo(),Ad(l,2)}if(l=wc(n),l===null&&xi(e,t,n,Jl,r),l===s)break;s=l}s!==null&&n.stopPropagation()}else xi(e,t,n,null,r)}}function wc(e){return e=Xc(e),Md(e)}var Jl=null;function Md(e){if(Jl=null,e=Ir(e),e!==null){var t=Ss(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=jx(t),e!==null)return e;e=null}else if(r===31){if(e=Sx(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Jl=e,null}function rg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(M2()){case Tx:return 2;case kx:return 8;case El:case _2:return 32;case Ex:return 268435456;default:return 32}default:return 32}}var Cc=!1,Xa=null,Va=null,Qa=null,ms=new Map,bs=new Map,Ma=[],Qm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yp(e,t){switch(e){case"focusin":case"focusout":Xa=null;break;case"dragenter":case"dragleave":Va=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":ms.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bs.delete(t.pointerId)}}function On(e,t,r,n,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[s]},t!==null&&(t=mn(t),t!==null&&ag(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Zm(e,t,r,n,s){switch(t){case"focusin":return Xa=On(Xa,e,t,r,n,s),!0;case"dragenter":return Va=On(Va,e,t,r,n,s),!0;case"mouseover":return Qa=On(Qa,e,t,r,n,s),!0;case"pointerover":var l=s.pointerId;return ms.set(l,On(ms.get(l)||null,e,t,r,n,s)),!0;case"gotpointercapture":return l=s.pointerId,bs.set(l,On(bs.get(l)||null,e,t,r,n,s)),!0}return!1}function ng(e){var t=Ir(e.target);if(t!==null){var r=Ss(t);if(r!==null){if(t=r.tag,t===13){if(t=jx(r),t!==null){e.blockedOn=t,ru(e.priority,function(){bp(r)});return}}else if(t===31){if(t=Sx(r),t!==null){e.blockedOn=t,ru(e.priority,function(){bp(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=wc(e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Wi=n,r.target.dispatchEvent(n),Wi=null}else return t=mn(r),t!==null&&ag(t),e.blockedOn=r,!1;t.shift()}return!0}function vp(e,t,r){jl(e)&&r.delete(t)}function Km(){Cc=!1,Xa!==null&&jl(Xa)&&(Xa=null),Va!==null&&jl(Va)&&(Va=null),Qa!==null&&jl(Qa)&&(Qa=null),ms.forEach(vp),bs.forEach(vp)}function el(e,t){e.blockedOn===t&&(e.blockedOn=null,Cc||(Cc=!0,Ue.unstable_scheduleCallback(Ue.unstable_NormalPriority,Km)))}var tl=null;function jp(e){tl!==e&&(tl=e,Ue.unstable_scheduleCallback(Ue.unstable_NormalPriority,function(){tl===e&&(tl=null);for(var t=0;t<e.length;t+=3){var r=e[t],n=e[t+1],s=e[t+2];if(typeof n!="function"){if(Md(n||r)===null)continue;break}var l=mn(r);l!==null&&(e.splice(t,3),t-=3,nc(l,{pending:!0,data:s,method:r.method,action:n},n,s))}}))}function xn(e){function t(d){return el(d,e)}Xa!==null&&el(Xa,e),Va!==null&&el(Va,e),Qa!==null&&el(Qa,e),ms.forEach(t),bs.forEach(t);for(var r=0;r<Ma.length;r++){var n=Ma[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Ma.length&&(r=Ma[0],r.blockedOn===null);)ng(r),r.blockedOn===null&&Ma.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(n=0;n<r.length;n+=3){var s=r[n],l=r[n+1],o=s[mt]||null;if(typeof l=="function")o||jp(r);else if(o){var i=null;if(l&&l.hasAttribute("formAction")){if(s=l,o=l[mt]||null)i=o.formAction;else if(Md(s)!==null)continue}else i=o.action;typeof i=="function"?r[n+1]=i:(r.splice(n,3),n-=3),jp(r)}}}function sg(){function e(l){l.canIntercept&&l.info==="react-transition"&&l.intercept({handler:function(){return new Promise(function(o){return s=o})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),n||setTimeout(r,20)}function r(){if(!n&&!navigation.transition){var l=navigation.currentEntry;l&&l.url!=null&&navigation.navigate(l.url,{state:l.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(r,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function _d(e){this._internalRoot=e}jo.prototype.render=_d.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));var r=t.current,n=Et();tg(r,n,e,t,null,null)};jo.prototype.unmount=_d.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tg(e.current,2,null,e,null,null),bo(),t[hn]=null}};function jo(e){this._internalRoot=e}jo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ax();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ma.length&&t!==0&&t<Ma[r].priority;r++);Ma.splice(r,0,e),r===0&&ng(e)}};var Sp=yx.version;if(Sp!=="19.2.3")throw Error(H(527,Sp,"19.2.3"));pe.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=E2(t),e=e!==null?wx(e):null,e=e===null?null:e.stateNode,e};var Jm={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{ws=al.inject(Jm),Tt=al}catch{}}ro.createRoot=function(e,t){if(!vx(e))throw Error(H(299));var r=!1,n="",s=Qf,l=Zf,o=Kf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(l=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=J0(e,1,!1,null,null,r,n,null,s,l,o,sg),e[hn]=t.current,zd(e),new _d(t)};ro.hydrateRoot=function(e,t,r){if(!vx(e))throw Error(H(299));var n=!1,s="",l=Qf,o=Zf,i=Kf,d=null;return r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onUncaughtError!==void 0&&(l=r.onUncaughtError),r.onCaughtError!==void 0&&(o=r.onCaughtError),r.onRecoverableError!==void 0&&(i=r.onRecoverableError),r.formState!==void 0&&(d=r.formState)),t=J0(e,1,!0,t,r??null,n,s,d,l,o,i,sg),t.context=eg(null),r=t.current,n=Et(),n=qc(n),s=qa(n),s.callback=null,Ya(r,s,n),r=n,t.current.lanes=r,Ns(t,r),na(t),e[hn]=t.current,zd(e),new jo(t)};ro.version="19.2.3";function lg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lg)}catch(e){console.error(e)}}lg(),xx.exports=ro;var eb=xx.exports;const tb=rx(eb);/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ys(){return ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ys.apply(this,arguments)}var $a;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})($a||($a={}));const wp="popstate";function ab(e){e===void 0&&(e={});function t(n,s){let{pathname:l,search:o,hash:i}=n.location;return Nc("",{pathname:l,search:o,hash:i},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:eo(s)}return nb(t,r,null,e)}function Be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ld(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rb(){return Math.random().toString(36).substr(2,8)}function Cp(e,t){return{usr:e.state,key:e.key,idx:t}}function Nc(e,t,r,n){return r===void 0&&(r=null),ys({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?wn(t):t,{state:r,key:t&&t.key||n||rb()})}function eo(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function wn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function nb(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:l=!1}=n,o=s.history,i=$a.Pop,d=null,u=c();u==null&&(u=0,o.replaceState(ys({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function p(){i=$a.Pop;let S=c(),m=S==null?null:S-u;u=S,d&&d({action:i,location:j.location,delta:m})}function h(S,m){i=$a.Push;let b=Nc(j.location,S,m);u=c()+1;let g=Cp(b,u),y=j.createHref(b);try{o.pushState(g,"",y)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(y)}l&&d&&d({action:i,location:j.location,delta:1})}function v(S,m){i=$a.Replace;let b=Nc(j.location,S,m);u=c();let g=Cp(b,u),y=j.createHref(b);o.replaceState(g,"",y),l&&d&&d({action:i,location:j.location,delta:0})}function w(S){let m=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof S=="string"?S:eo(S);return b=b.replace(/ $/,"%20"),Be(m,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,m)}let j={get action(){return i},get location(){return e(s,o)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(wp,p),d=S,()=>{s.removeEventListener(wp,p),d=null}},createHref(S){return t(s,S)},createURL:w,encodeLocation(S){let m=w(S);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:v,go(S){return o.go(S)}};return j}var Np;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Np||(Np={}));function sb(e,t,r){return r===void 0&&(r="/"),lb(e,t,r)}function lb(e,t,r,n){let s=typeof t=="string"?wn(t):t,l=Od(s.pathname||"/",r);if(l==null)return null;let o=og(e);ob(o);let i=null;for(let d=0;i==null&&d<o.length;++d){let u=yb(l);i=hb(o[d],u)}return i}function og(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(l,o,i)=>{let d={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};d.relativePath.startsWith("/")&&(Be(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let u=Za([n,d.relativePath]),c=r.concat(d);l.children&&l.children.length>0&&(Be(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),og(l.children,t,c,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:fb(u,l.index),routesMeta:c})};return e.forEach((l,o)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))s(l,o);else for(let d of ig(l.path))s(l,o,d)}),t}function ig(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return s?[l,""]:[l];let o=ig(n.join("/")),i=[];return i.push(...o.map(d=>d===""?l:[l,d].join("/"))),s&&i.push(...o),i.map(d=>e.startsWith("/")&&d===""?"/":d)}function ob(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:gb(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const ib=/^:[\w-]+$/,cb=3,db=2,ub=1,pb=10,xb=-2,Tp=e=>e==="*";function fb(e,t){let r=e.split("/"),n=r.length;return r.some(Tp)&&(n+=xb),t&&(n+=db),r.filter(s=>!Tp(s)).reduce((s,l)=>s+(ib.test(l)?cb:l===""?ub:pb),n)}function gb(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function hb(e,t,r){let{routesMeta:n}=e,s={},l="/",o=[];for(let i=0;i<n.length;++i){let d=n[i],u=i===n.length-1,c=l==="/"?t:t.slice(l.length)||"/",p=mb({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},c),h=d.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Za([l,p.pathname]),pathnameBase:Cb(Za([l,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(l=Za([l,p.pathnameBase]))}return o}function mb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=bb(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let l=s[0],o=l.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:n.reduce((u,c,p)=>{let{paramName:h,isOptional:v}=c;if(h==="*"){let j=i[p]||"";o=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const w=i[p];return v&&!w?u[h]=void 0:u[h]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:o,pattern:e}}function bb(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Ld(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,d)=>(n.push({paramName:i,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function yb(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ld(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Od(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const vb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jb=e=>vb.test(e);function Sb(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?wn(e):e,l;if(r)if(jb(r))l=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Ld(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?l=kp(r.substring(1),"/"):l=kp(r,t)}else l=t;return{pathname:l,search:Nb(n),hash:Tb(s)}}function kp(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function hi(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wb(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Id(e,t){let r=wb(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Ud(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=wn(e):(s=ys({},e),Be(!s.pathname||!s.pathname.includes("?"),hi("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),hi("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),hi("#","search","hash",s)));let l=e===""||s.pathname==="",o=l?"/":s.pathname,i;if(o==null)i=r;else{let p=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),p-=1;s.pathname=h.join("/")}i=p>=0?t[p]:"/"}let d=Sb(s,i),u=o&&o!=="/"&&o.endsWith("/"),c=(l||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(u||c)&&(d.pathname+="/"),d}const Za=e=>e.join("/").replace(/\/\/+/g,"/"),Cb=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Nb=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Tb=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function kb(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const cg=["post","put","patch","delete"];new Set(cg);const Eb=["get",...cg];new Set(Eb);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vs(){return vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vs.apply(this,arguments)}const $d=x.createContext(null),Fb=x.createContext(null),nr=x.createContext(null),So=x.createContext(null),Ta=x.createContext({outlet:null,matches:[],isDataRoute:!1}),dg=x.createContext(null);function zb(e,t){let{relative:r}=t===void 0?{}:t;Cn()||Be(!1);let{basename:n,navigator:s}=x.useContext(nr),{hash:l,pathname:o,search:i}=pg(e,{relative:r}),d=o;return n!=="/"&&(d=o==="/"?n:Za([n,o])),s.createHref({pathname:d,search:i,hash:l})}function Cn(){return x.useContext(So)!=null}function Ye(){return Cn()||Be(!1),x.useContext(So).location}function ug(e){x.useContext(nr).static||x.useLayoutEffect(e)}function $e(){let{isDataRoute:e}=x.useContext(Ta);return e?Yb():Db()}function Db(){Cn()||Be(!1);let e=x.useContext($d),{basename:t,future:r,navigator:n}=x.useContext(nr),{matches:s}=x.useContext(Ta),{pathname:l}=Ye(),o=JSON.stringify(Id(s,r.v7_relativeSplatPath)),i=x.useRef(!1);return ug(()=>{i.current=!0}),x.useCallback(function(u,c){if(c===void 0&&(c={}),!i.current)return;if(typeof u=="number"){n.go(u);return}let p=Ud(u,JSON.parse(o),l,c.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Za([t,p.pathname])),(c.replace?n.replace:n.push)(p,c.state,c)},[t,n,o,l,e])}const Rb=x.createContext(null);function Ab(e){let t=x.useContext(Ta).outlet;return t&&x.createElement(Rb.Provider,{value:e},t)}function pg(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=x.useContext(nr),{matches:s}=x.useContext(Ta),{pathname:l}=Ye(),o=JSON.stringify(Id(s,n.v7_relativeSplatPath));return x.useMemo(()=>Ud(e,JSON.parse(o),l,r==="path"),[e,o,l,r])}function Bb(e,t){return Mb(e,t)}function Mb(e,t,r,n){Cn()||Be(!1);let{navigator:s}=x.useContext(nr),{matches:l}=x.useContext(Ta),o=l[l.length-1],i=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let u=Ye(),c;if(t){var p;let S=typeof t=="string"?wn(t):t;d==="/"||(p=S.pathname)!=null&&p.startsWith(d)||Be(!1),c=S}else c=u;let h=c.pathname||"/",v=h;if(d!=="/"){let S=d.replace(/^\//,"").split("/");v="/"+h.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=sb(e,{pathname:v}),j=Ub(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},i,S.params),pathname:Za([d,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?d:Za([d,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),l,r,n);return t&&j?x.createElement(So.Provider,{value:{location:vs({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:$a.Pop}},j):j}function _b(){let e=qb(),t=kb(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),r?x.createElement("pre",{style:s},r):null,null)}const Lb=x.createElement(_b,null);class Ob extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?x.createElement(Ta.Provider,{value:this.props.routeContext},x.createElement(dg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ib(e){let{routeContext:t,match:r,children:n}=e,s=x.useContext($d);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(Ta.Provider,{value:t},n)}function Ub(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var l;if(!r)return null;if(r.errors)e=r.matches;else if((l=n)!=null&&l.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,i=(s=r)==null?void 0:s.errors;if(i!=null){let c=o.findIndex(p=>p.route.id&&(i==null?void 0:i[p.route.id])!==void 0);c>=0||Be(!1),o=o.slice(0,Math.min(o.length,c+1))}let d=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<o.length;c++){let p=o[c];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=c),p.route.id){let{loaderData:h,errors:v}=r,w=p.route.loader&&h[p.route.id]===void 0&&(!v||v[p.route.id]===void 0);if(p.route.lazy||w){d=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,p,h)=>{let v,w=!1,j=null,S=null;r&&(v=i&&p.route.id?i[p.route.id]:void 0,j=p.route.errorElement||Lb,d&&(u<0&&h===0?(Pb("route-fallback"),w=!0,S=null):u===h&&(w=!0,S=p.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,h+1)),b=()=>{let g;return v?g=j:w?g=S:p.route.Component?g=x.createElement(p.route.Component,null):p.route.element?g=p.route.element:g=c,x.createElement(Ib,{match:p,routeContext:{outlet:c,matches:m,isDataRoute:r!=null},children:g})};return r&&(p.route.ErrorBoundary||p.route.errorElement||h===0)?x.createElement(Ob,{location:r.location,revalidation:r.revalidation,component:j,error:v,children:b(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):b()},null)}var xg=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(xg||{}),fg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fg||{});function $b(e){let t=x.useContext($d);return t||Be(!1),t}function Wb(e){let t=x.useContext(Fb);return t||Be(!1),t}function Hb(e){let t=x.useContext(Ta);return t||Be(!1),t}function gg(e){let t=Hb(),r=t.matches[t.matches.length-1];return r.route.id||Be(!1),r.route.id}function qb(){var e;let t=x.useContext(dg),r=Wb(),n=gg();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Yb(){let{router:e}=$b(xg.UseNavigateStable),t=gg(fg.UseNavigateStable),r=x.useRef(!1);return ug(()=>{r.current=!0}),x.useCallback(function(s,l){l===void 0&&(l={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,vs({fromRouteId:t},l)))},[e,t])}const Ep={};function Pb(e,t,r){Ep[e]||(Ep[e]=!0)}function Gb(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ot(e){let{to:t,replace:r,state:n,relative:s}=e;Cn()||Be(!1);let{future:l,static:o}=x.useContext(nr),{matches:i}=x.useContext(Ta),{pathname:d}=Ye(),u=$e(),c=Ud(t,Id(i,l.v7_relativeSplatPath),d,s==="path"),p=JSON.stringify(c);return x.useEffect(()=>u(JSON.parse(p),{replace:r,state:n,relative:s}),[u,p,s,r,n]),null}function Xb(e){return Ab(e.context)}function ne(e){Be(!1)}function Vb(e){let{basename:t="/",children:r=null,location:n,navigationType:s=$a.Pop,navigator:l,static:o=!1,future:i}=e;Cn()&&Be(!1);let d=t.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:d,navigator:l,static:o,future:vs({v7_relativeSplatPath:!1},i)}),[d,i,l,o]);typeof n=="string"&&(n=wn(n));let{pathname:c="/",search:p="",hash:h="",state:v=null,key:w="default"}=n,j=x.useMemo(()=>{let S=Od(c,d);return S==null?null:{location:{pathname:S,search:p,hash:h,state:v,key:w},navigationType:s}},[d,c,p,h,v,w,s]);return j==null?null:x.createElement(nr.Provider,{value:u},x.createElement(So.Provider,{children:r,value:j}))}function Qb(e){let{children:t,location:r}=e;return Bb(Tc(t),r)}new Promise(()=>{});function Tc(e,t){t===void 0&&(t=[]);let r=[];return x.Children.forEach(e,(n,s)=>{if(!x.isValidElement(n))return;let l=[...t,s];if(n.type===x.Fragment){r.push.apply(r,Tc(n.props.children,l));return}n.type!==ne&&Be(!1),!n.props.index||!n.props.children||Be(!1);let o={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Tc(n.props.children,l)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kc(){return kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kc.apply(this,arguments)}function Zb(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,l;for(l=0;l<n.length;l++)s=n[l],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Kb(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Jb(e,t){return e.button===0&&(!t||t==="_self")&&!Kb(e)}const e1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],t1="6";try{window.__reactRouterVersion=t1}catch{}const a1="startTransition",Fp=j2[a1];function r1(e){let{basename:t,children:r,future:n,window:s}=e,l=x.useRef();l.current==null&&(l.current=ab({window:s,v5Compat:!0}));let o=l.current,[i,d]=x.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},c=x.useCallback(p=>{u&&Fp?Fp(()=>d(p)):d(p)},[d,u]);return x.useLayoutEffect(()=>o.listen(c),[o,c]),x.useEffect(()=>Gb(n),[n]),x.createElement(Vb,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:o,future:n})}const n1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",s1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zp=x.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:l,replace:o,state:i,target:d,to:u,preventScrollReset:c,viewTransition:p}=t,h=Zb(t,e1),{basename:v}=x.useContext(nr),w,j=!1;if(typeof u=="string"&&s1.test(u)&&(w=u,n1))try{let g=new URL(window.location.href),y=u.startsWith("//")?new URL(g.protocol+u):new URL(u),T=Od(y.pathname,v);y.origin===g.origin&&T!=null?u=T+y.search+y.hash:j=!0}catch{}let S=zb(u,{relative:s}),m=l1(u,{replace:o,state:i,target:d,preventScrollReset:c,relative:s,viewTransition:p});function b(g){n&&n(g),g.defaultPrevented||m(g)}return x.createElement("a",kc({},h,{href:w||S,onClick:j||l?n:b,ref:r,target:d}))});var Dp;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Dp||(Dp={}));var Rp;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Rp||(Rp={}));function l1(e,t){let{target:r,replace:n,state:s,preventScrollReset:l,relative:o,viewTransition:i}=t===void 0?{}:t,d=$e(),u=Ye(),c=pg(e,{relative:o});return x.useCallback(p=>{if(Jb(p,r)){p.preventDefault();let h=n!==void 0?n:eo(u)===eo(c);d(e,{replace:h,state:s,preventScrollReset:l,relative:o,viewTransition:i})}},[u,d,c,n,s,r,e,l,o,i])}const hg=x.createContext(),se=()=>{const e=x.useContext(hg);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},o1=({children:e})=>{const[t,r]=x.useState(()=>{const l=localStorage.getItem("nucash-theme");return l==="dark"||l===null});x.useEffect(()=>{localStorage.setItem("nucash-theme",t?"dark":"light")},[t]);const n=()=>{r(l=>!l)},s=t?{mode:"dark",bg:{primary:"linear-gradient(135deg, #0F1227 0%, #181D40 100%)",secondary:"rgba(30,35,71,0.5)",tertiary:"rgba(255,255,255,0.05)",card:"rgba(255,255,255,0.03)",hover:"rgba(255,255,255,0.06)"},text:{primary:"rgba(251,251,251,0.95)",secondary:"rgba(251,251,251,0.6)",tertiary:"rgba(251,251,251,0.5)",muted:"rgba(251,251,251,0.4)"},border:{primary:"rgba(255,212,28,0.2)",secondary:"rgba(255,212,28,0.15)",hover:"rgba(255,212,28,0.3)"},accent:{primary:"#FFD41C",secondary:"#181D40"},scrollbar:{track:"rgba(255,212,28,0.05)",thumb:"rgba(255,212,28,0.3)",thumbHover:"rgba(255,212,28,0.5)"}}:{mode:"light",bg:{primary:"linear-gradient(135deg, #E8F1FF 0%, #F0F7FF 100%)",secondary:"#FFFFFF",tertiary:"rgba(59,130,246,0.05)",card:"#FFFFFF",hover:"rgba(59,130,246,0.15)"},text:{primary:"rgba(24,29,64,0.95)",secondary:"rgba(24,29,64,0.75)",tertiary:"rgba(24,29,64,0.65)",muted:"rgba(24,29,64,0.5)"},border:{primary:"rgba(59,130,246,0.3)",secondary:"rgba(59,130,246,0.15)",hover:"rgba(59,130,246,0.5)"},accent:{primary:"#3B82F6",secondary:"#FFFFFF"},scrollbar:{track:"rgba(59,130,246,0.08)",thumb:"rgba(59,130,246,0.3)",thumbHover:"rgba(59,130,246,0.5)"}};return a.jsx(hg.Provider,{value:{isDarkMode:t,toggleTheme:n,theme:s},children:e})},Nn=x.createContext();function i1({children:e}){const[t,r]=x.useState(null),[n,s]=x.useState(!1),[l,o]=x.useState(!0);x.useEffect(()=>{i()},[]);const i=()=>{try{const p=localStorage.getItem("adminToken"),h=localStorage.getItem("adminData");if(p&&h&&h!=="undefined"&&h!=="null")try{const j=JSON.parse(h);r({...j,accountType:"admin"}),s(!0),o(!1);return}catch(j){console.error("Failed to parse admin data, clearing invalid data:",j),localStorage.removeItem("adminToken"),localStorage.removeItem("adminData")}const v=localStorage.getItem("userToken"),w=localStorage.getItem("userData");if(v&&w&&w!=="undefined"&&w!=="null")try{const j=JSON.parse(w);r({...j,accountType:"user"}),s(!0),o(!1);return}catch(j){console.error("Failed to parse user data, clearing invalid data:",j),localStorage.removeItem("userToken"),localStorage.removeItem("userData")}s(!1),r(null),o(!1)}catch(p){console.error("Error checking auth status:",p),s(!1),r(null),o(!1)}},d=(p,h,v=!1)=>{v?(localStorage.setItem("adminToken",h),localStorage.setItem("adminData",JSON.stringify(p)),r({...p,accountType:"admin"})):(localStorage.setItem("userToken",h),localStorage.setItem("userData",JSON.stringify(p)),r({...p,accountType:"user"})),s(!0)},u=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminData"),localStorage.removeItem("userToken"),localStorage.removeItem("userData"),r(null),s(!1)},c=p=>{const h=(t==null?void 0:t.accountType)||"user";h==="admin"?localStorage.setItem("adminData",JSON.stringify(p)):localStorage.setItem("userData",JSON.stringify(p)),r({...p,accountType:h})};return a.jsx(Nn.Provider,{value:{userData:t,isLoggedin:n,loadingUserData:l,loginUser:d,logoutUser:u,updateUserData:c,checkAuthStatus:i},children:e})}function mg(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=mg(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function mr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=mg(e))&&(n&&(n+=" "),n+=t);return n}function c1(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}c1(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Bs=e=>typeof e=="number"&&!isNaN(e),Cr=e=>typeof e=="string",wa=e=>typeof e=="function",d1=e=>Cr(e)||Bs(e),Ec=e=>Cr(e)||wa(e)?e:null,u1=(e,t)=>e===!1||Bs(e)&&e>0?e:t,Fc=e=>x.isValidElement(e)||Cr(e)||wa(e)||Bs(e);function p1(e,t,r=300){let{scrollHeight:n,style:s}=e;requestAnimationFrame(()=>{s.minHeight="initial",s.height=n+"px",s.transition=`all ${r}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(t,r)})})}function x1({enter:e,exit:t,appendPosition:r=!1,collapse:n=!0,collapseDuration:s=300}){return function({children:l,position:o,preventExitTransition:i,done:d,nodeRef:u,isIn:c,playToast:p}){let h=r?`${e}--${o}`:e,v=r?`${t}--${o}`:t,w=x.useRef(0);return x.useLayoutEffect(()=>{let j=u.current,S=h.split(" "),m=b=>{b.target===u.current&&(p(),j.removeEventListener("animationend",m),j.removeEventListener("animationcancel",m),w.current===0&&b.type!=="animationcancel"&&j.classList.remove(...S))};j.classList.add(...S),j.addEventListener("animationend",m),j.addEventListener("animationcancel",m)},[]),x.useEffect(()=>{let j=u.current,S=()=>{j.removeEventListener("animationend",S),n?p1(j,d,s):d()};c||(i?S():(w.current=1,j.className+=` ${v}`,j.addEventListener("animationend",S)))},[c]),xe.createElement(xe.Fragment,null,l)}}function Ap(e,t){return{content:bg(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function bg(e,t,r=!1){return x.isValidElement(e)&&!Cr(e.type)?x.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):wa(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):e}function f1({closeToast:e,theme:t,ariaLabel:r="close"}){return xe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:n=>{n.stopPropagation(),e(!0)},"aria-label":r},xe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},xe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function g1({delay:e,isRunning:t,closeToast:r,type:n="default",hide:s,className:l,controlledProgress:o,progress:i,rtl:d,isIn:u,theme:c}){let p=s||o&&i===0,h={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};o&&(h.transform=`scaleX(${i})`);let v=mr("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${c}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":d}),w=wa(l)?l({rtl:d,type:n,defaultClassName:v}):mr(v,l),j={[o&&i>=1?"onTransitionEnd":"onAnimationEnd"]:o&&i<1?null:()=>{u&&r()}};return xe.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},xe.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${c} Toastify__progress-bar--${n}`}),xe.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:w,style:h,...j}))}var h1=1,yg=()=>`${h1++}`;function m1(e,t,r){let n=1,s=0,l=[],o=[],i=t,d=new Map,u=new Set,c=b=>(u.add(b),()=>u.delete(b)),p=()=>{o=Array.from(d.values()),u.forEach(b=>b())},h=({containerId:b,toastId:g,updateId:y})=>{let T=b?b!==e:e!==1,R=d.has(g)&&y==null;return T||R},v=(b,g)=>{d.forEach(y=>{var T;(g==null||g===y.props.toastId)&&((T=y.toggle)==null||T.call(y,b))})},w=b=>{var g,y;(y=(g=b.props)==null?void 0:g.onClose)==null||y.call(g,b.removalReason),b.isActive=!1},j=b=>{if(b==null)d.forEach(w);else{let g=d.get(b);g&&w(g)}p()},S=()=>{s-=l.length,l=[]},m=b=>{var g,y;let{toastId:T,updateId:R}=b.props,z=R==null;b.staleId&&d.delete(b.staleId),b.isActive=!0,d.set(T,b),p(),r(Ap(b,z?"added":"updated")),z&&((y=(g=b.props).onOpen)==null||y.call(g))};return{id:e,props:i,observe:c,toggle:v,removeToast:j,toasts:d,clearQueue:S,buildToast:(b,g)=>{if(h(g))return;let{toastId:y,updateId:T,data:R,staleId:z,delay:A}=g,I=T==null;I&&s++;let L={...i,style:i.toastStyle,key:n++,...Object.fromEntries(Object.entries(g).filter(([k,q])=>q!=null)),toastId:y,updateId:T,data:R,isIn:!1,className:Ec(g.className||i.toastClassName),progressClassName:Ec(g.progressClassName||i.progressClassName),autoClose:g.isLoading?!1:u1(g.autoClose,i.autoClose),closeToast(k){d.get(y).removalReason=k,j(y)},deleteToast(){let k=d.get(y);if(k!=null){if(r(Ap(k,"removed")),d.delete(y),s--,s<0&&(s=0),l.length>0){m(l.shift());return}p()}}};L.closeButton=i.closeButton,g.closeButton===!1||Fc(g.closeButton)?L.closeButton=g.closeButton:g.closeButton===!0&&(L.closeButton=Fc(i.closeButton)?i.closeButton:!0);let M={content:b,props:L,staleId:z};i.limit&&i.limit>0&&s>i.limit&&I?l.push(M):Bs(A)?setTimeout(()=>{m(M)},A):m(M)},setProps(b){i=b},setToggle:(b,g)=>{let y=d.get(b);y&&(y.toggle=g)},isToastActive:b=>{var g;return(g=d.get(b))==null?void 0:g.isActive},getSnapshot:()=>o}}var rt=new Map,js=[],zc=new Set,b1=e=>zc.forEach(t=>t(e)),vg=()=>rt.size>0;function y1(){js.forEach(e=>Sg(e.content,e.options)),js=[]}var v1=(e,{containerId:t})=>{var r;return(r=rt.get(t||1))==null?void 0:r.toasts.get(e)};function jg(e,t){var r;if(t)return!!((r=rt.get(t))!=null&&r.isToastActive(e));let n=!1;return rt.forEach(s=>{s.isToastActive(e)&&(n=!0)}),n}function j1(e){if(!vg()){js=js.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||d1(e))rt.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=rt.get(e.containerId);t?t.removeToast(e.id):rt.forEach(r=>{r.removeToast(e.id)})}}var S1=(e={})=>{rt.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function Sg(e,t){Fc(e)&&(vg()||js.push({content:e,options:t}),rt.forEach(r=>{r.buildToast(e,t)}))}function w1(e){var t;(t=rt.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function wg(e,t){rt.forEach(r=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===r.id)&&r.toggle(e,t==null?void 0:t.id)})}function C1(e){let t=e.containerId||1;return{subscribe(r){let n=m1(t,e,b1);rt.set(t,n);let s=n.observe(r);return y1(),()=>{s(),rt.delete(t)}},setProps(r){var n;(n=rt.get(t))==null||n.setProps(r)},getSnapshot(){var r;return(r=rt.get(t))==null?void 0:r.getSnapshot()}}}function N1(e){return zc.add(e),()=>{zc.delete(e)}}function T1(e){return e&&(Cr(e.toastId)||Bs(e.toastId))?e.toastId:yg()}function Ms(e,t){return Sg(e,t),t.toastId}function wo(e,t){return{...t,type:t&&t.type||e,toastId:T1(t)}}function Co(e){return(t,r)=>Ms(t,wo(e,r))}function X(e,t){return Ms(e,wo("default",t))}X.loading=(e,t)=>Ms(e,wo("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function k1(e,{pending:t,error:r,success:n},s){let l;t&&(l=Cr(t)?X.loading(t,s):X.loading(t.render,{...s,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},i=(u,c,p)=>{if(c==null){X.dismiss(l);return}let h={type:u,...o,...s,data:p},v=Cr(c)?{render:c}:c;return l?X.update(l,{...h,...v}):X(v.render,{...h,...v}),p},d=wa(e)?e():e;return d.then(u=>i("success",n,u)).catch(u=>i("error",r,u)),d}X.promise=k1;X.success=Co("success");X.info=Co("info");X.error=Co("error");X.warning=Co("warning");X.warn=X.warning;X.dark=(e,t)=>Ms(e,wo("default",{theme:"dark",...t}));function E1(e){j1(e)}X.dismiss=E1;X.clearWaitingQueue=S1;X.isActive=jg;X.update=(e,t={})=>{let r=v1(e,t);if(r){let{props:n,content:s}=r,l={delay:100,...n,...t,toastId:t.toastId||e,updateId:yg()};l.toastId!==e&&(l.staleId=e);let o=l.render||s;delete l.render,Ms(o,l)}};X.done=e=>{X.update(e,{progress:1})};X.onChange=N1;X.play=e=>wg(!0,e);X.pause=e=>wg(!1,e);function F1(e){var t;let{subscribe:r,getSnapshot:n,setProps:s}=x.useRef(C1(e)).current;s(e);let l=(t=x.useSyncExternalStore(r,n,n))==null?void 0:t.slice();function o(i){if(!l)return[];let d=new Map;return e.newestOnTop&&l.reverse(),l.forEach(u=>{let{position:c}=u.props;d.has(c)||d.set(c,[]),d.get(c).push(u)}),Array.from(d,u=>i(u[0],u[1]))}return{getToastToRender:o,isToastActive:jg,count:l==null?void 0:l.length}}function z1(e){let[t,r]=x.useState(!1),[n,s]=x.useState(!1),l=x.useRef(null),o=x.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:i,pauseOnHover:d,closeToast:u,onClick:c,closeOnClick:p}=e;w1({id:e.toastId,containerId:e.containerId,fn:r}),x.useEffect(()=>{if(e.pauseOnFocusLoss)return h(),()=>{v()}},[e.pauseOnFocusLoss]);function h(){document.hasFocus()||m(),window.addEventListener("focus",S),window.addEventListener("blur",m)}function v(){window.removeEventListener("focus",S),window.removeEventListener("blur",m)}function w(z){if(e.draggable===!0||e.draggable===z.pointerType){b();let A=l.current;o.canCloseOnClick=!0,o.canDrag=!0,A.style.transition="none",e.draggableDirection==="x"?(o.start=z.clientX,o.removalDistance=A.offsetWidth*(e.draggablePercent/100)):(o.start=z.clientY,o.removalDistance=A.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function j(z){let{top:A,bottom:I,left:L,right:M}=l.current.getBoundingClientRect();z.nativeEvent.type!=="touchend"&&e.pauseOnHover&&z.clientX>=L&&z.clientX<=M&&z.clientY>=A&&z.clientY<=I?m():S()}function S(){r(!0)}function m(){r(!1)}function b(){o.didMove=!1,document.addEventListener("pointermove",y),document.addEventListener("pointerup",T)}function g(){document.removeEventListener("pointermove",y),document.removeEventListener("pointerup",T)}function y(z){let A=l.current;if(o.canDrag&&A){o.didMove=!0,t&&m(),e.draggableDirection==="x"?o.delta=z.clientX-o.start:o.delta=z.clientY-o.start,o.start!==z.clientX&&(o.canCloseOnClick=!1);let I=e.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;A.style.transform=`translate3d(${I},0)`,A.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function T(){g();let z=l.current;if(o.canDrag&&o.didMove&&z){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){s(!0),e.closeToast(!0),e.collapseAll();return}z.style.transition="transform 0.2s, opacity 0.2s",z.style.removeProperty("transform"),z.style.removeProperty("opacity")}}let R={onPointerDown:w,onPointerUp:j};return i&&d&&(R.onMouseEnter=m,e.stacked||(R.onMouseLeave=S)),p&&(R.onClick=z=>{c&&c(z),o.canCloseOnClick&&u(!0)}),{playToast:S,pauseToast:m,isRunning:t,preventExitTransition:n,toastRef:l,eventHandlers:R}}var D1=typeof window<"u"?x.useLayoutEffect:x.useEffect,No=({theme:e,type:t,isLoading:r,...n})=>xe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...n});function R1(e){return xe.createElement(No,{...e},xe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function A1(e){return xe.createElement(No,{...e},xe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function B1(e){return xe.createElement(No,{...e},xe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function M1(e){return xe.createElement(No,{...e},xe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function _1(){return xe.createElement("div",{className:"Toastify__spinner"})}var Dc={info:A1,warning:R1,success:B1,error:M1,spinner:_1},L1=e=>e in Dc;function O1({theme:e,type:t,isLoading:r,icon:n}){let s=null,l={theme:e,type:t};return n===!1||(wa(n)?s=n({...l,isLoading:r}):x.isValidElement(n)?s=x.cloneElement(n,l):r?s=Dc.spinner():L1(t)&&(s=Dc[t](l))),s}var I1=e=>{let{isRunning:t,preventExitTransition:r,toastRef:n,eventHandlers:s,playToast:l}=z1(e),{closeButton:o,children:i,autoClose:d,onClick:u,type:c,hideProgressBar:p,closeToast:h,transition:v,position:w,className:j,style:S,progressClassName:m,updateId:b,role:g,progress:y,rtl:T,toastId:R,deleteToast:z,isIn:A,isLoading:I,closeOnClick:L,theme:M,ariaLabel:k}=e,q=mr("Toastify__toast",`Toastify__toast-theme--${M}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":T},{"Toastify__toast--close-on-click":L}),D=wa(j)?j({rtl:T,position:w,type:c,defaultClassName:q}):mr(q,j),_=O1(e),B=!!y||!d,U={closeToast:h,type:c,theme:M},F=null;return o===!1||(wa(o)?F=o(U):x.isValidElement(o)?F=x.cloneElement(o,U):F=f1(U)),xe.createElement(v,{isIn:A,done:z,position:w,preventExitTransition:r,nodeRef:n,playToast:l},xe.createElement("div",{id:R,tabIndex:0,onClick:u,"data-in":A,className:D,...s,style:S,ref:n,...A&&{role:g,"aria-label":k}},_!=null&&xe.createElement("div",{className:mr("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!I})},_),bg(i,e,!t),F,!e.customProgressBar&&xe.createElement(g1,{...b&&!B?{key:`p-${b}`}:{},rtl:T,theme:M,delay:d,isRunning:t,isIn:A,closeToast:h,hide:p,type:c,className:m,controlledProgress:B,progress:y||0})))},U1=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),$1=x1(U1("bounce",!0)),W1={position:"top-right",transition:$1,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function H1(e){let t={...W1,...e},r=e.stacked,[n,s]=x.useState(!0),l=x.useRef(null),{getToastToRender:o,isToastActive:i,count:d}=F1(t),{className:u,style:c,rtl:p,containerId:h,hotKeys:v}=t;function w(S){let m=mr("Toastify__toast-container",`Toastify__toast-container--${S}`,{"Toastify__toast-container--rtl":p});return wa(u)?u({position:S,rtl:p,defaultClassName:m}):mr(m,Ec(u))}function j(){r&&(s(!0),X.play())}return D1(()=>{var S;if(r){let m=l.current.querySelectorAll('[data-in="true"]'),b=12,g=(S=t.position)==null?void 0:S.includes("top"),y=0,T=0;Array.from(m).reverse().forEach((R,z)=>{let A=R;A.classList.add("Toastify__toast--stacked"),z>0&&(A.dataset.collapsed=`${n}`),A.dataset.pos||(A.dataset.pos=g?"top":"bot");let I=y*(n?.2:1)+(n?0:b*z);A.style.setProperty("--y",`${g?I:I*-1}px`),A.style.setProperty("--g",`${b}`),A.style.setProperty("--s",`${1-(n?T:0)}`),y+=A.offsetHeight,T+=.025})}},[n,d,r]),x.useEffect(()=>{function S(m){var b;let g=l.current;v(m)&&((b=g.querySelector('[tabIndex="0"]'))==null||b.focus(),s(!1),X.pause()),m.key==="Escape"&&(document.activeElement===g||g!=null&&g.contains(document.activeElement))&&(s(!0),X.play())}return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}},[v]),xe.createElement("section",{ref:l,className:"Toastify",id:h,onMouseEnter:()=>{r&&(s(!1),X.pause())},onMouseLeave:j,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((S,m)=>{let b=m.length?{...c}:{...c,pointerEvents:"none"};return xe.createElement("div",{tabIndex:-1,className:w(S),"data-stacked":r,style:b,key:`c-${S}`},m.map(({content:g,props:y})=>xe.createElement(I1,{...y,stacked:r,collapseAll:j,isIn:i(y.toastId,y.containerId),key:`t-${y.key}`},g)))}))}function q1(){const e=$e(),[t,r]=x.useState("email"),[n,s]=x.useState(""),[l,o]=x.useState(""),[i,d]=x.useState(!1),[u,c]=x.useState(""),[p,h]=x.useState(null),[v,w]=x.useState(""),[j,S]=x.useState(""),[m,b]=x.useState(""),[g,y]=x.useState(""),T=D=>{const _=D.toLowerCase();return _.includes("motorpool")||_.includes("treasury")||_.includes("accounting")||_.includes("admin")||_.includes("merchant")||_.includes("cafeteria")||_.includes("bookstore")||_.includes("printshop")?"admin":"user"},R=D=>({admin:{endpoint:"http://localhost:3000/api/login",checkEndpoint:"http://localhost:3000/api/login/check-email",tokenKey:"adminToken",dataKey:"adminData",title:"Admin Portal",redirectPath:"/admin/motorpool",color:"#FFD41C",icon:""},merchant:{endpoint:"http://localhost:3000/api/merchant/auth/login",checkEndpoint:"http://localhost:3000/api/merchant/auth/check-email",tokenKey:"merchantToken",dataKey:"merchantData",title:"Merchant Portal",redirectPath:"/admin/merchant",color:"#22C55E",icon:""},user:{endpoint:"http://localhost:3000/api/login",checkEndpoint:"http://localhost:3000/api/login/check-email",tokenKey:"userToken",dataKey:"userData",title:"Student Portal",redirectPath:"/user/dashboard",color:"#3B82F6",icon:""}})[D],z=async D=>{if(D.preventDefault(),!n.trim()){c("Please enter your email address");return}c("");const _=T(n);h(_),r("pin")},A=async D=>{if(D.preventDefault(),!l){c("Please enter your PIN");return}d(!0),c("");try{const _=R(p);console.log(" Attempting login:",{email:n,role:p,endpoint:_.endpoint});const B=await fetch(_.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailOrUsername:n,password:l})}),U=await B.json();if(console.log(" Server response data:",U),B.status===403&&U.requiresActivation){if(console.log("  Account requires activation, redirecting..."),!U.accountId)throw console.error(" Missing accountId in activation response:",U),new Error("Server error: Missing account ID for activation");const ee=`http://localhost:3000/activate?accountId=${U.accountId}&accountType=${U.accountType||p}&email=${encodeURIComponent(U.email||n)}&fullName=${encodeURIComponent(U.fullName||"")}`;console.log(" Activation URL:",ee),window.location.href=ee;return}if(!B.ok)throw new Error(U.error||"Login failed");if(console.log(" Login successful:",U),!U.token)throw new Error("Server error: Missing authentication token");const F=U.role&&["motorpool","merchant","treasury","accounting","cafeteria","bookstore","printshop"].includes(U.role),f=F?"admin":p,E=f==="admin"?R("admin"):_;console.log(" Role detection:",{detectedRole:p,serverRole:U.role,isAdminResponse:F,actualRole:f,willUseConfig:E.tokenKey}),localStorage.setItem(E.tokenKey,U.token);const{token:N,...W}=U,O=W;if(!O||typeof O!="object"||Object.keys(O).length===0)throw console.error(" Invalid user data received from server:",U),new Error("Server error: Invalid user data received");console.log(" Storing user data:",{tokenKey:E.tokenKey,dataKey:E.dataKey,userData:O}),localStorage.setItem(E.dataKey,JSON.stringify(O));const P=localStorage.getItem(E.tokenKey),Q=localStorage.getItem(E.dataKey);if(console.log(" Verified localStorage:",{hasToken:!!P,hasData:!!Q,tokenKey:E.tokenKey,dataKey:E.dataKey}),await new Promise(ee=>setTimeout(ee,100)),f==="admin"){if(!U.role)throw console.error(" Missing role in admin response:",U),new Error("Server error: Admin role not provided");let ee;U.role==="treasury"?ee="/admin/treasury/dashboard":U.role==="accounting"?ee="/admin/accounting/home":ee=`/admin/${U.role}`,console.log(" Redirecting admin to:",ee),await new Promise(Y=>setTimeout(Y,200)),e(ee,{replace:!0})}else console.log(" Redirecting to:",E.redirectPath),await new Promise(ee=>setTimeout(ee,200)),e(E.redirectPath,{replace:!0})}catch(_){console.error(" Login error:",_),c(_.message||"Invalid PIN. Please try again.")}finally{d(!1)}},I=()=>{r("email"),o(""),c(""),h(null)},L=async D=>{D.preventDefault(),d(!0),c("");try{const _=R(p),B=await fetch(`${_.endpoint.replace("/login","/forgot-password")}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:v})}),U=await B.json();if(!B.ok)throw new Error(U.error||"Failed to send OTP");console.log(" OTP sent to email"),r("forgot-otp")}catch(_){console.error(" Forgot password error:",_),c(_.message||"Failed to send OTP")}finally{d(!1)}},M=async D=>{D.preventDefault(),d(!0),c("");try{const _=R(p),B=await fetch(`${_.endpoint.replace("/login","/verify-otp")}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:v,otp:j})}),U=await B.json();if(!B.ok)throw new Error(U.error||"Invalid OTP");console.log(" OTP verified"),r("forgot-newpin")}catch(_){console.error(" OTP verification error:",_),c(_.message||"Invalid OTP")}finally{d(!1)}},k=async D=>{if(D.preventDefault(),m!==g){c("PINs do not match");return}if(!/^\d{6}$/.test(m)){c("PIN must be exactly 6 digits");return}d(!0),c("");try{const _=R(p),B=await fetch(`${_.endpoint.replace("/login","/reset-password")}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:v,otp:j,newPassword:m})}),U=await B.json();if(!B.ok)throw new Error(U.error||"Failed to reset PIN");console.log(" PIN reset successful"),r("email"),s(""),o(""),w(""),S(""),b(""),y(""),c(""),alert("PIN reset successful! Please login with your new PIN.")}catch(_){console.error(" Reset PIN error:",_),c(_.message||"Failed to reset PIN")}finally{d(!1)}},q=D=>{D.key==="Enter"&&(t==="email"?z(D):t==="pin"?A(D):t==="forgot-email"?L(D):t==="forgot-otp"?M(D):t==="forgot-newpin"&&k(D))};return a.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#0F1227] to-[#181D40] relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-1/4 -left-20 w-96 h-96 bg-[#FFD41C] opacity-5 rounded-full blur-3xl animate-float"}),a.jsx("div",{className:"absolute bottom-1/4 -right-20 w-96 h-96 bg-[#FFD41C] opacity-5 rounded-full blur-3xl animate-float-delayed"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-[#FFD41C] opacity-3 rounded-full blur-3xl animate-pulse-slow"}),a.jsx("div",{className:"absolute top-20 left-1/4 w-2 h-2 bg-[#FFD41C] opacity-30 rounded-full animate-particle-1"}),a.jsx("div",{className:"absolute top-40 right-1/3 w-3 h-3 bg-[#FFD41C] opacity-20 rounded-full animate-particle-2"}),a.jsx("div",{className:"absolute bottom-32 left-1/3 w-2 h-2 bg-[#FFD41C] opacity-25 rounded-full animate-particle-3"}),a.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 bg-[#FFD41C] opacity-40 rounded-full animate-particle-4"}),a.jsx("div",{className:"absolute top-0 left-1/4 w-px h-full bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.1)] to-transparent animate-shimmer-slow"}),a.jsx("div",{className:"absolute top-0 right-1/3 w-px h-full bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.1)] to-transparent animate-shimmer-slow",style:{animationDelay:"2s"}})]}),a.jsxs("div",{className:"relative z-10 bg-[rgba(30,35,71,0.95)] rounded-[20px] p-12 w-full max-w-[450px] border-2 border-[rgba(255,212,28,0.3)] backdrop-blur-sm shadow-2xl animate-slideUp",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-[#FFD41C] rounded-full mb-6 shadow-lg shadow-[rgba(255,212,28,0.4)]",children:a.jsx("span",{className:"text-5xl font-extrabold text-[#181D40]",children:"NU"})}),a.jsx("h1",{className:"text-3xl font-extrabold text-[#FBFBFB] mb-2 tracking-tight",children:"Welcome Back"}),a.jsx("p",{className:"text-[rgba(251,251,251,0.6)] text-sm",children:"Sign in to access your account"})]}),u&&a.jsxs("div",{className:"mb-6 p-4 bg-[rgba(239,68,68,0.15)] border-l-4 border-[#EF4444] rounded text-[#EF4444] text-sm flex items-start gap-3",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsx("span",{children:u})]}),t==="email"&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Email Address"}),a.jsx("input",{type:"email",value:n,onChange:D=>s(D.target.value),onKeyPress:q,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-lg placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"you@nu.edu.ph",autoFocus:!0})]}),a.jsx("button",{onClick:z,disabled:i,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:i?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Verifying..."]}):"Continue "})]}),t==="pin"&&a.jsxs("div",{children:[a.jsx("button",{onClick:I,className:"mb-6 text-sm text-[#FFD41C] hover:text-[#FFC700] flex items-center gap-2 font-semibold transition-colors",children:" Change Email"}),a.jsxs("div",{className:"mb-6 p-4 bg-[rgba(255,212,28,0.1)] border border-[rgba(255,212,28,0.3)] rounded-xl",children:[a.jsx("p",{className:"text-xs text-[rgba(251,251,251,0.6)] uppercase tracking-wide mb-1",children:"Signing in as"}),a.jsx("p",{className:"text-base text-[#FBFBFB] font-semibold",children:n})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Enter PIN"}),a.jsx("input",{type:"password",value:l,onChange:D=>{const _=D.target.value;(_===""||/^\d+$/.test(_))&&o(_)},onKeyPress:q,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-2xl tracking-widest text-center placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"     ",autoFocus:!0,maxLength:6,inputMode:"numeric"})]}),a.jsx("button",{onClick:A,disabled:i,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:i?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Signing In..."]}):"Sign In"}),a.jsx("button",{onClick:()=>{w(n),r("forgot-email")},className:"w-full mt-6 text-sm text-[rgba(251,251,251,0.6)] hover:text-[#FFD41C] transition-colors font-medium",children:"Forgot your PIN?"})]}),t==="forgot-email"&&a.jsxs("div",{children:[a.jsx("button",{onClick:()=>{r("pin"),w("")},className:"mb-6 text-sm text-[#FFD41C] hover:text-[#FFC700] flex items-center gap-2 font-semibold transition-colors",children:" Back to Login"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-[#FBFBFB] mb-2",children:"Forgot Your PIN?"}),a.jsx("p",{className:"text-sm text-[rgba(251,251,251,0.6)]",children:"We'll send a verification code to your email"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Email Address"}),a.jsx("input",{type:"email",value:v,onChange:D=>w(D.target.value),onKeyPress:q,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-lg placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"you@nu.edu.ph",autoFocus:!0})]}),a.jsx("button",{onClick:L,disabled:i,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:i?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Sending..."]}):"Send Verification Code"})]}),t==="forgot-otp"&&a.jsxs("div",{children:[a.jsx("button",{onClick:()=>r("forgot-email"),className:"mb-6 text-sm text-[#FFD41C] hover:text-[#FFC700] flex items-center gap-2 font-semibold transition-colors",children:" Back"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-[#FBFBFB] mb-2",children:"Enter Verification Code"}),a.jsx("p",{className:"text-sm text-[rgba(251,251,251,0.6)]",children:"Check your email for the 6-digit code"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Verification Code"}),a.jsx("input",{type:"text",value:j,onChange:D=>S(D.target.value),onKeyPress:q,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-2xl tracking-widest text-center placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"     ",autoFocus:!0,maxLength:6,inputMode:"numeric"})]}),a.jsx("button",{onClick:M,disabled:i,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:i?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Verifying..."]}):"Verify Code"})]}),t==="forgot-newpin"&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-[#FBFBFB] mb-2",children:"Create New PIN"}),a.jsx("p",{className:"text-sm text-[rgba(251,251,251,0.6)]",children:"Enter a new 6-digit PIN"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"New PIN"}),a.jsx("input",{type:"password",value:m,onChange:D=>{const _=D.target.value;(_===""||/^\d+$/.test(_))&&b(_)},onKeyPress:q,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-2xl tracking-widest text-center placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"     ",autoFocus:!0,maxLength:6,inputMode:"numeric"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Confirm PIN"}),a.jsx("input",{type:"password",value:g,onChange:D=>{const _=D.target.value;(_===""||/^\d+$/.test(_))&&y(_)},onKeyPress:q,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-2xl tracking-widest text-center placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"     ",maxLength:6,inputMode:"numeric"})]}),a.jsx("button",{onClick:k,disabled:i,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:i?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Resetting..."]}):"Reset PIN"})]}),a.jsx("div",{className:"mt-8 pt-6 border-t border-[rgba(255,212,28,0.2)] text-center",children:a.jsx("p",{className:"text-xs text-[rgba(251,251,251,0.4)]",children:" 2026 National University Laguna"})})]}),a.jsx("style",{children:`
        /* Floating orb animations */
        @keyframes float {
          0%, 100% {
            transform: translateY(0px) translateX(0px) scale(1);
          }
          33% {
            transform: translateY(-30px) translateX(20px) scale(1.1);
          }
          66% {
            transform: translateY(-15px) translateX(-15px) scale(0.9);
          }
        }

        @keyframes float-delayed {
          0%, 100% {
            transform: translateY(0px) translateX(0px) scale(1);
          }
          33% {
            transform: translateY(25px) translateX(-25px) scale(0.9);
          }
          66% {
            transform: translateY(-20px) translateX(15px) scale(1.1);
          }
        }

        .animate-float {
          animation: float 20s ease-in-out infinite;
        }

        .animate-float-delayed {
          animation: float-delayed 25s ease-in-out infinite;
        }

        /* Slow pulse for background */
        @keyframes pulse-slow {
          0%, 100% {
            opacity: 0.03;
            transform: translate(-50%, -50%) scale(1);
          }
          50% {
            opacity: 0.05;
            transform: translate(-50%, -50%) scale(1.1);
          }
        }

        .animate-pulse-slow {
          animation: pulse-slow 8s ease-in-out infinite;
        }

        /* Particle animations */
        @keyframes particle-1 {
          0%, 100% {
            transform: translateY(0) translateX(0);
            opacity: 0.3;
          }
          50% {
            transform: translateY(-100px) translateX(50px);
            opacity: 0.6;
          }
        }

        @keyframes particle-2 {
          0%, 100% {
            transform: translateY(0) translateX(0) scale(1);
            opacity: 0.2;
          }
          50% {
            transform: translateY(80px) translateX(-60px) scale(1.5);
            opacity: 0.5;
          }
        }

        @keyframes particle-3 {
          0%, 100% {
            transform: translateY(0) translateX(0);
            opacity: 0.25;
          }
          50% {
            transform: translateY(-120px) translateX(-40px);
            opacity: 0.5;
          }
        }

        @keyframes particle-4 {
          0%, 100% {
            transform: translateY(0) translateX(0) scale(1);
            opacity: 0.4;
          }
          50% {
            transform: translateY(60px) translateX(80px) scale(2);
            opacity: 0.7;
          }
        }

        .animate-particle-1 {
          animation: particle-1 15s ease-in-out infinite;
        }

        .animate-particle-2 {
          animation: particle-2 12s ease-in-out infinite;
        }

        .animate-particle-3 {
          animation: particle-3 18s ease-in-out infinite;
        }

        .animate-particle-4 {
          animation: particle-4 10s ease-in-out infinite;
        }

        /* Shimmer effect for gradient lines */
        @keyframes shimmer-slow {
          0% {
            opacity: 0.05;
          }
          50% {
            opacity: 0.15;
          }
          100% {
            opacity: 0.05;
          }
        }

        .animate-shimmer-slow {
          animation: shimmer-slow 6s ease-in-out infinite;
        }

        /* Slide up animation for login card */
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(30px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }

        .animate-slideUp {
          animation: slideUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Enhanced input focus glow */
        input:focus {
          box-shadow: 0 0 0 3px rgba(255, 212, 28, 0.1),
                      0 0 20px rgba(255, 212, 28, 0.15);
        }

        /* Button hover glow */
        button:hover:not(:disabled) {
          box-shadow: 0 8px 30px rgba(255, 212, 28, 0.4),
                      0 0 40px rgba(255, 212, 28, 0.2);
        }

        /* Smooth step transitions */
        .step-transition {
          animation: fadeInStep 0.4s ease-out;
        }

        @keyframes fadeInStep {
          from {
            opacity: 0;
            transform: translateX(-20px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
      `})]})}function Wd(){const{isDarkMode:e,toggleTheme:t}=se();return a.jsx("button",{onClick:t,title:e?"Switch to Light Mode":"Switch to Dark Mode",style:{width:"40px",height:"40px",borderRadius:"50%",background:e?"rgba(255, 212, 28, 0.15)":"rgba(24, 29, 64, 0.1)",border:e?"2px solid rgba(255, 212, 28, 0.3)":"2px solid rgba(24, 29, 64, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",fontSize:"18px"},onMouseEnter:r=>{r.currentTarget.style.background=e?"rgba(255, 212, 28, 0.25)":"rgba(24, 29, 64, 0.15)",r.currentTarget.style.transform="scale(1.05) rotate(15deg)"},onMouseLeave:r=>{r.currentTarget.style.background=e?"rgba(255, 212, 28, 0.15)":"rgba(24, 29, 64, 0.1)",r.currentTarget.style.transform="scale(1) rotate(0deg)"},children:e?"":""})}function Y1({adminData:e,onLogout:t,onOpenProfile:r}){var c;const{theme:n,isDarkMode:s}=se(),[l,o]=x.useState(!1),i=x.useRef(null);x.useEffect(()=>{const p=h=>{i.current&&!i.current.contains(h.target)&&o(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const d=()=>{var v,w;if(!e)return"A";const p=((v=e.firstName)==null?void 0:v[0])||"",h=((w=e.lastName)==null?void 0:w[0])||"";return(p+h).toUpperCase()||"A"},u=()=>e&&`${e.firstName||""} ${e.lastName||""}`.trim()||"Admin";return a.jsxs("header",{style:{background:s?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${n.accent.primary}`,boxShadow:s?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[a.jsx("div",{style:{width:"45px",height:"45px",background:n.accent.primary,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:s?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${s?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),a.jsxs("div",{children:[a.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:n.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash Admin Dashboard"}),a.jsx("p",{style:{fontSize:"12px",color:n.accent.primary,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"Motorpool Management System"})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(34, 197, 94, 0.2)",padding:"6px 14px",borderRadius:"20px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[a.jsx("div",{style:{width:"7px",height:"7px",background:"#22C55E",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}}),a.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#22C55E"},children:"LIVE"})]}),a.jsx(Wd,{}),a.jsxs("div",{style:{position:"relative"},ref:i,children:[a.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:s?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${n.accent.primary}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:p=>{p.currentTarget.style.background=s?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",p.currentTarget.style.transform="scale(1.02)"},onMouseLeave:p=>{p.currentTarget.style.background=s?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",p.currentTarget.style.transform="scale(1)"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:n.accent.primary,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:s?"#181D40":"#FFFFFF",flexShrink:0},children:d()}),a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:a.jsx("path",{d:"M2 4L6 8L10 4",stroke:n.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&a.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:s?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${n.border.primary}`,boxShadow:s?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 212, 28, 0.2)",marginBottom:"8px"},children:[a.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:n.text.primary,marginBottom:"4px"},children:u()}),a.jsx("div",{style:{fontSize:"12px",color:n.text.secondary},children:(e==null?void 0:e.email)||"admin@nu.edu.ph"}),a.jsx("div",{style:{fontSize:"10px",color:n.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:((c=e==null?void 0:e.role)==null?void 0:c.replace("_"," "))||"Admin"})]}),a.jsxs("button",{onClick:()=>{o(!1),r()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:n.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:p=>{p.currentTarget.style.background=s?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",p.currentTarget.style.color=n.accent.primary},onMouseLeave:p=>{p.currentTarget.style.background="transparent",p.currentTarget.style.color=n.text.primary},children:[a.jsx("span",{style:{fontSize:"16px"},children:""}),a.jsx("span",{children:"Manage Profile"})]}),a.jsx("div",{style:{height:"1px",background:"rgba(255, 212, 28, 0.2)",margin:"8px 0"}}),a.jsxs("button",{onClick:()=>{o(!1),t()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:p=>{p.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:p=>{p.currentTarget.style.background="transparent"},children:[a.jsx("span",{style:{fontSize:"16px"},children:""}),a.jsx("span",{children:"Logout"})]})]})]})]}),a.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.5;
            transform: scale(0.8);
          }
        }
        
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function bt(){const{theme:e,isDarkMode:t}=se(),r=new Date().getFullYear();return a.jsx("footer",{style:{background:e.bg.primary,borderTop:`2px solid ${e.accent.primary}`,color:e.text.secondary,boxShadow:t?"0 -4px 20px rgba(0, 0, 0, 0.2)":"0 -4px 20px rgba(59, 130, 246, 0.05)"},className:"mt-auto px-[40px] py-[20px] text-center text-[12px]",children:a.jsxs("p",{className:"m-0",children:[" ",r," NUCash System | National University Laguna |"," ",a.jsx(zp,{to:"/terms",style:{color:e.accent.primary},className:"hover:opacity-80 transition font-semibold",onMouseEnter:n=>n.currentTarget.style.opacity="0.8",onMouseLeave:n=>n.currentTarget.style.opacity="1",children:"Terms and Conditions"})," ","|"," ",a.jsx(zp,{to:"/privacy",style:{color:e.accent.primary},className:"hover:opacity-80 transition font-semibold",onMouseEnter:n=>n.currentTarget.style.opacity="0.8",onMouseLeave:n=>n.currentTarget.style.opacity="1",children:"Privacy Policy"})]})})}function P1({children:e}){const t=$e(),r=Ye(),{theme:n,isDarkMode:s}=se(),[l]=x.useState(()=>{const c=localStorage.getItem("adminData");return c?JSON.parse(c):null}),o=()=>{localStorage.clear(),t("/login")},i=()=>{t("/admin/profile")},d=[{path:"/admin/motorpool",icon:"",label:"Home"},{path:"/admin/motorpool/routes",icon:"",label:"Routes"},{path:"/admin/motorpool/drivers",icon:"",label:"Drivers"},{path:"/admin/motorpool/shuttles",icon:"",label:"Shuttles"},{path:"/admin/motorpool/trips",icon:"",label:"Trips"},{path:"/admin/motorpool/phones",icon:"",label:"Phones"}],u=[{path:"/admin/logs",icon:"",label:"Logs"},{path:"/admin/motorpool/concerns",icon:"",label:"Concerns"},{path:"/admin/motorpool/configurations",icon:"",label:"Settings"}];return a.jsxs("div",{style:{background:n.bg.primary},className:"min-h-screen flex flex-col",children:[a.jsx(Y1,{adminData:l,onLogout:o,onOpenProfile:i}),a.jsx("div",{style:{background:n.bg.primary},className:"h-4"}),a.jsx("div",{style:{background:n.bg.secondary,borderColor:n.border.primary,boxShadow:s?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-8 rounded-lg px-6 py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:c=>{c.currentTarget.style.borderColor=n.border.hover,c.currentTarget.style.boxShadow=s?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:c=>{c.currentTarget.style.borderColor=n.border.primary,c.currentTarget.style.boxShadow=s?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:a.jsxs("div",{className:"flex items-center gap-2",children:[d.map(c=>{const p=r.pathname===c.path;return a.jsxs("button",{onClick:()=>t(c.path),style:{background:p?n.accent.primary:"transparent",color:p?n.accent.secondary:n.text.secondary},className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-md font-semibold text-sm
                  transition-all duration-300 ease-out
                  ${p?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:h=>{p||(h.currentTarget.style.background=s?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",h.currentTarget.style.color=n.accent.primary)},onMouseLeave:h=>{p||(h.currentTarget.style.background="transparent",h.currentTarget.style.color=n.text.secondary)},children:[a.jsx("span",{className:`text-base transition-transform duration-300 ${p?"scale-110":""}`,children:c.icon}),a.jsx("span",{children:c.label})]},c.path)}),a.jsx("div",{className:"h-10 w-[2px] bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.4)] to-transparent mx-4"}),u.map(c=>{const p=r.pathname===c.path;return a.jsxs("button",{onClick:()=>t(c.path),style:{background:p?n.accent.primary:"transparent",color:p?n.accent.secondary:n.text.tertiary},className:`
                  flex items-center gap-2 px-4 py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${p?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:h=>{p||(h.currentTarget.style.background=s?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",h.currentTarget.style.color=n.accent.primary)},onMouseLeave:h=>{p||(h.currentTarget.style.background="transparent",h.currentTarget.style.color=n.text.tertiary)},children:[a.jsx("span",{className:`text-sm transition-transform duration-300 ${p?"scale-110":""}`,children:c.icon}),a.jsx("span",{children:c.label})]},c.path)})]})}),a.jsx("main",{className:"flex-1 p-8 overflow-auto animate-fadeIn",children:e}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${n.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${n.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${n.scrollbar.thumbHover};
        }
      `}),a.jsx(bt,{})]})}function G1({merchantData:e,onLogout:t,onOpenProfile:r}){const{theme:n,isDarkMode:s}=se(),[l,o]=x.useState(!1),i=x.useRef(null);x.useEffect(()=>{const c=p=>{i.current&&!i.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const d=()=>e&&(e.businessName||"").charAt(0).toUpperCase()||"M",u=()=>e&&e.businessName||"Merchant";return a.jsxs("header",{style:{background:s?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${n.accent.primary}`,boxShadow:s?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[a.jsx("div",{style:{width:"45px",height:"45px",background:n.accent.primary,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:s?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${s?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),a.jsxs("div",{children:[a.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:n.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash Admin Dashboard"}),a.jsx("p",{style:{fontSize:"12px",color:n.accent.primary,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"Merchant Management System"})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(34, 197, 94, 0.2)",padding:"6px 14px",borderRadius:"20px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[a.jsx("div",{style:{width:"7px",height:"7px",background:"#22C55E",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}}),a.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#22C55E"},children:"LIVE"})]}),a.jsx(Wd,{}),a.jsxs("div",{style:{position:"relative"},ref:i,children:[a.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:s?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${n.accent.primary}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background=s?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",c.currentTarget.style.transform="scale(1.02)"},onMouseLeave:c=>{c.currentTarget.style.background=s?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",c.currentTarget.style.transform="scale(1)"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:n.accent.primary,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:s?"#181D40":"#FFFFFF",flexShrink:0},children:d()}),a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:a.jsx("path",{d:"M2 4L6 8L10 4",stroke:n.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&a.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:s?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${n.border.primary}`,boxShadow:s?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 212, 28, 0.2)",marginBottom:"8px"},children:[a.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:n.text.primary,marginBottom:"4px"},children:u()}),a.jsx("div",{style:{fontSize:"12px",color:n.text.secondary},children:(e==null?void 0:e.email)||"merchant@nu.edu.ph"}),a.jsx("div",{style:{fontSize:"10px",color:n.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:(e==null?void 0:e.merchantId)||"Merchant"})]}),a.jsxs("button",{onClick:()=>{o(!1),r()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:n.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background=s?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",c.currentTarget.style.color=n.accent.primary},onMouseLeave:c=>{c.currentTarget.style.background="transparent",c.currentTarget.style.color=n.text.primary},children:[a.jsx("span",{style:{fontSize:"16px"},children:""}),a.jsx("span",{children:"Manage Profile"})]}),a.jsx("div",{style:{height:"1px",background:"rgba(255, 212, 28, 0.2)",margin:"8px 0"}}),a.jsxs("button",{onClick:()=>{o(!1),t()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:c=>{c.currentTarget.style.background="transparent"},children:[a.jsx("span",{style:{fontSize:"16px"},children:""}),a.jsx("span",{children:"Logout"})]})]})]})]}),a.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.5;
            transform: scale(0.8);
          }
        }

        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function X1({children:e}){const t=$e(),r=Ye(),{theme:n,isDarkMode:s}=se(),[l]=x.useState(()=>{const c=localStorage.getItem("adminData");return c?JSON.parse(c):null}),o=()=>{localStorage.clear(),t("/login")},i=()=>{t("/admin/profile")},d=[{path:"/admin/merchant",icon:"",label:"Home"},{path:"/admin/merchant/merchants",icon:"",label:"Merchants"},{path:"/admin/merchant/phones",icon:"",label:"Phones"}],u=[{path:"/admin/logs",icon:"",label:"Logs"},{path:"/admin/merchant/concerns",icon:"",label:"Concerns"},{path:"/admin/merchant/configurations",icon:"",label:"Settings"}];return a.jsxs("div",{style:{background:n.bg.primary},className:"min-h-screen flex flex-col",children:[a.jsx(G1,{merchantData:l,onLogout:o,onOpenProfile:i}),a.jsx("div",{style:{background:n.bg.primary},className:"h-4"}),a.jsx("div",{style:{background:n.bg.secondary,borderColor:n.border.primary,boxShadow:s?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-8 rounded-lg px-6 py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:c=>{c.currentTarget.style.borderColor=n.border.hover,c.currentTarget.style.boxShadow=s?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:c=>{c.currentTarget.style.borderColor=n.border.primary,c.currentTarget.style.boxShadow=s?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:a.jsxs("div",{className:"flex items-center gap-2",children:[d.map(c=>{const p=r.pathname===c.path;return a.jsxs("button",{onClick:()=>t(c.path),style:{background:p?n.accent.primary:"transparent",color:p?n.accent.secondary:n.text.secondary},className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-md font-semibold text-sm
                  transition-all duration-300 ease-out
                  ${p?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:h=>{p||(h.currentTarget.style.background=s?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",h.currentTarget.style.color=n.accent.primary)},onMouseLeave:h=>{p||(h.currentTarget.style.background="transparent",h.currentTarget.style.color=n.text.secondary)},children:[a.jsx("span",{className:`text-base transition-transform duration-300 ${p?"scale-110":""}`,children:c.icon}),a.jsx("span",{children:c.label})]},c.path)}),a.jsx("div",{className:"h-10 w-[2px] bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.4)] to-transparent mx-4"}),u.map(c=>{const p=r.pathname===c.path;return a.jsxs("button",{onClick:()=>t(c.path),style:{background:p?n.accent.primary:"transparent",color:p?n.accent.secondary:n.text.tertiary},className:`
                  flex items-center gap-2 px-4 py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${p?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:h=>{p||(h.currentTarget.style.background=s?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",h.currentTarget.style.color=n.accent.primary)},onMouseLeave:h=>{p||(h.currentTarget.style.background="transparent",h.currentTarget.style.color=n.text.tertiary)},children:[a.jsx("span",{className:`text-sm transition-transform duration-300 ${p?"scale-110":""}`,children:c.icon}),a.jsx("span",{children:c.label})]},c.path)})]})}),a.jsx("main",{className:"flex-1 p-8 overflow-auto animate-fadeIn",children:e}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${n.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${n.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${n.scrollbar.thumbHover};
        }
      `}),a.jsx(bt,{})]})}const V1=({children:e})=>{const{isLoggedin:t,userData:r,loadingUserData:n}=x.useContext(Nn);return n?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):t?(r==null?void 0:r.accountType)==="user"&&!r.isActive?a.jsx(Ot,{to:"/change-pin"}):e:a.jsx(Ot,{to:"/login"})};function ut({children:e,allowedRoles:t}){const{userData:r,isLoggedin:n,loadingUserData:s}=x.useContext(Nn);if(Ye(),s)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0A1340]",children:a.jsx("div",{className:"text-white text-xl",children:"Loading..."})});if(!n)return a.jsx(Ot,{to:"/login",replace:!0});if((r==null?void 0:r.accountType)!=="admin")return a.jsx(Ot,{to:"/users-dashboard",replace:!0});if(!["treasury","accounting","sysad","motorpool","merchant"].includes(r==null?void 0:r.role))return a.jsx(Ot,{to:"/users-dashboard",replace:!0});if(t&&!t.includes(r.role)){const o={treasury:"/treasury/dashboard",accounting:"/accounting/home",sysad:"/sysad/dashboard",motorpool:"/motorpool/dashboard",merchant:"/merchant/dashboard"};return a.jsx(Ot,{to:o[r.role],replace:!0})}return e}function Cg(e,t){return function(){return e.apply(t,arguments)}}const{toString:Q1}=Object.prototype,{getPrototypeOf:Hd}=Object,{iterator:To,toStringTag:Ng}=Symbol,ko=(e=>t=>{const r=Q1.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Gt=e=>(e=e.toLowerCase(),t=>ko(t)===e),Eo=e=>t=>typeof t===e,{isArray:Tn}=Array,fn=Eo("undefined");function _s(e){return e!==null&&!fn(e)&&e.constructor!==null&&!fn(e.constructor)&&gt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Tg=Gt("ArrayBuffer");function Z1(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Tg(e.buffer),t}const K1=Eo("string"),gt=Eo("function"),kg=Eo("number"),Ls=e=>e!==null&&typeof e=="object",J1=e=>e===!0||e===!1,Sl=e=>{if(ko(e)!=="object")return!1;const t=Hd(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Ng in e)&&!(To in e)},ey=e=>{if(!Ls(e)||_s(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},ty=Gt("Date"),ay=Gt("File"),ry=Gt("Blob"),ny=Gt("FileList"),sy=e=>Ls(e)&&gt(e.pipe),ly=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||gt(e.append)&&((t=ko(e))==="formdata"||t==="object"&&gt(e.toString)&&e.toString()==="[object FormData]"))},oy=Gt("URLSearchParams"),[iy,cy,dy,uy]=["ReadableStream","Request","Response","Headers"].map(Gt),py=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Os(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Tn(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(_s(e))return;const l=r?Object.getOwnPropertyNames(e):Object.keys(e),o=l.length;let i;for(n=0;n<o;n++)i=l[n],t.call(null,e[i],i,e)}}function Eg(e,t){if(_s(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const ur=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Fg=e=>!fn(e)&&e!==ur;function Rc(){const{caseless:e,skipUndefined:t}=Fg(this)&&this||{},r={},n=(s,l)=>{const o=e&&Eg(r,l)||l;Sl(r[o])&&Sl(s)?r[o]=Rc(r[o],s):Sl(s)?r[o]=Rc({},s):Tn(s)?r[o]=s.slice():(!t||!fn(s))&&(r[o]=s)};for(let s=0,l=arguments.length;s<l;s++)arguments[s]&&Os(arguments[s],n);return r}const xy=(e,t,r,{allOwnKeys:n}={})=>(Os(t,(s,l)=>{r&&gt(s)?e[l]=Cg(s,r):e[l]=s},{allOwnKeys:n}),e),fy=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),gy=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},hy=(e,t,r,n)=>{let s,l,o;const i={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),l=s.length;l-- >0;)o=s[l],(!n||n(o,e,t))&&!i[o]&&(t[o]=e[o],i[o]=!0);e=r!==!1&&Hd(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},my=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},by=e=>{if(!e)return null;if(Tn(e))return e;let t=e.length;if(!kg(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},yy=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Hd(Uint8Array)),vy=(e,t)=>{const n=(e&&e[To]).call(e);let s;for(;(s=n.next())&&!s.done;){const l=s.value;t.call(e,l[0],l[1])}},jy=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Sy=Gt("HTMLFormElement"),wy=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Bp=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Cy=Gt("RegExp"),zg=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Os(r,(s,l)=>{let o;(o=t(s,l,e))!==!1&&(n[l]=o||s)}),Object.defineProperties(e,n)},Ny=e=>{zg(e,(t,r)=>{if(gt(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(gt(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Ty=(e,t)=>{const r={},n=s=>{s.forEach(l=>{r[l]=!0})};return Tn(e)?n(e):n(String(e).split(t)),r},ky=()=>{},Ey=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Fy(e){return!!(e&&gt(e.append)&&e[Ng]==="FormData"&&e[To])}const zy=e=>{const t=new Array(10),r=(n,s)=>{if(Ls(n)){if(t.indexOf(n)>=0)return;if(_s(n))return n;if(!("toJSON"in n)){t[s]=n;const l=Tn(n)?[]:{};return Os(n,(o,i)=>{const d=r(o,s+1);!fn(d)&&(l[i]=d)}),t[s]=void 0,l}}return n};return r(e,0)},Dy=Gt("AsyncFunction"),Ry=e=>e&&(Ls(e)||gt(e))&&gt(e.then)&&gt(e.catch),Dg=((e,t)=>e?setImmediate:t?((r,n)=>(ur.addEventListener("message",({source:s,data:l})=>{s===ur&&l===r&&n.length&&n.shift()()},!1),s=>{n.push(s),ur.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",gt(ur.postMessage)),Ay=typeof queueMicrotask<"u"?queueMicrotask.bind(ur):typeof process<"u"&&process.nextTick||Dg,By=e=>e!=null&&gt(e[To]),$={isArray:Tn,isArrayBuffer:Tg,isBuffer:_s,isFormData:ly,isArrayBufferView:Z1,isString:K1,isNumber:kg,isBoolean:J1,isObject:Ls,isPlainObject:Sl,isEmptyObject:ey,isReadableStream:iy,isRequest:cy,isResponse:dy,isHeaders:uy,isUndefined:fn,isDate:ty,isFile:ay,isBlob:ry,isRegExp:Cy,isFunction:gt,isStream:sy,isURLSearchParams:oy,isTypedArray:yy,isFileList:ny,forEach:Os,merge:Rc,extend:xy,trim:py,stripBOM:fy,inherits:gy,toFlatObject:hy,kindOf:ko,kindOfTest:Gt,endsWith:my,toArray:by,forEachEntry:vy,matchAll:jy,isHTMLForm:Sy,hasOwnProperty:Bp,hasOwnProp:Bp,reduceDescriptors:zg,freezeMethods:Ny,toObjectSet:Ty,toCamelCase:wy,noop:ky,toFiniteNumber:Ey,findKey:Eg,global:ur,isContextDefined:Fg,isSpecCompliantForm:Fy,toJSONObject:zy,isAsyncFn:Dy,isThenable:Ry,setImmediate:Dg,asap:Ay,isIterable:By};function ae(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}$.inherits(ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const Rg=ae.prototype,Ag={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ag[e]={value:e}});Object.defineProperties(ae,Ag);Object.defineProperty(Rg,"isAxiosError",{value:!0});ae.from=(e,t,r,n,s,l)=>{const o=Object.create(Rg);$.toFlatObject(e,o,function(c){return c!==Error.prototype},u=>u!=="isAxiosError");const i=e&&e.message?e.message:"Error",d=t==null&&e?e.code:t;return ae.call(o,i,d,r,n,s),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",l&&Object.assign(o,l),o};const My=null;function Ac(e){return $.isPlainObject(e)||$.isArray(e)}function Bg(e){return $.endsWith(e,"[]")?e.slice(0,-2):e}function Mp(e,t,r){return e?e.concat(t).map(function(s,l){return s=Bg(s),!r&&l?"["+s+"]":s}).join(r?".":""):t}function _y(e){return $.isArray(e)&&!e.some(Ac)}const Ly=$.toFlatObject($,{},null,function(t){return/^is[A-Z]/.test(t)});function Fo(e,t,r){if(!$.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=$.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,S){return!$.isUndefined(S[j])});const n=r.metaTokens,s=r.visitor||c,l=r.dots,o=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(t);if(!$.isFunction(s))throw new TypeError("visitor must be a function");function u(w){if(w===null)return"";if($.isDate(w))return w.toISOString();if($.isBoolean(w))return w.toString();if(!d&&$.isBlob(w))throw new ae("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(w)||$.isTypedArray(w)?d&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function c(w,j,S){let m=w;if(w&&!S&&typeof w=="object"){if($.endsWith(j,"{}"))j=n?j:j.slice(0,-2),w=JSON.stringify(w);else if($.isArray(w)&&_y(w)||($.isFileList(w)||$.endsWith(j,"[]"))&&(m=$.toArray(w)))return j=Bg(j),m.forEach(function(g,y){!($.isUndefined(g)||g===null)&&t.append(o===!0?Mp([j],y,l):o===null?j:j+"[]",u(g))}),!1}return Ac(w)?!0:(t.append(Mp(S,j,l),u(w)),!1)}const p=[],h=Object.assign(Ly,{defaultVisitor:c,convertValue:u,isVisitable:Ac});function v(w,j){if(!$.isUndefined(w)){if(p.indexOf(w)!==-1)throw Error("Circular reference detected in "+j.join("."));p.push(w),$.forEach(w,function(m,b){(!($.isUndefined(m)||m===null)&&s.call(t,m,$.isString(b)?b.trim():b,j,h))===!0&&v(m,j?j.concat(b):[b])}),p.pop()}}if(!$.isObject(e))throw new TypeError("data must be an object");return v(e),t}function _p(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function qd(e,t){this._pairs=[],e&&Fo(e,this,t)}const Mg=qd.prototype;Mg.append=function(t,r){this._pairs.push([t,r])};Mg.toString=function(t){const r=t?function(n){return t.call(this,n,_p)}:_p;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function Oy(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function _g(e,t,r){if(!t)return e;const n=r&&r.encode||Oy;$.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let l;if(s?l=s(t,r):l=$.isURLSearchParams(t)?t.toString():new qd(t,r).toString(n),l){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class Lp{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Lg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Iy=typeof URLSearchParams<"u"?URLSearchParams:qd,Uy=typeof FormData<"u"?FormData:null,$y=typeof Blob<"u"?Blob:null,Wy={isBrowser:!0,classes:{URLSearchParams:Iy,FormData:Uy,Blob:$y},protocols:["http","https","file","blob","url","data"]},Yd=typeof window<"u"&&typeof document<"u",Bc=typeof navigator=="object"&&navigator||void 0,Hy=Yd&&(!Bc||["ReactNative","NativeScript","NS"].indexOf(Bc.product)<0),qy=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Yy=Yd&&window.location.href||"http://localhost",Py=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Yd,hasStandardBrowserEnv:Hy,hasStandardBrowserWebWorkerEnv:qy,navigator:Bc,origin:Yy},Symbol.toStringTag,{value:"Module"})),Ke={...Py,...Wy};function Gy(e,t){return Fo(e,new Ke.classes.URLSearchParams,{visitor:function(r,n,s,l){return Ke.isNode&&$.isBuffer(r)?(this.append(n,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function Xy(e){return $.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Vy(e){const t={},r=Object.keys(e);let n;const s=r.length;let l;for(n=0;n<s;n++)l=r[n],t[l]=e[l];return t}function Og(e){function t(r,n,s,l){let o=r[l++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),d=l>=r.length;return o=!o&&$.isArray(s)?s.length:o,d?($.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!i):((!s[o]||!$.isObject(s[o]))&&(s[o]=[]),t(r,n,s[o],l)&&$.isArray(s[o])&&(s[o]=Vy(s[o])),!i)}if($.isFormData(e)&&$.isFunction(e.entries)){const r={};return $.forEachEntry(e,(n,s)=>{t(Xy(n),s,r,0)}),r}return null}function Qy(e,t,r){if($.isString(e))try{return(t||JSON.parse)(e),$.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Is={transitional:Lg,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,l=$.isObject(t);if(l&&$.isHTMLForm(t)&&(t=new FormData(t)),$.isFormData(t))return s?JSON.stringify(Og(t)):t;if($.isArrayBuffer(t)||$.isBuffer(t)||$.isStream(t)||$.isFile(t)||$.isBlob(t)||$.isReadableStream(t))return t;if($.isArrayBufferView(t))return t.buffer;if($.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Gy(t,this.formSerializer).toString();if((i=$.isFileList(t))||n.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Fo(i?{"files[]":t}:t,d&&new d,this.formSerializer)}}return l||s?(r.setContentType("application/json",!1),Qy(t)):t}],transformResponse:[function(t){const r=this.transitional||Is.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if($.isResponse(t)||$.isReadableStream(t))return t;if(t&&$.isString(t)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(i){if(o)throw i.name==="SyntaxError"?ae.from(i,ae.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ke.classes.FormData,Blob:Ke.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],e=>{Is.headers[e]={}});const Zy=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ky=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||t[r]&&Zy[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Op=Symbol("internals");function In(e){return e&&String(e).trim().toLowerCase()}function wl(e){return e===!1||e==null?e:$.isArray(e)?e.map(wl):String(e)}function Jy(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const e5=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function mi(e,t,r,n,s){if($.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!$.isString(t)){if($.isString(n))return t.indexOf(n)!==-1;if($.isRegExp(n))return n.test(t)}}function t5(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function a5(e,t){const r=$.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,l,o){return this[n].call(this,t,s,l,o)},configurable:!0})})}let ht=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function l(i,d,u){const c=In(d);if(!c)throw new Error("header name must be a non-empty string");const p=$.findKey(s,c);(!p||s[p]===void 0||u===!0||u===void 0&&s[p]!==!1)&&(s[p||d]=wl(i))}const o=(i,d)=>$.forEach(i,(u,c)=>l(u,c,d));if($.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if($.isString(t)&&(t=t.trim())&&!e5(t))o(Ky(t),r);else if($.isObject(t)&&$.isIterable(t)){let i={},d,u;for(const c of t){if(!$.isArray(c))throw TypeError("Object iterator must return a key-value pair");i[u=c[0]]=(d=i[u])?$.isArray(d)?[...d,c[1]]:[d,c[1]]:c[1]}o(i,r)}else t!=null&&l(r,t,n);return this}get(t,r){if(t=In(t),t){const n=$.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return Jy(s);if($.isFunction(r))return r.call(this,s,n);if($.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=In(t),t){const n=$.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||mi(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function l(o){if(o=In(o),o){const i=$.findKey(n,o);i&&(!r||mi(n,n[i],i,r))&&(delete n[i],s=!0)}}return $.isArray(t)?t.forEach(l):l(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const l=r[n];(!t||mi(this,this[l],l,t,!0))&&(delete this[l],s=!0)}return s}normalize(t){const r=this,n={};return $.forEach(this,(s,l)=>{const o=$.findKey(n,l);if(o){r[o]=wl(s),delete r[l];return}const i=t?t5(l):String(l).trim();i!==l&&delete r[l],r[i]=wl(s),n[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return $.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&$.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[Op]=this[Op]={accessors:{}}).accessors,s=this.prototype;function l(o){const i=In(o);n[i]||(a5(s,o),n[i]=!0)}return $.isArray(t)?t.forEach(l):l(t),this}};ht.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(ht.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});$.freezeMethods(ht);function bi(e,t){const r=this||Is,n=t||r,s=ht.from(n.headers);let l=n.data;return $.forEach(e,function(i){l=i.call(r,l,s.normalize(),t?t.status:void 0)}),s.normalize(),l}function Ig(e){return!!(e&&e.__CANCEL__)}function kn(e,t,r){ae.call(this,e??"canceled",ae.ERR_CANCELED,t,r),this.name="CanceledError"}$.inherits(kn,ae,{__CANCEL__:!0});function Ug(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new ae("Request failed with status code "+r.status,[ae.ERR_BAD_REQUEST,ae.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function r5(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function n5(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,l=0,o;return t=t!==void 0?t:1e3,function(d){const u=Date.now(),c=n[l];o||(o=u),r[s]=d,n[s]=u;let p=l,h=0;for(;p!==s;)h+=r[p++],p=p%e;if(s=(s+1)%e,s===l&&(l=(l+1)%e),u-o<t)return;const v=c&&u-c;return v?Math.round(h*1e3/v):void 0}}function s5(e,t){let r=0,n=1e3/t,s,l;const o=(u,c=Date.now())=>{r=c,s=null,l&&(clearTimeout(l),l=null),e(...u)};return[(...u)=>{const c=Date.now(),p=c-r;p>=n?o(u,c):(s=u,l||(l=setTimeout(()=>{l=null,o(s)},n-p)))},()=>s&&o(s)]}const to=(e,t,r=3)=>{let n=0;const s=n5(50,250);return s5(l=>{const o=l.loaded,i=l.lengthComputable?l.total:void 0,d=o-n,u=s(d),c=o<=i;n=o;const p={loaded:o,total:i,progress:i?o/i:void 0,bytes:d,rate:u||void 0,estimated:u&&i&&c?(i-o)/u:void 0,event:l,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(p)},r)},Ip=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Up=e=>(...t)=>$.asap(()=>e(...t)),l5=Ke.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Ke.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Ke.origin),Ke.navigator&&/(msie|trident)/i.test(Ke.navigator.userAgent)):()=>!0,o5=Ke.hasStandardBrowserEnv?{write(e,t,r,n,s,l,o){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(t)}`];$.isNumber(r)&&i.push(`expires=${new Date(r).toUTCString()}`),$.isString(n)&&i.push(`path=${n}`),$.isString(s)&&i.push(`domain=${s}`),l===!0&&i.push("secure"),$.isString(o)&&i.push(`SameSite=${o}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function i5(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function c5(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function $g(e,t,r){let n=!i5(t);return e&&(n||r==!1)?c5(e,t):t}const $p=e=>e instanceof ht?{...e}:e;function Nr(e,t){t=t||{};const r={};function n(u,c,p,h){return $.isPlainObject(u)&&$.isPlainObject(c)?$.merge.call({caseless:h},u,c):$.isPlainObject(c)?$.merge({},c):$.isArray(c)?c.slice():c}function s(u,c,p,h){if($.isUndefined(c)){if(!$.isUndefined(u))return n(void 0,u,p,h)}else return n(u,c,p,h)}function l(u,c){if(!$.isUndefined(c))return n(void 0,c)}function o(u,c){if($.isUndefined(c)){if(!$.isUndefined(u))return n(void 0,u)}else return n(void 0,c)}function i(u,c,p){if(p in t)return n(u,c);if(p in e)return n(void 0,u)}const d={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(u,c,p)=>s($p(u),$p(c),p,!0)};return $.forEach(Object.keys({...e,...t}),function(c){const p=d[c]||s,h=p(e[c],t[c],c);$.isUndefined(h)&&p!==i||(r[c]=h)}),r}const Wg=e=>{const t=Nr({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:l,headers:o,auth:i}=t;if(t.headers=o=ht.from(o),t.url=_g($g(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),$.isFormData(r)){if(Ke.hasStandardBrowserEnv||Ke.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if($.isFunction(r.getHeaders)){const d=r.getHeaders(),u=["content-type","content-length"];Object.entries(d).forEach(([c,p])=>{u.includes(c.toLowerCase())&&o.set(c,p)})}}if(Ke.hasStandardBrowserEnv&&(n&&$.isFunction(n)&&(n=n(t)),n||n!==!1&&l5(t.url))){const d=s&&l&&o5.read(l);d&&o.set(s,d)}return t},d5=typeof XMLHttpRequest<"u",u5=d5&&function(e){return new Promise(function(r,n){const s=Wg(e);let l=s.data;const o=ht.from(s.headers).normalize();let{responseType:i,onUploadProgress:d,onDownloadProgress:u}=s,c,p,h,v,w;function j(){v&&v(),w&&w(),s.cancelToken&&s.cancelToken.unsubscribe(c),s.signal&&s.signal.removeEventListener("abort",c)}let S=new XMLHttpRequest;S.open(s.method.toUpperCase(),s.url,!0),S.timeout=s.timeout;function m(){if(!S)return;const g=ht.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),T={data:!i||i==="text"||i==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:g,config:e,request:S};Ug(function(z){r(z),j()},function(z){n(z),j()},T),S=null}"onloadend"in S?S.onloadend=m:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(m)},S.onabort=function(){S&&(n(new ae("Request aborted",ae.ECONNABORTED,e,S)),S=null)},S.onerror=function(y){const T=y&&y.message?y.message:"Network Error",R=new ae(T,ae.ERR_NETWORK,e,S);R.event=y||null,n(R),S=null},S.ontimeout=function(){let y=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const T=s.transitional||Lg;s.timeoutErrorMessage&&(y=s.timeoutErrorMessage),n(new ae(y,T.clarifyTimeoutError?ae.ETIMEDOUT:ae.ECONNABORTED,e,S)),S=null},l===void 0&&o.setContentType(null),"setRequestHeader"in S&&$.forEach(o.toJSON(),function(y,T){S.setRequestHeader(T,y)}),$.isUndefined(s.withCredentials)||(S.withCredentials=!!s.withCredentials),i&&i!=="json"&&(S.responseType=s.responseType),u&&([h,w]=to(u,!0),S.addEventListener("progress",h)),d&&S.upload&&([p,v]=to(d),S.upload.addEventListener("progress",p),S.upload.addEventListener("loadend",v)),(s.cancelToken||s.signal)&&(c=g=>{S&&(n(!g||g.type?new kn(null,e,S):g),S.abort(),S=null)},s.cancelToken&&s.cancelToken.subscribe(c),s.signal&&(s.signal.aborted?c():s.signal.addEventListener("abort",c)));const b=r5(s.url);if(b&&Ke.protocols.indexOf(b)===-1){n(new ae("Unsupported protocol "+b+":",ae.ERR_BAD_REQUEST,e));return}S.send(l||null)})},p5=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const l=function(u){if(!s){s=!0,i();const c=u instanceof Error?u:this.reason;n.abort(c instanceof ae?c:new kn(c instanceof Error?c.message:c))}};let o=t&&setTimeout(()=>{o=null,l(new ae(`timeout ${t} of ms exceeded`,ae.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(l):u.removeEventListener("abort",l)}),e=null)};e.forEach(u=>u.addEventListener("abort",l));const{signal:d}=n;return d.unsubscribe=()=>$.asap(i),d}},x5=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},f5=async function*(e,t){for await(const r of g5(e))yield*x5(r,t)},g5=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Wp=(e,t,r,n)=>{const s=f5(e,t);let l=0,o,i=d=>{o||(o=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:u,value:c}=await s.next();if(u){i(),d.close();return}let p=c.byteLength;if(r){let h=l+=p;r(h)}d.enqueue(new Uint8Array(c))}catch(u){throw i(u),u}},cancel(d){return i(d),s.return()}},{highWaterMark:2})},Hp=64*1024,{isFunction:rl}=$,h5=(({Request:e,Response:t})=>({Request:e,Response:t}))($.global),{ReadableStream:qp,TextEncoder:Yp}=$.global,Pp=(e,...t)=>{try{return!!e(...t)}catch{return!1}},m5=e=>{e=$.merge.call({skipUndefined:!0},h5,e);const{fetch:t,Request:r,Response:n}=e,s=t?rl(t):typeof fetch=="function",l=rl(r),o=rl(n);if(!s)return!1;const i=s&&rl(qp),d=s&&(typeof Yp=="function"?(w=>j=>w.encode(j))(new Yp):async w=>new Uint8Array(await new r(w).arrayBuffer())),u=l&&i&&Pp(()=>{let w=!1;const j=new r(Ke.origin,{body:new qp,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!j}),c=o&&i&&Pp(()=>$.isReadableStream(new n("").body)),p={stream:c&&(w=>w.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!p[w]&&(p[w]=(j,S)=>{let m=j&&j[w];if(m)return m.call(j);throw new ae(`Response type '${w}' is not supported`,ae.ERR_NOT_SUPPORT,S)})});const h=async w=>{if(w==null)return 0;if($.isBlob(w))return w.size;if($.isSpecCompliantForm(w))return(await new r(Ke.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if($.isArrayBufferView(w)||$.isArrayBuffer(w))return w.byteLength;if($.isURLSearchParams(w)&&(w=w+""),$.isString(w))return(await d(w)).byteLength},v=async(w,j)=>{const S=$.toFiniteNumber(w.getContentLength());return S??h(j)};return async w=>{let{url:j,method:S,data:m,signal:b,cancelToken:g,timeout:y,onDownloadProgress:T,onUploadProgress:R,responseType:z,headers:A,withCredentials:I="same-origin",fetchOptions:L}=Wg(w),M=t||fetch;z=z?(z+"").toLowerCase():"text";let k=p5([b,g&&g.toAbortSignal()],y),q=null;const D=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let _;try{if(R&&u&&S!=="get"&&S!=="head"&&(_=await v(A,m))!==0){let N=new r(j,{method:"POST",body:m,duplex:"half"}),W;if($.isFormData(m)&&(W=N.headers.get("content-type"))&&A.setContentType(W),N.body){const[O,P]=Ip(_,to(Up(R)));m=Wp(N.body,Hp,O,P)}}$.isString(I)||(I=I?"include":"omit");const B=l&&"credentials"in r.prototype,U={...L,signal:k,method:S.toUpperCase(),headers:A.normalize().toJSON(),body:m,duplex:"half",credentials:B?I:void 0};q=l&&new r(j,U);let F=await(l?M(q,L):M(j,U));const f=c&&(z==="stream"||z==="response");if(c&&(T||f&&D)){const N={};["status","statusText","headers"].forEach(Q=>{N[Q]=F[Q]});const W=$.toFiniteNumber(F.headers.get("content-length")),[O,P]=T&&Ip(W,to(Up(T),!0))||[];F=new n(Wp(F.body,Hp,O,()=>{P&&P(),D&&D()}),N)}z=z||"text";let E=await p[$.findKey(p,z)||"text"](F,w);return!f&&D&&D(),await new Promise((N,W)=>{Ug(N,W,{data:E,headers:ht.from(F.headers),status:F.status,statusText:F.statusText,config:w,request:q})})}catch(B){throw D&&D(),B&&B.name==="TypeError"&&/Load failed|fetch/i.test(B.message)?Object.assign(new ae("Network Error",ae.ERR_NETWORK,w,q),{cause:B.cause||B}):ae.from(B,B&&B.code,w,q)}}},b5=new Map,Hg=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:s}=t,l=[n,s,r];let o=l.length,i=o,d,u,c=b5;for(;i--;)d=l[i],u=c.get(d),u===void 0&&c.set(d,u=i?new Map:m5(t)),c=u;return u};Hg();const Pd={http:My,xhr:u5,fetch:{get:Hg}};$.forEach(Pd,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Gp=e=>`- ${e}`,y5=e=>$.isFunction(e)||e===null||e===!1;function v5(e,t){e=$.isArray(e)?e:[e];const{length:r}=e;let n,s;const l={};for(let o=0;o<r;o++){n=e[o];let i;if(s=n,!y5(n)&&(s=Pd[(i=String(n)).toLowerCase()],s===void 0))throw new ae(`Unknown adapter '${i}'`);if(s&&($.isFunction(s)||(s=s.get(t))))break;l[i||"#"+o]=s}if(!s){const o=Object.entries(l).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let i=r?o.length>1?`since :
`+o.map(Gp).join(`
`):" "+Gp(o[0]):"as no adapter specified";throw new ae("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return s}const qg={getAdapter:v5,adapters:Pd};function yi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new kn(null,e)}function Xp(e){return yi(e),e.headers=ht.from(e.headers),e.data=bi.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),qg.getAdapter(e.adapter||Is.adapter,e)(e).then(function(n){return yi(e),n.data=bi.call(e,e.transformResponse,n),n.headers=ht.from(n.headers),n},function(n){return Ig(n)||(yi(e),n&&n.response&&(n.response.data=bi.call(e,e.transformResponse,n.response),n.response.headers=ht.from(n.response.headers))),Promise.reject(n)})}const Yg="1.13.2",zo={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{zo[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Vp={};zo.transitional=function(t,r,n){function s(l,o){return"[Axios v"+Yg+"] Transitional option '"+l+"'"+o+(n?". "+n:"")}return(l,o,i)=>{if(t===!1)throw new ae(s(o," has been removed"+(r?" in "+r:"")),ae.ERR_DEPRECATED);return r&&!Vp[o]&&(Vp[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(l,o,i):!0}};zo.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function j5(e,t,r){if(typeof e!="object")throw new ae("options must be an object",ae.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const l=n[s],o=t[l];if(o){const i=e[l],d=i===void 0||o(i,l,e);if(d!==!0)throw new ae("option "+l+" must be "+d,ae.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ae("Unknown option "+l,ae.ERR_BAD_OPTION)}}const Cl={assertOptions:j5,validators:zo},Kt=Cl.validators;let br=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Lp,response:new Lp}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Nr(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:l}=r;n!==void 0&&Cl.assertOptions(n,{silentJSONParsing:Kt.transitional(Kt.boolean),forcedJSONParsing:Kt.transitional(Kt.boolean),clarifyTimeoutError:Kt.transitional(Kt.boolean)},!1),s!=null&&($.isFunction(s)?r.paramsSerializer={serialize:s}:Cl.assertOptions(s,{encode:Kt.function,serialize:Kt.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Cl.assertOptions(r,{baseUrl:Kt.spelling("baseURL"),withXsrfToken:Kt.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=l&&$.merge(l.common,l[r.method]);l&&$.forEach(["delete","get","head","post","put","patch","common"],w=>{delete l[w]}),r.headers=ht.concat(o,l);const i=[];let d=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(r)===!1||(d=d&&j.synchronous,i.unshift(j.fulfilled,j.rejected))});const u=[];this.interceptors.response.forEach(function(j){u.push(j.fulfilled,j.rejected)});let c,p=0,h;if(!d){const w=[Xp.bind(this),void 0];for(w.unshift(...i),w.push(...u),h=w.length,c=Promise.resolve(r);p<h;)c=c.then(w[p++],w[p++]);return c}h=i.length;let v=r;for(;p<h;){const w=i[p++],j=i[p++];try{v=w(v)}catch(S){j.call(this,S);break}}try{c=Xp.call(this,v)}catch(w){return Promise.reject(w)}for(p=0,h=u.length;p<h;)c=c.then(u[p++],u[p++]);return c}getUri(t){t=Nr(this.defaults,t);const r=$g(t.baseURL,t.url,t.allowAbsoluteUrls);return _g(r,t.params,t.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(t){br.prototype[t]=function(r,n){return this.request(Nr(n||{},{method:t,url:r,data:(n||{}).data}))}});$.forEach(["post","put","patch"],function(t){function r(n){return function(l,o,i){return this.request(Nr(i||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}br.prototype[t]=r(),br.prototype[t+"Form"]=r(!0)});let S5=class Pg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const n=this;this.promise.then(s=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](s);n._listeners=null}),this.promise.then=s=>{let l;const o=new Promise(i=>{n.subscribe(i),l=i}).then(s);return o.cancel=function(){n.unsubscribe(l)},o},t(function(l,o,i){n.reason||(n.reason=new kn(l,o,i),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Pg(function(s){t=s}),cancel:t}}};function w5(e){return function(r){return e.apply(null,r)}}function C5(e){return $.isObject(e)&&e.isAxiosError===!0}const Mc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Mc).forEach(([e,t])=>{Mc[t]=e});function Gg(e){const t=new br(e),r=Cg(br.prototype.request,t);return $.extend(r,br.prototype,t,{allOwnKeys:!0}),$.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return Gg(Nr(e,s))},r}const Ee=Gg(Is);Ee.Axios=br;Ee.CanceledError=kn;Ee.CancelToken=S5;Ee.isCancel=Ig;Ee.VERSION=Yg;Ee.toFormData=Fo;Ee.AxiosError=ae;Ee.Cancel=Ee.CanceledError;Ee.all=function(t){return Promise.all(t)};Ee.spread=w5;Ee.isAxiosError=C5;Ee.mergeConfig=Nr;Ee.AxiosHeaders=ht;Ee.formToJSON=e=>Og($.isHTMLForm(e)?new FormData(e):e);Ee.getAdapter=qg.getAdapter;Ee.HttpStatusCode=Mc;Ee.default=Ee;const{Axios:Jv,AxiosError:ej,CanceledError:tj,isCancel:aj,CancelToken:rj,VERSION:nj,all:sj,Cancel:lj,isAxiosError:oj,spread:ij,toFormData:cj,AxiosHeaders:dj,HttpStatusCode:uj,formToJSON:pj,getAdapter:xj,mergeConfig:fj}=Ee,N5="http://localhost:3000/api",K=Ee.create({baseURL:N5,timeout:3e5,headers:{"Content-Type":"application/json"}});K.interceptors.request.use(e=>{const t=localStorage.getItem("adminToken")||localStorage.getItem("merchantToken")||localStorage.getItem("userToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e});K.interceptors.response.use(e=>e.data,e=>{var t,r;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.clear(),window.location.href="/login"),Promise.reject(((r=e.response)==null?void 0:r.data)||{message:e.message})});const T5="AIzaSyBOFPwkdS8TKEe3I2QUDBFWq_q3On5kDBI";function k5(){var m,b,g;const{theme:e,isDarkMode:t}=se(),[r,n]=x.useState({today:{rides:0,revenue:0,passengers:0},activeShuttles:0}),[s,l]=x.useState([]),[o,i]=x.useState(!0),[d,u]=x.useState(null),c=x.useRef(null),p=x.useRef(null),h=x.useRef([]);x.useRef(!1);const v=async()=>{try{const y=await K.get("/admin/analytics/dashboard");n({today:(y==null?void 0:y.today)||{rides:0,revenue:0,passengers:0},activeShuttles:(y==null?void 0:y.activeShuttles)||0})}catch(y){console.error("Error loading stats:",y)}finally{i(!1)}},w=async()=>{try{const y=await K.get("/admin/shuttle-positions");l(Array.isArray(y)?y:[]),S(y||[])}catch(y){console.error("Error loading shuttle positions:",y)}},j=x.useCallback(y=>{if(y&&window.google&&window.google.maps&&!p.current)try{const T={lat:14.17815,lng:121.1359};console.log(" Initializing map...");const R=t?[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]}]:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#e0e0e0"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9d9f1"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]}];p.current=new window.google.maps.Map(y,{center:T,zoom:15,styles:R,disableDefaultUI:!0,zoomControl:!0}),console.log(" Map initialized successfully"),u(null),w()}catch(T){console.error(" Map initialization error:",T),u(`Failed to initialize map: ${T.message}`)}c.current=y},[t]),S=y=>{!p.current||!window.google||(h.current.forEach(T=>T.setMap(null)),h.current=[],y.forEach(T=>{var R,z;if(T.latitude&&T.longitude){const A=new window.google.maps.Marker({position:{lat:T.latitude,lng:T.longitude},map:p.current,title:T.shuttleId,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:12,fillColor:t?"#FFD41C":"#3B82F6",fillOpacity:1,strokeColor:t?"#181D40":"#FFFFFF",strokeWeight:3},label:{text:"",fontSize:"16px"}});let I=null;(R=T.currentTrip)!=null&&R.endLatitude&&((z=T.currentTrip)!=null&&z.endLongitude)&&(I=new window.google.maps.Marker({position:{lat:T.currentTrip.endLatitude,lng:T.currentTrip.endLongitude},map:p.current,title:"Destination",icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#EF4444",fillOpacity:1,strokeColor:"#FBFBFB",strokeWeight:3},label:{text:"",fontSize:"14px"}}),h.current.push(I));const L=new window.google.maps.InfoWindow({content:`
            <div style="color: #181D40; padding: 12px; min-width: 250px;">
              <div style="font-weight: 700; font-size: 14px; margin-bottom: 8px; color: #FFD41C; background: #181D40; padding: 6px; border-radius: 4px;">
                ${T.shuttleId}
              </div>
              <div style="margin-bottom: 4px;">
                <strong>Driver:</strong> ${T.driverName||"No driver assigned"}
              </div>
              ${T.vehicleInfo?`<div style="margin-bottom: 4px;"><strong>Vehicle:</strong> ${T.vehicleInfo}</div>`:""}
              ${T.route?`
                <div style="margin-top: 12px; padding: 8px; background: #f0f0f0; border-radius: 4px;">
                  <div style="font-weight: 600; margin-bottom: 4px;">Route: ${T.route.routeName}</div>
                  <div style="font-size: 12px; color: #666;"> From: ${T.route.fromName}</div>
                  <div style="font-size: 12px; color: #666;"> To: ${T.route.toName}</div>
                </div>
              `:""}
              <div style="margin-top: 8px; font-size: 11px; color: #666;">
                Current location: ${T.latitude.toFixed(6)}, ${T.longitude.toFixed(6)}
              </div>
              <div style="font-size: 11px; color: #666;">
                Last update: ${new Date(T.updatedAt).toLocaleTimeString()}
              </div>
            </div>
          `});A.addListener("click",()=>{L.open(p.current,A),p.current.panTo({lat:T.latitude,lng:T.longitude}),p.current.setZoom(16)}),h.current.push(A)}}))};return x.useEffect(()=>{var T;v(),!window.googleMapsLoadingPromise&&!((T=window.google)!=null&&T.maps)&&(document.querySelector('script[src*="maps.googleapis.com"]')?console.log(" Google Maps script already in DOM"):window.googleMapsLoadingPromise=new Promise((z,A)=>{window.initGoogleMaps=()=>{console.log(" Google Maps loaded successfully (with places library)"),z()};const I=document.createElement("script");I.src=`https://maps.googleapis.com/maps/api/js?key=${T5}&libraries=places&callback=initGoogleMaps`,I.async=!0,I.defer=!0,I.onerror=L=>{console.error(" Failed to load Google Maps:",L),u("Failed to load Google Maps. Please check API key."),A(L)},document.head.appendChild(I)}));const y=setInterval(()=>{v(),w()},2e3);return()=>clearInterval(y)},[]),o?a.jsx("div",{style:{color:e.accent.primary},className:"text-center py-[60px]",children:"Loading dashboard..."}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-[30px] border-b-2 pb-5",children:[a.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[a.jsx("span",{children:""})," Home"]}),a.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Real-time motorpool analytics  Auto-updates every 5 seconds"})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-5 mb-[30px]",children:[a.jsx(nl,{icon:"",label:"TODAY'S RIDES",value:((m=r.today)==null?void 0:m.rides)||0,subtitle:"trips completed",color:"#10B981",theme:e}),a.jsx(nl,{icon:"",label:"TODAY'S COLLECTIONS",value:`${(((b=r.today)==null?void 0:b.revenue)||0).toLocaleString()}`,subtitle:"fare collected",color:"#FFD41C",theme:e}),a.jsx(nl,{icon:"",label:"TODAY'S PASSENGERS",value:((g=r.today)==null?void 0:g.passengers)||0,subtitle:"total today",color:"#3B82F6",theme:e}),a.jsx(nl,{icon:"",label:"ACTIVE SHUTTLES",value:`${s.length}/${r.activeShuttles||0}`,subtitle:"in transit / total",color:"#A855F7",theme:e})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:a.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:[a.jsxs("div",{style:{borderColor:e.border.primary},className:"p-5 border-b flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{style:{color:e.accent.primary},className:"m-0 mb-1 text-lg font-bold",children:" Live Shuttle Tracking"}),a.jsxs("p",{style:{color:e.text.secondary},className:"m-0 text-xs",children:[s.length," shuttle(s) currently in transit"]})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-[rgba(16,185,129,0.2)] px-3 py-1.5 rounded-[20px] border border-[rgba(16,185,129,0.3)]",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-[#10B981] animate-pulse"}),a.jsx("span",{className:"text-[#10B981] text-xs font-semibold",children:"LIVE"})]})]}),a.jsx("div",{className:"relative h-[500px]",children:d?a.jsxs("div",{style:{color:e.text.tertiary},className:"h-full flex flex-col items-center justify-center p-10",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{className:"mb-2 text-[#EF4444]",children:d}),a.jsx("div",{className:"text-xs opacity-70",children:"Check console for details"})]}):a.jsx("div",{ref:j,className:"w-full h-full"})}),s.length>0&&!d&&a.jsxs("div",{style:{borderColor:e.border.primary},className:"p-5 border-t",children:[a.jsxs("div",{style:{color:e.accent.primary},className:"text-[11px] font-bold mb-3 uppercase tracking-wide",children:["Shuttles in Transit (",s.length,")"]}),a.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-3",children:s.map((y,T)=>{var R,z;return a.jsxs("button",{onClick:()=>{p.current&&y.latitude&&y.longitude&&(p.current.panTo({lat:y.latitude,lng:y.longitude}),p.current.setZoom(16))},style:{background:e.bg.card,borderColor:e.border.primary},className:"border rounded-xl px-4 py-3 cursor-pointer transition-all duration-200 text-left hover:-translate-y-0.5",onMouseEnter:A=>{A.currentTarget.style.background=t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",A.currentTarget.style.borderColor=e.border.hover},onMouseLeave:A=>{A.currentTarget.style.background=e.bg.card,A.currentTarget.style.borderColor=e.border.primary},children:[a.jsxs("div",{className:"flex items-center gap-[10px] mb-2",children:[a.jsx("span",{className:"text-xl",children:""}),a.jsx("span",{style:{color:e.accent.primary},className:"text-sm font-bold",children:y.shuttleId}),a.jsx("span",{style:{color:e.text.tertiary},className:"text-[10px]",children:""}),a.jsx("span",{style:{color:e.text.secondary},className:"text-xs",children:y.driverName||"Unknown"})]}),y.route&&a.jsx("div",{style:{color:e.text.primary,borderColor:e.accent.primary,background:t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},className:"text-xs mb-1.5 px-2 py-1.5 rounded-md border-l-[3px]",children:a.jsxs("div",{className:"font-semibold mb-0.5",children:[" ",y.route.fromName,"   ",y.route.toName]})}),a.jsxs("div",{style:{color:e.text.tertiary},className:"text-[11px]",children:["Current: ",(R=y.latitude)==null?void 0:R.toFixed(5),", ",(z=y.longitude)==null?void 0:z.toFixed(5)]}),y.updatedAt&&a.jsxs("div",{style:{color:e.text.muted},className:"text-[10px] mt-1",children:["Updated ",new Date(y.updatedAt).toLocaleTimeString()]})]},T)})})]})]})})]})}function nl({icon:e,label:t,value:r,subtitle:n,color:s,theme:l}){return a.jsxs("div",{style:{background:l.bg.card,borderColor:l.border.primary},className:"p-6 rounded-2xl border relative overflow-hidden transition-all duration-300",children:[a.jsx("div",{className:"absolute right-4 top-4 text-[40px] opacity-15",children:e}),a.jsx("div",{style:{color:l.text.secondary},className:"text-[11px] font-bold uppercase tracking-wide mb-3",children:t}),a.jsx("div",{style:{color:l.text.primary},className:"text-[32px] font-extrabold mb-2",children:r}),a.jsx("div",{className:"text-xs font-semibold inline-block py-[3px] px-[10px] rounded-xl",style:{color:s,background:`${s}20`},children:n})]})}function Xt({value:e,onChange:t,placeholder:r="Search..."}){const{theme:n,isDarkMode:s}=se();return a.jsxs("div",{className:"relative w-full max-w-[400px]",children:[a.jsx("span",{style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",fontSize:"18px",color:s?"rgba(255,212,28,0.6)":"rgba(59,130,246,0.6)"},children:""}),a.jsx("input",{type:"text",value:e,onChange:l=>t(l.target.value),placeholder:r,style:{width:"100%",padding:"12px 16px 12px 44px",border:`2px solid ${s?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"10px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",transition:"all 0.3s",outline:"none",boxSizing:"border-box"},onFocus:l=>{l.target.style.borderColor=s?"rgba(255,212,28,0.6)":"rgba(59,130,246,0.6)",l.target.style.background="rgba(251,251,251,0.08)"},onBlur:l=>{l.target.style.borderColor=s?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",l.target.style.background="rgba(251,251,251,0.05)"}})]})}function Vt({onClick:e,disabled:t=!1}){const{theme:r,isDarkMode:n}=se(),s=n?"255, 212, 28":"59, 130, 246";return a.jsxs("button",{onClick:e,disabled:t,style:{padding:"12px 20px",background:t?`rgba(${s}, 0.3)`:`rgba(${s}, 0.15)`,border:`2px solid rgba(${s}, 0.4)`,borderRadius:"10px",color:t?`rgba(${s}, 0.5)`:r.accent.primary,fontSize:"14px",fontWeight:600,cursor:t?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",whiteSpace:"nowrap"},onMouseEnter:l=>{t||(l.currentTarget.style.background=`rgba(${s}, 0.25)`,l.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:l=>{t||(l.currentTarget.style.background=`rgba(${s}, 0.15)`,l.currentTarget.style.transform="translateY(0)")},children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Export CSV"})]})}function E5({variant:e="info",message:t,onClose:r,autoClose:n=4e3}){const{isDarkMode:s}=se(),[l,o]=x.useState(!1);if(x.useEffect(()=>{if(n>0&&r){const c=setTimeout(()=>{o(!0),setTimeout(r,300)},n);return()=>clearTimeout(c)}},[n,r]),!t)return null;const i=()=>{o(!0),setTimeout(r,300)},d={success:"",error:"",warning:"!",info:"i"}[e],u={success:{bg:s?"rgba(16,185,129,0.2)":"rgba(16,185,129,0.15)",text:"#10B981",border:"#10B981",iconBg:"rgba(16,185,129,0.3)"},error:{bg:s?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.15)",text:"#EF4444",border:"#EF4444",iconBg:"rgba(239,68,68,0.3)"},warning:{bg:s?"rgba(251,191,36,0.2)":"rgba(251,191,36,0.15)",text:"#FBBF24",border:"#FBBF24",iconBg:"rgba(251,191,36,0.3)"},info:{bg:s?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.15)",text:"#3B82F6",border:"#3B82F6",iconBg:"rgba(59,130,246,0.3)"}}[e];return a.jsxs("div",{style:{background:u.bg,color:u.text,borderLeft:`4px solid ${u.border}`,padding:"14px 20px",borderRadius:"12px",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",gap:"12px",boxShadow:s?"0 8px 32px rgba(0,0,0,0.4)":"0 8px 32px rgba(0,0,0,0.1)",backdropFilter:"blur(10px)",animation:l?"slideOutRight 0.3s ease-out forwards":"slideInRight 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",maxWidth:"500px",minWidth:"300px"},children:[a.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:u.iconBg,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"16px",flexShrink:0},children:d}),a.jsx("span",{style:{flex:1},children:t}),r&&a.jsx("button",{onClick:i,style:{background:"transparent",border:"none",color:u.text,cursor:"pointer",fontSize:"24px",fontWeight:"bold",padding:"0 4px",lineHeight:1,transition:"all 0.2s",opacity:.7},onMouseEnter:c=>{c.currentTarget.style.opacity="1",c.currentTarget.style.transform="scale(1.2)"},onMouseLeave:c=>{c.currentTarget.style.opacity="0.7",c.currentTarget.style.transform="scale(1)"},children:""}),a.jsx("style",{children:`
        @keyframes slideInRight {
          from {
            transform: translateX(400px);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }

        @keyframes slideOutRight {
          from {
            transform: translateX(0);
            opacity: 1;
          }
          to {
            transform: translateX(400px);
            opacity: 0;
          }
        }
      `})]})}function Qt(e,t){if(!e||e.length===0){alert("No data to export");return}const r=Object.keys(e[0]),n=[r.join(","),...e.map(i=>r.map(d=>{const u=i[d];if(u==null)return"";const c=String(u);return c.includes(",")||c.includes('"')||c.includes(`
`)?`"${c.replace(/"/g,'""')}"`:c}).join(","))].join(`
`),s=new Blob([n],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),o=URL.createObjectURL(s);l.setAttribute("href",o),l.setAttribute("download",`${t}_${new Date().toISOString().split("T")[0]}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}function Zt(e,t=["_id","__v","password","pin"]){return e.map(r=>{const n={};return Object.keys(r).forEach(s=>{t.includes(s)||(r[s]instanceof Date||typeof r[s]=="string"&&/^\d{4}-\d{2}-\d{2}T/.test(r[s])?n[s]=new Date(r[s]).toLocaleString():n[s]=r[s])}),n})}function Qp({location:e,onLocationChange:t,onConfirm:r,pointLabel:n,pointColor:s,apiKey:l}){var g,y;const{theme:o,isDarkMode:i}=se(),d=x.useRef(null),u=x.useRef(null),c=x.useRef(null),p=x.useRef(null),h=x.useRef(null),[v,w]=x.useState(!1),[j,S]=x.useState(e),[m,b]=x.useState(e.displayName||"");return x.useEffect(()=>{var z;if(!d.current||!((z=window.google)!=null&&z.maps))return;const T=new window.google.maps.Map(d.current,{center:e.latitude&&e.longitude?{lat:e.latitude,lng:e.longitude}:{lat:14.5995,lng:120.9842},zoom:15,mapTypeControl:!0,streetViewControl:!1,fullscreenControl:!0});u.current=T,w(!0);const R=s==="green"?"green-dot":"red-dot";return c.current=new window.google.maps.Marker({map:T,draggable:!0,label:n,title:`Point ${n}`,icon:{url:`http://maps.google.com/mapfiles/ms/icons/${R}.png`},position:e.latitude&&e.longitude?{lat:e.latitude,lng:e.longitude}:T.getCenter()}),c.current.addListener("dragend",async A=>{const I=A.latLng.lat(),L=A.latLng.lng(),M=new window.google.maps.Geocoder;try{const k=await M.geocode({location:{lat:I,lng:L}});k.results[0]&&S({name:k.results[0].formatted_address,latitude:I,longitude:L})}catch(k){console.error("Geocoding error:",k),S({name:`${I.toFixed(6)}, ${L.toFixed(6)}`,latitude:I,longitude:L})}}),()=>{c.current&&c.current.setMap(null)}},[]),x.useEffect(()=>{if(c.current&&j.latitude&&j.longitude){const T={lat:j.latitude,lng:j.longitude};c.current.setPosition(T),u.current&&u.current.panTo(T)}},[j]),x.useEffect(()=>{var z,A,I,L;if(!v||!((A=(z=window.google)==null?void 0:z.maps)!=null&&A.places)||!h.current){console.log("Autocomplete not ready:",{isMapReady:v,hasGoogle:!!((L=(I=window.google)==null?void 0:I.maps)!=null&&L.places),hasInput:!!h.current});return}console.log("Initializing Autocomplete...");const T=new window.google.maps.places.Autocomplete(h.current,{componentRestrictions:{country:"ph"},fields:["formatted_address","geometry","name"],types:["establishment","geocode"]});p.current=T,T.bindTo("bounds",u.current),h.current.addEventListener("focus",()=>{console.log("Search input focused - autocomplete should show suggestions when typing")});const R=T.addListener("place_changed",()=>{console.log("Place changed triggered");const M=T.getPlace();if(console.log("Selected place:",M),!M.geometry){console.warn("No geometry for place");return}const k=M.geometry.location.lat(),q=M.geometry.location.lng();console.log("Coordinates:",k,q),S({name:M.formatted_address,latitude:k,longitude:q}),b(M.name||"")});return()=>{R&&window.google.maps.event.removeListener(R)}},[v]),a.jsxs("div",{children:[a.jsx("style",{children:`
        .pac-container {
          background-color: #1E2347 !important;
          border: 2px solid #FFD41C !important;
          border-radius: 8px !important;
          margin-top: 4px !important;
          box-shadow: 0 4px 12px rgba(0,0,0,0.3) !important;
          z-index: 10000 !important;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
        }
        .pac-item {
          padding: 10px 12px !important;
          cursor: pointer !important;
          border-top: 1px solid rgba(255,212,28,0.2) !important;
          color: rgba(251,251,251,0.9) !important;
          font-size: 14px !important;
        }
        .pac-item:first-child {
          border-top: none !important;
        }
        .pac-item:hover {
          background-color: rgba(255,212,28,0.1) !important;
        }
        .pac-item-selected {
          background-color: rgba(255,212,28,0.15) !important;
        }
        .pac-item-query {
          color: #FFD41C !important;
          font-size: 14px !important;
        }
        .pac-matched {
          font-weight: 700 !important;
          color: #FFD41C !important;
        }
        .pac-icon {
          display: none !important;
        }
      `}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block mb-2 font-semibold text-sm",style:{color:o.accent.primary},children:n==="A"?" Search Starting Location":" Search Destination"}),a.jsx("input",{ref:h,type:"text",placeholder:"Type location name or address...",className:"w-full p-3 border-2 rounded-lg text-sm box-border",style:{borderColor:s==="green"?"rgba(34,197,94,0.3)":"rgba(239,68,68,0.3)",background:"rgba(251,251,251,0.05)",color:o.text.primary}}),a.jsx("div",{className:"text-[11px] mt-1",style:{color:o.text.secondary},children:"Start typing and select from dropdown suggestions"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block mb-2 font-semibold text-sm",style:{color:o.accent.primary},children:"Display Name (shown in app)"}),a.jsx("input",{type:"text",value:m,onChange:T=>b(T.target.value),placeholder:"e.g., National University, Manila",className:"w-full p-3 border-2 rounded-lg text-sm box-border",style:{borderColor:s==="green"?"rgba(34,197,94,0.3)":"rgba(239,68,68,0.3)",background:"rgba(251,251,251,0.05)",color:o.text.primary}}),a.jsx("div",{className:"text-[11px] mt-1",style:{color:o.text.secondary},children:"Short, readable name for users (instead of full address)"})]}),a.jsx("div",{ref:d,className:"w-full h-[400px] rounded-xl border-2 border-[rgba(255,212,28,0.3)] overflow-hidden mb-4"}),j.name&&a.jsxs("div",{className:`p-3 rounded-lg mb-4 ${s==="green"?"border border-[rgba(34,197,94,0.3)]":"border border-[rgba(239,68,68,0.3)]"}`,style:{background:s==="green"?"rgba(34,197,94,0.1)":"rgba(239,68,68,0.1)"},children:[a.jsx("div",{className:"text-xs mb-1",style:{color:o.text.secondary},children:"Selected Location:"}),a.jsxs("div",{className:`text-sm font-semibold ${s==="green"?"text-[#22C55E]":"text-[#EF4444]"}`,children:[" ",m||j.name]}),a.jsxs("div",{className:"text-[11px] mt-1",style:{color:o.text.secondary},children:["Full address: ",j.name]}),a.jsxs("div",{className:"text-[11px] mt-0.5",style:{color:o.text.secondary},children:["Coordinates: ",(g=j.latitude)==null?void 0:g.toFixed(6),", ",(y=j.longitude)==null?void 0:y.toFixed(6)]})]}),a.jsxs("div",{className:"p-3 border rounded-lg text-xs mb-6",style:{background:i?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",borderColor:i?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:o.text.primary},children:[" ",a.jsx("strong",{children:"Tip:"})," Search for a location above or drag the ",n==="A"?" green":" red"," marker on the map to adjust position precisely."]}),a.jsx("button",{onClick:()=>r({...j,displayName:m||j.name}),disabled:!j.name||!j.latitude||!m,className:"w-full py-3.5 px-4 border-none rounded-lg text-[15px] font-bold transition-all duration-200",style:!j.name||!j.latitude||!m?{background:"rgba(100,100,100,0.2)",color:"rgba(251,251,251,0.3)",cursor:"not-allowed"}:{background:o.accent.primary,color:o.accent.secondary,cursor:"pointer",boxShadow:i?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},children:n==="A"?"Set Point A & Continue ":"Set Point B & Continue "})]})}function F5(){const{theme:e,isDarkMode:t}=se(),[r,n]=x.useState([]),[s,l]=x.useState(!0),[o,i]=x.useState(!1),[d,u]=x.useState(1),[c,p]=x.useState(null),[h,v]=x.useState(null),[w,j]=x.useState(""),[S,m]=x.useState(1),b=20,[g,y]=x.useState({name:"",displayName:"",latitude:null,longitude:null}),[T,R]=x.useState({name:"",displayName:"",latitude:null,longitude:null}),[z,A]=x.useState(15),[I,L]=x.useState(!0),[M,k]=x.useState(!0),q="AIzaSyBOFPwkdS8TKEe3I2QUDBFWq_q3On5kDBI",[D,_]=x.useState(!1);x.useEffect(()=>{if(window.google&&window.google.maps&&window.google.maps.places){console.log(" Google Maps already loaded and ready"),_(!0);return}window.initGoogleMaps=()=>{console.log(" Google Maps API loaded via callback"),_(!0)};const C=document.querySelector('script[src*="maps.googleapis.com"]');if(C){console.log(" Google Maps script already in DOM, waiting for load..."),console.log("Script src:",C.src);let Z=0;const ve=100,Fe=setInterval(()=>{Z++,window.google&&window.google.maps&&window.google.maps.places?(console.log(" Google Maps API ready after",Z*100,"ms"),_(!0),clearInterval(Fe)):Z>=ve&&(console.error(" Timeout waiting for Google Maps API to load"),console.error("Check browser console for Google Maps errors"),clearInterval(Fe))},100);return()=>clearInterval(Fe)}console.log(" Loading Google Maps script with key:",q.substring(0,20)+"...");const V=document.createElement("script");return V.src=`https://maps.googleapis.com/maps/api/js?key=${q}&libraries=places&callback=initGoogleMaps`,V.async=!0,V.defer=!0,V.onload=()=>{console.log("Script loaded, waiting for callback...")},V.onerror=Z=>{console.error(" Failed to load Google Maps script:",Z),console.error("Possible causes: Invalid API key, network issue, or API restrictions")},document.head.appendChild(V),()=>{}},[q]);const B=async()=>{try{const C=await K.get("/admin/routes");n(Array.isArray(C)?C:[]),l(!1)}catch(C){console.error("Error loading routes:",C),l(!1)}};x.useEffect(()=>{B();const C=setInterval(B,5e3);return()=>clearInterval(C)},[]),x.useEffect(()=>{m(1)},[w]);const U=()=>{if(r.length===0)return"ROUTE_001";let C=0;for(const V of r)if(V.routeId){const Z=V.routeId.match(/ROUTE_(\d+)/i);if(Z){const ve=parseInt(Z[1],10);ve>C&&(C=ve)}}return`ROUTE_${String(C+1).padStart(3,"0")}`},F=async()=>{try{const V={routeName:`${g.displayName||g.name}  ${T.displayName||T.name}`,fromName:g.displayName||g.name,fromLatitude:g.latitude,fromLongitude:g.longitude,toName:T.displayName||T.name,toLatitude:T.latitude,toLongitude:T.longitude,fare:parseFloat(z),isActive:I};if(c)await K.put(`/admin/routes/${c._id}`,V),v({type:"success",message:"Route updated successfully!"});else{const Z=U();if(await K.post("/admin/routes",{...V,routeId:Z}),M){const Fe={routeId:`ROUTE_${String(parseInt(Z.split("_")[1])+1).padStart(3,"0")}`,routeName:`${T.displayName||T.name}  ${g.displayName||g.name}`,fromName:T.displayName||T.name,fromLatitude:T.latitude,fromLongitude:T.longitude,toName:g.displayName||g.name,toLatitude:g.latitude,toLongitude:g.longitude,fare:parseFloat(z),isActive:I};await K.post("/admin/routes",Fe),v({type:"success",message:"Route and reverse route created successfully! "})}else v({type:"success",message:"Route created successfully! "})}f(),i(!1),B()}catch(C){v({type:"error",message:C.message||"Failed to save route"})}},f=()=>{y({name:"",displayName:"",latitude:null,longitude:null}),R({name:"",displayName:"",latitude:null,longitude:null}),A(15),L(!0),p(null),k(!0),u(1)},E=C=>{p(C),y({name:C.fromName,displayName:C.fromName,latitude:C.fromLatitude,longitude:C.fromLongitude}),R({name:C.toName,displayName:C.toName,latitude:C.toLatitude,longitude:C.toLongitude}),A(C.fare),L(C.isActive),u(3),i(!0)},N=async C=>{if(window.confirm("Are you sure you want to delete this route?"))try{await K.delete(`/admin/routes/${C}`),v({type:"success",message:"Route deleted successfully!"}),B()}catch{v({type:"error",message:"Failed to delete route"})}},W=()=>{const C=Zt(r,["routeId","routeName","fromName","toName","fare","isActive"]);Qt(C,`routes_${new Date().toISOString().split("T")[0]}.csv`)},O=r.filter(C=>{var V,Z,ve,Fe;return((V=C.routeName)==null?void 0:V.toLowerCase().includes(w.toLowerCase()))||((Z=C.fromName)==null?void 0:Z.toLowerCase().includes(w.toLowerCase()))||((ve=C.toName)==null?void 0:ve.toLowerCase().includes(w.toLowerCase()))||((Fe=C.routeId)==null?void 0:Fe.toLowerCase().includes(w.toLowerCase()))}),P=Math.ceil(O.length/b),Q=(S-1)*b,ee=Q+b,Y=O.slice(Q,ee);return a.jsxs("div",{className:"p-6 h-full flex flex-col",children:[h&&a.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e4},children:a.jsx(E5,{variant:h.type,message:h.message,onClose:()=>v(null)})}),a.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[a.jsxs("div",{className:"flex justify-between items-center mb-5",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[a.jsx("span",{children:""})," Route Management"]}),a.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:"Manage shuttle routes with interactive map"})]}),a.jsx("button",{onClick:()=>{f(),i(!0)},style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:t?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.3s"},children:"+ Add Route"})]}),a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsx(Xt,{value:w,onChange:j,placeholder:"Search routes..."}),a.jsx(Vt,{onClick:W,disabled:O.length===0})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:O.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{children:"No routes found"})]}):a.jsxs("div",{className:"overflow-x-auto rounded-xl border border-[rgba(255,212,28,0.2)]",children:[a.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[a.jsx("th",{style:{color:e.accent.primary,borderColor:t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Route ID"}),a.jsx("th",{style:{color:e.accent.primary,borderColor:t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Route Name"}),a.jsx("th",{style:{color:e.accent.primary,borderColor:t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"From"}),a.jsx("th",{style:{color:e.accent.primary,borderColor:t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"To"}),a.jsx("th",{style:{color:e.accent.primary,borderColor:t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Fare"}),a.jsx("th",{style:{color:e.accent.primary,borderColor:t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Status"}),a.jsx("th",{style:{color:e.accent.primary,borderColor:t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Actions"})]})}),a.jsx("tbody",{children:s?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-10 text-[rgba(251,251,251,0.5)]",children:"Loading routes..."})}):Y.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-10 text-[rgba(251,251,251,0.5)]",children:"No routes found"})}):Y.map(C=>a.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[a.jsx("td",{className:"p-4",style:{color:e.text.primary},children:a.jsx("strong",{children:C.routeId})}),a.jsx("td",{className:"p-4",style:{color:e.text.primary},children:C.routeName}),a.jsx("td",{className:"p-4",style:{color:e.text.primary},children:C.fromName}),a.jsx("td",{className:"p-4",style:{color:e.text.primary},children:C.toName}),a.jsxs("td",{className:"p-4",style:{color:e.text.primary},children:["",C.fare]}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`inline-block px-3 py-1.5 rounded-md text-[11px] font-bold uppercase ${C.isActive?"bg-[rgba(34,197,94,0.2)] text-[#22C55E]":"bg-[rgba(239,68,68,0.2)] text-[#EF4444]"}`,children:C.isActive?"Active":"Inactive"})}),a.jsxs("td",{className:"p-4",children:[a.jsx("button",{onClick:()=>E(C),className:"px-3 py-1.5 bg-[rgba(59,130,246,0.2)] text-[#3B82F6] border border-[rgba(59,130,246,0.3)] rounded-md cursor-pointer text-xs font-semibold mr-2 hover:bg-[rgba(59,130,246,0.3)] transition-colors",children:"Edit"}),a.jsx("button",{onClick:()=>N(C._id),className:"px-3 py-1.5 bg-[rgba(239,68,68,0.2)] text-[#EF4444] border border-[rgba(239,68,68,0.3)] rounded-md cursor-pointer text-xs font-semibold hover:bg-[rgba(239,68,68,0.3)] transition-colors",children:"Delete"})]})]},C._id))})]}),P>1&&a.jsxs("div",{className:"flex justify-center items-center gap-2.5 mt-5",children:[a.jsx("button",{onClick:()=>m(C=>Math.max(1,C-1)),disabled:S===1,style:{padding:"8px 16px",background:S===1?t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:S===1?e.text.muted:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:S===1?"not-allowed":"pointer"},children:" Previous"}),a.jsxs("span",{style:{color:e.text.secondary,fontSize:"13px",fontWeight:600},children:["Page ",S," of ",P]}),a.jsx("button",{onClick:()=>m(C=>Math.min(P,C+1)),disabled:S===P,style:{padding:"8px 16px",background:S===P?t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:S===P?e.text.muted:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:S===P?"not-allowed":"pointer"},children:"Next "})]})]})}),o&&a.jsx("div",{onClick:()=>{i(!1),f()},style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:a.jsxs("div",{onClick:C=>C.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,width:"90%",maxWidth:"700px",maxHeight:"85vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[a.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:e.accent.primary,margin:0},children:c?"Edit Route":"Add New Route"}),a.jsx("button",{onClick:()=>{i(!1),f()},style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsx("div",{style:{padding:"24px",paddingBottom:"16px"},children:a.jsxs("div",{style:{marginBottom:"8px"},children:[!c&&a.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3,4].map(C=>a.jsx("div",{style:{background:C<=d?e.accent.primary:t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"},className:"flex-1 h-1 rounded-sm transition-all duration-300"},C))}),a.jsx("div",{style:{color:e.text.secondary},className:"text-[13px]",children:!c&&a.jsxs(a.Fragment,{children:[d===1&&"Step 1 of 4: Set Starting Point",d===2&&"Step 2 of 4: Set Destination",d===3&&"Step 3 of 4: Route Details",d===4&&"Step 4 of 4: Review & Confirm"]})})]})}),d===1&&!c&&a.jsx("div",{style:{padding:"0 24px 24px 24px"},children:D?a.jsx(Qp,{location:g,onLocationChange:y,onConfirm:C=>{y(C),u(2)},pointLabel:"A",pointColor:"green",apiKey:q}):a.jsx("div",{className:"text-center py-8",style:{color:e.text.secondary},children:"Loading Google Maps..."})}),d===2&&!c&&a.jsx("div",{style:{padding:"0 24px 24px 24px"},children:D?a.jsxs(a.Fragment,{children:[a.jsx(Qp,{location:T,onLocationChange:R,onConfirm:C=>{R(C),u(3)},pointLabel:"B",pointColor:"red",apiKey:q}),a.jsx("button",{onClick:()=>u(1),style:{width:"100%",padding:"12px 16px",background:"transparent",color:e.text.primary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",cursor:"pointer",fontWeight:600,marginTop:"12px",transition:"all 0.2s"},children:" Back to Point A"})]}):a.jsx("div",{className:"text-center py-8",style:{color:e.text.secondary},children:"Loading Google Maps..."})}),d===3&&a.jsxs("div",{style:{padding:"0 24px 24px 24px"},children:[a.jsxs("div",{style:{background:t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",border:`1px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"12px",padding:"16px",marginBottom:"24px"},children:[a.jsx("div",{style:{fontSize:"13px",color:e.text.secondary,marginBottom:"12px"},children:"Selected Route:"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-[11px] text-[#22C55E] mb-1",children:" FROM"}),a.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:g.displayName||g.name})]}),a.jsx("div",{style:{fontSize:"20px",color:e.accent.primary},children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-[11px] text-[#EF4444] mb-1",children:" TO"}),a.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:T.displayName||T.name})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Fare () *"}),a.jsx("input",{type:"number",value:z,onChange:C=>A(C.target.value),min:"0",step:"0.01",style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:t?"rgba(251,251,251,0.05)":"#FFFFFF",color:e.text.primary,fontSize:"14px",boxSizing:"border-box"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Status"}),a.jsxs("select",{value:I?"true":"false",onChange:C=>L(C.target.value==="true"),style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:t?"rgba(251,251,251,0.05)":"#FFFFFF",color:e.text.primary,fontSize:"14px",boxSizing:"border-box"},children:[a.jsx("option",{value:"true",children:"Active"}),a.jsx("option",{value:"false",children:"Inactive"})]})]})]}),!c&&a.jsx("div",{style:{marginBottom:"24px"},children:a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",padding:"14px",background:t?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.08)",border:`1px solid ${t?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)"}`,borderRadius:"8px"},children:[a.jsx("input",{type:"checkbox",checked:M,onChange:C=>k(C.target.checked),style:{width:"20px",height:"20px",cursor:"pointer"}}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{color:e.text.primary,fontSize:"14px",fontWeight:600,marginBottom:"4px"},children:" Create Reverse Route"}),a.jsxs("div",{style:{fontSize:"12px",color:e.text.secondary},children:["Automatically create: ",T.displayName||T.name||"Point B","  ",g.displayName||g.name||"Point A"]})]})]})}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[!c&&a.jsx("button",{onClick:()=>u(2),style:{flex:1,padding:"12px",background:"transparent",color:e.text.primary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",cursor:"pointer",fontWeight:600,transition:"all 0.2s"},children:" Back"}),a.jsx("button",{onClick:()=>{c?F():u(4)},style:{flex:1,padding:"12px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,boxShadow:t?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.2s"},children:c?"Update Route":"Review "})]})]}),d===4&&!c&&a.jsxs("div",{style:{padding:"0 24px 24px 24px"},children:[a.jsxs("div",{style:{background:t?"rgba(255,212,28,0.05)":"rgba(59,130,246,0.05)",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[a.jsx("h4",{style:{margin:"0 0 20px 0",color:e.accent.primary,fontSize:"18px"},children:" Route Summary"}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("div",{style:{fontSize:"12px",color:e.text.secondary,marginBottom:"8px"},children:"Main Route:"}),a.jsxs("div",{style:{background:t?"rgba(251,251,251,0.05)":"rgba(0,0,0,0.03)",padding:"16px",borderRadius:"8px",marginBottom:"12px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontSize:"11px",color:"#22C55E",marginBottom:"4px"},children:" FROM"}),a.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:g.displayName||g.name})]}),a.jsx("div",{style:{fontSize:"20px",color:e.accent.primary},children:""}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontSize:"11px",color:"#EF4444",marginBottom:"4px"},children:" TO"}),a.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:T.displayName||T.name})]})]}),a.jsxs("div",{style:{paddingTop:"12px",borderTop:`1px solid ${e.border.secondary}`,display:"flex",justifyContent:"space-between",fontSize:"13px"},children:[a.jsxs("div",{style:{color:e.text.secondary},children:["Fare: ",a.jsxs("span",{style:{color:e.accent.primary,fontWeight:600},children:["",z]})]}),a.jsxs("div",{style:{color:e.text.secondary},children:["Status: ",a.jsx("span",{style:{color:I?"#22C55E":e.text.muted,fontWeight:600},children:I?"Active":"Inactive"})]})]})]})]}),M&&a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:e.text.secondary,marginBottom:"8px"},children:"Reverse Route (Auto-created):"}),a.jsxs("div",{style:{background:t?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.08)",padding:"16px",borderRadius:"8px",border:`1px solid ${t?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)"}`},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontSize:"11px",color:"#EF4444",marginBottom:"4px"},children:" FROM"}),a.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:T.displayName||T.name})]}),a.jsx("div",{style:{fontSize:"20px",color:"#3B82F6"},children:""}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontSize:"11px",color:"#22C55E",marginBottom:"4px"},children:" TO"}),a.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:g.displayName||g.name})]})]}),a.jsxs("div",{style:{paddingTop:"12px",borderTop:"1px solid rgba(59,130,246,0.2)",display:"flex",justifyContent:"space-between",fontSize:"13px"},children:[a.jsxs("div",{style:{color:e.text.secondary},children:["Fare: ",a.jsxs("span",{style:{color:"#3B82F6",fontWeight:600},children:["",z]})]}),a.jsxs("div",{style:{color:e.text.secondary},children:["Status: ",a.jsx("span",{style:{color:I?"#22C55E":e.text.muted,fontWeight:600},children:I?"Active":"Inactive"})]})]})]})]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:()=>u(3),style:{flex:1,padding:"12px",background:"transparent",color:e.text.primary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",cursor:"pointer",fontWeight:600,transition:"all 0.2s"},children:" Back to Edit"}),a.jsx("button",{onClick:F,style:{flex:1,padding:"12px",background:"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"15px",boxShadow:"0 4px 12px rgba(34,197,94,0.4)",transition:"all 0.2s"},children:M?" Create Both Routes":" Create Route"})]})]})]})}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function z5(){const{theme:e,isDarkMode:t}=se(),[r,n]=x.useState([]),[s,l]=x.useState(!0),[o,i]=x.useState(!1),[d,u]=x.useState(null),[c,p]=x.useState(null),[h,v]=x.useState(""),[w,j]=x.useState(!1),[S,m]=x.useState(1),b=20,[g,y]=x.useState({driverId:"",firstName:"",lastName:"",middleInitial:"",email:"",password:"",shuttleId:"",licenseNumber:"",licenseExpiry:""}),T=async()=>{try{const f=await K.get("/admin/drivers");n(f),l(!1)}catch(f){console.error("Error loading drivers:",f),p({type:"error",message:"Failed to load drivers"}),l(!1)}};x.useEffect(()=>{T();const f=setInterval(T,5e3);return()=>clearInterval(f)},[]);const R=()=>{if(r.length===0)return"DRV001";let f=0;for(const E of r)if(E.driverId){const N=E.driverId.match(/DRV(\d+)/i);if(N){const W=parseInt(N[1],10);W>f&&(f=W)}}return`DRV${String(f+1).padStart(3,"0")}`},z=()=>{u(null),y({driverId:R(),firstName:"",lastName:"",middleInitial:"",email:"",password:"",shuttleId:"",licenseNumber:"",licenseExpiry:""}),i(!0)},A=f=>{u(f),y({driverId:f.driverId,firstName:f.firstName,lastName:f.lastName,middleInitial:f.middleInitial||"",email:f.email,password:"",shuttleId:f.shuttleId||"",licenseNumber:f.licenseNumber||"",licenseExpiry:f.licenseExpiry?f.licenseExpiry.split("T")[0]:""}),i(!0)},I=async f=>{var N,W,O,P,Q,ee;if(f.preventDefault(),!g.firstName||g.firstName.trim().length===0){p({type:"error",message:"First name is required"});return}if(!g.lastName||g.lastName.trim().length===0){p({type:"error",message:"Last name is required"});return}const E=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!g.email||!E.test(g.email.trim())){p({type:"error",message:"Please enter a valid email address"});return}if(g.password&&!/^\d{6}$/.test(g.password)){p({type:"error",message:"PIN must be exactly 6 digits"});return}if(!d&&(!g.licenseNumber||g.licenseNumber.trim().length===0)){p({type:"error",message:"License number is required"});return}if(!d&&(!g.licenseExpiry||g.licenseExpiry.trim().length===0)){p({type:"error",message:"License expiry date is required"});return}if(g.licenseExpiry){const Y=new Date(g.licenseExpiry),C=new Date;if(C.setHours(0,0,0,0),Y<C){p({type:"error",message:"License expiry date cannot be in the past"});return}}j(!0);try{if(d){const Y={...g};Y.password||delete Y.password,await K.put(`/admin/drivers/${d._id}`,Y),p({type:"success",message:"Driver updated successfully!"})}else{if(!g.password){p({type:"error",message:"PIN is required for new drivers"}),j(!1);return}await K.post("/admin/drivers",g),p({type:"success",message:"Driver created successfully!"})}i(!1),T(),setTimeout(()=>p(null),3e3)}catch(Y){console.error("Error saving driver:",Y);let C="Failed to save driver";((N=Y.response)==null?void 0:N.status)===409?C="Email already exists. Please use a different email.":((W=Y.response)==null?void 0:W.status)===400?C=((P=(O=Y.response)==null?void 0:O.data)==null?void 0:P.error)||"Invalid driver data. Please check all fields.":((Q=Y.response)==null?void 0:Q.status)===500?C="Server error. Please try again later.":(ee=Y.message)!=null&&ee.includes("Network")&&(C="Network error. Please check your connection."),p({type:"error",message:C})}finally{j(!1)}},L=async f=>{if(window.confirm(`Delete driver ${f.fullName}? This cannot be undone.`))try{await K.delete(`/admin/drivers/${f._id}`),p({type:"success",message:"Driver deleted successfully!"}),T(),setTimeout(()=>p(null),3e3)}catch(E){console.error("Error deleting driver:",E),p({type:"error",message:"Failed to delete driver"})}},M=async(f,E)=>{try{await K.put(`/admin/drivers/${f._id}`,{isActive:E==="active"}),p({type:"success",message:"Status updated!"}),T(),setTimeout(()=>p(null),2e3)}catch(N){console.error("Error updating status:",N),p({type:"error",message:"Failed to update status"})}},k=f=>{const{name:E,value:N}=f.target;if(E==="password"){const W=N.replace(/\D/g,"").slice(0,6);y(O=>({...O,[E]:W}))}else y(W=>({...W,[E]:N}))},q=()=>{const f=Zt(D);Qt(f,"drivers")},D=r.filter(f=>{var W,O,P,Q,ee;if(!h)return!0;const E=h.toLowerCase(),N=`${f.firstName} ${f.lastName}`.toLowerCase();return((W=f.driverId)==null?void 0:W.toLowerCase().includes(E))||((O=f.firstName)==null?void 0:O.toLowerCase().includes(E))||((P=f.lastName)==null?void 0:P.toLowerCase().includes(E))||N.includes(E)||((Q=f.email)==null?void 0:Q.toLowerCase().includes(E))||((ee=f.shuttleId)==null?void 0:ee.toLowerCase().includes(E))}),_=Math.ceil(D.length/b),B=(S-1)*b,U=B+b,F=D.slice(B,U);return x.useEffect(()=>{m(1)},[h]),s?a.jsx("div",{className:"text-center py-[60px]",style:{color:e.accent.primary},children:"Loading drivers..."}):a.jsxs("div",{className:"h-full flex flex-col",children:[c&&a.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:c.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:c.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${c.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4,animation:"fadeIn 0.3s ease"},children:c.message}),a.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[a.jsxs("div",{className:"flex justify-between items-center mb-5",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[a.jsx("span",{children:""})," Driver Management"]}),a.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:D.length>0?`Showing ${B+1}-${Math.min(U,D.length)} of ${D.length}  Page ${S} of ${_}`:`Total: ${r.length} drivers`})]}),a.jsx("button",{onClick:z,style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:t?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.3s"},children:"+ Add Driver"})]}),a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsx(Xt,{value:h,onChange:v,placeholder:"Search by name, ID, email, or shuttle..."}),a.jsx(Vt,{onClick:q,disabled:D.length===0})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:D.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{children:h?"No drivers match your search":"No drivers found"}),h&&a.jsx("button",{onClick:()=>v(""),style:{marginTop:"16px",padding:"8px 16px",background:t?"rgba(255, 212, 28, 0.15)":"rgba(59, 130, 246, 0.15)",border:`2px solid ${t?"rgba(255, 212, 28, 0.4)":"rgba(59, 130, 246, 0.4)"}`,borderRadius:"8px",color:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):a.jsxs("div",{className:"overflow-x-auto rounded-xl",style:{border:`1px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[a.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Driver ID"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Name"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Email"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Shuttle"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Status"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Actions"})]})}),a.jsx("tbody",{children:F.map(f=>a.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[a.jsx("td",{style:{padding:"16px",color:e.text.primary},children:a.jsx("strong",{children:f.driverId})}),a.jsx("td",{style:{padding:"16px",color:e.text.primary},children:f.fullName||`${f.firstName} ${f.lastName}`}),a.jsx("td",{style:{padding:"16px",color:e.text.primary},children:f.email}),a.jsx("td",{style:{padding:"16px",color:e.text.primary},children:f.shuttleId||"None"}),a.jsx("td",{style:{padding:"16px"},children:a.jsxs("select",{value:f.isActive?"active":"inactive",onChange:E=>M(f,E.target.value),style:{padding:"6px 12px",borderRadius:"6px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",border:"none",cursor:"pointer",background:f.isActive?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:f.isActive?"#22C55E":"#EF4444"},children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})}),a.jsxs("td",{style:{padding:"16px"},children:[a.jsx("button",{onClick:()=>A(f),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",marginRight:"8px"},children:"Edit"}),a.jsx("button",{onClick:()=>L(f),style:{padding:"6px 12px",background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Delete"})]})]},f._id))})]}),_>1&&a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[a.jsx("button",{onClick:()=>m(f=>Math.max(1,f-1)),disabled:S===1,style:{padding:"8px 16px",background:S===1?t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:S===1?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:S===1?"not-allowed":"pointer"},children:" Previous"}),a.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",S," of ",_]}),a.jsx("button",{onClick:()=>m(f=>Math.min(_,f+1)),disabled:S===_,style:{padding:"8px 16px",background:S===_?t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:S===_?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:S===_?"not-allowed":"pointer"},children:"Next "})]})]})}),o&&a.jsx("div",{onClick:()=>i(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:a.jsxs("div",{onClick:f=>f.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[a.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:e.accent.primary,margin:0},children:d?"Edit Driver":"Add New Driver"}),a.jsx("button",{onClick:()=>i(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsxs("form",{onSubmit:I,style:{padding:"24px"},children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["Driver ID ",!d&&a.jsx("span",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontWeight:400},children:"(Auto-generated)"})]}),a.jsx("input",{type:"text",name:"driverId",value:g.driverId,disabled:!0,style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"8px",background:"rgba(100,100,100,0.2)",color:"rgba(251,251,251,0.5)",fontSize:"14px",boxSizing:"border-box",cursor:"not-allowed"}})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 80px",gap:"20px",marginBottom:"20px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"First Name *"}),a.jsx("input",{type:"text",name:"firstName",value:g.firstName,onChange:k,required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Last Name *"}),a.jsx("input",{type:"text",name:"lastName",value:g.lastName,onChange:k,required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"M.I."}),a.jsx("input",{type:"text",name:"middleInitial",value:g.middleInitial,onChange:k,maxLength:"1",style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",textAlign:"center",textTransform:"uppercase"}})]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Email *"}),a.jsx("input",{type:"email",name:"email",value:g.email,onChange:k,required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["6-Digit PIN ",d&&a.jsx("span",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontWeight:400},children:"(leave blank to keep current)"})]}),a.jsx("input",{type:"text",name:"password",value:g.password,onChange:k,required:!d,maxLength:"6",placeholder:"123456",pattern:"\\d{6}",style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"18px",boxSizing:"border-box",letterSpacing:"8px",textAlign:"center",fontWeight:700}}),a.jsx("p",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginTop:"8px",marginBottom:0},children:"Numbers only, exactly 6 digits"})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["Driver's License Number ",a.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),a.jsx("input",{type:"text",name:"licenseNumber",value:g.licenseNumber,onChange:k,placeholder:"e.g., N12-34-567890",required:!d,style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["License Expiry Date ",a.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),a.jsx("input",{type:"date",name:"licenseExpiry",value:g.licenseExpiry,onChange:k,required:!d,min:new Date().toISOString().split("T")[0],style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",colorScheme:"dark"}})]}),a.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",paddingTop:"20px",borderTop:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[a.jsx("button",{type:"button",onClick:()=>i(!1),style:{padding:"12px 24px",background:"rgba(251,251,251,0.1)",color:"rgba(251,251,251,0.7)",border:"1px solid rgba(251,251,251,0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:w,style:{padding:"12px 24px",background:w?"#CCCCCC":e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:w?"not-allowed":"pointer",boxShadow:w?"none":t?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",opacity:w?.6:1},children:w?"Saving...":d?"Update Driver":"Create Driver"})]})]})]})}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from { 
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to { 
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}function Je({value:e,onChange:t,options:r,label:n="Status"}){return a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",minWidth:"150px"},children:[a.jsx("label",{style:{fontSize:"11px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:n}),a.jsxs("select",{value:e,onChange:s=>t(s.target.value),style:{padding:"10px 12px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease",outline:"none"},children:[a.jsx("option",{value:"",children:"All"}),r.map(s=>a.jsx("option",{value:s.value,children:s.label},s.value))]})]})}function D5(){const{theme:e,isDarkMode:t}=se(),[r,n]=x.useState([]),[s,l]=x.useState(!0),[o,i]=x.useState(!1),[d,u]=x.useState(null),[c,p]=x.useState(null),[h,v]=x.useState(""),[w,j]=x.useState(""),[S,m]=x.useState(1),b=20,[g,y]=x.useState({shuttleId:"",vehicleType:"",vehicleModel:"",plateNumber:"",capacity:15}),T=async()=>{try{const F=await K.get("/admin/shuttles");n(Array.isArray(F)?F:[]),l(!1)}catch(F){console.error("Error loading shuttles:",F),l(!1)}};x.useEffect(()=>{T();const F=setInterval(T,2e3);return()=>clearInterval(F)},[]);const R=()=>{if(r.length===0)return"SHUTTLE_001";let F=0;for(const f of r)if(f.shuttleId){const E=f.shuttleId.match(/SHUTTLE_(\d+)/i);if(E){const N=parseInt(E[1],10);N>F&&(F=N)}}return`SHUTTLE_${String(F+1).padStart(3,"0")}`},z=async F=>{var f,E;F.preventDefault();try{if(d)await K.put(`/admin/shuttles/${d._id}`,g),p({type:"success",message:"Shuttle updated successfully!"});else{const N=R();await K.post("/admin/shuttles",{...g,shuttleId:N}),p({type:"success",message:"Shuttle created successfully!"})}i(!1),u(null),M(),T(),setTimeout(()=>p(null),3e3)}catch(N){p({type:"error",message:((E=(f=N.response)==null?void 0:f.data)==null?void 0:E.error)||"Failed to save shuttle"})}},A=F=>{u(F),y({shuttleId:F.shuttleId,vehicleType:F.vehicleType,vehicleModel:F.vehicleModel,plateNumber:F.plateNumber||"",capacity:F.capacity||15}),i(!0)},I=async F=>{var f,E;if(window.confirm("Are you sure you want to delete this shuttle?"))try{await K.delete(`/admin/shuttles/${F}`),p({type:"success",message:"Shuttle deleted successfully!"}),T(),setTimeout(()=>p(null),3e3)}catch(N){p({type:"error",message:((E=(f=N.response)==null?void 0:f.data)==null?void 0:E.error)||"Failed to delete shuttle"})}},L=async(F,f)=>{try{await K.put(`/admin/shuttles/${F._id}`,{...F,status:f}),p({type:"success",message:"Status updated!"}),T(),setTimeout(()=>p(null),2e3)}catch{p({type:"error",message:"Failed to update status"})}},M=()=>{y({shuttleId:"",vehicleType:"",vehicleModel:"",plateNumber:"",capacity:15})},k=()=>{const F=Zt(q);Qt(F,"shuttles")},q=r.filter(F=>{var f,E,N,W,O,P;if(h){const Q=h.toLowerCase();if(!(((f=F.shuttleId)==null?void 0:f.toLowerCase().includes(Q))||((E=F.vehicleType)==null?void 0:E.toLowerCase().includes(Q))||((N=F.vehicleModel)==null?void 0:N.toLowerCase().includes(Q))||((W=F.plateNumber)==null?void 0:W.toLowerCase().includes(Q))||((O=F.status)==null?void 0:O.toLowerCase().includes(Q))||((P=F.currentDriver)==null?void 0:P.toLowerCase().includes(Q))))return!1}return!(w&&F.status!==w)}),D=Math.ceil(q.length/b),_=(S-1)*b,B=_+b,U=q.slice(_,B);return x.useEffect(()=>{m(1)},[h,w]),s?a.jsx("div",{className:"text-center py-[60px]",style:{color:e.accent.primary},children:"Loading shuttles..."}):a.jsxs("div",{className:"h-full flex flex-col",children:[c&&a.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:c.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:c.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${c.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4,animation:"fadeIn 0.3s ease"},children:c.message}),a.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[a.jsx("span",{children:""})," Fleet Management"]}),a.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:q.length>0?`Showing ${_+1}-${Math.min(B,q.length)} of ${q.length}  Page ${S} of ${D}`:`Total shuttles: ${r.length}`})]}),a.jsx("button",{onClick:()=>{M(),u(null),i(!0)},style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:t?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.3s"},children:"+ Add Shuttle"})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[a.jsx(Xt,{value:h,onChange:v,placeholder:"Search by ID, vehicle, plate, status, or driver..."}),a.jsx(Je,{value:w,onChange:j,label:"Status",options:[{value:"available",label:"Available"},{value:"reserved",label:"Reserved"},{value:"taken",label:"Taken"},{value:"unavailable",label:"Unavailable"}]}),a.jsx(Vt,{onClick:k,disabled:q.length===0})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:r.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{children:"No shuttles found"})]}):q.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{style:{marginBottom:"12px"},children:"No shuttles match your search"}),a.jsx("button",{onClick:()=>v(""),style:{padding:"8px 16px",background:t?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):a.jsxs("div",{className:"overflow-x-auto rounded-xl",style:{border:`1px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[a.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Shuttle ID"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Vehicle"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Plate"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Capacity"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Status"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Current Driver"}),a.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:e.accent.primary,textTransform:"uppercase",borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Actions"})]})}),a.jsx("tbody",{children:U.map(F=>a.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[a.jsx("td",{style:{padding:"16px",color:e.text.primary},children:a.jsx("strong",{children:F.shuttleId})}),a.jsxs("td",{style:{padding:"16px",color:e.text.primary},children:[F.vehicleType," ",F.vehicleModel]}),a.jsx("td",{style:{padding:"16px",color:e.text.primary},children:F.plateNumber||"N/A"}),a.jsxs("td",{style:{padding:"16px",color:e.text.primary},children:[F.capacity," pax"]}),a.jsx("td",{style:{padding:"16px"},children:a.jsxs("select",{value:F.status,onChange:f=>L(F,f.target.value),style:{padding:"6px 12px",borderRadius:"6px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",border:"none",cursor:"pointer",background:F.status==="available"?"rgba(34,197,94,0.2)":F.status==="reserved"?"rgba(59,130,246,0.2)":F.status==="taken"?"rgba(251,191,36,0.2)":"rgba(239,68,68,0.2)",color:F.status==="available"?"#22C55E":F.status==="reserved"?"#3B82F6":F.status==="taken"?t?"#FBBF24":"#F59E0B":"#EF4444"},children:[a.jsx("option",{value:"available",children:"Available"}),a.jsx("option",{value:"reserved",children:"Reserved"}),a.jsx("option",{value:"taken",children:"Taken"}),a.jsx("option",{value:"unavailable",children:"Unavailable"})]})}),a.jsx("td",{style:{padding:"16px",color:e.text.secondary,fontSize:"12px"},children:F.currentDriver||""}),a.jsxs("td",{style:{padding:"16px",textAlign:"right"},children:[a.jsx("button",{onClick:()=>A(F),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",marginRight:"8px"},children:"Edit"}),a.jsx("button",{onClick:()=>I(F._id),style:{padding:"6px 12px",background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Delete"})]})]},F._id))})]}),D>1&&a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[a.jsx("button",{onClick:()=>m(F=>Math.max(1,F-1)),disabled:S===1,style:{padding:"8px 16px",background:S===1?t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:S===1?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:S===1?"not-allowed":"pointer"},children:" Previous"}),a.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",S," of ",D]}),a.jsx("button",{onClick:()=>m(F=>Math.min(D,F+1)),disabled:S===D,style:{padding:"8px 16px",background:S===D?t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:S===D?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:S===D?"not-allowed":"pointer"},children:"Next "})]})]})}),o&&a.jsx("div",{onClick:()=>i(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:a.jsxs("div",{onClick:F=>F.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[a.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:e.accent.primary,margin:0},children:d?"Edit Shuttle":"Add New Shuttle"}),a.jsx("button",{onClick:()=>i(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsxs("form",{onSubmit:z,style:{padding:"24px"},children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["Shuttle ID ",!d&&a.jsx("span",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontWeight:400},children:"(Auto-generated)"})]}),a.jsx("input",{type:"text",value:d?g.shuttleId:R(),disabled:!0,style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"8px",background:"rgba(100,100,100,0.2)",color:"rgba(251,251,251,0.5)",fontSize:"14px",boxSizing:"border-box",cursor:"not-allowed"}})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Vehicle Type *"}),a.jsx("input",{type:"text",value:g.vehicleType,onChange:F=>y({...g,vehicleType:F.target.value}),required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"},placeholder:"e.g., Isuzu, Toyota"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Vehicle Model *"}),a.jsx("input",{type:"text",value:g.vehicleModel,onChange:F=>y({...g,vehicleModel:F.target.value}),required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"},placeholder:"e.g., Traviz, Hiace"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Plate Number"}),a.jsx("input",{type:"text",value:g.plateNumber,onChange:F=>y({...g,plateNumber:F.target.value}),style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"},placeholder:"e.g., ABC 1234"})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Capacity *"}),a.jsx("input",{type:"number",value:g.capacity,onChange:F=>y({...g,capacity:parseInt(F.target.value)}),required:!0,min:"1",style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),a.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",paddingTop:"20px",borderTop:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[a.jsx("button",{type:"button",onClick:()=>i(!1),style:{padding:"12px 24px",background:"rgba(251,251,251,0.1)",color:"rgba(251,251,251,0.7)",border:"1px solid rgba(251,251,251,0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),a.jsx("button",{type:"submit",style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:t?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},children:d?"Update Shuttle":"Create Shuttle"})]})]})]})}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from { 
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to { 
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}function En({startDate:e,endDate:t,onStartChange:r,onEndChange:n}){return a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[a.jsx("label",{style:{fontSize:"11px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"From"}),a.jsx("input",{type:"date",value:e,onChange:s=>r(s.target.value),style:{padding:"10px 12px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease",outline:"none"}})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[a.jsx("label",{style:{fontSize:"11px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"To"}),a.jsx("input",{type:"date",value:t,onChange:s=>n(s.target.value),style:{padding:"10px 12px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease",outline:"none"}})]}),(e||t)&&a.jsx("button",{onClick:()=>{r(""),n("")},style:{padding:"10px 16px",background:"rgba(239, 68, 68, 0.2)",border:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"10px",color:"#EF4444",fontSize:"13px",fontWeight:600,cursor:"pointer",whiteSpace:"nowrap"},children:"Clear Dates"})]})}function R5({trip:e,onClose:t,onUpdate:r}){const n=x.useRef(null),s=x.useRef(null),[l,o]=x.useState(""),[i,d]=x.useState(!1),[u,c]=x.useState(e);x.useEffect(()=>{c(e)},[e]),x.useEffect(()=>{if(!u||!n.current||s.current)return;const j=()=>{window.google&&window.google.maps?S():window.googleMapsLoadingPromise?window.googleMapsLoadingPromise.then(()=>{window.google&&window.google.maps&&S()}).catch(m=>{console.error("Failed to load Google Maps:",m)}):console.warn("Google Maps is not available. Please ensure Dashboard loaded first.")},S=()=>{if(!n.current||s.current)return;const m=new window.google.maps.LatLngBounds,b={lat:u.startLatitude,lng:u.startLongitude},g={lat:u.endLatitude,lng:u.endLongitude};m.extend(b),m.extend(g),s.current=new window.google.maps.Map(n.current,{center:m.getCenter(),zoom:14,styles:[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]}],disableDefaultUI:!0,zoomControl:!0}),new window.google.maps.Marker({position:b,map:s.current,title:u.startLocationName||"Start Location",icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#22C55E",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2},label:{text:"",fontSize:"16px"}}),new window.google.maps.Marker({position:g,map:s.current,title:u.endLocationName||"End Location",icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#EF4444",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2},label:{text:"",fontSize:"16px"}}),new window.google.maps.Polyline({path:[b,g],geodesic:!0,strokeColor:"#FFD41C",strokeOpacity:.8,strokeWeight:4,map:s.current}),s.current.fitBounds(m)};return j(),()=>{s.current&&(s.current=null)}},[u]);const p=async()=>{if(l.trim()){d(!0);try{const j=JSON.parse(localStorage.getItem("adminData")||"{}"),S=await K.post(`/admin/trips/${u._id}/notes`,{content:l,adminId:j._id||"unknown",adminName:j.name||"Admin"});S.trip&&(c(S.trip),o(""),r&&r(S.trip))}catch(j){console.error("Error adding note:",j),alert("Failed to add note. Please try again.")}finally{d(!1)}}};if(!u)return null;const v=(j=>{switch(j){case"completed":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"in_progress":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"cancelled":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};default:return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"}}})(u.status),w=j=>{if(!j)return"N/A";const S=Math.floor(j/60),m=j%60;return S>0?`${S}h ${m}m`:`${m}m`};return a.jsxs("div",{onClick:t,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{onClick:j=>j.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"800px",width:"90%",maxHeight:"85vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[a.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[a.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#FFD41C",margin:0},children:"Trip Details"}),a.jsx("span",{style:{fontSize:"16px",color:"#FFD41C",fontWeight:700,fontFamily:"monospace",background:"rgba(255,212,28,0.15)",padding:"4px 12px",borderRadius:"6px"},children:u.tripId||`#${u._id.slice(-8)}`})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[a.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:v.bg,color:v.color},children:u.status}),u.status==="in_progress"&&a.jsxs("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:"rgba(251,191,36,0.2)",color:"#FBBF24",display:"flex",alignItems:"center",gap:"4px"},children:[a.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#FBBF24",animation:"pulse 2s infinite"}}),"ACTIVE"]})]})]}),a.jsx("button",{onClick:t,style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]}),a.jsxs("div",{style:{padding:"24px"},children:[a.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",border:"1px solid rgba(255,212,28,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"Trip Information"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Shuttle ID"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:u.shuttleId})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Driver"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:u.driverName||u.driverId})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Route ID"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:u.routeId})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Distance Traveled"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:u.distanceTraveledKm?`${u.distanceTraveledKm} km`:"N/A"})]})]})]}),a.jsxs("div",{style:{background:"rgba(59,130,246,0.05)",border:"1px solid rgba(59,130,246,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#3B82F6",textTransform:"uppercase",marginBottom:"12px"},children:"Timing"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Departure Time"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:new Date(u.departureTime).toLocaleString()})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Arrival Time"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:u.arrivalTime?new Date(u.arrivalTime).toLocaleString():"In Progress"})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Duration"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:w(u.durationMinutes)})]})]})]}),a.jsxs("div",{style:{background:"rgba(168,85,247,0.05)",border:"1px solid rgba(168,85,247,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#A855F7",textTransform:"uppercase",marginBottom:"12px"},children:"Route Details"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:"#A855F7",marginBottom:"8px",fontWeight:600},children:" Start Location"}),a.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.9)",marginBottom:"4px",fontWeight:600},children:u.startLocationName||"Unknown Location"}),a.jsxs("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontFamily:"monospace"},children:[u.startLatitude.toFixed(6),", ",u.startLongitude.toFixed(6)]})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:"#A855F7",marginBottom:"8px",fontWeight:600},children:" End Location"}),a.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.9)",marginBottom:"4px",fontWeight:600},children:u.endLocationName||"Unknown Location"}),a.jsxs("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontFamily:"monospace"},children:[u.endLatitude.toFixed(6),", ",u.endLongitude.toFixed(6)]})]})]}),a.jsxs("div",{style:{marginTop:"16px"},children:[a.jsx("div",{style:{fontSize:"12px",color:"#A855F7",marginBottom:"8px",fontWeight:600},children:" Route Map"}),a.jsx("div",{ref:n,style:{width:"100%",height:"300px",borderRadius:"8px",border:"2px solid rgba(168,85,247,0.3)",overflow:"hidden"}})]})]}),a.jsxs("div",{style:{background:"rgba(34,197,94,0.05)",border:"1px solid rgba(34,197,94,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#22C55E",textTransform:"uppercase",marginBottom:"12px"},children:"Trip Statistics"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Total Passengers"}),a.jsx("div",{style:{fontSize:"24px",color:"#22C55E",fontWeight:700},children:u.passengerCount||0})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Total Collections"}),a.jsxs("div",{style:{fontSize:"24px",color:"#22C55E",fontWeight:700},children:["",(u.totalCollections||0).toLocaleString()]})]})]})]}),a.jsxs("div",{style:{background:"rgba(251,191,36,0.05)",border:"1px solid rgba(251,191,36,0.2)",borderRadius:"12px",padding:"16px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FBBF24",textTransform:"uppercase",marginBottom:"12px"},children:" Admin Notes"}),u.notes&&u.notes.length>0?a.jsx("div",{style:{marginBottom:"16px",maxHeight:"200px",overflowY:"auto"},children:u.notes.sort((j,S)=>new Date(S.timestamp)-new Date(j.timestamp)).map((j,S)=>a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"8px",padding:"12px",marginBottom:"8px",border:"1px solid rgba(251,191,36,0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[a.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"#FBBF24"},children:j.adminName||"Admin"}),a.jsx("div",{style:{fontSize:"10px",color:"rgba(251,251,251,0.5)"},children:new Date(j.timestamp).toLocaleString()})]}),a.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.8)",lineHeight:"1.5"},children:j.content})]},S))}):a.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.5)",marginBottom:"16px",textAlign:"center",padding:"20px"},children:"No notes yet. Add the first note below."}),a.jsxs("div",{children:[a.jsx("textarea",{value:l,onChange:j=>o(j.target.value),placeholder:"Add a note about this trip...",style:{width:"100%",minHeight:"80px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(251,191,36,0.3)",borderRadius:"8px",padding:"12px",color:"#FBFBFB",fontSize:"13px",fontFamily:"inherit",resize:"vertical",marginBottom:"12px"}}),a.jsx("button",{onClick:p,disabled:!l.trim()||i,style:{padding:"10px 20px",background:l.trim()&&!i?"#FBBF24":"rgba(251,191,36,0.3)",color:l.trim()&&!i?"#181D40":"rgba(251,251,251,0.5)",border:"none",borderRadius:"8px",fontSize:"13px",fontWeight:700,cursor:l.trim()&&!i?"pointer":"not-allowed",width:"100%"},children:i?"Adding Note...":"Add Note"})]})]})]}),a.jsx("div",{style:{padding:"20px 24px",borderTop:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"flex-end"},children:a.jsx("button",{onClick:t,style:{padding:"12px 24px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:"0 4px 12px rgba(255,212,28,0.4)"},children:"Close"})})]}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
        @keyframes pulse {
          0% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.5; transform: scale(1.2); }
          100% { opacity: 1; transform: scale(1); }
        }
      `})]})}function A5(){const{theme:e,isDarkMode:t}=se(),[r,n]=x.useState([]),[s,l]=x.useState(!0),[o,i]=x.useState(""),[d,u]=x.useState(""),[c,p]=x.useState(""),[h,v]=x.useState(""),[w,j]=x.useState(null),[S,m]=x.useState(1),b=20,g=async()=>{try{const k=await K.get("/admin/trips");n(k||[]),l(!1)}catch(k){console.error("Error loading trips:",k),l(!1)}};x.useEffect(()=>{g();const k=setInterval(g,5e3);return()=>clearInterval(k)},[]);const y=()=>{const k=Zt(T);Qt(k,"trips")},T=r.filter(k=>{var q,D,_,B,U,F,f;if(o){const E=o.toLowerCase();if(!(((q=k._id)==null?void 0:q.toLowerCase().includes(E))||((D=k.shuttleId)==null?void 0:D.toLowerCase().includes(E))||((_=k.driverId)==null?void 0:_.toLowerCase().includes(E))||((B=k.routeId)==null?void 0:B.toLowerCase().includes(E))||((U=k.startLocationName)==null?void 0:U.toLowerCase().includes(E))||((F=k.endLocationName)==null?void 0:F.toLowerCase().includes(E))||((f=k.status)==null?void 0:f.toLowerCase().includes(E))))return!1}if(d&&k.status!==d)return!1;if(c||h){const E=new Date(k.departureTime);if(c&&E<new Date(c)||h&&E>new Date(h+"T23:59:59"))return!1}return!0}),R=Math.ceil(T.length/b),z=(S-1)*b,A=z+b,I=T.slice(z,A);x.useEffect(()=>{m(1)},[o,d,c,h]);const L=k=>{switch(k){case"completed":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"in_progress":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"cancelled":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};default:return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"}}},M=k=>{if(!k)return"N/A";const q=Math.floor(k/60),D=k%60;return q>0?`${q}h ${D}m`:`${D}m`};return s?a.jsx("div",{className:"text-center py-[60px]",style:{color:e.accent.primary},children:"Loading trips..."}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[a.jsx("span",{children:""})," Trip Management"]}),a.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:T.length>0?`Showing ${z+1}-${Math.min(A,T.length)} of ${T.length}  Page ${S} of ${R}`:`Track all shuttle trips  Total: ${r.length}`})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[a.jsx(Xt,{value:o,onChange:i,placeholder:"Search by shuttle, driver, route, or location..."}),a.jsx(Je,{value:d,onChange:u,label:"Status",options:[{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]}),a.jsx(En,{startDate:c,endDate:h,onStartChange:p,onEndChange:v}),a.jsx(Vt,{onClick:y,disabled:T.length===0})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:r.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{children:"No trips found"})]}):T.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{style:{marginBottom:"12px"},children:"No trips match your search"}),a.jsx("button",{onClick:()=>i(""),style:{padding:"8px 16px",background:t?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):a.jsxs("div",{className:"overflow-x-auto rounded-xl",style:{border:`1px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[a.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Trip ID"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Shuttle"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Driver"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Route"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Departure"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Duration"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Passengers"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Revenue"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Status"}),a.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:e.accent.primary,textTransform:"uppercase",borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Actions"})]})}),a.jsx("tbody",{children:I.map(k=>{const q=L(k.status);return a.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[a.jsx("td",{style:{padding:"16px",color:e.text.primary,fontFamily:"monospace",fontSize:"11px",fontWeight:700},children:k.tripId||k._id.slice(-8)}),a.jsx("td",{style:{padding:"16px",color:e.text.primary,fontWeight:600},children:k.shuttleId}),a.jsx("td",{style:{padding:"16px",color:e.text.primary},children:k.driverName||k.driverId}),a.jsx("td",{style:{padding:"16px",color:e.text.primary},children:k.routeId}),a.jsx("td",{style:{padding:"16px",color:e.text.primary},children:new Date(k.departureTime).toLocaleString()}),a.jsx("td",{style:{padding:"16px",color:e.text.primary},children:M(k.durationMinutes)}),a.jsx("td",{style:{padding:"16px",color:e.text.primary,textAlign:"center"},children:k.passengerCount||0}),a.jsxs("td",{style:{padding:"16px",color:e.text.primary,fontWeight:600},children:["",(k.totalCollections||0).toLocaleString()]}),a.jsx("td",{style:{padding:"16px"},children:a.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:q.bg,color:q.color,border:`1px solid ${q.color}40`},children:k.status})}),a.jsx("td",{style:{padding:"16px",textAlign:"right"},children:a.jsx("button",{onClick:()=>j(k),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"})})]},k._id)})})]}),R>1&&a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[a.jsx("button",{onClick:()=>m(k=>Math.max(1,k-1)),disabled:S===1,style:{padding:"8px 16px",background:S===1?t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:S===1?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:S===1?"not-allowed":"pointer"},children:" Previous"}),a.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",S," of ",R]}),a.jsx("button",{onClick:()=>m(k=>Math.min(R,k+1)),disabled:S===R,style:{padding:"8px 16px",background:S===R?t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:S===R?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:S===R?"not-allowed":"pointer"},children:"Next "})]})]})}),w&&a.jsx(R5,{trip:w,onClose:()=>j(null),onUpdate:k=>{n(r.map(q=>q._id===k._id?k:q)),j(k)}})]})}function B5(){const{theme:e,isDarkMode:t}=se(),[r,n]=x.useState([]),[s,l]=x.useState([]),[o,i]=x.useState(!0),[d,u]=x.useState(!1),[c,p]=x.useState(null),[h,v]=x.useState(null),[w,j]=x.useState(""),[S,m]=x.useState(1),b=20,[g,y]=x.useState({phoneId:"",phoneModel:"",phoneType:"Android",assignedDriverId:"",assignedDriverName:"",status:"available",notes:""}),T=async()=>{try{const N=await K.get("/admin/phones");n(Array.isArray(N)?N:[]),i(!1)}catch(N){console.error("Error loading phones:",N),i(!1)}},R=async()=>{try{const N=await K.get("/admin/drivers");l(Array.isArray(N)?N:[])}catch(N){console.error("Error loading drivers:",N)}};x.useEffect(()=>{T(),R();const N=setInterval(T,5e3);return()=>clearInterval(N)},[]);const z=()=>{if(r.length===0)return"PHONE_001";let N=0;for(const W of r)if(W.phoneId){const O=W.phoneId.match(/PHONE_(\d+)/i);if(O){const P=parseInt(O[1],10);P>N&&(N=P)}}return`PHONE_${String(N+1).padStart(3,"0")}`},A=N=>{if(!N)y({...g,assignedDriverId:"",assignedDriverName:"",status:"available",assignedDate:null});else{const W=s.find(O=>O.driverId===N);y({...g,assignedDriverId:N,assignedDriverName:(W==null?void 0:W.name)||"",status:"assigned",assignedDate:new Date})}},I=async N=>{var W,O;N.preventDefault();try{if(c)await K.put(`/admin/phones/${c._id}`,g),v({type:"success",message:"Phone updated successfully!"});else{const P=z();await K.post("/admin/phones",{...g,phoneId:P}),v({type:"success",message:"Phone created successfully!"})}u(!1),p(null),q(),T(),setTimeout(()=>v(null),3e3)}catch(P){v({type:"error",message:((O=(W=P.response)==null?void 0:W.data)==null?void 0:O.error)||"Failed to save phone"})}},L=N=>{p(N),y({phoneId:N.phoneId,phoneModel:N.phoneModel,phoneType:N.phoneType,assignedDriverId:N.assignedDriverId||"",assignedDriverName:N.assignedDriverName||"",status:N.status,notes:N.notes||""}),u(!0)},M=async N=>{var W,O;if(window.confirm("Are you sure you want to delete this phone?"))try{await K.delete(`/admin/phones/${N}`),v({type:"success",message:"Phone deleted successfully!"}),T(),setTimeout(()=>v(null),3e3)}catch(P){v({type:"error",message:((O=(W=P.response)==null?void 0:W.data)==null?void 0:O.error)||"Failed to delete phone"})}},k=async(N,W)=>{try{const O=s.find(Q=>Q.driverId===W),P={...N,assignedDriverId:W||null,assignedDriverName:(O==null?void 0:O.name)||null,assignedDate:W?new Date:null,status:W?"assigned":"available"};await K.put(`/admin/phones/${N._id}`,P),v({type:"success",message:"Driver assignment updated!"}),T(),setTimeout(()=>v(null),2e3)}catch{v({type:"error",message:"Failed to update assignment"})}},q=()=>{y({phoneId:"",phoneModel:"",phoneType:"Android",assignedDriverId:"",assignedDriverName:"",status:"available",notes:""})},D=N=>{switch(N){case"available":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"assigned":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"maintenance":return{bg:"rgba(251,191,36,0.2)",color:t?"#FBBF24":"#F59E0B"};case"retired":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};default:return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"}}},_=()=>{const N=Zt(B);Qt(N,"phones")},B=r.filter(N=>{var O,P,Q,ee,Y,C;if(!w)return!0;const W=w.toLowerCase();return((O=N.phoneId)==null?void 0:O.toLowerCase().includes(W))||((P=N.phoneModel)==null?void 0:P.toLowerCase().includes(W))||((Q=N.phoneType)==null?void 0:Q.toLowerCase().includes(W))||((ee=N.assignedDriverName)==null?void 0:ee.toLowerCase().includes(W))||((Y=N.assignedDriverId)==null?void 0:Y.toLowerCase().includes(W))||((C=N.status)==null?void 0:C.toLowerCase().includes(W))}),U=Math.ceil(B.length/b),F=(S-1)*b,f=F+b,E=B.slice(F,f);return x.useEffect(()=>{m(1)},[w]),o?a.jsx("div",{className:"text-center py-[60px]",style:{color:e.accent.primary},children:"Loading phones..."}):a.jsxs("div",{className:"h-full flex flex-col",children:[h&&a.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:h.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:h.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${h.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4,animation:"fadeIn 0.3s ease"},children:h.message}),a.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[a.jsx("span",{children:""})," Phone Inventory"]}),a.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:w?`Showing: ${B.length} of ${r.length} (Page ${S} of ${U||1})`:`Total devices: ${r.length}  Available: ${r.filter(N=>N.status==="available").length}  Assigned: ${r.filter(N=>N.status==="assigned").length} (Page ${S} of ${U||1})`})]}),a.jsx("button",{onClick:()=>{q(),p(null),u(!0)},style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:t?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.3s"},children:"+ Add Phone"})]}),a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsx(Xt,{value:w,onChange:j,placeholder:"Search by phone ID, model, serial, or driver..."}),a.jsx(Vt,{onClick:_,disabled:B.length===0})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[r.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{children:"No phones found"})]}):B.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{style:{marginBottom:"12px"},children:"No phones match your search"}),a.jsx("button",{onClick:()=>j(""),style:{padding:"8px 16px",background:t?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):a.jsx("div",{className:"overflow-x-auto rounded-xl",style:{border:`1px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:a.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Phone ID"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Device"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Type"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Assigned Driver"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Status"}),a.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:e.accent.primary,textTransform:"uppercase",borderBottom:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Actions"})]})}),a.jsx("tbody",{children:E.map(N=>{const W=D(N.status);return a.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[a.jsx("td",{style:{padding:"16px",color:e.text.primary},children:a.jsx("strong",{children:N.phoneId})}),a.jsx("td",{style:{padding:"16px",color:e.text.primary},children:N.phoneModel}),a.jsx("td",{style:{padding:"16px",color:e.text.primary},children:N.phoneType}),a.jsx("td",{style:{padding:"16px"},children:a.jsxs("select",{value:N.assignedDriverId||"",onChange:O=>k(N,O.target.value),style:{padding:"8px 12px",background:t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",color:e.accent.primary,border:`1px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",minWidth:"180px"},children:[a.jsx("option",{value:"",children:"Unassigned"}),s.map(O=>a.jsxs("option",{value:O.driverId,children:[O.name," (",O.driverId,")"]},O.driverId))]})}),a.jsx("td",{style:{padding:"16px"},children:a.jsx("span",{style:{padding:"6px 12px",background:W.bg,color:W.color,borderRadius:"6px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",display:"inline-block"},children:N.status})}),a.jsxs("td",{style:{padding:"16px",textAlign:"right"},children:[a.jsx("button",{onClick:()=>L(N),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",marginRight:"8px"},children:"Edit"}),a.jsx("button",{onClick:()=>M(N._id),style:{padding:"6px 12px",background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Delete"})]})]},N._id)})})]})}),U>1&&a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"12px",marginTop:"24px",paddingTop:"24px",borderTop:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[a.jsx("button",{onClick:()=>m(N=>Math.max(1,N-1)),disabled:S===1,style:{padding:"10px 20px",background:S===1?t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:S===1?t?"rgba(255,212,28,0.5)":"rgba(59,130,246,0.5)":e.accent.primary,fontSize:"14px",fontWeight:600,cursor:S===1?"not-allowed":"pointer",transition:"all 0.2s"},children:" Previous"}),a.jsxs("span",{style:{color:"rgba(251,251,251,0.8)",fontSize:"14px",fontWeight:600,minWidth:"120px",textAlign:"center"},children:["Page ",S," of ",U]}),a.jsx("button",{onClick:()=>m(N=>Math.min(U,N+1)),disabled:S===U,style:{padding:"10px 20px",background:S===U?t?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:S===U?t?"rgba(255,212,28,0.5)":"rgba(59,130,246,0.5)":e.accent.primary,fontSize:"14px",fontWeight:600,cursor:S===U?"not-allowed":"pointer",transition:"all 0.2s"},children:"Next "})]})]}),d&&a.jsx("div",{onClick:()=>u(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:a.jsxs("div",{onClick:N=>N.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[a.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:e.accent.primary,margin:0},children:c?"Edit Phone":"Add New Phone"}),a.jsx("button",{onClick:()=>u(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsxs("form",{onSubmit:I,style:{padding:"24px"},children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["Phone ID ",!c&&a.jsx("span",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontWeight:400},children:"(Auto-generated)"})]}),a.jsx("input",{type:"text",value:c?g.phoneId:z(),disabled:!0,style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"8px",background:"rgba(100,100,100,0.2)",color:"rgba(251,251,251,0.5)",fontSize:"14px",boxSizing:"border-box",cursor:"not-allowed"}})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Phone Model *"}),a.jsx("input",{type:"text",value:g.phoneModel,onChange:N=>y({...g,phoneModel:N.target.value}),required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"},placeholder:"e.g., Samsung Galaxy A14"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Phone Type *"}),a.jsxs("select",{value:g.phoneType,onChange:N=>y({...g,phoneType:N.target.value}),required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",cursor:"pointer"},children:[a.jsx("option",{value:"Android",children:"Android"}),a.jsx("option",{value:"iOS",children:"iOS"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Assign to Driver"}),a.jsxs("select",{value:g.assignedDriverId,onChange:N=>A(N.target.value),style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",cursor:"pointer"},children:[a.jsx("option",{value:"",children:"Unassigned"}),s.map(N=>a.jsxs("option",{value:N.driverId,children:[N.name," (",N.driverId,")"]},N.driverId))]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Notes"}),a.jsx("textarea",{value:g.notes,onChange:N=>y({...g,notes:N.target.value}),rows:"3",style:{width:"100%",padding:"12px",border:`2px solid ${t?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",fontFamily:"inherit",resize:"vertical"},placeholder:"Any additional notes about this device"})]}),a.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",paddingTop:"20px",borderTop:`2px solid ${t?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[a.jsx("button",{type:"button",onClick:()=>u(!1),style:{padding:"12px 24px",background:"rgba(251,251,251,0.1)",color:"rgba(251,251,251,0.7)",border:"1px solid rgba(251,251,251,0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),a.jsx("button",{type:"submit",style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:t?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},children:c?"Update Phone":"Create Phone"})]})]})]})}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from { 
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to { 
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}const Fn="http://localhost:3000/api/admin",Gd=()=>({Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}),Us=async(e={})=>{try{const t=new URLSearchParams({page:e.page||1,limit:e.limit||1e3,...e.status&&{status:e.status},...e.priority&&{priority:e.priority},...e.submissionType&&{submissionType:e.submissionType},...e.startDate&&{startDate:e.startDate},...e.endDate&&{endDate:e.endDate},...e.search&&{search:e.search}}),r=await fetch(`${Fn}/user-concerns?${t}`,{headers:Gd()}),n=await r.json();if(!r.ok)throw new Error(n.message||"Failed to fetch concerns");return n}catch(t){throw console.error("Get concerns error:",t),t}},Do=async e=>{try{const t=await fetch(`${Fn}/user-concerns/${e}`,{headers:Gd()}),r=await t.json();if(!t.ok)throw new Error(r.message||"Failed to fetch concern details");return r}catch(t){throw console.error("Get concern details error:",t),t}},Ca=async(e,t)=>{try{const r=await fetch(`${Fn}/user-concerns/${e}/status`,{method:"PATCH",headers:Gd(),body:JSON.stringify(t)}),n=await r.json();if(!r.ok)throw new Error(n.message||"Failed to update concern status");return n}catch(r){throw console.error("Update concern status error:",r),r}},M5=async e=>{try{const t=localStorage.getItem("userToken"),r=await fetch(`${Fn}/user-concerns`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({...e,submissionType:"assistance"})}),n=await r.json();if(!r.ok)throw new Error(n.message||"Failed to submit assistance report");return n}catch(t){throw console.error("Submit assistance report error:",t),t}},_5=async e=>{try{const t=localStorage.getItem("userToken"),r=await fetch(`${Fn}/user-concerns`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({...e,submissionType:"feedback"})}),n=await r.json();if(!r.ok)throw new Error(n.message||"Failed to submit feedback");return n}catch(t){throw console.error("Submit feedback error:",t),t}},L5=async()=>{try{const e=localStorage.getItem("userToken"),t=await fetch(`${Fn}/user-concerns/my-concerns`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),r=await t.json();if(!t.ok)throw new Error(r.message||"Failed to fetch user concerns");return r}catch(e){throw console.error("Get user concerns error:",e),e}},Xg=async()=>({success:!0,options:[{value:"motorpool",label:"Motorpool Office"},{value:"merchant",label:"Merchant Services"},{value:"treasury",label:"Treasury Office"},{value:"accounting",label:"Accounting Office"},{value:"technical",label:"Technical Support"}]});function Ro({concern:e,onClose:t}){if(!e)return null;const r=o=>{switch(o){case"high":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};case"medium":return{bg:"rgba(251,191,36,0.2)",color:"#FBBF24"};default:return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"}}},n=o=>{switch(o){case"resolved":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"in_progress":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"closed":return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"};default:return{bg:"rgba(251,191,36,0.2)",color:"#FBBF24"}}},s=r(e.priority),l=n(e.status);return a.jsxs("div",{onClick:t,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{onClick:o=>o.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"700px",width:"90%",maxHeight:"85vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[a.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[a.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#FFD41C",margin:0},children:"Concern Details"}),a.jsxs("span",{style:{fontSize:"14px",color:"rgba(251,251,251,0.5)",fontWeight:600},children:["#",e.concernId||e._id.slice(-6)]})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[a.jsxs("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:s.bg,color:s.color},children:[e.priority||"low"," priority"]}),a.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:l.bg,color:l.color},children:e.status||"pending"}),a.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:"rgba(59,130,246,0.2)",color:"#3B82F6"},children:e.category||"general"})]})]}),a.jsx("button",{onClick:t,style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]}),a.jsxs("div",{style:{padding:"24px"},children:[a.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",border:"1px solid rgba(255,212,28,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"User Information"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"User Name"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:e.userName||"N/A"})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"User ID"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontFamily:"monospace"},children:e.userId||"N/A"})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Submitted At"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:new Date(e.submittedAt||e.createdAt).toLocaleString()})]}),e.email&&a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Email"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:e.email})]})]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"8px"},children:"Subject"}),a.jsx("div",{style:{fontSize:"16px",color:"rgba(251,251,251,0.95)",fontWeight:600,padding:"12px 16px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",border:"1px solid rgba(255,212,28,0.1)"},children:e.title||e.subject||"No title provided"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"8px"},children:"Description"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.85)",lineHeight:"1.6",padding:"16px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",border:"1px solid rgba(255,212,28,0.1)",whiteSpace:"pre-wrap"},children:e.description||e.message||"No description provided"})]}),(e.attachments||e.metadata)&&a.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,212,28,0.1)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"Additional Information"}),e.attachments&&a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Attachments"}),a.jsxs("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.7)"},children:[e.attachments.length||0," file(s)"]})]}),e.metadata&&a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Metadata"}),a.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.6)",fontFamily:"monospace"},children:JSON.stringify(e.metadata,null,2)})]})]}),e.response&&a.jsxs("div",{style:{background:"rgba(34,197,94,0.05)",border:"1px solid rgba(34,197,94,0.2)",borderRadius:"12px",padding:"16px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#22C55E",textTransform:"uppercase",marginBottom:"8px"},children:"Admin Response"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.85)",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:e.response}),e.respondedAt&&a.jsxs("div",{style:{fontSize:"12px",color:"rgba(251,251,251,0.5)",marginTop:"8px"},children:["Responded at: ",new Date(e.respondedAt).toLocaleString()]})]})]}),a.jsx("div",{style:{padding:"20px 24px",borderTop:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"flex-end"},children:a.jsx("button",{onClick:t,style:{padding:"12px 24px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:"0 4px 12px rgba(255,212,28,0.4)"},children:"Close"})})]}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}const Ar={ITEMS_PER_PAGE:20,DEFAULT_PAGE:1,MAX_ITEMS_CLIENT_SIDE:1e3,PAGE_RANGE_DISPLAYED:5},O5={CONCERNS:5e3};function I5(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),[s,l]=x.useState(null),[o,i]=x.useState("all"),[d,u]=x.useState(""),[c,p]=x.useState(""),[h,v]=x.useState(""),[w,j]=x.useState(""),[S,m]=x.useState(""),[b,g]=x.useState(""),[y,T]=x.useState(null),[R,z]=x.useState(!1),[A,I]=x.useState(!1),[L,M]=x.useState(""),[k,q]=x.useState(!1),[D,_]=x.useState(Ar.DEFAULT_PAGE),B=async(Y=!1)=>{try{Y||n(!0);const C=await Us({page:Ar.DEFAULT_PAGE,limit:Ar.MAX_ITEMS_CLIENT_SIDE});if(C.success){const V=(C.concerns||[]).filter(Z=>Z.reportTo==="Motorpool Office");t(V)}}catch(C){console.error("Error loading motorpool concerns:",C)}finally{Y||n(!1)}};x.useEffect(()=>{B(!1);const Y=setInterval(()=>B(!0),O5.CONCERNS);return()=>clearInterval(Y)},[]);const U=async Y=>{try{const C=await Do(Y);C.success&&(T(C.concern),z(!0))}catch{l({type:"error",message:"Failed to load concern details"}),setTimeout(()=>l(null),3e3)}},F=Y=>{T(Y),M(""),z(!1),I(!0)},f=async(Y,C)=>{try{if(C==="resolved"){T(Y),I(!0);return}(await Ca(Y.concernId,{status:C})).success&&(l({type:"success",message:"Status updated!"}),B(!0),setTimeout(()=>l(null),2e3))}catch(V){console.error("Error updating status:",V),l({type:"error",message:V.message||"Failed to update status"}),setTimeout(()=>l(null),3e3)}},E=async()=>{q(!0);try{(await Ca(y.concernId,{status:"resolved",resolution:L.trim()||"No resolution details provided."})).success&&(l({type:"success",message:"Concern resolved and email sent"}),I(!1),B(!0),setTimeout(()=>l(null),2e3))}catch(Y){l({type:"error",message:Y.message||"Failed to resolve concern"}),setTimeout(()=>l(null),3e3)}finally{q(!1)}},N=()=>{const Y=Zt(W);Qt(Y,"motorpool_concerns")},W=e.filter(Y=>{var C,V,Z,ve,Fe,et,vt,st,lt,ot,it;if(o==="assistance"&&Y.submissionType!=="assistance"||o==="feedback"&&Y.submissionType!=="feedback")return!1;if(d){const je=d.toLowerCase();if(!(((C=Y.concernId)==null?void 0:C.toLowerCase().includes(je))||((V=Y._id)==null?void 0:V.toLowerCase().includes(je))||((Z=Y.userName)==null?void 0:Z.toLowerCase().includes(je))||((ve=Y.userId)==null?void 0:ve.toLowerCase().includes(je))||((Fe=Y.title)==null?void 0:Fe.toLowerCase().includes(je))||((et=Y.description)==null?void 0:et.toLowerCase().includes(je))||((vt=Y.category)==null?void 0:vt.toLowerCase().includes(je))||((st=Y.subject)==null?void 0:st.toLowerCase().includes(je))||((lt=Y.feedbackText)==null?void 0:lt.toLowerCase().includes(je))||((ot=Y.priority)==null?void 0:ot.toLowerCase().includes(je))||((it=Y.status)==null?void 0:it.toLowerCase().includes(je))))return!1}if(c&&Y.status!==c||h&&Y.priority!==h||w&&Y.category!==w)return!1;if(S||b){const je=new Date(Y.submittedAt||Y.createdAt);if(S&&je<new Date(S)||b&&je>new Date(b+"T23:59:59"))return!1}return!0}),O=Math.ceil(W.length/Ar.ITEMS_PER_PAGE),P=(D-1)*Ar.ITEMS_PER_PAGE,Q=P+Ar.ITEMS_PER_PAGE,ee=W.slice(P,Q);return x.useEffect(()=>{_(1)},[d,c,h,w,S,b,o]),r?a.jsx("div",{className:"text-center py-[60px] text-[#FFD41C]",children:"Loading motorpool concerns..."}):a.jsxs("div",{className:"h-full flex flex-col",children:[s&&a.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:s.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:s.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${s.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4},children:s.message}),a.jsxs("div",{className:"mb-[30px] border-b-2 border-[rgba(255,212,28,0.2)] pb-5",children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[a.jsx("span",{children:""})," Motorpool Concerns"]}),a.jsx("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:W.length>0?`Showing ${P+1}-${Math.min(Q,W.length)} of ${W.length}  Page ${D} of ${O}`:`Concerns and feedback related to Motorpool Office  Total: ${e.length}`})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px"},children:[a.jsxs("button",{onClick:()=>i("all"),style:{padding:"10px 20px",background:o==="all"?"rgba(255,212,28,0.2)":"transparent",border:`2px solid ${o==="all"?"#FFD41C":"rgba(255,212,28,0.3)"}`,borderRadius:"8px",color:o==="all"?"#FFD41C":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["All (",e.length,")"]}),a.jsxs("button",{onClick:()=>i("assistance"),style:{padding:"10px 20px",background:o==="assistance"?"rgba(59,130,246,0.2)":"transparent",border:`2px solid ${o==="assistance"?"#3B82F6":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:o==="assistance"?"#3B82F6":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Assistance (",e.filter(Y=>Y.submissionType==="assistance").length,")"]}),a.jsxs("button",{onClick:()=>i("feedback"),style:{padding:"10px 20px",background:o==="feedback"?"rgba(34,197,94,0.2)":"transparent",border:`2px solid ${o==="feedback"?"#22C55E":"rgba(34,197,94,0.3)"}`,borderRadius:"8px",color:o==="feedback"?"#22C55E":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Feedback (",e.filter(Y=>Y.submissionType==="feedback").length,")"]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[a.jsx(Xt,{value:d,onChange:u,placeholder:"Search by ID, user, title, category, or status..."}),a.jsx(Je,{value:c,onChange:p,label:"Status",options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]}),a.jsx(Je,{value:h,onChange:v,label:"Priority",options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}]}),a.jsx(Je,{value:w,onChange:j,label:"Category",options:[{value:"payment_issue",label:"Payment Issue"},{value:"driver_complaint",label:"Driver Complaint"},{value:"shuttle_issue",label:"Shuttle Issue"},{value:"technical_problem",label:"Technical Problem"},{value:"safety_concern",label:"Safety Concern"},{value:"route_suggestion",label:"Route Suggestion"},{value:"billing_dispute",label:"Billing Dispute"},{value:"lost_item",label:"Lost Item"},{value:"other",label:"Other"}]}),a.jsx(En,{startDate:S,endDate:b,onStartChange:m,onEndChange:g}),a.jsx(Vt,{onClick:N,disabled:W.length===0})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:e.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{children:"No motorpool concerns found"})]}):W.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{style:{marginBottom:"12px"},children:"No concerns match your search"}),a.jsx("button",{onClick:()=>u(""),style:{padding:"8px 16px",background:"rgba(255,212,28,0.15)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):a.jsxs("div",{className:"overflow-x-auto rounded-xl border border-[rgba(255,212,28,0.2)]",children:[a.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-[rgba(255,212,28,0.1)]",children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"ID"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"User"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Subject"}),o==="all"&&a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Type"}),o==="feedback"&&a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Rating"}),o!=="feedback"&&a.jsxs(a.Fragment,{children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Priority"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Status"})]}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Date"}),a.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:"#FFD41C",textTransform:"uppercase",borderBottom:"2px solid rgba(255,212,28,0.3)"},children:"Actions"})]})}),a.jsx("tbody",{children:ee.map(Y=>a.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,212,28,0.1)"},children:[a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:a.jsx("strong",{children:Y.concernId||Y._id.slice(-6)})}),a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:Y.userName||"N/A"}),a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:Y.subject||(Y.selectedConcerns&&Y.selectedConcerns.length>0?`${Y.selectedConcerns[0]}${Y.selectedConcerns.length>1?` +${Y.selectedConcerns.length-1}`:""}`:"N/A")}),o==="all"&&a.jsx("td",{style:{padding:"16px"},children:a.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:Y.submissionType==="assistance"?"rgba(59,130,246,0.2)":"rgba(34,197,94,0.2)",color:Y.submissionType==="assistance"?"#3B82F6":"#22C55E",border:`1px solid ${Y.submissionType==="assistance"?"rgba(59,130,246,0.3)":"rgba(34,197,94,0.3)"}`},children:Y.submissionType==="assistance"?" Assistance":" Feedback"})}),o==="feedback"&&a.jsx("td",{style:{padding:"16px"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[[...Array(5)].map((C,V)=>a.jsx("span",{style:{fontSize:"16px",color:V<(Y.rating||0)?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},V)),a.jsxs("span",{style:{marginLeft:"8px",color:"rgba(251,251,251,0.7)",fontSize:"12px"},children:["(",Y.rating||0,"/5)"]})]})}),o!=="feedback"&&a.jsxs(a.Fragment,{children:[a.jsx("td",{style:{padding:"16px"},children:Y.submissionType==="assistance"?a.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:Y.priority==="urgent"?"rgba(239,68,68,0.2)":Y.priority==="high"?"rgba(251,146,60,0.2)":Y.priority==="medium"?"rgba(251,191,36,0.2)":"rgba(34,197,94,0.2)",color:Y.priority==="urgent"?"#EF4444":Y.priority==="high"?"#FB923C":Y.priority==="medium"?"#FBBF24":"#22C55E"},children:Y.priority||"low"}):a.jsx("span",{style:{color:"rgba(251,251,251,0.4)",fontSize:"11px"},children:""})}),a.jsx("td",{style:{padding:"16px"},children:Y.submissionType==="assistance"?a.jsxs("select",{value:Y.status||"pending",onChange:C=>f(Y,C.target.value),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid rgba(255,212,28,0.3)",background:"rgba(255,255,255,0.05)",color:Y.status==="resolved"?"#22C55E":Y.status==="in_progress"?"#3B82F6":Y.status==="closed"?"#6B7280":"#FBBF24",fontSize:"11px",fontWeight:600,cursor:"pointer"},children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"resolved",children:"Resolved"}),a.jsx("option",{value:"closed",children:"Closed"})]}):a.jsx("span",{style:{color:"rgba(251,251,251,0.4)",fontSize:"11px"},children:""})})]}),a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:new Date(Y.submittedAt||Y.createdAt).toLocaleDateString()}),a.jsx("td",{style:{padding:"16px",textAlign:"right"},children:a.jsx("button",{onClick:()=>U(Y.concernId),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"})})]},Y._id))})]}),O>1&&a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[a.jsx("button",{onClick:()=>_(Y=>Math.max(1,Y-1)),disabled:D===1,style:{padding:"8px 16px",background:D===1?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:D===1?"rgba(251,251,251,0.3)":"#FFD41C",fontSize:"13px",fontWeight:600,cursor:D===1?"not-allowed":"pointer"},children:" Previous"}),a.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",D," of ",O]}),a.jsx("button",{onClick:()=>_(Y=>Math.min(O,Y+1)),disabled:D===O,style:{padding:"8px 16px",background:D===O?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:D===O?"rgba(251,251,251,0.3)":"#FFD41C",fontSize:"13px",fontWeight:600,cursor:D===O?"not-allowed":"pointer"},children:"Next "})]})]})}),R&&y&&a.jsx(Ro,{concern:y,onClose:()=>z(!1),onResolve:()=>F(y)}),A&&y&&a.jsxs("div",{onClick:()=>I(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{onClick:Y=>Y.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[a.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#FFD41C",margin:0,marginBottom:"8px"},children:"Resolve Concern"}),a.jsx("p",{style:{fontSize:"13px",color:"rgba(251,251,251,0.6)",margin:0},children:"Mark this concern as resolved and notify the user"})]}),a.jsx("button",{onClick:()=>I(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]}),a.jsxs("div",{style:{padding:"24px"},children:[a.jsxs("div",{style:{background:"rgba(251,191,36,0.1)",border:"1px solid rgba(251,191,36,0.3)",borderLeft:"4px solid #FBBF24",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[a.jsx("span",{style:{fontSize:"20px"},children:""}),a.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#FBBF24"},children:"Confirm Resolution"})]}),a.jsx("p",{style:{fontSize:"13px",color:"rgba(251,251,251,0.7)",margin:0,lineHeight:"1.5"},children:"This will mark the concern as resolved and send an email notification to the user."})]}),a.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",border:"1px solid rgba(255,212,28,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"Concern Information"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"10px"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Concern ID"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontFamily:"monospace",fontWeight:600},children:y.concernId})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"User"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:y.userName})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Subject"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:y.subject})]})]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"8px"},children:"Resolution Details (Optional)"}),a.jsx("textarea",{value:L,onChange:Y=>M(Y.target.value),placeholder:"Describe how this concern was resolved (optional)...",rows:6,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid rgba(255,212,28,0.2)",background:"rgba(255,255,255,0.05)",color:"#FBFBFB",fontSize:"13px",lineHeight:"1.5",resize:"vertical",outline:"none",fontFamily:"inherit",boxSizing:"border-box"}}),a.jsx("p",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginTop:"8px",margin:"8px 0 0 0"},children:"This message will be included in the email notification to the user."})]})]}),a.jsxs("div",{style:{padding:"20px 24px",borderTop:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:()=>I(!1),disabled:k,style:{padding:"12px 24px",background:"rgba(255,255,255,0.1)",color:"#FBFBFB",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",cursor:k?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:k?.5:1},children:"Cancel"}),a.jsx("button",{onClick:E,disabled:k,style:{padding:"12px 24px",background:k?"rgba(34,197,94,0.3)":"#22C55E",color:k?"#22C55E":"#0f1227",border:"none",borderRadius:"8px",cursor:k?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:k?.5:1,boxShadow:k?"none":"0 4px 12px rgba(34,197,94,0.4)"},children:k?"Resolving...":" Mark as Resolved"})]})]}),a.jsx("style",{children:`
            @keyframes fadeIn {
              from { opacity: 0; }
              to { opacity: 1; }
            }
            @keyframes slideIn {
              from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
              }
              to {
                opacity: 1;
                transform: translateY(0) scale(1);
              }
            }
          `})]})]})}function U5(){var B,U,F;const[e,t]=x.useState({autoExport:{frequency:"daily",exportTypes:[],time:"00:00",emailRecipients:[]}}),[r,n]=x.useState(!1),[s,l]=x.useState(null),[o,i]=x.useState(!1),[d,u]=x.useState(!1),[c,p]=x.useState([]),[h,v]=x.useState([]),[w,j]=x.useState("all"),[S,m]=x.useState(""),[b,g]=x.useState(""),[y,T]=x.useState(""),[R,z]=x.useState({start:"",end:""}),A=[{value:"Drivers",icon:"",label:"Drivers"},{value:"Routes",icon:"",label:"Routes"},{value:"Trips",icon:"",label:"Trips"},{value:"Shuttles",icon:"",label:"Shuttles"},{value:"Phones",icon:"",label:"Driver Phones"},{value:"Logs",icon:"",label:"Motorpool Logs"},{value:"Concerns",icon:"",label:"Motorpool Concerns"}];x.useEffect(()=>{I(),L(),M()},[]);const I=async()=>{try{const f=await K.get("/admin/configurations");f&&t(f)}catch(f){console.error("Error loading configurations:",f)}},L=async()=>{try{const f=await K.get("/admin/configurations/export-history");p(Array.isArray(f)?f:[])}catch(f){console.error("Error loading export history:",f)}},M=async()=>{try{const f=await K.get("/admin/configurations/scheduled-exports");v(Array.isArray(f)?f:[])}catch(f){console.error("Error loading scheduled exports:",f)}},k=async()=>{var f,E;n(!0);try{await K.put("/admin/configurations/auto-export",e.autoExport),_("success","Auto-export settings saved successfully!"),i(!1),I()}catch(N){_("error",((E=(f=N.response)==null?void 0:f.data)==null?void 0:E.error)||"Failed to save settings")}finally{n(!1)}},q=async()=>{var f,E;n(!0);try{if(!e.autoExport.exportTypes||e.autoExport.exportTypes.length===0){_("error","Please select at least one export type in the configuration settings"),n(!1);return}const N=await K.post("/admin/configurations/manual-export-motorpool",{exportTypes:e.autoExport.exportTypes});if(_("success",`Motorpool data exported successfully! (${N.totalRecords} total records)`),N.downloadUrl){const W=document.createElement("a");W.href=N.downloadUrl,W.download=N.fileName||`motorpool_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(W),W.click(),document.body.removeChild(W)}u(!1),j("all"),m(""),g(""),L()}catch(N){_("error",((E=(f=N.response)==null?void 0:f.data)==null?void 0:E.error)||"Export failed")}finally{n(!1)}},D=async f=>{try{const E=await K.get(`/admin/configurations/download-export/${f}`);if(E.downloadUrl){const N=document.createElement("a");N.href=E.downloadUrl,N.download=E.fileName,document.body.appendChild(N),N.click(),document.body.removeChild(N)}}catch{_("error","Failed to download export")}},_=(f,E)=>{l({type:f,message:E}),setTimeout(()=>l(null),5e3)};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{style:{marginBottom:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",paddingBottom:"16px"},children:[a.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[a.jsx("span",{children:""})," Motorpool Configurations"]}),a.jsx("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:"Configure automated motorpool data exports and system settings"})]}),s&&a.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"12px",background:s.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:s.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${s.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4,fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("span",{children:s.type==="success"?"":""}),a.jsx("span",{children:s.message})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",padding:"28px",marginBottom:"24px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[a.jsxs("div",{children:[a.jsxs("h3",{style:{color:"#FFD41C",fontSize:"20px",fontWeight:700,margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("span",{children:""})," Automated Motorpool Export"]}),a.jsxs("p",{style:{color:"rgba(251,251,251,0.6)",fontSize:"14px",margin:0,lineHeight:"1.5"},children:["System automatically exports motorpool data as ZIP files for backup and compliance.",a.jsx("br",{}),"Configure the schedule and download reports manually anytime."]})]}),a.jsxs("button",{onClick:()=>i(!0),style:{padding:"12px 20px",background:"rgba(255, 212, 28, 0.15)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",color:"#FFD41C",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:f=>{f.currentTarget.style.background="rgba(255, 212, 28, 0.25)",f.currentTarget.style.borderColor="rgba(255, 212, 28, 0.5)"},onMouseLeave:f=>{f.currentTarget.style.background="rgba(255, 212, 28, 0.15)",f.currentTarget.style.borderColor="rgba(255, 212, 28, 0.3)"},children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Configure Schedule"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[a.jsx(vi,{icon:"",label:"Frequency",value:((B=e.autoExport.frequency)==null?void 0:B.charAt(0).toUpperCase())+((U=e.autoExport.frequency)==null?void 0:U.slice(1))||"Not set"}),a.jsx(vi,{icon:"",label:"Export Time",value:e.autoExport.time||"Not set"}),a.jsx(vi,{icon:"",label:"Data Types",value:`${((F=e.autoExport.exportTypes)==null?void 0:F.length)||0} selected`})]}),a.jsxs("div",{style:{padding:"24px",background:"rgba(34, 197, 94, 0.1)",border:"2px dashed rgba(34, 197, 94, 0.3)",borderRadius:"12px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),a.jsx("h4",{style:{color:"#FBFBFB",fontSize:"16px",fontWeight:700,marginBottom:"8px"},children:"Export Motorpool Data Now"}),a.jsx("p",{style:{color:"rgba(251,251,251,0.6)",fontSize:"13px",marginBottom:"16px"},children:"Download a complete ZIP file with all motorpool data: drivers, routes, trips, shuttles, phones, logs, and concerns."}),a.jsx("button",{onClick:()=>u(!0),disabled:r,style:{padding:"14px 32px",background:r?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:r?"not-allowed":"pointer",boxShadow:r?"none":"0 4px 12px rgba(34, 197, 94, 0.4)",transition:"all 0.2s ease",opacity:r?.6:1},onMouseEnter:f=>{r||(f.currentTarget.style.transform="translateY(-2px)",f.currentTarget.style.boxShadow="0 6px 16px rgba(34, 197, 94, 0.5)")},onMouseLeave:f=>{r||(f.currentTarget.style.transform="translateY(0)",f.currentTarget.style.boxShadow="0 4px 12px rgba(34, 197, 94, 0.4)")},children:r?" Exporting...":" Download Motorpool Data (ZIP)"})]})]}),a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",padding:"28px",marginBottom:"24px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[a.jsxs("div",{children:[a.jsxs("h3",{style:{color:"#FFD41C",fontSize:"18px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{children:""})," Scheduled Export Archive"]}),a.jsx("p",{style:{color:"rgba(251,251,251,0.5)",fontSize:"12px",margin:0},children:"Auto-exported files saved from scheduled exports"})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[a.jsx("input",{type:"text",placeholder:"Search exports...",value:y,onChange:f=>T(f.target.value),style:{padding:"8px 16px",background:"rgba(255,255,255,0.05)",border:"2px solid rgba(255,212,28,0.2)",borderRadius:"8px",color:"#FBFBFB",fontSize:"13px",outline:"none",width:"200px"}}),a.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[a.jsx("input",{type:"date",value:R.start,onChange:f=>z({...R,start:f.target.value}),placeholder:"From",style:{padding:"8px 12px",background:"rgba(255,255,255,0.05)",border:"2px solid rgba(255,212,28,0.2)",borderRadius:"8px",color:"#FBFBFB",fontSize:"12px",outline:"none"}}),a.jsx("span",{style:{color:"rgba(251,251,251,0.5)"},children:""}),a.jsx("input",{type:"date",value:R.end,onChange:f=>z({...R,end:f.target.value}),placeholder:"To",style:{padding:"8px 12px",background:"rgba(255,255,255,0.05)",border:"2px solid rgba(255,212,28,0.2)",borderRadius:"8px",color:"#FBFBFB",fontSize:"12px",outline:"none"}}),(R.start||R.end||y)&&a.jsx("button",{onClick:()=>{T(""),z({start:"",end:""})},style:{padding:"8px 12px",background:"rgba(239,68,68,0.2)",border:"2px solid rgba(239,68,68,0.3)",borderRadius:"8px",color:"#EF4444",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Clear"})]})]})]}),h.length===0?a.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"rgba(251,251,251,0.4)",fontSize:"14px"},children:[a.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",opacity:.3},children:""}),a.jsx("p",{style:{margin:0},children:"No scheduled exports yet"}),a.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"12px"},children:"Configure auto-export schedule to start archiving exports"})]}):a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",paddingRight:"8px"},children:a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:h.filter(f=>{var P,Q;const E=!y||((P=f.exportType)==null?void 0:P.toLowerCase().includes(y.toLowerCase()))||((Q=f.fileName)==null?void 0:Q.toLowerCase().includes(y.toLowerCase())),N=new Date(f.exportedAt||f.timestamp||f.createdAt),W=!R.start||N>=new Date(R.start),O=!R.end||N<=new Date(R.end+"T23:59:59");return E&&W&&O}).map((f,E)=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 18px",background:"rgba(255,255,255,0.03)",borderRadius:"10px",border:"1px solid rgba(255,212,28,0.1)",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:N=>{N.currentTarget.style.background="rgba(255,255,255,0.06)",N.currentTarget.style.borderColor="rgba(255,212,28,0.2)",N.currentTarget.style.transform="translateX(4px)"},onMouseLeave:N=>{N.currentTarget.style.background="rgba(255,255,255,0.03)",N.currentTarget.style.borderColor="rgba(255,212,28,0.1)",N.currentTarget.style.transform="translateX(0)"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},children:[a.jsx("span",{style:{fontSize:"20px"},children:""}),a.jsx("span",{style:{color:"#FFD41C",fontWeight:700,fontSize:"15px"},children:f.exportType||"Scheduled Export"}),a.jsx("span",{style:{padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:700,background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)"},children:"AUTO"})]}),a.jsxs("div",{style:{display:"flex",gap:"20px",fontSize:"13px",color:"rgba(251,251,251,0.5)"},children:[a.jsxs("span",{children:[" ",new Date(f.exportedAt||f.timestamp||f.createdAt).toLocaleDateString()]}),a.jsxs("span",{children:[" ",new Date(f.exportedAt||f.timestamp||f.createdAt).toLocaleTimeString()]}),f.fileName&&a.jsxs("span",{children:[" ",f.fileName]}),f.recordCount&&a.jsxs("span",{children:[" ",f.recordCount," records"]})]})]}),f.status==="success"?a.jsx("button",{onClick:()=>D(f._id),style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(34,197,94,0.2)",color:"#22C55E",border:"2px solid rgba(34,197,94,0.3)",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:N=>{N.currentTarget.style.background="rgba(34,197,94,0.3)",N.currentTarget.style.transform="translateY(-2px)",N.currentTarget.style.boxShadow="0 4px 12px rgba(34,197,94,0.3)"},onMouseLeave:N=>{N.currentTarget.style.background="rgba(34,197,94,0.2)",N.currentTarget.style.transform="translateY(0)",N.currentTarget.style.boxShadow="none"},children:" Download"}):a.jsx("span",{style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"2px solid rgba(239,68,68,0.3)"},children:" Failed"})]},E))})})]}),c.length>0&&a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",padding:"28px"},children:[a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("h3",{style:{color:"#FFD41C",fontSize:"18px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{children:""})," Manual Export History"]}),a.jsx("p",{style:{color:"rgba(251,251,251,0.5)",fontSize:"12px",margin:0},children:"Recent manual exports triggered by administrators"})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",paddingRight:"8px"},children:a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:c.slice(0,10).map((f,E)=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"14px 16px",background:"rgba(255,255,255,0.03)",borderRadius:"10px",border:"1px solid rgba(255,212,28,0.1)",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:N=>{N.currentTarget.style.background="rgba(255,255,255,0.06)",N.currentTarget.style.borderColor="rgba(255,212,28,0.2)"},onMouseLeave:N=>{N.currentTarget.style.background="rgba(255,255,255,0.03)",N.currentTarget.style.borderColor="rgba(255,212,28,0.1)"},children:[a.jsxs("div",{children:[a.jsx("span",{style:{color:"#FFD41C",fontWeight:700},children:f.exportType}),a.jsx("span",{style:{color:"rgba(251,251,251,0.5)",marginLeft:"16px",fontSize:"13px"},children:new Date(f.exportedAt||f.timestamp||f.createdAt).toLocaleString()})]}),f.status==="success"?a.jsx("button",{onClick:()=>D(f._id),style:{padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:700,background:"rgba(34,197,94,0.2)",color:"#22C55E",border:"2px solid rgba(34,197,94,0.3)",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:N=>{N.currentTarget.style.background="rgba(34,197,94,0.3)"},onMouseLeave:N=>{N.currentTarget.style.background="rgba(34,197,94,0.2)"},children:" Download"}):a.jsx("span",{style:{padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:700,background:"rgba(239,68,68,0.2)",color:"#EF4444"},children:" Failed"})]},E))})})]})]}),d&&a.jsx($5,{dateRange:w,setDateRange:j,customStartDate:S,setCustomStartDate:m,customEndDate:b,setCustomEndDate:g,loading:r,onExport:q,onCancel:()=>{u(!1),j("all"),m(""),g("")}}),o&&a.jsx(W5,{configurations:e,setConfigurations:t,exportTypes:A,loading:r,onSave:k,onCancel:()=>i(!1)})]})}function vi({icon:e,label:t,value:r}){return a.jsxs("div",{style:{padding:"20px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:"1px solid rgba(255, 212, 28, 0.15)"},children:[a.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:e}),a.jsx("div",{style:{fontSize:"12px",color:"rgba(251, 251, 251, 0.5)",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:700},children:t}),a.jsx("div",{style:{fontSize:"16px",color:"#FBFBFB",fontWeight:700},children:r})]})}function $5({dateRange:e,setDateRange:t,customStartDate:r,setCustomStartDate:n,customEndDate:s,setCustomEndDate:l,loading:o,onExport:i,onCancel:d}){return a.jsxs("div",{onClick:d,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15, 18, 39, 0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{onClick:u=>u.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",border:"1px solid rgba(255, 212, 28, 0.2)",padding:"32px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[a.jsx("h3",{style:{color:"#FFD41C",fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Select Date Range"}),a.jsx("p",{style:{color:"rgba(251,251,251,0.6)",fontSize:"13px",margin:"0 0 24px 0"},children:"Choose which records to include in the export"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:[{value:"all",label:" All Time",desc:"Export all records"},{value:"24hr",label:" Last 24 Hours",desc:"Records from the past day"},{value:"week",label:" This Week",desc:"Records from the past 7 days"},{value:"month",label:" This Month",desc:"Records from current month"},{value:"custom",label:" Custom Range",desc:"Choose specific dates"}].map(u=>a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px",background:e===u.value?"rgba(255, 212, 28, 0.15)":"rgba(255, 255, 255, 0.05)",border:`2px solid ${e===u.value?"rgba(255, 212, 28, 0.4)":"rgba(255, 212, 28, 0.15)"}`,borderRadius:"10px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:c=>{e!==u.value&&(c.currentTarget.style.background="rgba(255, 212, 28, 0.1)")},onMouseLeave:c=>{e!==u.value&&(c.currentTarget.style.background="rgba(255, 255, 255, 0.05)")},children:[a.jsx("input",{type:"radio",name:"dateRange",value:u.value,checked:e===u.value,onChange:c=>t(c.target.value),style:{cursor:"pointer",width:"18px",height:"18px"}}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{color:"#FBFBFB",fontSize:"14px",fontWeight:700,marginBottom:"4px"},children:u.label}),a.jsx("div",{style:{color:"rgba(251,251,251,0.5)",fontSize:"12px"},children:u.desc})]})]},u.value))}),e==="custom"&&a.jsx("div",{style:{marginBottom:"24px",padding:"16px",background:"rgba(255,255,255,0.05)",borderRadius:"10px"},children:a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:"#FFD41C"},children:"Start Date"}),a.jsx("input",{type:"date",value:r,onChange:u=>n(u.target.value),style:{width:"100%",padding:"10px",background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FBFBFB",fontSize:"13px",outline:"none",boxSizing:"border-box"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:"#FFD41C"},children:"End Date"}),a.jsx("input",{type:"date",value:s,onChange:u=>l(u.target.value),style:{width:"100%",padding:"10px",background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FBFBFB",fontSize:"13px",outline:"none",boxSizing:"border-box"}})]})]})}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:i,disabled:o,style:{flex:1,padding:"14px 24px",background:o?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:o?"not-allowed":"pointer",boxShadow:o?"none":"0 4px 12px rgba(34, 197, 94, 0.4)",opacity:o?.6:1},children:o?" Exporting...":" Export Now"}),a.jsx("button",{onClick:d,disabled:o,style:{flex:1,padding:"14px 24px",background:"rgba(255, 212, 28, 0.1)",color:"#FFD41C",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:o?"not-allowed":"pointer"},children:"Cancel"})]})]}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
      `})]})}function W5({configurations:e,setConfigurations:t,exportTypes:r,loading:n,onSave:s,onCancel:l}){return a.jsxs("div",{onClick:l,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15, 18, 39, 0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{onClick:o=>o.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",border:"1px solid rgba(255, 212, 28, 0.2)",padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[a.jsx("h3",{style:{color:"#FFD41C",fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Configure Export Schedule"}),a.jsx("p",{style:{color:"rgba(251,251,251,0.6)",fontSize:"13px",margin:"0 0 24px 0"},children:"Set up when and how often the system should automatically export data."}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Frequency"}),a.jsxs("select",{value:e.autoExport.frequency,onChange:o=>t({...e,autoExport:{...e.autoExport,frequency:o.target.value}}),style:{width:"100%",padding:"12px 16px",background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FBFBFB",fontSize:"14px",fontWeight:600,cursor:"pointer",outline:"none"},children:[a.jsx("option",{value:"daily",style:{background:"#1E2347"},children:" Daily"}),a.jsx("option",{value:"weekly",style:{background:"#1E2347"},children:" Weekly"}),a.jsx("option",{value:"monthly",style:{background:"#1E2347"},children:" Monthly"}),a.jsx("option",{value:"custom",style:{background:"#1E2347"},children:" Custom Date"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Export Time (24-hour)"}),a.jsx("input",{type:"time",value:e.autoExport.time,onChange:o=>t({...e,autoExport:{...e.autoExport,time:o.target.value}}),style:{width:"100%",padding:"12px 16px",background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FBFBFB",fontSize:"14px",fontWeight:600,outline:"none",boxSizing:"border-box"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"12px",fontSize:"13px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Data Types to Export"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:r.map(o=>{var i,d,u;return a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px",background:(i=e.autoExport.exportTypes)!=null&&i.includes(o.value)?"rgba(255, 212, 28, 0.15)":"rgba(255, 255, 255, 0.05)",border:`2px solid ${(d=e.autoExport.exportTypes)!=null&&d.includes(o.value)?"rgba(255, 212, 28, 0.4)":"rgba(255, 212, 28, 0.15)"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255, 212, 28, 0.1)"},onMouseLeave:c=>{var p;c.currentTarget.style.background=(p=e.autoExport.exportTypes)!=null&&p.includes(o.value)?"rgba(255, 212, 28, 0.15)":"rgba(255, 255, 255, 0.05)"},children:[a.jsx("input",{type:"checkbox",checked:((u=e.autoExport.exportTypes)==null?void 0:u.includes(o.value))||!1,onChange:c=>{const p=e.autoExport.exportTypes||[],h=c.target.checked?[...p,o.value]:p.filter(v=>v!==o.value);t({...e,autoExport:{...e.autoExport,exportTypes:h}})},style:{cursor:"pointer",width:"16px",height:"16px"}}),a.jsx("span",{style:{fontSize:"16px"},children:o.icon}),a.jsx("span",{style:{color:"#FBFBFB",fontSize:"14px",fontWeight:600},children:o.label})]},o.value)})})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[a.jsx("button",{onClick:s,disabled:n,style:{flex:1,padding:"14px 24px",background:n?"#9CA3AF":"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:n?"not-allowed":"pointer",boxShadow:n?"none":"0 4px 12px rgba(255, 212, 28, 0.4)",opacity:n?.6:1},children:n?" Saving...":" Save Settings"}),a.jsx("button",{onClick:l,disabled:n,style:{flex:1,padding:"14px 24px",background:"rgba(255, 212, 28, 0.1)",color:"#FFD41C",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:n?"not-allowed":"pointer"},children:"Cancel"})]})]})]}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
      `})]})}function H5(){const e=$e(),[t,r]=x.useState(null),[n,s]=x.useState(!0),[l]=x.useState(()=>{const i=localStorage.getItem("adminData");return i?JSON.parse(i):null});x.useEffect(()=>{o()},[]);const o=async()=>{try{const i=localStorage.getItem("adminToken"),d=await fetch("http://localhost:3000/api/merchant/stats",{headers:{Authorization:`Bearer ${i}`}});if(!d.ok)throw new Error("Failed to load stats");const u=await d.json();r(u)}catch(i){console.error("Error loading merchant stats:",i),r({totalMerchants:0,activeMerchants:0,inactiveMerchants:0,recentMerchants:[]})}finally{s(!1)}};return n?a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px",color:"#FFD41C"},children:a.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid rgba(255, 212, 28, 0.3)",borderTopColor:"#FFD41C",borderRadius:"50%",animation:"spin 0.8s linear infinite"}})}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px",marginBottom:"32px"},children:[a.jsx(ji,{icon:"",label:"Total Merchants",value:(t==null?void 0:t.totalMerchants)||0,color:"#FFD41C"}),a.jsx(ji,{icon:"",label:"Active Merchants",value:(t==null?void 0:t.activeMerchants)||0,color:"#22C55E"}),a.jsx(ji,{icon:"",label:"Inactive Merchants",value:(t==null?void 0:t.inactiveMerchants)||0,color:"#EF4444"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:a.jsxs("div",{style:{background:"linear-gradient(135deg, #1E2347 0%, #181D40 100%)",borderRadius:"16px",border:"2px solid rgba(255, 212, 28, 0.3)",padding:"24px"},children:[a.jsxs("h3",{style:{fontSize:"18px",fontWeight:700,color:"#FBFBFB",margin:"0 0 20px 0",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("span",{children:""}),"Recently Added Merchants"]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t!=null&&t.recentMerchants&&t.recentMerchants.length>0?t.recentMerchants.slice(0,5).map((i,d)=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",background:"rgba(255, 212, 28, 0.05)",border:"1px solid rgba(255, 212, 28, 0.2)",borderRadius:"10px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #FFD41C 0%, #F59E0B 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:700,color:"#181D40"},children:""}),a.jsxs("div",{children:[a.jsx("div",{style:{color:"#FBFBFB",fontWeight:600,fontSize:"15px",marginBottom:"4px"},children:i.businessName||"Merchant"}),a.jsx("div",{style:{color:"rgba(251, 251, 251, 0.6)",fontSize:"12px"},children:i.email})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("span",{style:{padding:"4px 12px",background:i.isActive?"rgba(34, 197, 94, 0.15)":"rgba(239, 68, 68, 0.15)",border:`1px solid ${i.isActive?"rgba(34, 197, 94, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:"20px",color:i.isActive?"#22C55E":"#EF4444",fontSize:"11px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.5px"},children:i.isActive?"Active":"Inactive"}),a.jsx("span",{style:{fontSize:"11px",color:"rgba(251, 251, 251, 0.5)",whiteSpace:"nowrap"},children:i.createdAt?new Date(i.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Recently"})]})]},i._id||d)):a.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"rgba(251, 251, 251, 0.5)",fontSize:"14px"},children:[a.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),a.jsx("div",{children:"No merchants added yet"}),a.jsx("div",{style:{fontSize:"12px",marginTop:"8px"},children:"Navigate to the Merchants tab to add new merchants"})]})})]})}),a.jsxs("div",{style:{marginTop:"24px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[a.jsx(sl,{icon:"",title:"Manage Merchants",description:"View and manage all merchants",onClick:()=>e("/admin/merchant/merchants")}),a.jsx(sl,{icon:"",title:"Manage Phones",description:"View and manage phone assignments",onClick:()=>e("/admin/merchant/phones")}),a.jsx(sl,{icon:"",title:"View Logs",description:"Check system activity logs",onClick:()=>e("/admin/logs")}),a.jsx(sl,{icon:"",title:"Configurations",description:"Adjust system settings",onClick:()=>e("/admin/configurations")})]}),a.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}function ji({icon:e,label:t,value:r,color:n}){return a.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"24px",borderRadius:"16px",border:"1px solid rgba(255, 212, 28, 0.2)",position:"relative",overflow:"hidden",transition:"all 0.3s ease"},children:[a.jsx("div",{style:{position:"absolute",right:"16px",top:"16px",fontSize:"40px",opacity:.15},children:e}),a.jsx("div",{style:{fontSize:"11px",color:"rgba(251, 251, 251, 0.6)",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px"},children:t}),a.jsx("div",{style:{fontSize:"32px",fontWeight:800,color:"#FBFBFB",marginBottom:"8px"},children:r}),a.jsx("div",{style:{fontSize:"12px",color:n,fontWeight:600,display:"inline-block",padding:"3px 10px",borderRadius:"12px",background:`${n}20`},children:r>0?"merchants":"none"})]})}function sl({icon:e,title:t,description:r,onClick:n}){const[s,l]=xe.useState(!1);return a.jsxs("div",{onClick:n,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{background:s?"linear-gradient(135deg, #1E2347 0%, #181D40 100%)":"rgba(30, 35, 71, 0.4)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"12px",padding:"20px",cursor:"pointer",transition:"all 0.3s ease",transform:s?"translateY(-4px)":"translateY(0)",boxShadow:s?"0 8px 24px rgba(255, 212, 28, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[a.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:e}),a.jsx("div",{style:{fontSize:"15px",fontWeight:700,color:"#FFD41C",marginBottom:"6px"},children:t}),a.jsx("div",{style:{fontSize:"12px",color:"rgba(251, 251, 251, 0.6)",lineHeight:"1.5"},children:r})]})}function q5({isOpen:e,title:t,message:r,confirmText:n="Confirm",cancelText:s="Cancel",confirmColor:l="danger",onConfirm:o,onCancel:i}){if(!e)return null;const d=l==="danger"?{background:"linear-gradient(135deg, #EF4444 0%, #DC2626 100%)",color:"#FFFFFF"}:{background:"linear-gradient(135deg, #22C55E 0%, #16A34A 100%)",color:"#FFFFFF"};return a.jsxs("div",{onClick:i,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15, 18, 39, 0.9)",backdropFilter:"blur(8px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{onClick:u=>u.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",border:"1px solid rgba(255, 212, 28, 0.2)",padding:"32px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",animation:"slideUp 0.3s ease"},children:[a.jsx("h3",{style:{fontSize:"20px",fontWeight:700,color:"#FBFBFB",margin:"0 0 16px 0"},children:t}),a.jsx("p",{style:{fontSize:"14px",color:"rgba(251, 251, 251, 0.8)",margin:"0 0 24px 0",lineHeight:"1.6"},children:r}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[a.jsx("button",{onClick:i,style:{padding:"12px 24px",background:"rgba(255, 212, 28, 0.1)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(255, 212, 28, 0.2)"},onMouseLeave:u=>{u.currentTarget.style.background="rgba(255, 212, 28, 0.1)"},children:s}),a.jsx("button",{onClick:o,style:{padding:"12px 24px",...d,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.opacity="0.9"},onMouseLeave:u=>{u.currentTarget.style.opacity="1"},children:n})]})]}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function Y5(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),[s]=x.useState(()=>{const F=localStorage.getItem("adminData");return F?JSON.parse(F):null}),[l,o]=x.useState(!1),[i,d]=x.useState(null),[u,c]=x.useState(null),[p,h]=x.useState(""),[v,w]=x.useState(!1),[j,S]=x.useState(1),m=20,[b,g]=x.useState({isOpen:!1,merchantId:null}),[y,T]=x.useState({businessName:"",firstName:"",lastName:"",email:"",password:""});x.useEffect(()=>{R()},[]);const R=async()=>{try{const F=localStorage.getItem("adminToken"),f=await fetch("http://localhost:3000/api/merchant/merchants",{headers:{Authorization:`Bearer ${F}`}});if(!f.ok)throw new Error("Failed to load merchants");const E=await f.json();t(E.merchants||[])}catch(F){console.error("Error loading merchants:",F),c({type:"error",message:"Failed to load merchants"})}finally{n(!1)}},z=()=>{d(null),T({businessName:"",firstName:"",lastName:"",email:"",password:""}),o(!0)},A=F=>{d(F),T({businessName:F.businessName||"",firstName:F.firstName||"",lastName:F.lastName||"",email:F.email||"",password:""}),o(!0)},I=async F=>{if(F.preventDefault(),!y.businessName||y.businessName.trim().length===0){c({type:"error",message:"Business name is required"});return}if(!y.firstName||y.firstName.trim().length===0){c({type:"error",message:"First name is required"});return}if(!y.lastName||y.lastName.trim().length===0){c({type:"error",message:"Last name is required"});return}const f=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!y.email||!f.test(y.email.trim())){c({type:"error",message:"Please enter a valid email address"});return}if(y.password&&!/^\d{6}$/.test(y.password)){c({type:"error",message:"PIN must be exactly 6 digits"});return}w(!0);try{const E=localStorage.getItem("adminToken");if(i){const N={...y};N.password||delete N.password;const W=await fetch(`http://localhost:3000/api/merchant/merchants/${i._id}`,{method:"PUT",headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"},body:JSON.stringify(N)});if(!W.ok){const O=await W.json();throw new Error(O.error||"Failed to update merchant")}c({type:"success",message:"Merchant updated successfully!"})}else{if(!y.password){c({type:"error",message:"PIN is required for new merchants"}),w(!1);return}console.log(" Sending merchant data:",y);const N=await fetch("http://localhost:3000/api/merchant/merchants",{method:"POST",headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"},body:JSON.stringify(y)});if(!N.ok){const W=await N.json();throw new Error(W.error||"Failed to create merchant")}c({type:"success",message:"Merchant created successfully!"})}o(!1),R(),setTimeout(()=>c(null),3e3)}catch(E){console.error("Error saving merchant:",E);let N="Failed to save merchant";E.message.includes("Email already exists")||E.message.includes("409")?N="Email already exists. Please use a different email.":N=E.message,c({type:"error",message:N})}finally{w(!1)}},L=async F=>{const f=!F.isActive,E=f?"activate":"deactivate";try{const N=localStorage.getItem("adminToken");if(!(await fetch(`http://localhost:3000/api/merchant/merchants/${F._id}`,{method:"PUT",headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"},body:JSON.stringify({isActive:f})})).ok)throw new Error(`Failed to ${E} merchant`);c({type:"success",message:`Merchant ${E}d successfully!`}),R(),setTimeout(()=>c(null),3e3)}catch(N){console.error(`Error ${E}ing merchant:`,N),c({type:"error",message:`Failed to ${E} merchant`})}},M=F=>{g({isOpen:!0,merchantId:F})},k=async()=>{const F=b.merchantId;g({isOpen:!1,merchantId:null});try{const f=localStorage.getItem("adminToken");if(!(await fetch(`http://localhost:3000/api/merchant/merchants/${F}`,{method:"DELETE",headers:{Authorization:`Bearer ${f}`}})).ok)throw new Error("Failed to delete merchant");c({type:"success",message:"Merchant deleted permanently!"}),o(!1),R(),setTimeout(()=>c(null),3e3)}catch(f){console.error("Error deleting merchant:",f),c({type:"error",message:"Failed to delete merchant"})}},q=e.filter(F=>{var f,E,N,W,O;return((f=F.businessName)==null?void 0:f.toLowerCase().includes(p.toLowerCase()))||((E=F.firstName)==null?void 0:E.toLowerCase().includes(p.toLowerCase()))||((N=F.lastName)==null?void 0:N.toLowerCase().includes(p.toLowerCase()))||((W=F.email)==null?void 0:W.toLowerCase().includes(p.toLowerCase()))||((O=F.merchantId)==null?void 0:O.toLowerCase().includes(p.toLowerCase()))}).sort((F,f)=>F.isActive!==f.isActive?f.isActive?1:-1:(F.businessName||"").localeCompare(f.businessName||"")),D=Math.ceil(q.length/m),_=(j-1)*m,B=_+m,U=q.slice(_,B);return x.useEffect(()=>{S(1)},[p]),r?a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px",color:"#FFD41C"},children:a.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid rgba(255, 212, 28, 0.3)",borderTopColor:"#FFD41C",borderRadius:"50%",animation:"spin 0.8s linear infinite"}})}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[a.jsxs("div",{children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:700,color:"#FBFBFB",margin:"0 0 8px 0"},children:"Merchant Accounts"}),a.jsxs("p",{style:{fontSize:"14px",color:"rgba(251, 251, 251, 0.6)",margin:0},children:[q.length," merchant",q.length!==1?"s":""," registered (Page ",j," of ",D||1,")"]})]}),a.jsxs("button",{onClick:z,style:{padding:"12px 24px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(255, 212, 28, 0.4)"},children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Add Merchant"})]})]}),u&&a.jsxs("div",{style:{padding:"14px 20px",background:u.type==="success"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",border:`2px solid ${u.type==="success"?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:"12px",color:u.type==="success"?"#10B981":"#EF4444",fontSize:"14px",fontWeight:600,marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("span",{children:u.type==="success"?"":""}),a.jsx("span",{children:u.message})]}),a.jsx("div",{style:{marginBottom:"20px"},children:a.jsx("input",{type:"text",placeholder:" Search merchants by name, contact, email, or ID...",value:p,onChange:F=>h(F.target.value),style:{width:"100%",padding:"12px 16px",background:"rgba(30, 35, 71, 0.5)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",color:"#FBFBFB",fontSize:"14px",outline:"none"}})}),a.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[q.length>0?a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px"},children:U.map(F=>a.jsx(P5,{merchant:F,onEdit:A,onToggleActive:L},F._id))}):a.jsxs("div",{style:{background:"linear-gradient(135deg, #1E2347 0%, #181D40 100%)",borderRadius:"16px",border:"2px solid rgba(255, 212, 28, 0.3)",padding:"60px",textAlign:"center",color:"rgba(251, 251, 251, 0.5)"},children:[a.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:""}),a.jsx("p",{style:{margin:0,fontSize:"16px"},children:p?"No merchants found matching your search":"No merchants yet. Add your first merchant!"})]}),D>1&&a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"12px",marginTop:"24px",paddingTop:"24px",borderTop:"2px solid rgba(255,212,28,0.2)"},children:[a.jsx("button",{onClick:()=>S(F=>Math.max(1,F-1)),disabled:j===1,style:{padding:"10px 20px",background:j===1?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:j===1?"rgba(255,212,28,0.5)":"#FFD41C",fontSize:"14px",fontWeight:600,cursor:j===1?"not-allowed":"pointer",transition:"all 0.2s"},children:" Previous"}),a.jsxs("span",{style:{color:"rgba(251,251,251,0.8)",fontSize:"14px",fontWeight:600,minWidth:"120px",textAlign:"center"},children:["Page ",j," of ",D]}),a.jsx("button",{onClick:()=>S(F=>Math.min(D,F+1)),disabled:j===D,style:{padding:"10px 20px",background:j===D?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:j===D?"rgba(255,212,28,0.5)":"#FFD41C",fontSize:"14px",fontWeight:600,cursor:j===D?"not-allowed":"pointer",transition:"all 0.2s"},children:"Next "})]})]}),l&&a.jsx("div",{onClick:()=>o(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15, 18, 39, 0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:a.jsxs("div",{onClick:F=>F.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",border:"1px solid rgba(255, 212, 28, 0.2)",padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",animation:"slideUp 0.3s ease"},children:[a.jsx("h3",{style:{fontSize:"20px",fontWeight:700,color:"#FBFBFB",margin:"0 0 24px 0"},children:i?"Edit Merchant":"Add New Merchant"}),a.jsxs("form",{onSubmit:I,children:[a.jsxs("div",{style:{display:"grid",gap:"16px"},children:[i&&i.merchantId&&a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Merchant ID"}),a.jsx("div",{style:{padding:"12px 16px",background:"rgba(255, 212, 28, 0.1)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"14px",fontWeight:700},children:i.merchantId})]}),a.jsx(ll,{label:"Business Name",value:y.businessName,onChange:F=>T({...y,businessName:F}),placeholder:"e.g., Canteen 1",required:!0}),a.jsx(ll,{label:"First Name",value:y.firstName,onChange:F=>T({...y,firstName:F}),placeholder:"e.g., Juan",required:!0}),a.jsx(ll,{label:"Last Name",value:y.lastName,onChange:F=>T({...y,lastName:F}),placeholder:"e.g., Dela Cruz",required:!0}),a.jsx(ll,{label:"Email",type:"email",value:y.email,onChange:F=>T({...y,email:F}),placeholder:"merchant@nu-laguna.edu.ph",required:!0}),a.jsxs("div",{children:[a.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:[i?"6-Digit PIN (leave blank to keep current)":"6-Digit PIN"," ",!i&&a.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),a.jsx("input",{type:"text",name:"password",value:y.password,onChange:F=>{const f=F.target.value;(f===""||/^\d+$/.test(f))&&T({...y,password:f})},required:!i,maxLength:"6",placeholder:"123456",pattern:"\\d{6}",style:{width:"100%",padding:"12px",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"18px",boxSizing:"border-box",letterSpacing:"8px",textAlign:"center",fontWeight:700,outline:"none"}})]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px",justifyContent:i?"space-between":"flex-end"},children:[i&&a.jsx("button",{type:"button",onClick:()=>M(i._id),style:{padding:"12px 24px",background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.4)",borderRadius:"8px",color:"#EF4444",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:F=>{F.currentTarget.style.background="rgba(239, 68, 68, 0.25)"},onMouseLeave:F=>{F.currentTarget.style.background="rgba(239, 68, 68, 0.15)"},children:" Delete Permanently"}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{type:"button",onClick:()=>o(!1),style:{padding:"12px 24px",background:"rgba(255, 212, 28, 0.1)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:v,style:{padding:"12px 24px",background:v?"#CCCCCC":"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:v?"not-allowed":"pointer",boxShadow:v?"none":"0 4px 12px rgba(255, 212, 28, 0.4)",opacity:v?.6:1},children:v?"Saving...":i?"Update Merchant":"Create Merchant"})]})]})]})]})}),a.jsx(q5,{isOpen:b.isOpen,title:"Delete Merchant",message:"Are you sure you want to permanently delete this merchant? This action cannot be undone.",confirmText:"Delete Merchant",cancelText:"Cancel",confirmColor:"danger",onConfirm:k,onCancel:()=>g({isOpen:!1,merchantId:null})}),a.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
          }
          50% {
            opacity: 0.7;
            box-shadow: 0 0 0 6px rgba(16, 185, 129, 0.1);
          }
        }
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function P5({merchant:e,onEdit:t,onToggleActive:r}){const n=e.isActive!==!1;return a.jsxs("div",{style:{background:"linear-gradient(135deg, #1E2347 0%, #181D40 100%)",borderRadius:"16px",border:"2px solid rgba(255, 212, 28, 0.3)",padding:"24px",transition:"transform 0.2s ease, box-shadow 0.2s ease",cursor:"pointer",opacity:n?1:.7},onMouseEnter:s=>{s.currentTarget.style.transform="translateY(-4px)",s.currentTarget.style.boxShadow="0 8px 24px rgba(255, 212, 28, 0.2)"},onMouseLeave:s=>{s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="none"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[a.jsx("div",{style:{padding:"6px 14px",background:"rgba(255, 212, 28, 0.15)",border:"1px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C"},children:e.merchantId||"N/A"}),a.jsx("div",{style:{width:"12px",height:"12px",background:n?"#10B981":"#EF4444",borderRadius:"50%",boxShadow:`0 0 0 3px ${n?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`,animation:n?"pulse 2s ease-in-out infinite":"none"}})]}),a.jsx("h3",{style:{fontSize:"20px",fontWeight:700,color:"#FBFBFB",margin:"0 0 8px 0"},children:e.businessName}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},children:[a.jsxs("div",{style:{fontSize:"13px",color:"rgba(251, 251, 251, 0.8)",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[e.firstName," ",e.lastName]})]}),a.jsxs("div",{style:{fontSize:"13px",color:"rgba(251, 251, 251, 0.8)",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{children:""}),a.jsx("span",{children:e.email})]})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",paddingTop:"16px",borderTop:"1px solid rgba(255, 212, 28, 0.2)"},children:[a.jsx("button",{onClick:s=>{s.stopPropagation(),t(e)},style:{flex:1,padding:"10px 16px",background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",borderRadius:"8px",color:"#3B82F6",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:s=>{s.currentTarget.style.background="rgba(59, 130, 246, 0.3)"},onMouseLeave:s=>{s.currentTarget.style.background="rgba(59, 130, 246, 0.2)"},children:" Edit"}),a.jsx("button",{onClick:s=>{s.stopPropagation(),r(e)},style:{flex:1,padding:"10px 16px",background:n?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)",border:`1px solid ${n?"rgba(239, 68, 68, 0.4)":"rgba(16, 185, 129, 0.4)"}`,borderRadius:"8px",color:n?"#EF4444":"#10B981",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:s=>{n?s.currentTarget.style.background="rgba(239, 68, 68, 0.3)":s.currentTarget.style.background="rgba(16, 185, 129, 0.3)"},onMouseLeave:s=>{n?s.currentTarget.style.background="rgba(239, 68, 68, 0.2)":s.currentTarget.style.background="rgba(16, 185, 129, 0.2)"},children:n?" Deactivate":" Activate"})]})]})}function ll({label:e,type:t="text",value:r,onChange:n,placeholder:s,required:l,maxLength:o}){return a.jsxs("div",{children:[a.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:[e," ",l&&a.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),a.jsx("input",{type:t,value:r,onChange:i=>n(i.target.value),placeholder:s,required:l,maxLength:o,style:{width:"100%",padding:"12px 16px",background:"rgba(251, 251, 251, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FBFBFB",fontSize:"14px",outline:"none",boxSizing:"border-box"}})]})}function G5(){const[e,t]=x.useState([]),[r,n]=x.useState([]),[s,l]=x.useState(!0),[o,i]=x.useState(!1),[d,u]=x.useState(null),[c,p]=x.useState(null),[h,v]=x.useState(""),[w,j]=x.useState(1),S=20,[m,b]=x.useState({phoneId:"",phoneModel:"",phoneType:"Android",assignedMerchantId:"",assignedBusinessName:"",status:"available",notes:""}),g=async()=>{try{const f=await K.get("/merchant/phones");t(Array.isArray(f)?f:[]),l(!1)}catch(f){console.error("Error loading phones:",f),l(!1)}},y=async()=>{try{const f=await K.get("/merchant/merchants");n(Array.isArray(f)?f:[])}catch(f){console.error("Error loading merchants:",f)}};x.useEffect(()=>{g(),y();const f=setInterval(g,5e3);return()=>clearInterval(f)},[]);const T=()=>{if(e.length===0)return"PHONE_001";let f=0;for(const E of e)if(E.phoneId){const N=E.phoneId.match(/PHONE_(\d+)/i);if(N){const W=parseInt(N[1],10);W>f&&(f=W)}}return`PHONE_${String(f+1).padStart(3,"0")}`},R=f=>{if(!f)b({...m,assignedMerchantId:"",assignedBusinessName:"",status:"available",assignedMerchantDate:null});else{const E=r.find(N=>N.merchantId===f);b({...m,assignedMerchantId:f,assignedBusinessName:(E==null?void 0:E.businessName)||"",status:"assigned",assignedMerchantDate:new Date})}},z=async f=>{var E,N;f.preventDefault();try{if(d)await K.put(`/merchant/phones/${d._id}`,m),p({type:"success",message:"Phone updated successfully!"});else{const W=T();await K.post("/merchant/phones",{...m,phoneId:W}),p({type:"success",message:"Phone created successfully!"})}i(!1),u(null),M(),g(),setTimeout(()=>p(null),3e3)}catch(W){p({type:"error",message:((N=(E=W.response)==null?void 0:E.data)==null?void 0:N.error)||"Failed to save phone"})}},A=f=>{u(f),b({phoneId:f.phoneId,phoneModel:f.phoneModel,phoneType:f.phoneType,assignedMerchantId:f.assignedMerchantId||"",assignedBusinessName:f.assignedBusinessName||"",status:f.status,notes:f.notes||""}),i(!0)},I=async f=>{var E,N;if(window.confirm("Are you sure you want to delete this phone?"))try{await K.delete(`/merchant/phones/${f}`),p({type:"success",message:"Phone deleted successfully!"}),g(),setTimeout(()=>p(null),3e3)}catch(W){p({type:"error",message:((N=(E=W.response)==null?void 0:E.data)==null?void 0:N.error)||"Failed to delete phone"})}},L=async(f,E)=>{try{const N=r.find(O=>O.merchantId===E),W={...f,assignedMerchantId:E||null,assignedBusinessName:(N==null?void 0:N.businessName)||null,assignedMerchantDate:E?new Date:null,status:E?"assigned":"available"};await K.put(`/merchant/phones/${f._id}`,W),p({type:"success",message:"Merchant assignment updated!"}),g(),setTimeout(()=>p(null),2e3)}catch{p({type:"error",message:"Failed to update assignment"})}},M=()=>{b({phoneId:"",phoneModel:"",phoneType:"Android",assignedMerchantId:"",assignedBusinessName:"",status:"available",notes:""})},k=f=>{switch(f){case"available":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"assigned":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"maintenance":return{bg:"rgba(251,191,36,0.2)",color:"#FBBF24"};case"retired":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};default:return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"}}},q=()=>{const f=Zt(D);Qt(f,"merchant-phones")},D=e.filter(f=>{var N,W,O,P,Q,ee;if(!h)return!0;const E=h.toLowerCase();return((N=f.phoneId)==null?void 0:N.toLowerCase().includes(E))||((W=f.phoneModel)==null?void 0:W.toLowerCase().includes(E))||((O=f.phoneType)==null?void 0:O.toLowerCase().includes(E))||((P=f.assignedBusinessName)==null?void 0:P.toLowerCase().includes(E))||((Q=f.assignedMerchantId)==null?void 0:Q.toLowerCase().includes(E))||((ee=f.status)==null?void 0:ee.toLowerCase().includes(E))}),_=Math.ceil(D.length/S),B=(w-1)*S,U=B+S,F=D.slice(B,U);return x.useEffect(()=>{j(1)},[h]),s?a.jsx("div",{className:"text-center py-[60px] text-[#FFD41C]",children:"Loading phones..."}):a.jsxs("div",{className:"h-full flex flex-col",children:[c&&a.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:c.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:c.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${c.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4,animation:"fadeIn 0.3s ease"},children:c.message}),a.jsxs("div",{className:"mb-[30px] border-b-2 border-[rgba(255,212,28,0.2)] pb-5",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[a.jsx("span",{children:""})," Merchant Phone Inventory"]}),a.jsx("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:h?`Showing: ${D.length} of ${e.length} (Page ${w} of ${_||1})`:`Total devices: ${e.length}  Available: ${e.filter(f=>f.status==="available").length}  Assigned: ${e.filter(f=>f.status==="assigned").length} (Page ${w} of ${_||1})`})]}),a.jsx("button",{onClick:()=>{M(),u(null),i(!0)},style:{padding:"12px 24px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:"0 4px 12px rgba(255,212,28,0.4)",transition:"all 0.3s"},children:"+ Add Phone"})]}),a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsx(Xt,{value:h,onChange:v,placeholder:"Search by phone ID, model, serial, or merchant..."}),a.jsx(Vt,{onClick:q,disabled:D.length===0})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[e.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{children:"No phones found"})]}):D.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{style:{marginBottom:"12px"},children:"No phones match your search"}),a.jsx("button",{onClick:()=>v(""),style:{padding:"8px 16px",background:"rgba(255,212,28,0.15)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):a.jsx("div",{className:"overflow-x-auto rounded-xl border border-[rgba(255,212,28,0.2)]",children:a.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-[rgba(255,212,28,0.1)]",children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Phone ID"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Device"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Type"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Assigned Merchant"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Status"}),a.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:"#FFD41C",textTransform:"uppercase",borderBottom:"2px solid rgba(255,212,28,0.3)"},children:"Actions"})]})}),a.jsx("tbody",{children:F.map(f=>{const E=k(f.status);return a.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,212,28,0.1)"},children:[a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:a.jsx("strong",{children:f.phoneId})}),a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:f.phoneModel}),a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:f.phoneType}),a.jsx("td",{style:{padding:"16px"},children:a.jsxs("select",{value:f.assignedMerchantId||"",onChange:N=>L(f,N.target.value),style:{padding:"8px 12px",background:"rgba(255,212,28,0.1)",color:"#FFD41C",border:"1px solid rgba(255,212,28,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",minWidth:"200px"},children:[a.jsx("option",{value:"",children:"Unassigned"}),r.map(N=>a.jsxs("option",{value:N.merchantId,children:[N.businessName," (",N.merchantId,")"]},N.merchantId))]})}),a.jsx("td",{style:{padding:"16px"},children:a.jsx("span",{style:{padding:"6px 12px",background:E.bg,color:E.color,borderRadius:"6px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",display:"inline-block"},children:f.status})}),a.jsxs("td",{style:{padding:"16px",textAlign:"right"},children:[a.jsx("button",{onClick:()=>A(f),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",marginRight:"8px"},children:"Edit"}),a.jsx("button",{onClick:()=>I(f._id),style:{padding:"6px 12px",background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Delete"})]})]},f._id)})})]})}),_>1&&a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"12px",marginTop:"24px",paddingTop:"24px",borderTop:"2px solid rgba(255,212,28,0.2)"},children:[a.jsx("button",{onClick:()=>j(f=>Math.max(1,f-1)),disabled:w===1,style:{padding:"10px 20px",background:w===1?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:w===1?"rgba(255,212,28,0.5)":"#FFD41C",fontSize:"14px",fontWeight:600,cursor:w===1?"not-allowed":"pointer",transition:"all 0.2s"},children:" Previous"}),a.jsxs("span",{style:{color:"rgba(251,251,251,0.8)",fontSize:"14px",fontWeight:600,minWidth:"120px",textAlign:"center"},children:["Page ",w," of ",_]}),a.jsx("button",{onClick:()=>j(f=>Math.min(_,f+1)),disabled:w===_,style:{padding:"10px 20px",background:w===_?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:w===_?"rgba(255,212,28,0.5)":"#FFD41C",fontSize:"14px",fontWeight:600,cursor:w===_?"not-allowed":"pointer",transition:"all 0.2s"},children:"Next "})]})]}),o&&a.jsx("div",{onClick:()=>i(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:a.jsxs("div",{onClick:f=>f.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[a.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#FFD41C",margin:0},children:d?"Edit Phone":"Add New Phone"}),a.jsx("button",{onClick:()=>i(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsxs("form",{onSubmit:z,style:{padding:"24px"},children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase"},children:["Phone ID ",!d&&a.jsx("span",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontWeight:400},children:"(Auto-generated)"})]}),a.jsx("input",{type:"text",value:d?m.phoneId:T(),disabled:!0,style:{width:"100%",padding:"12px",border:"2px solid rgba(255,212,28,0.2)",borderRadius:"8px",background:"rgba(100,100,100,0.2)",color:"rgba(251,251,251,0.5)",fontSize:"14px",boxSizing:"border-box",cursor:"not-allowed"}})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase"},children:"Phone Model *"}),a.jsx("input",{type:"text",value:m.phoneModel,onChange:f=>b({...m,phoneModel:f.target.value}),required:!0,style:{width:"100%",padding:"12px",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"},placeholder:"e.g., Samsung Galaxy A14"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase"},children:"Phone Type *"}),a.jsxs("select",{value:m.phoneType,onChange:f=>b({...m,phoneType:f.target.value}),required:!0,style:{width:"100%",padding:"12px",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",cursor:"pointer"},children:[a.jsx("option",{value:"Android",children:"Android"}),a.jsx("option",{value:"iOS",children:"iOS"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase"},children:"Assign to Merchant"}),a.jsxs("select",{value:m.assignedMerchantId,onChange:f=>R(f.target.value),style:{width:"100%",padding:"12px",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",cursor:"pointer"},children:[a.jsx("option",{value:"",children:"Unassigned"}),r.map(f=>a.jsxs("option",{value:f.merchantId,children:[f.businessName," (",f.merchantId,")"]},f.merchantId))]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase"},children:"Notes"}),a.jsx("textarea",{value:m.notes,onChange:f=>b({...m,notes:f.target.value}),rows:"3",style:{width:"100%",padding:"12px",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",fontFamily:"inherit",resize:"vertical"},placeholder:"Any additional notes about this device"})]}),a.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",paddingTop:"20px",borderTop:"2px solid rgba(255,212,28,0.2)"},children:[a.jsx("button",{type:"button",onClick:()=>i(!1),style:{padding:"12px 24px",background:"rgba(251,251,251,0.1)",color:"rgba(251,251,251,0.7)",border:"1px solid rgba(251,251,251,0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),a.jsx("button",{type:"submit",style:{padding:"12px 24px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:"0 4px 12px rgba(255,212,28,0.4)"},children:d?"Update Phone":"Create Phone"})]})]})]})}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}function X5(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),[s,l]=x.useState(null),[o,i]=x.useState("all"),[d,u]=x.useState(""),[c,p]=x.useState(""),[h,v]=x.useState(""),[w,j]=x.useState(""),[S,m]=x.useState(""),[b,g]=x.useState(""),[y,T]=x.useState(null),[R,z]=x.useState(!1),[A,I]=x.useState(!1),[L,M]=x.useState(""),[k,q]=x.useState(!1),[D,_]=x.useState(1),B=20,U=async(C=!1)=>{try{C||n(!0);const V=await Us({page:1,limit:1e3});if(V.success){const Z=(V.concerns||[]).filter(ve=>ve.reportTo==="Merchant Office");t(Z)}}catch(V){console.error("Error loading merchant concerns:",V)}finally{C||n(!1)}};x.useEffect(()=>{U(!1);const C=setInterval(()=>U(!0),5e3);return()=>clearInterval(C)},[]);const F=async C=>{try{const V=await Do(C);V.success&&(T(V.concern),z(!0))}catch{l({type:"error",message:"Failed to load concern details"}),setTimeout(()=>l(null),3e3)}},f=C=>{T(C),M(""),z(!1),I(!0)},E=async(C,V)=>{try{if(V==="resolved"){T(C),I(!0);return}(await Ca(C.concernId,{status:V})).success&&(l({type:"success",message:"Status updated!"}),U(!0),setTimeout(()=>l(null),2e3))}catch(Z){console.error("Error updating status:",Z),l({type:"error",message:Z.message||"Failed to update status"}),setTimeout(()=>l(null),3e3)}},N=async()=>{q(!0);try{(await Ca(y.concernId,{status:"resolved",resolution:L.trim()||"No resolution details provided."})).success&&(l({type:"success",message:"Concern resolved and email sent"}),I(!1),U(!0),setTimeout(()=>l(null),2e3))}catch(C){l({type:"error",message:C.message||"Failed to resolve concern"}),setTimeout(()=>l(null),3e3)}finally{q(!1)}},W=()=>{const C=Zt(O);Qt(C,"merchant_concerns")},O=e.filter(C=>{var V,Z,ve,Fe,et,vt,st,lt,ot,it,je;if(o==="assistance"&&C.submissionType!=="assistance"||o==="feedback"&&C.submissionType!=="feedback")return!1;if(d){const G=d.toLowerCase();if(!(((V=C.concernId)==null?void 0:V.toLowerCase().includes(G))||((Z=C._id)==null?void 0:Z.toLowerCase().includes(G))||((ve=C.userName)==null?void 0:ve.toLowerCase().includes(G))||((Fe=C.userId)==null?void 0:Fe.toLowerCase().includes(G))||((et=C.title)==null?void 0:et.toLowerCase().includes(G))||((vt=C.description)==null?void 0:vt.toLowerCase().includes(G))||((st=C.category)==null?void 0:st.toLowerCase().includes(G))||((lt=C.subject)==null?void 0:lt.toLowerCase().includes(G))||((ot=C.feedbackText)==null?void 0:ot.toLowerCase().includes(G))||((it=C.priority)==null?void 0:it.toLowerCase().includes(G))||((je=C.status)==null?void 0:je.toLowerCase().includes(G))))return!1}if(c&&C.status!==c||h&&C.priority!==h||w&&C.category!==w)return!1;if(S||b){const G=new Date(C.submittedAt||C.createdAt);if(S&&G<new Date(S)||b&&G>new Date(b+"T23:59:59"))return!1}return!0}),P=Math.ceil(O.length/B),Q=(D-1)*B,ee=Q+B,Y=O.slice(Q,ee);return x.useEffect(()=>{_(1)},[d,c,h,w,S,b,o]),r?a.jsx("div",{className:"text-center py-[60px] text-[#FFD41C]",children:"Loading merchant concerns..."}):a.jsxs("div",{className:"h-full flex flex-col",children:[s&&a.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:s.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:s.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${s.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4},children:s.message}),a.jsxs("div",{className:"mb-[30px] border-b-2 border-[rgba(255,212,28,0.2)] pb-5",children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[a.jsx("span",{children:""})," Merchant Concerns"]}),a.jsx("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:O.length>0?`Showing ${Q+1}-${Math.min(ee,O.length)} of ${O.length}  Page ${D} of ${P}`:`Concerns and feedback related to Merchant Office  Total: ${e.length}`})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px"},children:[a.jsxs("button",{onClick:()=>i("all"),style:{padding:"10px 20px",background:o==="all"?"rgba(255,212,28,0.2)":"transparent",border:`2px solid ${o==="all"?"#FFD41C":"rgba(255,212,28,0.3)"}`,borderRadius:"8px",color:o==="all"?"#FFD41C":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["All (",e.length,")"]}),a.jsxs("button",{onClick:()=>i("assistance"),style:{padding:"10px 20px",background:o==="assistance"?"rgba(59,130,246,0.2)":"transparent",border:`2px solid ${o==="assistance"?"#3B82F6":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:o==="assistance"?"#3B82F6":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Assistance (",e.filter(C=>C.submissionType==="assistance").length,")"]}),a.jsxs("button",{onClick:()=>i("feedback"),style:{padding:"10px 20px",background:o==="feedback"?"rgba(34,197,94,0.2)":"transparent",border:`2px solid ${o==="feedback"?"#22C55E":"rgba(34,197,94,0.3)"}`,borderRadius:"8px",color:o==="feedback"?"#22C55E":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Feedback (",e.filter(C=>C.submissionType==="feedback").length,")"]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[a.jsx(Xt,{value:d,onChange:u,placeholder:"Search by ID, user, title, category, or status..."}),a.jsx(Je,{value:c,onChange:p,label:"Status",options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]}),a.jsx(Je,{value:h,onChange:v,label:"Priority",options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}]}),a.jsx(Je,{value:w,onChange:j,label:"Category",options:[{value:"payment_issue",label:"Payment Issue"},{value:"driver_complaint",label:"Driver Complaint"},{value:"shuttle_issue",label:"Shuttle Issue"},{value:"technical_problem",label:"Technical Problem"},{value:"safety_concern",label:"Safety Concern"},{value:"route_suggestion",label:"Route Suggestion"},{value:"billing_dispute",label:"Billing Dispute"},{value:"lost_item",label:"Lost Item"},{value:"other",label:"Other"}]}),a.jsx(En,{startDate:S,endDate:b,onStartChange:m,onEndChange:g}),a.jsx(Vt,{onClick:W,disabled:O.length===0})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:e.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{children:"No merchant concerns found"})]}):O.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{style:{marginBottom:"12px"},children:"No concerns match your search"}),a.jsx("button",{onClick:()=>u(""),style:{padding:"8px 16px",background:"rgba(255,212,28,0.15)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):a.jsxs("div",{className:"overflow-x-auto rounded-xl border border-[rgba(255,212,28,0.2)]",children:[a.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-[rgba(255,212,28,0.1)]",children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"ID"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"User"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Subject"}),o==="all"&&a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Type"}),o==="feedback"&&a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Rating"}),o!=="feedback"&&a.jsxs(a.Fragment,{children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Priority"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Status"})]}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Date"}),a.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:"#FFD41C",textTransform:"uppercase",borderBottom:"2px solid rgba(255,212,28,0.3)"},children:"Actions"})]})}),a.jsx("tbody",{children:Y.map(C=>a.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,212,28,0.1)"},children:[a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:a.jsx("strong",{children:C.concernId||C._id.slice(-6)})}),a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:C.userName||"N/A"}),a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:C.subject||(C.selectedConcerns&&C.selectedConcerns.length>0?`${C.selectedConcerns[0]}${C.selectedConcerns.length>1?` +${C.selectedConcerns.length-1}`:""}`:"N/A")}),o==="all"&&a.jsx("td",{style:{padding:"16px"},children:a.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:C.submissionType==="assistance"?"rgba(59,130,246,0.2)":"rgba(34,197,94,0.2)",color:C.submissionType==="assistance"?"#3B82F6":"#22C55E",border:`1px solid ${C.submissionType==="assistance"?"rgba(59,130,246,0.3)":"rgba(34,197,94,0.3)"}`},children:C.submissionType==="assistance"?" Assistance":" Feedback"})}),o==="feedback"&&a.jsx("td",{style:{padding:"16px"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[[...Array(5)].map((V,Z)=>a.jsx("span",{style:{fontSize:"16px",color:Z<(C.rating||0)?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},Z)),a.jsxs("span",{style:{marginLeft:"8px",color:"rgba(251,251,251,0.7)",fontSize:"12px"},children:["(",C.rating||0,"/5)"]})]})}),o!=="feedback"&&a.jsxs(a.Fragment,{children:[a.jsx("td",{style:{padding:"16px"},children:C.submissionType==="assistance"?a.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:C.priority==="urgent"?"rgba(239,68,68,0.2)":C.priority==="high"?"rgba(251,146,60,0.2)":C.priority==="medium"?"rgba(251,191,36,0.2)":"rgba(34,197,94,0.2)",color:C.priority==="urgent"?"#EF4444":C.priority==="high"?"#FB923C":C.priority==="medium"?"#FBBF24":"#22C55E"},children:C.priority||"low"}):a.jsx("span",{style:{color:"rgba(251,251,251,0.4)",fontSize:"11px"},children:""})}),a.jsx("td",{style:{padding:"16px"},children:C.submissionType==="assistance"?a.jsxs("select",{value:C.status||"pending",onChange:V=>E(C,V.target.value),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid rgba(255,212,28,0.3)",background:"rgba(255,255,255,0.05)",color:C.status==="resolved"?"#22C55E":C.status==="in_progress"?"#3B82F6":C.status==="closed"?"#6B7280":"#FBBF24",fontSize:"11px",fontWeight:600,cursor:"pointer"},children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"resolved",children:"Resolved"}),a.jsx("option",{value:"closed",children:"Closed"})]}):a.jsx("span",{style:{color:"rgba(251,251,251,0.4)",fontSize:"11px"},children:""})})]}),a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:new Date(C.submittedAt||C.createdAt).toLocaleDateString()}),a.jsx("td",{style:{padding:"16px",textAlign:"right"},children:a.jsx("button",{onClick:()=>F(C.concernId),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"})})]},C._id))})]}),P>1&&a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[a.jsx("button",{onClick:()=>_(C=>Math.max(1,C-1)),disabled:D===1,style:{padding:"8px 16px",background:D===1?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:D===1?"rgba(251,251,251,0.3)":"#FFD41C",fontSize:"13px",fontWeight:600,cursor:D===1?"not-allowed":"pointer"},children:" Previous"}),a.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",D," of ",P]}),a.jsx("button",{onClick:()=>_(C=>Math.min(P,C+1)),disabled:D===P,style:{padding:"8px 16px",background:D===P?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:D===P?"rgba(251,251,251,0.3)":"#FFD41C",fontSize:"13px",fontWeight:600,cursor:D===P?"not-allowed":"pointer"},children:"Next "})]})]})}),R&&y&&a.jsx(Ro,{concern:y,onClose:()=>z(!1),onResolve:()=>f(y)}),A&&y&&a.jsxs("div",{onClick:()=>I(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{onClick:C=>C.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[a.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#FFD41C",margin:0,marginBottom:"8px"},children:"Resolve Concern"}),a.jsx("p",{style:{fontSize:"13px",color:"rgba(251,251,251,0.6)",margin:0},children:"Mark this concern as resolved and notify the user"})]}),a.jsx("button",{onClick:()=>I(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]}),a.jsxs("div",{style:{padding:"24px"},children:[a.jsxs("div",{style:{background:"rgba(251,191,36,0.1)",border:"1px solid rgba(251,191,36,0.3)",borderLeft:"4px solid #FBBF24",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[a.jsx("span",{style:{fontSize:"20px"},children:""}),a.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#FBBF24"},children:"Confirm Resolution"})]}),a.jsx("p",{style:{fontSize:"13px",color:"rgba(251,251,251,0.7)",margin:0,lineHeight:"1.5"},children:"This will mark the concern as resolved and send an email notification to the user."})]}),a.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",border:"1px solid rgba(255,212,28,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"Concern Information"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"10px"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Concern ID"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontFamily:"monospace",fontWeight:600},children:y.concernId})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"User"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:y.userName})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Subject"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:y.subject})]})]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"8px"},children:"Resolution Details (Optional)"}),a.jsx("textarea",{value:L,onChange:C=>M(C.target.value),placeholder:"Describe how this concern was resolved (optional)...",rows:6,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid rgba(255,212,28,0.2)",background:"rgba(255,255,255,0.05)",color:"#FBFBFB",fontSize:"13px",lineHeight:"1.5",resize:"vertical",outline:"none",fontFamily:"inherit",boxSizing:"border-box"}}),a.jsx("p",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginTop:"8px",margin:"8px 0 0 0"},children:"This message will be included in the email notification to the user."})]})]}),a.jsxs("div",{style:{padding:"20px 24px",borderTop:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:()=>I(!1),disabled:k,style:{padding:"12px 24px",background:"rgba(255,255,255,0.1)",color:"#FBFBFB",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",cursor:k?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:k?.5:1},children:"Cancel"}),a.jsx("button",{onClick:N,disabled:k,style:{padding:"12px 24px",background:k?"rgba(34,197,94,0.3)":"#22C55E",color:k?"#22C55E":"#0f1227",border:"none",borderRadius:"8px",cursor:k?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:k?.5:1,boxShadow:k?"none":"0 4px 12px rgba(34,197,94,0.4)"},children:k?"Resolving...":" Mark as Resolved"})]})]}),a.jsx("style",{children:`
            @keyframes fadeIn {
              from { opacity: 0; }
              to { opacity: 1; }
            }
            @keyframes slideIn {
              from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
              }
              to {
                opacity: 1;
                transform: translateY(0) scale(1);
              }
            }
          `})]})]})}function V5(){var B,U,F;const[e,t]=x.useState({autoExport:{frequency:"daily",exportTypes:[],time:"00:00",emailRecipients:[]}}),[r,n]=x.useState(!1),[s,l]=x.useState(null),[o,i]=x.useState(!1),[d,u]=x.useState(!1),[c,p]=x.useState([]),[h,v]=x.useState([]),[w,j]=x.useState("all"),[S,m]=x.useState(""),[b,g]=x.useState(""),[y,T]=x.useState(""),[R,z]=x.useState({start:"",end:""}),A=[{value:"Merchants",icon:"",label:"Merchants"},{value:"Phones",icon:"",label:"Merchant Phones"},{value:"Logs",icon:"",label:"Merchant Logs"},{value:"Concerns",icon:"",label:"Merchant Concerns"}];x.useEffect(()=>{I(),L(),M()},[]);const I=async()=>{try{const f=await K.get("/admin/configurations");f&&t(f)}catch(f){console.error("Error loading configurations:",f)}},L=async()=>{try{const f=await K.get("/admin/configurations/export-history");p(Array.isArray(f)?f:[])}catch(f){console.error("Error loading export history:",f)}},M=async()=>{try{const f=await K.get("/admin/configurations/scheduled-exports");v(Array.isArray(f)?f:[])}catch(f){console.error("Error loading scheduled exports:",f)}},k=async()=>{var f,E;n(!0);try{await K.put("/admin/configurations/auto-export",e.autoExport),_("success","Auto-export settings saved successfully!"),i(!1),I()}catch(N){_("error",((E=(f=N.response)==null?void 0:f.data)==null?void 0:E.error)||"Failed to save settings")}finally{n(!1)}},q=async()=>{var f,E;n(!0);try{if(!e.autoExport.exportTypes||e.autoExport.exportTypes.length===0){_("error","Please select at least one export type in the configuration settings"),n(!1);return}const N=await K.post("/admin/configurations/manual-export-merchant",{exportTypes:e.autoExport.exportTypes});if(_("success",`Merchant data exported successfully! (${N.totalRecords} total records)`),N.downloadUrl){const W=document.createElement("a");W.href=N.downloadUrl,W.download=N.fileName||`merchant_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(W),W.click(),document.body.removeChild(W)}u(!1),j("all"),m(""),g(""),L()}catch(N){_("error",((E=(f=N.response)==null?void 0:f.data)==null?void 0:E.error)||"Export failed")}finally{n(!1)}},D=async f=>{try{const E=await K.get(`/admin/configurations/download-export/${f}`);if(E.downloadUrl){const N=document.createElement("a");N.href=E.downloadUrl,N.download=E.fileName,document.body.appendChild(N),N.click(),document.body.removeChild(N)}}catch{_("error","Failed to download export")}},_=(f,E)=>{l({type:f,message:E}),setTimeout(()=>l(null),5e3)};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{style:{marginBottom:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",paddingBottom:"16px"},children:[a.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[a.jsx("span",{children:""})," Merchant Configurations"]}),a.jsx("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:"Configure automated merchant data exports and system settings"})]}),s&&a.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"12px",background:s.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:s.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${s.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4,fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("span",{children:s.type==="success"?"":""}),a.jsx("span",{children:s.message})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",padding:"28px",marginBottom:"24px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[a.jsxs("div",{children:[a.jsxs("h3",{style:{color:"#FFD41C",fontSize:"20px",fontWeight:700,margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("span",{children:""})," Automated Merchant Export"]}),a.jsxs("p",{style:{color:"rgba(251,251,251,0.6)",fontSize:"14px",margin:0,lineHeight:"1.5"},children:["System automatically exports merchant data as ZIP files for backup and compliance.",a.jsx("br",{}),"Configure the schedule and download reports manually anytime."]})]}),a.jsxs("button",{onClick:()=>i(!0),style:{padding:"12px 20px",background:"rgba(255, 212, 28, 0.15)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",color:"#FFD41C",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:f=>{f.currentTarget.style.background="rgba(255, 212, 28, 0.25)",f.currentTarget.style.borderColor="rgba(255, 212, 28, 0.5)"},onMouseLeave:f=>{f.currentTarget.style.background="rgba(255, 212, 28, 0.15)",f.currentTarget.style.borderColor="rgba(255, 212, 28, 0.3)"},children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Configure Schedule"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[a.jsx(Si,{icon:"",label:"Frequency",value:((B=e.autoExport.frequency)==null?void 0:B.charAt(0).toUpperCase())+((U=e.autoExport.frequency)==null?void 0:U.slice(1))||"Not set"}),a.jsx(Si,{icon:"",label:"Export Time",value:e.autoExport.time||"Not set"}),a.jsx(Si,{icon:"",label:"Data Types",value:`${((F=e.autoExport.exportTypes)==null?void 0:F.length)||0} selected`})]}),a.jsxs("div",{style:{padding:"24px",background:"rgba(34, 197, 94, 0.1)",border:"2px dashed rgba(34, 197, 94, 0.3)",borderRadius:"12px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),a.jsx("h4",{style:{color:"#FBFBFB",fontSize:"16px",fontWeight:700,marginBottom:"8px"},children:"Export Merchant Data Now"}),a.jsx("p",{style:{color:"rgba(251,251,251,0.6)",fontSize:"13px",marginBottom:"16px"},children:"Download a complete ZIP file with all merchant data: merchants, phones, logs, and concerns."}),a.jsx("button",{onClick:()=>u(!0),disabled:r,style:{padding:"14px 32px",background:r?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:r?"not-allowed":"pointer",boxShadow:r?"none":"0 4px 12px rgba(34, 197, 94, 0.4)",transition:"all 0.2s ease",opacity:r?.6:1},onMouseEnter:f=>{r||(f.currentTarget.style.transform="translateY(-2px)",f.currentTarget.style.boxShadow="0 6px 16px rgba(34, 197, 94, 0.5)")},onMouseLeave:f=>{r||(f.currentTarget.style.transform="translateY(0)",f.currentTarget.style.boxShadow="0 4px 12px rgba(34, 197, 94, 0.4)")},children:r?" Exporting...":" Download Merchant Data (ZIP)"})]})]}),a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",padding:"28px",marginBottom:"24px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[a.jsxs("div",{children:[a.jsxs("h3",{style:{color:"#FFD41C",fontSize:"18px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{children:""})," Scheduled Export Archive"]}),a.jsx("p",{style:{color:"rgba(251,251,251,0.5)",fontSize:"12px",margin:0},children:"Auto-exported files saved from scheduled exports"})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[a.jsx("input",{type:"text",placeholder:"Search exports...",value:y,onChange:f=>T(f.target.value),style:{padding:"8px 16px",background:"rgba(255,255,255,0.05)",border:"2px solid rgba(255,212,28,0.2)",borderRadius:"8px",color:"#FBFBFB",fontSize:"13px",outline:"none",width:"200px"}}),a.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[a.jsx("input",{type:"date",value:R.start,onChange:f=>z({...R,start:f.target.value}),placeholder:"From",style:{padding:"8px 12px",background:"rgba(255,255,255,0.05)",border:"2px solid rgba(255,212,28,0.2)",borderRadius:"8px",color:"#FBFBFB",fontSize:"12px",outline:"none"}}),a.jsx("span",{style:{color:"rgba(251,251,251,0.5)"},children:""}),a.jsx("input",{type:"date",value:R.end,onChange:f=>z({...R,end:f.target.value}),placeholder:"To",style:{padding:"8px 12px",background:"rgba(255,255,255,0.05)",border:"2px solid rgba(255,212,28,0.2)",borderRadius:"8px",color:"#FBFBFB",fontSize:"12px",outline:"none"}}),(R.start||R.end||y)&&a.jsx("button",{onClick:()=>{T(""),z({start:"",end:""})},style:{padding:"8px 12px",background:"rgba(239,68,68,0.2)",border:"2px solid rgba(239,68,68,0.3)",borderRadius:"8px",color:"#EF4444",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Clear"})]})]})]}),h.length===0?a.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"rgba(251,251,251,0.4)",fontSize:"14px"},children:[a.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",opacity:.3},children:""}),a.jsx("p",{style:{margin:0},children:"No scheduled exports yet"}),a.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"12px"},children:"Configure auto-export schedule to start archiving exports"})]}):a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",paddingRight:"8px"},children:a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:h.filter(f=>{var P,Q;const E=!y||((P=f.exportType)==null?void 0:P.toLowerCase().includes(y.toLowerCase()))||((Q=f.fileName)==null?void 0:Q.toLowerCase().includes(y.toLowerCase())),N=new Date(f.exportedAt||f.timestamp||f.createdAt),W=!R.start||N>=new Date(R.start),O=!R.end||N<=new Date(R.end+"T23:59:59");return E&&W&&O}).map((f,E)=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 18px",background:"rgba(255,255,255,0.03)",borderRadius:"10px",border:"1px solid rgba(255,212,28,0.1)",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:N=>{N.currentTarget.style.background="rgba(255,255,255,0.06)",N.currentTarget.style.borderColor="rgba(255,212,28,0.2)",N.currentTarget.style.transform="translateX(4px)"},onMouseLeave:N=>{N.currentTarget.style.background="rgba(255,255,255,0.03)",N.currentTarget.style.borderColor="rgba(255,212,28,0.1)",N.currentTarget.style.transform="translateX(0)"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},children:[a.jsx("span",{style:{fontSize:"20px"},children:""}),a.jsx("span",{style:{color:"#FFD41C",fontWeight:700,fontSize:"15px"},children:f.exportType||"Scheduled Export"}),a.jsx("span",{style:{padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:700,background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)"},children:"AUTO"})]}),a.jsxs("div",{style:{display:"flex",gap:"20px",fontSize:"13px",color:"rgba(251,251,251,0.5)"},children:[a.jsxs("span",{children:[" ",new Date(f.exportedAt||f.timestamp||f.createdAt).toLocaleDateString()]}),a.jsxs("span",{children:[" ",new Date(f.exportedAt||f.timestamp||f.createdAt).toLocaleTimeString()]}),f.fileName&&a.jsxs("span",{children:[" ",f.fileName]}),f.recordCount&&a.jsxs("span",{children:[" ",f.recordCount," records"]})]})]}),f.status==="success"?a.jsx("button",{onClick:()=>D(f._id),style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(34,197,94,0.2)",color:"#22C55E",border:"2px solid rgba(34,197,94,0.3)",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:N=>{N.currentTarget.style.background="rgba(34,197,94,0.3)",N.currentTarget.style.transform="translateY(-2px)",N.currentTarget.style.boxShadow="0 4px 12px rgba(34,197,94,0.3)"},onMouseLeave:N=>{N.currentTarget.style.background="rgba(34,197,94,0.2)",N.currentTarget.style.transform="translateY(0)",N.currentTarget.style.boxShadow="none"},children:" Download"}):a.jsx("span",{style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"2px solid rgba(239,68,68,0.3)"},children:" Failed"})]},E))})})]}),c.length>0&&a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",padding:"28px"},children:[a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("h3",{style:{color:"#FFD41C",fontSize:"18px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{children:""})," Manual Export History"]}),a.jsx("p",{style:{color:"rgba(251,251,251,0.5)",fontSize:"12px",margin:0},children:"Recent manual exports triggered by administrators"})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",paddingRight:"8px"},children:a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:c.slice(0,10).map((f,E)=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"14px 16px",background:"rgba(255,255,255,0.03)",borderRadius:"10px",border:"1px solid rgba(255,212,28,0.1)",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:N=>{N.currentTarget.style.background="rgba(255,255,255,0.06)",N.currentTarget.style.borderColor="rgba(255,212,28,0.2)"},onMouseLeave:N=>{N.currentTarget.style.background="rgba(255,255,255,0.03)",N.currentTarget.style.borderColor="rgba(255,212,28,0.1)"},children:[a.jsxs("div",{children:[a.jsx("span",{style:{color:"#FFD41C",fontWeight:700},children:f.exportType}),a.jsx("span",{style:{color:"rgba(251,251,251,0.5)",marginLeft:"16px",fontSize:"13px"},children:new Date(f.exportedAt||f.timestamp||f.createdAt).toLocaleString()})]}),f.status==="success"?a.jsx("button",{onClick:()=>D(f._id),style:{padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:700,background:"rgba(34,197,94,0.2)",color:"#22C55E",border:"2px solid rgba(34,197,94,0.3)",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:N=>{N.currentTarget.style.background="rgba(34,197,94,0.3)"},onMouseLeave:N=>{N.currentTarget.style.background="rgba(34,197,94,0.2)"},children:" Download"}):a.jsx("span",{style:{padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:700,background:"rgba(239,68,68,0.2)",color:"#EF4444"},children:" Failed"})]},E))})})]})]}),d&&a.jsx(Q5,{dateRange:w,setDateRange:j,customStartDate:S,setCustomStartDate:m,customEndDate:b,setCustomEndDate:g,loading:r,onExport:q,onCancel:()=>{u(!1),j("all"),m(""),g("")}}),o&&a.jsx(Z5,{configurations:e,setConfigurations:t,exportTypes:A,loading:r,onSave:k,onCancel:()=>i(!1)})]})}function Si({icon:e,label:t,value:r}){return a.jsxs("div",{style:{padding:"20px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:"1px solid rgba(255, 212, 28, 0.15)"},children:[a.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:e}),a.jsx("div",{style:{fontSize:"12px",color:"rgba(251, 251, 251, 0.5)",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:700},children:t}),a.jsx("div",{style:{fontSize:"16px",color:"#FBFBFB",fontWeight:700},children:r})]})}function Q5({dateRange:e,setDateRange:t,customStartDate:r,setCustomStartDate:n,customEndDate:s,setCustomEndDate:l,loading:o,onExport:i,onCancel:d}){return a.jsxs("div",{onClick:d,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15, 18, 39, 0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{onClick:u=>u.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",border:"1px solid rgba(255, 212, 28, 0.2)",padding:"32px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[a.jsx("h3",{style:{color:"#FFD41C",fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Select Date Range"}),a.jsx("p",{style:{color:"rgba(251,251,251,0.6)",fontSize:"13px",margin:"0 0 24px 0"},children:"Choose which records to include in the export"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:[{value:"all",label:" All Time",desc:"Export all records"},{value:"24hr",label:" Last 24 Hours",desc:"Records from the past day"},{value:"week",label:" This Week",desc:"Records from the past 7 days"},{value:"month",label:" This Month",desc:"Records from current month"},{value:"custom",label:" Custom Range",desc:"Choose specific dates"}].map(u=>a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px",background:e===u.value?"rgba(255, 212, 28, 0.15)":"rgba(255, 255, 255, 0.05)",border:`2px solid ${e===u.value?"rgba(255, 212, 28, 0.4)":"rgba(255, 212, 28, 0.15)"}`,borderRadius:"10px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:c=>{e!==u.value&&(c.currentTarget.style.background="rgba(255, 212, 28, 0.1)")},onMouseLeave:c=>{e!==u.value&&(c.currentTarget.style.background="rgba(255, 255, 255, 0.05)")},children:[a.jsx("input",{type:"radio",name:"dateRange",value:u.value,checked:e===u.value,onChange:c=>t(c.target.value),style:{cursor:"pointer",width:"18px",height:"18px"}}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{color:"#FBFBFB",fontSize:"14px",fontWeight:700,marginBottom:"4px"},children:u.label}),a.jsx("div",{style:{color:"rgba(251,251,251,0.5)",fontSize:"12px"},children:u.desc})]})]},u.value))}),e==="custom"&&a.jsx("div",{style:{marginBottom:"24px",padding:"16px",background:"rgba(255,255,255,0.05)",borderRadius:"10px"},children:a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:"#FFD41C"},children:"Start Date"}),a.jsx("input",{type:"date",value:r,onChange:u=>n(u.target.value),style:{width:"100%",padding:"10px",background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FBFBFB",fontSize:"13px",outline:"none",boxSizing:"border-box"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:"#FFD41C"},children:"End Date"}),a.jsx("input",{type:"date",value:s,onChange:u=>l(u.target.value),style:{width:"100%",padding:"10px",background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FBFBFB",fontSize:"13px",outline:"none",boxSizing:"border-box"}})]})]})}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:i,disabled:o,style:{flex:1,padding:"14px 24px",background:o?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:o?"not-allowed":"pointer",boxShadow:o?"none":"0 4px 12px rgba(34, 197, 94, 0.4)",opacity:o?.6:1},children:o?" Exporting...":" Export Now"}),a.jsx("button",{onClick:d,disabled:o,style:{flex:1,padding:"14px 24px",background:"rgba(255, 212, 28, 0.1)",color:"#FFD41C",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:o?"not-allowed":"pointer"},children:"Cancel"})]})]}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
      `})]})}function Z5({configurations:e,setConfigurations:t,exportTypes:r,loading:n,onSave:s,onCancel:l}){return a.jsxs("div",{onClick:l,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15, 18, 39, 0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{onClick:o=>o.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",border:"1px solid rgba(255, 212, 28, 0.2)",padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[a.jsx("h3",{style:{color:"#FFD41C",fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Configure Export Schedule"}),a.jsx("p",{style:{color:"rgba(251,251,251,0.6)",fontSize:"13px",margin:"0 0 24px 0"},children:"Set up when and how often the system should automatically export data."}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Frequency"}),a.jsxs("select",{value:e.autoExport.frequency,onChange:o=>t({...e,autoExport:{...e.autoExport,frequency:o.target.value}}),style:{width:"100%",padding:"12px 16px",background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FBFBFB",fontSize:"14px",fontWeight:600,cursor:"pointer",outline:"none"},children:[a.jsx("option",{value:"daily",style:{background:"#1E2347"},children:" Daily"}),a.jsx("option",{value:"weekly",style:{background:"#1E2347"},children:" Weekly"}),a.jsx("option",{value:"monthly",style:{background:"#1E2347"},children:" Monthly"}),a.jsx("option",{value:"custom",style:{background:"#1E2347"},children:" Custom Date"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Export Time (24-hour)"}),a.jsx("input",{type:"time",value:e.autoExport.time,onChange:o=>t({...e,autoExport:{...e.autoExport,time:o.target.value}}),style:{width:"100%",padding:"12px 16px",background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FBFBFB",fontSize:"14px",fontWeight:600,outline:"none",boxSizing:"border-box"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"12px",fontSize:"13px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Data Types to Export"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:r.map(o=>{var i,d,u;return a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px",background:(i=e.autoExport.exportTypes)!=null&&i.includes(o.value)?"rgba(255, 212, 28, 0.15)":"rgba(255, 255, 255, 0.05)",border:`2px solid ${(d=e.autoExport.exportTypes)!=null&&d.includes(o.value)?"rgba(255, 212, 28, 0.4)":"rgba(255, 212, 28, 0.15)"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255, 212, 28, 0.1)"},onMouseLeave:c=>{var p;c.currentTarget.style.background=(p=e.autoExport.exportTypes)!=null&&p.includes(o.value)?"rgba(255, 212, 28, 0.15)":"rgba(255, 255, 255, 0.05)"},children:[a.jsx("input",{type:"checkbox",checked:((u=e.autoExport.exportTypes)==null?void 0:u.includes(o.value))||!1,onChange:c=>{const p=e.autoExport.exportTypes||[],h=c.target.checked?[...p,o.value]:p.filter(v=>v!==o.value);t({...e,autoExport:{...e.autoExport,exportTypes:h}})},style:{cursor:"pointer",width:"16px",height:"16px"}}),a.jsx("span",{style:{fontSize:"16px"},children:o.icon}),a.jsx("span",{style:{color:"#FBFBFB",fontSize:"14px",fontWeight:600},children:o.label})]},o.value)})})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[a.jsx("button",{onClick:s,disabled:n,style:{flex:1,padding:"14px 24px",background:n?"#9CA3AF":"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:n?"not-allowed":"pointer",boxShadow:n?"none":"0 4px 12px rgba(255, 212, 28, 0.4)",opacity:n?.6:1},children:n?" Saving...":" Save Settings"}),a.jsx("button",{onClick:l,disabled:n,style:{flex:1,padding:"14px 24px",background:"rgba(255, 212, 28, 0.1)",color:"#FFD41C",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:n?"not-allowed":"pointer"},children:"Cancel"})]})]})]}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
      `})]})}function Wt(){const{theme:e,isDarkMode:t}=se(),{userData:r,loadingUserData:n,logoutUser:s}=x.useContext(Nn),[l,o]=x.useState(!1),[i,d]=x.useState(navigator.onLine),u=x.useRef(null),c=$e();x.useEffect(()=>{const j=S=>{u.current&&!u.current.contains(S.target)&&o(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),x.useEffect(()=>{const j=()=>d(!0),S=()=>d(!1);return window.addEventListener("online",j),window.addEventListener("offline",S),()=>{window.removeEventListener("online",j),window.removeEventListener("offline",S)}},[]);const p=()=>r&&((r==null?void 0:r.name)||(r==null?void 0:r.firstName))||"User",h=()=>p().charAt(0).toUpperCase(),v=(r==null?void 0:r.email)||"user@nu.edu.ph",w=async()=>{await s(),c("/login")};return n?a.jsx("header",{style:{background:t?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",borderBottom:`2px solid ${e.accent.primary}`,boxShadow:t?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"px-[40px] py-[20px]",children:a.jsx("p",{style:{color:e.text.primary},className:"text-sm",children:"Loading user info..."})}):a.jsxs("header",{style:{background:t?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${e.accent.primary}`,boxShadow:t?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[a.jsx("div",{style:{width:"45px",height:"45px",background:e.accent.primary,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:t?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${t?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),a.jsxs("div",{children:[a.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:e.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash System"}),a.jsx("p",{style:{fontSize:"12px",color:e.accent.primary,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"Digital Wallet System"})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:i?"rgba(34, 197, 94, 0.2)":"rgba(107, 114, 128, 0.2)",padding:"6px 14px",borderRadius:"20px",border:i?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(107, 114, 128, 0.3)"},children:[a.jsx("div",{style:{width:"7px",height:"7px",background:i?"#22C55E":"#6B7280",borderRadius:"50%",animation:i?"pulse 2s ease-in-out infinite":"none"}}),a.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:i?"#22C55E":"#6B7280"},children:i?"LIVE":"INACTIVE"})]}),a.jsx(Wd,{}),a.jsxs("div",{style:{position:"relative"},ref:u,children:[a.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:t?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${e.accent.primary}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:j=>{j.currentTarget.style.background=t?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",j.currentTarget.style.transform="scale(1.02)"},onMouseLeave:j=>{j.currentTarget.style.background=t?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",j.currentTarget.style.transform="scale(1)"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:e.accent.primary,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:t?"#181D40":"#FFFFFF",flexShrink:0},children:h()}),a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:a.jsx("path",{d:"M2 4L6 8L10 4",stroke:e.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&a.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:t?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${e.border.primary}`,boxShadow:t?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${t?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`,marginBottom:"8px"},children:[a.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:e.text.primary,marginBottom:"4px"},children:p()}),a.jsx("div",{style:{fontSize:"12px",color:e.text.secondary},children:v}),a.jsx("div",{style:{fontSize:"10px",color:e.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:"User"})]}),a.jsxs("button",{onClick:()=>{o(!1),c("/account")},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:e.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:j=>{j.currentTarget.style.background=t?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",j.currentTarget.style.color=e.accent.primary},onMouseLeave:j=>{j.currentTarget.style.background="transparent",j.currentTarget.style.color=e.text.primary},children:[a.jsx("span",{style:{fontSize:"16px"},children:""}),a.jsx("span",{children:"Manage Account"})]}),a.jsx("div",{style:{height:"1px",background:t?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",margin:"8px 0"}}),a.jsxs("button",{onClick:()=>{o(!1),w()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:j=>{j.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:j=>{j.currentTarget.style.background="transparent"},children:[a.jsx("span",{style:{fontSize:"16px"},children:""}),a.jsx("span",{children:"Logout"})]})]})]})]}),a.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.5;
            transform: scale(0.8);
          }
        }

        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function Yt(){const e=$e(),t=Ye(),{theme:r,isDarkMode:n}=se(),i=t.pathname.startsWith("/admin/treasury")?[{id:"dashboard",label:"Dashboard",icon:"",route:"/admin/treasury/dashboard"},{id:"transactions",label:"Transaction History",icon:"",route:"/admin/treasury/transactions"},{id:"merchants",label:"Merchants",icon:"",route:"/admin/treasury/merchants"},{id:"logs",label:"Logs",icon:"",route:"/admin/treasury/logs"},{id:"concerns",label:"Concerns",icon:"",route:"/admin/treasury/concerns"},{id:"config",label:"Configuration",icon:"",route:"/admin/treasury/config"}]:[{id:"home",label:"Home",icon:"",route:"/admin/accounting/home"},{id:"transactions",label:"Transaction History",icon:"",route:"/admin/accounting/transactions"},{id:"merchants",label:"Merchants",icon:"",route:"/admin/accounting/merchants"},{id:"logs",label:"Logs",icon:"",route:"/admin/accounting/logs"},{id:"concerns",label:"Concerns",icon:"",route:"/admin/accounting/concerns"},{id:"config",label:"Configuration",icon:"",route:"/admin/accounting/config"}];return a.jsx("nav",{style:{background:r.bg.secondary,borderColor:r.border.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",borderRadius:"12px",padding:"12px 24px",marginBottom:"20px",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},className:"flex gap-2 border",onMouseEnter:d=>{d.currentTarget.style.borderColor=r.border.hover,d.currentTarget.style.boxShadow=n?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:d=>{d.currentTarget.style.borderColor=r.border.primary,d.currentTarget.style.boxShadow=n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:i.map(d=>{const u=t.pathname.startsWith(d.route);return a.jsxs("button",{onClick:()=>e(d.route),style:{background:u?r.accent.primary:"transparent",color:u?r.accent.secondary:r.text.secondary,padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",transition:"all 0.3s ease",transform:u?"scale(1.05)":"scale(1)",boxShadow:u?n?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)":"none"},className:"flex items-center gap-2 font-semibold text-sm",onMouseEnter:c=>{u||(c.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",c.currentTarget.style.color=r.accent.primary,c.currentTarget.style.transform="scale(1.02)",c.currentTarget.style.boxShadow=n?"0 2px 8px rgba(255,212,28,0.2)":"0 2px 8px rgba(59,130,246,0.2)")},onMouseLeave:c=>{u||(c.currentTarget.style.background="transparent",c.currentTarget.style.color=r.text.secondary,c.currentTarget.style.transform="scale(1)",c.currentTarget.style.boxShadow="none")},children:[a.jsx("span",{className:`text-base transition-transform duration-300 ${u?"scale-110":""}`,children:d.icon}),a.jsx("span",{children:d.label})]},d.id)})})}const zn="http://localhost:3000/api/admin",Dn=()=>({Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}),K5=async()=>{try{const e=await fetch(`${zn}/treasury/analytics/today`,{headers:Dn()}),t=await e.json();if(!e.ok)throw new Error(t.message||"Failed to fetch analytics");return t}catch(e){throw console.error("Get analytics error:",e),e}},Xd=async(e={})=>{try{const t=new URLSearchParams({page:e.page||1,limit:e.limit||50,...e.startDate&&{startDate:e.startDate},...e.endDate&&{endDate:e.endDate},...e.search&&{search:e.search},...e.transactionType&&{transactionType:e.transactionType}}),r=await fetch(`${zn}/treasury/transactions?${t}`,{headers:Dn()}),n=await r.json();if(!r.ok)throw new Error(n.message||"Failed to fetch transactions");return n}catch(t){throw console.error("Get transactions error:",t),t}},Vg=async e=>{try{const t=await fetch(`${zn}/treasury/users/search-rfid?rfidUId=${e}`,{headers:Dn()}),r=await t.json();if(!t.ok)throw new Error(r.message||"User not found");return r}catch(t){throw console.error("Search user error:",t),t}},Qg=async(e={})=>{try{const t=new URLSearchParams({page:e.page||1,limit:e.limit||50,...e.search&&{search:e.search},...e.isActive!==void 0&&{isActive:e.isActive}}),r=await fetch(`${zn}/treasury/merchants?${t}`,{headers:Dn()}),n=await r.json();if(!r.ok)throw new Error(n.message||"Failed to fetch merchants");return n}catch(t){throw console.error("Get merchants error:",t),t}},J5=async(e,t)=>{try{const r=await fetch(`${zn}/treasury/merchants/${e}/status`,{method:"PATCH",headers:Dn(),body:JSON.stringify({isActive:t})}),n=await r.json();if(!r.ok)throw new Error(n.message||"Failed to update merchant status");return n}catch(r){throw console.error("Update merchant status error:",r),r}},ev=async(e={})=>{try{const t=new URLSearchParams({...e.startDate&&{startDate:e.startDate},...e.endDate&&{endDate:e.endDate},...e.transactionType&&{transactionType:e.transactionType}}),r=await fetch(`${zn}/treasury/export/transactions?${t}`,{headers:Dn()});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to export transactions")}return await r.blob()}catch(t){throw console.error("Export transactions error:",t),t}};function Zg(){const{theme:e,isDarkMode:t}=se(),[r,n]=x.useState({totalCashIn:0,transactionCount:0,studentsUsingNUCash:0,activeStudents:0}),[s,l]=x.useState(!0),o=async(i=!0)=>{var d,u;try{i&&l(!0);const c=await K5();if(c.success){const p=c.analytics;n({totalCashIn:((d=p.todayCashIn)==null?void 0:d.amount)||0,transactionCount:((u=p.todayCashIn)==null?void 0:u.count)||0,studentsUsingNUCash:p.totalActiveUsers||0,activeStudents:p.totalActiveUsers||0})}else i&&X.error("Failed to load analytics")}catch(c){console.error("Analytics fetch error:",c),i&&X.error("Error loading analytics")}finally{i&&l(!1)}};return x.useEffect(()=>{o(!0);const i=setInterval(()=>o(!1),3e4);return()=>clearInterval(i)},[]),a.jsx("div",{children:a.jsxs("div",{className:"grid grid-cols-3 gap-5",children:[a.jsx(wi,{icon:"",label:"TODAY'S COLLECTIONS",value:s&&r.totalCashIn===0?"":`${r.totalCashIn.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`,subtitle:`${r.transactionCount} transactions`,color:"#FFD41C",theme:e}),a.jsx(wi,{icon:"",label:"ACTIVE USERS",value:s&&r.studentsUsingNUCash===0?"":r.studentsUsingNUCash,subtitle:`${r.activeStudents} registered`,color:"#10B981",theme:e}),a.jsx(wi,{icon:"",label:"TOTAL TRANSACTIONS",value:r.transactionCount,subtitle:"today's activity",color:"#3B82F6",theme:e})]})})}function wi({icon:e,label:t,value:r,subtitle:n,color:s,theme:l}){return a.jsxs("div",{style:{background:l.bg.card,borderColor:l.border.primary},className:"p-6 rounded-2xl border relative overflow-hidden transition-all duration-300",children:[a.jsx("div",{className:"absolute right-4 top-4 text-[40px] opacity-15",children:e}),a.jsx("div",{style:{color:l.text.secondary},className:"text-[11px] font-bold uppercase tracking-wide mb-3",children:t}),a.jsx("div",{style:{color:l.text.primary},className:"text-[32px] font-extrabold mb-2",children:r}),a.jsx("div",{className:"text-xs font-semibold inline-block py-[3px] px-[10px] rounded-xl",style:{color:s,background:`${s}20`},children:n})]})}function tv(){const e=$e(),{theme:t,isDarkMode:r}=se(),[n,s]=x.useState(!1),[l,o]=x.useState("input"),[i,d]=x.useState(""),[u,c]=x.useState(!1),[p,h]=x.useState(null),v=x.useRef(null);x.useEffect(()=>{n&&v.current&&v.current.focus()},[n]);const w=async()=>{if(!i.trim()){X.error("Please enter RFID");return}c(!0);try{const y=await Vg(i.trim());y.success?(h(y.user),o("found")):o("notFound")}catch(y){console.error(y),o("notFound")}finally{c(!1)}},j=y=>{(y.key==="Enter"||y.key==="Tab")&&(y.preventDefault(),w())},S=()=>{s(!1),o("input"),d(""),h(null)},m=()=>{e("/admin/treasury/cashin",{state:{user:p}}),S()},b=()=>{e("/admin/treasury/register",{state:{rfid:i.trim()}}),S()},g=r?"255, 212, 28":"59, 130, 246";return a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{width:"100%",maxWidth:"100%",display:"flex",flexDirection:"column",borderRadius:"12px",overflow:"hidden",background:t.bg.card,border:`1px solid rgba(${g}, 0.2)`,boxShadow:r?"0 4px 12px rgba(0,0,0,0.2)":"0 4px 12px rgba(59,130,246,0.1)"},children:[a.jsx("div",{style:{background:t.accent.primary,borderBottom:`1px solid rgba(${g}, 0.3)`,padding:"12px 16px"},className:"flex items-center justify-between",children:a.jsx("h3",{style:{color:t.accent.secondary},className:"font-bold text-base",children:" Cash In"})}),a.jsxs("div",{style:{padding:"20px",position:"relative",minHeight:"120px",color:t.text.primary},children:[a.jsx("p",{style:{color:t.text.secondary},className:"text-sm mb-4",children:"Add balance to a user's account after verifying their ID card."}),a.jsx("button",{onClick:()=>s(!0),style:{background:t.accent.primary,color:t.accent.secondary,width:"100%",boxShadow:r?"0 4px 12px rgba(255,212,28,0.3)":"0 4px 12px rgba(59,130,246,0.3)"},className:"font-semibold px-4 py-3 text-sm rounded-lg transition hover:opacity-90",children:"Start Cash In Process "})]})]}),n&&a.jsx("div",{onClick:S,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:a.jsxs("div",{onClick:y=>y.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"500px",width:"90%",maxHeight:"85vh",overflow:"auto",border:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[a.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${r?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("h2",{style:{fontSize:"22px",fontWeight:700,color:t.accent.primary,margin:0},children:[l==="input"&&" Cash In - Scan RFID",l==="found"&&" User Found",l==="notFound"&&" User Not Found"]}),a.jsx("button",{onClick:S,style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsxs("div",{style:{padding:"24px"},children:[l==="input"&&a.jsxs(a.Fragment,{children:[a.jsx("p",{style:{color:t.text.secondary,marginBottom:"20px",fontSize:"14px"},children:"Place cursor in the field below and scan the user's RFID card"}),a.jsx("div",{style:{background:r?"rgba(255,212,28,0.05)":"rgba(59,130,246,0.05)",padding:"20px",borderRadius:"12px",marginBottom:"20px"},children:a.jsx("input",{ref:v,type:"text",placeholder:"RFID will appear here...",value:i,onChange:y=>d(y.target.value),onKeyDown:j,style:{width:"100%",padding:"14px",border:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:t.text.primary,fontSize:"16px",textAlign:"center",fontFamily:"monospace",boxSizing:"border-box"},className:"focus:outline-none"})}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:S,style:{flex:1,padding:"12px",background:"transparent",color:t.text.primary,border:`2px solid ${t.border.primary}`,borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Cancel"}),a.jsx("button",{onClick:w,disabled:u||!i.trim(),style:{flex:1,padding:"12px",background:u||!i.trim()?"rgba(100,100,100,0.2)":t.accent.primary,color:u||!i.trim()?"rgba(251,251,251,0.3)":t.accent.secondary,border:"none",borderRadius:"8px",cursor:u||!i.trim()?"not-allowed":"pointer",fontWeight:700,boxShadow:u||!i.trim()?"none":r?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},children:u?"Searching...":"Search User"})]})]}),l==="found"&&a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:""}),a.jsx("h3",{style:{fontSize:"20px",fontWeight:700,color:"#10B981",marginBottom:"12px"},children:"User Found Successfully"}),a.jsx("p",{style:{color:t.text.secondary,marginBottom:"24px",fontSize:"14px"},children:"Proceed to the Cash In form to add balance"}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:S,style:{flex:1,padding:"12px",background:"transparent",color:t.text.primary,border:`2px solid ${t.border.primary}`,borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Cancel"}),a.jsx("button",{onClick:m,style:{flex:1,padding:"12px",background:"#10B981",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,boxShadow:"0 4px 12px rgba(16,185,129,0.4)"},children:"Proceed to Cash In "})]})]}),l==="notFound"&&a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"64px",marginBottom:"16px",color:t.accent.primary},children:""}),a.jsx("h3",{style:{fontSize:"20px",fontWeight:700,color:t.accent.primary,marginBottom:"12px"},children:"User Not Found"}),a.jsxs("p",{style:{color:t.text.primary,marginBottom:"8px",fontSize:"14px"},children:["The RFID ",a.jsx("span",{style:{fontWeight:700,color:t.accent.primary,fontFamily:"monospace"},children:i})," is not registered."]}),a.jsx("p",{style:{color:t.text.secondary,marginBottom:"24px",fontSize:"14px"},children:"Would you like to register this user?"}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:S,style:{flex:1,padding:"12px",background:"transparent",color:t.text.primary,border:`2px solid ${t.border.primary}`,borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Cancel"}),a.jsx("button",{onClick:b,style:{flex:1,padding:"12px",background:t.accent.primary,color:t.accent.secondary,border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,boxShadow:r?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},children:"Register User "})]})]})]})]})}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function av(){var z;const e=$e(),t=Ye(),{theme:r,isDarkMode:n}=se(),s=((z=t.state)==null?void 0:z.rfid)||"",[l,o]=x.useState(!1),[i,d]=x.useState(s),[u,c]=x.useState(!1),[p,h]=x.useState("input"),[v,w]=x.useState(null),j=x.useRef(null);x.useEffect(()=>{l&&j.current&&j.current.focus()},[l]),x.useEffect(()=>{s&&o(!0)},[s]);const S=async()=>{if(!i.trim()){X.error("Please enter RFID");return}c(!0);try{const A=await Vg(i.trim());A.success?(w(A.user),h("found")):h("notFound")}catch{h("notFound")}finally{c(!1)}},m=A=>{(A.key==="Enter"||A.key==="Tab")&&(A.preventDefault(),S())},b=()=>{o(!1),h("input"),d(""),w(null)},g=()=>{e("/admin/treasury/cashin",{state:{user:v}}),b()},y=()=>{e("/admin/treasury/register",{state:{rfid:i.trim()}}),b()},T=n?"255, 212, 28":"59, 130, 246",R=()=>{switch(p){case"input":return" Scan or Enter RFID";case"found":return" User Already Registered";case"notFound":return" User Not Found";default:return" Register User"}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{width:"100%",maxWidth:"100%",display:"flex",flexDirection:"column",borderRadius:"12px",overflow:"hidden",background:r.bg.card,border:`1px solid rgba(${T}, 0.2)`,boxShadow:n?"0 4px 12px rgba(0,0,0,0.2)":"0 4px 12px rgba(59,130,246,0.1)"},children:[a.jsx("div",{style:{background:r.accent.primary,borderBottom:`1px solid rgba(${T}, 0.3)`,padding:"8px 16px"},className:"flex items-center justify-between",children:a.jsx("h3",{style:{color:r.accent.secondary},className:"font-bold text-m",children:" Register User"})}),a.jsxs("div",{style:{padding:"16px",position:"relative",minHeight:"90px",color:r.text.primary},children:[a.jsx("p",{style:{color:r.text.secondary},className:"text-sm mb-2",children:"Register a new user by scanning or entering RFID."}),a.jsx("div",{style:{position:"absolute",bottom:"20px",right:"16px"},children:a.jsx("button",{onClick:()=>o(!0),style:{background:r.accent.primary,color:r.accent.secondary,boxShadow:n?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},className:"font-semibold px-3 py-1 text-sm rounded-md transition hover:opacity-90",children:"Register"})})]})]}),l&&a.jsx("div",{onClick:b,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:a.jsxs("div",{onClick:A=>A.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"500px",width:"90%",maxHeight:"85vh",overflow:"auto",border:`2px solid ${n?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[a.jsxs("div",{style:{background:`rgba(${T}, 0.1)`,borderBottom:`2px solid ${n?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,padding:"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:10,backdropFilter:"blur(10px)"},children:[a.jsx("h2",{style:{color:r.accent.primary,fontSize:"1.25rem",fontWeight:"bold",margin:0},children:R()}),a.jsx("button",{onClick:b,style:{background:"rgba(255,255,255,0.1)",border:"none",color:r.text.primary,width:"32px",height:"32px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",transition:"all 0.2s"},onMouseEnter:A=>A.target.style.background="rgba(255,255,255,0.2)",onMouseLeave:A=>A.target.style.background="rgba(255,255,255,0.1)",children:""})]}),a.jsxs("div",{style:{padding:"24px"},children:[p==="input"&&a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("p",{style:{color:r.text.secondary,marginBottom:"20px",fontSize:"0.95rem"},children:"Place cursor in field and scan card, or enter manually"}),a.jsx("div",{style:{background:`rgba(${T}, 0.08)`,padding:"24px",borderRadius:"12px",marginBottom:"20px",border:`1px solid rgba(${T}, 0.2)`},children:a.jsx("input",{ref:j,type:"text",placeholder:"RFID will appear here...",value:i,onChange:A=>d(A.target.value),onKeyDown:m,style:{width:"100%",background:"rgba(0,0,0,0.3)",color:r.text.primary,border:`2px solid rgba(${T}, 0.4)`,padding:"12px 16px",borderRadius:"8px",textAlign:"center",fontFamily:"monospace",fontSize:"1.1rem",outline:"none",transition:"all 0.2s"},onFocus:A=>A.target.style.border=`2px solid ${r.accent.primary}`,onBlur:A=>A.target.style.border=`2px solid rgba(${T}, 0.4)`})}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:b,style:{flex:1,padding:"12px",background:"rgba(107, 114, 128, 0.3)",color:r.text.secondary,border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:A=>A.target.style.background="rgba(107, 114, 128, 0.4)",onMouseLeave:A=>A.target.style.background="rgba(107, 114, 128, 0.3)",children:"Cancel"}),a.jsx("button",{onClick:S,disabled:u||!i.trim(),style:{flex:1,padding:"12px",background:u||!i.trim()?"rgba(107, 114, 128, 0.5)":r.accent.primary,color:u||!i.trim()?r.text.muted:r.accent.secondary,border:"none",borderRadius:"8px",fontWeight:"700",cursor:u||!i.trim()?"not-allowed":"pointer",transition:"all 0.2s",boxShadow:u||!i.trim()?"none":n?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},onMouseEnter:A=>{!u&&i.trim()&&(A.target.style.opacity="0.9")},onMouseLeave:A=>{A.target.style.opacity="1"},children:u?" Searching...":" Proceed"})]})]}),p==="found"&&a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"4rem",marginBottom:"16px",color:"#10B981",animation:"bounceIn 0.5s ease"},children:""}),a.jsx("h3",{style:{color:"#10B981",fontSize:"1.5rem",fontWeight:"bold",marginBottom:"12px"},children:"User Already Registered"}),a.jsx("p",{style:{color:r.text.secondary,marginBottom:"24px",fontSize:"0.95rem"},children:"This RFID is already in the system. Proceed to Cash In?"}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:b,style:{flex:1,padding:"12px",background:"rgba(251, 251, 251, 0.1)",color:r.text.primary,border:`1px solid rgba(${T}, 0.3)`,borderRadius:"8px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:A=>A.target.style.background="rgba(251, 251, 251, 0.15)",onMouseLeave:A=>A.target.style.background="rgba(251, 251, 251, 0.1)",children:"Cancel"}),a.jsx("button",{onClick:g,style:{flex:1,padding:"12px",background:r.accent.primary,color:r.accent.secondary,border:"none",borderRadius:"8px",fontWeight:"700",cursor:"pointer",transition:"all 0.2s",boxShadow:n?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},onMouseEnter:A=>A.target.style.opacity="0.9",onMouseLeave:A=>A.target.style.opacity="1",children:" Cash In"})]})]}),p==="notFound"&&a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"4rem",marginBottom:"16px",color:r.accent.primary,animation:"bounceIn 0.5s ease"},children:""}),a.jsx("h3",{style:{color:r.accent.primary,fontSize:"1.5rem",fontWeight:"bold",marginBottom:"12px"},children:"User Not Found"}),a.jsxs("p",{style:{color:r.text.primary,marginBottom:"8px",fontSize:"0.95rem"},children:["RFID ",a.jsx("span",{style:{fontWeight:"bold",color:r.accent.primary},children:i})," is not registered."]}),a.jsx("p",{style:{color:r.text.secondary,marginBottom:"24px",fontSize:"0.95rem"},children:"Do you want to register this user?"}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:b,style:{flex:1,padding:"12px",background:"rgba(251, 251, 251, 0.1)",color:r.text.primary,border:`1px solid rgba(${T}, 0.3)`,borderRadius:"8px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:A=>A.target.style.background="rgba(251, 251, 251, 0.15)",onMouseLeave:A=>A.target.style.background="rgba(251, 251, 251, 0.1)",children:"Cancel"}),a.jsx("button",{onClick:y,style:{flex:1,padding:"12px",background:r.accent.primary,color:r.accent.secondary,border:"none",borderRadius:"8px",fontWeight:"700",cursor:"pointer",transition:"all 0.2s",boxShadow:n?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},onMouseEnter:A=>A.target.style.opacity="0.9",onMouseLeave:A=>A.target.style.opacity="1",children:" Register"})]})]})]})]})}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        @keyframes bounceIn {
          0% {
            opacity: 0;
            transform: scale(0.3);
          }
          50% {
            opacity: 1;
            transform: scale(1.05);
          }
          70% {
            transform: scale(0.9);
          }
          100% {
            transform: scale(1);
          }
        }
      `})]})}function rv({transactions:e=[],onRowClick:t,showHeader:r=!0,showColors:n=!0,compact:s=!1}){$e();const{theme:l,isDarkMode:o}=se(),i=o?"255, 212, 28":"59, 130, 246",d=v=>{const w=!!v.merchantId||v.idNumber&&v.idNumber.startsWith("MER");return v.transactionType==="debit"&&w},u=v=>v.transactionType==="credit"&&!v.merchantId,c=v=>d(v)?v.merchantId||v.idNumber:v.idNumber||"N/A",p=v=>d(v)?`Cash-Out: ${v.businessName||v.userName||v.displayIdNumber||v.merchantId||v.idNumber||"Merchant"}`:u(v)?`Cash-In: ${v.userName||"User"}`:v.description||v.userName||"Transaction",h=v=>{const w=Number(v.amount).toFixed(2);return n?d(v)?`- ${w}`:u(v)?`+ ${w}`:`${w}`:d(v)?`- ${w}`:`${w}`};return a.jsxs("div",{className:"flex flex-col w-full max-w-full",style:{height:s?"300px":"auto",background:l.bg.card,border:`1px solid rgba(${i}, 0.2)`,borderRadius:"12px",overflow:"hidden",boxShadow:o?"0 4px 12px rgba(0,0,0,0.2)":"0 4px 12px rgba(59,130,246,0.1)"},children:[r&&a.jsx("div",{style:{background:l.accent.primary,padding:"8px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:a.jsx("h3",{style:{color:l.accent.secondary,fontWeight:"bold",fontSize:"1rem"},children:" Recent Transactions"})}),e.length===0?a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,textAlign:"center",color:l.text.secondary,padding:"64px 16px"},children:[a.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),a.jsx("div",{children:"No transactions found"})]}):a.jsx("div",{style:{flex:1,overflow:"auto"},children:a.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[a.jsx("thead",{children:a.jsx("tr",{style:{background:`rgba(${i}, 0.1)`},children:["Date","Time","ID Number","Details","Amount","Transaction ID"].map(v=>a.jsx("th",{style:{textAlign:"center",padding:"12px 16px",fontSize:"11px",fontWeight:800,color:l.accent.primary,textTransform:"uppercase",borderBottom:`2px solid rgba(${i}, 0.3)`},children:v},v))})}),a.jsx("tbody",{children:e.map((v,w)=>{const j=h(v);let S=l.text.primary;return n&&(d(v)?S="#EF4444":u(v)&&(S="#10B981")),a.jsxs("tr",{onClick:()=>t==null?void 0:t(v),style:{borderBottom:`1px solid ${l.border.primary}`,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:m=>{m.currentTarget.style.background=l.bg.hover},onMouseLeave:m=>{m.currentTarget.style.background="transparent"},children:[a.jsx("td",{style:{padding:"12px 16px",textAlign:"center",color:l.text.primary},children:v.date}),a.jsx("td",{style:{padding:"12px 16px",textAlign:"center",color:l.text.primary},children:v.time}),a.jsx("td",{style:{padding:"12px 16px",textAlign:"center",color:l.text.primary,fontFamily:"monospace",fontSize:"11px",fontWeight:700},children:c(v)}),a.jsx("td",{style:{padding:"12px 16px",textAlign:"center",color:l.text.secondary},children:p(v)}),a.jsx("td",{style:{padding:"12px 16px",textAlign:"center",fontWeight:"bold",color:S},children:j}),a.jsx("td",{style:{padding:"12px 16px",textAlign:"center",fontFamily:"monospace",fontSize:"11px",color:l.text.secondary},children:v.id})]},v.id||v._id||w)})})]})})]})}function nv(){const e=$e(),{theme:t,isDarkMode:r}=se(),[n,s]=x.useState([]),[l,o]=x.useState(!0),[i,d]=x.useState("dashboard"),u=[{id:"dashboard",label:"Dashboard",icon:"",route:"/admin/treasury/dashboard"},{id:"transactions",label:"Transaction History",icon:"",route:"/admin/treasury/transactions"},{id:"merchants",label:"Merchants",icon:"",route:"/admin/treasury/merchants"},{id:"logs",label:"Logs",icon:"",route:"/admin/treasury/logs"},{id:"concerns",label:"Concerns",icon:"",route:"/admin/treasury/concerns"},{id:"config",label:"Configuration",icon:"",route:"/admin/treasury/config"}];x.useEffect(()=>{async function p(){try{o(!0);const v=await Xd();if(v.success){const w=v.transactions.map(j=>{const S=new Date(j.createdAt);return{date:S.toLocaleDateString("en-GB"),time:S.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),amount:j.amount,idNumber:j.idNumber,userName:j.userName,email:j.email,transactionType:j.transactionType,status:j.status,balance:j.balance,id:j.transactionId||j._id,_id:j._id,admin:j.admin,createdAt:j.createdAt}});s(w)}}catch(v){console.error("Failed to load transactions:",v)}finally{o(!1)}}p();const h=setInterval(p,5e3);return()=>clearInterval(h)},[]);const c=n.slice(0,6);return a.jsxs("div",{style:{minHeight:"100vh",background:t.bg.primary,display:"flex",flexDirection:"column"},children:[a.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3},children:a.jsx(Wt,{})}),a.jsxs("div",{style:{flex:1,padding:"32px",overflowY:"auto"},children:[a.jsx(Yt,{tabs:u,currentTab:i,onTabChange:p=>{d(p.id),p.route&&e(p.route)}}),i==="dashboard"&&a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{style:{borderColor:t.border.primary},className:"mb-8 border-b-2 pb-5",children:[a.jsxs("h2",{style:{color:t.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-3",children:[a.jsx("span",{children:""})," Treasury Dashboard"]}),a.jsx("p",{style:{color:t.text.secondary},className:"text-sm m-0",children:"Real-time treasury analytics  Manage cash-ins and user registrations"})]}),a.jsx("div",{className:"mb-8",children:a.jsx(Zg,{})}),a.jsxs("div",{className:"grid grid-cols-2 gap-5 flex-1",children:[a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsx(tv,{}),a.jsx(av,{})]}),a.jsx("div",{className:"flex flex-col",children:a.jsx(rv,{transactions:c,loading:l,showHeader:!0,showColors:!0,compact:!1})})]})]})]}),a.jsx(bt,{})]})}const Ci="treasury_amount_options";function sv(){var st,lt,ot,it,je;const e=$e(),t=Ye(),{backendUrl:r}=x.useContext(Nn),{theme:n,isDarkMode:s}=se(),l=((st=t.state)==null?void 0:st.user)||null,[o,i]=x.useState(l?1:0),[d,u]=x.useState((l==null?void 0:l.rfidUid)||(l==null?void 0:l.rfid)||""),[c,p]=x.useState(null),[h,v]=x.useState(""),[w,j]=x.useState(!1),[S,m]=x.useState(null),[b,g]=x.useState(!1),[y,T]=x.useState(!1),[R,z]=x.useState([]),[A,I]=x.useState([]);x.useEffect(()=>{try{const G=JSON.parse(localStorage.getItem(Ci))||[];z(G),I(G)}catch{z([]),I([])}},[]);const[L,M]=x.useState(null),[k,q]=x.useState(null),[D,_]=x.useState(!1),[B,U]=x.useState(""),[F,f]=x.useState([]),E=x.useCallback(async G=>{if(G){g(!0);try{const he=await Ee.get(`${r}/api/treasury/search-user/${G}`,{withCredentials:!0});if(he.data.success){const de=he.data.user;p({...de,schoolUId:de.schoolUId||de.schoolUid||de.school_uid||de.school_id_number||de.idNumber||"N/A",firstName:de.firstName||de.first_name||"",lastName:de.lastName||de.last_name||"",middleName:de.middleName||de.mid_name||"",rfidUid:de.rfidUid||de.rfid_uid||de.rfid||"",isActive:de.isActive??de.active??!1,isVerified:de.isVerified??de.verified??!1})}else X.error("User not found"),e("/admin/treasury/dashboard")}catch{X.error("Failed to fetch user information"),e("/admin/treasury/dashboard")}finally{g(!1)}}},[r,e]);x.useEffect(()=>{if(l){const G=l.rfidUid||l.rfid_uid||l.rfid;u(G),E(G)}else X.error("No user selected. Please scan RFID first."),e("/admin/treasury/dashboard")},[l,e,E]);const N=d?"*".repeat(d.length):"",W=()=>{if(!c)return X.error("User information not available");if(!c.isActive)return X.error("Cannot cash in. User must change temporary PIN first.");if(!h||parseFloat(h)<=0)return X.error("Please select or enter a valid amount");i(2)},O=async()=>{var G,he;if(!c.isActive){X.error("Cannot cash in. User account is inactive."),i(1);return}j(!0);try{const de=await Ee.post(`${r}/api/treasury/cash-in`,{rfid:c.rfidUid||c.rfid,amount:parseFloat(h)},{withCredentials:!0});de.data.success?(m({transaction:de.data.transaction,user:de.data.user}),X.success("Cash in successful!"),i(3)):X.error(de.data.message||"Cash in failed")}catch(de){X.error(((he=(G=de.response)==null?void 0:G.data)==null?void 0:he.message)||"An error occurred during cash in")}finally{j(!1)}},P=()=>e("/admin/treasury/dashboard"),Q=G=>{const he=R.filter((de,t2)=>t2!==G);z(he),h==R[G]&&v("")},ee=G=>M(G),Y=(G,he)=>{G.preventDefault(),!(L===null||L===he)&&q(he)},C=G=>{if(L===null||L===G)return;const he=[...R],[de]=he.splice(L,1);he.splice(G,0,de),z(he),localStorage.setItem(Ci,JSON.stringify(he)),M(null),q(null)},V=()=>{M(null),q(null)},Z=()=>{const G=parseFloat(B);if(!B||isNaN(G)||G<=0){X.error("Please enter a valid amount");return}if(R.includes(G)){X.error("This amount already exists");return}if(R.length>=6){X.error("Maximum 6 amount options allowed");return}z([...R,G]),U(""),_(!1),X.success("Amount added successfully")},ve=()=>{F.length&&window.confirm("Discard changes and reset?")&&(z([...F]),v(""))},Fe=()=>{if(console.log("DONE clicked, saving:",R),R.length!==6)return X.error("You must have exactly 6 amounts before saving.");I([...R]),localStorage.setItem(Ci,JSON.stringify(R)),T(!1)},et=()=>c&&([c.firstName,c.middleName,c.lastName].filter(Boolean).join(" ")||c.name)||"N/A",vt=[{id:"dashboard",label:"Dashboard",icon:"",route:"/admin/treasury/dashboard"},{id:"transactions",label:"Transaction History",icon:"",route:"/admin/treasury/transactions"},{id:"merchants",label:"Merchants",icon:"",route:"/admin/treasury/merchants"},{id:"logs",label:"Logs",icon:"",route:"/admin/treasury/logs"},{id:"concerns",label:"Concerns",icon:"",route:"/admin/treasury/concerns"},{id:"config",label:"Configuration",icon:"",route:"/admin/treasury/config"}];return a.jsxs("div",{style:{minHeight:"100vh",background:n.bg.primary,display:"flex",flexDirection:"column"},children:[a.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3},children:a.jsx(Wt,{})}),a.jsxs("div",{style:{flex:1,padding:"32px",overflowY:"auto"},children:[a.jsx(Yt,{tabs:vt,currentTab:"cashin",onTabChange:G=>{G.route&&e(G.route)}}),a.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[a.jsx("button",{onClick:P,className:"text-yellow-400 hover:text-yellow-300 transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("h1",{className:"text-xl font-bold text-white",children:"Cash In Form"})]}),a.jsx("div",{className:"w-full h-[2px] bg-yellow-400/80"})]}),a.jsxs("div",{className:"max-w-7xl mx-auto px-6 w-full flex-1",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx("div",{className:"flex items-center gap-4",children:[1,2,3].map((G,he)=>a.jsxs(xe.Fragment,{children:[a.jsxs("div",{className:`flex items-center gap-2 ${o>=G?"text-yellow-400":"text-slate-500"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold transition-all ${o>=G?"bg-yellow-400 text-slate-900 shadow-lg shadow-yellow-400/50":"bg-slate-700 border-2 border-slate-600"}`,children:G}),a.jsx("span",{className:"font-semibold hidden sm:inline",children:G===1?"Details":G===2?"Confirm":"Complete"})]}),he<2&&a.jsx("div",{className:`w-12 sm:w-24 h-1 rounded transition-all ${o>G?"bg-yellow-400":"bg-slate-700"}`})]},G))})}),a.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[(o===0||o===1)&&a.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-xl border border-slate-700/50 overflow-hidden flex flex-col",children:[a.jsx("div",{className:"bg-gradient-to-r from-yellow-400/20 to-yellow-500/20 border-b border-yellow-400/30 px-5 py-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),a.jsx("h2",{className:"text-lg font-bold text-yellow-400",children:"User Information"})]})}),a.jsxs("div",{className:"p-4 space-y-3 flex-1",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/40 to-purple-900/40 p-3 rounded-xl border border-blue-500/30",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),a.jsx("span",{className:"text-blue-300 font-semibold text-xs uppercase tracking-wider",children:"RFID Card"})]}),a.jsx("div",{className:"font-mono text-xl text-white tracking-widest",children:N})]}),c?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-lg bg-slate-900/50 hover:bg-slate-900/70 transition-colors",children:[a.jsx("svg",{className:"w-4 h-4 text-yellow-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-slate-400 text-xs uppercase tracking-wide mb-0.5",children:"Full Name"}),a.jsx("div",{className:"text-white font-semibold text-sm truncate",children:et()})]})]}),a.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-lg bg-slate-900/50 hover:bg-slate-900/70 transition-colors",children:[a.jsx("svg",{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-slate-400 text-xs uppercase tracking-wide mb-0.5",children:"School ID"}),a.jsx("div",{className:"text-white font-semibold text-sm",children:c.schoolUId})]})]}),a.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-lg bg-slate-900/50 hover:bg-slate-900/70 transition-colors",children:[a.jsx("svg",{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-slate-400 text-xs uppercase tracking-wide mb-0.5",children:"Email Address"}),a.jsx("div",{className:"text-white font-semibold text-xs truncate",children:c.email})]})]}),a.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-lg bg-slate-900/50 hover:bg-slate-900/70 transition-colors",children:[a.jsx("svg",{className:"w-4 h-4 text-purple-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-slate-400 text-xs uppercase tracking-wide mb-0.5",children:"Role"}),a.jsx("div",{className:"text-white font-semibold text-sm",children:c.role==="student"?"Student":"Employee"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-500/30",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{className:"text-green-300 font-semibold text-sm",children:"Account Status"})]}),a.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${c.isActive?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:c.isActive?"ACTIVE":"INACTIVE"})]})]}):a.jsxs("div",{className:"bg-red-900/30 border border-red-500 text-red-200 p-3 rounded-lg",children:[a.jsx("p",{className:"font-semibold text-sm",children:"No user selected"}),a.jsx("p",{className:"text-xs",children:"Please go back to dashboard and select a user."})]})]})]}),a.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-xl border border-slate-700/50 overflow-hidden flex flex-col",children:[a.jsx("div",{className:"bg-gradient-to-r from-yellow-400/20 to-yellow-500/20 border-b border-yellow-400/30 px-5 py-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("h2",{className:"text-lg font-bold text-yellow-400",children:"Select Amount"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[y&&a.jsx("button",{onClick:ve,className:"text-yellow-400 hover:text-yellow-300 text-xs transition-colors",children:" Reset"}),a.jsxs("button",{onClick:()=>{y?Fe():(f([...R]),T(!0))},className:`flex items-center gap-1 px-2 py-1 rounded-lg bg-yellow-400/10 hover:bg-yellow-400/20 text-yellow-400 transition-colors text-xs font-semibold ${y&&R.length!==6?"opacity-40 cursor-not-allowed":""}`,disabled:y&&R.length!==6,children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),y?"Done":"Edit"]})]})]})}),a.jsxs("div",{className:"p-4 space-y-3 flex-1 flex flex-col",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[R.map((G,he)=>a.jsx("div",{draggable:y,onDragStart:()=>ee(he),onDragOver:de=>Y(de,he),onDrop:()=>C(he),onDragEnd:V,className:`relative group ${k===he?"scale-105":""}`,children:a.jsxs("button",{onClick:()=>!y&&(c==null?void 0:c.isActive)&&v(G.toString()),disabled:!c&&!y||b||!y&&!(c!=null&&c.isActive),className:`w-full py-3 rounded-xl font-bold text-base transition-all relative overflow-hidden ${y?"bg-slate-700/50 text-white border-2 border-dashed border-yellow-400/50 cursor-move":h==G?"bg-gradient-to-br from-yellow-400 to-yellow-500 text-slate-900 shadow-lg shadow-yellow-400/30 scale-105":c&&c.isActive?"bg-slate-700/50 text-white hover:bg-slate-600/50 hover:scale-105 border border-slate-600":"bg-slate-700/30 text-slate-500 cursor-not-allowed border border-slate-600"}`,children:[y&&a.jsx("div",{className:"absolute top-1.5 left-1.5",children:a.jsx("svg",{className:"w-3 h-3 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})}),"",G.toLocaleString(),y&&a.jsx("button",{onClick:de=>{de.stopPropagation(),Q(he)},className:"absolute top-1.5 right-1.5 p-0.5 bg-red-500/80 hover:bg-red-500 rounded-full transition-colors",children:a.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},he)),R.length<6&&y&&a.jsxs("button",{onClick:()=>_(!0),className:"py-3 rounded-xl font-bold bg-slate-700/30 text-yellow-400 hover:bg-slate-700/50 border-2 border-dashed border-yellow-400/50 transition-all flex items-center justify-center gap-1.5 text-sm",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})]}),!y&&a.jsxs("div",{className:"space-y-3 mt-auto",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-slate-300 font-semibold block mb-1.5 text-xs",children:"Or enter custom amount:"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 font-bold text-base",children:""}),a.jsx("input",{type:"number",placeholder:"0.00",value:h&&!R.includes(parseFloat(h))?h:"",onChange:G=>v(G.target.value),disabled:!c||b||!(c!=null&&c.isActive),className:"w-full pl-8 pr-3 py-2.5 rounded-xl bg-slate-900/50 text-white border border-slate-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/20 outline-none transition-all text-base font-semibold disabled:opacity-50 disabled:cursor-not-allowed"})]})]}),a.jsx("button",{onClick:W,disabled:!c||!h||parseFloat(h)<=0||!c.isActive,className:"w-full py-3 rounded-xl font-bold text-base transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-slate-900 shadow-lg shadow-yellow-400/30 disabled:shadow-none",children:c!=null&&c.isActive?"Continue to Confirmation ":" User Account Inactive"})]})]})]})]}),o===2&&a.jsx("div",{className:"max-w-xl mx-auto",children:a.jsxs("div",{className:"bg-slate-00/50 backdrop-blur-sm rounded-2xl shadow-xl border border-slate-700/50 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-yellow-400/20 to-yellow-500/20 border-b border-yellow-400/30 px-6 py-2",children:a.jsx("h2",{className:"text-lg font-bold text-yellow-400",children:"Confirm Transaction"})}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"bg-slate-900/50 rounded-xl p-5 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-slate-700",children:[a.jsx("span",{className:"text-slate-400 font-medium",children:"User"}),a.jsx("span",{className:"text-white font-semibold",children:et()})]}),a.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-slate-700",children:[a.jsx("span",{className:"text-slate-400 font-medium",children:"School ID"}),a.jsx("span",{className:"text-white font-semibold",children:c==null?void 0:c.schoolUId})]}),a.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-slate-700",children:[a.jsx("span",{className:"text-slate-400 font-medium",children:"Email"}),a.jsx("span",{className:"text-white font-semibold text-sm",children:c==null?void 0:c.email})]}),a.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-slate-700",children:[a.jsx("span",{className:"text-slate-400 font-medium",children:"RFID"}),a.jsx("span",{className:"text-white font-mono",children:"*".repeat(((lt=c==null?void 0:c.rfidUid)==null?void 0:lt.length)||0)})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2",children:[a.jsx("span",{className:"text-yellow-400 font-bold text-lg",children:"Cash-In Amount"}),a.jsxs("span",{className:"text-yellow-400 font-bold text-2xl",children:["",parseFloat(h).toLocaleString()]})]})]}),a.jsx("div",{className:"bg-yellow-900/20 border-l-4 border-yellow-400 p-1 rounded-r-xl",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("svg",{className:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsx("div",{className:"text-yellow-200 text-sm space-y-1",children:a.jsx("p",{className:"font-semibold",children:"Please verify all details before confirming"})})]})}),a.jsxs("div",{className:"flex gap-3 pd-0",children:[a.jsx("button",{onClick:()=>i(1),disabled:w,className:"flex-1 py-3 rounded-xl font-semibold bg-slate-700 hover:bg-slate-600 text-white transition-colors disabled:opacity-50",children:" Back"}),a.jsx("button",{onClick:O,disabled:w,className:"flex-1 py-3 rounded-xl font-bold bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-slate-900 shadow-lg shadow-yellow-400/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Processing Cash-In...":" Confirm Transaction"})]})]})]})}),o===3&&S&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-xl border border-green-500/30 overflow-hidden w-full max-w-lg",children:[a.jsxs("div",{className:"bg-gradient-to-r from-green-500/20 to-emerald-500/20 border-b border-green-400/30 px-4 py-4 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-green-400 mb-2",children:"Transaction Successful!"}),a.jsx("p",{className:"text-slate-300",children:"Cash-in completed successfully"})]}),a.jsxs("div",{className:"p-6 pt-0 space-y-5",children:[a.jsxs("div",{className:"bg-slate-900/50 rounded-xl p-5 space-y-3",children:[a.jsxs("div",{className:"text-center pb-3 border-b border-slate-700",children:[a.jsx("div",{className:"text-slate-400 text-sm mb-1",children:"Amount Added"}),a.jsxs("div",{className:"text-green-400 text-3xl font-bold",children:["+",parseFloat(h).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"User"}),a.jsx("span",{className:"text-white font-semibold",children:et()})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"School ID"}),a.jsx("span",{className:"text-white font-semibold",children:c.schoolUId})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"RFID"}),a.jsx("span",{className:"text-white font-mono",children:N})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Email"}),a.jsx("span",{className:"text-white font-semibold",children:c.email})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Transaction ID"}),a.jsx("span",{className:"text-yellow-400 font-mono text-xs",children:((ot=S.transaction)==null?void 0:ot.transactionId)||((it=S.transaction)==null?void 0:it.transaction_id)||"N/A"})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Status"}),a.jsx("span",{className:"text-green-400 font-semibold",children:((je=S.transaction)==null?void 0:je.status)||"Completed"})]})]}),a.jsx("button",{onClick:P,className:"w-full py-3 rounded-xl font-bold bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-slate-900 shadow-lg shadow-yellow-400/30 transition-all",children:"Go to Dashboard"})]})]})})]})]}),D&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-slate-800 rounded-2xl w-full max-w-md shadow-2xl border border-slate-700 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-yellow-400/20 to-yellow-500/20 border-b border-yellow-400/30 px-6 py-4",children:a.jsx("h3",{className:"text-xl font-bold text-yellow-400",children:"Add New Amount"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-slate-300 font-semibold block mb-2",children:"Enter Amount:"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold text-lg",children:""}),a.jsx("input",{type:"number",placeholder:"0.00",value:B,onChange:G=>U(G.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl bg-slate-900 text-white border border-slate-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/20 outline-none transition-all text-lg font-semibold",min:"1",step:"0.01",autoFocus:!0,onKeyDown:G=>G.key==="Enter"&&Z()})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:Z,className:"flex-1 py-3 rounded-xl font-bold bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-slate-900 transition-all",children:"Add Amount"}),a.jsx("button",{onClick:()=>{_(!1),U("")},className:"flex-1 py-3 rounded-xl font-semibold bg-slate-700 hover:bg-slate-600 text-white transition-colors",children:"Cancel"})]})]})]})})]}),a.jsx(bt,{})]})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=e=>{const t=ov(e);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:l,iconNode:o,...i},d)=>x.createElement("svg",{ref:d,...iv,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Kg("lucide",s),...!l&&!cv(i)&&{"aria-hidden":"true"},...i},[...o.map(([u,c])=>x.createElement(u,c)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=(e,t)=>{const r=x.forwardRef(({className:n,...s},l)=>x.createElement(dv,{ref:l,iconNode:t,className:Kg(`lucide-${lv(Zp(e))}`,`lucide-${e}`,n),...s}));return r.displayName=Zp(e),r};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Kp=ka("building-2",uv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ni=ka("check",pv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],lr=ka("circle-alert",xv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Jp=ka("credit-card",fv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ex=ka("mail",gv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],mv=ka("send",hv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],tx=ka("shield",bv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ti=ka("user",yv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jv=ka("x",vv);function Sv(){const e=$e(),t=Ye(),{backendUrl:r}=x.useContext(Nn),{theme:n,isDarkMode:s}=se(),[l,o]=x.useState(1),[i,d]=x.useState(""),[u,c]=x.useState(""),[p,h]=x.useState(""),[v,w]=x.useState(""),[j,S]=x.useState(""),[m,b]=x.useState(""),[g,y]=x.useState(""),[T,R]=x.useState(!1),[z,A]=x.useState(null),[I,L]=x.useState({}),M=[{value:"student",label:"Student"},{value:"employee",label:"Employee"}];x.useEffect(()=>{var O,P;if((O=t.state)!=null&&O.rfid||(P=t.state)!=null&&P.rfidUId){const Q=t.state.rfidUId||t.state.rfid;console.log(" RFID received from modal:",Q),b(Q)}else console.warn(" No RFID received from location.state"),X.warning("No RFID provided. Please go back and scan RFID first.")},[t.state]);const k=()=>[i,u,p].filter(O=>O.trim()).join(" "),q=O=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O),D=O=>{L({...I,[O]:!0})},_=O=>{if(!I[O])return null;switch(O){case"firstName":return i.trim()?null:"First name is required";case"lastName":return p.trim()?null:"Last name is required";case"schoolUId":return v.trim()?null:"School ID is required";case"email":return j.trim()?q(j)?null:"Invalid email format":"Email is required";case"role":return g?null:"User type is required";default:return null}},B=()=>i.trim()&&p.trim()&&v.trim()&&j.trim()&&q(j)&&g&&m,U=()=>{const O=["firstName","lastName","schoolUId","email","role"],P={};if(O.forEach(Q=>P[Q]=!0),L(P),!m||m.trim()===""){X.error("RFID is missing. Please go back to dashboard and scan RFID.");return}B()&&o(2)},F=()=>Math.floor(1e5+Math.random()*9e5).toString(),f=async()=>{var O,P;try{if(R(!0),!m||m.trim()===""){X.error("RFID is required. Please scan the RFID card again."),e("/admin/treasury/dashboard");return}const Q=F();console.log(" Sending registration data:",{firstName:i,lastName:p,middleName:u,schoolUId:v,email:j,role:g,rfidUId:m?`${m.substring(0,3)}***`:"EMPTY",hasPin:!!Q,endpoint:`${r}/api/treasury/register`});const ee=await Ee.post(`${r}/api/treasury/register`,{firstName:i.trim(),lastName:p.trim(),middleName:u.trim(),email:j.trim(),rfidUId:m.trim(),schoolUId:v.trim(),role:g,pin:Q},{withCredentials:!0});ee.data.success?(console.log(" Registration successful:",ee.data),A({firstName:i,middleName:u,lastName:p,fullName:k(),email:j,schoolUId:v,role:g,tempPin:Q,emailSent:ee.data.emailSent}),X.success("User registered successfully!"),ee.data.emailSent?X.info("Temporary 6-digit PIN sent to user's email"):ee.data.emailError&&X.warning("User registered but email failed to send. Please provide PIN manually."),o(3)):X.error(ee.data.message||"Failed to register user")}catch(Q){console.error(" Registration error:",Q),(P=(O=Q.response)==null?void 0:O.data)!=null&&P.message?X.error(Q.response.data.message):X.error("Server error occurred during registration")}finally{R(!1)}},E=()=>({student:"Student",employee:"Employee"})[g]||"Not Selected",N=()=>e("/admin/treasury/dashboard"),W=[{id:"dashboard",label:"Dashboard",icon:"",route:"/admin/treasury/dashboard"},{id:"transactions",label:"Transaction History",icon:"",route:"/admin/treasury/transactions"},{id:"merchants",label:"Merchants",icon:"",route:"/admin/treasury/merchants"},{id:"logs",label:"Logs",icon:"",route:"/admin/treasury/logs"},{id:"concerns",label:"Concerns",icon:"",route:"/admin/treasury/concerns"},{id:"config",label:"Configuration",icon:"",route:"/admin/treasury/config"}];return a.jsxs("div",{style:{minHeight:"100vh",background:n.bg.primary,display:"flex",flexDirection:"column"},children:[a.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3},children:a.jsx(Wt,{})}),a.jsxs("div",{style:{flex:1,padding:"32px",overflowY:"auto"},children:[a.jsx(Yt,{tabs:W,currentTab:"register",onTabChange:O=>{O.route&&e(O.route)}}),a.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[a.jsx("button",{onClick:N,className:"text-yellow-400 hover:text-yellow-300 transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("h1",{className:"text-xl font-bold text-white",children:"User Registration Form"})]}),a.jsx("div",{className:"w-full h-[2px] bg-yellow-400"})]}),a.jsx("div",{className:"flex items-center justify-center mb-8",children:a.jsx("div",{className:"flex items-center gap-4",children:[1,2,3].map((O,P)=>a.jsxs(xe.Fragment,{children:[a.jsxs("div",{className:`flex items-center gap-2 ${l>=O?"text-yellow-400":"text-slate-500"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold transition-all ${l>=O?"bg-yellow-400 text-slate-900 shadow-lg shadow-yellow-400/50":"bg-slate-700 border-2 border-slate-600"}`,children:l>O?a.jsx(Ni,{size:20}):O}),a.jsx("span",{className:"font-semibold hidden sm:inline",children:O===1?"Details":O===2?"Confirm":"Complete"})]}),P<2&&a.jsx("div",{className:`w-12 sm:w-24 h-1 rounded transition-all ${l>O?"bg-yellow-400":"bg-slate-700"}`})]},O))})}),a.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[l===1&&a.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-xl border border-slate-700/50 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-yellow-400/20 to-yellow-500/20 border-b border-yellow-400/30 px-5 py-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ti,{className:"w-5 h-5 text-yellow-400"}),a.jsx("h2",{className:"text-lg font-bold text-yellow-400",children:"Personal Information"})]})}),a.jsxs("div",{className:"p-5 space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-slate-300 font-semibold text-sm flex items-center gap-2",children:["First Name",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"text",value:i,onChange:O=>d(O.target.value),onBlur:()=>D("firstName"),className:`w-full px-4 py-2.5 rounded-xl bg-slate-900/50 text-white border transition-all outline-none ${_("firstName")?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/20":"border-slate-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/20"}`,placeholder:"e.g., Juan"}),_("firstName")&&a.jsxs("p",{className:"text-red-400 text-xs flex items-center gap-1",children:[a.jsx(lr,{size:12}),_("firstName")]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-slate-300 font-semibold text-sm flex items-center gap-2",children:["Middle Name ",a.jsx("span",{className:"text-slate-500 text-xs",children:"(Optional)"})]}),a.jsx("input",{type:"text",value:u,onChange:O=>c(O.target.value),className:"w-full px-4 py-2.5 rounded-xl bg-slate-900/50 text-white border border-slate-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/20 outline-none transition-all",placeholder:"e.g., Dela"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-slate-300 font-semibold text-sm flex items-center gap-2",children:["Last Name",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"text",value:p,onChange:O=>h(O.target.value),onBlur:()=>D("lastName"),className:`w-full px-4 py-2.5 rounded-xl bg-slate-900/50 text-white border transition-all outline-none ${_("lastName")?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/20":"border-slate-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/20"}`,placeholder:"e.g., Cruz"}),_("lastName")&&a.jsxs("p",{className:"text-red-400 text-xs flex items-center gap-1",children:[a.jsx(lr,{size:12}),_("lastName")]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-slate-300 font-semibold text-sm flex items-center gap-2",children:["User Type",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("select",{value:g,onChange:O=>y(O.target.value),onBlur:()=>D("role"),className:`w-full px-4 py-2.5 rounded-xl bg-slate-900/50 text-white border transition-all outline-none ${_("role")?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/20":"border-slate-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/20"}`,children:[a.jsx("option",{value:"",children:"-- Select User Type --"}),M.map(O=>a.jsx("option",{value:O.value,children:O.label},O.value))]}),_("role")&&a.jsxs("p",{className:"text-red-400 text-xs flex items-center gap-1",children:[a.jsx(lr,{size:12}),_("role")]})]})]})]}),a.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-xl border border-slate-700/50 overflow-hidden flex flex-col",children:[a.jsx("div",{className:"bg-gradient-to-r from-yellow-400/20 to-yellow-500/20 border-b border-yellow-400/30 px-5 py-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(tx,{className:"w-5 h-5 text-yellow-400"}),a.jsx("h2",{className:"text-lg font-bold text-yellow-400",children:"Account Details"})]})}),a.jsxs("div",{className:"p-5 space-y-4 flex-1 flex flex-col",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/40 to-purple-900/40 p-4 rounded-xl border border-blue-500/30",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Jp,{className:"w-4 h-4 text-blue-400"}),a.jsx("span",{className:"text-blue-300 font-semibold text-xs uppercase tracking-wider",children:"RFID Card"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"font-mono text-xl text-white tracking-widest",children:m?"*".repeat(m.length):"Not Scanned"}),m&&a.jsxs("div",{className:"flex items-center gap-1 text-green-400 text-xs",children:[a.jsx(Ni,{size:14}),a.jsx("span",{children:"Scanned"})]})]})]}),!m&&a.jsx("div",{className:"bg-red-900/20 border-l-4 border-red-400 p-3 rounded-r-xl",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(lr,{className:"w-4 h-4 text-red-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-red-200 text-xs",children:[a.jsx("p",{className:"font-semibold",children:" Warning: No RFID detected"}),a.jsx("p",{className:"mt-1",children:"Please go back to dashboard and scan RFID card first."})]})]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-slate-300 font-semibold text-sm flex items-center gap-2",children:[a.jsx(Kp,{size:16,className:"text-slate-400"}),"School ID Number",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:v,onChange:O=>{const P=O.target.value.replace(/\D/g,"");w(P)},onBlur:()=>D("schoolUId"),className:`w-full px-4 py-2.5 rounded-xl bg-slate-900/50 text-white border transition-all outline-none ${_("schoolUId")?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/20":"border-slate-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/20"}`,placeholder:"e.g., 2021123456"}),_("schoolUId")&&a.jsxs("p",{className:"text-red-400 text-xs flex items-center gap-1",children:[a.jsx(lr,{size:12}),_("schoolUId")]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-slate-300 font-semibold text-sm flex items-center gap-2",children:[a.jsx(ex,{size:16,className:"text-slate-400"}),"Email Address",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"email",value:j,onChange:O=>S(O.target.value),onBlur:()=>D("email"),className:`w-full px-4 py-2.5 rounded-xl bg-slate-900/50 text-white border transition-all outline-none ${_("email")?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/20":"border-slate-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/20"}`,placeholder:"user@example.com"}),_("email")&&a.jsxs("p",{className:"text-red-400 text-xs flex items-center gap-1",children:[a.jsx(lr,{size:12}),_("email")]})]}),a.jsx("button",{onClick:U,disabled:!B(),className:"w-full py-3 rounded-xl font-bold text-base transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-slate-900 shadow-lg shadow-yellow-400/30 disabled:shadow-none mt-auto",children:"Continue to Confirmation "})]})]})]}),l===2&&a.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-xl border border-slate-700/50 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-yellow-400/20 to-yellow-500/20 border-b border-yellow-400/30 px-5 py-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ti,{className:"w-5 h-5 text-yellow-400"}),a.jsx("h2",{className:"text-lg font-bold text-yellow-400",children:"Personal Information"})]})}),a.jsxs("div",{className:"p-5 space-y-3",children:[a.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-slate-900/50 hover:bg-slate-900/70 transition-colors",children:[a.jsx(Ti,{className:"w-4 h-4 text-yellow-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-slate-400 text-xs uppercase tracking-wide mb-0.5",children:"Full Name"}),a.jsx("div",{className:"text-white font-semibold text-sm",children:k()})]})]}),a.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-slate-900/50 hover:bg-slate-900/70 transition-colors",children:[a.jsx("div",{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0",children:""}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-slate-400 text-xs uppercase tracking-wide mb-0.5",children:"First Name"}),a.jsx("div",{className:"text-white font-semibold text-sm",children:i})]})]}),u&&a.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-slate-900/50 hover:bg-slate-900/70 transition-colors",children:[a.jsx("div",{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0",children:""}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-slate-400 text-xs uppercase tracking-wide mb-0.5",children:"Middle Name"}),a.jsx("div",{className:"text-white font-semibold text-sm",children:u})]})]}),a.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-slate-900/50 hover:bg-slate-900/70 transition-colors",children:[a.jsx("div",{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0",children:""}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-slate-400 text-xs uppercase tracking-wide mb-0.5",children:"Last Name"}),a.jsx("div",{className:"text-white font-semibold text-sm",children:p})]})]}),a.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-slate-900/50 hover:bg-slate-900/70 transition-colors",children:[a.jsx("div",{className:"w-4 h-4 text-purple-400 mt-0.5 flex-shrink-0",children:a.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-slate-400 text-xs uppercase tracking-wide mb-0.5",children:"User Type"}),a.jsx("div",{className:"text-yellow-400 font-semibold text-sm",children:E()})]})]})]})]}),a.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-xl border border-slate-700/50 overflow-hidden flex flex-col",children:[a.jsx("div",{className:"bg-gradient-to-r from-yellow-400/20 to-yellow-500/20 border-b border-yellow-400/30 px-5 py-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(tx,{className:"w-5 h-5 text-yellow-400"}),a.jsx("h2",{className:"text-lg font-bold text-yellow-400",children:"Account Details"})]})}),a.jsxs("div",{className:"p-5 space-y-3 flex-1 flex flex-col",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/40 to-purple-900/40 p-3 rounded-xl border border-blue-500/30",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Jp,{className:"w-4 h-4 text-blue-400"}),a.jsx("span",{className:"text-blue-300 font-semibold text-xs uppercase tracking-wider",children:"RFID Card"})]}),a.jsx("div",{className:"font-mono text-xl text-white tracking-widest",children:"*".repeat(m.length)})]}),a.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-slate-900/50 hover:bg-slate-900/70 transition-colors",children:[a.jsx(Kp,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-slate-400 text-xs uppercase tracking-wide mb-0.5",children:"School ID"}),a.jsx("div",{className:"text-white font-semibold text-sm",children:v})]})]}),a.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-slate-900/50 hover:bg-slate-900/70 transition-colors",children:[a.jsx(ex,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-slate-400 text-xs uppercase tracking-wide mb-0.5",children:"Email Address"}),a.jsx("div",{className:"text-white font-semibold text-xs truncate",children:j})]})]}),a.jsx("div",{className:"bg-yellow-900/20 border-l-4 border-yellow-400 p-3 rounded-r-xl mt-auto",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(lr,{className:"w-4 h-4 text-yellow-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-yellow-200 text-xs space-y-1",children:[a.jsx("p",{className:"font-semibold",children:"Please verify all information before confirming."}),a.jsx("p",{children:"A temporary PIN will be generated and sent to the user's email."})]})]})}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{onClick:()=>o(1),disabled:T,className:"flex-1 py-3 rounded-xl font-semibold bg-slate-700 hover:bg-slate-600 text-white transition-colors disabled:opacity-50",children:" Back"}),a.jsx("button",{onClick:f,disabled:T,className:"flex-1 py-3 rounded-xl font-bold bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-slate-900 shadow-lg shadow-yellow-400/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:T?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-slate-900"}),a.jsx("span",{children:"Registering..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ni,{size:18}),a.jsx("span",{children:"Confirm"})]})})]})]})]})]}),l===3&&z&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-xl border border-green-500/30 overflow-hidden w-full max-w-lg",children:[a.jsxs("div",{className:"bg-gradient-to-r from-green-500/20 to-emerald-500/20 border-b border-green-400/30 px-4 py-4 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-green-400 mb-2",children:"Registration Successful"}),a.jsx("p",{className:"text-slate-300",children:"User has been successfully registered"})]}),a.jsxs("div",{className:"p-6 space-y-5",children:[a.jsxs("div",{className:"bg-slate-900/50 rounded-xl p-5 space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Full Name"}),a.jsx("span",{className:"text-white font-semibold",children:z.fullName})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"School ID"}),a.jsx("span",{className:"text-white font-semibold",children:z.schoolUId})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Email"}),a.jsx("span",{className:"text-white font-semibold",children:z.email})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"User Type"}),a.jsx("span",{className:"text-yellow-400 font-semibold",children:E()})]}),a.jsxs("div",{className:"flex justify-between text-sm pt-3 border-t border-slate-700",children:[a.jsx("span",{className:"text-slate-400",children:"Account Status"}),a.jsx("span",{className:"text-orange-400 font-semibold",children:"Inactive (PIN Change Required)"})]})]}),z.emailSent?a.jsx("div",{className:"bg-green-900/20 border-l-4 border-green-400 p-4 rounded-r-xl",children:a.jsx("p",{className:"text-green-200 text-sm font-semibold",children:"Temporary PIN has been sent to the user's email."})}):a.jsxs("div",{className:"bg-orange-900/20 border-l-4 border-orange-400 p-4 rounded-r-xl",children:[a.jsx("p",{className:"text-orange-200 text-sm font-semibold",children:"Email failed to send. Provide this PIN manually:"}),a.jsx("div",{className:"font-mono font-bold text-2xl text-white bg-slate-900 p-3 rounded-lg mt-2 text-center tracking-widest",children:z.tempPin})]}),a.jsx("button",{onClick:N,className:"w-full py-3 rounded-xl font-bold bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-slate-900 shadow-lg shadow-yellow-400/30 transition-all",children:"Go to Dashboard"})]})]})})]})]})]}),a.jsx(bt,{})]})}function wv(){const e=$e(),{theme:t,isDarkMode:r}=se(),[n,s]=x.useState([]),[l,o]=x.useState(!0),[i,d]=x.useState(""),[u,c]=x.useState(""),[p,h]=x.useState(""),[v,w]=x.useState(""),[j,S]=x.useState(1),m=20,b=async()=>{try{const k=await Xd({startDate:p,endDate:v,transactionType:u,search:i});k.success&&s(k.transactions||[]),o(!1)}catch(k){console.error("Error loading transactions:",k),X.error("Failed to load transactions"),o(!1)}};x.useEffect(()=>{b();const k=setInterval(b,3e4);return()=>clearInterval(k)},[i,u,p,v]);const g=async()=>{try{const k=await ev({startDate:p,endDate:v,transactionType:u}),q=window.URL.createObjectURL(k),D=document.createElement("a");D.href=q,D.download=`transactions-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(D),D.click(),window.URL.revokeObjectURL(q),document.body.removeChild(D),X.success("Transactions exported successfully")}catch(k){console.error("Export error:",k),X.error("Failed to export transactions")}},y=n.filter(k=>{var q,D,_,B;if(i){const U=i.toLowerCase();if(!(((q=k.transactionId)==null?void 0:q.toLowerCase().includes(U))||((D=k.idNumber)==null?void 0:D.toLowerCase().includes(U))||((_=k.userName)==null?void 0:_.toLowerCase().includes(U))||((B=k.email)==null?void 0:B.toLowerCase().includes(U))))return!1}return!0}),T=Math.ceil(y.length/m),R=(j-1)*m,z=R+m,A=y.slice(R,z);x.useEffect(()=>{S(1)},[i,u,p,v]);const I=k=>k==="credit"?{bg:"rgba(34,197,94,0.2)",color:"#22C55E"}:{bg:"rgba(239,68,68,0.2)",color:"#EF4444"},L=r?"255, 212, 28":"59, 130, 246",M=[{id:"dashboard",label:"Dashboard",icon:"",route:"/admin/treasury/dashboard"},{id:"transactions",label:"Transaction History",icon:"",route:"/admin/treasury/transactions"},{id:"merchants",label:"Merchants",icon:"",route:"/admin/treasury/merchants"},{id:"logs",label:"Logs",icon:"",route:"/admin/treasury/logs"},{id:"concerns",label:"Concerns",icon:"",route:"/admin/treasury/concerns"},{id:"config",label:"Configuration",icon:"",route:"/admin/treasury/config"}];return a.jsxs("div",{style:{minHeight:"100vh",background:t.bg.primary,display:"flex",flexDirection:"column"},children:[a.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3},children:a.jsx(Wt,{})}),a.jsxs("div",{style:{flex:1,padding:"32px",overflowY:"auto"},children:[a.jsx(Yt,{tabs:M,currentTab:"transactions",onTabChange:k=>{k.route&&e(k.route)}}),l?a.jsx("div",{className:"text-center py-[60px]",style:{color:t.accent.primary},children:"Loading transactions..."}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${r?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:t.accent.primary},children:[a.jsx("span",{children:""})," Transaction History"]}),a.jsx("p",{className:"text-[13px] m-0",style:{color:t.text.secondary},children:y.length>0?`Showing ${R+1}-${Math.min(z,y.length)} of ${y.length}  Page ${j} of ${T}`:`Track all cash transactions  Total: ${n.length}`})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[a.jsx("div",{style:{flex:"1 1 300px",minWidth:"200px"},children:a.jsx("input",{type:"text",value:i,onChange:k=>d(k.target.value),placeholder:"Search by ID, user, or email...",style:{width:"100%",padding:"12px 16px",border:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:t.text.primary,fontSize:"14px",boxSizing:"border-box"},className:"focus:outline-none"})}),a.jsx("div",{style:{minWidth:"150px"},children:a.jsxs("select",{value:u,onChange:k=>c(k.target.value),style:{width:"100%",padding:"12px 16px",border:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:t.text.primary,fontSize:"14px",boxSizing:"border-box",cursor:"pointer"},children:[a.jsx("option",{value:"",children:"All Types"}),a.jsx("option",{value:"credit",children:"Cash In"}),a.jsx("option",{value:"debit",children:"Cash Out"})]})}),a.jsxs("div",{style:{display:"flex",gap:"8px"},children:[a.jsx("input",{type:"date",value:p,onChange:k=>h(k.target.value),style:{padding:"12px 16px",border:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:t.text.primary,fontSize:"14px",cursor:"pointer"}}),a.jsx("input",{type:"date",value:v,onChange:k=>w(k.target.value),style:{padding:"12px 16px",border:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:t.text.primary,fontSize:"14px",cursor:"pointer"}})]}),a.jsx("button",{onClick:g,disabled:y.length===0,style:{padding:"12px 20px",background:y.length===0?"rgba(100,100,100,0.2)":t.accent.primary,color:y.length===0?"rgba(251,251,251,0.3)":t.accent.secondary,border:"none",borderRadius:"8px",cursor:y.length===0?"not-allowed":"pointer",fontWeight:700,fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:" Export CSV"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:n.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{children:"No transactions found"})]}):y.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{style:{marginBottom:"12px"},children:"No transactions match your search"}),a.jsx("button",{onClick:()=>d(""),style:{padding:"8px 16px",background:r?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:t.accent.primary,fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):a.jsx("div",{className:"overflow-x-auto rounded-xl",style:{border:`1px solid ${r?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:a.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:r?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:t.accent.primary,borderBottom:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Transaction ID"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:t.accent.primary,borderBottom:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Date & Time"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:t.accent.primary,borderBottom:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"User"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:t.accent.primary,borderBottom:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"ID Number"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:t.accent.primary,borderBottom:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Type"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:t.accent.primary,borderBottom:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Amount"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:t.accent.primary,borderBottom:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Balance"})]})}),a.jsx("tbody",{children:A.map(k=>{const q=I(k.transactionType),D=new Date(k.createdAt);return a.jsxs("tr",{style:{borderBottom:`1px solid ${t.border.primary}`},children:[a.jsx("td",{style:{padding:"16px",color:t.text.primary,fontFamily:"monospace",fontSize:"11px",fontWeight:700},children:k.transactionId||k._id.slice(-8)}),a.jsxs("td",{style:{padding:"16px",color:t.text.primary},children:[D.toLocaleDateString("en-GB")," ",D.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]}),a.jsx("td",{style:{padding:"16px",color:t.text.primary,fontWeight:600},children:k.userName||"N/A"}),a.jsx("td",{style:{padding:"16px",color:t.text.primary,fontFamily:"monospace",fontSize:"11px"},children:k.idNumber}),a.jsx("td",{style:{padding:"16px"},children:a.jsx("span",{style:{padding:"4px 12px",background:q.bg,color:q.color,borderRadius:"12px",fontSize:"11px",fontWeight:700,textTransform:"uppercase"},children:k.transactionType==="credit"?"Cash In":"Cash Out"})}),a.jsxs("td",{style:{padding:"16px",color:k.transactionType==="credit"?"#22C55E":"#EF4444",fontWeight:700},children:[k.transactionType==="credit"?"+":"-","",Number(k.amount).toLocaleString("en-PH",{minimumFractionDigits:2})]}),a.jsxs("td",{style:{padding:"16px",color:t.text.primary,fontWeight:600},children:["",Number(k.balance).toLocaleString("en-PH",{minimumFractionDigits:2})]})]},k._id)})})]})})}),T>1&&a.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"center",alignItems:"center",gap:"8px"},children:[a.jsx("button",{onClick:()=>S(k=>Math.max(1,k-1)),disabled:j===1,style:{padding:"8px 16px",background:j===1?"rgba(100,100,100,0.2)":`rgba(${L}, 0.15)`,border:`2px solid ${j===1?"rgba(100,100,100,0.3)":`rgba(${L}, 0.3)`}`,borderRadius:"8px",color:j===1?"rgba(251,251,251,0.3)":t.accent.primary,cursor:j===1?"not-allowed":"pointer",fontWeight:600,fontSize:"14px"},children:" Previous"}),a.jsxs("span",{style:{color:t.text.primary,fontSize:"14px",fontWeight:600},children:["Page ",j," of ",T]}),a.jsx("button",{onClick:()=>S(k=>Math.min(T,k+1)),disabled:j===T,style:{padding:"8px 16px",background:j===T?"rgba(100,100,100,0.2)":`rgba(${L}, 0.15)`,border:`2px solid ${j===T?"rgba(100,100,100,0.3)":`rgba(${L}, 0.3)`}`,borderRadius:"8px",color:j===T?"rgba(251,251,251,0.3)":t.accent.primary,cursor:j===T?"not-allowed":"pointer",fontWeight:600,fontSize:"14px"},children:"Next "})]})]})]}),a.jsx(bt,{})]})}function Cv(){const e=$e(),{theme:t,isDarkMode:r}=se(),[n,s]=x.useState([]),[l,o]=x.useState(!0),[i,d]=x.useState(""),[u,c]=x.useState(1),p=20,h=async()=>{try{const g=await Qg({search:i});g.success&&s(g.merchants||[]),o(!1)}catch(g){console.error("Error loading merchants:",g),X.error("Failed to load merchants"),o(!1)}};x.useEffect(()=>{h();const g=setInterval(h,3e4);return()=>clearInterval(g)},[i]);const v=n.filter(g=>{var y,T,R,z,A;return((y=g.businessName)==null?void 0:y.toLowerCase().includes(i.toLowerCase()))||((T=g.firstName)==null?void 0:T.toLowerCase().includes(i.toLowerCase()))||((R=g.lastName)==null?void 0:R.toLowerCase().includes(i.toLowerCase()))||((z=g.email)==null?void 0:z.toLowerCase().includes(i.toLowerCase()))||((A=g.merchantId)==null?void 0:A.toLowerCase().includes(i.toLowerCase()))}).sort((g,y)=>g.isActive!==y.isActive?y.isActive?1:-1:(g.businessName||"").localeCompare(y.businessName||"")),w=Math.ceil(v.length/p),j=(u-1)*p,S=j+p,m=v.slice(j,S);x.useEffect(()=>{c(1)},[i]);const b=[{id:"dashboard",label:"Dashboard",icon:"",route:"/admin/treasury/dashboard"},{id:"transactions",label:"Transaction History",icon:"",route:"/admin/treasury/transactions"},{id:"merchants",label:"Merchants",icon:"",route:"/admin/treasury/merchants"},{id:"logs",label:"Logs",icon:"",route:"/admin/treasury/logs"},{id:"concerns",label:"Concerns",icon:"",route:"/admin/treasury/concerns"},{id:"config",label:"Configuration",icon:"",route:"/admin/treasury/config"}];return l?a.jsxs("div",{style:{minHeight:"100vh",background:t.bg.primary,display:"flex",flexDirection:"column"},children:[a.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3},children:a.jsx(Wt,{})}),a.jsxs("div",{style:{flex:1,padding:"32px",overflowY:"auto"},children:[a.jsx(Yt,{tabs:b,currentTab:"merchants",onTabChange:g=>{g.route&&e(g.route)}}),a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px",color:t.accent.primary},children:a.jsx("div",{style:{width:"40px",height:"40px",border:`4px solid ${r?"rgba(255, 212, 28, 0.3)":"rgba(59, 130, 246, 0.3)"}`,borderTopColor:t.accent.primary,borderRadius:"50%",animation:"spin 0.8s linear infinite"}})})]}),a.jsx(bt,{}),a.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}):a.jsxs("div",{style:{minHeight:"100vh",background:t.bg.primary,display:"flex",flexDirection:"column"},children:[a.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3},children:a.jsx(Wt,{})}),a.jsxs("div",{style:{flex:1,padding:"32px",overflowY:"auto"},children:[a.jsx(Yt,{tabs:b,currentTab:"merchants",onTabChange:g=>{g.route&&e(g.route)}}),a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:a.jsxs("div",{children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:700,color:t.text.primary,margin:"0 0 8px 0"},children:"Merchant Accounts"}),a.jsxs("p",{style:{fontSize:"14px",color:t.text.secondary,margin:0},children:[v.length," merchant",v.length!==1?"s":""," registered (Page ",u," of ",w||1,")"]})]})}),a.jsx("div",{style:{marginBottom:"20px"},children:a.jsx("input",{type:"text",placeholder:" Search merchants by name, contact, email, or ID...",value:i,onChange:g=>d(g.target.value),style:{width:"100%",padding:"12px 16px",background:"rgba(30, 35, 71, 0.5)",border:`2px solid ${r?"rgba(255, 212, 28, 0.3)":"rgba(59, 130, 246, 0.3)"}`,borderRadius:"10px",color:t.text.primary,fontSize:"14px",outline:"none"}})}),a.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[v.length>0?a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px"},children:m.map(g=>a.jsx(Nv,{merchant:g,theme:t,isDarkMode:r},g._id))}):a.jsxs("div",{style:{background:t.bg.card,borderRadius:"16px",border:`2px solid ${r?"rgba(255, 212, 28, 0.3)":"rgba(59, 130, 246, 0.3)"}`,padding:"60px",textAlign:"center",color:t.text.secondary},children:[a.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:""}),a.jsx("p",{style:{margin:0,fontSize:"16px"},children:i?"No merchants found matching your search":"No merchants yet"})]}),w>1&&a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"12px",marginTop:"24px",paddingTop:"24px",borderTop:`2px solid ${r?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[a.jsx("button",{onClick:()=>c(g=>Math.max(1,g-1)),disabled:u===1,style:{padding:"10px 20px",background:u===1?r?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":r?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:u===1?r?"rgba(255,212,28,0.5)":"rgba(59,130,246,0.5)":t.accent.primary,fontSize:"14px",fontWeight:600,cursor:u===1?"not-allowed":"pointer",transition:"all 0.2s"},children:" Previous"}),a.jsxs("span",{style:{color:t.text.primary,fontSize:"14px",fontWeight:600,minWidth:"120px",textAlign:"center"},children:["Page ",u," of ",w]}),a.jsx("button",{onClick:()=>c(g=>Math.min(w,g+1)),disabled:u===w,style:{padding:"10px 20px",background:u===w?r?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":r?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:u===w?r?"rgba(255,212,28,0.5)":"rgba(59,130,246,0.5)":t.accent.primary,fontSize:"14px",fontWeight:600,cursor:u===w?"not-allowed":"pointer",transition:"all 0.2s"},children:"Next "})]})]})]})]}),a.jsx(bt,{}),a.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
          }
          50% {
            opacity: 0.7;
            box-shadow: 0 0 0 6px rgba(16, 185, 129, 0.1);
          }
        }
      `})]})}function Nv({merchant:e,theme:t,isDarkMode:r}){const n=e.isActive!==!1;return a.jsxs("div",{style:{background:t.bg.card,borderRadius:"16px",border:`2px solid ${r?"rgba(255, 212, 28, 0.3)":"rgba(59, 130, 246, 0.3)"}`,padding:"24px",transition:"transform 0.2s ease, box-shadow 0.2s ease",cursor:"pointer",opacity:n?1:.7},onMouseEnter:s=>{s.currentTarget.style.transform="translateY(-4px)",s.currentTarget.style.boxShadow=`0 8px 24px ${r?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},onMouseLeave:s=>{s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="none"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[a.jsx("div",{style:{padding:"6px 14px",background:r?"rgba(255, 212, 28, 0.15)":"rgba(59, 130, 246, 0.15)",border:`1px solid ${r?"rgba(255, 212, 28, 0.3)":"rgba(59, 130, 246, 0.3)"}`,borderRadius:"8px",fontSize:"12px",fontWeight:700,color:t.accent.primary},children:e.merchantId||"N/A"}),a.jsx("div",{style:{width:"12px",height:"12px",background:n?"#10B981":"#EF4444",borderRadius:"50%",boxShadow:`0 0 0 3px ${n?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`,animation:n?"pulse 2s ease-in-out infinite":"none"}})]}),a.jsx("h3",{style:{fontSize:"20px",fontWeight:700,color:t.text.primary,margin:"0 0 8px 0"},children:e.businessName}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[a.jsxs("div",{style:{fontSize:"13px",color:t.text.secondary,display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[e.firstName," ",e.lastName]})]}),a.jsxs("div",{style:{fontSize:"13px",color:t.text.secondary,display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{children:""}),a.jsx("span",{children:e.email})]}),e.balance!==void 0&&a.jsxs("div",{style:{fontSize:"13px",color:t.text.secondary,display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{children:""}),a.jsxs("span",{style:{fontWeight:600,color:t.text.primary},children:["",Number(e.balance||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]})]})}function Tv(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),[s,l]=x.useState(null),[o,i]=x.useState("all"),[d,u]=x.useState(""),[c,p]=x.useState(""),[h,v]=x.useState(""),[w,j]=x.useState(""),[S,m]=x.useState(""),[b,g]=x.useState(""),[y,T]=x.useState(null),[R,z]=x.useState(!1),[A,I]=x.useState(!1),[L,M]=x.useState(""),[k,q]=x.useState(!1),[D,_]=x.useState(1),B=20,U=async(C=!1)=>{try{C||n(!0);const V=await Us({page:1,limit:1e3});if(V.success){const Z=(V.concerns||[]).filter(ve=>ve.reportTo==="Treasury Office");t(Z)}}catch(V){console.error("Error loading treasury concerns:",V)}finally{C||n(!1)}};x.useEffect(()=>{U(!1);const C=setInterval(()=>U(!0),5e3);return()=>clearInterval(C)},[]);const F=async C=>{try{const V=await Do(C);V.success&&(T(V.concern),z(!0))}catch{l({type:"error",message:"Failed to load concern details"}),setTimeout(()=>l(null),3e3)}},f=C=>{T(C),M(""),z(!1),I(!0)},E=async(C,V)=>{try{if(V==="resolved"){T(C),I(!0);return}(await Ca(C.concernId,{status:V})).success&&(l({type:"success",message:"Status updated!"}),U(!0),setTimeout(()=>l(null),2e3))}catch(Z){console.error("Error updating status:",Z),l({type:"error",message:Z.message||"Failed to update status"}),setTimeout(()=>l(null),3e3)}},N=async()=>{q(!0);try{(await Ca(y.concernId,{status:"resolved",resolution:L.trim()||"No resolution details provided."})).success&&(l({type:"success",message:"Concern resolved and email sent"}),I(!1),U(!0),setTimeout(()=>l(null),2e3))}catch(C){l({type:"error",message:C.message||"Failed to resolve concern"}),setTimeout(()=>l(null),3e3)}finally{q(!1)}},W=()=>{const C=Zt(O);Qt(C,"treasury_concerns")},O=e.filter(C=>{var V,Z,ve,Fe,et,vt,st,lt,ot,it,je;if(o==="assistance"&&C.submissionType!=="assistance"||o==="feedback"&&C.submissionType!=="feedback")return!1;if(d){const G=d.toLowerCase();if(!(((V=C.concernId)==null?void 0:V.toLowerCase().includes(G))||((Z=C._id)==null?void 0:Z.toLowerCase().includes(G))||((ve=C.userName)==null?void 0:ve.toLowerCase().includes(G))||((Fe=C.userId)==null?void 0:Fe.toLowerCase().includes(G))||((et=C.title)==null?void 0:et.toLowerCase().includes(G))||((vt=C.description)==null?void 0:vt.toLowerCase().includes(G))||((st=C.category)==null?void 0:st.toLowerCase().includes(G))||((lt=C.subject)==null?void 0:lt.toLowerCase().includes(G))||((ot=C.feedbackText)==null?void 0:ot.toLowerCase().includes(G))||((it=C.priority)==null?void 0:it.toLowerCase().includes(G))||((je=C.status)==null?void 0:je.toLowerCase().includes(G))))return!1}if(c&&C.status!==c||h&&C.priority!==h||w&&C.category!==w)return!1;if(S||b){const G=new Date(C.submittedAt||C.createdAt);if(S&&G<new Date(S)||b&&G>new Date(b+"T23:59:59"))return!1}return!0}),P=Math.ceil(O.length/B),Q=(D-1)*B,ee=Q+B,Y=O.slice(Q,ee);return x.useEffect(()=>{_(1)},[d,c,h,w,S,b,o]),r?a.jsx("div",{className:"text-center py-[60px] text-[#FFD41C]",children:"Loading treasury concerns..."}):a.jsxs("div",{className:"h-full flex flex-col",children:[s&&a.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:s.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:s.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${s.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4},children:s.message}),a.jsxs("div",{className:"mb-[30px] border-b-2 border-[rgba(255,212,28,0.2)] pb-5",children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[a.jsx("span",{children:""})," Treasury Concerns"]}),a.jsx("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:O.length>0?`Showing ${Q+1}-${Math.min(ee,O.length)} of ${O.length}  Page ${D} of ${P}`:`Concerns and feedback related to Treasury Office  Total: ${e.length}`})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px"},children:[a.jsxs("button",{onClick:()=>i("all"),style:{padding:"10px 20px",background:o==="all"?"rgba(255,212,28,0.2)":"transparent",border:`2px solid ${o==="all"?"#FFD41C":"rgba(255,212,28,0.3)"}`,borderRadius:"8px",color:o==="all"?"#FFD41C":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["All (",e.length,")"]}),a.jsxs("button",{onClick:()=>i("assistance"),style:{padding:"10px 20px",background:o==="assistance"?"rgba(59,130,246,0.2)":"transparent",border:`2px solid ${o==="assistance"?"#3B82F6":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:o==="assistance"?"#3B82F6":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Assistance (",e.filter(C=>C.submissionType==="assistance").length,")"]}),a.jsxs("button",{onClick:()=>i("feedback"),style:{padding:"10px 20px",background:o==="feedback"?"rgba(34,197,94,0.2)":"transparent",border:`2px solid ${o==="feedback"?"#22C55E":"rgba(34,197,94,0.3)"}`,borderRadius:"8px",color:o==="feedback"?"#22C55E":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Feedback (",e.filter(C=>C.submissionType==="feedback").length,")"]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[a.jsx(Xt,{value:d,onChange:u,placeholder:"Search by ID, user, title, category, or status..."}),a.jsx(Je,{value:c,onChange:p,label:"Status",options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]}),a.jsx(Je,{value:h,onChange:v,label:"Priority",options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}]}),a.jsx(Je,{value:w,onChange:j,label:"Category",options:[{value:"payment_issue",label:"Payment Issue"},{value:"driver_complaint",label:"Driver Complaint"},{value:"shuttle_issue",label:"Shuttle Issue"},{value:"technical_problem",label:"Technical Problem"},{value:"safety_concern",label:"Safety Concern"},{value:"route_suggestion",label:"Route Suggestion"},{value:"billing_dispute",label:"Billing Dispute"},{value:"lost_item",label:"Lost Item"},{value:"other",label:"Other"}]}),a.jsx(En,{startDate:S,endDate:b,onStartChange:m,onEndChange:g}),a.jsx(Vt,{onClick:W,disabled:O.length===0})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:e.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{children:"No treasury concerns found"})]}):O.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{style:{marginBottom:"12px"},children:"No concerns match your search"}),a.jsx("button",{onClick:()=>u(""),style:{padding:"8px 16px",background:"rgba(255,212,28,0.15)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):a.jsxs("div",{className:"overflow-x-auto rounded-xl border border-[rgba(255,212,28,0.2)]",children:[a.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-[rgba(255,212,28,0.1)]",children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"ID"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"User"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Subject"}),o==="all"&&a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Type"}),o==="feedback"&&a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Rating"}),o!=="feedback"&&a.jsxs(a.Fragment,{children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Priority"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Status"})]}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Date"}),a.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:"#FFD41C",textTransform:"uppercase",borderBottom:"2px solid rgba(255,212,28,0.3)"},children:"Actions"})]})}),a.jsx("tbody",{children:Y.map(C=>a.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,212,28,0.1)"},children:[a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:a.jsx("strong",{children:C.concernId||C._id.slice(-6)})}),a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:C.userName||"N/A"}),a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:C.subject||(C.selectedConcerns&&C.selectedConcerns.length>0?`${C.selectedConcerns[0]}${C.selectedConcerns.length>1?` +${C.selectedConcerns.length-1}`:""}`:"N/A")}),o==="all"&&a.jsx("td",{style:{padding:"16px"},children:a.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:C.submissionType==="assistance"?"rgba(59,130,246,0.2)":"rgba(34,197,94,0.2)",color:C.submissionType==="assistance"?"#3B82F6":"#22C55E",border:`1px solid ${C.submissionType==="assistance"?"rgba(59,130,246,0.3)":"rgba(34,197,94,0.3)"}`},children:C.submissionType==="assistance"?" Assistance":" Feedback"})}),o==="feedback"&&a.jsx("td",{style:{padding:"16px"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[[...Array(5)].map((V,Z)=>a.jsx("span",{style:{fontSize:"16px",color:Z<(C.rating||0)?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},Z)),a.jsxs("span",{style:{marginLeft:"8px",color:"rgba(251,251,251,0.7)",fontSize:"12px"},children:["(",C.rating||0,"/5)"]})]})}),o!=="feedback"&&a.jsxs(a.Fragment,{children:[a.jsx("td",{style:{padding:"16px"},children:C.submissionType==="assistance"?a.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:C.priority==="urgent"?"rgba(239,68,68,0.2)":C.priority==="high"?"rgba(251,146,60,0.2)":C.priority==="medium"?"rgba(251,191,36,0.2)":"rgba(34,197,94,0.2)",color:C.priority==="urgent"?"#EF4444":C.priority==="high"?"#FB923C":C.priority==="medium"?"#FBBF24":"#22C55E"},children:C.priority||"low"}):a.jsx("span",{style:{color:"rgba(251,251,251,0.4)",fontSize:"11px"},children:""})}),a.jsx("td",{style:{padding:"16px"},children:C.submissionType==="assistance"?a.jsxs("select",{value:C.status||"pending",onChange:V=>E(C,V.target.value),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid rgba(255,212,28,0.3)",background:"rgba(255,255,255,0.05)",color:C.status==="resolved"?"#22C55E":C.status==="in_progress"?"#3B82F6":C.status==="closed"?"#6B7280":"#FBBF24",fontSize:"11px",fontWeight:600,cursor:"pointer"},children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"resolved",children:"Resolved"}),a.jsx("option",{value:"closed",children:"Closed"})]}):a.jsx("span",{style:{color:"rgba(251,251,251,0.4)",fontSize:"11px"},children:""})})]}),a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:new Date(C.submittedAt||C.createdAt).toLocaleDateString()}),a.jsx("td",{style:{padding:"16px",textAlign:"right"},children:a.jsx("button",{onClick:()=>F(C.concernId),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"})})]},C._id))})]}),P>1&&a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[a.jsx("button",{onClick:()=>_(C=>Math.max(1,C-1)),disabled:D===1,style:{padding:"8px 16px",background:D===1?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:D===1?"rgba(251,251,251,0.3)":"#FFD41C",fontSize:"13px",fontWeight:600,cursor:D===1?"not-allowed":"pointer"},children:" Previous"}),a.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",D," of ",P]}),a.jsx("button",{onClick:()=>_(C=>Math.min(P,C+1)),disabled:D===P,style:{padding:"8px 16px",background:D===P?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:D===P?"rgba(251,251,251,0.3)":"#FFD41C",fontSize:"13px",fontWeight:600,cursor:D===P?"not-allowed":"pointer"},children:"Next "})]})]})}),R&&y&&a.jsx(Ro,{concern:y,onClose:()=>z(!1),onResolve:()=>f(y)}),A&&y&&a.jsxs("div",{onClick:()=>I(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{onClick:C=>C.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[a.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#FFD41C",margin:0,marginBottom:"8px"},children:"Resolve Concern"}),a.jsx("p",{style:{fontSize:"13px",color:"rgba(251,251,251,0.6)",margin:0},children:"Mark this concern as resolved and notify the user"})]}),a.jsx("button",{onClick:()=>I(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]}),a.jsxs("div",{style:{padding:"24px"},children:[a.jsxs("div",{style:{background:"rgba(251,191,36,0.1)",border:"1px solid rgba(251,191,36,0.3)",borderLeft:"4px solid #FBBF24",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[a.jsx("span",{style:{fontSize:"20px"},children:""}),a.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#FBBF24"},children:"Confirm Resolution"})]}),a.jsx("p",{style:{fontSize:"13px",color:"rgba(251,251,251,0.7)",margin:0,lineHeight:"1.5"},children:"This will mark the concern as resolved and send an email notification to the user."})]}),a.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",border:"1px solid rgba(255,212,28,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"Concern Information"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"10px"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Concern ID"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontFamily:"monospace",fontWeight:600},children:y.concernId})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"User"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:y.userName})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Subject"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:y.subject})]})]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"8px"},children:"Resolution Details (Optional)"}),a.jsx("textarea",{value:L,onChange:C=>M(C.target.value),placeholder:"Describe how this concern was resolved (optional)...",rows:6,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid rgba(255,212,28,0.2)",background:"rgba(255,255,255,0.05)",color:"#FBFBFB",fontSize:"13px",lineHeight:"1.5",resize:"vertical",outline:"none",fontFamily:"inherit",boxSizing:"border-box"}}),a.jsx("p",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginTop:"8px",margin:"8px 0 0 0"},children:"This message will be included in the email notification to the user."})]})]}),a.jsxs("div",{style:{padding:"20px 24px",borderTop:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:()=>I(!1),disabled:k,style:{padding:"12px 24px",background:"rgba(255,255,255,0.1)",color:"#FBFBFB",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",cursor:k?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:k?.5:1},children:"Cancel"}),a.jsx("button",{onClick:N,disabled:k,style:{padding:"12px 24px",background:k?"rgba(34,197,94,0.3)":"#22C55E",color:k?"#22C55E":"#0f1227",border:"none",borderRadius:"8px",cursor:k?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:k?.5:1,boxShadow:k?"none":"0 4px 12px rgba(34,197,94,0.4)"},children:k?"Resolving...":" Mark as Resolved"})]})]}),a.jsx("style",{children:`
            @keyframes fadeIn {
              from { opacity: 0; }
              to { opacity: 1; }
            }
            @keyframes slideIn {
              from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
              }
              to {
                opacity: 1;
                transform: translateY(0) scale(1);
              }
            }
          `})]})]})}function kv(){var B,U,F;const[e,t]=x.useState({autoExport:{frequency:"daily",exportTypes:[],time:"00:00",emailRecipients:[]}}),[r,n]=x.useState(!1),[s,l]=x.useState(null),[o,i]=x.useState(!1),[d,u]=x.useState(!1),[c,p]=x.useState([]),[h,v]=x.useState([]),[w,j]=x.useState("all"),[S,m]=x.useState(""),[b,g]=x.useState(""),[y,T]=x.useState(""),[R,z]=x.useState({start:"",end:""}),A=[{value:"Transactions",icon:"",label:"Transactions"},{value:"Merchants",icon:"",label:"Merchants"},{value:"Logs",icon:"",label:"Treasury Logs"},{value:"Concerns",icon:"",label:"Treasury Concerns"}];x.useEffect(()=>{I(),L(),M()},[]);const I=async()=>{try{const f=await K.get("/admin/configurations");f&&t(f)}catch(f){console.error("Error loading configurations:",f)}},L=async()=>{try{const f=await K.get("/admin/configurations/export-history");p(Array.isArray(f)?f:[])}catch(f){console.error("Error loading export history:",f)}},M=async()=>{try{const f=await K.get("/admin/configurations/scheduled-exports");v(Array.isArray(f)?f:[])}catch(f){console.error("Error loading scheduled exports:",f)}},k=async()=>{var f,E;n(!0);try{await K.put("/admin/configurations/auto-export",e.autoExport),_("success","Auto-export settings saved successfully!"),i(!1),I()}catch(N){_("error",((E=(f=N.response)==null?void 0:f.data)==null?void 0:E.error)||"Failed to save settings")}finally{n(!1)}},q=async()=>{var f,E;n(!0);try{if(!e.autoExport.exportTypes||e.autoExport.exportTypes.length===0){_("error","Please select at least one export type in the configuration settings"),n(!1);return}const N=await K.post("/admin/configurations/manual-export-treasury",{exportTypes:e.autoExport.exportTypes});if(_("success",`Treasury data exported successfully! (${N.totalRecords} total records)`),N.downloadUrl){const W=document.createElement("a");W.href=N.downloadUrl,W.download=N.fileName||`treasury_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(W),W.click(),document.body.removeChild(W)}u(!1),j("all"),m(""),g(""),L()}catch(N){_("error",((E=(f=N.response)==null?void 0:f.data)==null?void 0:E.error)||"Export failed")}finally{n(!1)}},D=async f=>{try{const E=await K.get(`/admin/configurations/download-export/${f}`);if(E.downloadUrl){const N=document.createElement("a");N.href=E.downloadUrl,N.download=E.fileName,document.body.appendChild(N),N.click(),document.body.removeChild(N)}}catch{_("error","Failed to download export")}},_=(f,E)=>{l({type:f,message:E}),setTimeout(()=>l(null),5e3)};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{style:{marginBottom:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",paddingBottom:"16px"},children:[a.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[a.jsx("span",{children:""})," Treasury Configurations"]}),a.jsx("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:"Configure automated treasury data exports and system settings"})]}),s&&a.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"12px",background:s.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:s.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${s.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4,fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("span",{children:s.type==="success"?"":""}),a.jsx("span",{children:s.message})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",padding:"28px",marginBottom:"24px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[a.jsxs("div",{children:[a.jsxs("h3",{style:{color:"#FFD41C",fontSize:"20px",fontWeight:700,margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("span",{children:""})," Automated Treasury Export"]}),a.jsxs("p",{style:{color:"rgba(251,251,251,0.6)",fontSize:"14px",margin:0,lineHeight:"1.5"},children:["System automatically exports treasury data as ZIP files for backup and compliance.",a.jsx("br",{}),"Configure the schedule and download reports manually anytime."]})]}),a.jsxs("button",{onClick:()=>i(!0),style:{padding:"12px 20px",background:"rgba(255, 212, 28, 0.15)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",color:"#FFD41C",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:f=>{f.currentTarget.style.background="rgba(255, 212, 28, 0.25)",f.currentTarget.style.borderColor="rgba(255, 212, 28, 0.5)"},onMouseLeave:f=>{f.currentTarget.style.background="rgba(255, 212, 28, 0.15)",f.currentTarget.style.borderColor="rgba(255, 212, 28, 0.3)"},children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Configure Schedule"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[a.jsx(ki,{icon:"",label:"Frequency",value:((B=e.autoExport.frequency)==null?void 0:B.charAt(0).toUpperCase())+((U=e.autoExport.frequency)==null?void 0:U.slice(1))||"Not set"}),a.jsx(ki,{icon:"",label:"Export Time",value:e.autoExport.time||"Not set"}),a.jsx(ki,{icon:"",label:"Data Types",value:`${((F=e.autoExport.exportTypes)==null?void 0:F.length)||0} selected`})]}),a.jsxs("div",{style:{padding:"24px",background:"rgba(34, 197, 94, 0.1)",border:"2px dashed rgba(34, 197, 94, 0.3)",borderRadius:"12px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),a.jsx("h4",{style:{color:"#FBFBFB",fontSize:"16px",fontWeight:700,marginBottom:"8px"},children:"Export Treasury Data Now"}),a.jsx("p",{style:{color:"rgba(251,251,251,0.6)",fontSize:"13px",marginBottom:"16px"},children:"Download a complete ZIP file with all treasury data: transactions, merchants, logs, and concerns."}),a.jsx("button",{onClick:()=>u(!0),disabled:r,style:{padding:"14px 32px",background:r?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:r?"not-allowed":"pointer",boxShadow:r?"none":"0 4px 12px rgba(34, 197, 94, 0.4)",transition:"all 0.2s ease",opacity:r?.6:1},onMouseEnter:f=>{r||(f.currentTarget.style.transform="translateY(-2px)",f.currentTarget.style.boxShadow="0 6px 16px rgba(34, 197, 94, 0.5)")},onMouseLeave:f=>{r||(f.currentTarget.style.transform="translateY(0)",f.currentTarget.style.boxShadow="0 4px 12px rgba(34, 197, 94, 0.4)")},children:r?" Exporting...":" Download Treasury Data (ZIP)"})]})]}),a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",padding:"28px",marginBottom:"24px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[a.jsxs("div",{children:[a.jsxs("h3",{style:{color:"#FFD41C",fontSize:"18px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{children:""})," Scheduled Export Archive"]}),a.jsx("p",{style:{color:"rgba(251,251,251,0.5)",fontSize:"12px",margin:0},children:"Auto-exported files saved from scheduled exports"})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[a.jsx("input",{type:"text",placeholder:"Search exports...",value:y,onChange:f=>T(f.target.value),style:{padding:"8px 16px",background:"rgba(255,255,255,0.05)",border:"2px solid rgba(255,212,28,0.2)",borderRadius:"8px",color:"#FBFBFB",fontSize:"13px",outline:"none",width:"200px"}}),a.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[a.jsx("input",{type:"date",value:R.start,onChange:f=>z({...R,start:f.target.value}),placeholder:"From",style:{padding:"8px 12px",background:"rgba(255,255,255,0.05)",border:"2px solid rgba(255,212,28,0.2)",borderRadius:"8px",color:"#FBFBFB",fontSize:"12px",outline:"none"}}),a.jsx("span",{style:{color:"rgba(251,251,251,0.5)"},children:""}),a.jsx("input",{type:"date",value:R.end,onChange:f=>z({...R,end:f.target.value}),placeholder:"To",style:{padding:"8px 12px",background:"rgba(255,255,255,0.05)",border:"2px solid rgba(255,212,28,0.2)",borderRadius:"8px",color:"#FBFBFB",fontSize:"12px",outline:"none"}}),(R.start||R.end||y)&&a.jsx("button",{onClick:()=>{T(""),z({start:"",end:""})},style:{padding:"8px 12px",background:"rgba(239,68,68,0.2)",border:"2px solid rgba(239,68,68,0.3)",borderRadius:"8px",color:"#EF4444",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Clear"})]})]})]}),h.length===0?a.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"rgba(251,251,251,0.4)",fontSize:"14px"},children:[a.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",opacity:.3},children:""}),a.jsx("p",{style:{margin:0},children:"No scheduled exports yet"}),a.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"12px"},children:"Configure auto-export schedule to start archiving exports"})]}):a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",paddingRight:"8px"},children:a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:h.filter(f=>{var P,Q;const E=!y||((P=f.exportType)==null?void 0:P.toLowerCase().includes(y.toLowerCase()))||((Q=f.fileName)==null?void 0:Q.toLowerCase().includes(y.toLowerCase())),N=new Date(f.exportedAt||f.timestamp||f.createdAt),W=!R.start||N>=new Date(R.start),O=!R.end||N<=new Date(R.end+"T23:59:59");return E&&W&&O}).map((f,E)=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 18px",background:"rgba(255,255,255,0.03)",borderRadius:"10px",border:"1px solid rgba(255,212,28,0.1)",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:N=>{N.currentTarget.style.background="rgba(255,255,255,0.06)",N.currentTarget.style.borderColor="rgba(255,212,28,0.2)",N.currentTarget.style.transform="translateX(4px)"},onMouseLeave:N=>{N.currentTarget.style.background="rgba(255,255,255,0.03)",N.currentTarget.style.borderColor="rgba(255,212,28,0.1)",N.currentTarget.style.transform="translateX(0)"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},children:[a.jsx("span",{style:{fontSize:"20px"},children:""}),a.jsx("span",{style:{color:"#FFD41C",fontWeight:700,fontSize:"15px"},children:f.exportType||"Scheduled Export"}),a.jsx("span",{style:{padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:700,background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)"},children:"AUTO"})]}),a.jsxs("div",{style:{display:"flex",gap:"20px",fontSize:"13px",color:"rgba(251,251,251,0.5)"},children:[a.jsxs("span",{children:[" ",new Date(f.exportedAt||f.timestamp||f.createdAt).toLocaleDateString()]}),a.jsxs("span",{children:[" ",new Date(f.exportedAt||f.timestamp||f.createdAt).toLocaleTimeString()]}),f.fileName&&a.jsxs("span",{children:[" ",f.fileName]}),f.recordCount&&a.jsxs("span",{children:[" ",f.recordCount," records"]})]})]}),f.status==="success"?a.jsx("button",{onClick:()=>D(f._id),style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(34,197,94,0.2)",color:"#22C55E",border:"2px solid rgba(34,197,94,0.3)",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:N=>{N.currentTarget.style.background="rgba(34,197,94,0.3)",N.currentTarget.style.transform="translateY(-2px)",N.currentTarget.style.boxShadow="0 4px 12px rgba(34,197,94,0.3)"},onMouseLeave:N=>{N.currentTarget.style.background="rgba(34,197,94,0.2)",N.currentTarget.style.transform="translateY(0)",N.currentTarget.style.boxShadow="none"},children:" Download"}):a.jsx("span",{style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"2px solid rgba(239,68,68,0.3)"},children:" Failed"})]},E))})})]}),c.length>0&&a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",padding:"28px"},children:[a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("h3",{style:{color:"#FFD41C",fontSize:"18px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{children:""})," Manual Export History"]}),a.jsx("p",{style:{color:"rgba(251,251,251,0.5)",fontSize:"12px",margin:0},children:"Recent manual exports triggered by administrators"})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",paddingRight:"8px"},children:a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:c.slice(0,10).map((f,E)=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"14px 16px",background:"rgba(255,255,255,0.03)",borderRadius:"10px",border:"1px solid rgba(255,212,28,0.1)",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:N=>{N.currentTarget.style.background="rgba(255,255,255,0.06)",N.currentTarget.style.borderColor="rgba(255,212,28,0.2)"},onMouseLeave:N=>{N.currentTarget.style.background="rgba(255,255,255,0.03)",N.currentTarget.style.borderColor="rgba(255,212,28,0.1)"},children:[a.jsxs("div",{children:[a.jsx("span",{style:{color:"#FFD41C",fontWeight:700},children:f.exportType}),a.jsx("span",{style:{color:"rgba(251,251,251,0.5)",marginLeft:"16px",fontSize:"13px"},children:new Date(f.exportedAt||f.timestamp||f.createdAt).toLocaleString()})]}),f.status==="success"?a.jsx("button",{onClick:()=>D(f._id),style:{padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:700,background:"rgba(34,197,94,0.2)",color:"#22C55E",border:"2px solid rgba(34,197,94,0.3)",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:N=>{N.currentTarget.style.background="rgba(34,197,94,0.3)"},onMouseLeave:N=>{N.currentTarget.style.background="rgba(34,197,94,0.2)"},children:" Download"}):a.jsx("span",{style:{padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:700,background:"rgba(239,68,68,0.2)",color:"#EF4444"},children:" Failed"})]},E))})})]})]}),d&&a.jsx(Ev,{dateRange:w,setDateRange:j,customStartDate:S,setCustomStartDate:m,customEndDate:b,setCustomEndDate:g,loading:r,onExport:q,onCancel:()=>{u(!1),j("all"),m(""),g("")}}),o&&a.jsx(Fv,{configurations:e,setConfigurations:t,exportTypes:A,loading:r,onSave:k,onCancel:()=>i(!1)})]})}function ki({icon:e,label:t,value:r}){return a.jsxs("div",{style:{padding:"20px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:"1px solid rgba(255, 212, 28, 0.15)"},children:[a.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:e}),a.jsx("div",{style:{fontSize:"12px",color:"rgba(251, 251, 251, 0.5)",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:700},children:t}),a.jsx("div",{style:{fontSize:"16px",color:"#FBFBFB",fontWeight:700},children:r})]})}function Ev({dateRange:e,setDateRange:t,customStartDate:r,setCustomStartDate:n,customEndDate:s,setCustomEndDate:l,loading:o,onExport:i,onCancel:d}){return a.jsxs("div",{onClick:d,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15, 18, 39, 0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{onClick:u=>u.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",border:"1px solid rgba(255, 212, 28, 0.2)",padding:"32px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[a.jsx("h3",{style:{color:"#FFD41C",fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Select Date Range"}),a.jsx("p",{style:{color:"rgba(251,251,251,0.6)",fontSize:"13px",margin:"0 0 24px 0"},children:"Choose which records to include in the export"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:[{value:"all",label:" All Time",desc:"Export all records"},{value:"24hr",label:" Last 24 Hours",desc:"Records from the past day"},{value:"week",label:" This Week",desc:"Records from the past 7 days"},{value:"month",label:" This Month",desc:"Records from current month"},{value:"custom",label:" Custom Range",desc:"Choose specific dates"}].map(u=>a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px",background:e===u.value?"rgba(255, 212, 28, 0.15)":"rgba(255, 255, 255, 0.05)",border:`2px solid ${e===u.value?"rgba(255, 212, 28, 0.4)":"rgba(255, 212, 28, 0.15)"}`,borderRadius:"10px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:c=>{e!==u.value&&(c.currentTarget.style.background="rgba(255, 212, 28, 0.1)")},onMouseLeave:c=>{e!==u.value&&(c.currentTarget.style.background="rgba(255, 255, 255, 0.05)")},children:[a.jsx("input",{type:"radio",name:"dateRange",value:u.value,checked:e===u.value,onChange:c=>t(c.target.value),style:{cursor:"pointer",width:"18px",height:"18px"}}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{color:"#FBFBFB",fontSize:"14px",fontWeight:700,marginBottom:"4px"},children:u.label}),a.jsx("div",{style:{color:"rgba(251,251,251,0.5)",fontSize:"12px"},children:u.desc})]})]},u.value))}),e==="custom"&&a.jsx("div",{style:{marginBottom:"24px",padding:"16px",background:"rgba(255,255,255,0.05)",borderRadius:"10px"},children:a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:"#FFD41C"},children:"Start Date"}),a.jsx("input",{type:"date",value:r,onChange:u=>n(u.target.value),style:{width:"100%",padding:"10px",background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FBFBFB",fontSize:"13px",outline:"none",boxSizing:"border-box"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:"#FFD41C"},children:"End Date"}),a.jsx("input",{type:"date",value:s,onChange:u=>l(u.target.value),style:{width:"100%",padding:"10px",background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FBFBFB",fontSize:"13px",outline:"none",boxSizing:"border-box"}})]})]})}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:i,disabled:o,style:{flex:1,padding:"14px 24px",background:o?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:o?"not-allowed":"pointer",boxShadow:o?"none":"0 4px 12px rgba(34, 197, 94, 0.4)",opacity:o?.6:1},children:o?" Exporting...":" Export Now"}),a.jsx("button",{onClick:d,disabled:o,style:{flex:1,padding:"14px 24px",background:"rgba(255, 212, 28, 0.1)",color:"#FFD41C",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:o?"not-allowed":"pointer"},children:"Cancel"})]})]}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
      `})]})}function Fv({configurations:e,setConfigurations:t,exportTypes:r,loading:n,onSave:s,onCancel:l}){return a.jsxs("div",{onClick:l,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15, 18, 39, 0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{onClick:o=>o.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",border:"1px solid rgba(255, 212, 28, 0.2)",padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[a.jsx("h3",{style:{color:"#FFD41C",fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Configure Export Schedule"}),a.jsx("p",{style:{color:"rgba(251,251,251,0.6)",fontSize:"13px",margin:"0 0 24px 0"},children:"Set up when and how often the system should automatically export data."}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Frequency"}),a.jsxs("select",{value:e.autoExport.frequency,onChange:o=>t({...e,autoExport:{...e.autoExport,frequency:o.target.value}}),style:{width:"100%",padding:"12px 16px",background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FBFBFB",fontSize:"14px",fontWeight:600,cursor:"pointer",outline:"none"},children:[a.jsx("option",{value:"daily",style:{background:"#1E2347"},children:" Daily"}),a.jsx("option",{value:"weekly",style:{background:"#1E2347"},children:" Weekly"}),a.jsx("option",{value:"monthly",style:{background:"#1E2347"},children:" Monthly"}),a.jsx("option",{value:"custom",style:{background:"#1E2347"},children:" Custom Date"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Export Time (24-hour)"}),a.jsx("input",{type:"time",value:e.autoExport.time,onChange:o=>t({...e,autoExport:{...e.autoExport,time:o.target.value}}),style:{width:"100%",padding:"12px 16px",background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FBFBFB",fontSize:"14px",fontWeight:600,outline:"none",boxSizing:"border-box"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"12px",fontSize:"13px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Data Types to Export"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:r.map(o=>{var i,d,u;return a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px",background:(i=e.autoExport.exportTypes)!=null&&i.includes(o.value)?"rgba(255, 212, 28, 0.15)":"rgba(255, 255, 255, 0.05)",border:`2px solid ${(d=e.autoExport.exportTypes)!=null&&d.includes(o.value)?"rgba(255, 212, 28, 0.4)":"rgba(255, 212, 28, 0.15)"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255, 212, 28, 0.1)"},onMouseLeave:c=>{var p;c.currentTarget.style.background=(p=e.autoExport.exportTypes)!=null&&p.includes(o.value)?"rgba(255, 212, 28, 0.15)":"rgba(255, 255, 255, 0.05)"},children:[a.jsx("input",{type:"checkbox",checked:((u=e.autoExport.exportTypes)==null?void 0:u.includes(o.value))||!1,onChange:c=>{const p=e.autoExport.exportTypes||[],h=c.target.checked?[...p,o.value]:p.filter(v=>v!==o.value);t({...e,autoExport:{...e.autoExport,exportTypes:h}})},style:{cursor:"pointer",width:"16px",height:"16px"}}),a.jsx("span",{style:{fontSize:"16px"},children:o.icon}),a.jsx("span",{style:{color:"#FBFBFB",fontSize:"14px",fontWeight:600},children:o.label})]},o.value)})})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[a.jsx("button",{onClick:s,disabled:n,style:{flex:1,padding:"14px 24px",background:n?"#9CA3AF":"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:n?"not-allowed":"pointer",boxShadow:n?"none":"0 4px 12px rgba(255, 212, 28, 0.4)",opacity:n?.6:1},children:n?" Saving...":" Save Settings"}),a.jsx("button",{onClick:l,disabled:n,style:{flex:1,padding:"14px 24px",background:"rgba(255, 212, 28, 0.1)",color:"#FFD41C",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:n?"not-allowed":"pointer"},children:"Cancel"})]})]})]}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
      `})]})}const zv=()=>{const e=$e(),t=Ye(),{theme:r}=se(),n=[{id:"home",label:"Home",icon:"",route:"/admin/accounting/home"},{id:"transactions",label:"Transaction History",icon:"",route:"/admin/accounting/transactions"},{id:"merchants",label:"Merchants",icon:"",route:"/admin/accounting/merchants"},{id:"logs",label:"Logs",icon:"",route:"/admin/accounting/logs"},{id:"concerns",label:"Concerns",icon:"",route:"/admin/accounting/concerns"},{id:"config",label:"Configuration",icon:"",route:"/admin/accounting/config"}],s=()=>t.pathname.split("/")[2]||"home",[l,o]=x.useState(s);x.useEffect(()=>{o(s())},[t.pathname]);const i=d=>{o(d.id),e(d.route)};return a.jsxs("div",{style:{background:r.bg.primary},className:"flex flex-col min-h-screen",children:[a.jsx("div",{className:"sticky top-0 z-50",children:a.jsx(Wt,{})}),a.jsxs("div",{className:"flex-1 p-10 pt-5 overflow-y-auto",children:[a.jsx(Yt,{tabs:n,currentTab:l,onTabChange:i}),l==="home"&&a.jsx(Zg,{}),a.jsx(Xb,{})]}),a.jsx(bt,{})]})};function Dv({log:e,onClose:t}){if(!e)return null;const r=o=>{switch(o){case"error":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444",border:"rgba(239,68,68,0.3)"};case"warning":return{bg:"rgba(251,191,36,0.2)",color:"#FBBF24",border:"rgba(251,191,36,0.3)"};default:return{bg:"rgba(34,197,94,0.2)",color:"#22C55E",border:"rgba(34,197,94,0.3)"}}},n=o=>{switch(o){case"admin_action":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"rgba(59,130,246,0.3)"};case"user_action":return{bg:"rgba(168,85,247,0.2)",color:"#A855F7",border:"rgba(168,85,247,0.3)"};default:return{bg:"rgba(255,212,28,0.2)",color:"#FFD41C",border:"rgba(255,212,28,0.3)"}}},s=r(e.severity),l=n(e.eventType||e.type);return a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:t,children:a.jsxs("div",{style:{background:"linear-gradient(135deg, #1E2347 0%, #181D40 100%)",borderRadius:"20px",maxWidth:"700px",width:"100%",maxHeight:"90vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",position:"relative"},onClick:o=>o.stopPropagation(),children:[a.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("h3",{style:{color:"#FFD41C",margin:"0 0 8px 0",fontSize:"20px",fontWeight:700},children:" Event Log Details"}),a.jsxs("p",{style:{color:"rgba(251,251,251,0.6)",margin:0,fontSize:"12px"},children:["Event ID: ",e.eventId||e._id]})]}),a.jsx("button",{onClick:t,style:{background:"rgba(255,212,28,0.15)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"20px",width:"36px",height:"36px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsxs("div",{style:{padding:"24px"},children:[a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"12px",flexWrap:"wrap"},children:[a.jsx("span",{style:{padding:"6px 14px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:l.bg,color:l.color,border:`1px solid ${l.border}`},children:e.eventType||e.type}),a.jsx("span",{style:{padding:"6px 14px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:s.bg,color:s.color,border:`1px solid ${s.border}`},children:e.severity||"info"})]}),a.jsxs("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.6)"},children:[" ",new Date(e.timestamp).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})]})]}),e.title&&a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("div",{style:{fontSize:"11px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Title"}),a.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#FBFBFB",lineHeight:"1.5"},children:e.title})]}),(e.description||e.message)&&a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("div",{style:{fontSize:"11px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Description"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.8)",lineHeight:"1.6",background:"rgba(255,255,255,0.05)",padding:"16px",borderRadius:"8px",border:"1px solid rgba(255,212,28,0.1)"},children:e.description||e.message})]}),e.details&&a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("div",{style:{fontSize:"11px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Additional Details"}),a.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.7)",background:"rgba(255,255,255,0.05)",padding:"16px",borderRadius:"8px",border:"1px solid rgba(255,212,28,0.1)",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:typeof e.details=="object"?JSON.stringify(e.details,null,2):e.details})]}),(e.userId||e.adminId||e.driverId||e.entityType)&&a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("div",{style:{fontSize:"11px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Entity Information"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.userId&&a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"12px",borderRadius:"8px"},children:[a.jsx("div",{style:{fontSize:"10px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"User ID"}),a.jsx("div",{style:{fontSize:"13px",color:"#FBFBFB",fontWeight:600},children:e.userId})]}),e.adminId&&a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"12px",borderRadius:"8px"},children:[a.jsx("div",{style:{fontSize:"10px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Admin ID"}),a.jsx("div",{style:{fontSize:"13px",color:"#FBFBFB",fontWeight:600},children:e.adminId})]}),e.driverId&&a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"12px",borderRadius:"8px"},children:[a.jsx("div",{style:{fontSize:"10px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Driver ID"}),a.jsx("div",{style:{fontSize:"13px",color:"#FBFBFB",fontWeight:600},children:e.driverId})]}),e.entityType&&a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"12px",borderRadius:"8px"},children:[a.jsx("div",{style:{fontSize:"10px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Entity Type"}),a.jsx("div",{style:{fontSize:"13px",color:"#FBFBFB",fontWeight:600},children:e.entityType})]})]})]})]})]})})}function Ei(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),[s,l]=x.useState(""),[o,i]=x.useState(""),[d,u]=x.useState(""),[c,p]=x.useState(""),[h,v]=x.useState(""),[w,j]=x.useState(null),[S,m]=x.useState(1),b=20,[g]=x.useState(()=>{const M=localStorage.getItem("adminData");return M?JSON.parse(M):null}),y=async()=>{try{const M=await K.get("/admin/event-logs");t(M||[]),n(!1)}catch(M){console.error("Error loading logs:",M),n(!1)}};x.useEffect(()=>{y();const M=setInterval(y,5e3);return()=>clearInterval(M)},[]);const T=()=>{const M=Zt(R);Qt(M,"event-logs")},R=e.filter(M=>{var k,q,D,_,B,U,F,f;if((g==null?void 0:g.role)==="motorpool"){if(!(M.driverId||M.shuttleId||M.routeId||M.tripId||M.eventType==="route_start"||M.eventType==="route_end"||M.eventType==="driver_assignment"||M.eventType==="shuttle_assignment"))return!1}else if((g==null?void 0:g.role)==="merchant"&&!(M.eventType==="payment"||M.eventType==="admin_action"||((k=M.title)==null?void 0:k.toLowerCase().includes("merchant"))||((q=M.description)==null?void 0:q.toLowerCase().includes("merchant"))))return!1;if(s){const E=s.toLowerCase();if(!(((D=M.eventType)==null?void 0:D.toLowerCase().includes(E))||((_=M.type)==null?void 0:_.toLowerCase().includes(E))||((B=M.title)==null?void 0:B.toLowerCase().includes(E))||((U=M.description)==null?void 0:U.toLowerCase().includes(E))||((F=M.message)==null?void 0:F.toLowerCase().includes(E))||((f=M.severity)==null?void 0:f.toLowerCase().includes(E))||new Date(M.timestamp).toLocaleString().toLowerCase().includes(E)))return!1}if(o&&M.severity!==o||d&&(M.eventType||M.type)!==d)return!1;if(c||h){const E=new Date(M.timestamp);if(c&&E<new Date(c)||h&&E>new Date(h+"T23:59:59"))return!1}return!0}),z=Math.ceil(R.length/b),A=(S-1)*b,I=A+b,L=R.slice(A,I);return x.useEffect(()=>{m(1)},[s,o,d,c,h]),r?a.jsx("div",{className:"text-center py-[60px] text-[#FFD41C]",children:"Loading logs..."}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"mb-[30px] border-b-2 border-[rgba(255,212,28,0.2)] pb-5",children:[a.jsxs("div",{className:"mb-5",children:[a.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[a.jsx("span",{children:""})," System Event Logs"]}),a.jsxs("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:["Showing ",R.length," logs  Page ",S," of ",Math.max(1,z)]})]}),a.jsxs("div",{className:"flex gap-3 items-end flex-wrap",children:[a.jsx(Xt,{value:s,onChange:l,placeholder:"Search logs..."}),a.jsx(Je,{value:o,onChange:i,label:"Severity",options:[{value:"info",label:"Info"},{value:"warning",label:"Warning"},{value:"error",label:"Error"}]}),a.jsx(Je,{value:d,onChange:u,label:"Type",options:[{value:"admin_action",label:"Admin Action"},{value:"system_event",label:"System Event"},{value:"user_action",label:"User Action"}]}),a.jsx(En,{startDate:c,endDate:h,onStartChange:p,onEndChange:v}),a.jsx(Vt,{onClick:T,disabled:R.length===0})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:R.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{children:"No logs found"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto rounded-xl border border-[rgba(255,212,28,0.2)] mb-5",children:a.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-[rgba(255,212,28,0.1)]",children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Timestamp"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Actor"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Action"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Details"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Location"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Severity"}),a.jsx("th",{className:"text-center p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Actions"})]})}),a.jsx("tbody",{children:L.map((M,k)=>{const q=M.adminName||M.driverName||M.userId||"System",D=M.adminName?" Admin":M.driverName?" Driver":M.userId?" User":" System";return a.jsxs("tr",{className:"border-b border-[rgba(255,212,28,0.1)]",children:[a.jsxs("td",{className:"p-4 text-[rgba(251,251,251,0.7)] text-xs",children:[a.jsx("div",{children:new Date(M.timestamp).toLocaleDateString()}),a.jsx("div",{className:"text-[11px] text-[rgba(251,251,251,0.5)]",children:new Date(M.timestamp).toLocaleTimeString()})]}),a.jsxs("td",{className:"p-4",children:[a.jsx("div",{className:"text-[rgba(251,251,251,0.9)] font-semibold text-sm",children:q}),a.jsx("div",{className:"text-[11px] text-[rgba(251,251,251,0.5)]",children:D})]}),a.jsxs("td",{className:"p-4 text-[rgba(251,251,251,0.9)] font-semibold",children:[a.jsx("div",{className:"mb-1",children:M.title||"N/A"}),a.jsx("span",{className:`inline-block px-2.5 py-0.5 rounded-full text-[10px] font-bold uppercase
                          ${M.eventType==="admin_action"?"bg-[rgba(59,130,246,0.2)] text-[#3B82F6]":M.eventType==="login"?"bg-[rgba(34,197,94,0.2)] text-[#22C55E]":"bg-[rgba(168,85,247,0.2)] text-[#A855F7]"}`,children:M.eventType||M.type})]}),a.jsx("td",{className:"p-4 text-[rgba(251,251,251,0.7)] max-w-[300px] overflow-hidden text-ellipsis whitespace-nowrap",children:M.description||M.message||"-"}),a.jsx("td",{className:"p-4 text-[rgba(251,251,251,0.6)] text-xs",children:M.ipAddress?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{children:""}),a.jsx("span",{children:M.ipAddress})]}):"-"}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-[10px] font-bold uppercase
                          ${M.severity==="warning"?"bg-[rgba(251,191,36,0.2)] text-[#FBBF24]":M.severity==="error"?"bg-[rgba(239,68,68,0.2)] text-[#EF4444]":"bg-[rgba(34,197,94,0.2)] text-[#22C55E]"}`,children:M.severity||"info"})}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("button",{onClick:()=>j(M),className:"px-3.5 py-1.5 bg-[rgba(255,212,28,0.15)] border-2 border-[rgba(255,212,28,0.3)] rounded-lg text-[#FFD41C] text-[11px] font-semibold cursor-pointer hover:bg-[rgba(255,212,28,0.25)] transition-colors",children:"View Details"})})]},M._id||k)})})]})}),z>1&&a.jsxs("div",{className:"flex justify-between items-center p-5 bg-[rgba(255,255,255,0.05)] rounded-xl border border-[rgba(255,212,28,0.2)]",children:[a.jsxs("div",{className:"text-[13px] text-[rgba(251,251,251,0.6)]",children:["Showing ",A+1,"-",Math.min(I,R.length)," of ",R.length]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>m(Math.max(1,S-1)),disabled:S===1,className:`px-4 py-2 border-2 border-[rgba(255,212,28,0.3)] rounded-lg text-xs font-semibold transition-colors
                    ${S===1?"bg-[rgba(255,255,255,0.05)] text-[rgba(251,251,251,0.3)] cursor-not-allowed":"bg-[rgba(255,212,28,0.15)] text-[#FFD41C] cursor-pointer hover:bg-[rgba(255,212,28,0.25)]"}`,children:"Previous"}),a.jsx("button",{onClick:()=>m(Math.min(z,S+1)),disabled:S===z,className:`px-4 py-2 border-2 border-[rgba(255,212,28,0.3)] rounded-lg text-xs font-semibold transition-colors
                    ${S===z?"bg-[rgba(255,255,255,0.05)] text-[rgba(251,251,251,0.3)] cursor-not-allowed":"bg-[rgba(255,212,28,0.15)] text-[#FFD41C] cursor-pointer hover:bg-[rgba(255,212,28,0.25)]"}`,children:"Next"})]})]})]})}),w&&a.jsx(Dv,{log:w,onClose:()=>j(null)})]})}function Rv(){const[e,t]=x.useState(()=>{const L=localStorage.getItem("adminData");return L?JSON.parse(L):null}),[r,n]=x.useState(!0),[s,l]=x.useState("personal"),[o,i]=x.useState(1),[d,u]=x.useState({oldPin:"",newPin:"",otp:""}),[c,p]=x.useState(!1),[h,v]=x.useState(""),[w,j]=x.useState(!1),[S,m]=x.useState(!1);x.useEffect(()=>{(async()=>{try{const M=localStorage.getItem("adminToken");if(!M){n(!1);return}const k=await fetch("http://localhost:3000/api/admin/auth/me",{headers:{Authorization:`Bearer ${M}`}});if(k.ok){const q=await k.json();t(q),localStorage.setItem("adminData",JSON.stringify(q))}}catch(M){console.error("Failed to fetch profile:",M)}finally{n(!1)}})()},[]);const b=(L,M)=>{L!=="otp"&&!/^\d*$/.test(M)||(L==="oldPin"||L==="newPin")&&M.length>6||L==="otp"&&M.length>6||(u({...d,[L]:M}),v(""))},g=async()=>{if(!d.oldPin||d.oldPin.length!==6){v("Old PIN must be exactly 6 digits");return}if(!d.newPin||d.newPin.length!==6){v("New PIN must be exactly 6 digits");return}if(d.oldPin===d.newPin){v("New PIN must be different from old PIN");return}p(!0),v("");try{const L=await fetch("http://localhost:3000/api/admin/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify({email:e.email,purpose:"password_change"})}),M=await L.json();if(!L.ok)throw new Error(M.error||"Failed to send OTP");j(!0),i(2),v("")}catch(L){console.error("Send OTP error:",L),v(L.message||"Failed to send OTP. Please try again.")}finally{p(!1)}},y=async()=>{if(!d.otp||d.otp.length!==6){v("OTP must be exactly 6 digits");return}p(!0),v("");try{const L=await fetch("http://localhost:3000/api/admin/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify({oldPin:d.oldPin,newPin:d.newPin,otp:d.otp})}),M=await L.json();if(!L.ok)throw new Error(M.error||"Failed to change password");i(3),v("")}catch(L){console.error("Change password error:",L),v(L.message||"Failed to change password. Please try again.")}finally{p(!1)}},T=()=>{i(1),u({oldPin:"",newPin:"",otp:""}),v(""),j(!1),m(!1)},R=()=>{var k,q;if(!e)return"?";const L=((k=e.firstName)==null?void 0:k[0])||"",M=((q=e.lastName)==null?void 0:q[0])||"";return(L+M).toUpperCase()},z=L=>({motorpool:"Motorpool Admin",merchant:"Merchant Admin",treasury:"Treasury Admin",accounting:"Accounting Admin",sysad:"System Administrator"})[L]||L,A=()=>a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",overflow:"hidden"},children:[a.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(255,212,28,0.2) 0%, rgba(255,212,28,0.05) 100%)",padding:"40px",display:"flex",alignItems:"center",gap:"24px",borderBottom:"1px solid rgba(255,212,28,0.2)"},children:[a.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"linear-gradient(135deg, #FFD41C 0%, #F59E0B 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"40px",fontWeight:800,color:"#181D40",boxShadow:"0 0 0 6px rgba(255,212,28,0.2)"},children:R()}),a.jsxs("div",{children:[a.jsxs("h2",{style:{fontSize:"28px",fontWeight:700,color:"#FBFBFB",margin:"0 0 8px 0"},children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),a.jsx("div",{style:{display:"inline-block",padding:"6px 16px",background:"rgba(255,212,28,0.2)",border:"1px solid rgba(255,212,28,0.4)",borderRadius:"20px",color:"#FFD41C",fontSize:"13px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.5px"},children:z(e==null?void 0:e.role)})]})]}),a.jsx("div",{style:{padding:"32px"},children:a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"24px"},children:[a.jsx(Fa,{label:"Admin ID",value:(e==null?void 0:e.adminId)||"N/A"}),a.jsx(Fa,{label:"Role",value:z(e==null?void 0:e.role)}),a.jsx(Fa,{label:"First Name",value:(e==null?void 0:e.firstName)||"N/A"}),a.jsx(Fa,{label:"Last Name",value:(e==null?void 0:e.lastName)||"N/A"}),a.jsx(Fa,{label:"Middle Name",value:(e==null?void 0:e.middleName)||"N/A"}),a.jsx(Fa,{label:"Email Address",value:(e==null?void 0:e.email)||"N/A"}),a.jsx(Fa,{label:"Account Status",value:e!=null&&e.isActive?"Active":"Inactive",highlight:e!=null&&e.isActive?"success":"error"}),a.jsx(Fa,{label:"Created By",value:(e==null?void 0:e.createdBy)||"System"})]})})]}),I=()=>a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",overflow:"hidden"},children:[a.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",padding:"24px 32px",borderBottom:"1px solid rgba(255,212,28,0.2)"},children:[a.jsxs("h3",{style:{fontSize:"18px",fontWeight:700,color:"#FFD41C",margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("span",{children:""})," Security Settings"]}),a.jsx("p",{style:{fontSize:"14px",color:"rgba(251,251,251,0.6)",margin:0},children:"Update your 6-digit PIN for enhanced security"})]}),a.jsxs("div",{style:{padding:"32px"},children:[h&&a.jsxs("div",{style:{padding:"14px 20px",background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",color:"#EF4444",fontSize:"13px",fontWeight:600,marginBottom:"24px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("span",{children:""}),a.jsx("span",{children:h})]}),o===1&&a.jsxs("div",{style:{maxWidth:"500px"},children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Enter Old PIN (6 digits) *"}),a.jsx("input",{type:"password",value:d.oldPin,onChange:L=>b("oldPin",L.target.value),disabled:c,placeholder:"",maxLength:"6",style:{width:"100%",padding:"14px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"24px",fontWeight:700,letterSpacing:"12px",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Enter New PIN (6 digits) *"}),a.jsx("input",{type:"password",value:d.newPin,onChange:L=>b("newPin",L.target.value),disabled:c,placeholder:"",maxLength:"6",style:{width:"100%",padding:"14px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"24px",fontWeight:700,letterSpacing:"12px",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}}),a.jsx("p",{style:{fontSize:"11px",color:"rgba(251, 251, 251, 0.5)",marginTop:"8px",marginBottom:0},children:"Must be different from old PIN"})]}),a.jsx("button",{onClick:g,disabled:c||d.oldPin.length!==6||d.newPin.length!==6,style:{width:"100%",padding:"14px",background:c||d.oldPin.length!==6||d.newPin.length!==6?"rgba(255, 212, 28, 0.3)":"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:c||d.oldPin.length!==6||d.newPin.length!==6?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.3s ease"},children:c?a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid rgba(24, 29, 64, 0.3)",borderTopColor:"#181D40",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),a.jsx("span",{children:"Sending OTP..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Send OTP to Email"})]})})]}),o===2&&a.jsxs("div",{style:{maxWidth:"500px"},children:[a.jsxs("div",{style:{padding:"16px",background:"rgba(59, 130, 246, 0.15)",border:"2px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",marginBottom:"24px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:""}),a.jsx("div",{style:{fontSize:"14px",color:"#3B82F6",fontWeight:600,marginBottom:"4px"},children:"OTP Sent Successfully!"}),a.jsxs("div",{style:{fontSize:"12px",color:"rgba(251, 251, 251, 0.7)"},children:["Check your email: ",e==null?void 0:e.email]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Enter OTP (6 digits) *"}),a.jsx("input",{type:"text",value:d.otp,onChange:L=>b("otp",L.target.value),disabled:c,placeholder:"______",maxLength:"6",style:{width:"100%",padding:"14px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"24px",fontWeight:700,letterSpacing:"12px",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}}),a.jsx("p",{style:{fontSize:"11px",color:"rgba(251, 251, 251, 0.5)",marginTop:"8px",marginBottom:0},children:"OTP expires in 10 minutes"})]}),a.jsxs("button",{onClick:()=>m(!0),disabled:c||d.otp.length!==6,style:{width:"100%",padding:"14px",background:c||d.otp.length!==6?"rgba(255, 212, 28, 0.3)":"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:c||d.otp.length!==6?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.3s ease"},children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Change Password"})]})]}),o===3&&a.jsxs("div",{style:{textAlign:"center",padding:"40px 0",maxWidth:"500px",margin:"0 auto"},children:[a.jsx("div",{style:{fontSize:"80px",marginBottom:"24px"},children:""}),a.jsx("h3",{style:{fontSize:"24px",fontWeight:700,color:"#22C55E",marginBottom:"12px"},children:"Password Changed Successfully!"}),a.jsx("p",{style:{fontSize:"14px",color:"rgba(251, 251, 251, 0.7)",marginBottom:"32px"},children:"Your password has been updated. Please use your new PIN for future logins."}),a.jsx("button",{onClick:T,style:{padding:"14px 32px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px"},children:"Done"})]}),S&&a.jsx("div",{onClick:()=>m(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.7)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{onClick:L=>L.stopPropagation(),style:{background:"#1a1f3a",borderRadius:"16px",padding:"32px",maxWidth:"400px",width:"90%",border:"2px solid rgba(255, 212, 28, 0.3)",textAlign:"center"},children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("h3",{style:{fontSize:"18px",fontWeight:700,color:"#FBFBFB",marginBottom:"12px"},children:"Confirm Password Change"}),a.jsx("p",{style:{fontSize:"14px",color:"rgba(251, 251, 251, 0.7)",marginBottom:"24px"},children:"Are you sure you want to change your password? You will need to use the new PIN for future logins."}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:()=>m(!1),style:{flex:1,padding:"12px",background:"rgba(251, 251, 251, 0.1)",color:"rgba(251, 251, 251, 0.7)",border:"1px solid rgba(251, 251, 251, 0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),a.jsx("button",{onClick:()=>{m(!1),y()},style:{flex:1,padding:"12px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer"},children:"Confirm"})]})]})}),a.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})]});return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-[30px] border-b-2 border-[rgba(255,212,28,0.2)] pb-5",children:[a.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[a.jsx("span",{children:""})," My Profile"]}),a.jsx("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:"Manage your account information and security settings"})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"30px"},children:[a.jsxs("button",{onClick:()=>l("personal"),style:{padding:"12px 24px",background:s==="personal"?"rgba(255, 212, 28, 0.15)":"rgba(30, 35, 71, 0.4)",border:s==="personal"?"2px solid rgba(255, 212, 28, 0.4)":"2px solid rgba(255, 212, 28, 0.1)",borderRadius:"12px",color:s==="personal"?"#FFD41C":"rgba(251, 251, 251, 0.7)",fontSize:"14px",fontWeight:s==="personal"?700:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Personal Information"})]}),a.jsxs("button",{onClick:()=>l("security"),style:{padding:"12px 24px",background:s==="security"?"rgba(255, 212, 28, 0.15)":"rgba(30, 35, 71, 0.4)",border:s==="security"?"2px solid rgba(255, 212, 28, 0.4)":"2px solid rgba(255, 212, 28, 0.1)",borderRadius:"12px",color:s==="security"?"#FFD41C":"rgba(251, 251, 251, 0.7)",fontSize:"14px",fontWeight:s==="security"?700:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Security Settings"})]})]}),r?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"80px 20px",color:"rgba(251, 251, 251, 0.6)"},children:a.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid rgba(255, 212, 28, 0.2)",borderTopColor:"#FFD41C",borderRadius:"50%",animation:"spin 0.8s linear infinite"}})}):a.jsxs(a.Fragment,{children:[s==="personal"&&A(),s==="security"&&I()]})]})}function Fa({label:e,value:t,highlight:r,fullWidth:n}){const l=r==="success"?{bg:"rgba(34, 197, 94, 0.15)",border:"rgba(34, 197, 94, 0.3)",color:"#22C55E"}:r==="error"?{bg:"rgba(239, 68, 68, 0.15)",border:"rgba(239, 68, 68, 0.3)",color:"#EF4444"}:r==="warning"?{bg:"rgba(245, 158, 11, 0.15)",border:"rgba(245, 158, 11, 0.3)",color:"#F59E0B"}:null;return a.jsxs("div",{style:{gridColumn:n?"1 / -1":"span 1"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"11px",fontWeight:700,color:"rgba(255,212,28,0.8)",textTransform:"uppercase",letterSpacing:"0.5px"},children:e}),a.jsx("div",{style:{padding:"12px 16px",background:l?l.bg:"rgba(251,251,251,0.05)",border:`1px solid ${l?l.border:"rgba(255,212,28,0.1)"}`,borderRadius:"8px",color:l?l.color:"rgba(251,251,251,0.9)",fontSize:"15px",fontWeight:r?700:500},children:t||"N/A"})]})}function Av(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),[s,l]=x.useState(null),[o,i]=x.useState("all"),[d,u]=x.useState(""),[c,p]=x.useState(""),[h,v]=x.useState(""),[w,j]=x.useState(""),[S,m]=x.useState(""),[b,g]=x.useState(""),[y,T]=x.useState(null),[R,z]=x.useState(!1),[A,I]=x.useState(!1),[L,M]=x.useState(""),[k,q]=x.useState(!1),[D,_]=x.useState(1),B=20,U=async(C=!1)=>{try{C||n(!0);const V=await Us({page:1,limit:1e3});V.success&&t(V.concerns||[])}catch(V){console.error("Error loading concerns:",V)}finally{C||n(!1)}};x.useEffect(()=>{U(!1);const C=setInterval(()=>U(!0),5e3);return()=>clearInterval(C)},[]);const F=async C=>{try{const V=await Do(C);V.success&&(T(V.concern),z(!0))}catch{l({type:"error",message:"Failed to load concern details"}),setTimeout(()=>l(null),3e3)}},f=C=>{T(C),M(""),z(!1),I(!0)},E=async(C,V)=>{try{if(V==="resolved"){T(C),I(!0);return}(await Ca(C.concernId,{status:V})).success&&(l({type:"success",message:"Status updated!"}),U(!0),setTimeout(()=>l(null),2e3))}catch(Z){console.error("Error updating status:",Z),l({type:"error",message:Z.message||"Failed to update status"}),setTimeout(()=>l(null),3e3)}},N=async()=>{q(!0);try{(await Ca(y.concernId,{status:"resolved",resolution:L.trim()||"No resolution details provided."})).success&&(l({type:"success",message:"Concern resolved and email sent"}),I(!1),U(!0),setTimeout(()=>l(null),2e3))}catch(C){l({type:"error",message:C.message||"Failed to resolve concern"}),setTimeout(()=>l(null),3e3)}finally{q(!1)}},W=()=>{const C=Zt(O);Qt(C,"concerns")},O=e.filter(C=>{var V,Z,ve,Fe,et,vt,st,lt,ot,it,je;if(o==="assistance"&&C.submissionType!=="assistance"||o==="feedback"&&C.submissionType!=="feedback")return!1;if(d){const G=d.toLowerCase();if(!(((V=C.concernId)==null?void 0:V.toLowerCase().includes(G))||((Z=C._id)==null?void 0:Z.toLowerCase().includes(G))||((ve=C.userName)==null?void 0:ve.toLowerCase().includes(G))||((Fe=C.userId)==null?void 0:Fe.toLowerCase().includes(G))||((et=C.title)==null?void 0:et.toLowerCase().includes(G))||((vt=C.description)==null?void 0:vt.toLowerCase().includes(G))||((st=C.category)==null?void 0:st.toLowerCase().includes(G))||((lt=C.subject)==null?void 0:lt.toLowerCase().includes(G))||((ot=C.feedbackText)==null?void 0:ot.toLowerCase().includes(G))||((it=C.priority)==null?void 0:it.toLowerCase().includes(G))||((je=C.status)==null?void 0:je.toLowerCase().includes(G))))return!1}if(c&&C.status!==c||h&&C.priority!==h||w&&C.category!==w)return!1;if(S||b){const G=new Date(C.submittedAt||C.createdAt);if(S&&G<new Date(S)||b&&G>new Date(b+"T23:59:59"))return!1}return!0}),P=Math.ceil(O.length/B),Q=(D-1)*B,ee=Q+B,Y=O.slice(Q,ee);return x.useEffect(()=>{_(1)},[d,c,h,w,S,b,o]),r?a.jsx("div",{className:"text-center py-[60px] text-[#FFD41C]",children:"Loading concerns..."}):a.jsxs("div",{className:"h-full flex flex-col",children:[s&&a.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:s.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:s.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${s.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4},children:s.message}),a.jsxs("div",{className:"mb-[30px] border-b-2 border-[rgba(255,212,28,0.2)] pb-5",children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[a.jsx("span",{children:""})," User Concerns"]}),a.jsx("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:O.length>0?`Showing ${Q+1}-${Math.min(ee,O.length)} of ${O.length}  Page ${D} of ${P}`:`Support tickets and feedback  Total: ${e.length}`})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px"},children:[a.jsxs("button",{onClick:()=>i("all"),style:{padding:"10px 20px",background:o==="all"?"rgba(255,212,28,0.2)":"transparent",border:`2px solid ${o==="all"?"#FFD41C":"rgba(255,212,28,0.3)"}`,borderRadius:"8px",color:o==="all"?"#FFD41C":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["All (",e.length,")"]}),a.jsxs("button",{onClick:()=>i("assistance"),style:{padding:"10px 20px",background:o==="assistance"?"rgba(59,130,246,0.2)":"transparent",border:`2px solid ${o==="assistance"?"#3B82F6":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:o==="assistance"?"#3B82F6":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Assistance (",e.filter(C=>C.submissionType==="assistance").length,")"]}),a.jsxs("button",{onClick:()=>i("feedback"),style:{padding:"10px 20px",background:o==="feedback"?"rgba(34,197,94,0.2)":"transparent",border:`2px solid ${o==="feedback"?"#22C55E":"rgba(34,197,94,0.3)"}`,borderRadius:"8px",color:o==="feedback"?"#22C55E":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Feedback (",e.filter(C=>C.submissionType==="feedback").length,")"]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[a.jsx(Xt,{value:d,onChange:u,placeholder:"Search by ID, user, title, category, or status..."}),a.jsx(Je,{value:c,onChange:p,label:"Status",options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]}),a.jsx(Je,{value:h,onChange:v,label:"Priority",options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}]}),a.jsx(Je,{value:w,onChange:j,label:"Category",options:[{value:"payment_issue",label:"Payment Issue"},{value:"driver_complaint",label:"Driver Complaint"},{value:"shuttle_issue",label:"Shuttle Issue"},{value:"technical_problem",label:"Technical Problem"},{value:"safety_concern",label:"Safety Concern"},{value:"route_suggestion",label:"Route Suggestion"},{value:"billing_dispute",label:"Billing Dispute"},{value:"lost_item",label:"Lost Item"},{value:"other",label:"Other"}]}),a.jsx(En,{startDate:S,endDate:b,onStartChange:m,onEndChange:g}),a.jsx(Vt,{onClick:W,disabled:O.length===0})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:e.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{children:"No concerns found"})]}):O.length===0?a.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("div",{style:{marginBottom:"12px"},children:"No concerns match your search"}),a.jsx("button",{onClick:()=>u(""),style:{padding:"8px 16px",background:"rgba(255,212,28,0.15)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):a.jsxs("div",{className:"overflow-x-auto rounded-xl border border-[rgba(255,212,28,0.2)]",children:[a.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-[rgba(255,212,28,0.1)]",children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"ID"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"User"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Subject"}),o==="all"&&a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Type"}),o==="feedback"&&a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Rating"}),o!=="feedback"&&a.jsxs(a.Fragment,{children:[a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Priority"}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Status"})]}),a.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Date"}),a.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:"#FFD41C",textTransform:"uppercase",borderBottom:"2px solid rgba(255,212,28,0.3)"},children:"Actions"})]})}),a.jsx("tbody",{children:Y.map(C=>a.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,212,28,0.1)"},children:[a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:a.jsx("strong",{children:C.concernId||C._id.slice(-6)})}),a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:C.userName||"N/A"}),a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:C.subject||(C.selectedConcerns&&C.selectedConcerns.length>0?`${C.selectedConcerns[0]}${C.selectedConcerns.length>1?` +${C.selectedConcerns.length-1}`:""}`:"N/A")}),o==="all"&&a.jsx("td",{style:{padding:"16px"},children:a.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:C.submissionType==="assistance"?"rgba(59,130,246,0.2)":"rgba(34,197,94,0.2)",color:C.submissionType==="assistance"?"#3B82F6":"#22C55E",border:`1px solid ${C.submissionType==="assistance"?"rgba(59,130,246,0.3)":"rgba(34,197,94,0.3)"}`},children:C.submissionType==="assistance"?" Assistance":" Feedback"})}),o==="feedback"&&a.jsx("td",{style:{padding:"16px"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[[...Array(5)].map((V,Z)=>a.jsx("span",{style:{fontSize:"16px",color:Z<(C.rating||0)?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},Z)),a.jsxs("span",{style:{marginLeft:"8px",color:"rgba(251,251,251,0.7)",fontSize:"12px"},children:["(",C.rating||0,"/5)"]})]})}),o!=="feedback"&&a.jsxs(a.Fragment,{children:[a.jsx("td",{style:{padding:"16px"},children:C.submissionType==="assistance"?a.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:C.priority==="urgent"?"rgba(239,68,68,0.2)":C.priority==="high"?"rgba(251,146,60,0.2)":C.priority==="medium"?"rgba(251,191,36,0.2)":"rgba(34,197,94,0.2)",color:C.priority==="urgent"?"#EF4444":C.priority==="high"?"#FB923C":C.priority==="medium"?"#FBBF24":"#22C55E"},children:C.priority||"low"}):a.jsx("span",{style:{color:"rgba(251,251,251,0.4)",fontSize:"11px"},children:""})}),a.jsx("td",{style:{padding:"16px"},children:C.submissionType==="assistance"?a.jsxs("select",{value:C.status||"pending",onChange:V=>E(C,V.target.value),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid rgba(255,212,28,0.3)",background:"rgba(255,255,255,0.05)",color:C.status==="resolved"?"#22C55E":C.status==="in_progress"?"#3B82F6":C.status==="closed"?"#6B7280":"#FBBF24",fontSize:"11px",fontWeight:600,cursor:"pointer"},children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"resolved",children:"Resolved"}),a.jsx("option",{value:"closed",children:"Closed"})]}):a.jsx("span",{style:{color:"rgba(251,251,251,0.4)",fontSize:"11px"},children:""})})]}),a.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:new Date(C.submittedAt||C.createdAt).toLocaleDateString()}),a.jsx("td",{style:{padding:"16px",textAlign:"right"},children:a.jsx("button",{onClick:()=>F(C.concernId),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"})})]},C._id))})]}),P>1&&a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[a.jsx("button",{onClick:()=>_(C=>Math.max(1,C-1)),disabled:D===1,style:{padding:"8px 16px",background:D===1?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:D===1?"rgba(251,251,251,0.3)":"#FFD41C",fontSize:"13px",fontWeight:600,cursor:D===1?"not-allowed":"pointer"},children:" Previous"}),a.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",D," of ",P]}),a.jsx("button",{onClick:()=>_(C=>Math.min(P,C+1)),disabled:D===P,style:{padding:"8px 16px",background:D===P?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:D===P?"rgba(251,251,251,0.3)":"#FFD41C",fontSize:"13px",fontWeight:600,cursor:D===P?"not-allowed":"pointer"},children:"Next "})]})]})}),R&&y&&a.jsx(Ro,{concern:y,onClose:()=>z(!1),onResolve:()=>f(y)}),A&&y&&a.jsxs("div",{onClick:()=>I(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[a.jsxs("div",{onClick:C=>C.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[a.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#FFD41C",margin:0,marginBottom:"8px"},children:"Resolve Concern"}),a.jsx("p",{style:{fontSize:"13px",color:"rgba(251,251,251,0.6)",margin:0},children:"Mark this concern as resolved and notify the user"})]}),a.jsx("button",{onClick:()=>I(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]}),a.jsxs("div",{style:{padding:"24px"},children:[a.jsxs("div",{style:{background:"rgba(251,191,36,0.1)",border:"1px solid rgba(251,191,36,0.3)",borderLeft:"4px solid #FBBF24",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[a.jsx("span",{style:{fontSize:"20px"},children:""}),a.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#FBBF24"},children:"Confirm Resolution"})]}),a.jsx("p",{style:{fontSize:"13px",color:"rgba(251,251,251,0.7)",margin:0,lineHeight:"1.5"},children:"This will mark the concern as resolved and send an email notification to the user."})]}),a.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",border:"1px solid rgba(255,212,28,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"Concern Information"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"10px"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Concern ID"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontFamily:"monospace",fontWeight:600},children:y.concernId})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"User"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:y.userName})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Subject"}),a.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:y.subject})]})]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"8px"},children:"Resolution Details (Optional)"}),a.jsx("textarea",{value:L,onChange:C=>M(C.target.value),placeholder:"Describe how this concern was resolved (optional)...",rows:6,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid rgba(255,212,28,0.2)",background:"rgba(255,255,255,0.05)",color:"#FBFBFB",fontSize:"13px",lineHeight:"1.5",resize:"vertical",outline:"none",fontFamily:"inherit",boxSizing:"border-box"}}),a.jsx("p",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginTop:"8px",margin:"8px 0 0 0"},children:"This message will be included in the email notification to the user."})]})]}),a.jsxs("div",{style:{padding:"20px 24px",borderTop:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:()=>I(!1),disabled:k,style:{padding:"12px 24px",background:"rgba(255,255,255,0.1)",color:"#FBFBFB",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",cursor:k?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:k?.5:1},children:"Cancel"}),a.jsx("button",{onClick:N,disabled:k,style:{padding:"12px 24px",background:k?"rgba(34,197,94,0.3)":"#22C55E",color:k?"#22C55E":"#0f1227",border:"none",borderRadius:"8px",cursor:k?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:k?.5:1,boxShadow:k?"none":"0 4px 12px rgba(34,197,94,0.4)"},children:k?"Resolving...":" Mark as Resolved"})]})]}),a.jsx("style",{children:`
            @keyframes fadeIn {
              from { opacity: 0; }
              to { opacity: 1; }
            }
            @keyframes slideIn {
              from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
              }
              to {
                opacity: 1;
                transform: translateY(0) scale(1);
              }
            }
          `})]})]})}function Bv(){const{theme:e,isDarkMode:t}=se();Ye().pathname.startsWith("/treasury");const[n,s]=x.useState([]),[l,o]=x.useState(!0),[i,d]=x.useState(""),[u,c]=x.useState(""),[p,h]=x.useState(""),[v,w]=x.useState("");x.useEffect(()=>{j()},[]);const j=async()=>{o(!0);try{const y=await Xd({search:i,startDate:u,endDate:p,transactionType:v});s(y.transactions||y.data||[])}catch(g){console.error("Failed to fetch transactions:",g),X.error("Failed to load transactions")}finally{o(!1)}},S=()=>{j()},m=()=>{X.info("Export feature coming soon")},b=t?"255, 212, 28":"59, 130, 246";return a.jsxs("div",{style:{minHeight:"100vh",background:e.bg.primary,display:"flex",flexDirection:"column"},children:[a.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3},children:a.jsx(Wt,{})}),a.jsxs("div",{style:{flex:1,padding:"40px"},children:[a.jsx(Yt,{}),a.jsx("div",{className:"mb-5 p-3 rounded-lg",style:{background:`rgba(${b}, 0.1)`,borderBottom:`2px solid ${e.accent.primary}`},children:a.jsx("h1",{className:"text-2xl font-bold",style:{color:e.accent.primary},children:" Transaction History"})}),a.jsxs("div",{className:"mb-4 p-4 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${b}, 0.2)`},children:[a.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[a.jsx("input",{type:"text",placeholder:"Search by user, amount...",value:i,onChange:g=>d(g.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${b}, 0.3)`},className:"px-3 py-2 rounded-md outline-none"}),a.jsx("input",{type:"date",value:u,onChange:g=>c(g.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${b}, 0.3)`},className:"px-3 py-2 rounded-md outline-none"}),a.jsx("input",{type:"date",value:p,onChange:g=>h(g.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${b}, 0.3)`},className:"px-3 py-2 rounded-md outline-none"}),a.jsxs("select",{value:v,onChange:g=>w(g.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${b}, 0.3)`},className:"px-3 py-2 rounded-md outline-none",children:[a.jsx("option",{value:"",children:"All Types"}),a.jsx("option",{value:"cash_in",children:"Cash In"}),a.jsx("option",{value:"shuttle",children:"Shuttle"}),a.jsx("option",{value:"merchant",children:"Merchant"})]})]}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsx("button",{onClick:S,style:{background:e.accent.primary,color:e.bg.primary},className:"px-4 py-2 rounded-md font-semibold hover:opacity-80 transition",children:" Search"}),a.jsx("button",{onClick:m,style:{background:e.bg.secondary,color:e.accent.primary,border:`1px solid ${e.accent.primary}`},className:"px-4 py-2 rounded-md font-semibold hover:opacity-80 transition",children:" Export"})]})]}),a.jsx("div",{className:"rounded-lg overflow-hidden",style:{background:e.bg.card,border:`1px solid rgba(${b}, 0.2)`},children:l?a.jsx("div",{className:"p-8 text-center",style:{color:e.text.secondary},children:"Loading transactions..."}):n.length===0?a.jsx("div",{className:"p-8 text-center",style:{color:e.text.secondary},children:"No transactions found"}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:`rgba(${b}, 0.1)`,borderBottom:`2px solid rgba(${b}, 0.3)`},children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:e.text.primary},children:"Date & Time"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:e.text.primary},children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:e.text.primary},children:"User"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:e.text.primary},children:"Amount"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:e.text.primary},children:"Status"})]})}),a.jsx("tbody",{children:n.map((g,y)=>{var T;return a.jsxs("tr",{style:{borderBottom:`1px solid rgba(${b}, 0.1)`},className:"hover:bg-white/5 transition",children:[a.jsx("td",{className:"px-4 py-3 text-sm",style:{color:e.text.primary},children:new Date(g.createdAt).toLocaleString()}),a.jsx("td",{className:"px-4 py-3 text-sm",style:{color:e.text.secondary},children:g.type||g.transactionType||"N/A"}),a.jsx("td",{className:"px-4 py-3 text-sm",style:{color:e.text.primary},children:g.userName||((T=g.user)==null?void 0:T.fullName)||"N/A"}),a.jsxs("td",{className:"px-4 py-3 text-sm font-semibold",style:{color:e.accent.primary},children:["",(g.amount||0).toFixed(2)]}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold",style:{background:g.status==="completed"?"#10B981":"#EF4444",color:"#fff"},children:g.status||"pending"})})]},g._id||y)})})]})})})]}),a.jsx(bt,{})]})}function Mv(){const{theme:e,isDarkMode:t}=se();Ye().pathname.startsWith("/treasury");const[n,s]=x.useState([]),[l,o]=x.useState(!0),[i,d]=x.useState(""),[u,c]=x.useState("");x.useEffect(()=>{p()},[]);const p=async()=>{o(!0);try{const j={search:i,...u!==""&&{isActive:u==="active"}},S=await Qg(j);s(S.merchants||S.data||[])}catch(j){console.error("Failed to fetch merchants:",j),X.error("Failed to load merchants")}finally{o(!1)}},h=()=>{p()},v=async(j,S)=>{try{await J5(j,!S),X.success("Merchant status updated"),p()}catch(m){console.error("Failed to update merchant status:",m),X.error("Failed to update merchant status")}},w=t?"255, 212, 28":"59, 130, 246";return a.jsxs("div",{style:{minHeight:"100vh",background:e.bg.primary,display:"flex",flexDirection:"column"},children:[a.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3},children:a.jsx(Wt,{})}),a.jsxs("div",{style:{flex:1,padding:"40px"},children:[a.jsx(Yt,{}),a.jsx("div",{className:"mb-5 p-3 rounded-lg",style:{background:`rgba(${w}, 0.1)`,borderBottom:`2px solid ${e.accent.primary}`},children:a.jsx("h1",{className:"text-2xl font-bold",style:{color:e.accent.primary},children:" Merchants Management"})}),a.jsx("div",{className:"mb-4 p-4 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${w}, 0.2)`},children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("input",{type:"text",placeholder:"Search merchants...",value:i,onChange:j=>d(j.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${w}, 0.3)`},className:"flex-1 px-3 py-2 rounded-md outline-none"}),a.jsxs("select",{value:u,onChange:j=>c(j.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${w}, 0.3)`},className:"px-3 py-2 rounded-md outline-none",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"})]}),a.jsx("button",{onClick:h,style:{background:e.accent.primary,color:e.bg.primary},className:"px-6 py-2 rounded-md font-semibold hover:opacity-80 transition",children:" Search"})]})}),l?a.jsx("div",{className:"p-8 text-center",style:{color:e.text.secondary},children:"Loading merchants..."}):n.length===0?a.jsx("div",{className:"p-8 text-center",style:{color:e.text.secondary},children:"No merchants found"}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(j=>a.jsxs("div",{className:"p-4 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${w}, 0.2)`},children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-lg font-bold",style:{color:e.text.primary},children:j.name||"Unnamed Merchant"}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold",style:{background:j.isActive?"#10B981":"#EF4444",color:"#fff"},children:j.isActive?"Active":"Inactive"})]}),a.jsxs("div",{className:"space-y-2 mb-3",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{style:{color:e.text.secondary},children:"Email:"}),a.jsx("span",{style:{color:e.text.primary},children:j.email||"N/A"})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{style:{color:e.text.secondary},children:"Phone:"}),a.jsx("span",{style:{color:e.text.primary},children:j.phone||"N/A"})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{style:{color:e.text.secondary},children:"Location:"}),a.jsx("span",{style:{color:e.text.primary},children:j.location||"N/A"})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{style:{color:e.text.secondary},children:"Total Sales:"}),a.jsxs("span",{className:"font-semibold",style:{color:e.accent.primary},children:["",(j.totalSales||0).toFixed(2)]})]})]}),a.jsx("button",{onClick:()=>v(j._id,j.isActive),style:{background:j.isActive?"#EF4444":"#10B981",color:"#fff"},className:"w-full py-2 rounded-md font-semibold hover:opacity-80 transition text-sm",children:j.isActive?" Deactivate":" Activate"})]},j._id))})]}),a.jsx(bt,{})]})}function _v(){const{theme:e,isDarkMode:t}=se();Ye();const[r,n]=x.useState([]),[s,l]=x.useState(!0),[o,i]=x.useState(""),[d,u]=x.useState(""),[c,p]=x.useState("");x.useEffect(()=>{h()},[]);const h=async()=>{l(!0);try{const m={search:o,...d&&{status:d},...c&&{priority:c}},b=await Us(m);n(b.concerns||b.data||[])}catch(m){console.error("Failed to fetch concerns:",m),X.error("Failed to load concerns")}finally{l(!1)}},v=async(m,b)=>{try{await Ca(m,{status:b}),X.success("Concern status updated"),h()}catch(g){console.error("Failed to update concern status:",g),X.error("Failed to update concern status")}},w=m=>{switch(m){case"high":return"#EF4444";case"medium":return"#F59E0B";case"low":return"#10B981";default:return e.text.secondary}},j=m=>{switch(m){case"resolved":return"#10B981";case"in_progress":return"#F59E0B";case"pending":return"#6B7280";default:return e.text.secondary}},S=t?"255, 212, 28":"59, 130, 246";return a.jsxs("div",{style:{minHeight:"100vh",background:e.bg.primary,display:"flex",flexDirection:"column"},children:[a.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3},children:a.jsx(Wt,{})}),a.jsxs("div",{style:{flex:1,padding:"40px"},children:[a.jsx(Yt,{}),a.jsx("div",{className:"mb-5 p-3 rounded-lg",style:{background:`rgba(${S}, 0.1)`,borderBottom:`2px solid ${e.accent.primary}`},children:a.jsx("h1",{className:"text-2xl font-bold",style:{color:e.accent.primary},children:" Concerns Management"})}),a.jsx("div",{className:"mb-4 p-4 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${S}, 0.2)`},children:a.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[a.jsx("input",{type:"text",placeholder:"Search concerns...",value:o,onChange:m=>i(m.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${S}, 0.3)`},className:"px-3 py-2 rounded-md outline-none"}),a.jsxs("select",{value:d,onChange:m=>u(m.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${S}, 0.3)`},className:"px-3 py-2 rounded-md outline-none",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"resolved",children:"Resolved"})]}),a.jsxs("select",{value:c,onChange:m=>p(m.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${S}, 0.3)`},className:"px-3 py-2 rounded-md outline-none",children:[a.jsx("option",{value:"",children:"All Priority"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]}),a.jsx("button",{onClick:h,style:{background:e.accent.primary,color:e.bg.primary},className:"px-4 py-2 rounded-md font-semibold hover:opacity-80 transition",children:" Search"})]})}),s?a.jsx("div",{className:"p-8 text-center",style:{color:e.text.secondary},children:"Loading concerns..."}):r.length===0?a.jsx("div",{className:"p-8 text-center",style:{color:e.text.secondary},children:"No concerns found"}):a.jsx("div",{className:"space-y-3",children:r.map(m=>{var b;return a.jsxs("div",{className:"p-4 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${S}, 0.2)`},children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold mb-1",style:{color:e.text.primary},children:m.title||m.subject||"Untitled Concern"}),a.jsx("p",{className:"text-sm mb-2",style:{color:e.text.secondary},children:m.description||m.message||"No description"}),a.jsxs("div",{className:"flex gap-3 text-xs",style:{color:e.text.muted},children:[a.jsxs("span",{children:["From: ",m.userName||((b=m.user)==null?void 0:b.fullName)||"Unknown"]}),a.jsx("span",{children:""}),a.jsx("span",{children:new Date(m.createdAt).toLocaleString()}),a.jsx("span",{children:""}),a.jsxs("span",{children:["Type: ",m.submissionType||"general"]})]})]}),a.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold text-center",style:{background:w(m.priority),color:"#fff"},children:m.priority||"medium"}),a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold text-center",style:{background:j(m.status),color:"#fff"},children:m.status||"pending"})]})]}),a.jsx("div",{className:"flex gap-2 mt-3",children:m.status!=="resolved"&&a.jsxs(a.Fragment,{children:[m.status==="pending"&&a.jsx("button",{onClick:()=>v(m._id,"in_progress"),style:{background:"#F59E0B",color:"#fff"},className:"px-3 py-1 rounded-md text-xs font-semibold hover:opacity-80 transition",children:"Start Progress"}),a.jsx("button",{onClick:()=>v(m._id,"resolved"),style:{background:"#10B981",color:"#fff"},className:"px-3 py-1 rounded-md text-xs font-semibold hover:opacity-80 transition",children:"Mark Resolved"})]})})]},m._id)})})]}),a.jsx(bt,{})]})}function Lv(){const{theme:e,isDarkMode:t}=se();Ye().pathname.startsWith("/treasury");const[n,s]=x.useState({maxTransactionAmount:1e4,minCashInAmount:50,enableNotifications:!0,enableEmailAlerts:!1,autoApproveTransactions:!1,sessionTimeout:30}),l=(u,c)=>{s(p=>({...p,[u]:c}))},o=()=>{X.success("Settings saved successfully")},i=()=>{s({maxTransactionAmount:1e4,minCashInAmount:50,enableNotifications:!0,enableEmailAlerts:!1,autoApproveTransactions:!1,sessionTimeout:30}),X.info("Settings reset to defaults")},d=t?"255, 212, 28":"59, 130, 246";return a.jsxs("div",{style:{minHeight:"100vh",background:e.bg.primary,display:"flex",flexDirection:"column"},children:[a.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3},children:a.jsx(Wt,{})}),a.jsxs("div",{style:{flex:1,padding:"40px"},children:[a.jsx(Yt,{}),a.jsx("div",{className:"mb-5 p-3 rounded-lg",style:{background:`rgba(${d}, 0.1)`,borderBottom:`2px solid ${e.accent.primary}`},children:a.jsx("h1",{className:"text-2xl font-bold",style:{color:e.accent.primary},children:" Configuration"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-5 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${d}, 0.2)`},children:[a.jsx("h2",{className:"text-lg font-bold mb-4",style:{color:e.text.primary},children:" Transaction Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:e.text.secondary},children:"Maximum Transaction Amount ()"}),a.jsx("input",{type:"number",value:n.maxTransactionAmount,onChange:u=>l("maxTransactionAmount",parseInt(u.target.value)),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${d}, 0.3)`},className:"w-full px-3 py-2 rounded-md outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:e.text.secondary},children:"Minimum Cash-In Amount ()"}),a.jsx("input",{type:"number",value:n.minCashInAmount,onChange:u=>l("minCashInAmount",parseInt(u.target.value)),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${d}, 0.3)`},className:"w-full px-3 py-2 rounded-md outline-none"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",id:"autoApprove",checked:n.autoApproveTransactions,onChange:u=>l("autoApproveTransactions",u.target.checked),style:{accentColor:e.accent.primary}}),a.jsx("label",{htmlFor:"autoApprove",className:"text-sm",style:{color:e.text.primary},children:"Auto-approve transactions under 500"})]})]})]}),a.jsxs("div",{className:"p-5 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${d}, 0.2)`},children:[a.jsx("h2",{className:"text-lg font-bold mb-4",style:{color:e.text.primary},children:" Notification Settings"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",id:"enableNotifications",checked:n.enableNotifications,onChange:u=>l("enableNotifications",u.target.checked),style:{accentColor:e.accent.primary}}),a.jsx("label",{htmlFor:"enableNotifications",className:"text-sm",style:{color:e.text.primary},children:"Enable push notifications"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",id:"enableEmailAlerts",checked:n.enableEmailAlerts,onChange:u=>l("enableEmailAlerts",u.target.checked),style:{accentColor:e.accent.primary}}),a.jsx("label",{htmlFor:"enableEmailAlerts",className:"text-sm",style:{color:e.text.primary},children:"Enable email alerts for large transactions"})]})]})]}),a.jsxs("div",{className:"p-5 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${d}, 0.2)`},children:[a.jsx("h2",{className:"text-lg font-bold mb-4",style:{color:e.text.primary},children:" Security Settings"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:e.text.secondary},children:"Session Timeout (minutes)"}),a.jsxs("select",{value:n.sessionTimeout,onChange:u=>l("sessionTimeout",parseInt(u.target.value)),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${d}, 0.3)`},className:"w-full px-3 py-2 rounded-md outline-none",children:[a.jsx("option",{value:15,children:"15 minutes"}),a.jsx("option",{value:30,children:"30 minutes"}),a.jsx("option",{value:60,children:"1 hour"}),a.jsx("option",{value:120,children:"2 hours"})]})]})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:o,style:{background:e.accent.primary,color:e.bg.primary},className:"flex-1 py-3 rounded-md font-semibold hover:opacity-80 transition",children:" Save Changes"}),a.jsx("button",{onClick:i,style:{background:e.bg.secondary,color:e.accent.primary,border:`1px solid ${e.accent.primary}`},className:"px-6 py-3 rounded-md font-semibold hover:opacity-80 transition",children:" Reset to Defaults"})]})]}),a.jsx(bt,{})]})}function Ov({children:e}){const t=$e(),r=Ye(),{theme:n,isDarkMode:s}=se(),[l]=x.useState(()=>{const d=localStorage.getItem("userData");return d?JSON.parse(d):null}),o=[{path:"/user/dashboard",icon:"",label:"Home"},{path:"/user/account",icon:"",label:"Account"},{path:"/user/history",icon:"",label:"History"}],i=[{path:"/faq",icon:"",label:"FAQs"},{path:"/user/settings",icon:"",label:"Settings"}];return a.jsxs("div",{style:{background:n.bg.primary},className:"min-h-screen flex flex-col",children:[a.jsx(Wt,{}),a.jsx("div",{style:{background:n.bg.primary},className:"h-4"}),a.jsx("div",{style:{background:n.bg.secondary,borderColor:n.border.primary,boxShadow:s?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-8 rounded-lg px-6 py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:d=>{d.currentTarget.style.borderColor=n.border.hover,d.currentTarget.style.boxShadow=s?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:d=>{d.currentTarget.style.borderColor=n.border.primary,d.currentTarget.style.boxShadow=s?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:a.jsxs("div",{className:"flex items-center gap-2",children:[o.map(d=>{const u=r.pathname===d.path;return a.jsxs("button",{onClick:()=>t(d.path),style:{background:u?n.accent.primary:"transparent",color:u?n.accent.secondary:n.text.secondary},className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-md font-semibold text-sm
                  transition-all duration-300 ease-out
                  ${u?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:c=>{u||(c.currentTarget.style.background=s?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",c.currentTarget.style.color=n.accent.primary)},onMouseLeave:c=>{u||(c.currentTarget.style.background="transparent",c.currentTarget.style.color=n.text.secondary)},children:[a.jsx("span",{className:`text-base transition-transform duration-300 ${u?"scale-110":""}`,children:d.icon}),a.jsx("span",{children:d.label})]},d.path)}),a.jsx("div",{className:"h-10 w-[2px] bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.4)] to-transparent mx-4"}),i.map(d=>{const u=r.pathname===d.path;return a.jsxs("button",{onClick:()=>t(d.path),style:{background:u?n.accent.primary:"transparent",color:u?n.accent.secondary:n.text.tertiary},className:`
                  flex items-center gap-2 px-4 py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${u?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:c=>{u||(c.currentTarget.style.background=s?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",c.currentTarget.style.color=n.accent.primary)},onMouseLeave:c=>{u||(c.currentTarget.style.background="transparent",c.currentTarget.style.color=n.text.tertiary)},children:[a.jsx("span",{className:`text-sm transition-transform duration-300 ${u?"scale-110":""}`,children:d.icon}),a.jsx("span",{children:d.label})]},d.path)})]})}),a.jsx("main",{className:"flex-1 p-8 overflow-auto animate-fadeIn",children:e}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${n.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${n.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${n.scrollbar.thumbHover};
        }
      `}),a.jsx(bt,{})]})}const Jg="http://localhost:3000/api/user",e2=()=>({Authorization:`Bearer ${localStorage.getItem("userToken")}`,"Content-Type":"application/json"}),Iv=async(e={})=>{try{const t=new URLSearchParams({page:e.page||1,limit:e.limit||50,...e.startDate&&{startDate:e.startDate},...e.endDate&&{endDate:e.endDate},...e.transactionType&&{transactionType:e.transactionType}}),r=await fetch(`${Jg}/transactions?${t}`,{headers:e2()}),n=await r.json();if(!r.ok)throw new Error(n.message||"Failed to fetch transactions");return n}catch(t){throw console.error("Get transactions error:",t),t}},Uv=async(e,t)=>{try{const r=await fetch(`${Jg}/request-transaction-history`,{method:"POST",headers:e2(),body:JSON.stringify({startDate:e,endDate:t})}),n=await r.json();if(!r.ok)throw new Error(n.message||"Failed to request transaction history");return n}catch(r){throw console.error("Request transaction history error:",r),r}};function $v({balance:e,setBalance:t}){const{theme:r,isDarkMode:n}=se(),[s,l]=x.useState(!1),[o,i]=x.useState(!1),[d,u]=x.useState(!0),[c,p]=x.useState(null),h=x.useRef(null),v=$e();x.useEffect(()=>{(async()=>{var S,m;try{u(!0),p(null);const b=await getUserBalance();b.success?t(b.balance):p(b.message||"Failed to fetch balance")}catch(b){p(((m=(S=b.response)==null?void 0:S.data)==null?void 0:m.message)||"Error fetching balance")}finally{u(!1)}})()},[t]),x.useEffect(()=>{const j=S=>{var m;(m=h.current)!=null&&m.contains(S.target)||i(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const w=()=>d?"Loading...":c?a.jsx("span",{className:"text-red-400 text-sm",children:c}):s?` ${e==null?void 0:e.toLocaleString("en-PH",{minimumFractionDigits:2})}`:" ********";return a.jsxs("div",{style:{background:r.bg.secondary,borderColor:r.border.primary,boxShadow:n?"0 4px 12px rgba(0, 0, 0, 0.2)":"0 4px 12px rgba(59, 130, 246, 0.08)"},className:"w-full rounded-xl overflow-hidden border transition-all duration-300 hover:shadow-lg",children:[a.jsxs("div",{style:{background:r.accent.primary},className:"px-5 py-3 flex items-center justify-between border-b",children:[a.jsxs("h3",{style:{color:r.accent.secondary},className:"font-bold text-base flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:""}),"My Balance"]}),a.jsxs("div",{className:"relative",ref:h,children:[a.jsx("button",{onClick:()=>i(j=>!j),style:{color:r.accent.secondary},className:"text-xl font-bold hover:opacity-75 transition-opacity",children:""}),o&&a.jsx("div",{style:{background:r.bg.tertiary,borderColor:r.border.primary},className:"absolute right-0 mt-2 w-32 border rounded-lg shadow-lg z-50 overflow-hidden",children:a.jsx("button",{style:{color:r.text.primary},className:"w-full text-left px-3 py-2 text-sm hover:bg-white/10 transition-colors",onClick:()=>{v("/faq"),i(!1)},children:"FAQs"})})]})]}),a.jsx("div",{className:"p-6 relative min-h-[120px]",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{style:{color:r.text.primary},className:"text-3xl font-bold",children:w()}),a.jsx("p",{style:{color:r.text.tertiary},className:"text-sm mt-2",children:"Available Balance"})]}),a.jsx("button",{onClick:()=>l(j=>!j),className:"ml-4 hover:scale-110 transition-transform",children:s?a.jsx(Wv,{theme:r}):a.jsx(Hv,{theme:r})})]})})]})}function Wv({theme:e}){return a.jsxs("svg",{style:{color:e.text.secondary},className:"w-7 h-7 hover:opacity-75 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}function Hv({theme:e}){return a.jsxs("svg",{style:{color:e.text.secondary},className:"w-7 h-7 hover:opacity-75 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3l18 18"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7a10.05 10.05 0 011.658-3.04"})]})}function qv(){const{theme:e,isDarkMode:t}=se(),[r,n]=x.useState(!1),[s,l]=x.useState(""),[o,i]=x.useState(""),[d,u]=x.useState(""),[c,p]=x.useState(""),[h,v]=x.useState(""),[w,j]=x.useState(""),[S,m]=x.useState(!1),[b,g]=x.useState(!1),[y,T]=x.useState([]),[R,z]=x.useState(!1),A=[{value:"ITSO",label:"ITSO"},{value:"Treasury Office",label:"Treasury Office"},{value:"NU Shuttle Service",label:"NU Shuttle Service"},{value:"Merchants",label:"Merchants"}],I=["The system doesn't recognize my ID / Unable to tap ID","My RFID card is damaged or not working","Others"],L=["Cash-in transaction not reflected in account","Incorrect amount loaded to account","Account balance discrepancy after cash-in","Others"],M=s==="NU Shuttle Service",k=s==="Merchants",D=s==="ITSO"?I:s==="Treasury Office"?L:[];x.useEffect(()=>{r&&y.length===0&&_()},[r]);const _=async()=>{z(!0);try{const f=await Xg();if(f.success){const E=f.options.filter(N=>!["ITSO","Treasury Office","NU Shuttle Service"].includes(N.value));T(E),console.log(" Loaded merchant options:",E)}}catch(f){console.error("Failed to fetch merchant options:",f),X.error(f.message||"Failed to load merchant options"),T([])}finally{z(!1)}},B=()=>{n(!1),l(""),i(""),u(""),p(""),v(""),j(""),m(!1)},U=async()=>{g(!0);try{(await M5({reportTo:k?o:s,concern:M?"Shuttle Service Concern":c,subject:k||c==="Others"?d:c,otherConcern:M||k||c==="Others"?h:"",plateNumber:M?w:void 0})).success&&(m(!0),X.success("Report submitted successfully!"),setTimeout(()=>{B()},1e3))}catch(f){console.error("Submit error:",f),X.error(f.message||"Failed to submit report. Please try again.")}finally{g(!1)}},F=s&&(M?w.trim()&&h.trim():k?o&&d.trim()&&h.trim():c&&(c!=="Others"||d.trim()&&h.trim()));return a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{background:e.bg.secondary,borderColor:e.border.primary,boxShadow:t?"0 4px 12px rgba(0, 0, 0, 0.2)":"0 4px 12px rgba(59, 130, 246, 0.08)"},className:"w-full rounded-xl overflow-hidden border transition-all duration-300 hover:shadow-lg",children:[a.jsx("div",{style:{background:e.accent.primary},className:"px-5 py-3 border-b",children:a.jsxs("h3",{style:{color:e.accent.secondary},className:"font-bold text-base flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:""}),"Need Assistance?"]})}),a.jsxs("div",{className:"p-5 relative min-h-[110px] flex flex-col justify-between",children:[a.jsx("p",{style:{color:e.text.secondary},className:"text-sm mb-4",children:"Submit a report and we'll assist you promptly."}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>n(!0),style:{background:e.accent.primary,color:e.accent.secondary},className:"font-semibold px-5 py-2.5 text-sm rounded-md hover:opacity-90 transition-all hover:scale-105 shadow-md",children:"Submit Report"})})]})]}),r&&a.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-[#1E2347] rounded-xl w-full max-w-2xl overflow-hidden shadow-2xl",children:[a.jsx("div",{className:"sticky top-0 bg-yellow-50/10 border-b-2 border-yellow-400 flex justify-between items-center px-6 py-2 z-10",children:a.jsx("h3",{className:"text-yellow-400 font-extrabold text-s tracking-wide",children:"We're here to help  what's the concern?"})}),a.jsx("div",{className:"p-6 space-y-5 max-h-[70vh] overflow-y-auto",children:S?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-500/20 rounded-full mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h4",{className:"text-xl font-bold text-green-500 mb-2",children:"Report submitted successfully!"}),a.jsx("p",{className:"text-white/60 text-sm",children:"We'll get back to you soon."})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-yellow-400 font-semibold text-sm mb-2",children:["Report To: ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("select",{value:s,onChange:f=>{l(f.target.value),i(""),p(""),v(""),u(""),j("")},className:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2.5 text-white focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400",children:[a.jsx("option",{value:"",className:"bg-[#1E2347]",children:"Select department or merchant category"}),A.map((f,E)=>a.jsx("option",{value:f.value,className:"bg-[#1E2347]",children:f.label},E))]})]}),k&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-yellow-400 font-semibold text-sm mb-2",children:["Select Merchant: ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("select",{value:o,onChange:f=>i(f.target.value),disabled:R,className:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2.5 text-white focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 disabled:opacity-50",children:[a.jsx("option",{value:"",className:"bg-[#1E2347]",children:R?"Loading merchants...":"Select a merchant"}),y.map((f,E)=>a.jsx("option",{value:f.value,className:"bg-[#1E2347]",children:f.label},E))]})]}),M?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-yellow-400 font-semibold text-sm mb-2",children:["Plate Number: ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"text",value:w,onChange:f=>j(f.target.value.toUpperCase()),placeholder:"e.g., ABC 1234",className:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2.5 text-white placeholder:text-white/40 focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 font-mono"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-yellow-400 font-semibold text-sm mb-2",children:["Concern: ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("textarea",{value:h,onChange:f=>v(f.target.value),placeholder:"Please describe your concerns about the shuttle service...",rows:4,className:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2.5 text-white placeholder:text-white/40 focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 resize-none"})]})]}):k?o&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-yellow-400 font-semibold text-sm mb-2",children:["Subject: ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"text",value:d,onChange:f=>u(f.target.value),placeholder:"Brief description of your concern",className:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2.5 text-white placeholder:text-white/40 focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-yellow-400 font-semibold text-sm mb-2",children:["Details: ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("textarea",{value:h,onChange:f=>v(f.target.value),placeholder:"Please describe your concern in detail...",rows:4,className:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2.5 text-white placeholder:text-white/40 focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 resize-none"})]})]}):a.jsxs(a.Fragment,{children:[s&&D.length>0&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-yellow-400 font-semibold text-sm mb-2",children:["What's your concern? ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("select",{value:c,onChange:f=>p(f.target.value),className:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2.5 text-white focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400",children:[a.jsx("option",{value:"",className:"bg-[#1E2347]",children:"Select a concern"}),D.map((f,E)=>a.jsx("option",{value:f,className:"bg-[#1E2347]",children:f},E))]})]}),c==="Others"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-yellow-400 font-semibold text-sm mb-2",children:["Subject: ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"text",value:d,onChange:f=>u(f.target.value),placeholder:"Brief description of your concern",className:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2.5 text-white placeholder:text-white/40 focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-yellow-400 font-semibold text-sm mb-2",children:["Details: ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("textarea",{value:h,onChange:f=>v(f.target.value),placeholder:"Please describe your concern in detail...",rows:4,className:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2.5 text-white placeholder:text-white/40 focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 resize-none"})]})]})]})]})}),!S&&a.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-white/10",children:[a.jsx("button",{onClick:B,disabled:b,className:"px-6 py-2.5 rounded-md bg-white/10 text-white hover:bg-white/20 transition font-medium disabled:opacity-50",children:"Cancel"}),a.jsx("button",{disabled:!F||b,onClick:U,className:`px-6 py-2.5 rounded-md font-semibold transition ${!F||b?"bg-gray-400 text-gray-300 cursor-not-allowed":"bg-[#FFD41C] text-[#121C52] hover:bg-[#e6c019]"}`,children:b?"Submitting...":"Submit"})]})]})})]})}function Yv(){const{theme:e,isDarkMode:t}=se(),[r,n]=x.useState(!1),[s,l]=x.useState(""),[o,i]=x.useState(""),[d,u]=x.useState(""),[c,p]=x.useState(0),[h,v]=x.useState(0),[w,j]=x.useState(!1),[S,m]=x.useState(!1),[b,g]=x.useState(""),[y,T]=x.useState([]),[R,z]=x.useState(!1);x.useEffect(()=>{r&&y.length===0&&A()},[r]);const A=async()=>{z(!0);try{const k=await Xg();k.success&&(T(k.options),console.log(" Loaded report-to options:",k.options))}catch(k){console.error("Failed to fetch options:",k),X.error(k.message||"Failed to load options"),T([{value:"ITSO",label:"ITSO"},{value:"Campus Caf",label:"Campus Caf"},{value:"NU Shuttle Service",label:"NU Shuttle Service"}])}finally{z(!1)}},I=()=>{n(!1),l(""),i(""),u(""),p(0),v(0),j(!1),g("")},L=async()=>{if(!s){X.error("Please select who to report to");return}if(c===0){X.error("Please provide a rating");return}m(!0);try{const k=await _5({reportTo:s,subject:o||void 0,feedback:d||void 0,rating:c});k.success?(g(k.concernId),j(!0),setTimeout(()=>{I()},1e3)):X.error(k.message||"Failed to submit feedback")}catch(k){X.error(k.message||"Failed to submit feedback"),console.error("Submit feedback error:",k)}finally{m(!1)}},M=s&&c>0;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{background:e.bg.secondary,borderColor:e.border.primary,boxShadow:t?"0 4px 12px rgba(0, 0, 0, 0.2)":"0 4px 12px rgba(59, 130, 246, 0.08)"},className:"w-full rounded-xl overflow-hidden border transition-all duration-300 hover:shadow-lg",children:[a.jsx("div",{style:{background:e.accent.primary},className:"px-5 py-3 border-b",children:a.jsxs("h3",{style:{color:e.accent.secondary},className:"font-bold text-base flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:""}),"How are we doing?"]})}),a.jsxs("div",{className:"p-5 relative min-h-[110px] flex flex-col justify-between",children:[a.jsx("p",{style:{color:e.text.secondary},className:"text-sm mb-4",children:"Rate your experience and help us improve!"}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>n(!0),style:{background:e.accent.primary,color:e.accent.secondary},className:"font-semibold px-5 py-2.5 text-sm rounded-md hover:opacity-90 transition-all hover:scale-105 shadow-md",children:"Share Feedback"})})]})]}),r&&a.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-[#1E2347] rounded-xl w-full max-w-md overflow-hidden shadow-2xl",children:[a.jsx("div",{className:"sticky top-0 bg-yellow-50/10 border-b-2 border-yellow-400 flex justify-between items-center px-6 py-2 z-10",children:a.jsx("h3",{className:"text-yellow-400 font-extrabold text-s tracking-wide",children:w?"Thank You!":"Share Your Feedback"})}),a.jsx("div",{className:"p-6 space-y-5 max-h-[70vh] overflow-y-auto",children:w?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-500/20 rounded-full mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h4",{className:"text-xl font-bold text-green-500 mb-2",children:"Feedback Submitted!"}),a.jsx("p",{className:"text-white/60 text-sm mb-2",children:"Your feedback will help us improve your experience."}),b&&a.jsxs("p",{className:"text-yellow-400 text-xs font-mono mt-3",children:["Reference ID: ",b]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-yellow-400 font-semibold text-sm mb-2",children:["Report To: ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("select",{value:s,onChange:k=>l(k.target.value),disabled:S||R,className:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2.5 text-white focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 disabled:opacity-50",children:[a.jsx("option",{value:"",className:"bg-[#1E2347]",children:R?"Loading...":"Select department or merchant"}),y.map((k,q)=>a.jsx("option",{value:k.value,className:"bg-[#1E2347]",children:k.label},q))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-yellow-400 font-semibold text-sm mb-2",children:["Subject: ",a.jsx("span",{className:"text-white/40 text-xs",children:"(Optional)"})]}),a.jsx("input",{type:"text",value:o,onChange:k=>i(k.target.value),disabled:S,placeholder:"What would you like to share?",maxLength:100,className:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2.5 text-white placeholder:text-white/40 focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 disabled:opacity-50"}),a.jsxs("p",{className:"text-xs text-white/40 mt-1",children:[o.length,"/100 characters"]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-yellow-400 font-semibold text-sm mb-2",children:["Tell us more about your experience: ",a.jsx("span",{className:"text-white/40 text-xs",children:"(Optional)"})]}),a.jsx("textarea",{value:d,onChange:k=>u(k.target.value),disabled:S,placeholder:"Share your thoughts here...",rows:4,maxLength:500,className:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2.5 text-white placeholder:text-white/40 focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 resize-none disabled:opacity-50"}),a.jsxs("p",{className:"text-xs text-white/40 mt-1",children:[d.length,"/500 characters"]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-yellow-400 font-semibold text-sm mb-2",children:["How would you rate your overall experience? ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("div",{className:"flex gap-2 justify-center py-2",children:[1,2,3,4,5].map(k=>a.jsx("button",{type:"button",onClick:()=>!S&&p(k),onMouseEnter:()=>!S&&v(k),onMouseLeave:()=>!S&&v(0),disabled:S,className:"transition-transform hover:scale-110 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx("svg",{className:"w-10 h-10",fill:k<=(h||c)?"#FFD41C":"none",stroke:"#FFD41C",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},k))}),c>0&&a.jsxs("p",{className:"text-white/60 text-xs mt-2 text-center",children:["You rated: ",c," star",c!==1?"s":""]})]})]})}),!w&&a.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-white/10",children:[a.jsx("button",{onClick:I,disabled:S,className:"px-6 py-2.5 rounded-md bg-white/10 text-white hover:bg-white/20 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{disabled:!M||S,onClick:L,className:`px-6 py-2.5 rounded-md font-semibold transition ${!M||S?"bg-gray-400 text-gray-300 cursor-not-allowed":"bg-[#FFD41C] text-[#121C52] hover:bg-[#e6c019]"}`,children:S?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):"Submit"})]})]})})]})}function Pv({onClose:e}){const[t,r]=x.useState({start:"",end:""}),[n,s]=x.useState(!1);x.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]);const l=async()=>{var u,c;if(!t.start||!t.end){X.error("Please select both start and end dates");return}const o=new Date(t.start),i=new Date(t.end);if(o>i){X.error("Start date cannot be after end date");return}if(Math.ceil((i-o)/(1e3*60*60*24))>60){X.error("Date range cannot exceed 60 days");return}try{s(!0);const p=await Uv(t.start,t.end);p.success?(X.success("Request sent successfully. Your transaction history will be emailed."),e()):X.error(p.message||"Failed to request transaction history")}catch(p){X.error(((c=(u=p.response)==null?void 0:u.data)==null?void 0:c.message)||"Request failed")}finally{s(!1)}};return a.jsxs("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:e,children:[a.jsxs("div",{className:"bg-[#1E2347] rounded-xl w-full max-w-md max-h-[90vh] overflow-y-auto animate-fadeInScale shadow-2xl",onClick:o=>o.stopPropagation(),children:[a.jsxs("div",{className:"sticky top-0 bg-yellow-50/10 flex justify-between items-center px-6 py-2 border-b-2 border-yellow-400",children:[a.jsx("h3",{className:"text-yellow-400 font-extrabold text-sm uppercase tracking-wide",children:"Request Transaction History"}),a.jsx("button",{onClick:e,disabled:n,className:"w-5 h-5 flex items-center justify-center rounded-full bg-red-200 text-red-500 hover:scale-110 transition",children:a.jsx(jv,{className:"w-3 h-3"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"p-4 rounded-xl bg-[#2A2F5D]",children:a.jsxs("p",{className:"text-white/70 text-xs",children:[a.jsx("strong",{className:"text-yellow-400",children:" Email Delivery:"})," ","Your transaction history will be sent as a PDF to your registered email address."]})}),a.jsxs("div",{className:"p-4 rounded-xl bg-[#2A2F5D]",children:[a.jsx("label",{className:"text-[11px] mb-2 block font-bold uppercase tracking-wide text-white/60",children:"Start Date"}),a.jsx("input",{type:"date",value:t.start,onChange:o=>r({...t,start:o.target.value}),max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 rounded-lg bg-black/20 text-white border border-yellow-400/20 focus:border-[#FFD41C] focus:outline-none font-semibold",disabled:n})]}),a.jsxs("div",{className:"p-4 rounded-xl bg-[#2A2F5D]",children:[a.jsx("label",{className:"text-[11px] mb-2 block font-bold uppercase tracking-wide text-white/60",children:"End Date"}),a.jsx("input",{type:"date",value:t.end,onChange:o=>r({...t,end:o.target.value}),min:t.start,max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 rounded-lg bg-black/20 text-white border border-yellow-400/20 focus:border-[#FFD41C] focus:outline-none font-semibold",disabled:n})]}),a.jsx("div",{className:"p-4 rounded-xl bg-[#2A2F5D]",children:a.jsxs("p",{className:"text-white/70 text-xs",children:[a.jsx("strong",{className:"text-yellow-400",children:"Note:"})," You can request up to ",a.jsx("strong",{children:"60 days"})," of transaction history at a time."]})}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{onClick:e,disabled:n,className:"flex-1 px-4 py-2 rounded-lg font-bold bg-gray-500/20 text-gray-200 hover:bg-gray-500/30 transition",children:"Cancel"}),a.jsx("button",{onClick:l,disabled:n,className:"flex-1 px-4 py-2 rounded-lg font-bold bg-[rgba(255,212,28,0.2)] text-yellow-400 hover:bg-[rgba(255,212,28,0.3)] transition flex items-center justify-center gap-2",children:n?"Sending...":a.jsxs(a.Fragment,{children:[a.jsx(mv,{className:"w-4 h-4"}),"Request"]})})]})]})]}),a.jsx("style",{children:`
        @keyframes fadeInScale {
          0% { opacity: 0; transform: scale(0.95); }
          100% { opacity: 1; transform: scale(1); }
        }
        .animate-fadeInScale {
          animation: fadeInScale 0.3s ease forwards;
        }
      `})]})}function ax({onBalanceUpdate:e}){const{theme:t,isDarkMode:r}=se(),[n,s]=x.useState("Today"),[l,o]=x.useState(!1),[i,d]=x.useState(!1),[u,c]=x.useState([]),[p,h]=x.useState(null),[v,w]=x.useState(!1),[j,S]=x.useState(!0),[m,b]=x.useState(null),[g,y]=x.useState(!0),T=x.useRef(null),R=x.useRef(null),z=x.useRef(null),A=x.useRef(null),I=["Today","Last 7 Days","Last 30 Days"],L=D=>{switch(D){case"Today":return"today";case"Last 7 Days":return"7days";case"Last 30 Days":return"30days";default:return"all"}},M=async(D=!1)=>{A.current&&A.current.abort(),A.current=new AbortController;try{D||S(!0),b(null);const _=p?"all":L(n),B=await Iv(_,{signal:A.current.signal});if(B!=null&&B.success){let U=B.transactions||[];p&&(U=U.filter(F=>F.date===p)),c(U),e&&B.balance!==void 0&&e(B.balance)}else b((B==null?void 0:B.message)||"Failed to load transactions")}catch(_){_.name!=="AbortError"&&b("Error fetching transactions")}finally{D||S(!1),y(!1)}};x.useEffect(()=>{M()},[]),x.useEffect(()=>{const D=()=>{z.current=setInterval(()=>M(!0),5e3)},_=()=>{z.current&&(clearInterval(z.current),z.current=null)};document.hidden||D();const B=()=>{document.hidden?_():(M(!0),D())};return document.addEventListener("visibilitychange",B),()=>{var U;_(),document.removeEventListener("visibilitychange",B),(U=A.current)==null||U.abort()}},[n,p]),x.useEffect(()=>{const D=_=>{T.current&&!T.current.contains(_.target)&&o(!1),R.current&&!R.current.contains(_.target)&&d(!1)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]);const k=D=>{const _=D.target.value;if(_){const B=new Date(_).toLocaleDateString("en-GB");h(B),s(B),d(!1)}},q=()=>j&&g?a.jsx("div",{style:{color:t.text.tertiary},className:"flex items-center justify-center flex-1 py-16",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx("div",{className:"animate-spin h-8 w-8 border-4 rounded-full",style:{borderColor:t.accent.primary,borderTopColor:"transparent"}}),a.jsx("span",{children:"Loading transactions..."})]})}):m?a.jsx("div",{className:"flex items-center justify-center flex-1 text-red-400 py-16",children:m}):u.length===0?a.jsxs("div",{style:{borderColor:t.border.primary,color:t.text.tertiary},className:"flex flex-col items-center justify-center flex-1 border rounded-b-xl p-16",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("p",{className:"text-base",children:"No transactions found"})]}):a.jsx("div",{style:{borderColor:t.border.primary},className:"flex-1 overflow-auto border rounded-b-xl",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsx("tr",{style:{background:r?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:["Date","Time","Details","Amount","Transaction ID"].map(D=>a.jsx("th",{style:{color:t.accent.primary,borderColor:t.border.primary},className:"text-center text-xs font-bold uppercase py-3 border-b",children:D},D))})}),a.jsx("tbody",{children:u.map((D,_)=>a.jsxs("tr",{style:{borderColor:t.border.primary},className:"border-b hover:bg-white/5 transition-colors",children:[a.jsx("td",{style:{color:t.text.primary},className:"py-3 text-center",children:D.date}),a.jsx("td",{style:{color:t.text.primary},className:"py-3 text-center",children:D.time}),a.jsx("td",{style:{color:t.text.primary},className:"py-3 text-center",children:D.details}),a.jsx("td",{className:`py-3 text-center font-bold ${D.amount>0?"text-green-400":"text-red-400"}`,children:D.amount>0?`+${Number(D.amount).toFixed(2)}`:`-${Math.abs(Number(D.amount)).toFixed(2)}`}),a.jsx("td",{style:{color:t.text.secondary},className:"py-3 text-center text-xs",children:D.id})]},D.id||_))})]})});return a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{background:t.bg.secondary,borderColor:t.border.primary,boxShadow:r?"0 4px 12px rgba(0, 0, 0, 0.2)":"0 4px 12px rgba(59, 130, 246, 0.08)"},className:"flex flex-col w-full h-[500px] rounded-xl border transition-all duration-300 hover:shadow-lg",children:[a.jsxs("div",{style:{background:t.accent.primary},className:"px-5 py-3 flex justify-between items-center rounded-t-xl border-b",children:[a.jsxs("h3",{style:{color:t.accent.secondary},className:"font-bold text-base flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:""}),"My Transactions"]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("div",{className:"relative",ref:R,children:[a.jsx("button",{onClick:()=>d(D=>!D),style:{background:t.bg.tertiary,color:t.text.primary,borderColor:t.border.primary},className:"p-2 rounded-md border hover:opacity-80 transition-opacity",title:"Select date",children:a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})})}),i&&a.jsx("input",{type:"date",onChange:k,max:new Date().toISOString().split("T")[0],style:{background:t.bg.tertiary,color:t.text.primary,borderColor:t.border.primary},className:"absolute top-11 right-0 border rounded-md p-2 z-50 shadow-lg"})]}),a.jsxs("div",{className:"relative hidden md:block",ref:T,children:[a.jsx("button",{onClick:()=>o(D=>!D),style:{background:t.bg.tertiary,color:t.text.primary,borderColor:t.border.primary},className:"px-3 py-2 text-xs rounded-md border w-32 truncate hover:opacity-80 transition-opacity",children:n}),l&&a.jsx("div",{style:{background:t.bg.tertiary,borderColor:t.border.primary},className:"absolute top-11 right-0 border rounded-md w-32 z-50 shadow-lg overflow-hidden",children:I.map(D=>a.jsx("button",{style:{color:t.text.primary},className:"block w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors",onClick:()=>{h(null),s(D),o(!1)},children:D},D))})]}),a.jsx("button",{onClick:()=>w(!0),style:{background:t.bg.tertiary,color:t.text.primary,borderColor:t.border.primary},className:"px-3 py-2 text-xs rounded-md border hover:opacity-80 transition-opacity font-medium",children:"Request"})]})]}),q()]}),v&&a.jsx(Pv,{onClose:()=>w(!1)})]})}function Gv({concern:e,onClose:t}){if(!e)return null;x.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]);const r=o=>{if(!o)return"N/A";const i=new Date(o);return`${i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}, ${i.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}`},n=e.submissionType==="assistance",s=n?"Concern Details":"Feedback Details",l=n?"Concern Information":"Feedback Information";return a.jsxs("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",onClick:t,children:[a.jsxs("div",{className:"bg-[#1E2347] rounded-xl w-full max-w-lg max-h-[90vh] overflow-y-auto animate-fadeInScale shadow-2xl",onClick:o=>o.stopPropagation(),children:[a.jsxs("div",{className:"sticky top-0 bg-yellow-50/10 border-b-2 border-yellow-400 flex justify-between items-center px-6 py-2 z-10 backdrop-blur-md",children:[a.jsx("h3",{className:"text-yellow-400 font-extrabold text-s uppercase tracking-wide",children:s}),a.jsx("button",{onClick:t,className:"w-5 h-5 flex items-center justify-center rounded-full bg-red-200 text-red-500 hover:scale-110 transition",children:""})]}),a.jsx("div",{className:"p-6 space-y-5",children:a.jsxs("div",{className:"p-5 rounded-xl bg-[#2A2F5D]",children:[a.jsx("h4",{className:"text-[13px] text-yellow-400 uppercase font-bold tracking-wide mb-4",children:l}),a.jsxs("div",{className:"space-y-3 text-[13px] text-white",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-[11px] text-gray-400 uppercase font-bold mb-1",children:"Concern ID"}),a.jsx("p",{className:"bg-black/20 p-2 rounded-md font-mono",children:e.concernId})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[11px] text-gray-400 uppercase font-bold mb-1",children:"Submitted On"}),a.jsx("p",{className:"bg-black/20 p-2 rounded-md font-semibold",children:r(e.submittedAt)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[11px] text-gray-400 uppercase font-bold mb-1",children:"Type"}),a.jsx("p",{className:"bg-black/20 p-2 rounded-md font-semibold",children:e.submissionType})]}),e.reportTo&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-[11px] text-gray-400 uppercase font-bold mb-1",children:"Report To"}),a.jsx("p",{className:"bg-black/20 p-2 rounded-md font-semibold",children:e.reportTo})]}),e.subject&&e.subject!=="No subject"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-[11px] text-gray-400 uppercase font-bold mb-1",children:"Subject"}),a.jsx("p",{className:"bg-black/20 p-2 rounded-md font-semibold",children:e.subject})]}),e.submissionType==="feedback"&&e.feedbackText&&e.feedbackText.trim()&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-[11px] text-gray-400 uppercase font-bold mb-1",children:"Tell us more about your experience"}),a.jsx("p",{className:"bg-black/20 p-2 rounded-md font-mono",children:e.feedbackText})]}),e.submissionType==="feedback"&&e.rating!==void 0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-[11px] text-gray-400 uppercase font-bold mb-1",children:"Rating"}),a.jsx("p",{className:"bg-black/20 p-2 rounded-md font-semibold",children:"".repeat(e.rating)})]}),e.submissionType==="assistance"&&e.feedbackText&&e.feedbackText.trim()&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-[11px] text-gray-400 uppercase font-bold mb-1",children:"Other Concerns"}),a.jsx("p",{className:"bg-black/20 p-2 rounded-md font-mono",children:e.feedbackText})]}),e.submissionType==="assistance"&&e.status&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-[11px] text-gray-400 uppercase font-bold mb-1",children:"Status"}),a.jsx("p",{className:"bg-black/20 p-2 rounded-md font-semibold capitalize",children:e.status.replace("_"," ")})]}),e.resolution&&e.resolution.trim()&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-[11px] text-gray-400 uppercase font-bold mb-1",children:"Resolution"}),a.jsx("p",{className:"bg-black/20 p-2 rounded-md font-semibold",children:e.resolution})]})]})]})})]}),a.jsx("style",{children:`
          @keyframes fadeInScale {
            0% { opacity: 0; transform: scale(0.95); }
            100% { opacity: 1; transform: scale(1); }
          }
          .animate-fadeInScale {
            animation: fadeInScale 0.3s ease forwards;
          }
        `})]})}function Xv(){const{theme:e,isDarkMode:t}=se(),[r,n]=x.useState([]),[s,l]=x.useState(!0),[o,i]=x.useState(null),d=async(c=!1)=>{c||l(!0);try{const p=await L5({type:"assistance",limit:50});p.success&&n(p.concerns)}catch{c||X.error("Failed to load concerns history")}finally{c||l(!1)}};x.useEffect(()=>{let c;const p=()=>{c=setInterval(()=>d(!0),5e3)},h=()=>{c&&clearInterval(c)};d(!1);const v=()=>{document.hidden?h():(d(!0),p())};return document.hidden||p(),document.addEventListener("visibilitychange",v),()=>{h(),document.removeEventListener("visibilitychange",v)}},[]);const u=c=>{switch(c){case"resolved":return"bg-green-500/20 text-green-400 border-green-500/30";case"in_progress":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"pending":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"closed":return"bg-gray-500/20 text-gray-400 border-gray-500/30";default:return"bg-white/10 text-white/60 border-white/20"}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{background:e.bg.secondary,borderColor:e.border.primary,boxShadow:t?"0 4px 12px rgba(0, 0, 0, 0.2)":"0 4px 12px rgba(59, 130, 246, 0.08)"},className:"w-full rounded-xl overflow-hidden border transition-all duration-300 hover:shadow-lg",children:[a.jsx("div",{style:{background:e.accent.primary},className:"px-5 py-3 border-b",children:a.jsxs("h3",{style:{color:e.accent.secondary},className:"font-bold text-base flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:""}),"Concern Reports History"]})}),a.jsx("div",{className:"p-4 h-[240px] overflow-y-auto",children:s?a.jsx("div",{className:"flex justify-center items-center py-12",children:a.jsx("div",{style:{borderColor:e.accent.primary,borderTopColor:"transparent"},className:"animate-spin h-8 w-8 border-4 rounded-full"})}):r.length===0?a.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-12",children:[a.jsx("div",{className:"text-4xl mb-3",children:""}),a.jsx("p",{className:"text-sm",children:"No assistance reports found"})]}):a.jsx("div",{className:"space-y-3",children:r.map(c=>a.jsxs("div",{style:{background:t?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",borderColor:e.border.primary},className:"border rounded-lg p-3 hover:bg-white/10 transition cursor-pointer group",onClick:()=>i(c),children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{style:{color:e.accent.primary},children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})})}),a.jsxs("div",{children:[a.jsx("span",{style:{color:e.accent.primary},className:"font-mono text-xs font-semibold",children:c.concernId}),a.jsx("span",{style:{color:e.text.tertiary},className:"text-xs ml-2",children:new Date(c.submittedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full border font-medium ${u(c.status)}`,children:c.status.replace("_"," ").toUpperCase()})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{style:{color:e.text.tertiary},className:"text-xs",children:"To:"}),a.jsx("span",{style:{color:e.text.secondary},className:"text-xs font-medium",children:c.reportTo})]}),c.selectedConcerns&&c.selectedConcerns.length>0&&a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{style:{color:e.text.tertiary},className:"text-xs",children:"Issue:"}),a.jsx("div",{className:"flex-1",children:a.jsxs("p",{style:{color:e.text.secondary},className:"text-xs",children:[c.selectedConcerns[0],c.selectedConcerns.length>1&&a.jsxs("span",{style:{color:e.accent.primary},className:"ml-1",children:["+",c.selectedConcerns.length-1," more"]})]})})]})]})]},c.id))})})]}),o&&a.jsx(Gv,{concern:o,onClose:()=>i(null)})]})}function Vv(){const{theme:e}=se(),[t,r]=x.useState(null);return a.jsx(Ov,{children:a.jsxs("div",{className:"flex flex-col gap-6 lg:grid lg:grid-cols-2 lg:gap-8",children:[a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsx($v,{balance:t,setBalance:r}),a.jsx("div",{className:"lg:hidden flex flex-col gap-2",children:a.jsx(ax,{onBalanceUpdate:r})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(qv,{}),a.jsx(Yv,{})]}),a.jsx("div",{className:"flex flex-col gap-2 lg:mt-0",children:a.jsx(Xv,{})})]}),a.jsx("div",{className:"hidden lg:block",children:a.jsx(ax,{onBalanceUpdate:r})})]})})}const Ze=({children:e})=>{const t=localStorage.getItem("adminToken"),r=JSON.parse(localStorage.getItem("adminData")||"{}");return console.log(" AdminProtectedRoute check:",{hasToken:!!t,adminData:r,currentPath:window.location.pathname}),t?(console.log(" Token found, rendering admin layout"),r.role==="merchant"?a.jsx(X1,{children:e}):a.jsx(P1,{children:e})):(console.log(" No token found, redirecting to login"),a.jsx(Ot,{to:"/login",replace:!0}))};function Qv(){return a.jsx(o1,{children:a.jsx(i1,{children:a.jsxs(r1,{children:[a.jsx(H1,{}),a.jsxs(Qb,{children:[a.jsx(ne,{path:"/login",element:a.jsx(q1,{})}),a.jsx(ne,{path:"/user/dashboard",element:a.jsx(V1,{children:a.jsx(Vv,{})})}),a.jsx(ne,{path:"/users-dashboard",element:a.jsx(Ot,{to:"/user/dashboard",replace:!0})}),a.jsxs(ne,{path:"/admin/treasury",children:[a.jsx(ne,{path:"dashboard",element:a.jsx(ut,{allowedRoles:["treasury"],children:a.jsx(nv,{})})}),a.jsx(ne,{path:"cashin",element:a.jsx(ut,{allowedRoles:["treasury"],children:a.jsx(sv,{})})}),a.jsx(ne,{path:"register",element:a.jsx(ut,{allowedRoles:["treasury"],children:a.jsx(Sv,{})})}),a.jsx(ne,{path:"transactions",element:a.jsx(ut,{allowedRoles:["treasury"],children:a.jsx(wv,{})})}),a.jsx(ne,{path:"merchants",element:a.jsx(ut,{allowedRoles:["treasury"],children:a.jsx(Cv,{})})}),a.jsx(ne,{path:"logs",element:a.jsx(ut,{allowedRoles:["treasury"],children:a.jsx(Ei,{})})}),a.jsx(ne,{path:"concerns",element:a.jsx(ut,{allowedRoles:["treasury"],children:a.jsx(Tv,{})})}),a.jsx(ne,{path:"config",element:a.jsx(ut,{allowedRoles:["treasury"],children:a.jsx(kv,{})})})]}),a.jsxs(ne,{path:"/admin/accounting",children:[a.jsx(ne,{index:!0,element:a.jsx(Ot,{to:"/admin/accounting/home",replace:!0})}),a.jsx(ne,{path:"home",element:a.jsx(ut,{allowedRoles:["accounting"],children:a.jsx(zv,{})})}),a.jsx(ne,{path:"transactions",element:a.jsx(ut,{allowedRoles:["accounting"],children:a.jsx(Bv,{})})}),a.jsx(ne,{path:"merchants",element:a.jsx(ut,{allowedRoles:["accounting"],children:a.jsx(Mv,{})})}),a.jsx(ne,{path:"logs",element:a.jsx(ut,{allowedRoles:["accounting"],children:a.jsx(Ei,{})})}),a.jsx(ne,{path:"concerns",element:a.jsx(ut,{allowedRoles:["accounting"],children:a.jsx(_v,{})})}),a.jsx(ne,{path:"config",element:a.jsx(ut,{allowedRoles:["accounting"],children:a.jsx(Lv,{})})})]}),a.jsx(ne,{path:"/admin/motorpool",element:a.jsx(Ze,{children:a.jsx(k5,{})})}),a.jsx(ne,{path:"/admin/motorpool/routes",element:a.jsx(Ze,{children:a.jsx(F5,{})})}),a.jsx(ne,{path:"/admin/motorpool/drivers",element:a.jsx(Ze,{children:a.jsx(z5,{})})}),a.jsx(ne,{path:"/admin/motorpool/shuttles",element:a.jsx(Ze,{children:a.jsx(D5,{})})}),a.jsx(ne,{path:"/admin/motorpool/trips",element:a.jsx(Ze,{children:a.jsx(A5,{})})}),a.jsx(ne,{path:"/admin/motorpool/phones",element:a.jsx(Ze,{children:a.jsx(B5,{})})}),a.jsx(ne,{path:"/admin/motorpool/concerns",element:a.jsx(Ze,{children:a.jsx(I5,{})})}),a.jsx(ne,{path:"/admin/motorpool/configurations",element:a.jsx(Ze,{children:a.jsx(U5,{})})}),a.jsx(ne,{path:"/admin/merchant",element:a.jsx(Ze,{children:a.jsx(H5,{})})}),a.jsx(ne,{path:"/admin/merchant/merchants",element:a.jsx(Ze,{children:a.jsx(Y5,{})})}),a.jsx(ne,{path:"/admin/merchant/phones",element:a.jsx(Ze,{children:a.jsx(G5,{})})}),a.jsx(ne,{path:"/admin/merchant/concerns",element:a.jsx(Ze,{children:a.jsx(X5,{})})}),a.jsx(ne,{path:"/admin/merchant/configurations",element:a.jsx(Ze,{children:a.jsx(V5,{})})}),a.jsx(ne,{path:"/admin/logs",element:a.jsx(Ze,{children:a.jsx(Ei,{})})}),a.jsx(ne,{path:"/admin/profile",element:a.jsx(Ze,{children:a.jsx(Rv,{})})}),a.jsx(ne,{path:"/admin/concerns",element:a.jsx(Ze,{children:a.jsx(Av,{})})}),a.jsx(ne,{path:"/",element:a.jsx(Ot,{to:"/login",replace:!0})}),a.jsx(ne,{path:"/admin",element:a.jsx(Ot,{to:"/admin/motorpool",replace:!0})}),a.jsx(ne,{path:"*",element:a.jsx(Ot,{to:"/login",replace:!0})})]})]})})})}tb.createRoot(document.getElementById("root")).render(a.jsx(xe.StrictMode,{children:a.jsx(Qv,{})}));
