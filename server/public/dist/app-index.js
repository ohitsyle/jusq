function Wb(e,a){for(var r=0;r<a.length;r++){const s=a[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const l=Object.getOwnPropertyDescriptor(s,n);l&&Object.defineProperty(e,n,l.get?l:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();function Ux(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Px={exports:{}},zo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb=Symbol.for("react.transitional.element"),qb=Symbol.for("react.fragment");function Wx(e,a,r){var s=null;if(r!==void 0&&(s=""+r),a.key!==void 0&&(s=""+a.key),"key"in a){r={};for(var n in a)n!=="key"&&(r[n]=a[n])}else r=a;return a=r.ref,{$$typeof:Hb,type:e,key:s,ref:a!==void 0?a:null,props:r}}zo.Fragment=qb;zo.jsx=Wx;zo.jsxs=Wx;Px.exports=zo;var t=Px.exports,Hx={exports:{}},me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yd=Symbol.for("react.transitional.element"),Yb=Symbol.for("react.portal"),Vb=Symbol.for("react.fragment"),Gb=Symbol.for("react.strict_mode"),Xb=Symbol.for("react.profiler"),Qb=Symbol.for("react.consumer"),Zb=Symbol.for("react.context"),Jb=Symbol.for("react.forward_ref"),Kb=Symbol.for("react.suspense"),eh=Symbol.for("react.memo"),qx=Symbol.for("react.lazy"),th=Symbol.for("react.activity"),Bu=Symbol.iterator;function ah(e){return e===null||typeof e!="object"?null:(e=Bu&&e[Bu]||e["@@iterator"],typeof e=="function"?e:null)}var Yx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vx=Object.assign,Gx={};function Os(e,a,r){this.props=e,this.context=a,this.refs=Gx,this.updater=r||Yx}Os.prototype.isReactComponent={};Os.prototype.setState=function(e,a){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,a,"setState")};Os.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xx(){}Xx.prototype=Os.prototype;function vd(e,a,r){this.props=e,this.context=a,this.refs=Gx,this.updater=r||Yx}var jd=vd.prototype=new Xx;jd.constructor=vd;Vx(jd,Os.prototype);jd.isPureReactComponent=!0;var Du=Array.isArray;function sc(){}var Le={H:null,A:null,T:null,S:null},Qx=Object.prototype.hasOwnProperty;function Nd(e,a,r){var s=r.ref;return{$$typeof:yd,type:e,key:a,ref:s!==void 0?s:null,props:r}}function rh(e,a){return Nd(e.type,a,e.props)}function Sd(e){return typeof e=="object"&&e!==null&&e.$$typeof===yd}function sh(e){var a={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return a[r]})}var _u=/\/+/g;function di(e,a){return typeof e=="object"&&e!==null&&e.key!=null?sh(""+e.key):a.toString(36)}function nh(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(sc,sc):(e.status="pending",e.then(function(a){e.status==="pending"&&(e.status="fulfilled",e.value=a)},function(a){e.status==="pending"&&(e.status="rejected",e.reason=a)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function ss(e,a,r,s,n){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case yd:case Yb:o=!0;break;case qx:return o=e._init,ss(o(e._payload),a,r,s,n)}}if(o)return n=n(e),o=s===""?"."+di(e,0):s,Du(n)?(r="",o!=null&&(r=o.replace(_u,"$&/")+"/"),ss(n,a,r,"",function(u){return u})):n!=null&&(Sd(n)&&(n=rh(n,r+(n.key==null||e&&e.key===n.key?"":(""+n.key).replace(_u,"$&/")+"/")+o)),a.push(n)),1;o=0;var i=s===""?".":s+":";if(Du(e))for(var d=0;d<e.length;d++)s=e[d],l=i+di(s,d),o+=ss(s,a,r,l,n);else if(d=ah(e),typeof d=="function")for(e=d.call(e),d=0;!(s=e.next()).done;)s=s.value,l=i+di(s,d++),o+=ss(s,a,r,l,n);else if(l==="object"){if(typeof e.then=="function")return ss(nh(e),a,r,s,n);throw a=String(e),Error("Objects are not valid as a React child (found: "+(a==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.")}return o}function dl(e,a,r){if(e==null)return e;var s=[],n=0;return ss(e,s,"","",function(l){return a.call(r,l,n++)}),s}function lh(e){if(e._status===-1){var a=e._result;a=a(),a.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=a)}if(e._status===1)return e._result.default;throw e._result}var Mu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},oh={map:dl,forEach:function(e,a,r){dl(e,function(){a.apply(this,arguments)},r)},count:function(e){var a=0;return dl(e,function(){a++}),a},toArray:function(e){return dl(e,function(a){return a})||[]},only:function(e){if(!Sd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Activity=th;me.Children=oh;me.Component=Os;me.Fragment=Vb;me.Profiler=Xb;me.PureComponent=vd;me.StrictMode=Gb;me.Suspense=Kb;me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Le;me.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Le.H.useMemoCache(e)}};me.cache=function(e){return function(){return e.apply(null,arguments)}};me.cacheSignal=function(){return null};me.cloneElement=function(e,a,r){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var s=Vx({},e.props),n=e.key;if(a!=null)for(l in a.key!==void 0&&(n=""+a.key),a)!Qx.call(a,l)||l==="key"||l==="__self"||l==="__source"||l==="ref"&&a.ref===void 0||(s[l]=a[l]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var o=Array(l),i=0;i<l;i++)o[i]=arguments[i+2];s.children=o}return Nd(e.type,n,s)};me.createContext=function(e){return e={$$typeof:Zb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:Qb,_context:e},e};me.createElement=function(e,a,r){var s,n={},l=null;if(a!=null)for(s in a.key!==void 0&&(l=""+a.key),a)Qx.call(a,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(n[s]=a[s]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var i=Array(o),d=0;d<o;d++)i[d]=arguments[d+2];n.children=i}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)n[s]===void 0&&(n[s]=o[s]);return Nd(e,l,n)};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:Jb,render:e}};me.isValidElement=Sd;me.lazy=function(e){return{$$typeof:qx,_payload:{_status:-1,_result:e},_init:lh}};me.memo=function(e,a){return{$$typeof:eh,type:e,compare:a===void 0?null:a}};me.startTransition=function(e){var a=Le.T,r={};Le.T=r;try{var s=e(),n=Le.S;n!==null&&n(r,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(sc,Mu)}catch(l){Mu(l)}finally{a!==null&&r.types!==null&&(a.types=r.types),Le.T=a}};me.unstable_useCacheRefresh=function(){return Le.H.useCacheRefresh()};me.use=function(e){return Le.H.use(e)};me.useActionState=function(e,a,r){return Le.H.useActionState(e,a,r)};me.useCallback=function(e,a){return Le.H.useCallback(e,a)};me.useContext=function(e){return Le.H.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e,a){return Le.H.useDeferredValue(e,a)};me.useEffect=function(e,a){return Le.H.useEffect(e,a)};me.useEffectEvent=function(e){return Le.H.useEffectEvent(e)};me.useId=function(){return Le.H.useId()};me.useImperativeHandle=function(e,a,r){return Le.H.useImperativeHandle(e,a,r)};me.useInsertionEffect=function(e,a){return Le.H.useInsertionEffect(e,a)};me.useLayoutEffect=function(e,a){return Le.H.useLayoutEffect(e,a)};me.useMemo=function(e,a){return Le.H.useMemo(e,a)};me.useOptimistic=function(e,a){return Le.H.useOptimistic(e,a)};me.useReducer=function(e,a,r){return Le.H.useReducer(e,a,r)};me.useRef=function(e){return Le.H.useRef(e)};me.useState=function(e){return Le.H.useState(e)};me.useSyncExternalStore=function(e,a,r){return Le.H.useSyncExternalStore(e,a,r)};me.useTransition=function(){return Le.H.useTransition()};me.version="19.2.3";Hx.exports=me;var p=Hx.exports;const ke=Ux(p),ih=Wb({__proto__:null,default:ke},[p]);var Zx={exports:{}},Bo={},Jx={exports:{}},Kx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function a(F,$){var N=F.length;F.push($);e:for(;0<N;){var w=N-1>>>1,k=F[w];if(0<n(k,$))F[w]=$,F[N]=k,N=w;else break e}}function r(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var $=F[0],N=F.pop();if(N!==$){F[0]=N;e:for(var w=0,k=F.length,A=k>>>1;w<A;){var O=2*(w+1)-1,q=F[O],U=O+1,H=F[U];if(0>n(q,N))U<k&&0>n(H,q)?(F[w]=H,F[U]=N,w=U):(F[w]=q,F[O]=N,w=O);else if(U<k&&0>n(H,N))F[w]=H,F[U]=N,w=U;else break e}}return $}function n(F,$){var N=F.sortIndex-$.sortIndex;return N!==0?N:F.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var d=[],u=[],c=1,x=null,m=3,h=!1,v=!1,S=!1,f=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;function j(F){for(var $=r(u);$!==null;){if($.callback===null)s(u);else if($.startTime<=F)s(u),$.sortIndex=$.expirationTime,a(d,$);else break;$=r(u)}}function C(F){if(S=!1,j(F),!v)if(r(d)!==null)v=!0,T||(T=!0,_());else{var $=r(u);$!==null&&B(C,$.startTime-F)}}var T=!1,E=-1,D=5,I=-1;function z(){return f?!0:!(e.unstable_now()-I<D)}function Y(){if(f=!1,T){var F=e.unstable_now();I=F;var $=!0;try{e:{v=!1,S&&(S=!1,b(E),E=-1),h=!0;var N=m;try{t:{for(j(F),x=r(d);x!==null&&!(x.expirationTime>F&&z());){var w=x.callback;if(typeof w=="function"){x.callback=null,m=x.priorityLevel;var k=w(x.expirationTime<=F);if(F=e.unstable_now(),typeof k=="function"){x.callback=k,j(F),$=!0;break t}x===r(d)&&s(d),j(F)}else s(d);x=r(d)}if(x!==null)$=!0;else{var A=r(u);A!==null&&B(C,A.startTime-F),$=!1}}break e}finally{x=null,m=N,h=!1}$=void 0}}finally{$?_():T=!1}}}var _;if(typeof g=="function")_=function(){g(Y)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,R=V.port2;V.port1.onmessage=Y,_=function(){R.postMessage(null)}}else _=function(){y(Y,0)};function B(F,$){E=y(function(){F(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(F){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var N=m;m=$;try{return F()}finally{m=N}},e.unstable_requestPaint=function(){f=!0},e.unstable_runWithPriority=function(F,$){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var N=m;m=F;try{return $()}finally{m=N}},e.unstable_scheduleCallback=function(F,$,N){var w=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?w+N:w):N=w,F){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=N+k,F={id:c++,callback:$,priorityLevel:F,startTime:N,expirationTime:k,sortIndex:-1},N>w?(F.sortIndex=N,a(u,F),r(d)===null&&F===r(u)&&(S?(b(E),E=-1):S=!0,B(C,N-w))):(F.sortIndex=k,a(d,F),v||h||(v=!0,T||(T=!0,_()))),F},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(F){var $=m;return function(){var N=m;m=$;try{return F.apply(this,arguments)}finally{m=N}}}})(Kx);Jx.exports=Kx;var ch=Jx.exports,em={exports:{}},jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh=p;function tm(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function $a(){}var bt={d:{f:$a,r:function(){throw Error(tm(522))},D:$a,C:$a,L:$a,m:$a,X:$a,S:$a,M:$a},p:0,findDOMNode:null},uh=Symbol.for("react.portal");function ph(e,a,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uh,key:s==null?null:""+s,children:e,containerInfo:a,implementation:r}}var mn=dh.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Do(e,a){if(e==="font")return"";if(typeof a=="string")return a==="use-credentials"?a:""}jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=bt;jt.createPortal=function(e,a){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)throw Error(tm(299));return ph(e,a,null,r)};jt.flushSync=function(e){var a=mn.T,r=bt.p;try{if(mn.T=null,bt.p=2,e)return e()}finally{mn.T=a,bt.p=r,bt.d.f()}};jt.preconnect=function(e,a){typeof e=="string"&&(a?(a=a.crossOrigin,a=typeof a=="string"?a==="use-credentials"?a:"":void 0):a=null,bt.d.C(e,a))};jt.prefetchDNS=function(e){typeof e=="string"&&bt.d.D(e)};jt.preinit=function(e,a){if(typeof e=="string"&&a&&typeof a.as=="string"){var r=a.as,s=Do(r,a.crossOrigin),n=typeof a.integrity=="string"?a.integrity:void 0,l=typeof a.fetchPriority=="string"?a.fetchPriority:void 0;r==="style"?bt.d.S(e,typeof a.precedence=="string"?a.precedence:void 0,{crossOrigin:s,integrity:n,fetchPriority:l}):r==="script"&&bt.d.X(e,{crossOrigin:s,integrity:n,fetchPriority:l,nonce:typeof a.nonce=="string"?a.nonce:void 0})}};jt.preinitModule=function(e,a){if(typeof e=="string")if(typeof a=="object"&&a!==null){if(a.as==null||a.as==="script"){var r=Do(a.as,a.crossOrigin);bt.d.M(e,{crossOrigin:r,integrity:typeof a.integrity=="string"?a.integrity:void 0,nonce:typeof a.nonce=="string"?a.nonce:void 0})}}else a==null&&bt.d.M(e)};jt.preload=function(e,a){if(typeof e=="string"&&typeof a=="object"&&a!==null&&typeof a.as=="string"){var r=a.as,s=Do(r,a.crossOrigin);bt.d.L(e,r,{crossOrigin:s,integrity:typeof a.integrity=="string"?a.integrity:void 0,nonce:typeof a.nonce=="string"?a.nonce:void 0,type:typeof a.type=="string"?a.type:void 0,fetchPriority:typeof a.fetchPriority=="string"?a.fetchPriority:void 0,referrerPolicy:typeof a.referrerPolicy=="string"?a.referrerPolicy:void 0,imageSrcSet:typeof a.imageSrcSet=="string"?a.imageSrcSet:void 0,imageSizes:typeof a.imageSizes=="string"?a.imageSizes:void 0,media:typeof a.media=="string"?a.media:void 0})}};jt.preloadModule=function(e,a){if(typeof e=="string")if(a){var r=Do(a.as,a.crossOrigin);bt.d.m(e,{as:typeof a.as=="string"&&a.as!=="script"?a.as:void 0,crossOrigin:r,integrity:typeof a.integrity=="string"?a.integrity:void 0})}else bt.d.m(e)};jt.requestFormReset=function(e){bt.d.r(e)};jt.unstable_batchedUpdates=function(e,a){return e(a)};jt.useFormState=function(e,a,r){return mn.H.useFormState(e,a,r)};jt.useFormStatus=function(){return mn.H.useHostTransitionStatus()};jt.version="19.2.3";function am(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(am)}catch(e){console.error(e)}}am(),em.exports=jt;var xh=em.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt=ch,rm=p,mh=xh;function K(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function sm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yn(e){var a=e,r=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,a.flags&4098&&(r=a.return),e=a.return;while(e)}return a.tag===3?r:null}function nm(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function lm(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function Iu(e){if(Yn(e)!==e)throw Error(K(188))}function fh(e){var a=e.alternate;if(!a){if(a=Yn(e),a===null)throw Error(K(188));return a!==e?null:e}for(var r=e,s=a;;){var n=r.return;if(n===null)break;var l=n.alternate;if(l===null){if(s=n.return,s!==null){r=s;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===r)return Iu(n),e;if(l===s)return Iu(n),a;l=l.sibling}throw Error(K(188))}if(r.return!==s.return)r=n,s=l;else{for(var o=!1,i=n.child;i;){if(i===r){o=!0,r=n,s=l;break}if(i===s){o=!0,s=n,r=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===r){o=!0,r=l,s=n;break}if(i===s){o=!0,s=l,r=n;break}i=i.sibling}if(!o)throw Error(K(189))}}if(r.alternate!==s)throw Error(K(190))}if(r.tag!==3)throw Error(K(188));return r.stateNode.current===r?e:a}function om(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=om(e),a!==null)return a;e=e.sibling}return null}var $e=Object.assign,gh=Symbol.for("react.element"),ul=Symbol.for("react.transitional.element"),cn=Symbol.for("react.portal"),os=Symbol.for("react.fragment"),im=Symbol.for("react.strict_mode"),nc=Symbol.for("react.profiler"),cm=Symbol.for("react.consumer"),ka=Symbol.for("react.context"),wd=Symbol.for("react.forward_ref"),lc=Symbol.for("react.suspense"),oc=Symbol.for("react.suspense_list"),Cd=Symbol.for("react.memo"),Pa=Symbol.for("react.lazy"),ic=Symbol.for("react.activity"),bh=Symbol.for("react.memo_cache_sentinel"),Lu=Symbol.iterator;function Js(e){return e===null||typeof e!="object"?null:(e=Lu&&e[Lu]||e["@@iterator"],typeof e=="function"?e:null)}var hh=Symbol.for("react.client.reference");function cc(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===hh?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case os:return"Fragment";case nc:return"Profiler";case im:return"StrictMode";case lc:return"Suspense";case oc:return"SuspenseList";case ic:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case cn:return"Portal";case ka:return e.displayName||"Context";case cm:return(e._context.displayName||"Context")+".Consumer";case wd:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cd:return a=e.displayName||null,a!==null?a:cc(e.type)||"Memo";case Pa:a=e._payload,e=e._init;try{return cc(e(a))}catch{}}return null}var dn=Array.isArray,pe=rm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=mh.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,zr={pending:!1,data:null,method:null,action:null},dc=[],is=-1;function ga(e){return{current:e}}function it(e){0>is||(e.current=dc[is],dc[is]=null,is--)}function _e(e,a){is++,dc[is]=e.current,e.current=a}var ma=ga(null),En=ga(null),er=ga(null),Jl=ga(null);function Kl(e,a){switch(_e(er,a),_e(En,e),_e(ma,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?Hp(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=Hp(a),e=Ag(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}it(ma),_e(ma,e)}function ks(){it(ma),it(En),it(er)}function uc(e){e.memoizedState!==null&&_e(Jl,e);var a=ma.current,r=Ag(a,e.type);a!==r&&(_e(En,e),_e(ma,r))}function eo(e){En.current===e&&(it(ma),it(En)),Jl.current===e&&(it(Jl),$n._currentValue=zr)}var ui,Ou;function Fr(e){if(ui===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);ui=a&&a[1]||"",Ou=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ui+e+Ou}var pi=!1;function xi(e,a){if(!e||pi)return"";pi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(a){var x=function(){throw Error()};if(Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(h){var m=h}Reflect.construct(e,[],x)}else{try{x.call()}catch(h){m=h}e.call(x.prototype)}}else{try{throw Error()}catch(h){m=h}(x=e())&&typeof x.catch=="function"&&x.catch(function(){})}}catch(h){if(h&&m&&typeof h.stack=="string")return[h.stack,m.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=s.DetermineComponentFrameRoot(),o=l[0],i=l[1];if(o&&i){var d=o.split(`
`),u=i.split(`
`);for(n=s=0;s<d.length&&!d[s].includes("DetermineComponentFrameRoot");)s++;for(;n<u.length&&!u[n].includes("DetermineComponentFrameRoot");)n++;if(s===d.length||n===u.length)for(s=d.length-1,n=u.length-1;1<=s&&0<=n&&d[s]!==u[n];)n--;for(;1<=s&&0<=n;s--,n--)if(d[s]!==u[n]){if(s!==1||n!==1)do if(s--,n--,0>n||d[s]!==u[n]){var c=`
`+d[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=n);break}}}finally{pi=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Fr(r):""}function yh(e,a){switch(e.tag){case 26:case 27:case 5:return Fr(e.type);case 16:return Fr("Lazy");case 13:return e.child!==a&&a!==null?Fr("Suspense Fallback"):Fr("Suspense");case 19:return Fr("SuspenseList");case 0:case 15:return xi(e.type,!1);case 11:return xi(e.type.render,!1);case 1:return xi(e.type,!0);case 31:return Fr("Activity");default:return""}}function $u(e){try{var a="",r=null;do a+=yh(e,r),r=e,e=e.return;while(e);return a}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var pc=Object.prototype.hasOwnProperty,kd=rt.unstable_scheduleCallback,mi=rt.unstable_cancelCallback,vh=rt.unstable_shouldYield,jh=rt.unstable_requestPaint,Lt=rt.unstable_now,Nh=rt.unstable_getCurrentPriorityLevel,dm=rt.unstable_ImmediatePriority,um=rt.unstable_UserBlockingPriority,to=rt.unstable_NormalPriority,Sh=rt.unstable_LowPriority,pm=rt.unstable_IdlePriority,wh=rt.log,Ch=rt.unstable_setDisableYieldValue,Vn=null,Ot=null;function Ga(e){if(typeof wh=="function"&&Ch(e),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(Vn,e)}catch{}}var $t=Math.clz32?Math.clz32:Th,kh=Math.log,Fh=Math.LN2;function Th(e){return e>>>=0,e===0?32:31-(kh(e)/Fh|0)|0}var pl=256,xl=262144,ml=4194304;function Tr(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _o(e,a,r){var s=e.pendingLanes;if(s===0)return 0;var n=0,l=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var i=s&134217727;return i!==0?(s=i&~l,s!==0?n=Tr(s):(o&=i,o!==0?n=Tr(o):r||(r=i&~e,r!==0&&(n=Tr(r))))):(i=s&~l,i!==0?n=Tr(i):o!==0?n=Tr(o):r||(r=s&~e,r!==0&&(n=Tr(r)))),n===0?0:a!==0&&a!==n&&!(a&l)&&(l=n&-n,r=a&-a,l>=r||l===32&&(r&4194048)!==0)?a:n}function Gn(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function Eh(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xm(){var e=ml;return ml<<=1,!(ml&62914560)&&(ml=4194304),e}function fi(e){for(var a=[],r=0;31>r;r++)a.push(e);return a}function Xn(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ah(e,a,r,s,n,l){var o=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var i=e.entanglements,d=e.expirationTimes,u=e.hiddenUpdates;for(r=o&~r;0<r;){var c=31-$t(r),x=1<<c;i[c]=0,d[c]=-1;var m=u[c];if(m!==null)for(u[c]=null,c=0;c<m.length;c++){var h=m[c];h!==null&&(h.lane&=-536870913)}r&=~x}s!==0&&mm(e,s,0),l!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=l&~(o&~a))}function mm(e,a,r){e.pendingLanes|=a,e.suspendedLanes&=~a;var s=31-$t(a);e.entangledLanes|=a,e.entanglements[s]=e.entanglements[s]|1073741824|r&261930}function fm(e,a){var r=e.entangledLanes|=a;for(e=e.entanglements;r;){var s=31-$t(r),n=1<<s;n&a|e[s]&a&&(e[s]|=a),r&=~n}}function gm(e,a){var r=a&-a;return r=r&42?1:Fd(r),r&(e.suspendedLanes|a)?0:r}function Fd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Td(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function bm(){var e=Te.p;return e!==0?e:(e=window.event,e===void 0?32:Ug(e.type))}function Uu(e,a){var r=Te.p;try{return Te.p=e,a()}finally{Te.p=r}}var mr=Math.random().toString(36).slice(2),dt="__reactFiber$"+mr,At="__reactProps$"+mr,$s="__reactContainer$"+mr,xc="__reactEvents$"+mr,Rh="__reactListeners$"+mr,zh="__reactHandles$"+mr,Pu="__reactResources$"+mr,Qn="__reactMarker$"+mr;function Ed(e){delete e[dt],delete e[At],delete e[xc],delete e[Rh],delete e[zh]}function cs(e){var a=e[dt];if(a)return a;for(var r=e.parentNode;r;){if(a=r[$s]||r[dt]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(e=Xp(e);e!==null;){if(r=e[dt])return r;e=Xp(e)}return a}e=r,r=e.parentNode}return null}function Us(e){if(e=e[dt]||e[$s]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function un(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(K(33))}function ys(e){var a=e[Pu];return a||(a=e[Pu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ot(e){e[Qn]=!0}var hm=new Set,ym={};function Yr(e,a){Fs(e,a),Fs(e+"Capture",a)}function Fs(e,a){for(ym[e]=a,e=0;e<a.length;e++)hm.add(a[e])}var Bh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wu={},Hu={};function Dh(e){return pc.call(Hu,e)?!0:pc.call(Wu,e)?!1:Bh.test(e)?Hu[e]=!0:(Wu[e]=!0,!1)}function zl(e,a,r){if(Dh(a))if(r===null)e.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var s=a.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+r)}}function fl(e,a,r){if(r===null)e.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+r)}}function ha(e,a,r,s){if(s===null)e.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(a,r,""+s)}}function Gt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vm(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function _h(e,a,r){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,l=s.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return n.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,a,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function mc(e){if(!e._valueTracker){var a=vm(e)?"checked":"value";e._valueTracker=_h(e,a,""+e[a])}}function jm(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var r=a.getValue(),s="";return e&&(s=vm(e)?e.checked?"true":"false":e.value),e=s,e!==r?(a.setValue(e),!0):!1}function ao(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Mh=/[\n"\\]/g;function Zt(e){return e.replace(Mh,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function fc(e,a,r,s,n,l,o,i){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),a!=null?o==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+Gt(a)):e.value!==""+Gt(a)&&(e.value=""+Gt(a)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),a!=null?gc(e,o,Gt(a)):r!=null?gc(e,o,Gt(r)):s!=null&&e.removeAttribute("value"),n==null&&l!=null&&(e.defaultChecked=!!l),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.name=""+Gt(i):e.removeAttribute("name")}function Nm(e,a,r,s,n,l,o,i){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),a!=null||r!=null){if(!(l!=="submit"&&l!=="reset"||a!=null)){mc(e);return}r=r!=null?""+Gt(r):"",a=a!=null?""+Gt(a):r,i||a===e.value||(e.value=a),e.defaultValue=a}s=s??n,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=i?e.checked:!!s,e.defaultChecked=!!s,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o),mc(e)}function gc(e,a,r){a==="number"&&ao(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function vs(e,a,r,s){if(e=e.options,a){a={};for(var n=0;n<r.length;n++)a["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=a.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Gt(r),a=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}a!==null||e[n].disabled||(a=e[n])}a!==null&&(a.selected=!0)}}function Sm(e,a,r){if(a!=null&&(a=""+Gt(a),a!==e.value&&(e.value=a),r==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=r!=null?""+Gt(r):""}function wm(e,a,r,s){if(a==null){if(s!=null){if(r!=null)throw Error(K(92));if(dn(s)){if(1<s.length)throw Error(K(93));s=s[0]}r=s}r==null&&(r=""),a=r}r=Gt(a),e.defaultValue=r,s=e.textContent,s===r&&s!==""&&s!==null&&(e.value=s),mc(e)}function Ts(e,a){if(a){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=a;return}}e.textContent=a}var Ih=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qu(e,a,r){var s=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?s?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":s?e.setProperty(a,r):typeof r!="number"||r===0||Ih.has(a)?a==="float"?e.cssFloat=r:e[a]=(""+r).trim():e[a]=r+"px"}function Cm(e,a,r){if(a!=null&&typeof a!="object")throw Error(K(62));if(e=e.style,r!=null){for(var s in r)!r.hasOwnProperty(s)||a!=null&&a.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var n in a)s=a[n],a.hasOwnProperty(n)&&r[n]!==s&&qu(e,n,s)}else for(var l in a)a.hasOwnProperty(l)&&qu(e,l,a[l])}function Ad(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Oh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bl(e){return Oh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Fa(){}var bc=null;function Rd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ds=null,js=null;function Yu(e){var a=Us(e);if(a&&(e=a.stateNode)){var r=e[At]||null;e:switch(e=a.stateNode,a.type){case"input":if(fc(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Zt(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var s=r[a];if(s!==e&&s.form===e.form){var n=s[At]||null;if(!n)throw Error(K(90));fc(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(a=0;a<r.length;a++)s=r[a],s.form===e.form&&jm(s)}break e;case"textarea":Sm(e,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&vs(e,!!r.multiple,a,!1)}}}var gi=!1;function km(e,a,r){if(gi)return e(a,r);gi=!0;try{var s=e(a);return s}finally{if(gi=!1,(ds!==null||js!==null)&&(Vo(),ds&&(a=ds,e=js,js=ds=null,Yu(a),e)))for(a=0;a<e.length;a++)Yu(e[a])}}function An(e,a){var r=e.stateNode;if(r===null)return null;var s=r[At]||null;if(s===null)return null;r=s[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(K(231,a,typeof r));return r}var Ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hc=!1;if(Ba)try{var Ks={};Object.defineProperty(Ks,"passive",{get:function(){hc=!0}}),window.addEventListener("test",Ks,Ks),window.removeEventListener("test",Ks,Ks)}catch{hc=!1}var Xa=null,zd=null,Dl=null;function Fm(){if(Dl)return Dl;var e,a=zd,r=a.length,s,n="value"in Xa?Xa.value:Xa.textContent,l=n.length;for(e=0;e<r&&a[e]===n[e];e++);var o=r-e;for(s=1;s<=o&&a[r-s]===n[l-s];s++);return Dl=n.slice(e,1<s?1-s:void 0)}function _l(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function gl(){return!0}function Vu(){return!1}function Rt(e){function a(r,s,n,l,o){this._reactName=r,this._targetInst=n,this.type=s,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?gl:Vu,this.isPropagationStopped=Vu,this}return $e(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=gl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=gl)},persist:function(){},isPersistent:gl}),a}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mo=Rt(Vr),Zn=$e({},Vr,{view:0,detail:0}),$h=Rt(Zn),bi,hi,en,Io=$e({},Zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&e.type==="mousemove"?(bi=e.screenX-en.screenX,hi=e.screenY-en.screenY):hi=bi=0,en=e),bi)},movementY:function(e){return"movementY"in e?e.movementY:hi}}),Gu=Rt(Io),Uh=$e({},Io,{dataTransfer:0}),Ph=Rt(Uh),Wh=$e({},Zn,{relatedTarget:0}),yi=Rt(Wh),Hh=$e({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),qh=Rt(Hh),Yh=$e({},Vr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vh=Rt(Yh),Gh=$e({},Vr,{data:0}),Xu=Rt(Gh),Xh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jh(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=Zh[e])?!!a[e]:!1}function Bd(){return Jh}var Kh=$e({},Zn,{key:function(e){if(e.key){var a=Xh[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=_l(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bd,charCode:function(e){return e.type==="keypress"?_l(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_l(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ey=Rt(Kh),ty=$e({},Io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qu=Rt(ty),ay=$e({},Zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bd}),ry=Rt(ay),sy=$e({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ny=Rt(sy),ly=$e({},Io,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oy=Rt(ly),iy=$e({},Vr,{newState:0,oldState:0}),cy=Rt(iy),dy=[9,13,27,32],Dd=Ba&&"CompositionEvent"in window,fn=null;Ba&&"documentMode"in document&&(fn=document.documentMode);var uy=Ba&&"TextEvent"in window&&!fn,Tm=Ba&&(!Dd||fn&&8<fn&&11>=fn),Zu=" ",Ju=!1;function Em(e,a){switch(e){case"keyup":return dy.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Am(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var us=!1;function py(e,a){switch(e){case"compositionend":return Am(a);case"keypress":return a.which!==32?null:(Ju=!0,Zu);case"textInput":return e=a.data,e===Zu&&Ju?null:e;default:return null}}function xy(e,a){if(us)return e==="compositionend"||!Dd&&Em(e,a)?(e=Fm(),Dl=zd=Xa=null,us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Tm&&a.locale!=="ko"?null:a.data;default:return null}}var my={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ku(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!my[e.type]:a==="textarea"}function Rm(e,a,r,s){ds?js?js.push(s):js=[s]:ds=s,a=jo(a,"onChange"),0<a.length&&(r=new Mo("onChange","change",null,r,s),e.push({event:r,listeners:a}))}var gn=null,Rn=null;function fy(e){Fg(e,0)}function Lo(e){var a=un(e);if(jm(a))return e}function ep(e,a){if(e==="change")return a}var zm=!1;if(Ba){var vi;if(Ba){var ji="oninput"in document;if(!ji){var tp=document.createElement("div");tp.setAttribute("oninput","return;"),ji=typeof tp.oninput=="function"}vi=ji}else vi=!1;zm=vi&&(!document.documentMode||9<document.documentMode)}function ap(){gn&&(gn.detachEvent("onpropertychange",Bm),Rn=gn=null)}function Bm(e){if(e.propertyName==="value"&&Lo(Rn)){var a=[];Rm(a,Rn,e,Rd(e)),km(fy,a)}}function gy(e,a,r){e==="focusin"?(ap(),gn=a,Rn=r,gn.attachEvent("onpropertychange",Bm)):e==="focusout"&&ap()}function by(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lo(Rn)}function hy(e,a){if(e==="click")return Lo(a)}function yy(e,a){if(e==="input"||e==="change")return Lo(a)}function vy(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var Pt=typeof Object.is=="function"?Object.is:vy;function zn(e,a){if(Pt(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var r=Object.keys(e),s=Object.keys(a);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!pc.call(a,n)||!Pt(e[n],a[n]))return!1}return!0}function rp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sp(e,a){var r=rp(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=a&&s>=a)return{node:r,offset:a-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rp(r)}}function Dm(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Dm(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function _m(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=ao(e.document);a instanceof e.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)e=a.contentWindow;else break;a=ao(e.document)}return a}function _d(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var jy=Ba&&"documentMode"in document&&11>=document.documentMode,ps=null,yc=null,bn=null,vc=!1;function np(e,a,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;vc||ps==null||ps!==ao(s)||(s=ps,"selectionStart"in s&&_d(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),bn&&zn(bn,s)||(bn=s,s=jo(yc,"onSelect"),0<s.length&&(a=new Mo("onSelect","select",null,a,r),e.push({event:a,listeners:s}),a.target=ps)))}function Nr(e,a){var r={};return r[e.toLowerCase()]=a.toLowerCase(),r["Webkit"+e]="webkit"+a,r["Moz"+e]="moz"+a,r}var xs={animationend:Nr("Animation","AnimationEnd"),animationiteration:Nr("Animation","AnimationIteration"),animationstart:Nr("Animation","AnimationStart"),transitionrun:Nr("Transition","TransitionRun"),transitionstart:Nr("Transition","TransitionStart"),transitioncancel:Nr("Transition","TransitionCancel"),transitionend:Nr("Transition","TransitionEnd")},Ni={},Mm={};Ba&&(Mm=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function Gr(e){if(Ni[e])return Ni[e];if(!xs[e])return e;var a=xs[e],r;for(r in a)if(a.hasOwnProperty(r)&&r in Mm)return Ni[e]=a[r];return e}var Im=Gr("animationend"),Lm=Gr("animationiteration"),Om=Gr("animationstart"),Ny=Gr("transitionrun"),Sy=Gr("transitionstart"),wy=Gr("transitioncancel"),$m=Gr("transitionend"),Um=new Map,jc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jc.push("scrollEnd");function ia(e,a){Um.set(e,a),Yr(a,[e])}var ro=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Vt=[],ms=0,Md=0;function Oo(){for(var e=ms,a=Md=ms=0;a<e;){var r=Vt[a];Vt[a++]=null;var s=Vt[a];Vt[a++]=null;var n=Vt[a];Vt[a++]=null;var l=Vt[a];if(Vt[a++]=null,s!==null&&n!==null){var o=s.pending;o===null?n.next=n:(n.next=o.next,o.next=n),s.pending=n}l!==0&&Pm(r,n,l)}}function $o(e,a,r,s){Vt[ms++]=e,Vt[ms++]=a,Vt[ms++]=r,Vt[ms++]=s,Md|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Id(e,a,r,s){return $o(e,a,r,s),so(e)}function Xr(e,a){return $o(e,null,null,a),so(e)}function Pm(e,a,r){e.lanes|=r;var s=e.alternate;s!==null&&(s.lanes|=r);for(var n=!1,l=e.return;l!==null;)l.childLanes|=r,s=l.alternate,s!==null&&(s.childLanes|=r),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(n=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,n&&a!==null&&(n=31-$t(r),e=l.hiddenUpdates,s=e[n],s===null?e[n]=[a]:s.push(a),a.lane=r|536870912),l):null}function so(e){if(50<kn)throw kn=0,Pc=null,Error(K(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var fs={};function Cy(e,a,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,a,r,s){return new Cy(e,a,r,s)}function Ld(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ea(e,a){var r=e.alternate;return r===null?(r=Mt(e.tag,a,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=a,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,a=e.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Wm(e,a){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,a=r.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function Ml(e,a,r,s,n,l){var o=0;if(s=e,typeof e=="function")Ld(e)&&(o=1);else if(typeof e=="string")o=A0(e,r,ma.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ic:return e=Mt(31,r,a,n),e.elementType=ic,e.lanes=l,e;case os:return Br(r.children,n,l,a);case im:o=8,n|=24;break;case nc:return e=Mt(12,r,a,n|2),e.elementType=nc,e.lanes=l,e;case lc:return e=Mt(13,r,a,n),e.elementType=lc,e.lanes=l,e;case oc:return e=Mt(19,r,a,n),e.elementType=oc,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ka:o=10;break e;case cm:o=9;break e;case wd:o=11;break e;case Cd:o=14;break e;case Pa:o=16,s=null;break e}o=29,r=Error(K(130,e===null?"null":typeof e,"")),s=null}return a=Mt(o,r,a,n),a.elementType=e,a.type=s,a.lanes=l,a}function Br(e,a,r,s){return e=Mt(7,e,s,a),e.lanes=r,e}function Si(e,a,r){return e=Mt(6,e,null,a),e.lanes=r,e}function Hm(e){var a=Mt(18,null,null,0);return a.stateNode=e,a}function wi(e,a,r){return a=Mt(4,e.children!==null?e.children:[],e.key,a),a.lanes=r,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var lp=new WeakMap;function Jt(e,a){if(typeof e=="object"&&e!==null){var r=lp.get(e);return r!==void 0?r:(a={value:e,source:a,stack:$u(a)},lp.set(e,a),a)}return{value:e,source:a,stack:$u(a)}}var gs=[],bs=0,no=null,Bn=0,Xt=[],Qt=0,dr=null,ua=1,pa="";function wa(e,a){gs[bs++]=Bn,gs[bs++]=no,no=e,Bn=a}function qm(e,a,r){Xt[Qt++]=ua,Xt[Qt++]=pa,Xt[Qt++]=dr,dr=e;var s=ua;e=pa;var n=32-$t(s)-1;s&=~(1<<n),r+=1;var l=32-$t(a)+n;if(30<l){var o=n-n%5;l=(s&(1<<o)-1).toString(32),s>>=o,n-=o,ua=1<<32-$t(a)+n|r<<n|s,pa=l+e}else ua=1<<l|r<<n|s,pa=e}function Od(e){e.return!==null&&(wa(e,1),qm(e,1,0))}function $d(e){for(;e===no;)no=gs[--bs],gs[bs]=null,Bn=gs[--bs],gs[bs]=null;for(;e===dr;)dr=Xt[--Qt],Xt[Qt]=null,pa=Xt[--Qt],Xt[Qt]=null,ua=Xt[--Qt],Xt[Qt]=null}function Ym(e,a){Xt[Qt++]=ua,Xt[Qt++]=pa,Xt[Qt++]=dr,ua=a.id,pa=a.overflow,dr=e}var ut=null,Ie=null,je=!1,tr=null,Kt=!1,Nc=Error(K(519));function ur(e){var a=Error(K(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dn(Jt(a,e)),Nc}function op(e){var a=e.stateNode,r=e.type,s=e.memoizedProps;switch(a[dt]=e,a[At]=s,r){case"dialog":he("cancel",a),he("close",a);break;case"iframe":case"object":case"embed":he("load",a);break;case"video":case"audio":for(r=0;r<Ln.length;r++)he(Ln[r],a);break;case"source":he("error",a);break;case"img":case"image":case"link":he("error",a),he("load",a);break;case"details":he("toggle",a);break;case"input":he("invalid",a),Nm(a,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":he("invalid",a);break;case"textarea":he("invalid",a),wm(a,s.value,s.defaultValue,s.children)}r=s.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||s.suppressHydrationWarning===!0||Eg(a.textContent,r)?(s.popover!=null&&(he("beforetoggle",a),he("toggle",a)),s.onScroll!=null&&he("scroll",a),s.onScrollEnd!=null&&he("scrollend",a),s.onClick!=null&&(a.onclick=Fa),a=!0):a=!1,a||ur(e,!0)}function ip(e){for(ut=e.return;ut;)switch(ut.tag){case 5:case 31:case 13:Kt=!1;return;case 27:case 3:Kt=!0;return;default:ut=ut.return}}function Kr(e){if(e!==ut)return!1;if(!je)return ip(e),je=!0,!1;var a=e.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Vc(e.type,e.memoizedProps)),r=!r),r&&Ie&&ur(e),ip(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));Ie=Gp(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));Ie=Gp(e)}else a===27?(a=Ie,fr(e.type)?(e=Zc,Zc=null,Ie=e):Ie=a):Ie=ut?ta(e.stateNode.nextSibling):null;return!0}function Or(){Ie=ut=null,je=!1}function Ci(){var e=tr;return e!==null&&(kt===null?kt=e:kt.push.apply(kt,e),tr=null),e}function Dn(e){tr===null?tr=[e]:tr.push(e)}var Sc=ga(null),Qr=null,Ta=null;function Ha(e,a,r){_e(Sc,a._currentValue),a._currentValue=r}function Aa(e){e._currentValue=Sc.current,it(Sc)}function wc(e,a,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,s!==null&&(s.childLanes|=a)):s!==null&&(s.childLanes&a)!==a&&(s.childLanes|=a),e===r)break;e=e.return}}function Cc(e,a,r,s){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var l=n.dependencies;if(l!==null){var o=n.child;l=l.firstContext;e:for(;l!==null;){var i=l;l=n;for(var d=0;d<a.length;d++)if(i.context===a[d]){l.lanes|=r,i=l.alternate,i!==null&&(i.lanes|=r),wc(l.return,r,e),s||(o=null);break e}l=i.next}}else if(n.tag===18){if(o=n.return,o===null)throw Error(K(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),wc(o,r,e),o=null}else o=n.child;if(o!==null)o.return=n;else for(o=n;o!==null;){if(o===e){o=null;break}if(n=o.sibling,n!==null){n.return=o.return,o=n;break}o=o.return}n=o}}function Ps(e,a,r,s){e=null;for(var n=a,l=!1;n!==null;){if(!l){if(n.flags&524288)l=!0;else if(n.flags&262144)break}if(n.tag===10){var o=n.alternate;if(o===null)throw Error(K(387));if(o=o.memoizedProps,o!==null){var i=n.type;Pt(n.pendingProps.value,o.value)||(e!==null?e.push(i):e=[i])}}else if(n===Jl.current){if(o=n.alternate,o===null)throw Error(K(387));o.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push($n):e=[$n])}n=n.return}e!==null&&Cc(a,e,r,s),a.flags|=262144}function lo(e){for(e=e.firstContext;e!==null;){if(!Pt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $r(e){Qr=e,Ta=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function pt(e){return Vm(Qr,e)}function bl(e,a){return Qr===null&&$r(e),Vm(e,a)}function Vm(e,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},Ta===null){if(e===null)throw Error(K(308));Ta=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else Ta=Ta.next=a;return r}var ky=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(r,s){e.push(s)}};this.abort=function(){a.aborted=!0,e.forEach(function(r){return r()})}},Fy=rt.unstable_scheduleCallback,Ty=rt.unstable_NormalPriority,Ke={$$typeof:ka,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ud(){return{controller:new ky,data:new Map,refCount:0}}function Jn(e){e.refCount--,e.refCount===0&&Fy(Ty,function(){e.controller.abort()})}var hn=null,kc=0,Es=0,Ns=null;function Ey(e,a){if(hn===null){var r=hn=[];kc=0,Es=pu(),Ns={status:"pending",value:void 0,then:function(s){r.push(s)}}}return kc++,a.then(cp,cp),a}function cp(){if(--kc===0&&hn!==null){Ns!==null&&(Ns.status="fulfilled");var e=hn;hn=null,Es=0,Ns=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function Ay(e,a){var r=[],s={status:"pending",value:null,reason:null,then:function(n){r.push(n)}};return e.then(function(){s.status="fulfilled",s.value=a;for(var n=0;n<r.length;n++)(0,r[n])(a)},function(n){for(s.status="rejected",s.reason=n,n=0;n<r.length;n++)(0,r[n])(void 0)}),s}var dp=pe.S;pe.S=function(e,a){ig=Lt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Ey(e,a),dp!==null&&dp(e,a)};var Dr=ga(null);function Pd(){var e=Dr.current;return e!==null?e:De.pooledCache}function Il(e,a){a===null?_e(Dr,Dr.current):_e(Dr,a.pool)}function Gm(){var e=Pd();return e===null?null:{parent:Ke._currentValue,pool:e}}var Ws=Error(K(460)),Wd=Error(K(474)),Uo=Error(K(542)),oo={then:function(){}};function up(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Xm(e,a,r){switch(r=e[r],r===void 0?e.push(a):r!==a&&(a.then(Fa,Fa),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,xp(e),e;default:if(typeof a.status=="string")a.then(Fa,Fa);else{if(e=De,e!==null&&100<e.shellSuspendCounter)throw Error(K(482));e=a,e.status="pending",e.then(function(s){if(a.status==="pending"){var n=a;n.status="fulfilled",n.value=s}},function(s){if(a.status==="pending"){var n=a;n.status="rejected",n.reason=s}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,xp(e),e}throw _r=a,Ws}}function Er(e){try{var a=e._init;return a(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(_r=r,Ws):r}}var _r=null;function pp(){if(_r===null)throw Error(K(459));var e=_r;return _r=null,e}function xp(e){if(e===Ws||e===Uo)throw Error(K(483))}var Ss=null,_n=0;function hl(e){var a=_n;return _n+=1,Ss===null&&(Ss=[]),Xm(Ss,e,a)}function tn(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function yl(e,a){throw a.$$typeof===gh?Error(K(525)):(e=Object.prototype.toString.call(a),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function Qm(e){function a(y,b){if(e){var g=y.deletions;g===null?(y.deletions=[b],y.flags|=16):g.push(b)}}function r(y,b){if(!e)return null;for(;b!==null;)a(y,b),b=b.sibling;return null}function s(y){for(var b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function n(y,b){return y=Ea(y,b),y.index=0,y.sibling=null,y}function l(y,b,g){return y.index=g,e?(g=y.alternate,g!==null?(g=g.index,g<b?(y.flags|=67108866,b):g):(y.flags|=67108866,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function i(y,b,g,j){return b===null||b.tag!==6?(b=Si(g,y.mode,j),b.return=y,b):(b=n(b,g),b.return=y,b)}function d(y,b,g,j){var C=g.type;return C===os?c(y,b,g.props.children,j,g.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Pa&&Er(C)===b.type)?(b=n(b,g.props),tn(b,g),b.return=y,b):(b=Ml(g.type,g.key,g.props,null,y.mode,j),tn(b,g),b.return=y,b)}function u(y,b,g,j){return b===null||b.tag!==4||b.stateNode.containerInfo!==g.containerInfo||b.stateNode.implementation!==g.implementation?(b=wi(g,y.mode,j),b.return=y,b):(b=n(b,g.children||[]),b.return=y,b)}function c(y,b,g,j,C){return b===null||b.tag!==7?(b=Br(g,y.mode,j,C),b.return=y,b):(b=n(b,g),b.return=y,b)}function x(y,b,g){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=Si(""+b,y.mode,g),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ul:return g=Ml(b.type,b.key,b.props,null,y.mode,g),tn(g,b),g.return=y,g;case cn:return b=wi(b,y.mode,g),b.return=y,b;case Pa:return b=Er(b),x(y,b,g)}if(dn(b)||Js(b))return b=Br(b,y.mode,g,null),b.return=y,b;if(typeof b.then=="function")return x(y,hl(b),g);if(b.$$typeof===ka)return x(y,bl(y,b),g);yl(y,b)}return null}function m(y,b,g,j){var C=b!==null?b.key:null;if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return C!==null?null:i(y,b,""+g,j);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ul:return g.key===C?d(y,b,g,j):null;case cn:return g.key===C?u(y,b,g,j):null;case Pa:return g=Er(g),m(y,b,g,j)}if(dn(g)||Js(g))return C!==null?null:c(y,b,g,j,null);if(typeof g.then=="function")return m(y,b,hl(g),j);if(g.$$typeof===ka)return m(y,b,bl(y,g),j);yl(y,g)}return null}function h(y,b,g,j,C){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return y=y.get(g)||null,i(b,y,""+j,C);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ul:return y=y.get(j.key===null?g:j.key)||null,d(b,y,j,C);case cn:return y=y.get(j.key===null?g:j.key)||null,u(b,y,j,C);case Pa:return j=Er(j),h(y,b,g,j,C)}if(dn(j)||Js(j))return y=y.get(g)||null,c(b,y,j,C,null);if(typeof j.then=="function")return h(y,b,g,hl(j),C);if(j.$$typeof===ka)return h(y,b,g,bl(b,j),C);yl(b,j)}return null}function v(y,b,g,j){for(var C=null,T=null,E=b,D=b=0,I=null;E!==null&&D<g.length;D++){E.index>D?(I=E,E=null):I=E.sibling;var z=m(y,E,g[D],j);if(z===null){E===null&&(E=I);break}e&&E&&z.alternate===null&&a(y,E),b=l(z,b,D),T===null?C=z:T.sibling=z,T=z,E=I}if(D===g.length)return r(y,E),je&&wa(y,D),C;if(E===null){for(;D<g.length;D++)E=x(y,g[D],j),E!==null&&(b=l(E,b,D),T===null?C=E:T.sibling=E,T=E);return je&&wa(y,D),C}for(E=s(E);D<g.length;D++)I=h(E,y,D,g[D],j),I!==null&&(e&&I.alternate!==null&&E.delete(I.key===null?D:I.key),b=l(I,b,D),T===null?C=I:T.sibling=I,T=I);return e&&E.forEach(function(Y){return a(y,Y)}),je&&wa(y,D),C}function S(y,b,g,j){if(g==null)throw Error(K(151));for(var C=null,T=null,E=b,D=b=0,I=null,z=g.next();E!==null&&!z.done;D++,z=g.next()){E.index>D?(I=E,E=null):I=E.sibling;var Y=m(y,E,z.value,j);if(Y===null){E===null&&(E=I);break}e&&E&&Y.alternate===null&&a(y,E),b=l(Y,b,D),T===null?C=Y:T.sibling=Y,T=Y,E=I}if(z.done)return r(y,E),je&&wa(y,D),C;if(E===null){for(;!z.done;D++,z=g.next())z=x(y,z.value,j),z!==null&&(b=l(z,b,D),T===null?C=z:T.sibling=z,T=z);return je&&wa(y,D),C}for(E=s(E);!z.done;D++,z=g.next())z=h(E,y,D,z.value,j),z!==null&&(e&&z.alternate!==null&&E.delete(z.key===null?D:z.key),b=l(z,b,D),T===null?C=z:T.sibling=z,T=z);return e&&E.forEach(function(_){return a(y,_)}),je&&wa(y,D),C}function f(y,b,g,j){if(typeof g=="object"&&g!==null&&g.type===os&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case ul:e:{for(var C=g.key;b!==null;){if(b.key===C){if(C=g.type,C===os){if(b.tag===7){r(y,b.sibling),j=n(b,g.props.children),j.return=y,y=j;break e}}else if(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Pa&&Er(C)===b.type){r(y,b.sibling),j=n(b,g.props),tn(j,g),j.return=y,y=j;break e}r(y,b);break}else a(y,b);b=b.sibling}g.type===os?(j=Br(g.props.children,y.mode,j,g.key),j.return=y,y=j):(j=Ml(g.type,g.key,g.props,null,y.mode,j),tn(j,g),j.return=y,y=j)}return o(y);case cn:e:{for(C=g.key;b!==null;){if(b.key===C)if(b.tag===4&&b.stateNode.containerInfo===g.containerInfo&&b.stateNode.implementation===g.implementation){r(y,b.sibling),j=n(b,g.children||[]),j.return=y,y=j;break e}else{r(y,b);break}else a(y,b);b=b.sibling}j=wi(g,y.mode,j),j.return=y,y=j}return o(y);case Pa:return g=Er(g),f(y,b,g,j)}if(dn(g))return v(y,b,g,j);if(Js(g)){if(C=Js(g),typeof C!="function")throw Error(K(150));return g=C.call(g),S(y,b,g,j)}if(typeof g.then=="function")return f(y,b,hl(g),j);if(g.$$typeof===ka)return f(y,b,bl(y,g),j);yl(y,g)}return typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint"?(g=""+g,b!==null&&b.tag===6?(r(y,b.sibling),j=n(b,g),j.return=y,y=j):(r(y,b),j=Si(g,y.mode,j),j.return=y,y=j),o(y)):r(y,b)}return function(y,b,g,j){try{_n=0;var C=f(y,b,g,j);return Ss=null,C}catch(E){if(E===Ws||E===Uo)throw E;var T=Mt(29,E,null,y.mode);return T.lanes=j,T.return=y,T}finally{}}}var Ur=Qm(!0),Zm=Qm(!1),Wa=!1;function Hd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fc(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ar(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function rr(e,a,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Fe&2){var n=s.pending;return n===null?a.next=a:(a.next=n.next,n.next=a),s.pending=a,a=so(e),Pm(e,null,r),a}return $o(e,s,a,r),so(e)}function yn(e,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var s=a.lanes;s&=e.pendingLanes,r|=s,a.lanes=r,fm(e,r)}}function ki(e,a){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var n=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var o={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};l===null?n=l=o:l=l.next=o,r=r.next}while(r!==null);l===null?n=l=a:l=l.next=a}else n=l=a;r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:s.shared,callbacks:s.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=a:e.next=a,r.lastBaseUpdate=a}var Tc=!1;function vn(){if(Tc){var e=Ns;if(e!==null)throw e}}function jn(e,a,r,s){Tc=!1;var n=e.updateQueue;Wa=!1;var l=n.firstBaseUpdate,o=n.lastBaseUpdate,i=n.shared.pending;if(i!==null){n.shared.pending=null;var d=i,u=d.next;d.next=null,o===null?l=u:o.next=u,o=d;var c=e.alternate;c!==null&&(c=c.updateQueue,i=c.lastBaseUpdate,i!==o&&(i===null?c.firstBaseUpdate=u:i.next=u,c.lastBaseUpdate=d))}if(l!==null){var x=n.baseState;o=0,c=u=d=null,i=l;do{var m=i.lane&-536870913,h=m!==i.lane;if(h?(ve&m)===m:(s&m)===m){m!==0&&m===Es&&(Tc=!0),c!==null&&(c=c.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var v=e,S=i;m=a;var f=r;switch(S.tag){case 1:if(v=S.payload,typeof v=="function"){x=v.call(f,x,m);break e}x=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,m=typeof v=="function"?v.call(f,x,m):v,m==null)break e;x=$e({},x,m);break e;case 2:Wa=!0}}m=i.callback,m!==null&&(e.flags|=64,h&&(e.flags|=8192),h=n.callbacks,h===null?n.callbacks=[m]:h.push(m))}else h={lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},c===null?(u=c=h,d=x):c=c.next=h,o|=m;if(i=i.next,i===null){if(i=n.shared.pending,i===null)break;h=i,i=h.next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}while(!0);c===null&&(d=x),n.baseState=d,n.firstBaseUpdate=u,n.lastBaseUpdate=c,l===null&&(n.shared.lanes=0),xr|=o,e.lanes=o,e.memoizedState=x}}function Jm(e,a){if(typeof e!="function")throw Error(K(191,e));e.call(a)}function Km(e,a){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Jm(r[e],a)}var As=ga(null),io=ga(0);function mp(e,a){e=Ia,_e(io,e),_e(As,a),Ia=e|a.baseLanes}function Ec(){_e(io,Ia),_e(As,As.current)}function qd(){Ia=io.current,it(As),it(io)}var Wt=ga(null),ea=null;function qa(e){var a=e.alternate;_e(Ye,Ye.current&1),_e(Wt,e),ea===null&&(a===null||As.current!==null||a.memoizedState!==null)&&(ea=e)}function Ac(e){_e(Ye,Ye.current),_e(Wt,e),ea===null&&(ea=e)}function ef(e){e.tag===22?(_e(Ye,Ye.current),_e(Wt,e),ea===null&&(ea=e)):Ya()}function Ya(){_e(Ye,Ye.current),_e(Wt,Wt.current)}function _t(e){it(Wt),ea===e&&(ea=null),it(Ye)}var Ye=ga(0);function co(e){for(var a=e;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Xc(r)||Qc(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Da=0,ge=null,Be=null,Ze=null,uo=!1,ws=!1,Pr=!1,po=0,Mn=0,Cs=null,Ry=0;function He(){throw Error(K(321))}function Yd(e,a){if(a===null)return!1;for(var r=0;r<a.length&&r<e.length;r++)if(!Pt(e[r],a[r]))return!1;return!0}function Vd(e,a,r,s,n,l){return Da=l,ge=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,pe.H=e===null||e.memoizedState===null?zf:su,Pr=!1,l=r(s,n),Pr=!1,ws&&(l=af(a,r,s,n)),tf(e),l}function tf(e){pe.H=In;var a=Be!==null&&Be.next!==null;if(Da=0,Ze=Be=ge=null,uo=!1,Mn=0,Cs=null,a)throw Error(K(300));e===null||et||(e=e.dependencies,e!==null&&lo(e)&&(et=!0))}function af(e,a,r,s){ge=e;var n=0;do{if(ws&&(Cs=null),Mn=0,ws=!1,25<=n)throw Error(K(301));if(n+=1,Ze=Be=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}pe.H=Bf,l=a(r,s)}while(ws);return l}function zy(){var e=pe.H,a=e.useState()[0];return a=typeof a.then=="function"?Kn(a):a,e=e.useState()[0],(Be!==null?Be.memoizedState:null)!==e&&(ge.flags|=1024),a}function Gd(){var e=po!==0;return po=0,e}function Xd(e,a,r){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~r}function Qd(e){if(uo){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}uo=!1}Da=0,Ze=Be=ge=null,ws=!1,Mn=po=0,Cs=null}function gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?ge.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function Ge(){if(Be===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var a=Ze===null?ge.memoizedState:Ze.next;if(a!==null)Ze=a,Be=e;else{if(e===null)throw ge.alternate===null?Error(K(467)):Error(K(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ze===null?ge.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function Po(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kn(e){var a=Mn;return Mn+=1,Cs===null&&(Cs=[]),e=Xm(Cs,e,a),a=ge,(Ze===null?a.memoizedState:Ze.next)===null&&(a=a.alternate,pe.H=a===null||a.memoizedState===null?zf:su),e}function Wo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Kn(e);if(e.$$typeof===ka)return pt(e)}throw Error(K(438,String(e)))}function Zd(e){var a=null,r=ge.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var s=ge.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(a={data:s.data.map(function(n){return n.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=Po(),ge.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(e),s=0;s<e;s++)r[s]=bh;return a.index++,r}function _a(e,a){return typeof a=="function"?a(e):a}function Ll(e){var a=Ge();return Jd(a,Be,e)}function Jd(e,a,r){var s=e.queue;if(s===null)throw Error(K(311));s.lastRenderedReducer=r;var n=e.baseQueue,l=s.pending;if(l!==null){if(n!==null){var o=n.next;n.next=l.next,l.next=o}a.baseQueue=n=l,s.pending=null}if(l=e.baseState,n===null)e.memoizedState=l;else{a=n.next;var i=o=null,d=null,u=a,c=!1;do{var x=u.lane&-536870913;if(x!==u.lane?(ve&x)===x:(Da&x)===x){var m=u.revertLane;if(m===0)d!==null&&(d=d.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),x===Es&&(c=!0);else if((Da&m)===m){u=u.next,m===Es&&(c=!0);continue}else x={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},d===null?(i=d=x,o=l):d=d.next=x,ge.lanes|=m,xr|=m;x=u.action,Pr&&r(l,x),l=u.hasEagerState?u.eagerState:r(l,x)}else m={lane:x,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},d===null?(i=d=m,o=l):d=d.next=m,ge.lanes|=x,xr|=x;u=u.next}while(u!==null&&u!==a);if(d===null?o=l:d.next=i,!Pt(l,e.memoizedState)&&(et=!0,c&&(r=Ns,r!==null)))throw r;e.memoizedState=l,e.baseState=o,e.baseQueue=d,s.lastRenderedState=l}return n===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Fi(e){var a=Ge(),r=a.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var s=r.dispatch,n=r.pending,l=a.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do l=e(l,o.action),o=o.next;while(o!==n);Pt(l,a.memoizedState)||(et=!0),a.memoizedState=l,a.baseQueue===null&&(a.baseState=l),r.lastRenderedState=l}return[l,s]}function rf(e,a,r){var s=ge,n=Ge(),l=je;if(l){if(r===void 0)throw Error(K(407));r=r()}else r=a();var o=!Pt((Be||n).memoizedState,r);if(o&&(n.memoizedState=r,et=!0),n=n.queue,Kd(lf.bind(null,s,n,e),[e]),n.getSnapshot!==a||o||Ze!==null&&Ze.memoizedState.tag&1){if(s.flags|=2048,Rs(9,{destroy:void 0},nf.bind(null,s,n,r,a),null),De===null)throw Error(K(349));l||Da&127||sf(s,a,r)}return r}function sf(e,a,r){e.flags|=16384,e={getSnapshot:a,value:r},a=ge.updateQueue,a===null?(a=Po(),ge.updateQueue=a,a.stores=[e]):(r=a.stores,r===null?a.stores=[e]:r.push(e))}function nf(e,a,r,s){a.value=r,a.getSnapshot=s,of(a)&&cf(e)}function lf(e,a,r){return r(function(){of(a)&&cf(e)})}function of(e){var a=e.getSnapshot;e=e.value;try{var r=a();return!Pt(e,r)}catch{return!0}}function cf(e){var a=Xr(e,2);a!==null&&Ft(a,e,2)}function Rc(e){var a=gt();if(typeof e=="function"){var r=e;if(e=r(),Pr){Ga(!0);try{r()}finally{Ga(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},a}function df(e,a,r,s){return e.baseState=r,Jd(e,Be,typeof s=="function"?s:_a)}function By(e,a,r,s,n){if(qo(e))throw Error(K(485));if(e=a.action,e!==null){var l={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){l.listeners.push(o)}};pe.T!==null?r(!0):l.isTransition=!1,s(l),r=a.pending,r===null?(l.next=a.pending=l,uf(a,l)):(l.next=r.next,a.pending=r.next=l)}}function uf(e,a){var r=a.action,s=a.payload,n=e.state;if(a.isTransition){var l=pe.T,o={};pe.T=o;try{var i=r(n,s),d=pe.S;d!==null&&d(o,i),fp(e,a,i)}catch(u){zc(e,a,u)}finally{l!==null&&o.types!==null&&(l.types=o.types),pe.T=l}}else try{l=r(n,s),fp(e,a,l)}catch(u){zc(e,a,u)}}function fp(e,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(s){gp(e,a,s)},function(s){return zc(e,a,s)}):gp(e,a,r)}function gp(e,a,r){a.status="fulfilled",a.value=r,pf(a),e.state=r,a=e.pending,a!==null&&(r=a.next,r===a?e.pending=null:(r=r.next,a.next=r,uf(e,r)))}function zc(e,a,r){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do a.status="rejected",a.reason=r,pf(a),a=a.next;while(a!==s)}e.action=null}function pf(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function xf(e,a){return a}function bp(e,a){if(je){var r=De.formState;if(r!==null){e:{var s=ge;if(je){if(Ie){t:{for(var n=Ie,l=Kt;n.nodeType!==8;){if(!l){n=null;break t}if(n=ta(n.nextSibling),n===null){n=null;break t}}l=n.data,n=l==="F!"||l==="F"?n:null}if(n){Ie=ta(n.nextSibling),s=n.data==="F!";break e}}ur(s)}s=!1}s&&(a=r[0])}}return r=gt(),r.memoizedState=r.baseState=a,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xf,lastRenderedState:a},r.queue=s,r=Ef.bind(null,ge,s),s.dispatch=r,s=Rc(!1),l=ru.bind(null,ge,!1,s.queue),s=gt(),n={state:a,dispatch:null,action:e,pending:null},s.queue=n,r=By.bind(null,ge,n,l,r),n.dispatch=r,s.memoizedState=e,[a,r,!1]}function hp(e){var a=Ge();return mf(a,Be,e)}function mf(e,a,r){if(a=Jd(e,a,xf)[0],e=Ll(_a)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var s=Kn(a)}catch(o){throw o===Ws?Uo:o}else s=a;a=Ge();var n=a.queue,l=n.dispatch;return r!==a.memoizedState&&(ge.flags|=2048,Rs(9,{destroy:void 0},Dy.bind(null,n,r),null)),[s,l,e]}function Dy(e,a){e.action=a}function yp(e){var a=Ge(),r=Be;if(r!==null)return mf(a,r,e);Ge(),a=a.memoizedState,r=Ge();var s=r.queue.dispatch;return r.memoizedState=e,[a,s,!1]}function Rs(e,a,r,s){return e={tag:e,create:r,deps:s,inst:a,next:null},a=ge.updateQueue,a===null&&(a=Po(),ge.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,a.lastEffect=e),e}function ff(){return Ge().memoizedState}function Ol(e,a,r,s){var n=gt();ge.flags|=e,n.memoizedState=Rs(1|a,{destroy:void 0},r,s===void 0?null:s)}function Ho(e,a,r,s){var n=Ge();s=s===void 0?null:s;var l=n.memoizedState.inst;Be!==null&&s!==null&&Yd(s,Be.memoizedState.deps)?n.memoizedState=Rs(a,l,r,s):(ge.flags|=e,n.memoizedState=Rs(1|a,l,r,s))}function vp(e,a){Ol(8390656,8,e,a)}function Kd(e,a){Ho(2048,8,e,a)}function _y(e){ge.flags|=4;var a=ge.updateQueue;if(a===null)a=Po(),ge.updateQueue=a,a.events=[e];else{var r=a.events;r===null?a.events=[e]:r.push(e)}}function gf(e){var a=Ge().memoizedState;return _y({ref:a,nextImpl:e}),function(){if(Fe&2)throw Error(K(440));return a.impl.apply(void 0,arguments)}}function bf(e,a){return Ho(4,2,e,a)}function hf(e,a){return Ho(4,4,e,a)}function yf(e,a){if(typeof a=="function"){e=e();var r=a(e);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function vf(e,a,r){r=r!=null?r.concat([e]):null,Ho(4,4,yf.bind(null,a,e),r)}function eu(){}function jf(e,a){var r=Ge();a=a===void 0?null:a;var s=r.memoizedState;return a!==null&&Yd(a,s[1])?s[0]:(r.memoizedState=[e,a],e)}function Nf(e,a){var r=Ge();a=a===void 0?null:a;var s=r.memoizedState;if(a!==null&&Yd(a,s[1]))return s[0];if(s=e(),Pr){Ga(!0);try{e()}finally{Ga(!1)}}return r.memoizedState=[s,a],s}function tu(e,a,r){return r===void 0||Da&1073741824&&!(ve&261930)?e.memoizedState=a:(e.memoizedState=r,e=dg(),ge.lanes|=e,xr|=e,r)}function Sf(e,a,r,s){return Pt(r,a)?r:As.current!==null?(e=tu(e,r,s),Pt(e,a)||(et=!0),e):!(Da&42)||Da&1073741824&&!(ve&261930)?(et=!0,e.memoizedState=r):(e=dg(),ge.lanes|=e,xr|=e,a)}function wf(e,a,r,s,n){var l=Te.p;Te.p=l!==0&&8>l?l:8;var o=pe.T,i={};pe.T=i,ru(e,!1,a,r);try{var d=n(),u=pe.S;if(u!==null&&u(i,d),d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=Ay(d,s);Nn(e,a,c,Ut(e))}else Nn(e,a,s,Ut(e))}catch(x){Nn(e,a,{then:function(){},status:"rejected",reason:x},Ut())}finally{Te.p=l,o!==null&&i.types!==null&&(o.types=i.types),pe.T=o}}function My(){}function Bc(e,a,r,s){if(e.tag!==5)throw Error(K(476));var n=Cf(e).queue;wf(e,n,a,zr,r===null?My:function(){return kf(e),r(s)})}function Cf(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:zr,baseState:zr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:zr},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:r},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function kf(e){var a=Cf(e);a.next===null&&(a=e.alternate.memoizedState),Nn(e,a.next.queue,{},Ut())}function au(){return pt($n)}function Ff(){return Ge().memoizedState}function Tf(){return Ge().memoizedState}function Iy(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var r=Ut();e=ar(r);var s=rr(a,e,r);s!==null&&(Ft(s,a,r),yn(s,a,r)),a={cache:Ud()},e.payload=a;return}a=a.return}}function Ly(e,a,r){var s=Ut();r={lane:s,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},qo(e)?Af(a,r):(r=Id(e,a,r,s),r!==null&&(Ft(r,e,s),Rf(r,a,s)))}function Ef(e,a,r){var s=Ut();Nn(e,a,r,s)}function Nn(e,a,r,s){var n={lane:s,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(qo(e))Af(a,n);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=a.lastRenderedReducer,l!==null))try{var o=a.lastRenderedState,i=l(o,r);if(n.hasEagerState=!0,n.eagerState=i,Pt(i,o))return $o(e,a,n,0),De===null&&Oo(),!1}catch{}finally{}if(r=Id(e,a,n,s),r!==null)return Ft(r,e,s),Rf(r,a,s),!0}return!1}function ru(e,a,r,s){if(s={lane:2,revertLane:pu(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},qo(e)){if(a)throw Error(K(479))}else a=Id(e,r,s,2),a!==null&&Ft(a,e,2)}function qo(e){var a=e.alternate;return e===ge||a!==null&&a===ge}function Af(e,a){ws=uo=!0;var r=e.pending;r===null?a.next=a:(a.next=r.next,r.next=a),e.pending=a}function Rf(e,a,r){if(r&4194048){var s=a.lanes;s&=e.pendingLanes,r|=s,a.lanes=r,fm(e,r)}}var In={readContext:pt,use:Wo,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useLayoutEffect:He,useInsertionEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useSyncExternalStore:He,useId:He,useHostTransitionStatus:He,useFormState:He,useActionState:He,useOptimistic:He,useMemoCache:He,useCacheRefresh:He};In.useEffectEvent=He;var zf={readContext:pt,use:Wo,useCallback:function(e,a){return gt().memoizedState=[e,a===void 0?null:a],e},useContext:pt,useEffect:vp,useImperativeHandle:function(e,a,r){r=r!=null?r.concat([e]):null,Ol(4194308,4,yf.bind(null,a,e),r)},useLayoutEffect:function(e,a){return Ol(4194308,4,e,a)},useInsertionEffect:function(e,a){Ol(4,2,e,a)},useMemo:function(e,a){var r=gt();a=a===void 0?null:a;var s=e();if(Pr){Ga(!0);try{e()}finally{Ga(!1)}}return r.memoizedState=[s,a],s},useReducer:function(e,a,r){var s=gt();if(r!==void 0){var n=r(a);if(Pr){Ga(!0);try{r(a)}finally{Ga(!1)}}}else n=a;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=Ly.bind(null,ge,e),[s.memoizedState,e]},useRef:function(e){var a=gt();return e={current:e},a.memoizedState=e},useState:function(e){e=Rc(e);var a=e.queue,r=Ef.bind(null,ge,a);return a.dispatch=r,[e.memoizedState,r]},useDebugValue:eu,useDeferredValue:function(e,a){var r=gt();return tu(r,e,a)},useTransition:function(){var e=Rc(!1);return e=wf.bind(null,ge,e.queue,!0,!1),gt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,r){var s=ge,n=gt();if(je){if(r===void 0)throw Error(K(407));r=r()}else{if(r=a(),De===null)throw Error(K(349));ve&127||sf(s,a,r)}n.memoizedState=r;var l={value:r,getSnapshot:a};return n.queue=l,vp(lf.bind(null,s,l,e),[e]),s.flags|=2048,Rs(9,{destroy:void 0},nf.bind(null,s,l,r,a),null),r},useId:function(){var e=gt(),a=De.identifierPrefix;if(je){var r=pa,s=ua;r=(s&~(1<<32-$t(s)-1)).toString(32)+r,a="_"+a+"R_"+r,r=po++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=Ry++,a="_"+a+"r_"+r.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:au,useFormState:bp,useActionState:bp,useOptimistic:function(e){var a=gt();a.memoizedState=a.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=ru.bind(null,ge,!0,r),r.dispatch=a,[e,a]},useMemoCache:Zd,useCacheRefresh:function(){return gt().memoizedState=Iy.bind(null,ge)},useEffectEvent:function(e){var a=gt(),r={impl:e};return a.memoizedState=r,function(){if(Fe&2)throw Error(K(440));return r.impl.apply(void 0,arguments)}}},su={readContext:pt,use:Wo,useCallback:jf,useContext:pt,useEffect:Kd,useImperativeHandle:vf,useInsertionEffect:bf,useLayoutEffect:hf,useMemo:Nf,useReducer:Ll,useRef:ff,useState:function(){return Ll(_a)},useDebugValue:eu,useDeferredValue:function(e,a){var r=Ge();return Sf(r,Be.memoizedState,e,a)},useTransition:function(){var e=Ll(_a)[0],a=Ge().memoizedState;return[typeof e=="boolean"?e:Kn(e),a]},useSyncExternalStore:rf,useId:Ff,useHostTransitionStatus:au,useFormState:hp,useActionState:hp,useOptimistic:function(e,a){var r=Ge();return df(r,Be,e,a)},useMemoCache:Zd,useCacheRefresh:Tf};su.useEffectEvent=gf;var Bf={readContext:pt,use:Wo,useCallback:jf,useContext:pt,useEffect:Kd,useImperativeHandle:vf,useInsertionEffect:bf,useLayoutEffect:hf,useMemo:Nf,useReducer:Fi,useRef:ff,useState:function(){return Fi(_a)},useDebugValue:eu,useDeferredValue:function(e,a){var r=Ge();return Be===null?tu(r,e,a):Sf(r,Be.memoizedState,e,a)},useTransition:function(){var e=Fi(_a)[0],a=Ge().memoizedState;return[typeof e=="boolean"?e:Kn(e),a]},useSyncExternalStore:rf,useId:Ff,useHostTransitionStatus:au,useFormState:yp,useActionState:yp,useOptimistic:function(e,a){var r=Ge();return Be!==null?df(r,Be,e,a):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Zd,useCacheRefresh:Tf};Bf.useEffectEvent=gf;function Ti(e,a,r,s){a=e.memoizedState,r=r(s,a),r=r==null?a:$e({},a,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Dc={enqueueSetState:function(e,a,r){e=e._reactInternals;var s=Ut(),n=ar(s);n.payload=a,r!=null&&(n.callback=r),a=rr(e,n,s),a!==null&&(Ft(a,e,s),yn(a,e,s))},enqueueReplaceState:function(e,a,r){e=e._reactInternals;var s=Ut(),n=ar(s);n.tag=1,n.payload=a,r!=null&&(n.callback=r),a=rr(e,n,s),a!==null&&(Ft(a,e,s),yn(a,e,s))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var r=Ut(),s=ar(r);s.tag=2,a!=null&&(s.callback=a),a=rr(e,s,r),a!==null&&(Ft(a,e,r),yn(a,e,r))}};function jp(e,a,r,s,n,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,l,o):a.prototype&&a.prototype.isPureReactComponent?!zn(r,s)||!zn(n,l):!0}function Np(e,a,r,s){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,s),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,s),a.state!==e&&Dc.enqueueReplaceState(a,a.state,null)}function Wr(e,a){var r=a;if("ref"in a){r={};for(var s in a)s!=="ref"&&(r[s]=a[s])}if(e=e.defaultProps){r===a&&(r=$e({},r));for(var n in e)r[n]===void 0&&(r[n]=e[n])}return r}function Df(e){ro(e)}function _f(e){console.error(e)}function Mf(e){ro(e)}function xo(e,a){try{var r=e.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(s){setTimeout(function(){throw s})}}function Sp(e,a,r){try{var s=e.onCaughtError;s(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function _c(e,a,r){return r=ar(r),r.tag=3,r.payload={element:null},r.callback=function(){xo(e,a)},r}function If(e){return e=ar(e),e.tag=3,e}function Lf(e,a,r,s){var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var l=s.value;e.payload=function(){return n(l)},e.callback=function(){Sp(a,r,s)}}var o=r.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){Sp(a,r,s),typeof n!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})})}function Oy(e,a,r,s,n){if(r.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(a=r.alternate,a!==null&&Ps(a,r,n,!0),r=Wt.current,r!==null){switch(r.tag){case 31:case 13:return ea===null?ho():r.alternate===null&&qe===0&&(qe=3),r.flags&=-257,r.flags|=65536,r.lanes=n,s===oo?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([s]):a.add(s),Oi(e,s,n)),!1;case 22:return r.flags|=65536,s===oo?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([s])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([s]):r.add(s)),Oi(e,s,n)),!1}throw Error(K(435,r.tag))}return Oi(e,s,n),ho(),!1}if(je)return a=Wt.current,a!==null?(!(a.flags&65536)&&(a.flags|=256),a.flags|=65536,a.lanes=n,s!==Nc&&(e=Error(K(422),{cause:s}),Dn(Jt(e,r)))):(s!==Nc&&(a=Error(K(423),{cause:s}),Dn(Jt(a,r))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,s=Jt(s,r),n=_c(e.stateNode,s,n),ki(e,n),qe!==4&&(qe=2)),!1;var l=Error(K(520),{cause:s});if(l=Jt(l,r),Cn===null?Cn=[l]:Cn.push(l),qe!==4&&(qe=2),a===null)return!0;s=Jt(s,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,e=n&-n,r.lanes|=e,e=_c(r.stateNode,s,e),ki(r,e),!1;case 1:if(a=r.type,l=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(sr===null||!sr.has(l))))return r.flags|=65536,n&=-n,r.lanes|=n,n=If(n),Lf(n,e,r,s),ki(r,n),!1}r=r.return}while(r!==null);return!1}var nu=Error(K(461)),et=!1;function ct(e,a,r,s){a.child=e===null?Zm(a,null,r,s):Ur(a,e.child,r,s)}function wp(e,a,r,s,n){r=r.render;var l=a.ref;if("ref"in s){var o={};for(var i in s)i!=="ref"&&(o[i]=s[i])}else o=s;return $r(a),s=Vd(e,a,r,o,l,n),i=Gd(),e!==null&&!et?(Xd(e,a,n),Ma(e,a,n)):(je&&i&&Od(a),a.flags|=1,ct(e,a,s,n),a.child)}function Cp(e,a,r,s,n){if(e===null){var l=r.type;return typeof l=="function"&&!Ld(l)&&l.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=l,Of(e,a,l,s,n)):(e=Ml(r.type,null,s,a,a.mode,n),e.ref=a.ref,e.return=a,a.child=e)}if(l=e.child,!lu(e,n)){var o=l.memoizedProps;if(r=r.compare,r=r!==null?r:zn,r(o,s)&&e.ref===a.ref)return Ma(e,a,n)}return a.flags|=1,e=Ea(l,s),e.ref=a.ref,e.return=a,a.child=e}function Of(e,a,r,s,n){if(e!==null){var l=e.memoizedProps;if(zn(l,s)&&e.ref===a.ref)if(et=!1,a.pendingProps=s=l,lu(e,n))e.flags&131072&&(et=!0);else return a.lanes=e.lanes,Ma(e,a,n)}return Mc(e,a,r,s,n)}function $f(e,a,r,s){var n=s.children,l=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(a.flags&128){if(l=l!==null?l.baseLanes|r:r,e!==null){for(s=a.child=e.child,n=0;s!==null;)n=n|s.lanes|s.childLanes,s=s.sibling;s=n&~l}else s=0,a.child=null;return kp(e,a,l,r,s)}if(r&536870912)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&Il(a,l!==null?l.cachePool:null),l!==null?mp(a,l):Ec(),ef(a);else return s=a.lanes=536870912,kp(e,a,l!==null?l.baseLanes|r:r,r,s)}else l!==null?(Il(a,l.cachePool),mp(a,l),Ya(),a.memoizedState=null):(e!==null&&Il(a,null),Ec(),Ya());return ct(e,a,n,r),a.child}function pn(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function kp(e,a,r,s,n){var l=Pd();return l=l===null?null:{parent:Ke._currentValue,pool:l},a.memoizedState={baseLanes:r,cachePool:l},e!==null&&Il(a,null),Ec(),ef(a),e!==null&&Ps(e,a,s,!0),a.childLanes=n,null}function $l(e,a){return a=mo({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function Fp(e,a,r){return Ur(a,e.child,null,r),e=$l(a,a.pendingProps),e.flags|=2,_t(a),a.memoizedState=null,e}function $y(e,a,r){var s=a.pendingProps,n=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(je){if(s.mode==="hidden")return e=$l(a,s),a.lanes=536870912,pn(null,e);if(Ac(a),(e=Ie)?(e=zg(e,Kt),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:dr!==null?{id:ua,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},r=Hm(e),r.return=a,a.child=r,ut=a,Ie=null)):e=null,e===null)throw ur(a);return a.lanes=536870912,null}return $l(a,s)}var l=e.memoizedState;if(l!==null){var o=l.dehydrated;if(Ac(a),n)if(a.flags&256)a.flags&=-257,a=Fp(e,a,r);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(K(558));else if(et||Ps(e,a,r,!1),n=(r&e.childLanes)!==0,et||n){if(s=De,s!==null&&(o=gm(s,r),o!==0&&o!==l.retryLane))throw l.retryLane=o,Xr(e,o),Ft(s,e,o),nu;ho(),a=Fp(e,a,r)}else e=l.treeContext,Ie=ta(o.nextSibling),ut=a,je=!0,tr=null,Kt=!1,e!==null&&Ym(a,e),a=$l(a,s),a.flags|=4096;return a}return e=Ea(e.child,{mode:s.mode,children:s.children}),e.ref=a.ref,a.child=e,e.return=a,e}function Ul(e,a){var r=a.ref;if(r===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(K(284));(e===null||e.ref!==r)&&(a.flags|=4194816)}}function Mc(e,a,r,s,n){return $r(a),r=Vd(e,a,r,s,void 0,n),s=Gd(),e!==null&&!et?(Xd(e,a,n),Ma(e,a,n)):(je&&s&&Od(a),a.flags|=1,ct(e,a,r,n),a.child)}function Tp(e,a,r,s,n,l){return $r(a),a.updateQueue=null,r=af(a,s,r,n),tf(e),s=Gd(),e!==null&&!et?(Xd(e,a,l),Ma(e,a,l)):(je&&s&&Od(a),a.flags|=1,ct(e,a,r,l),a.child)}function Ep(e,a,r,s,n){if($r(a),a.stateNode===null){var l=fs,o=r.contextType;typeof o=="object"&&o!==null&&(l=pt(o)),l=new r(s,l),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Dc,a.stateNode=l,l._reactInternals=a,l=a.stateNode,l.props=s,l.state=a.memoizedState,l.refs={},Hd(a),o=r.contextType,l.context=typeof o=="object"&&o!==null?pt(o):fs,l.state=a.memoizedState,o=r.getDerivedStateFromProps,typeof o=="function"&&(Ti(a,r,o,s),l.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(o=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),o!==l.state&&Dc.enqueueReplaceState(l,l.state,null),jn(a,s,l,n),vn(),l.state=a.memoizedState),typeof l.componentDidMount=="function"&&(a.flags|=4194308),s=!0}else if(e===null){l=a.stateNode;var i=a.memoizedProps,d=Wr(r,i);l.props=d;var u=l.context,c=r.contextType;o=fs,typeof c=="object"&&c!==null&&(o=pt(c));var x=r.getDerivedStateFromProps;c=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function",i=a.pendingProps!==i,c||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(i||u!==o)&&Np(a,l,s,o),Wa=!1;var m=a.memoizedState;l.state=m,jn(a,s,l,n),vn(),u=a.memoizedState,i||m!==u||Wa?(typeof x=="function"&&(Ti(a,r,x,s),u=a.memoizedState),(d=Wa||jp(a,r,d,s,m,u,o))?(c||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(a.flags|=4194308)):(typeof l.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=s,a.memoizedState=u),l.props=s,l.state=u,l.context=o,s=d):(typeof l.componentDidMount=="function"&&(a.flags|=4194308),s=!1)}else{l=a.stateNode,Fc(e,a),o=a.memoizedProps,c=Wr(r,o),l.props=c,x=a.pendingProps,m=l.context,u=r.contextType,d=fs,typeof u=="object"&&u!==null&&(d=pt(u)),i=r.getDerivedStateFromProps,(u=typeof i=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==x||m!==d)&&Np(a,l,s,d),Wa=!1,m=a.memoizedState,l.state=m,jn(a,s,l,n),vn();var h=a.memoizedState;o!==x||m!==h||Wa||e!==null&&e.dependencies!==null&&lo(e.dependencies)?(typeof i=="function"&&(Ti(a,r,i,s),h=a.memoizedState),(c=Wa||jp(a,r,c,s,m,h,d)||e!==null&&e.dependencies!==null&&lo(e.dependencies))?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,h,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,h,d)),typeof l.componentDidUpdate=="function"&&(a.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(a.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(a.flags|=1024),a.memoizedProps=s,a.memoizedState=h),l.props=s,l.state=h,l.context=d,s=c):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(a.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(a.flags|=1024),s=!1)}return l=s,Ul(e,a),s=(a.flags&128)!==0,l||s?(l=a.stateNode,r=s&&typeof r.getDerivedStateFromError!="function"?null:l.render(),a.flags|=1,e!==null&&s?(a.child=Ur(a,e.child,null,n),a.child=Ur(a,null,r,n)):ct(e,a,r,n),a.memoizedState=l.state,e=a.child):e=Ma(e,a,n),e}function Ap(e,a,r,s){return Or(),a.flags|=256,ct(e,a,r,s),a.child}var Ei={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ai(e){return{baseLanes:e,cachePool:Gm()}}function Ri(e,a,r){return e=e!==null?e.childLanes&~r:0,a&&(e|=It),e}function Uf(e,a,r){var s=a.pendingProps,n=!1,l=(a.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(Ye.current&2)!==0),o&&(n=!0,a.flags&=-129),o=(a.flags&32)!==0,a.flags&=-33,e===null){if(je){if(n?qa(a):Ya(),(e=Ie)?(e=zg(e,Kt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:dr!==null?{id:ua,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},r=Hm(e),r.return=a,a.child=r,ut=a,Ie=null)):e=null,e===null)throw ur(a);return Qc(e)?a.lanes=32:a.lanes=536870912,null}var i=s.children;return s=s.fallback,n?(Ya(),n=a.mode,i=mo({mode:"hidden",children:i},n),s=Br(s,n,r,null),i.return=a,s.return=a,i.sibling=s,a.child=i,s=a.child,s.memoizedState=Ai(r),s.childLanes=Ri(e,o,r),a.memoizedState=Ei,pn(null,s)):(qa(a),Ic(a,i))}var d=e.memoizedState;if(d!==null&&(i=d.dehydrated,i!==null)){if(l)a.flags&256?(qa(a),a.flags&=-257,a=zi(e,a,r)):a.memoizedState!==null?(Ya(),a.child=e.child,a.flags|=128,a=null):(Ya(),i=s.fallback,n=a.mode,s=mo({mode:"visible",children:s.children},n),i=Br(i,n,r,null),i.flags|=2,s.return=a,i.return=a,s.sibling=i,a.child=s,Ur(a,e.child,null,r),s=a.child,s.memoizedState=Ai(r),s.childLanes=Ri(e,o,r),a.memoizedState=Ei,a=pn(null,s));else if(qa(a),Qc(i)){if(o=i.nextSibling&&i.nextSibling.dataset,o)var u=o.dgst;o=u,s=Error(K(419)),s.stack="",s.digest=o,Dn({value:s,source:null,stack:null}),a=zi(e,a,r)}else if(et||Ps(e,a,r,!1),o=(r&e.childLanes)!==0,et||o){if(o=De,o!==null&&(s=gm(o,r),s!==0&&s!==d.retryLane))throw d.retryLane=s,Xr(e,s),Ft(o,e,s),nu;Xc(i)||ho(),a=zi(e,a,r)}else Xc(i)?(a.flags|=192,a.child=e.child,a=null):(e=d.treeContext,Ie=ta(i.nextSibling),ut=a,je=!0,tr=null,Kt=!1,e!==null&&Ym(a,e),a=Ic(a,s.children),a.flags|=4096);return a}return n?(Ya(),i=s.fallback,n=a.mode,d=e.child,u=d.sibling,s=Ea(d,{mode:"hidden",children:s.children}),s.subtreeFlags=d.subtreeFlags&65011712,u!==null?i=Ea(u,i):(i=Br(i,n,r,null),i.flags|=2),i.return=a,s.return=a,s.sibling=i,a.child=s,pn(null,s),s=a.child,i=e.child.memoizedState,i===null?i=Ai(r):(n=i.cachePool,n!==null?(d=Ke._currentValue,n=n.parent!==d?{parent:d,pool:d}:n):n=Gm(),i={baseLanes:i.baseLanes|r,cachePool:n}),s.memoizedState=i,s.childLanes=Ri(e,o,r),a.memoizedState=Ei,pn(e.child,s)):(qa(a),r=e.child,e=r.sibling,r=Ea(r,{mode:"visible",children:s.children}),r.return=a,r.sibling=null,e!==null&&(o=a.deletions,o===null?(a.deletions=[e],a.flags|=16):o.push(e)),a.child=r,a.memoizedState=null,r)}function Ic(e,a){return a=mo({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function mo(e,a){return e=Mt(22,e,null,a),e.lanes=0,e}function zi(e,a,r){return Ur(a,e.child,null,r),e=Ic(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function Rp(e,a,r){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a),wc(e.return,a,r)}function Bi(e,a,r,s,n,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n,treeForkCount:l}:(o.isBackwards=a,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=r,o.tailMode=n,o.treeForkCount=l)}function Pf(e,a,r){var s=a.pendingProps,n=s.revealOrder,l=s.tail;s=s.children;var o=Ye.current,i=(o&2)!==0;if(i?(o=o&1|2,a.flags|=128):o&=1,_e(Ye,o),ct(e,a,s,r),s=je?Bn:0,!i&&e!==null&&e.flags&128)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rp(e,r,a);else if(e.tag===19)Rp(e,r,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(r=a.child,n=null;r!==null;)e=r.alternate,e!==null&&co(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=a.child,a.child=null):(n=r.sibling,r.sibling=null),Bi(a,!1,n,r,l,s);break;case"backwards":case"unstable_legacy-backwards":for(r=null,n=a.child,a.child=null;n!==null;){if(e=n.alternate,e!==null&&co(e)===null){a.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Bi(a,!0,r,null,l,s);break;case"together":Bi(a,!1,null,null,void 0,s);break;default:a.memoizedState=null}return a.child}function Ma(e,a,r){if(e!==null&&(a.dependencies=e.dependencies),xr|=a.lanes,!(r&a.childLanes))if(e!==null){if(Ps(e,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(K(153));if(a.child!==null){for(e=a.child,r=Ea(e,e.pendingProps),a.child=r,r.return=a;e.sibling!==null;)e=e.sibling,r=r.sibling=Ea(e,e.pendingProps),r.return=a;r.sibling=null}return a.child}function lu(e,a){return e.lanes&a?!0:(e=e.dependencies,!!(e!==null&&lo(e)))}function Uy(e,a,r){switch(a.tag){case 3:Kl(a,a.stateNode.containerInfo),Ha(a,Ke,e.memoizedState.cache),Or();break;case 27:case 5:uc(a);break;case 4:Kl(a,a.stateNode.containerInfo);break;case 10:Ha(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Ac(a),null;break;case 13:var s=a.memoizedState;if(s!==null)return s.dehydrated!==null?(qa(a),a.flags|=128,null):r&a.child.childLanes?Uf(e,a,r):(qa(a),e=Ma(e,a,r),e!==null?e.sibling:null);qa(a);break;case 19:var n=(e.flags&128)!==0;if(s=(r&a.childLanes)!==0,s||(Ps(e,a,r,!1),s=(r&a.childLanes)!==0),n){if(s)return Pf(e,a,r);a.flags|=128}if(n=a.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),_e(Ye,Ye.current),s)break;return null;case 22:return a.lanes=0,$f(e,a,r,a.pendingProps);case 24:Ha(a,Ke,e.memoizedState.cache)}return Ma(e,a,r)}function Wf(e,a,r){if(e!==null)if(e.memoizedProps!==a.pendingProps)et=!0;else{if(!lu(e,r)&&!(a.flags&128))return et=!1,Uy(e,a,r);et=!!(e.flags&131072)}else et=!1,je&&a.flags&1048576&&qm(a,Bn,a.index);switch(a.lanes=0,a.tag){case 16:e:{var s=a.pendingProps;if(e=Er(a.elementType),a.type=e,typeof e=="function")Ld(e)?(s=Wr(e,s),a.tag=1,a=Ep(null,a,e,s,r)):(a.tag=0,a=Mc(null,a,e,s,r));else{if(e!=null){var n=e.$$typeof;if(n===wd){a.tag=11,a=wp(null,a,e,s,r);break e}else if(n===Cd){a.tag=14,a=Cp(null,a,e,s,r);break e}}throw a=cc(e)||e,Error(K(306,a,""))}}return a;case 0:return Mc(e,a,a.type,a.pendingProps,r);case 1:return s=a.type,n=Wr(s,a.pendingProps),Ep(e,a,s,n,r);case 3:e:{if(Kl(a,a.stateNode.containerInfo),e===null)throw Error(K(387));s=a.pendingProps;var l=a.memoizedState;n=l.element,Fc(e,a),jn(a,s,null,r);var o=a.memoizedState;if(s=o.cache,Ha(a,Ke,s),s!==l.cache&&Cc(a,[Ke],r,!0),vn(),s=o.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:o.cache},a.updateQueue.baseState=l,a.memoizedState=l,a.flags&256){a=Ap(e,a,s,r);break e}else if(s!==n){n=Jt(Error(K(424)),a),Dn(n),a=Ap(e,a,s,r);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ie=ta(e.firstChild),ut=a,je=!0,tr=null,Kt=!0,r=Zm(a,null,s,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Or(),s===n){a=Ma(e,a,r);break e}ct(e,a,s,r)}a=a.child}return a;case 26:return Ul(e,a),e===null?(r=Zp(a.type,null,a.pendingProps,null))?a.memoizedState=r:je||(r=a.type,e=a.pendingProps,s=No(er.current).createElement(r),s[dt]=a,s[At]=e,xt(s,r,e),ot(s),a.stateNode=s):a.memoizedState=Zp(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return uc(a),e===null&&je&&(s=a.stateNode=Bg(a.type,a.pendingProps,er.current),ut=a,Kt=!0,n=Ie,fr(a.type)?(Zc=n,Ie=ta(s.firstChild)):Ie=n),ct(e,a,a.pendingProps.children,r),Ul(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&je&&((n=s=Ie)&&(s=b0(s,a.type,a.pendingProps,Kt),s!==null?(a.stateNode=s,ut=a,Ie=ta(s.firstChild),Kt=!1,n=!0):n=!1),n||ur(a)),uc(a),n=a.type,l=a.pendingProps,o=e!==null?e.memoizedProps:null,s=l.children,Vc(n,l)?s=null:o!==null&&Vc(n,o)&&(a.flags|=32),a.memoizedState!==null&&(n=Vd(e,a,zy,null,null,r),$n._currentValue=n),Ul(e,a),ct(e,a,s,r),a.child;case 6:return e===null&&je&&((e=r=Ie)&&(r=h0(r,a.pendingProps,Kt),r!==null?(a.stateNode=r,ut=a,Ie=null,e=!0):e=!1),e||ur(a)),null;case 13:return Uf(e,a,r);case 4:return Kl(a,a.stateNode.containerInfo),s=a.pendingProps,e===null?a.child=Ur(a,null,s,r):ct(e,a,s,r),a.child;case 11:return wp(e,a,a.type,a.pendingProps,r);case 7:return ct(e,a,a.pendingProps,r),a.child;case 8:return ct(e,a,a.pendingProps.children,r),a.child;case 12:return ct(e,a,a.pendingProps.children,r),a.child;case 10:return s=a.pendingProps,Ha(a,a.type,s.value),ct(e,a,s.children,r),a.child;case 9:return n=a.type._context,s=a.pendingProps.children,$r(a),n=pt(n),s=s(n),a.flags|=1,ct(e,a,s,r),a.child;case 14:return Cp(e,a,a.type,a.pendingProps,r);case 15:return Of(e,a,a.type,a.pendingProps,r);case 19:return Pf(e,a,r);case 31:return $y(e,a,r);case 22:return $f(e,a,r,a.pendingProps);case 24:return $r(a),s=pt(Ke),e===null?(n=Pd(),n===null&&(n=De,l=Ud(),n.pooledCache=l,l.refCount++,l!==null&&(n.pooledCacheLanes|=r),n=l),a.memoizedState={parent:s,cache:n},Hd(a),Ha(a,Ke,n)):(e.lanes&r&&(Fc(e,a),jn(a,null,null,r),vn()),n=e.memoizedState,l=a.memoizedState,n.parent!==s?(n={parent:s,cache:s},a.memoizedState=n,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=n),Ha(a,Ke,s)):(s=l.cache,Ha(a,Ke,s),s!==n.cache&&Cc(a,[Ke],r,!0))),ct(e,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(K(156,a.tag))}function ya(e){e.flags|=4}function Di(e,a,r,s,n){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(n&335544128)===n)if(e.stateNode.complete)e.flags|=8192;else if(xg())e.flags|=8192;else throw _r=oo,Wd}else e.flags&=-16777217}function zp(e,a){if(a.type!=="stylesheet"||a.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Mg(a))if(xg())e.flags|=8192;else throw _r=oo,Wd}function vl(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?xm():536870912,e.lanes|=a,zs|=a)}function an(e,a){if(!je)switch(e.tailMode){case"hidden":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Me(e){var a=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(a)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags&65011712,s|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=r,a}function Py(e,a,r){var s=a.pendingProps;switch($d(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(a),null;case 1:return Me(a),null;case 3:return r=a.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),Aa(Ke),ks(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Kr(a)?ya(a):e===null||e.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,Ci())),Me(a),null;case 26:var n=a.type,l=a.memoizedState;return e===null?(ya(a),l!==null?(Me(a),zp(a,l)):(Me(a),Di(a,n,null,s,r))):l?l!==e.memoizedState?(ya(a),Me(a),zp(a,l)):(Me(a),a.flags&=-16777217):(e=e.memoizedProps,e!==s&&ya(a),Me(a),Di(a,n,e,s,r)),null;case 27:if(eo(a),r=er.current,n=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==s&&ya(a);else{if(!s){if(a.stateNode===null)throw Error(K(166));return Me(a),null}e=ma.current,Kr(a)?op(a):(e=Bg(n,s,r),a.stateNode=e,ya(a))}return Me(a),null;case 5:if(eo(a),n=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==s&&ya(a);else{if(!s){if(a.stateNode===null)throw Error(K(166));return Me(a),null}if(l=ma.current,Kr(a))op(a);else{var o=No(er.current);switch(l){case 1:l=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:l=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":l=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":l=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":l=o.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof s.is=="string"?o.createElement("select",{is:s.is}):o.createElement("select"),s.multiple?l.multiple=!0:s.size&&(l.size=s.size);break;default:l=typeof s.is=="string"?o.createElement(n,{is:s.is}):o.createElement(n)}}l[dt]=a,l[At]=s;e:for(o=a.child;o!==null;){if(o.tag===5||o.tag===6)l.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}a.stateNode=l;e:switch(xt(l,n,s),n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ya(a)}}return Me(a),Di(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,r),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==s&&ya(a);else{if(typeof s!="string"&&a.stateNode===null)throw Error(K(166));if(e=er.current,Kr(a)){if(e=a.stateNode,r=a.memoizedProps,s=null,n=ut,n!==null)switch(n.tag){case 27:case 5:s=n.memoizedProps}e[dt]=a,e=!!(e.nodeValue===r||s!==null&&s.suppressHydrationWarning===!0||Eg(e.nodeValue,r)),e||ur(a,!0)}else e=No(e).createTextNode(s),e[dt]=a,a.stateNode=e}return Me(a),null;case 31:if(r=a.memoizedState,e===null||e.memoizedState!==null){if(s=Kr(a),r!==null){if(e===null){if(!s)throw Error(K(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(557));e[dt]=a}else Or(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;Me(a),e=!1}else r=Ci(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return a.flags&256?(_t(a),a):(_t(a),null);if(a.flags&128)throw Error(K(558))}return Me(a),null;case 13:if(s=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=Kr(a),s!==null&&s.dehydrated!==null){if(e===null){if(!n)throw Error(K(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(K(317));n[dt]=a}else Or(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;Me(a),n=!1}else n=Ci(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return a.flags&256?(_t(a),a):(_t(a),null)}return _t(a),a.flags&128?(a.lanes=r,a):(r=s!==null,e=e!==null&&e.memoizedState!==null,r&&(s=a.child,n=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(n=s.alternate.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==n&&(s.flags|=2048)),r!==e&&r&&(a.child.flags|=8192),vl(a,a.updateQueue),Me(a),null);case 4:return ks(),e===null&&xu(a.stateNode.containerInfo),Me(a),null;case 10:return Aa(a.type),Me(a),null;case 19:if(it(Ye),s=a.memoizedState,s===null)return Me(a),null;if(n=(a.flags&128)!==0,l=s.rendering,l===null)if(n)an(s,!1);else{if(qe!==0||e!==null&&e.flags&128)for(e=a.child;e!==null;){if(l=co(e),l!==null){for(a.flags|=128,an(s,!1),e=l.updateQueue,a.updateQueue=e,vl(a,e),a.subtreeFlags=0,e=r,r=a.child;r!==null;)Wm(r,e),r=r.sibling;return _e(Ye,Ye.current&1|2),je&&wa(a,s.treeForkCount),a.child}e=e.sibling}s.tail!==null&&Lt()>go&&(a.flags|=128,n=!0,an(s,!1),a.lanes=4194304)}else{if(!n)if(e=co(l),e!==null){if(a.flags|=128,n=!0,e=e.updateQueue,a.updateQueue=e,vl(a,e),an(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!je)return Me(a),null}else 2*Lt()-s.renderingStartTime>go&&r!==536870912&&(a.flags|=128,n=!0,an(s,!1),a.lanes=4194304);s.isBackwards?(l.sibling=a.child,a.child=l):(e=s.last,e!==null?e.sibling=l:a.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Lt(),e.sibling=null,r=Ye.current,_e(Ye,n?r&1|2:r&1),je&&wa(a,s.treeForkCount),e):(Me(a),null);case 22:case 23:return _t(a),qd(),s=a.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(a.flags|=8192):s&&(a.flags|=8192),s?r&536870912&&!(a.flags&128)&&(Me(a),a.subtreeFlags&6&&(a.flags|=8192)):Me(a),r=a.updateQueue,r!==null&&vl(a,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==r&&(a.flags|=2048),e!==null&&it(Dr),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Aa(Ke),Me(a),null;case 25:return null;case 30:return null}throw Error(K(156,a.tag))}function Wy(e,a){switch($d(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return Aa(Ke),ks(),e=a.flags,e&65536&&!(e&128)?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return eo(a),null;case 31:if(a.memoizedState!==null){if(_t(a),a.alternate===null)throw Error(K(340));Or()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(_t(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(K(340));Or()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return it(Ye),null;case 4:return ks(),null;case 10:return Aa(a.type),null;case 22:case 23:return _t(a),qd(),e!==null&&it(Dr),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return Aa(Ke),null;case 25:return null;default:return null}}function Hf(e,a){switch($d(a),a.tag){case 3:Aa(Ke),ks();break;case 26:case 27:case 5:eo(a);break;case 4:ks();break;case 31:a.memoizedState!==null&&_t(a);break;case 13:_t(a);break;case 19:it(Ye);break;case 10:Aa(a.type);break;case 22:case 23:_t(a),qd(),e!==null&&it(Dr);break;case 24:Aa(Ke)}}function el(e,a){try{var r=a.updateQueue,s=r!==null?r.lastEffect:null;if(s!==null){var n=s.next;r=n;do{if((r.tag&e)===e){s=void 0;var l=r.create,o=r.inst;s=l(),o.destroy=s}r=r.next}while(r!==n)}}catch(i){Ae(a,a.return,i)}}function pr(e,a,r){try{var s=a.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var l=n.next;s=l;do{if((s.tag&e)===e){var o=s.inst,i=o.destroy;if(i!==void 0){o.destroy=void 0,n=a;var d=r,u=i;try{u()}catch(c){Ae(n,d,c)}}}s=s.next}while(s!==l)}}catch(c){Ae(a,a.return,c)}}function qf(e){var a=e.updateQueue;if(a!==null){var r=e.stateNode;try{Km(a,r)}catch(s){Ae(e,e.return,s)}}}function Yf(e,a,r){r.props=Wr(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(s){Ae(e,a,s)}}function Sn(e,a){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof r=="function"?e.refCleanup=r(s):r.current=s}}catch(n){Ae(e,a,n)}}function xa(e,a){var r=e.ref,s=e.refCleanup;if(r!==null)if(typeof s=="function")try{s()}catch(n){Ae(e,a,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(n){Ae(e,a,n)}else r.current=null}function Vf(e){var a=e.type,r=e.memoizedProps,s=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&s.focus();break e;case"img":r.src?s.src=r.src:r.srcSet&&(s.srcset=r.srcSet)}}catch(n){Ae(e,e.return,n)}}function _i(e,a,r){try{var s=e.stateNode;u0(s,e.type,r,a),s[At]=a}catch(n){Ae(e,e.return,n)}}function Gf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fr(e.type)||e.tag===4}function Mi(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lc(e,a,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(e),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=Fa));else if(s!==4&&(s===27&&fr(e.type)&&(r=e.stateNode,a=null),e=e.child,e!==null))for(Lc(e,a,r),e=e.sibling;e!==null;)Lc(e,a,r),e=e.sibling}function fo(e,a,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,a?r.insertBefore(e,a):r.appendChild(e);else if(s!==4&&(s===27&&fr(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(fo(e,a,r),e=e.sibling;e!==null;)fo(e,a,r),e=e.sibling}function Xf(e){var a=e.stateNode,r=e.memoizedProps;try{for(var s=e.type,n=a.attributes;n.length;)a.removeAttributeNode(n[0]);xt(a,s,r),a[dt]=e,a[At]=r}catch(l){Ae(e,e.return,l)}}var Ca=!1,Je=!1,Ii=!1,Bp=typeof WeakSet=="function"?WeakSet:Set,lt=null;function Hy(e,a){if(e=e.containerInfo,qc=ko,e=_m(e),_d(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var n=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var o=0,i=-1,d=-1,u=0,c=0,x=e,m=null;t:for(;;){for(var h;x!==r||n!==0&&x.nodeType!==3||(i=o+n),x!==l||s!==0&&x.nodeType!==3||(d=o+s),x.nodeType===3&&(o+=x.nodeValue.length),(h=x.firstChild)!==null;)m=x,x=h;for(;;){if(x===e)break t;if(m===r&&++u===n&&(i=o),m===l&&++c===s&&(d=o),(h=x.nextSibling)!==null)break;x=m,m=x.parentNode}x=h}r=i===-1||d===-1?null:{start:i,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Yc={focusedElem:e,selectionRange:r},ko=!1,lt=a;lt!==null;)if(a=lt,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,lt=e;else for(;lt!==null;){switch(a=lt,l=a.alternate,e=a.flags,a.tag){case 0:if(e&4&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)n=e[r],n.ref.impl=n.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&l!==null){e=void 0,r=a,n=l.memoizedProps,l=l.memoizedState,s=r.stateNode;try{var v=Wr(r.type,n);e=s.getSnapshotBeforeUpdate(v,l),s.__reactInternalSnapshotBeforeUpdate=e}catch(S){Ae(r,r.return,S)}}break;case 3:if(e&1024){if(e=a.stateNode.containerInfo,r=e.nodeType,r===9)Gc(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Gc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(K(163))}if(e=a.sibling,e!==null){e.return=a.return,lt=e;break}lt=a.return}}function Qf(e,a,r){var s=r.flags;switch(r.tag){case 0:case 11:case 15:ja(e,r),s&4&&el(5,r);break;case 1:if(ja(e,r),s&4)if(e=r.stateNode,a===null)try{e.componentDidMount()}catch(o){Ae(r,r.return,o)}else{var n=Wr(r.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(n,a,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Ae(r,r.return,o)}}s&64&&qf(r),s&512&&Sn(r,r.return);break;case 3:if(ja(e,r),s&64&&(e=r.updateQueue,e!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{Km(e,a)}catch(o){Ae(r,r.return,o)}}break;case 27:a===null&&s&4&&Xf(r);case 26:case 5:ja(e,r),a===null&&s&4&&Vf(r),s&512&&Sn(r,r.return);break;case 12:ja(e,r);break;case 31:ja(e,r),s&4&&Kf(e,r);break;case 13:ja(e,r),s&4&&eg(e,r),s&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=Ky.bind(null,r),y0(e,r))));break;case 22:if(s=r.memoizedState!==null||Ca,!s){a=a!==null&&a.memoizedState!==null||Je,n=Ca;var l=Je;Ca=s,(Je=a)&&!l?Sa(e,r,(r.subtreeFlags&8772)!==0):ja(e,r),Ca=n,Je=l}break;case 30:break;default:ja(e,r)}}function Zf(e){var a=e.alternate;a!==null&&(e.alternate=null,Zf(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&Ed(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pe=null,Ct=!1;function va(e,a,r){for(r=r.child;r!==null;)Jf(e,a,r),r=r.sibling}function Jf(e,a,r){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Vn,r)}catch{}switch(r.tag){case 26:Je||xa(r,a),va(e,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Je||xa(r,a);var s=Pe,n=Ct;fr(r.type)&&(Pe=r.stateNode,Ct=!1),va(e,a,r),Fn(r.stateNode),Pe=s,Ct=n;break;case 5:Je||xa(r,a);case 6:if(s=Pe,n=Ct,Pe=null,va(e,a,r),Pe=s,Ct=n,Pe!==null)if(Ct)try{(Pe.nodeType===9?Pe.body:Pe.nodeName==="HTML"?Pe.ownerDocument.body:Pe).removeChild(r.stateNode)}catch(l){Ae(r,a,l)}else try{Pe.removeChild(r.stateNode)}catch(l){Ae(r,a,l)}break;case 18:Pe!==null&&(Ct?(e=Pe,Yp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),Ms(e)):Yp(Pe,r.stateNode));break;case 4:s=Pe,n=Ct,Pe=r.stateNode.containerInfo,Ct=!0,va(e,a,r),Pe=s,Ct=n;break;case 0:case 11:case 14:case 15:pr(2,r,a),Je||pr(4,r,a),va(e,a,r);break;case 1:Je||(xa(r,a),s=r.stateNode,typeof s.componentWillUnmount=="function"&&Yf(r,a,s)),va(e,a,r);break;case 21:va(e,a,r);break;case 22:Je=(s=Je)||r.memoizedState!==null,va(e,a,r),Je=s;break;default:va(e,a,r)}}function Kf(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ms(e)}catch(r){Ae(a,a.return,r)}}}function eg(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ms(e)}catch(r){Ae(a,a.return,r)}}function qy(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new Bp),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new Bp),a;default:throw Error(K(435,e.tag))}}function jl(e,a){var r=qy(e);a.forEach(function(s){if(!r.has(s)){r.add(s);var n=e0.bind(null,e,s);s.then(n,n)}})}function St(e,a){var r=a.deletions;if(r!==null)for(var s=0;s<r.length;s++){var n=r[s],l=e,o=a,i=o;e:for(;i!==null;){switch(i.tag){case 27:if(fr(i.type)){Pe=i.stateNode,Ct=!1;break e}break;case 5:Pe=i.stateNode,Ct=!1;break e;case 3:case 4:Pe=i.stateNode.containerInfo,Ct=!0;break e}i=i.return}if(Pe===null)throw Error(K(160));Jf(l,o,n),Pe=null,Ct=!1,l=n.alternate,l!==null&&(l.return=null),n.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)tg(a,e),a=a.sibling}var na=null;function tg(e,a){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:St(a,e),wt(e),s&4&&(pr(3,e,e.return),el(3,e),pr(5,e,e.return));break;case 1:St(a,e),wt(e),s&512&&(Je||r===null||xa(r,r.return)),s&64&&Ca&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?s:r.concat(s))));break;case 26:var n=na;if(St(a,e),wt(e),s&512&&(Je||r===null||xa(r,r.return)),s&4){var l=r!==null?r.memoizedState:null;if(s=e.memoizedState,r===null)if(s===null)if(e.stateNode===null){e:{s=e.type,r=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":l=n.getElementsByTagName("title")[0],(!l||l[Qn]||l[dt]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=n.createElement(s),n.head.insertBefore(l,n.querySelector("head > title"))),xt(l,s,r),l[dt]=e,ot(l),s=l;break e;case"link":var o=Kp("link","href",n).get(s+(r.href||""));if(o){for(var i=0;i<o.length;i++)if(l=o[i],l.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&l.getAttribute("rel")===(r.rel==null?null:r.rel)&&l.getAttribute("title")===(r.title==null?null:r.title)&&l.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){o.splice(i,1);break t}}l=n.createElement(s),xt(l,s,r),n.head.appendChild(l);break;case"meta":if(o=Kp("meta","content",n).get(s+(r.content||""))){for(i=0;i<o.length;i++)if(l=o[i],l.getAttribute("content")===(r.content==null?null:""+r.content)&&l.getAttribute("name")===(r.name==null?null:r.name)&&l.getAttribute("property")===(r.property==null?null:r.property)&&l.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&l.getAttribute("charset")===(r.charSet==null?null:r.charSet)){o.splice(i,1);break t}}l=n.createElement(s),xt(l,s,r),n.head.appendChild(l);break;default:throw Error(K(468,s))}l[dt]=e,ot(l),s=l}e.stateNode=s}else ex(n,e.type,e.stateNode);else e.stateNode=Jp(n,s,e.memoizedProps);else l!==s?(l===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):l.count--,s===null?ex(n,e.type,e.stateNode):Jp(n,s,e.memoizedProps)):s===null&&e.stateNode!==null&&_i(e,e.memoizedProps,r.memoizedProps)}break;case 27:St(a,e),wt(e),s&512&&(Je||r===null||xa(r,r.return)),r!==null&&s&4&&_i(e,e.memoizedProps,r.memoizedProps);break;case 5:if(St(a,e),wt(e),s&512&&(Je||r===null||xa(r,r.return)),e.flags&32){n=e.stateNode;try{Ts(n,"")}catch(v){Ae(e,e.return,v)}}s&4&&e.stateNode!=null&&(n=e.memoizedProps,_i(e,n,r!==null?r.memoizedProps:n)),s&1024&&(Ii=!0);break;case 6:if(St(a,e),wt(e),s&4){if(e.stateNode===null)throw Error(K(162));s=e.memoizedProps,r=e.stateNode;try{r.nodeValue=s}catch(v){Ae(e,e.return,v)}}break;case 3:if(Hl=null,n=na,na=So(a.containerInfo),St(a,e),na=n,wt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Ms(a.containerInfo)}catch(v){Ae(e,e.return,v)}Ii&&(Ii=!1,ag(e));break;case 4:s=na,na=So(e.stateNode.containerInfo),St(a,e),wt(e),na=s;break;case 12:St(a,e),wt(e);break;case 31:St(a,e),wt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,jl(e,s)));break;case 13:St(a,e),wt(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Yo=Lt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,jl(e,s)));break;case 22:n=e.memoizedState!==null;var d=r!==null&&r.memoizedState!==null,u=Ca,c=Je;if(Ca=u||n,Je=c||d,St(a,e),Je=c,Ca=u,wt(e),s&8192)e:for(a=e.stateNode,a._visibility=n?a._visibility&-2:a._visibility|1,n&&(r===null||d||Ca||Je||Ar(e)),r=null,a=e;;){if(a.tag===5||a.tag===26){if(r===null){d=r=a;try{if(l=d.stateNode,n)o=l.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{i=d.stateNode;var x=d.memoizedProps.style,m=x!=null&&x.hasOwnProperty("display")?x.display:null;i.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(v){Ae(d,d.return,v)}}}else if(a.tag===6){if(r===null){d=a;try{d.stateNode.nodeValue=n?"":d.memoizedProps}catch(v){Ae(d,d.return,v)}}}else if(a.tag===18){if(r===null){d=a;try{var h=d.stateNode;n?Vp(h,!0):Vp(d.stateNode,!1)}catch(v){Ae(d,d.return,v)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}s&4&&(s=e.updateQueue,s!==null&&(r=s.retryQueue,r!==null&&(s.retryQueue=null,jl(e,r))));break;case 19:St(a,e),wt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,jl(e,s)));break;case 30:break;case 21:break;default:St(a,e),wt(e)}}function wt(e){var a=e.flags;if(a&2){try{for(var r,s=e.return;s!==null;){if(Gf(s)){r=s;break}s=s.return}if(r==null)throw Error(K(160));switch(r.tag){case 27:var n=r.stateNode,l=Mi(e);fo(e,l,n);break;case 5:var o=r.stateNode;r.flags&32&&(Ts(o,""),r.flags&=-33);var i=Mi(e);fo(e,i,o);break;case 3:case 4:var d=r.stateNode.containerInfo,u=Mi(e);Lc(e,u,d);break;default:throw Error(K(161))}}catch(c){Ae(e,e.return,c)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function ag(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;ag(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function ja(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Qf(e,a.alternate,a),a=a.sibling}function Ar(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:pr(4,a,a.return),Ar(a);break;case 1:xa(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&Yf(a,a.return,r),Ar(a);break;case 27:Fn(a.stateNode);case 26:case 5:xa(a,a.return),Ar(a);break;case 22:a.memoizedState===null&&Ar(a);break;case 30:Ar(a);break;default:Ar(a)}e=e.sibling}}function Sa(e,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var s=a.alternate,n=e,l=a,o=l.flags;switch(l.tag){case 0:case 11:case 15:Sa(n,l,r),el(4,l);break;case 1:if(Sa(n,l,r),s=l,n=s.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(u){Ae(s,s.return,u)}if(s=l,n=s.updateQueue,n!==null){var i=s.stateNode;try{var d=n.shared.hiddenCallbacks;if(d!==null)for(n.shared.hiddenCallbacks=null,n=0;n<d.length;n++)Jm(d[n],i)}catch(u){Ae(s,s.return,u)}}r&&o&64&&qf(l),Sn(l,l.return);break;case 27:Xf(l);case 26:case 5:Sa(n,l,r),r&&s===null&&o&4&&Vf(l),Sn(l,l.return);break;case 12:Sa(n,l,r);break;case 31:Sa(n,l,r),r&&o&4&&Kf(n,l);break;case 13:Sa(n,l,r),r&&o&4&&eg(n,l);break;case 22:l.memoizedState===null&&Sa(n,l,r),Sn(l,l.return);break;case 30:break;default:Sa(n,l,r)}a=a.sibling}}function ou(e,a){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Jn(r))}function iu(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Jn(e))}function sa(e,a,r,s){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)rg(e,a,r,s),a=a.sibling}function rg(e,a,r,s){var n=a.flags;switch(a.tag){case 0:case 11:case 15:sa(e,a,r,s),n&2048&&el(9,a);break;case 1:sa(e,a,r,s);break;case 3:sa(e,a,r,s),n&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Jn(e)));break;case 12:if(n&2048){sa(e,a,r,s),e=a.stateNode;try{var l=a.memoizedProps,o=l.id,i=l.onPostCommit;typeof i=="function"&&i(o,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(d){Ae(a,a.return,d)}}else sa(e,a,r,s);break;case 31:sa(e,a,r,s);break;case 13:sa(e,a,r,s);break;case 23:break;case 22:l=a.stateNode,o=a.alternate,a.memoizedState!==null?l._visibility&2?sa(e,a,r,s):wn(e,a):l._visibility&2?sa(e,a,r,s):(l._visibility|=2,ns(e,a,r,s,(a.subtreeFlags&10256)!==0||!1)),n&2048&&ou(o,a);break;case 24:sa(e,a,r,s),n&2048&&iu(a.alternate,a);break;default:sa(e,a,r,s)}}function ns(e,a,r,s,n){for(n=n&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var l=e,o=a,i=r,d=s,u=o.flags;switch(o.tag){case 0:case 11:case 15:ns(l,o,i,d,n),el(8,o);break;case 23:break;case 22:var c=o.stateNode;o.memoizedState!==null?c._visibility&2?ns(l,o,i,d,n):wn(l,o):(c._visibility|=2,ns(l,o,i,d,n)),n&&u&2048&&ou(o.alternate,o);break;case 24:ns(l,o,i,d,n),n&&u&2048&&iu(o.alternate,o);break;default:ns(l,o,i,d,n)}a=a.sibling}}function wn(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=e,s=a,n=s.flags;switch(s.tag){case 22:wn(r,s),n&2048&&ou(s.alternate,s);break;case 24:wn(r,s),n&2048&&iu(s.alternate,s);break;default:wn(r,s)}a=a.sibling}}var xn=8192;function es(e,a,r){if(e.subtreeFlags&xn)for(e=e.child;e!==null;)sg(e,a,r),e=e.sibling}function sg(e,a,r){switch(e.tag){case 26:es(e,a,r),e.flags&xn&&e.memoizedState!==null&&R0(r,na,e.memoizedState,e.memoizedProps);break;case 5:es(e,a,r);break;case 3:case 4:var s=na;na=So(e.stateNode.containerInfo),es(e,a,r),na=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=xn,xn=16777216,es(e,a,r),xn=s):es(e,a,r));break;default:es(e,a,r)}}function ng(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function rn(e){var a=e.deletions;if(e.flags&16){if(a!==null)for(var r=0;r<a.length;r++){var s=a[r];lt=s,og(s,e)}ng(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)lg(e),e=e.sibling}function lg(e){switch(e.tag){case 0:case 11:case 15:rn(e),e.flags&2048&&pr(9,e,e.return);break;case 3:rn(e);break;case 12:rn(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,Pl(e)):rn(e);break;default:rn(e)}}function Pl(e){var a=e.deletions;if(e.flags&16){if(a!==null)for(var r=0;r<a.length;r++){var s=a[r];lt=s,og(s,e)}ng(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:pr(8,a,a.return),Pl(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,Pl(a));break;default:Pl(a)}e=e.sibling}}function og(e,a){for(;lt!==null;){var r=lt;switch(r.tag){case 0:case 11:case 15:pr(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var s=r.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Jn(r.memoizedState.cache)}if(s=r.child,s!==null)s.return=r,lt=s;else e:for(r=e;lt!==null;){s=lt;var n=s.sibling,l=s.return;if(Zf(s),s===r){lt=null;break e}if(n!==null){n.return=l,lt=n;break e}lt=l}}}var Yy={getCacheForType:function(e){var a=pt(Ke),r=a.data.get(e);return r===void 0&&(r=e(),a.data.set(e,r)),r},cacheSignal:function(){return pt(Ke).controller.signal}},Vy=typeof WeakMap=="function"?WeakMap:Map,Fe=0,De=null,ye=null,ve=0,Ee=0,Bt=null,Qa=!1,Hs=!1,cu=!1,Ia=0,qe=0,xr=0,Mr=0,du=0,It=0,zs=0,Cn=null,kt=null,Oc=!1,Yo=0,ig=0,go=1/0,bo=null,sr=null,at=0,nr=null,Bs=null,Ra=0,$c=0,Uc=null,cg=null,kn=0,Pc=null;function Ut(){return Fe&2&&ve!==0?ve&-ve:pe.T!==null?pu():bm()}function dg(){if(It===0)if(!(ve&536870912)||je){var e=xl;xl<<=1,!(xl&3932160)&&(xl=262144),It=e}else It=536870912;return e=Wt.current,e!==null&&(e.flags|=32),It}function Ft(e,a,r){(e===De&&(Ee===2||Ee===9)||e.cancelPendingCommit!==null)&&(Ds(e,0),Za(e,ve,It,!1)),Xn(e,r),(!(Fe&2)||e!==De)&&(e===De&&(!(Fe&2)&&(Mr|=r),qe===4&&Za(e,ve,It,!1)),ba(e))}function ug(e,a,r){if(Fe&6)throw Error(K(327));var s=!r&&(a&127)===0&&(a&e.expiredLanes)===0||Gn(e,a),n=s?Qy(e,a):Li(e,a,!0),l=s;do{if(n===0){Hs&&!s&&Za(e,a,0,!1);break}else{if(r=e.current.alternate,l&&!Gy(r)){n=Li(e,a,!1),l=!1;continue}if(n===2){if(l=a,e.errorRecoveryDisabledLanes&l)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){a=o;e:{var i=e;n=Cn;var d=i.current.memoizedState.isDehydrated;if(d&&(Ds(i,o).flags|=256),o=Li(i,o,!1),o!==2){if(cu&&!d){i.errorRecoveryDisabledLanes|=l,Mr|=l,n=4;break e}l=kt,kt=n,l!==null&&(kt===null?kt=l:kt.push.apply(kt,l))}n=o}if(l=!1,n!==2)continue}}if(n===1){Ds(e,0),Za(e,a,0,!0);break}e:{switch(s=e,l=n,l){case 0:case 1:throw Error(K(345));case 4:if((a&4194048)!==a)break;case 6:Za(s,a,It,!Qa);break e;case 2:kt=null;break;case 3:case 5:break;default:throw Error(K(329))}if((a&62914560)===a&&(n=Yo+300-Lt(),10<n)){if(Za(s,a,It,!Qa),_o(s,0,!0)!==0)break e;Ra=a,s.timeoutHandle=Rg(Dp.bind(null,s,r,kt,bo,Oc,a,It,Mr,zs,Qa,l,"Throttled",-0,0),n);break e}Dp(s,r,kt,bo,Oc,a,It,Mr,zs,Qa,l,null,-0,0)}}break}while(!0);ba(e)}function Dp(e,a,r,s,n,l,o,i,d,u,c,x,m,h){if(e.timeoutHandle=-1,x=a.subtreeFlags,x&8192||(x&16785408)===16785408){x={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fa},sg(a,l,x);var v=(l&62914560)===l?Yo-Lt():(l&4194048)===l?ig-Lt():0;if(v=z0(x,v),v!==null){Ra=l,e.cancelPendingCommit=v(Mp.bind(null,e,a,l,r,s,n,o,i,d,c,x,null,m,h)),Za(e,l,o,!u);return}}Mp(e,a,l,r,s,n,o,i,d)}function Gy(e){for(var a=e;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var s=0;s<r.length;s++){var n=r[s],l=n.getSnapshot;n=n.value;try{if(!Pt(l(),n))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Za(e,a,r,s){a&=~du,a&=~Mr,e.suspendedLanes|=a,e.pingedLanes&=~a,s&&(e.warmLanes|=a),s=e.expirationTimes;for(var n=a;0<n;){var l=31-$t(n),o=1<<l;s[l]=-1,n&=~o}r!==0&&mm(e,r,a)}function Vo(){return Fe&6?!0:(tl(0),!1)}function uu(){if(ye!==null){if(Ee===0)var e=ye.return;else e=ye,Ta=Qr=null,Qd(e),Ss=null,_n=0,e=ye;for(;e!==null;)Hf(e.alternate,e),e=e.return;ye=null}}function Ds(e,a){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,m0(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Ra=0,uu(),De=e,ye=r=Ea(e.current,null),ve=a,Ee=0,Bt=null,Qa=!1,Hs=Gn(e,a),cu=!1,zs=It=du=Mr=xr=qe=0,kt=Cn=null,Oc=!1,a&8&&(a|=a&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=a;0<s;){var n=31-$t(s),l=1<<n;a|=e[n],s&=~l}return Ia=a,Oo(),r}function pg(e,a){ge=null,pe.H=In,a===Ws||a===Uo?(a=pp(),Ee=3):a===Wd?(a=pp(),Ee=4):Ee=a===nu?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Bt=a,ye===null&&(qe=1,xo(e,Jt(a,e.current)))}function xg(){var e=Wt.current;return e===null?!0:(ve&4194048)===ve?ea===null:(ve&62914560)===ve||ve&536870912?e===ea:!1}function mg(){var e=pe.H;return pe.H=In,e===null?In:e}function fg(){var e=pe.A;return pe.A=Yy,e}function ho(){qe=4,Qa||(ve&4194048)!==ve&&Wt.current!==null||(Hs=!0),!(xr&134217727)&&!(Mr&134217727)||De===null||Za(De,ve,It,!1)}function Li(e,a,r){var s=Fe;Fe|=2;var n=mg(),l=fg();(De!==e||ve!==a)&&(bo=null,Ds(e,a)),a=!1;var o=qe;e:do try{if(Ee!==0&&ye!==null){var i=ye,d=Bt;switch(Ee){case 8:uu(),o=6;break e;case 3:case 2:case 9:case 6:Wt.current===null&&(a=!0);var u=Ee;if(Ee=0,Bt=null,hs(e,i,d,u),r&&Hs){o=0;break e}break;default:u=Ee,Ee=0,Bt=null,hs(e,i,d,u)}}Xy(),o=qe;break}catch(c){pg(e,c)}while(!0);return a&&e.shellSuspendCounter++,Ta=Qr=null,Fe=s,pe.H=n,pe.A=l,ye===null&&(De=null,ve=0,Oo()),o}function Xy(){for(;ye!==null;)gg(ye)}function Qy(e,a){var r=Fe;Fe|=2;var s=mg(),n=fg();De!==e||ve!==a?(bo=null,go=Lt()+500,Ds(e,a)):Hs=Gn(e,a);e:do try{if(Ee!==0&&ye!==null){a=ye;var l=Bt;t:switch(Ee){case 1:Ee=0,Bt=null,hs(e,a,l,1);break;case 2:case 9:if(up(l)){Ee=0,Bt=null,_p(a);break}a=function(){Ee!==2&&Ee!==9||De!==e||(Ee=7),ba(e)},l.then(a,a);break e;case 3:Ee=7;break e;case 4:Ee=5;break e;case 7:up(l)?(Ee=0,Bt=null,_p(a)):(Ee=0,Bt=null,hs(e,a,l,7));break;case 5:var o=null;switch(ye.tag){case 26:o=ye.memoizedState;case 5:case 27:var i=ye;if(o?Mg(o):i.stateNode.complete){Ee=0,Bt=null;var d=i.sibling;if(d!==null)ye=d;else{var u=i.return;u!==null?(ye=u,Go(u)):ye=null}break t}}Ee=0,Bt=null,hs(e,a,l,5);break;case 6:Ee=0,Bt=null,hs(e,a,l,6);break;case 8:uu(),qe=6;break e;default:throw Error(K(462))}}Zy();break}catch(c){pg(e,c)}while(!0);return Ta=Qr=null,pe.H=s,pe.A=n,Fe=r,ye!==null?0:(De=null,ve=0,Oo(),qe)}function Zy(){for(;ye!==null&&!vh();)gg(ye)}function gg(e){var a=Wf(e.alternate,e,Ia);e.memoizedProps=e.pendingProps,a===null?Go(e):ye=a}function _p(e){var a=e,r=a.alternate;switch(a.tag){case 15:case 0:a=Tp(r,a,a.pendingProps,a.type,void 0,ve);break;case 11:a=Tp(r,a,a.pendingProps,a.type.render,a.ref,ve);break;case 5:Qd(a);default:Hf(r,a),a=ye=Wm(a,Ia),a=Wf(r,a,Ia)}e.memoizedProps=e.pendingProps,a===null?Go(e):ye=a}function hs(e,a,r,s){Ta=Qr=null,Qd(a),Ss=null,_n=0;var n=a.return;try{if(Oy(e,n,a,r,ve)){qe=1,xo(e,Jt(r,e.current)),ye=null;return}}catch(l){if(n!==null)throw ye=n,l;qe=1,xo(e,Jt(r,e.current)),ye=null;return}a.flags&32768?(je||s===1?e=!0:Hs||ve&536870912?e=!1:(Qa=e=!0,(s===2||s===9||s===3||s===6)&&(s=Wt.current,s!==null&&s.tag===13&&(s.flags|=16384))),bg(a,e)):Go(a)}function Go(e){var a=e;do{if(a.flags&32768){bg(a,Qa);return}e=a.return;var r=Py(a.alternate,a,Ia);if(r!==null){ye=r;return}if(a=a.sibling,a!==null){ye=a;return}ye=a=e}while(a!==null);qe===0&&(qe=5)}function bg(e,a){do{var r=Wy(e.alternate,e);if(r!==null){r.flags&=32767,ye=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(e=e.sibling,e!==null)){ye=e;return}ye=e=r}while(e!==null);qe=6,ye=null}function Mp(e,a,r,s,n,l,o,i,d){e.cancelPendingCommit=null;do Xo();while(at!==0);if(Fe&6)throw Error(K(327));if(a!==null){if(a===e.current)throw Error(K(177));if(l=a.lanes|a.childLanes,l|=Md,Ah(e,r,l,o,i,d),e===De&&(ye=De=null,ve=0),Bs=a,nr=e,Ra=r,$c=l,Uc=n,cg=s,a.subtreeFlags&10256||a.flags&10256?(e.callbackNode=null,e.callbackPriority=0,t0(to,function(){return Ng(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(a.flags&13878)!==0,a.subtreeFlags&13878||s){s=pe.T,pe.T=null,n=Te.p,Te.p=2,o=Fe,Fe|=4;try{Hy(e,a,r)}finally{Fe=o,Te.p=n,pe.T=s}}at=1,hg(),yg(),vg()}}function hg(){if(at===1){at=0;var e=nr,a=Bs,r=(a.flags&13878)!==0;if(a.subtreeFlags&13878||r){r=pe.T,pe.T=null;var s=Te.p;Te.p=2;var n=Fe;Fe|=4;try{tg(a,e);var l=Yc,o=_m(e.containerInfo),i=l.focusedElem,d=l.selectionRange;if(o!==i&&i&&i.ownerDocument&&Dm(i.ownerDocument.documentElement,i)){if(d!==null&&_d(i)){var u=d.start,c=d.end;if(c===void 0&&(c=u),"selectionStart"in i)i.selectionStart=u,i.selectionEnd=Math.min(c,i.value.length);else{var x=i.ownerDocument||document,m=x&&x.defaultView||window;if(m.getSelection){var h=m.getSelection(),v=i.textContent.length,S=Math.min(d.start,v),f=d.end===void 0?S:Math.min(d.end,v);!h.extend&&S>f&&(o=f,f=S,S=o);var y=sp(i,S),b=sp(i,f);if(y&&b&&(h.rangeCount!==1||h.anchorNode!==y.node||h.anchorOffset!==y.offset||h.focusNode!==b.node||h.focusOffset!==b.offset)){var g=x.createRange();g.setStart(y.node,y.offset),h.removeAllRanges(),S>f?(h.addRange(g),h.extend(b.node,b.offset)):(g.setEnd(b.node,b.offset),h.addRange(g))}}}}for(x=[],h=i;h=h.parentNode;)h.nodeType===1&&x.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<x.length;i++){var j=x[i];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}ko=!!qc,Yc=qc=null}finally{Fe=n,Te.p=s,pe.T=r}}e.current=a,at=2}}function yg(){if(at===2){at=0;var e=nr,a=Bs,r=(a.flags&8772)!==0;if(a.subtreeFlags&8772||r){r=pe.T,pe.T=null;var s=Te.p;Te.p=2;var n=Fe;Fe|=4;try{Qf(e,a.alternate,a)}finally{Fe=n,Te.p=s,pe.T=r}}at=3}}function vg(){if(at===4||at===3){at=0,jh();var e=nr,a=Bs,r=Ra,s=cg;a.subtreeFlags&10256||a.flags&10256?at=5:(at=0,Bs=nr=null,jg(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(sr=null),Td(r),a=a.stateNode,Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Vn,a,void 0,(a.current.flags&128)===128)}catch{}if(s!==null){a=pe.T,n=Te.p,Te.p=2,pe.T=null;try{for(var l=e.onRecoverableError,o=0;o<s.length;o++){var i=s[o];l(i.value,{componentStack:i.stack})}}finally{pe.T=a,Te.p=n}}Ra&3&&Xo(),ba(e),n=e.pendingLanes,r&261930&&n&42?e===Pc?kn++:(kn=0,Pc=e):kn=0,tl(0)}}function jg(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Jn(a)))}function Xo(){return hg(),yg(),vg(),Ng()}function Ng(){if(at!==5)return!1;var e=nr,a=$c;$c=0;var r=Td(Ra),s=pe.T,n=Te.p;try{Te.p=32>r?32:r,pe.T=null,r=Uc,Uc=null;var l=nr,o=Ra;if(at=0,Bs=nr=null,Ra=0,Fe&6)throw Error(K(331));var i=Fe;if(Fe|=4,lg(l.current),rg(l,l.current,o,r),Fe=i,tl(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Vn,l)}catch{}return!0}finally{Te.p=n,pe.T=s,jg(e,a)}}function Ip(e,a,r){a=Jt(r,a),a=_c(e.stateNode,a,2),e=rr(e,a,2),e!==null&&(Xn(e,2),ba(e))}function Ae(e,a,r){if(e.tag===3)Ip(e,e,r);else for(;a!==null;){if(a.tag===3){Ip(a,e,r);break}else if(a.tag===1){var s=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(sr===null||!sr.has(s))){e=Jt(r,e),r=If(2),s=rr(a,r,2),s!==null&&(Lf(r,s,a,e),Xn(s,2),ba(s));break}}a=a.return}}function Oi(e,a,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Vy;var n=new Set;s.set(a,n)}else n=s.get(a),n===void 0&&(n=new Set,s.set(a,n));n.has(r)||(cu=!0,n.add(r),e=Jy.bind(null,e,a,r),a.then(e,e))}function Jy(e,a,r){var s=e.pingCache;s!==null&&s.delete(a),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,De===e&&(ve&r)===r&&(qe===4||qe===3&&(ve&62914560)===ve&&300>Lt()-Yo?!(Fe&2)&&Ds(e,0):du|=r,zs===ve&&(zs=0)),ba(e)}function Sg(e,a){a===0&&(a=xm()),e=Xr(e,a),e!==null&&(Xn(e,a),ba(e))}function Ky(e){var a=e.memoizedState,r=0;a!==null&&(r=a.retryLane),Sg(e,r)}function e0(e,a){var r=0;switch(e.tag){case 31:case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(K(314))}s!==null&&s.delete(a),Sg(e,r)}function t0(e,a){return kd(e,a)}var yo=null,ls=null,Wc=!1,vo=!1,$i=!1,Ja=0;function ba(e){e!==ls&&e.next===null&&(ls===null?yo=ls=e:ls=ls.next=e),vo=!0,Wc||(Wc=!0,r0())}function tl(e,a){if(!$i&&vo){$i=!0;do for(var r=!1,s=yo;s!==null;){if(e!==0){var n=s.pendingLanes;if(n===0)var l=0;else{var o=s.suspendedLanes,i=s.pingedLanes;l=(1<<31-$t(42|e)+1)-1,l&=n&~(o&~i),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(r=!0,Lp(s,l))}else l=ve,l=_o(s,s===De?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(l&3)||Gn(s,l)||(r=!0,Lp(s,l));s=s.next}while(r);$i=!1}}function a0(){wg()}function wg(){vo=Wc=!1;var e=0;Ja!==0&&x0()&&(e=Ja);for(var a=Lt(),r=null,s=yo;s!==null;){var n=s.next,l=Cg(s,a);l===0?(s.next=null,r===null?yo=n:r.next=n,n===null&&(ls=r)):(r=s,(e!==0||l&3)&&(vo=!0)),s=n}at!==0&&at!==5||tl(e),Ja!==0&&(Ja=0)}function Cg(e,a){for(var r=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var o=31-$t(l),i=1<<o,d=n[o];d===-1?(!(i&r)||i&s)&&(n[o]=Eh(i,a)):d<=a&&(e.expiredLanes|=i),l&=~i}if(a=De,r=ve,r=_o(e,e===a?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,r===0||e===a&&(Ee===2||Ee===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&mi(s),e.callbackNode=null,e.callbackPriority=0;if(!(r&3)||Gn(e,r)){if(a=r&-r,a===e.callbackPriority)return a;switch(s!==null&&mi(s),Td(r)){case 2:case 8:r=um;break;case 32:r=to;break;case 268435456:r=pm;break;default:r=to}return s=kg.bind(null,e),r=kd(r,s),e.callbackPriority=a,e.callbackNode=r,a}return s!==null&&s!==null&&mi(s),e.callbackPriority=2,e.callbackNode=null,2}function kg(e,a){if(at!==0&&at!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Xo()&&e.callbackNode!==r)return null;var s=ve;return s=_o(e,e===De?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(ug(e,s,a),Cg(e,Lt()),e.callbackNode!=null&&e.callbackNode===r?kg.bind(null,e):null)}function Lp(e,a){if(Xo())return null;ug(e,a,!0)}function r0(){f0(function(){Fe&6?kd(dm,a0):wg()})}function pu(){if(Ja===0){var e=Es;e===0&&(e=pl,pl<<=1,!(pl&261888)&&(pl=256)),Ja=e}return Ja}function Op(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Bl(""+e)}function $p(e,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,e.id&&r.setAttribute("form",e.id),a.parentNode.insertBefore(r,a),e=new FormData(e),r.parentNode.removeChild(r),e}function s0(e,a,r,s,n){if(a==="submit"&&r&&r.stateNode===n){var l=Op((n[At]||null).action),o=s.submitter;o&&(a=(a=o[At]||null)?Op(a.formAction):o.getAttribute("formAction"),a!==null&&(l=a,o=null));var i=new Mo("action","action",null,s,n);e.push({event:i,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ja!==0){var d=o?$p(n,o):new FormData(n);Bc(r,{pending:!0,data:d,method:n.method,action:l},null,d)}}else typeof l=="function"&&(i.preventDefault(),d=o?$p(n,o):new FormData(n),Bc(r,{pending:!0,data:d,method:n.method,action:l},l,d))},currentTarget:n}]})}}for(var Ui=0;Ui<jc.length;Ui++){var Pi=jc[Ui],n0=Pi.toLowerCase(),l0=Pi[0].toUpperCase()+Pi.slice(1);ia(n0,"on"+l0)}ia(Im,"onAnimationEnd");ia(Lm,"onAnimationIteration");ia(Om,"onAnimationStart");ia("dblclick","onDoubleClick");ia("focusin","onFocus");ia("focusout","onBlur");ia(Ny,"onTransitionRun");ia(Sy,"onTransitionStart");ia(wy,"onTransitionCancel");ia($m,"onTransitionEnd");Fs("onMouseEnter",["mouseout","mouseover"]);Fs("onMouseLeave",["mouseout","mouseover"]);Fs("onPointerEnter",["pointerout","pointerover"]);Fs("onPointerLeave",["pointerout","pointerover"]);Yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ln));function Fg(e,a){a=(a&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],n=s.event;s=s.listeners;e:{var l=void 0;if(a)for(var o=s.length-1;0<=o;o--){var i=s[o],d=i.instance,u=i.currentTarget;if(i=i.listener,d!==l&&n.isPropagationStopped())break e;l=i,n.currentTarget=u;try{l(n)}catch(c){ro(c)}n.currentTarget=null,l=d}else for(o=0;o<s.length;o++){if(i=s[o],d=i.instance,u=i.currentTarget,i=i.listener,d!==l&&n.isPropagationStopped())break e;l=i,n.currentTarget=u;try{l(n)}catch(c){ro(c)}n.currentTarget=null,l=d}}}}function he(e,a){var r=a[xc];r===void 0&&(r=a[xc]=new Set);var s=e+"__bubble";r.has(s)||(Tg(a,e,2,!1),r.add(s))}function Wi(e,a,r){var s=0;a&&(s|=4),Tg(r,e,s,a)}var Nl="_reactListening"+Math.random().toString(36).slice(2);function xu(e){if(!e[Nl]){e[Nl]=!0,hm.forEach(function(r){r!=="selectionchange"&&(o0.has(r)||Wi(r,!1,e),Wi(r,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Nl]||(a[Nl]=!0,Wi("selectionchange",!1,a))}}function Tg(e,a,r,s){switch(Ug(a)){case 2:var n=_0;break;case 8:n=M0;break;default:n=bu}r=n.bind(null,a,r,e),n=void 0,!hc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(a,r,{capture:!0,passive:n}):e.addEventListener(a,r,!0):n!==void 0?e.addEventListener(a,r,{passive:n}):e.addEventListener(a,r,!1)}function Hi(e,a,r,s,n){var l=s;if(!(a&1)&&!(a&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var i=s.stateNode.containerInfo;if(i===n)break;if(o===4)for(o=s.return;o!==null;){var d=o.tag;if((d===3||d===4)&&o.stateNode.containerInfo===n)return;o=o.return}for(;i!==null;){if(o=cs(i),o===null)return;if(d=o.tag,d===5||d===6||d===26||d===27){s=l=o;continue e}i=i.parentNode}}s=s.return}km(function(){var u=l,c=Rd(r),x=[];e:{var m=Um.get(e);if(m!==void 0){var h=Mo,v=e;switch(e){case"keypress":if(_l(r)===0)break e;case"keydown":case"keyup":h=ey;break;case"focusin":v="focus",h=yi;break;case"focusout":v="blur",h=yi;break;case"beforeblur":case"afterblur":h=yi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Gu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Ph;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=ry;break;case Im:case Lm:case Om:h=qh;break;case $m:h=ny;break;case"scroll":case"scrollend":h=$h;break;case"wheel":h=oy;break;case"copy":case"cut":case"paste":h=Vh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Qu;break;case"toggle":case"beforetoggle":h=cy}var S=(a&4)!==0,f=!S&&(e==="scroll"||e==="scrollend"),y=S?m!==null?m+"Capture":null:m;S=[];for(var b=u,g;b!==null;){var j=b;if(g=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||g===null||y===null||(j=An(b,y),j!=null&&S.push(On(b,j,g))),f)break;b=b.return}0<S.length&&(m=new h(m,v,null,r,c),x.push({event:m,listeners:S}))}}if(!(a&7)){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&r!==bc&&(v=r.relatedTarget||r.fromElement)&&(cs(v)||v[$s]))break e;if((h||m)&&(m=c.window===c?c:(m=c.ownerDocument)?m.defaultView||m.parentWindow:window,h?(v=r.relatedTarget||r.toElement,h=u,v=v?cs(v):null,v!==null&&(f=Yn(v),S=v.tag,v!==f||S!==5&&S!==27&&S!==6)&&(v=null)):(h=null,v=u),h!==v)){if(S=Gu,j="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(S=Qu,j="onPointerLeave",y="onPointerEnter",b="pointer"),f=h==null?m:un(h),g=v==null?m:un(v),m=new S(j,b+"leave",h,r,c),m.target=f,m.relatedTarget=g,j=null,cs(c)===u&&(S=new S(y,b+"enter",v,r,c),S.target=g,S.relatedTarget=f,j=S),f=j,h&&v)t:{for(S=i0,y=h,b=v,g=0,j=y;j;j=S(j))g++;j=0;for(var C=b;C;C=S(C))j++;for(;0<g-j;)y=S(y),g--;for(;0<j-g;)b=S(b),j--;for(;g--;){if(y===b||b!==null&&y===b.alternate){S=y;break t}y=S(y),b=S(b)}S=null}else S=null;h!==null&&Up(x,m,h,S,!1),v!==null&&f!==null&&Up(x,f,v,S,!0)}}e:{if(m=u?un(u):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var T=ep;else if(Ku(m))if(zm)T=yy;else{T=by;var E=gy}else h=m.nodeName,!h||h.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&Ad(u.elementType)&&(T=ep):T=hy;if(T&&(T=T(e,u))){Rm(x,T,r,c);break e}E&&E(e,m,u),e==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&gc(m,"number",m.value)}switch(E=u?un(u):window,e){case"focusin":(Ku(E)||E.contentEditable==="true")&&(ps=E,yc=u,bn=null);break;case"focusout":bn=yc=ps=null;break;case"mousedown":vc=!0;break;case"contextmenu":case"mouseup":case"dragend":vc=!1,np(x,r,c);break;case"selectionchange":if(jy)break;case"keydown":case"keyup":np(x,r,c)}var D;if(Dd)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else us?Em(e,r)&&(I="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(Tm&&r.locale!=="ko"&&(us||I!=="onCompositionStart"?I==="onCompositionEnd"&&us&&(D=Fm()):(Xa=c,zd="value"in Xa?Xa.value:Xa.textContent,us=!0)),E=jo(u,I),0<E.length&&(I=new Xu(I,e,null,r,c),x.push({event:I,listeners:E}),D?I.data=D:(D=Am(r),D!==null&&(I.data=D)))),(D=uy?py(e,r):xy(e,r))&&(I=jo(u,"onBeforeInput"),0<I.length&&(E=new Xu("onBeforeInput","beforeinput",null,r,c),x.push({event:E,listeners:I}),E.data=D)),s0(x,e,u,r,c)}Fg(x,a)})}function On(e,a,r){return{instance:e,listener:a,currentTarget:r}}function jo(e,a){for(var r=a+"Capture",s=[];e!==null;){var n=e,l=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||l===null||(n=An(e,r),n!=null&&s.unshift(On(e,n,l)),n=An(e,a),n!=null&&s.push(On(e,n,l))),e.tag===3)return s;e=e.return}return[]}function i0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Up(e,a,r,s,n){for(var l=a._reactName,o=[];r!==null&&r!==s;){var i=r,d=i.alternate,u=i.stateNode;if(i=i.tag,d!==null&&d===s)break;i!==5&&i!==26&&i!==27||u===null||(d=u,n?(u=An(r,l),u!=null&&o.unshift(On(r,u,d))):n||(u=An(r,l),u!=null&&o.push(On(r,u,d)))),r=r.return}o.length!==0&&e.push({event:a,listeners:o})}var c0=/\r\n?/g,d0=/\u0000|\uFFFD/g;function Pp(e){return(typeof e=="string"?e:""+e).replace(c0,`
`).replace(d0,"")}function Eg(e,a){return a=Pp(a),Pp(e)===a}function ze(e,a,r,s,n,l){switch(r){case"children":typeof s=="string"?a==="body"||a==="textarea"&&s===""||Ts(e,s):(typeof s=="number"||typeof s=="bigint")&&a!=="body"&&Ts(e,""+s);break;case"className":fl(e,"class",s);break;case"tabIndex":fl(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":fl(e,r,s);break;case"style":Cm(e,s,l);break;case"data":if(a!=="object"){fl(e,"data",s);break}case"src":case"href":if(s===""&&(a!=="a"||r!=="href")){e.removeAttribute(r);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(r);break}s=Bl(""+s),e.setAttribute(r,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(r==="formAction"?(a!=="input"&&ze(e,a,"name",n.name,n,null),ze(e,a,"formEncType",n.formEncType,n,null),ze(e,a,"formMethod",n.formMethod,n,null),ze(e,a,"formTarget",n.formTarget,n,null)):(ze(e,a,"encType",n.encType,n,null),ze(e,a,"method",n.method,n,null),ze(e,a,"target",n.target,n,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(r);break}s=Bl(""+s),e.setAttribute(r,s);break;case"onClick":s!=null&&(e.onclick=Fa);break;case"onScroll":s!=null&&he("scroll",e);break;case"onScrollEnd":s!=null&&he("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(K(61));if(r=s.__html,r!=null){if(n.children!=null)throw Error(K(60));e.innerHTML=r}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}r=Bl(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(r,""+s):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":s===!0?e.setAttribute(r,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(r,s):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(r,s):e.removeAttribute(r);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(r):e.setAttribute(r,s);break;case"popover":he("beforetoggle",e),he("toggle",e),zl(e,"popover",s);break;case"xlinkActuate":ha(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":ha(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":ha(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":ha(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":ha(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":ha(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":ha(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":ha(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":ha(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":zl(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Lh.get(r)||r,zl(e,r,s))}}function Hc(e,a,r,s,n,l){switch(r){case"style":Cm(e,s,l);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(K(61));if(r=s.__html,r!=null){if(n.children!=null)throw Error(K(60));e.innerHTML=r}}break;case"children":typeof s=="string"?Ts(e,s):(typeof s=="number"||typeof s=="bigint")&&Ts(e,""+s);break;case"onScroll":s!=null&&he("scroll",e);break;case"onScrollEnd":s!=null&&he("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Fa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ym.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(n=r.endsWith("Capture"),a=r.slice(2,n?r.length-7:void 0),l=e[At]||null,l=l!=null?l[r]:null,typeof l=="function"&&e.removeEventListener(a,l,n),typeof s=="function")){typeof l!="function"&&l!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(a,s,n);break e}r in e?e[r]=s:s===!0?e.setAttribute(r,""):zl(e,r,s)}}}function xt(e,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":he("error",e),he("load",e);var s=!1,n=!1,l;for(l in r)if(r.hasOwnProperty(l)){var o=r[l];if(o!=null)switch(l){case"src":s=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(K(137,a));default:ze(e,a,l,o,r,null)}}n&&ze(e,a,"srcSet",r.srcSet,r,null),s&&ze(e,a,"src",r.src,r,null);return;case"input":he("invalid",e);var i=l=o=n=null,d=null,u=null;for(s in r)if(r.hasOwnProperty(s)){var c=r[s];if(c!=null)switch(s){case"name":n=c;break;case"type":o=c;break;case"checked":d=c;break;case"defaultChecked":u=c;break;case"value":l=c;break;case"defaultValue":i=c;break;case"children":case"dangerouslySetInnerHTML":if(c!=null)throw Error(K(137,a));break;default:ze(e,a,s,c,r,null)}}Nm(e,l,i,d,u,o,n,!1);return;case"select":he("invalid",e),s=o=l=null;for(n in r)if(r.hasOwnProperty(n)&&(i=r[n],i!=null))switch(n){case"value":l=i;break;case"defaultValue":o=i;break;case"multiple":s=i;default:ze(e,a,n,i,r,null)}a=l,r=o,e.multiple=!!s,a!=null?vs(e,!!s,a,!1):r!=null&&vs(e,!!s,r,!0);return;case"textarea":he("invalid",e),l=n=s=null;for(o in r)if(r.hasOwnProperty(o)&&(i=r[o],i!=null))switch(o){case"value":s=i;break;case"defaultValue":n=i;break;case"children":l=i;break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(K(91));break;default:ze(e,a,o,i,r,null)}wm(e,s,n,l);return;case"option":for(d in r)if(r.hasOwnProperty(d)&&(s=r[d],s!=null))switch(d){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:ze(e,a,d,s,r,null)}return;case"dialog":he("beforetoggle",e),he("toggle",e),he("cancel",e),he("close",e);break;case"iframe":case"object":he("load",e);break;case"video":case"audio":for(s=0;s<Ln.length;s++)he(Ln[s],e);break;case"image":he("error",e),he("load",e);break;case"details":he("toggle",e);break;case"embed":case"source":case"link":he("error",e),he("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in r)if(r.hasOwnProperty(u)&&(s=r[u],s!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(K(137,a));default:ze(e,a,u,s,r,null)}return;default:if(Ad(a)){for(c in r)r.hasOwnProperty(c)&&(s=r[c],s!==void 0&&Hc(e,a,c,s,r,void 0));return}}for(i in r)r.hasOwnProperty(i)&&(s=r[i],s!=null&&ze(e,a,i,s,r,null))}function u0(e,a,r,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,l=null,o=null,i=null,d=null,u=null,c=null;for(h in r){var x=r[h];if(r.hasOwnProperty(h)&&x!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":d=x;default:s.hasOwnProperty(h)||ze(e,a,h,null,s,x)}}for(var m in s){var h=s[m];if(x=r[m],s.hasOwnProperty(m)&&(h!=null||x!=null))switch(m){case"type":l=h;break;case"name":n=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":o=h;break;case"defaultValue":i=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(K(137,a));break;default:h!==x&&ze(e,a,m,h,s,x)}}fc(e,o,i,d,u,c,l,n);return;case"select":h=o=i=m=null;for(l in r)if(d=r[l],r.hasOwnProperty(l)&&d!=null)switch(l){case"value":break;case"multiple":h=d;default:s.hasOwnProperty(l)||ze(e,a,l,null,s,d)}for(n in s)if(l=s[n],d=r[n],s.hasOwnProperty(n)&&(l!=null||d!=null))switch(n){case"value":m=l;break;case"defaultValue":i=l;break;case"multiple":o=l;default:l!==d&&ze(e,a,n,l,s,d)}a=i,r=o,s=h,m!=null?vs(e,!!r,m,!1):!!s!=!!r&&(a!=null?vs(e,!!r,a,!0):vs(e,!!r,r?[]:"",!1));return;case"textarea":h=m=null;for(i in r)if(n=r[i],r.hasOwnProperty(i)&&n!=null&&!s.hasOwnProperty(i))switch(i){case"value":break;case"children":break;default:ze(e,a,i,null,s,n)}for(o in s)if(n=s[o],l=r[o],s.hasOwnProperty(o)&&(n!=null||l!=null))switch(o){case"value":m=n;break;case"defaultValue":h=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(K(91));break;default:n!==l&&ze(e,a,o,n,s,l)}Sm(e,m,h);return;case"option":for(var v in r)if(m=r[v],r.hasOwnProperty(v)&&m!=null&&!s.hasOwnProperty(v))switch(v){case"selected":e.selected=!1;break;default:ze(e,a,v,null,s,m)}for(d in s)if(m=s[d],h=r[d],s.hasOwnProperty(d)&&m!==h&&(m!=null||h!=null))switch(d){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ze(e,a,d,m,s,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var S in r)m=r[S],r.hasOwnProperty(S)&&m!=null&&!s.hasOwnProperty(S)&&ze(e,a,S,null,s,m);for(u in s)if(m=s[u],h=r[u],s.hasOwnProperty(u)&&m!==h&&(m!=null||h!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(K(137,a));break;default:ze(e,a,u,m,s,h)}return;default:if(Ad(a)){for(var f in r)m=r[f],r.hasOwnProperty(f)&&m!==void 0&&!s.hasOwnProperty(f)&&Hc(e,a,f,void 0,s,m);for(c in s)m=s[c],h=r[c],!s.hasOwnProperty(c)||m===h||m===void 0&&h===void 0||Hc(e,a,c,m,s,h);return}}for(var y in r)m=r[y],r.hasOwnProperty(y)&&m!=null&&!s.hasOwnProperty(y)&&ze(e,a,y,null,s,m);for(x in s)m=s[x],h=r[x],!s.hasOwnProperty(x)||m===h||m==null&&h==null||ze(e,a,x,m,s,h)}function Wp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function p0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,r=performance.getEntriesByType("resource"),s=0;s<r.length;s++){var n=r[s],l=n.transferSize,o=n.initiatorType,i=n.duration;if(l&&i&&Wp(o)){for(o=0,i=n.responseEnd,s+=1;s<r.length;s++){var d=r[s],u=d.startTime;if(u>i)break;var c=d.transferSize,x=d.initiatorType;c&&Wp(x)&&(d=d.responseEnd,o+=c*(d<i?1:(i-u)/(d-u)))}if(--s,a+=8*(l+o)/(n.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var qc=null,Yc=null;function No(e){return e.nodeType===9?e:e.ownerDocument}function Hp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ag(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function Vc(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var qi=null;function x0(){var e=window.event;return e&&e.type==="popstate"?e===qi?!1:(qi=e,!0):(qi=null,!1)}var Rg=typeof setTimeout=="function"?setTimeout:void 0,m0=typeof clearTimeout=="function"?clearTimeout:void 0,qp=typeof Promise=="function"?Promise:void 0,f0=typeof queueMicrotask=="function"?queueMicrotask:typeof qp<"u"?function(e){return qp.resolve(null).then(e).catch(g0)}:Rg;function g0(e){setTimeout(function(){throw e})}function fr(e){return e==="head"}function Yp(e,a){var r=a,s=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"||r==="/&"){if(s===0){e.removeChild(n),Ms(a);return}s--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")s++;else if(r==="html")Fn(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Fn(r);for(var l=r.firstChild;l;){var o=l.nextSibling,i=l.nodeName;l[Qn]||i==="SCRIPT"||i==="STYLE"||i==="LINK"&&l.rel.toLowerCase()==="stylesheet"||r.removeChild(l),l=o}}else r==="body"&&Fn(e.ownerDocument.body);r=n}while(r);Ms(a)}function Vp(e,a){var r=e;e=0;do{var s=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=s}while(r)}function Gc(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Gc(r),Ed(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function b0(e,a,r,s){for(;e.nodeType===1;){var n=r;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Qn])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var l=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=ta(e.nextSibling),e===null)break}return null}function h0(e,a,r){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=ta(e.nextSibling),e===null))return null;return e}function zg(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ta(e.nextSibling),e===null))return null;return e}function Xc(e){return e.data==="$?"||e.data==="$~"}function Qc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function y0(e,a){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||r.readyState!=="loading")a();else{var s=function(){a(),r.removeEventListener("DOMContentLoaded",s)};r.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function ta(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var Zc=null;function Gp(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(a===0)return ta(e.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}e=e.nextSibling}return null}function Xp(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return e;a--}else r!=="/$"&&r!=="/&"||a++}e=e.previousSibling}return null}function Bg(e,a,r){switch(a=No(r),e){case"html":if(e=a.documentElement,!e)throw Error(K(452));return e;case"head":if(e=a.head,!e)throw Error(K(453));return e;case"body":if(e=a.body,!e)throw Error(K(454));return e;default:throw Error(K(451))}}function Fn(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Ed(e)}var ra=new Map,Qp=new Set;function So(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Oa=Te.d;Te.d={f:v0,r:j0,D:N0,C:S0,L:w0,m:C0,X:F0,S:k0,M:T0};function v0(){var e=Oa.f(),a=Vo();return e||a}function j0(e){var a=Us(e);a!==null&&a.tag===5&&a.type==="form"?kf(a):Oa.r(e)}var qs=typeof document>"u"?null:document;function Dg(e,a,r){var s=qs;if(s&&typeof a=="string"&&a){var n=Zt(a);n='link[rel="'+e+'"][href="'+n+'"]',typeof r=="string"&&(n+='[crossorigin="'+r+'"]'),Qp.has(n)||(Qp.add(n),e={rel:e,crossOrigin:r,href:a},s.querySelector(n)===null&&(a=s.createElement("link"),xt(a,"link",e),ot(a),s.head.appendChild(a)))}}function N0(e){Oa.D(e),Dg("dns-prefetch",e,null)}function S0(e,a){Oa.C(e,a),Dg("preconnect",e,a)}function w0(e,a,r){Oa.L(e,a,r);var s=qs;if(s&&e&&a){var n='link[rel="preload"][as="'+Zt(a)+'"]';a==="image"&&r&&r.imageSrcSet?(n+='[imagesrcset="'+Zt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(n+='[imagesizes="'+Zt(r.imageSizes)+'"]')):n+='[href="'+Zt(e)+'"]';var l=n;switch(a){case"style":l=_s(e);break;case"script":l=Ys(e)}ra.has(l)||(e=$e({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:e,as:a},r),ra.set(l,e),s.querySelector(n)!==null||a==="style"&&s.querySelector(al(l))||a==="script"&&s.querySelector(rl(l))||(a=s.createElement("link"),xt(a,"link",e),ot(a),s.head.appendChild(a)))}}function C0(e,a){Oa.m(e,a);var r=qs;if(r&&e){var s=a&&typeof a.as=="string"?a.as:"script",n='link[rel="modulepreload"][as="'+Zt(s)+'"][href="'+Zt(e)+'"]',l=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=Ys(e)}if(!ra.has(l)&&(e=$e({rel:"modulepreload",href:e},a),ra.set(l,e),r.querySelector(n)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(rl(l)))return}s=r.createElement("link"),xt(s,"link",e),ot(s),r.head.appendChild(s)}}}function k0(e,a,r){Oa.S(e,a,r);var s=qs;if(s&&e){var n=ys(s).hoistableStyles,l=_s(e);a=a||"default";var o=n.get(l);if(!o){var i={loading:0,preload:null};if(o=s.querySelector(al(l)))i.loading=5;else{e=$e({rel:"stylesheet",href:e,"data-precedence":a},r),(r=ra.get(l))&&mu(e,r);var d=o=s.createElement("link");ot(d),xt(d,"link",e),d._p=new Promise(function(u,c){d.onload=u,d.onerror=c}),d.addEventListener("load",function(){i.loading|=1}),d.addEventListener("error",function(){i.loading|=2}),i.loading|=4,Wl(o,a,s)}o={type:"stylesheet",instance:o,count:1,state:i},n.set(l,o)}}}function F0(e,a){Oa.X(e,a);var r=qs;if(r&&e){var s=ys(r).hoistableScripts,n=Ys(e),l=s.get(n);l||(l=r.querySelector(rl(n)),l||(e=$e({src:e,async:!0},a),(a=ra.get(n))&&fu(e,a),l=r.createElement("script"),ot(l),xt(l,"link",e),r.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},s.set(n,l))}}function T0(e,a){Oa.M(e,a);var r=qs;if(r&&e){var s=ys(r).hoistableScripts,n=Ys(e),l=s.get(n);l||(l=r.querySelector(rl(n)),l||(e=$e({src:e,async:!0,type:"module"},a),(a=ra.get(n))&&fu(e,a),l=r.createElement("script"),ot(l),xt(l,"link",e),r.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},s.set(n,l))}}function Zp(e,a,r,s){var n=(n=er.current)?So(n):null;if(!n)throw Error(K(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=_s(r.href),r=ys(n).hoistableStyles,s=r.get(a),s||(s={type:"style",instance:null,count:0,state:null},r.set(a,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=_s(r.href);var l=ys(n).hoistableStyles,o=l.get(e);if(o||(n=n.ownerDocument||n,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,o),(l=n.querySelector(al(e)))&&!l._p&&(o.instance=l,o.state.loading=5),ra.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ra.set(e,r),l||E0(n,e,r,o.state))),a&&s===null)throw Error(K(528,""));return o}if(a&&s!==null)throw Error(K(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ys(r),r=ys(n).hoistableScripts,s=r.get(a),s||(s={type:"script",instance:null,count:0,state:null},r.set(a,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(K(444,e))}}function _s(e){return'href="'+Zt(e)+'"'}function al(e){return'link[rel="stylesheet"]['+e+"]"}function _g(e){return $e({},e,{"data-precedence":e.precedence,precedence:null})}function E0(e,a,r,s){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?s.loading=1:(a=e.createElement("link"),s.preload=a,a.addEventListener("load",function(){return s.loading|=1}),a.addEventListener("error",function(){return s.loading|=2}),xt(a,"link",r),ot(a),e.head.appendChild(a))}function Ys(e){return'[src="'+Zt(e)+'"]'}function rl(e){return"script[async]"+e}function Jp(e,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var s=e.querySelector('style[data-href~="'+Zt(r.href)+'"]');if(s)return a.instance=s,ot(s),s;var n=$e({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),ot(s),xt(s,"style",n),Wl(s,r.precedence,e),a.instance=s;case"stylesheet":n=_s(r.href);var l=e.querySelector(al(n));if(l)return a.state.loading|=4,a.instance=l,ot(l),l;s=_g(r),(n=ra.get(n))&&mu(s,n),l=(e.ownerDocument||e).createElement("link"),ot(l);var o=l;return o._p=new Promise(function(i,d){o.onload=i,o.onerror=d}),xt(l,"link",s),a.state.loading|=4,Wl(l,r.precedence,e),a.instance=l;case"script":return l=Ys(r.src),(n=e.querySelector(rl(l)))?(a.instance=n,ot(n),n):(s=r,(n=ra.get(l))&&(s=$e({},r),fu(s,n)),e=e.ownerDocument||e,n=e.createElement("script"),ot(n),xt(n,"link",s),e.head.appendChild(n),a.instance=n);case"void":return null;default:throw Error(K(443,a.type))}else a.type==="stylesheet"&&!(a.state.loading&4)&&(s=a.instance,a.state.loading|=4,Wl(s,r.precedence,e));return a.instance}function Wl(e,a,r){for(var s=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,l=n,o=0;o<s.length;o++){var i=s[o];if(i.dataset.precedence===a)l=i;else if(l!==n)break}l?l.parentNode.insertBefore(e,l.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(e,a.firstChild))}function mu(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function fu(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var Hl=null;function Kp(e,a,r){if(Hl===null){var s=new Map,n=Hl=new Map;n.set(r,s)}else n=Hl,s=n.get(r),s||(s=new Map,n.set(r,s));if(s.has(e))return s;for(s.set(e,null),r=r.getElementsByTagName(e),n=0;n<r.length;n++){var l=r[n];if(!(l[Qn]||l[dt]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var o=l.getAttribute(a)||"";o=e+o;var i=s.get(o);i?i.push(l):s.set(o,[l])}}return s}function ex(e,a,r){e=e.ownerDocument||e,e.head.insertBefore(r,a==="title"?e.querySelector("head > title"):null)}function A0(e,a,r){if(r===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Mg(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function R0(e,a,r,s){if(r.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(r.state.loading&4)){if(r.instance===null){var n=_s(s.href),l=a.querySelector(al(n));if(l){a=l._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=wo.bind(e),a.then(e,e)),r.state.loading|=4,r.instance=l,ot(l);return}l=a.ownerDocument||a,s=_g(s),(n=ra.get(n))&&mu(s,n),l=l.createElement("link"),ot(l);var o=l;o._p=new Promise(function(i,d){o.onload=i,o.onerror=d}),xt(l,"link",s),r.instance=l}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,a),(a=r.state.preload)&&!(r.state.loading&3)&&(e.count++,r=wo.bind(e),a.addEventListener("load",r),a.addEventListener("error",r))}}var Yi=0;function z0(e,a){return e.stylesheets&&e.count===0&&ql(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var s=setTimeout(function(){if(e.stylesheets&&ql(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4+a);0<e.imgBytes&&Yi===0&&(Yi=62500*p0());var n=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ql(e,e.stylesheets),e.unsuspend)){var l=e.unsuspend;e.unsuspend=null,l()}},(e.imgBytes>Yi?50:800)+a);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(n)}}:null}function wo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ql(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Co=null;function ql(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Co=new Map,a.forEach(B0,e),Co=null,wo.call(e))}function B0(e,a){if(!(a.state.loading&4)){var r=Co.get(e);if(r)var s=r.get(null);else{r=new Map,Co.set(e,r);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<n.length;l++){var o=n[l];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(r.set(o.dataset.precedence,o),s=o)}s&&r.set(null,s)}n=a.instance,o=n.getAttribute("data-precedence"),l=r.get(o)||s,l===s&&r.set(null,n),r.set(o,n),this.count++,s=wo.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),l?l.parentNode.insertBefore(n,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),a.state.loading|=4}}var $n={$$typeof:ka,Provider:null,Consumer:null,_currentValue:zr,_currentValue2:zr,_threadCount:0};function D0(e,a,r,s,n,l,o,i,d){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=l,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=d,this.incompleteTransitions=new Map}function Ig(e,a,r,s,n,l,o,i,d,u,c,x){return e=new D0(e,a,r,o,d,u,c,x,i),a=1,l===!0&&(a|=24),l=Mt(3,null,null,a),e.current=l,l.stateNode=e,a=Ud(),a.refCount++,e.pooledCache=a,a.refCount++,l.memoizedState={element:s,isDehydrated:r,cache:a},Hd(l),e}function Lg(e){return e?(e=fs,e):fs}function Og(e,a,r,s,n,l){n=Lg(n),s.context===null?s.context=n:s.pendingContext=n,s=ar(a),s.payload={element:r},l=l===void 0?null:l,l!==null&&(s.callback=l),r=rr(e,s,a),r!==null&&(Ft(r,e,a),yn(r,e,a))}function tx(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<a?r:a}}function gu(e,a){tx(e,a),(e=e.alternate)&&tx(e,a)}function $g(e){if(e.tag===13||e.tag===31){var a=Xr(e,67108864);a!==null&&Ft(a,e,67108864),gu(e,67108864)}}function ax(e){if(e.tag===13||e.tag===31){var a=Ut();a=Fd(a);var r=Xr(e,a);r!==null&&Ft(r,e,a),gu(e,a)}}var ko=!0;function _0(e,a,r,s){var n=pe.T;pe.T=null;var l=Te.p;try{Te.p=2,bu(e,a,r,s)}finally{Te.p=l,pe.T=n}}function M0(e,a,r,s){var n=pe.T;pe.T=null;var l=Te.p;try{Te.p=8,bu(e,a,r,s)}finally{Te.p=l,pe.T=n}}function bu(e,a,r,s){if(ko){var n=Jc(s);if(n===null)Hi(e,a,s,Fo,r),rx(e,s);else if(L0(n,e,a,r,s))s.stopPropagation();else if(rx(e,s),a&4&&-1<I0.indexOf(e)){for(;n!==null;){var l=Us(n);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var o=Tr(l.pendingLanes);if(o!==0){var i=l;for(i.pendingLanes|=2,i.entangledLanes|=2;o;){var d=1<<31-$t(o);i.entanglements[1]|=d,o&=~d}ba(l),!(Fe&6)&&(go=Lt()+500,tl(0))}}break;case 31:case 13:i=Xr(l,2),i!==null&&Ft(i,l,2),Vo(),gu(l,2)}if(l=Jc(s),l===null&&Hi(e,a,s,Fo,r),l===n)break;n=l}n!==null&&s.stopPropagation()}else Hi(e,a,s,null,r)}}function Jc(e){return e=Rd(e),hu(e)}var Fo=null;function hu(e){if(Fo=null,e=cs(e),e!==null){var a=Yn(e);if(a===null)e=null;else{var r=a.tag;if(r===13){if(e=nm(a),e!==null)return e;e=null}else if(r===31){if(e=lm(a),e!==null)return e;e=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return Fo=e,null}function Ug(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nh()){case dm:return 2;case um:return 8;case to:case Sh:return 32;case pm:return 268435456;default:return 32}default:return 32}}var Kc=!1,lr=null,or=null,ir=null,Un=new Map,Pn=new Map,Va=[],I0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rx(e,a){switch(e){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":Un.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(a.pointerId)}}function sn(e,a,r,s,n,l){return e===null||e.nativeEvent!==l?(e={blockedOn:a,domEventName:r,eventSystemFlags:s,nativeEvent:l,targetContainers:[n]},a!==null&&(a=Us(a),a!==null&&$g(a)),e):(e.eventSystemFlags|=s,a=e.targetContainers,n!==null&&a.indexOf(n)===-1&&a.push(n),e)}function L0(e,a,r,s,n){switch(a){case"focusin":return lr=sn(lr,e,a,r,s,n),!0;case"dragenter":return or=sn(or,e,a,r,s,n),!0;case"mouseover":return ir=sn(ir,e,a,r,s,n),!0;case"pointerover":var l=n.pointerId;return Un.set(l,sn(Un.get(l)||null,e,a,r,s,n)),!0;case"gotpointercapture":return l=n.pointerId,Pn.set(l,sn(Pn.get(l)||null,e,a,r,s,n)),!0}return!1}function Pg(e){var a=cs(e.target);if(a!==null){var r=Yn(a);if(r!==null){if(a=r.tag,a===13){if(a=nm(r),a!==null){e.blockedOn=a,Uu(e.priority,function(){ax(r)});return}}else if(a===31){if(a=lm(r),a!==null){e.blockedOn=a,Uu(e.priority,function(){ax(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yl(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var r=Jc(e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);bc=s,r.target.dispatchEvent(s),bc=null}else return a=Us(r),a!==null&&$g(a),e.blockedOn=r,!1;a.shift()}return!0}function sx(e,a,r){Yl(e)&&r.delete(a)}function O0(){Kc=!1,lr!==null&&Yl(lr)&&(lr=null),or!==null&&Yl(or)&&(or=null),ir!==null&&Yl(ir)&&(ir=null),Un.forEach(sx),Pn.forEach(sx)}function Sl(e,a){e.blockedOn===a&&(e.blockedOn=null,Kc||(Kc=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,O0)))}var wl=null;function nx(e){wl!==e&&(wl=e,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,function(){wl===e&&(wl=null);for(var a=0;a<e.length;a+=3){var r=e[a],s=e[a+1],n=e[a+2];if(typeof s!="function"){if(hu(s||r)===null)continue;break}var l=Us(r);l!==null&&(e.splice(a,3),a-=3,Bc(l,{pending:!0,data:n,method:r.method,action:s},s,n))}}))}function Ms(e){function a(d){return Sl(d,e)}lr!==null&&Sl(lr,e),or!==null&&Sl(or,e),ir!==null&&Sl(ir,e),Un.forEach(a),Pn.forEach(a);for(var r=0;r<Va.length;r++){var s=Va[r];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Va.length&&(r=Va[0],r.blockedOn===null);)Pg(r),r.blockedOn===null&&Va.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(s=0;s<r.length;s+=3){var n=r[s],l=r[s+1],o=n[At]||null;if(typeof l=="function")o||nx(r);else if(o){var i=null;if(l&&l.hasAttribute("formAction")){if(n=l,o=l[At]||null)i=o.formAction;else if(hu(n)!==null)continue}else i=o.action;typeof i=="function"?r[s+1]=i:(r.splice(s,3),s-=3),nx(r)}}}function Wg(){function e(l){l.canIntercept&&l.info==="react-transition"&&l.intercept({handler:function(){return new Promise(function(o){return n=o})},focusReset:"manual",scroll:"manual"})}function a(){n!==null&&(n(),n=null),s||setTimeout(r,20)}function r(){if(!s&&!navigation.transition){var l=navigation.currentEntry;l&&l.url!=null&&navigation.navigate(l.url,{state:l.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),n!==null&&(n(),n=null)}}}function yu(e){this._internalRoot=e}Qo.prototype.render=yu.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(K(409));var r=a.current,s=Ut();Og(r,s,e,a,null,null)};Qo.prototype.unmount=yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;Og(e.current,2,null,e,null,null),Vo(),a[$s]=null}};function Qo(e){this._internalRoot=e}Qo.prototype.unstable_scheduleHydration=function(e){if(e){var a=bm();e={blockedOn:null,target:e,priority:a};for(var r=0;r<Va.length&&a!==0&&a<Va[r].priority;r++);Va.splice(r,0,e),r===0&&Pg(e)}};var lx=rm.version;if(lx!=="19.2.3")throw Error(K(527,lx,"19.2.3"));Te.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=fh(a),e=e!==null?om(e):null,e=e===null?null:e.stateNode,e};var $0={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:pe,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{Vn=Cl.inject($0),Ot=Cl}catch{}}Bo.createRoot=function(e,a){if(!sm(e))throw Error(K(299));var r=!1,s="",n=Df,l=_f,o=Mf;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(s=a.identifierPrefix),a.onUncaughtError!==void 0&&(n=a.onUncaughtError),a.onCaughtError!==void 0&&(l=a.onCaughtError),a.onRecoverableError!==void 0&&(o=a.onRecoverableError)),a=Ig(e,1,!1,null,null,r,s,null,n,l,o,Wg),e[$s]=a.current,xu(e),new yu(a)};Bo.hydrateRoot=function(e,a,r){if(!sm(e))throw Error(K(299));var s=!1,n="",l=Df,o=_f,i=Mf,d=null;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(n=r.identifierPrefix),r.onUncaughtError!==void 0&&(l=r.onUncaughtError),r.onCaughtError!==void 0&&(o=r.onCaughtError),r.onRecoverableError!==void 0&&(i=r.onRecoverableError),r.formState!==void 0&&(d=r.formState)),a=Ig(e,1,!0,a,r??null,s,n,d,l,o,i,Wg),a.context=Lg(null),r=a.current,s=Ut(),s=Fd(s),n=ar(s),n.callback=null,rr(r,n,s),r=s,a.current.lanes=r,Xn(a,r),ba(a),e[$s]=a.current,xu(e),new Qo(a)};Bo.version="19.2.3";function Hg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hg)}catch(e){console.error(e)}}Hg(),Zx.exports=Bo;var U0=Zx.exports;const P0=Ux(U0);/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wn(){return Wn=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Wn.apply(this,arguments)}var Ka;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ka||(Ka={}));const ox="popstate";function W0(e){e===void 0&&(e={});function a(s,n){let{pathname:l,search:o,hash:i}=s.location;return ed("",{pathname:l,search:o,hash:i},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:To(n)}return q0(a,r,null,e)}function Xe(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function vu(e,a){if(!e){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function H0(){return Math.random().toString(36).substr(2,8)}function ix(e,a){return{usr:e.state,key:e.key,idx:a}}function ed(e,a,r,s){return r===void 0&&(r=null),Wn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof a=="string"?Vs(a):a,{state:r,key:a&&a.key||s||H0()})}function To(e){let{pathname:a="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(a+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(a+=s.charAt(0)==="#"?s:"#"+s),a}function Vs(e){let a={};if(e){let r=e.indexOf("#");r>=0&&(a.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(a.search=e.substr(s),e=e.substr(0,s)),e&&(a.pathname=e)}return a}function q0(e,a,r,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:l=!1}=s,o=n.history,i=Ka.Pop,d=null,u=c();u==null&&(u=0,o.replaceState(Wn({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function x(){i=Ka.Pop;let f=c(),y=f==null?null:f-u;u=f,d&&d({action:i,location:S.location,delta:y})}function m(f,y){i=Ka.Push;let b=ed(S.location,f,y);u=c()+1;let g=ix(b,u),j=S.createHref(b);try{o.pushState(g,"",j)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;n.location.assign(j)}l&&d&&d({action:i,location:S.location,delta:1})}function h(f,y){i=Ka.Replace;let b=ed(S.location,f,y);u=c();let g=ix(b,u),j=S.createHref(b);o.replaceState(g,"",j),l&&d&&d({action:i,location:S.location,delta:0})}function v(f){let y=n.location.origin!=="null"?n.location.origin:n.location.href,b=typeof f=="string"?f:To(f);return b=b.replace(/ $/,"%20"),Xe(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let S={get action(){return i},get location(){return e(n,o)},listen(f){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(ox,x),d=f,()=>{n.removeEventListener(ox,x),d=null}},createHref(f){return a(n,f)},createURL:v,encodeLocation(f){let y=v(f);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:h,go(f){return o.go(f)}};return S}var cx;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(cx||(cx={}));function Y0(e,a,r){return r===void 0&&(r="/"),V0(e,a,r)}function V0(e,a,r,s){let n=typeof a=="string"?Vs(a):a,l=ju(n.pathname||"/",r);if(l==null)return null;let o=qg(e);G0(o);let i=null;for(let d=0;i==null&&d<o.length;++d){let u=l1(l);i=r1(o[d],u)}return i}function qg(e,a,r,s){a===void 0&&(a=[]),r===void 0&&(r=[]),s===void 0&&(s="");let n=(l,o,i)=>{let d={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};d.relativePath.startsWith("/")&&(Xe(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let u=cr([s,d.relativePath]),c=r.concat(d);l.children&&l.children.length>0&&(Xe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),qg(l.children,a,c,u)),!(l.path==null&&!l.index)&&a.push({path:u,score:t1(u,l.index),routesMeta:c})};return e.forEach((l,o)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))n(l,o);else for(let d of Yg(l.path))n(l,o,d)}),a}function Yg(e){let a=e.split("/");if(a.length===0)return[];let[r,...s]=a,n=r.endsWith("?"),l=r.replace(/\?$/,"");if(s.length===0)return n?[l,""]:[l];let o=Yg(s.join("/")),i=[];return i.push(...o.map(d=>d===""?l:[l,d].join("/"))),n&&i.push(...o),i.map(d=>e.startsWith("/")&&d===""?"/":d)}function G0(e){e.sort((a,r)=>a.score!==r.score?r.score-a.score:a1(a.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const X0=/^:[\w-]+$/,Q0=3,Z0=2,J0=1,K0=10,e1=-2,dx=e=>e==="*";function t1(e,a){let r=e.split("/"),s=r.length;return r.some(dx)&&(s+=e1),a&&(s+=Z0),r.filter(n=>!dx(n)).reduce((n,l)=>n+(X0.test(l)?Q0:l===""?J0:K0),s)}function a1(e,a){return e.length===a.length&&e.slice(0,-1).every((s,n)=>s===a[n])?e[e.length-1]-a[a.length-1]:0}function r1(e,a,r){let{routesMeta:s}=e,n={},l="/",o=[];for(let i=0;i<s.length;++i){let d=s[i],u=i===s.length-1,c=l==="/"?a:a.slice(l.length)||"/",x=s1({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},c),m=d.route;if(!x)return null;Object.assign(n,x.params),o.push({params:n,pathname:cr([l,x.pathname]),pathnameBase:u1(cr([l,x.pathnameBase])),route:m}),x.pathnameBase!=="/"&&(l=cr([l,x.pathnameBase]))}return o}function s1(e,a){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=n1(e.path,e.caseSensitive,e.end),n=a.match(r);if(!n)return null;let l=n[0],o=l.replace(/(.)\/+$/,"$1"),i=n.slice(1);return{params:s.reduce((u,c,x)=>{let{paramName:m,isOptional:h}=c;if(m==="*"){let S=i[x]||"";o=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const v=i[x];return h&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:o,pattern:e}}function n1(e,a,r){a===void 0&&(a=!1),r===void 0&&(r=!0),vu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,d)=>(s.push({paramName:i,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,a?void 0:"i"),s]}function l1(e){try{return e.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return vu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+a+").")),e}}function ju(e,a){if(a==="/")return e;if(!e.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}const o1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i1=e=>o1.test(e);function c1(e,a){a===void 0&&(a="/");let{pathname:r,search:s="",hash:n=""}=typeof e=="string"?Vs(e):e,l;if(r)if(i1(r))l=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),vu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?l=ux(r.substring(1),"/"):l=ux(r,a)}else l=a;return{pathname:l,search:p1(s),hash:x1(n)}}function ux(e,a){let r=a.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Vi(e,a,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+a+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function d1(e){return e.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function Nu(e,a){let r=d1(e);return a?r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function Su(e,a,r,s){s===void 0&&(s=!1);let n;typeof e=="string"?n=Vs(e):(n=Wn({},e),Xe(!n.pathname||!n.pathname.includes("?"),Vi("?","pathname","search",n)),Xe(!n.pathname||!n.pathname.includes("#"),Vi("#","pathname","hash",n)),Xe(!n.search||!n.search.includes("#"),Vi("#","search","hash",n)));let l=e===""||n.pathname==="",o=l?"/":n.pathname,i;if(o==null)i=r;else{let x=a.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),x-=1;n.pathname=m.join("/")}i=x>=0?a[x]:"/"}let d=c1(n,i),u=o&&o!=="/"&&o.endsWith("/"),c=(l||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(u||c)&&(d.pathname+="/"),d}const cr=e=>e.join("/").replace(/\/\/+/g,"/"),u1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),p1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,x1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function m1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Vg=["post","put","patch","delete"];new Set(Vg);const f1=["get",...Vg];new Set(f1);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hn(){return Hn=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Hn.apply(this,arguments)}const wu=p.createContext(null),g1=p.createContext(null),gr=p.createContext(null),Zo=p.createContext(null),br=p.createContext({outlet:null,matches:[],isDataRoute:!1}),Gg=p.createContext(null);function b1(e,a){let{relative:r}=a===void 0?{}:a;Gs()||Xe(!1);let{basename:s,navigator:n}=p.useContext(gr),{hash:l,pathname:o,search:i}=Qg(e,{relative:r}),d=o;return s!=="/"&&(d=o==="/"?s:cr([s,o])),n.createHref({pathname:d,search:i,hash:l})}function Gs(){return p.useContext(Zo)!=null}function Nt(){return Gs()||Xe(!1),p.useContext(Zo).location}function Xg(e){p.useContext(gr).static||p.useLayoutEffect(e)}function st(){let{isDataRoute:e}=p.useContext(br);return e?A1():h1()}function h1(){Gs()||Xe(!1);let e=p.useContext(wu),{basename:a,future:r,navigator:s}=p.useContext(gr),{matches:n}=p.useContext(br),{pathname:l}=Nt(),o=JSON.stringify(Nu(n,r.v7_relativeSplatPath)),i=p.useRef(!1);return Xg(()=>{i.current=!0}),p.useCallback(function(u,c){if(c===void 0&&(c={}),!i.current)return;if(typeof u=="number"){s.go(u);return}let x=Su(u,JSON.parse(o),l,c.relative==="path");e==null&&a!=="/"&&(x.pathname=x.pathname==="/"?a:cr([a,x.pathname])),(c.replace?s.replace:s.push)(x,c.state,c)},[a,s,o,l,e])}function Qg(e,a){let{relative:r}=a===void 0?{}:a,{future:s}=p.useContext(gr),{matches:n}=p.useContext(br),{pathname:l}=Nt(),o=JSON.stringify(Nu(n,s.v7_relativeSplatPath));return p.useMemo(()=>Su(e,JSON.parse(o),l,r==="path"),[e,o,l,r])}function y1(e,a){return v1(e,a)}function v1(e,a,r,s){Gs()||Xe(!1);let{navigator:n}=p.useContext(gr),{matches:l}=p.useContext(br),o=l[l.length-1],i=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let u=Nt(),c;if(a){var x;let f=typeof a=="string"?Vs(a):a;d==="/"||(x=f.pathname)!=null&&x.startsWith(d)||Xe(!1),c=f}else c=u;let m=c.pathname||"/",h=m;if(d!=="/"){let f=d.replace(/^\//,"").split("/");h="/"+m.replace(/^\//,"").split("/").slice(f.length).join("/")}let v=Y0(e,{pathname:h}),S=C1(v&&v.map(f=>Object.assign({},f,{params:Object.assign({},i,f.params),pathname:cr([d,n.encodeLocation?n.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?d:cr([d,n.encodeLocation?n.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),l,r,s);return a&&S?p.createElement(Zo.Provider,{value:{location:Hn({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Ka.Pop}},S):S}function j1(){let e=E1(),a=m1(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},a),r?p.createElement("pre",{style:n},r):null,null)}const N1=p.createElement(j1,null);class S1 extends p.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,r){return r.location!==a.location||r.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:r.error,location:r.location,revalidation:a.revalidation||r.revalidation}}componentDidCatch(a,r){console.error("React Router caught the following error during render",a,r)}render(){return this.state.error!==void 0?p.createElement(br.Provider,{value:this.props.routeContext},p.createElement(Gg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function w1(e){let{routeContext:a,match:r,children:s}=e,n=p.useContext(wu);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(br.Provider,{value:a},s)}function C1(e,a,r,s){var n;if(a===void 0&&(a=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var l;if(!r)return null;if(r.errors)e=r.matches;else if((l=s)!=null&&l.v7_partialHydration&&a.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,i=(n=r)==null?void 0:n.errors;if(i!=null){let c=o.findIndex(x=>x.route.id&&(i==null?void 0:i[x.route.id])!==void 0);c>=0||Xe(!1),o=o.slice(0,Math.min(o.length,c+1))}let d=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let c=0;c<o.length;c++){let x=o[c];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(u=c),x.route.id){let{loaderData:m,errors:h}=r,v=x.route.loader&&m[x.route.id]===void 0&&(!h||h[x.route.id]===void 0);if(x.route.lazy||v){d=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,x,m)=>{let h,v=!1,S=null,f=null;r&&(h=i&&x.route.id?i[x.route.id]:void 0,S=x.route.errorElement||N1,d&&(u<0&&m===0?(R1("route-fallback"),v=!0,f=null):u===m&&(v=!0,f=x.route.hydrateFallbackElement||null)));let y=a.concat(o.slice(0,m+1)),b=()=>{let g;return h?g=S:v?g=f:x.route.Component?g=p.createElement(x.route.Component,null):x.route.element?g=x.route.element:g=c,p.createElement(w1,{match:x,routeContext:{outlet:c,matches:y,isDataRoute:r!=null},children:g})};return r&&(x.route.ErrorBoundary||x.route.errorElement||m===0)?p.createElement(S1,{location:r.location,revalidation:r.revalidation,component:S,error:h,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var Zg=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Zg||{}),Jg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Jg||{});function k1(e){let a=p.useContext(wu);return a||Xe(!1),a}function F1(e){let a=p.useContext(g1);return a||Xe(!1),a}function T1(e){let a=p.useContext(br);return a||Xe(!1),a}function Kg(e){let a=T1(),r=a.matches[a.matches.length-1];return r.route.id||Xe(!1),r.route.id}function E1(){var e;let a=p.useContext(Gg),r=F1(),s=Kg();return a!==void 0?a:(e=r.errors)==null?void 0:e[s]}function A1(){let{router:e}=k1(Zg.UseNavigateStable),a=Kg(Jg.UseNavigateStable),r=p.useRef(!1);return Xg(()=>{r.current=!0}),p.useCallback(function(n,l){l===void 0&&(l={}),r.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,Hn({fromRouteId:a},l)))},[e,a])}const px={};function R1(e,a,r){px[e]||(px[e]=!0)}function z1(e,a){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Dt(e){let{to:a,replace:r,state:s,relative:n}=e;Gs()||Xe(!1);let{future:l,static:o}=p.useContext(gr),{matches:i}=p.useContext(br),{pathname:d}=Nt(),u=st(),c=Su(a,Nu(i,l.v7_relativeSplatPath),d,n==="path"),x=JSON.stringify(c);return p.useEffect(()=>u(JSON.parse(x),{replace:r,state:s,relative:n}),[u,x,n,r,s]),null}function le(e){Xe(!1)}function B1(e){let{basename:a="/",children:r=null,location:s,navigationType:n=Ka.Pop,navigator:l,static:o=!1,future:i}=e;Gs()&&Xe(!1);let d=a.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:d,navigator:l,static:o,future:Hn({v7_relativeSplatPath:!1},i)}),[d,i,l,o]);typeof s=="string"&&(s=Vs(s));let{pathname:c="/",search:x="",hash:m="",state:h=null,key:v="default"}=s,S=p.useMemo(()=>{let f=ju(c,d);return f==null?null:{location:{pathname:f,search:x,hash:m,state:h,key:v},navigationType:n}},[d,c,x,m,h,v,n]);return S==null?null:p.createElement(gr.Provider,{value:u},p.createElement(Zo.Provider,{children:r,value:S}))}function D1(e){let{children:a,location:r}=e;return y1(td(a),r)}new Promise(()=>{});function td(e,a){a===void 0&&(a=[]);let r=[];return p.Children.forEach(e,(s,n)=>{if(!p.isValidElement(s))return;let l=[...a,n];if(s.type===p.Fragment){r.push.apply(r,td(s.props.children,l));return}s.type!==le&&Xe(!1),!s.props.index||!s.props.children||Xe(!1);let o={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=td(s.props.children,l)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ad(){return ad=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ad.apply(this,arguments)}function _1(e,a){if(e==null)return{};var r={},s=Object.keys(e),n,l;for(l=0;l<s.length;l++)n=s[l],!(a.indexOf(n)>=0)&&(r[n]=e[n]);return r}function M1(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function I1(e,a){return e.button===0&&(!a||a==="_self")&&!M1(e)}function rd(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((a,r)=>{let s=e[r];return a.concat(Array.isArray(s)?s.map(n=>[r,n]):[[r,s]])},[]))}function L1(e,a){let r=rd(e);return a&&a.forEach((s,n)=>{r.has(n)||a.getAll(n).forEach(l=>{r.append(n,l)})}),r}const O1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$1="6";try{window.__reactRouterVersion=$1}catch{}const U1="startTransition",xx=ih[U1];function P1(e){let{basename:a,children:r,future:s,window:n}=e,l=p.useRef();l.current==null&&(l.current=W0({window:n,v5Compat:!0}));let o=l.current,[i,d]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},c=p.useCallback(x=>{u&&xx?xx(()=>d(x)):d(x)},[d,u]);return p.useLayoutEffect(()=>o.listen(c),[o,c]),p.useEffect(()=>z1(s),[s]),p.createElement(B1,{basename:a,children:r,location:i.location,navigationType:i.action,navigator:o,future:s})}const W1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",H1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Eo=p.forwardRef(function(a,r){let{onClick:s,relative:n,reloadDocument:l,replace:o,state:i,target:d,to:u,preventScrollReset:c,viewTransition:x}=a,m=_1(a,O1),{basename:h}=p.useContext(gr),v,S=!1;if(typeof u=="string"&&H1.test(u)&&(v=u,W1))try{let g=new URL(window.location.href),j=u.startsWith("//")?new URL(g.protocol+u):new URL(u),C=ju(j.pathname,h);j.origin===g.origin&&C!=null?u=C+j.search+j.hash:S=!0}catch{}let f=b1(u,{relative:n}),y=q1(u,{replace:o,state:i,target:d,preventScrollReset:c,relative:n,viewTransition:x});function b(g){s&&s(g),g.defaultPrevented||y(g)}return p.createElement("a",ad({},m,{href:v||f,onClick:S||l?s:b,ref:r,target:d}))});var mx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(mx||(mx={}));var fx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(fx||(fx={}));function q1(e,a){let{target:r,replace:s,state:n,preventScrollReset:l,relative:o,viewTransition:i}=a===void 0?{}:a,d=st(),u=Nt(),c=Qg(e,{relative:o});return p.useCallback(x=>{if(I1(x,r)){x.preventDefault();let m=s!==void 0?s:To(u)===To(c);d(e,{replace:m,state:n,preventScrollReset:l,relative:o,viewTransition:i})}},[u,d,c,s,n,r,e,l,o,i])}function Y1(e){let a=p.useRef(rd(e)),r=p.useRef(!1),s=Nt(),n=p.useMemo(()=>L1(s.search,r.current?null:a.current),[s.search]),l=st(),o=p.useCallback((i,d)=>{const u=rd(typeof i=="function"?i(n):i);r.current=!0,l("?"+u,d)},[l,n]);return[n,o]}const eb=p.createContext(),ne=()=>{const e=p.useContext(eb);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},V1=({children:e})=>{const[a,r]=p.useState(()=>{const l=localStorage.getItem("nucash-theme");return l==="dark"||l===null});p.useEffect(()=>{localStorage.setItem("nucash-theme",a?"dark":"light")},[a]);const s=()=>{r(l=>!l)},n=a?{mode:"dark",bg:{primary:"linear-gradient(135deg, #0F1227 0%, #181D40 100%)",secondary:"rgba(30,35,71,0.5)",tertiary:"rgba(255,255,255,0.05)",card:"rgba(255,255,255,0.03)",hover:"rgba(255,255,255,0.06)"},text:{primary:"rgba(251,251,251,0.95)",secondary:"rgba(251,251,251,0.6)",tertiary:"rgba(251,251,251,0.5)",muted:"rgba(251,251,251,0.4)"},border:{primary:"rgba(255,212,28,0.2)",secondary:"rgba(255,212,28,0.15)",hover:"rgba(255,212,28,0.3)"},accent:{primary:"#FFD41C",secondary:"#181D40"},scrollbar:{track:"rgba(255,212,28,0.05)",thumb:"rgba(255,212,28,0.3)",thumbHover:"rgba(255,212,28,0.5)"}}:{mode:"light",bg:{primary:"linear-gradient(135deg, #E8F1FF 0%, #F0F7FF 100%)",secondary:"#FFFFFF",tertiary:"rgba(59,130,246,0.05)",card:"#FFFFFF",hover:"rgba(59,130,246,0.15)"},text:{primary:"rgba(24,29,64,0.95)",secondary:"rgba(24,29,64,0.75)",tertiary:"rgba(24,29,64,0.65)",muted:"rgba(24,29,64,0.5)"},border:{primary:"rgba(59,130,246,0.3)",secondary:"rgba(59,130,246,0.15)",hover:"rgba(59,130,246,0.5)"},accent:{primary:"#3B82F6",secondary:"#FFFFFF"},scrollbar:{track:"rgba(59,130,246,0.08)",thumb:"rgba(59,130,246,0.3)",thumbHover:"rgba(59,130,246,0.5)"}};return t.jsx(eb.Provider,{value:{isDarkMode:a,toggleTheme:s,theme:n},children:e})},Cu=p.createContext();function G1({children:e}){const[a,r]=p.useState(null),[s,n]=p.useState(!1),[l,o]=p.useState(!0),i="http://18.166.29.239:3000";p.useEffect(()=>{d()},[]);const d=()=>{try{const m=localStorage.getItem("adminToken"),h=localStorage.getItem("adminData");if(m&&h&&h!=="undefined"&&h!=="null")try{const f=JSON.parse(h);r({...f,accountType:"admin"}),n(!0),o(!1);return}catch(f){console.error("Failed to parse admin data, clearing invalid data:",f),localStorage.removeItem("adminToken"),localStorage.removeItem("adminData")}const v=localStorage.getItem("userToken"),S=localStorage.getItem("userData");if(v&&S&&S!=="undefined"&&S!=="null")try{const f=JSON.parse(S);r({...f,accountType:"user"}),n(!0),o(!1);return}catch(f){console.error("Failed to parse user data, clearing invalid data:",f),localStorage.removeItem("userToken"),localStorage.removeItem("userData")}n(!1),r(null),o(!1)}catch(m){console.error("Error checking auth status:",m),n(!1),r(null),o(!1)}},u=(m,h,v=!1)=>{v?(localStorage.setItem("adminToken",h),localStorage.setItem("adminData",JSON.stringify(m)),r({...m,accountType:"admin"})):(localStorage.setItem("userToken",h),localStorage.setItem("userData",JSON.stringify(m)),r({...m,accountType:"user"})),n(!0)},c=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminData"),localStorage.removeItem("userToken"),localStorage.removeItem("userData"),r(null),n(!1)},x=m=>{const h=(a==null?void 0:a.accountType)||"user";h==="admin"?localStorage.setItem("adminData",JSON.stringify(m)):localStorage.setItem("userData",JSON.stringify(m)),r({...m,accountType:h})};return t.jsx(Cu.Provider,{value:{backendUrl:i,userData:a,isLoggedin:s,loadingUserData:l,loginUser:u,logoutUser:c,updateUserData:x,checkAuthStatus:d},children:e})}function tb(e){var a,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(a=0;a<n;a++)e[a]&&(r=tb(e[a]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Ir(){for(var e,a,r=0,s="",n=arguments.length;r<n;r++)(e=arguments[r])&&(a=tb(e))&&(s&&(s+=" "),s+=a);return s}function X1(e){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}X1(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var sl=e=>typeof e=="number"&&!isNaN(e),Hr=e=>typeof e=="string",La=e=>typeof e=="function",Q1=e=>Hr(e)||sl(e),sd=e=>Hr(e)||La(e)?e:null,Z1=(e,a)=>e===!1||sl(e)&&e>0?e:a,nd=e=>p.isValidElement(e)||Hr(e)||La(e)||sl(e);function J1(e,a,r=300){let{scrollHeight:s,style:n}=e;requestAnimationFrame(()=>{n.minHeight="initial",n.height=s+"px",n.transition=`all ${r}ms`,requestAnimationFrame(()=>{n.height="0",n.padding="0",n.margin="0",setTimeout(a,r)})})}function K1({enter:e,exit:a,appendPosition:r=!1,collapse:s=!0,collapseDuration:n=300}){return function({children:l,position:o,preventExitTransition:i,done:d,nodeRef:u,isIn:c,playToast:x}){let m=r?`${e}--${o}`:e,h=r?`${a}--${o}`:a,v=p.useRef(0);return p.useLayoutEffect(()=>{let S=u.current,f=m.split(" "),y=b=>{b.target===u.current&&(x(),S.removeEventListener("animationend",y),S.removeEventListener("animationcancel",y),v.current===0&&b.type!=="animationcancel"&&S.classList.remove(...f))};S.classList.add(...f),S.addEventListener("animationend",y),S.addEventListener("animationcancel",y)},[]),p.useEffect(()=>{let S=u.current,f=()=>{S.removeEventListener("animationend",f),s?J1(S,d,n):d()};c||(i?f():(v.current=1,S.className+=` ${h}`,S.addEventListener("animationend",f)))},[c]),ke.createElement(ke.Fragment,null,l)}}function gx(e,a){return{content:ab(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:a}}function ab(e,a,r=!1){return p.isValidElement(e)&&!Hr(e.type)?p.cloneElement(e,{closeToast:a.closeToast,toastProps:a,data:a.data,isPaused:r}):La(e)?e({closeToast:a.closeToast,toastProps:a,data:a.data,isPaused:r}):e}function e2({closeToast:e,theme:a,ariaLabel:r="close"}){return ke.createElement("button",{className:`Toastify__close-button Toastify__close-button--${a}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":r},ke.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ke.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function t2({delay:e,isRunning:a,closeToast:r,type:s="default",hide:n,className:l,controlledProgress:o,progress:i,rtl:d,isIn:u,theme:c}){let x=n||o&&i===0,m={animationDuration:`${e}ms`,animationPlayState:a?"running":"paused"};o&&(m.transform=`scaleX(${i})`);let h=Ir("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${c}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":d}),v=La(l)?l({rtl:d,type:s,defaultClassName:h}):Ir(h,l),S={[o&&i>=1?"onTransitionEnd":"onAnimationEnd"]:o&&i<1?null:()=>{u&&r()}};return ke.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":x},ke.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${c} Toastify__progress-bar--${s}`}),ke.createElement("div",{role:"progressbar","aria-hidden":x?"true":"false","aria-label":"notification timer",className:v,style:m,...S}))}var a2=1,rb=()=>`${a2++}`;function r2(e,a,r){let s=1,n=0,l=[],o=[],i=a,d=new Map,u=new Set,c=b=>(u.add(b),()=>u.delete(b)),x=()=>{o=Array.from(d.values()),u.forEach(b=>b())},m=({containerId:b,toastId:g,updateId:j})=>{let C=b?b!==e:e!==1,T=d.has(g)&&j==null;return C||T},h=(b,g)=>{d.forEach(j=>{var C;(g==null||g===j.props.toastId)&&((C=j.toggle)==null||C.call(j,b))})},v=b=>{var g,j;(j=(g=b.props)==null?void 0:g.onClose)==null||j.call(g,b.removalReason),b.isActive=!1},S=b=>{if(b==null)d.forEach(v);else{let g=d.get(b);g&&v(g)}x()},f=()=>{n-=l.length,l=[]},y=b=>{var g,j;let{toastId:C,updateId:T}=b.props,E=T==null;b.staleId&&d.delete(b.staleId),b.isActive=!0,d.set(C,b),x(),r(gx(b,E?"added":"updated")),E&&((j=(g=b.props).onOpen)==null||j.call(g))};return{id:e,props:i,observe:c,toggle:h,removeToast:S,toasts:d,clearQueue:f,buildToast:(b,g)=>{if(m(g))return;let{toastId:j,updateId:C,data:T,staleId:E,delay:D}=g,I=C==null;I&&n++;let z={...i,style:i.toastStyle,key:s++,...Object.fromEntries(Object.entries(g).filter(([_,V])=>V!=null)),toastId:j,updateId:C,data:T,isIn:!1,className:sd(g.className||i.toastClassName),progressClassName:sd(g.progressClassName||i.progressClassName),autoClose:g.isLoading?!1:Z1(g.autoClose,i.autoClose),closeToast(_){d.get(j).removalReason=_,S(j)},deleteToast(){let _=d.get(j);if(_!=null){if(r(gx(_,"removed")),d.delete(j),n--,n<0&&(n=0),l.length>0){y(l.shift());return}x()}}};z.closeButton=i.closeButton,g.closeButton===!1||nd(g.closeButton)?z.closeButton=g.closeButton:g.closeButton===!0&&(z.closeButton=nd(i.closeButton)?i.closeButton:!0);let Y={content:b,props:z,staleId:E};i.limit&&i.limit>0&&n>i.limit&&I?l.push(Y):sl(D)?setTimeout(()=>{y(Y)},D):y(Y)},setProps(b){i=b},setToggle:(b,g)=>{let j=d.get(b);j&&(j.toggle=g)},isToastActive:b=>{var g;return(g=d.get(b))==null?void 0:g.isActive},getSnapshot:()=>o}}var ht=new Map,qn=[],ld=new Set,s2=e=>ld.forEach(a=>a(e)),sb=()=>ht.size>0;function n2(){qn.forEach(e=>lb(e.content,e.options)),qn=[]}var l2=(e,{containerId:a})=>{var r;return(r=ht.get(a||1))==null?void 0:r.toasts.get(e)};function nb(e,a){var r;if(a)return!!((r=ht.get(a))!=null&&r.isToastActive(e));let s=!1;return ht.forEach(n=>{n.isToastActive(e)&&(s=!0)}),s}function o2(e){if(!sb()){qn=qn.filter(a=>e!=null&&a.options.toastId!==e);return}if(e==null||Q1(e))ht.forEach(a=>{a.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let a=ht.get(e.containerId);a?a.removeToast(e.id):ht.forEach(r=>{r.removeToast(e.id)})}}var i2=(e={})=>{ht.forEach(a=>{a.props.limit&&(!e.containerId||a.id===e.containerId)&&a.clearQueue()})};function lb(e,a){nd(e)&&(sb()||qn.push({content:e,options:a}),ht.forEach(r=>{r.buildToast(e,a)}))}function c2(e){var a;(a=ht.get(e.containerId||1))==null||a.setToggle(e.id,e.fn)}function ob(e,a){ht.forEach(r=>{(a==null||!(a!=null&&a.containerId)||(a==null?void 0:a.containerId)===r.id)&&r.toggle(e,a==null?void 0:a.id)})}function d2(e){let a=e.containerId||1;return{subscribe(r){let s=r2(a,e,s2);ht.set(a,s);let n=s.observe(r);return n2(),()=>{n(),ht.delete(a)}},setProps(r){var s;(s=ht.get(a))==null||s.setProps(r)},getSnapshot(){var r;return(r=ht.get(a))==null?void 0:r.getSnapshot()}}}function u2(e){return ld.add(e),()=>{ld.delete(e)}}function p2(e){return e&&(Hr(e.toastId)||sl(e.toastId))?e.toastId:rb()}function nl(e,a){return lb(e,a),a.toastId}function Jo(e,a){return{...a,type:a&&a.type||e,toastId:p2(a)}}function Ko(e){return(a,r)=>nl(a,Jo(e,r))}function W(e,a){return nl(e,Jo("default",a))}W.loading=(e,a)=>nl(e,Jo("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...a}));function x2(e,{pending:a,error:r,success:s},n){let l;a&&(l=Hr(a)?W.loading(a,n):W.loading(a.render,{...n,...a}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},i=(u,c,x)=>{if(c==null){W.dismiss(l);return}let m={type:u,...o,...n,data:x},h=Hr(c)?{render:c}:c;return l?W.update(l,{...m,...h}):W(h.render,{...m,...h}),x},d=La(e)?e():e;return d.then(u=>i("success",s,u)).catch(u=>i("error",r,u)),d}W.promise=x2;W.success=Ko("success");W.info=Ko("info");W.error=Ko("error");W.warning=Ko("warning");W.warn=W.warning;W.dark=(e,a)=>nl(e,Jo("default",{theme:"dark",...a}));function m2(e){o2(e)}W.dismiss=m2;W.clearWaitingQueue=i2;W.isActive=nb;W.update=(e,a={})=>{let r=l2(e,a);if(r){let{props:s,content:n}=r,l={delay:100,...s,...a,toastId:a.toastId||e,updateId:rb()};l.toastId!==e&&(l.staleId=e);let o=l.render||n;delete l.render,nl(o,l)}};W.done=e=>{W.update(e,{progress:1})};W.onChange=u2;W.play=e=>ob(!0,e);W.pause=e=>ob(!1,e);function f2(e){var a;let{subscribe:r,getSnapshot:s,setProps:n}=p.useRef(d2(e)).current;n(e);let l=(a=p.useSyncExternalStore(r,s,s))==null?void 0:a.slice();function o(i){if(!l)return[];let d=new Map;return e.newestOnTop&&l.reverse(),l.forEach(u=>{let{position:c}=u.props;d.has(c)||d.set(c,[]),d.get(c).push(u)}),Array.from(d,u=>i(u[0],u[1]))}return{getToastToRender:o,isToastActive:nb,count:l==null?void 0:l.length}}function g2(e){let[a,r]=p.useState(!1),[s,n]=p.useState(!1),l=p.useRef(null),o=p.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:i,pauseOnHover:d,closeToast:u,onClick:c,closeOnClick:x}=e;c2({id:e.toastId,containerId:e.containerId,fn:r}),p.useEffect(()=>{if(e.pauseOnFocusLoss)return m(),()=>{h()}},[e.pauseOnFocusLoss]);function m(){document.hasFocus()||y(),window.addEventListener("focus",f),window.addEventListener("blur",y)}function h(){window.removeEventListener("focus",f),window.removeEventListener("blur",y)}function v(E){if(e.draggable===!0||e.draggable===E.pointerType){b();let D=l.current;o.canCloseOnClick=!0,o.canDrag=!0,D.style.transition="none",e.draggableDirection==="x"?(o.start=E.clientX,o.removalDistance=D.offsetWidth*(e.draggablePercent/100)):(o.start=E.clientY,o.removalDistance=D.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function S(E){let{top:D,bottom:I,left:z,right:Y}=l.current.getBoundingClientRect();E.nativeEvent.type!=="touchend"&&e.pauseOnHover&&E.clientX>=z&&E.clientX<=Y&&E.clientY>=D&&E.clientY<=I?y():f()}function f(){r(!0)}function y(){r(!1)}function b(){o.didMove=!1,document.addEventListener("pointermove",j),document.addEventListener("pointerup",C)}function g(){document.removeEventListener("pointermove",j),document.removeEventListener("pointerup",C)}function j(E){let D=l.current;if(o.canDrag&&D){o.didMove=!0,a&&y(),e.draggableDirection==="x"?o.delta=E.clientX-o.start:o.delta=E.clientY-o.start,o.start!==E.clientX&&(o.canCloseOnClick=!1);let I=e.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;D.style.transform=`translate3d(${I},0)`,D.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function C(){g();let E=l.current;if(o.canDrag&&o.didMove&&E){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){n(!0),e.closeToast(!0),e.collapseAll();return}E.style.transition="transform 0.2s, opacity 0.2s",E.style.removeProperty("transform"),E.style.removeProperty("opacity")}}let T={onPointerDown:v,onPointerUp:S};return i&&d&&(T.onMouseEnter=y,e.stacked||(T.onMouseLeave=f)),x&&(T.onClick=E=>{c&&c(E),o.canCloseOnClick&&u(!0)}),{playToast:f,pauseToast:y,isRunning:a,preventExitTransition:s,toastRef:l,eventHandlers:T}}var b2=typeof window<"u"?p.useLayoutEffect:p.useEffect,ei=({theme:e,type:a,isLoading:r,...s})=>ke.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${a})`,...s});function h2(e){return ke.createElement(ei,{...e},ke.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function y2(e){return ke.createElement(ei,{...e},ke.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function v2(e){return ke.createElement(ei,{...e},ke.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function j2(e){return ke.createElement(ei,{...e},ke.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function N2(){return ke.createElement("div",{className:"Toastify__spinner"})}var od={info:y2,warning:h2,success:v2,error:j2,spinner:N2},S2=e=>e in od;function w2({theme:e,type:a,isLoading:r,icon:s}){let n=null,l={theme:e,type:a};return s===!1||(La(s)?n=s({...l,isLoading:r}):p.isValidElement(s)?n=p.cloneElement(s,l):r?n=od.spinner():S2(a)&&(n=od[a](l))),n}var C2=e=>{let{isRunning:a,preventExitTransition:r,toastRef:s,eventHandlers:n,playToast:l}=g2(e),{closeButton:o,children:i,autoClose:d,onClick:u,type:c,hideProgressBar:x,closeToast:m,transition:h,position:v,className:S,style:f,progressClassName:y,updateId:b,role:g,progress:j,rtl:C,toastId:T,deleteToast:E,isIn:D,isLoading:I,closeOnClick:z,theme:Y,ariaLabel:_}=e,V=Ir("Toastify__toast",`Toastify__toast-theme--${Y}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":C},{"Toastify__toast--close-on-click":z}),R=La(S)?S({rtl:C,position:v,type:c,defaultClassName:V}):Ir(V,S),B=w2(e),F=!!j||!d,$={closeToast:m,type:c,theme:Y},N=null;return o===!1||(La(o)?N=o($):p.isValidElement(o)?N=p.cloneElement(o,$):N=e2($)),ke.createElement(h,{isIn:D,done:E,position:v,preventExitTransition:r,nodeRef:s,playToast:l},ke.createElement("div",{id:T,tabIndex:0,onClick:u,"data-in":D,className:R,...n,style:f,ref:s,...D&&{role:g,"aria-label":_}},B!=null&&ke.createElement("div",{className:Ir("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!I})},B),ab(i,e,!a),N,!e.customProgressBar&&ke.createElement(t2,{...b&&!F?{key:`p-${b}`}:{},rtl:C,theme:Y,delay:d,isRunning:a,isIn:D,closeToast:m,hide:x,type:c,className:y,controlledProgress:F,progress:j||0})))},k2=(e,a=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:a}),F2=K1(k2("bounce",!0)),T2={position:"top-right",transition:F2,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function E2(e){let a={...T2,...e},r=e.stacked,[s,n]=p.useState(!0),l=p.useRef(null),{getToastToRender:o,isToastActive:i,count:d}=f2(a),{className:u,style:c,rtl:x,containerId:m,hotKeys:h}=a;function v(f){let y=Ir("Toastify__toast-container",`Toastify__toast-container--${f}`,{"Toastify__toast-container--rtl":x});return La(u)?u({position:f,rtl:x,defaultClassName:y}):Ir(y,sd(u))}function S(){r&&(n(!0),W.play())}return b2(()=>{var f;if(r){let y=l.current.querySelectorAll('[data-in="true"]'),b=12,g=(f=a.position)==null?void 0:f.includes("top"),j=0,C=0;Array.from(y).reverse().forEach((T,E)=>{let D=T;D.classList.add("Toastify__toast--stacked"),E>0&&(D.dataset.collapsed=`${s}`),D.dataset.pos||(D.dataset.pos=g?"top":"bot");let I=j*(s?.2:1)+(s?0:b*E);D.style.setProperty("--y",`${g?I:I*-1}px`),D.style.setProperty("--g",`${b}`),D.style.setProperty("--s",`${1-(s?C:0)}`),j+=D.offsetHeight,C+=.025})}},[s,d,r]),p.useEffect(()=>{function f(y){var b;let g=l.current;h(y)&&((b=g.querySelector('[tabIndex="0"]'))==null||b.focus(),n(!1),W.pause()),y.key==="Escape"&&(document.activeElement===g||g!=null&&g.contains(document.activeElement))&&(n(!0),W.play())}return document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f)}},[h]),ke.createElement("section",{ref:l,className:"Toastify",id:m,onMouseEnter:()=>{r&&(n(!1),W.pause())},onMouseLeave:S,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":a["aria-label"]},o((f,y)=>{let b=y.length?{...c}:{...c,pointerEvents:"none"};return ke.createElement("div",{tabIndex:-1,className:v(f),"data-stacked":r,style:b,key:`c-${f}`},y.map(({content:g,props:j})=>ke.createElement(C2,{...j,stacked:r,collapseAll:S,isIn:i(j.toastId,j.containerId),key:`t-${j.key}`},g)))}))}function A2(){const[e,a]=p.useState(!1),[r,s]=p.useState("");st();const n="http://18.166.29.239:3000",l=p.useCallback(()=>{try{const d=localStorage.getItem("adminData");return d?JSON.parse(d).role==="sysad":!1}catch(d){return console.error("Error checking sysadmin status:",d),!1}},[]),o=p.useCallback(async()=>{console.log(" Maintenance check temporarily disabled")},[n,l]),i=p.useCallback(()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminData"),localStorage.removeItem("userToken"),localStorage.removeItem("userData"),window.location.href="/force-logout"},[]);return p.useEffect(()=>{if(window.location.pathname==="/force-logout"||window.location.pathname==="/login")return;o();const d=setInterval(o,3e4);return()=>clearInterval(d)},[o]),p.useEffect(()=>{const d=u=>{u.key==="maintenanceMode"&&o()};return window.addEventListener("storage",d),()=>window.removeEventListener("storage",d)},[o]),{isMaintenanceMode:e,maintenanceMessage:r,isSysadmin:l(),checkMaintenanceStatus:o,forceLogout:i}}function R2(){const e=st(),{loginUser:a,isLoggedin:r}=p.useContext(Cu),[s,n]=p.useState("email"),[l,o]=p.useState(""),[i,d]=p.useState(""),[u,c]=p.useState(!1),[x,m]=p.useState(""),[h,v]=p.useState(null),[S,f]=p.useState(null),y=p.useRef(!1),[b,g]=p.useState(""),[j,C]=p.useState(""),[T,E]=p.useState(""),[D,I]=p.useState(""),[z,Y]=p.useState(!1);p.useEffect(()=>{(async()=>{var O;try{const U=await(await fetch("http://18.166.29.239:3000/api/admin/sysad/config")).json();(O=U==null?void 0:U.config)!=null&&O.maintenanceMode&&Y(!0)}catch(q){console.log("Could not check maintenance status:",q.message)}})()},[]),p.useEffect(()=>{const A=localStorage.getItem("adminToken"),O=localStorage.getItem("userToken"),q=localStorage.getItem("adminData");if(A&&q)try{const H=JSON.parse(q).role;H==="motorpool"?e("/admin/motorpool",{replace:!0}):H==="merchant"?e("/admin/merchant",{replace:!0}):H==="treasury"?e("/admin/treasury/dashboard",{replace:!0}):H==="accounting"?e("/admin/accounting/home",{replace:!0}):H==="sysad"?e("/admin/sysad/dashboard",{replace:!0}):e("/admin/motorpool",{replace:!0})}catch(U){console.error("Error parsing adminData:",U)}else O&&e("/user/dashboard",{replace:!0})},[e]),p.useEffect(()=>{r&&S&&y.current&&(console.log(" Authentication state confirmed, navigating to:",S),e(S,{replace:!0}),f(null),y.current=!1)},[r,S,e]);const _=A=>{const O=A.toLowerCase();return O.includes("motorpool")||O.includes("treasury")||O.includes("accounting")||O.includes("admin")||O.includes("sysad")||O.includes("merchant")||O.includes("cafeteria")||O.includes("bookstore")||O.includes("printshop")?"admin":"user"},V=A=>({admin:{endpoint:"http://18.166.29.239:3000/api/login",checkEndpoint:"http://18.166.29.239:3000/api/login/check-email",tokenKey:"adminToken",dataKey:"adminData",title:"Admin Portal",redirectPath:"/admin/motorpool",color:"#FFD41C",icon:""},merchant:{endpoint:"http://18.166.29.239:3000/api/merchant/auth/login",checkEndpoint:"http://18.166.29.239:3000/api/merchant/auth/check-email",tokenKey:"merchantToken",dataKey:"merchantData",title:"Merchant Portal",redirectPath:"/admin/merchant",color:"#22C55E",icon:""},user:{endpoint:"http://18.166.29.239:3000/api/login",checkEndpoint:"http://18.166.29.239:3000/api/login/check-email",tokenKey:"userToken",dataKey:"userData",title:"Student Portal",redirectPath:"/user/dashboard",color:"#3B82F6",icon:""}})[A],R=async A=>{if(A.preventDefault(),!l.trim()){m("Please enter your email address");return}m("");const O=_(l);v(O),n("pin")},B=async A=>{if(A.preventDefault(),!i){m("Please enter your PIN");return}c(!0),m("");try{const O=V(h);console.log(" Attempting login:",{email:l,role:h,endpoint:O.endpoint});const q=await fetch(O.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailOrUsername:l,password:i})}),U=await q.json();if(console.log(" Server response data:",U),q.status===403&&U.requiresActivation){if(console.log("  Account requires activation, redirecting..."),!U.accountId)throw console.error(" Missing accountId in activation response:",U),new Error("Server error: Missing account ID for activation");const we=`/activate?accountId=${U.accountId}&accountType=${U.accountType||h}&email=${encodeURIComponent(U.email||l)}&fullName=${encodeURIComponent(U.fullName||"")}`;console.log(" Activation URL:",we),e(we);return}if(!q.ok)throw new Error(U.error||"Login failed");if(console.log(" Login successful:",U),!U.token)throw new Error("Server error: Missing authentication token");const H=U.role&&["motorpool","merchant","treasury","accounting","sysad","cafeteria","bookstore","printshop"].includes(U.role),J=H?"admin":h;if(z&&U.role!=="sysad")throw new Error("System is under maintenance. Only system administrators can access the system at this time.");const ee=J==="admin"?V("admin"):O;console.log(" Role detection:",{detectedRole:h,serverRole:U.role,isAdminResponse:H,actualRole:J,willUseConfig:ee.tokenKey});const{token:L,...X}=U,te=X;if(!te||typeof te!="object"||Object.keys(te).length===0)throw console.error(" Invalid user data received from server:",U),new Error("Server error: Invalid user data received");console.log(" Storing user data via AppContext:",{tokenKey:ee.tokenKey,dataKey:ee.dataKey,userData:te});const ce=J==="admin";a(te,U.token,ce),console.log(" Authentication state updated via AppContext"),y.current=!0;let de;if(J==="admin"){if(!U.role)throw console.error(" Missing role in admin response:",U),new Error("Server error: Admin role not provided");U.role==="treasury"?de="/admin/treasury/dashboard":U.role==="accounting"?de="/admin/accounting/home":U.role==="sysad"?de="/admin/sysad/dashboard":de=`/admin/${U.role}`}else de=ee.redirectPath;console.log(" Setting pending redirect to:",de),f(de)}catch(O){console.error(" Login error:",O),m(O.message||"Invalid PIN. Please try again.")}finally{c(!1)}},F=()=>{n("email"),d(""),m(""),v(null)},$=async A=>{A.preventDefault(),c(!0),m("");try{const O=await fetch("http://18.166.29.239:3000/api/login/forgot-pin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:b})}),q=await O.json();if(!O.ok)throw new Error(q.error||"Failed to send OTP");console.log(" OTP sent to email"),n("forgot-otp")}catch(O){console.error(" Forgot password error:",O),m(O.message||"Failed to send OTP")}finally{c(!1)}},N=async A=>{A.preventDefault(),c(!0),m("");try{const O=await fetch("http://18.166.29.239:3000/api/login/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:b,otp:j})}),q=await O.json();if(!O.ok)throw new Error(q.error||"Invalid OTP");console.log(" OTP verified"),n("forgot-newpin")}catch(O){console.error(" OTP verification error:",O),m(O.message||"Invalid OTP")}finally{c(!1)}},w=async A=>{if(A.preventDefault(),T!==D){m("PINs do not match");return}if(!/^\d{6}$/.test(T)){m("PIN must be exactly 6 digits");return}c(!0),m("");try{const O=await fetch("http://18.166.29.239:3000/api/login/reset-pin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:b,newPin:T})}),q=await O.json();if(!O.ok)throw new Error(q.error||"Failed to reset PIN");console.log(" PIN reset successful"),n("forgot-confirm"),o(""),d(""),C(""),E(""),I(""),m("")}catch(O){console.error(" Reset PIN error:",O),m(O.message||"Failed to reset PIN")}finally{c(!1)}},k=A=>{A.key==="Enter"&&(s==="email"?R(A):s==="pin"?B(A):s==="forgot-email"?$(A):s==="forgot-otp"?N(A):s==="forgot-newpin"&&w(A))};return t.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#0F1227] to-[#181D40] relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-1/4 -left-20 w-96 h-96 bg-[#FFD41C] opacity-5 rounded-full blur-3xl animate-float"}),t.jsx("div",{className:"absolute bottom-1/4 -right-20 w-96 h-96 bg-[#FFD41C] opacity-5 rounded-full blur-3xl animate-float-delayed"}),t.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-[#FFD41C] opacity-3 rounded-full blur-3xl animate-pulse-slow"}),t.jsx("div",{className:"absolute top-20 left-1/4 w-2 h-2 bg-[#FFD41C] opacity-30 rounded-full animate-particle-1"}),t.jsx("div",{className:"absolute top-40 right-1/3 w-3 h-3 bg-[#FFD41C] opacity-20 rounded-full animate-particle-2"}),t.jsx("div",{className:"absolute bottom-32 left-1/3 w-2 h-2 bg-[#FFD41C] opacity-25 rounded-full animate-particle-3"}),t.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 bg-[#FFD41C] opacity-40 rounded-full animate-particle-4"}),t.jsx("div",{className:"absolute top-0 left-1/4 w-px h-full bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.1)] to-transparent animate-shimmer-slow"}),t.jsx("div",{className:"absolute top-0 right-1/3 w-px h-full bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.1)] to-transparent animate-shimmer-slow",style:{animationDelay:"2s"}})]}),t.jsxs("div",{className:"relative z-10 bg-[rgba(30,35,71,0.95)] rounded-[20px] p-12 w-full max-w-[450px] border-2 border-[rgba(255,212,28,0.3)] backdrop-blur-sm shadow-2xl animate-slideUp",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-[#FFD41C] rounded-full mb-6 shadow-lg shadow-[rgba(255,212,28,0.4)]",children:t.jsx("span",{className:"text-5xl font-extrabold text-[#181D40]",children:"NU"})}),t.jsx("h1",{className:"text-3xl font-extrabold text-[#FBFBFB] mb-2 tracking-tight",children:"Welcome Back"}),t.jsx("p",{className:"text-[rgba(251,251,251,0.6)] text-sm",children:"Sign in to access your account"})]}),z&&t.jsxs("div",{className:"mb-6 p-4 bg-[rgba(255,212,28,0.15)] border-2 border-[rgba(255,212,28,0.4)] rounded-xl text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsx("span",{className:"text-[#FFD41C] font-bold",children:"Maintenance Mode"})]}),t.jsx("p",{className:"text-[rgba(251,251,251,0.7)] text-xs",children:"System is under maintenance. Only system administrators can log in."})]}),x&&t.jsxs("div",{className:"mb-6 p-4 bg-[rgba(239,68,68,0.15)] border-l-4 border-[#EF4444] rounded text-[#EF4444] text-sm flex items-start gap-3",children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{children:x})]}),s==="email"&&t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Email Address"}),t.jsx("input",{type:"email",value:l,onChange:A=>o(A.target.value),onKeyPress:k,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-lg placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"you@nu.edu.ph",autoFocus:!0})]}),t.jsx("button",{onClick:R,disabled:u,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:u?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Verifying..."]}):"Continue "})]}),s==="pin"&&t.jsxs("div",{children:[t.jsx("button",{onClick:F,className:"mb-6 text-sm text-[#FFD41C] hover:text-[#FFC700] flex items-center gap-2 font-semibold transition-colors",children:" Change Email"}),t.jsxs("div",{className:"mb-6 p-4 bg-[rgba(255,212,28,0.1)] border border-[rgba(255,212,28,0.3)] rounded-xl",children:[t.jsx("p",{className:"text-xs text-[rgba(251,251,251,0.6)] uppercase tracking-wide mb-1",children:"Signing in as"}),t.jsx("p",{className:"text-base text-[#FBFBFB] font-semibold",children:l})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Enter PIN"}),t.jsx("input",{type:"password",value:i,onChange:A=>{const O=A.target.value;(O===""||/^\d+$/.test(O))&&d(O)},onKeyPress:k,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-2xl tracking-widest text-center placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"     ",autoFocus:!0,maxLength:6,inputMode:"numeric"})]}),t.jsx("button",{onClick:B,disabled:u,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:u?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Signing In..."]}):"Sign In"}),t.jsx("button",{onClick:()=>{g(l),n("forgot-email")},className:"w-full mt-6 text-sm text-[rgba(251,251,251,0.6)] hover:text-[#FFD41C] transition-colors font-medium",children:"Forgot your PIN?"})]}),s==="forgot-email"&&t.jsxs("div",{children:[t.jsx("button",{onClick:()=>{n("pin"),g("")},className:"mb-6 text-sm text-[#FFD41C] hover:text-[#FFC700] flex items-center gap-2 font-semibold transition-colors",children:" Back to Login"}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-[#FBFBFB] mb-2",children:"Forgot Your PIN?"}),t.jsx("p",{className:"text-sm text-[rgba(251,251,251,0.6)]",children:"We'll send a verification code to your email"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Email Address"}),t.jsx("input",{type:"email",value:b,onChange:A=>g(A.target.value),onKeyPress:k,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-lg placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"you@nu.edu.ph",autoFocus:!0})]}),t.jsx("button",{onClick:$,disabled:u,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:u?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Sending..."]}):"Send Verification Code"})]}),s==="forgot-otp"&&t.jsxs("div",{children:[t.jsx("button",{onClick:()=>n("forgot-email"),className:"mb-6 text-sm text-[#FFD41C] hover:text-[#FFC700] flex items-center gap-2 font-semibold transition-colors",children:" Back"}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-[#FBFBFB] mb-2",children:"Enter Verification Code"}),t.jsx("p",{className:"text-sm text-[rgba(251,251,251,0.6)]",children:"Check your email for the 6-digit code"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Verification Code"}),t.jsx("input",{type:"text",value:j,onChange:A=>C(A.target.value),onKeyPress:k,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-2xl tracking-widest text-center placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"     ",autoFocus:!0,maxLength:6,inputMode:"numeric"})]}),t.jsx("button",{onClick:N,disabled:u,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:u?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Verifying..."]}):"Verify Code"})]}),s==="forgot-newpin"&&t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-[#FBFBFB] mb-2",children:"Create New PIN"}),t.jsx("p",{className:"text-sm text-[rgba(251,251,251,0.6)]",children:"Enter a new 6-digit PIN"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"New PIN"}),t.jsx("input",{type:"password",value:T,onChange:A=>{const O=A.target.value;(O===""||/^\d+$/.test(O))&&E(O)},onKeyPress:k,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-2xl tracking-widest text-center placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"     ",autoFocus:!0,maxLength:6,inputMode:"numeric"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Confirm PIN"}),t.jsx("input",{type:"password",value:D,onChange:A=>{const O=A.target.value;(O===""||/^\d+$/.test(O))&&I(O)},onKeyPress:k,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-2xl tracking-widest text-center placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"     ",maxLength:6,inputMode:"numeric"})]}),t.jsx("button",{onClick:w,disabled:u,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:u?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Resetting..."]}):"Reset PIN"})]}),s==="forgot-confirm"&&t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-[rgba(34,197,94,0.15)] flex items-center justify-center border-2 border-[#22C55E]",children:t.jsx("svg",{className:"w-12 h-12 text-[#22C55E]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),t.jsx("h2",{className:"text-2xl font-bold text-[#22C55E] mb-3",children:"PIN Reset Successful!"}),t.jsxs("p",{className:"text-[rgba(251,251,251,0.7)] mb-8 text-sm leading-relaxed",children:["Your PIN has been successfully reset.",t.jsx("br",{}),"You can now login with your new 6-digit PIN."]}),t.jsx("button",{onClick:()=>{n("email"),g("")},className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)]",children:"Back to Login"})]}),t.jsx("div",{className:"mt-8 pt-6 border-t border-[rgba(255,212,28,0.2)] text-center",children:t.jsx("p",{className:"text-xs text-[rgba(251,251,251,0.4)]",children:" 2026 National University Laguna"})})]}),t.jsx("style",{children:`
        /* Floating orb animations */
        @keyframes float {
          0%, 100% {
            transform: translateY(0px) translateX(0px) scale(1);
          }
          33% {
            transform: translateY(-30px) translateX(20px) scale(1.1);
          }
          66% {
            transform: translateY(-15px) translateX(-15px) scale(0.9);
          }
        }

        @keyframes float-delayed {
          0%, 100% {
            transform: translateY(0px) translateX(0px) scale(1);
          }
          33% {
            transform: translateY(25px) translateX(-25px) scale(0.9);
          }
          66% {
            transform: translateY(-20px) translateX(15px) scale(1.1);
          }
        }

        .animate-float {
          animation: float 20s ease-in-out infinite;
        }

        .animate-float-delayed {
          animation: float-delayed 25s ease-in-out infinite;
        }

        /* Slow pulse for background */
        @keyframes pulse-slow {
          0%, 100% {
            opacity: 0.03;
            transform: translate(-50%, -50%) scale(1);
          }
          50% {
            opacity: 0.05;
            transform: translate(-50%, -50%) scale(1.1);
          }
        }

        .animate-pulse-slow {
          animation: pulse-slow 8s ease-in-out infinite;
        }

        /* Particle animations */
        @keyframes particle-1 {
          0%, 100% {
            transform: translateY(0) translateX(0);
            opacity: 0.3;
          }
          50% {
            transform: translateY(-100px) translateX(50px);
            opacity: 0.6;
          }
        }

        @keyframes particle-2 {
          0%, 100% {
            transform: translateY(0) translateX(0) scale(1);
            opacity: 0.2;
          }
          50% {
            transform: translateY(80px) translateX(-60px) scale(1.5);
            opacity: 0.5;
          }
        }

        @keyframes particle-3 {
          0%, 100% {
            transform: translateY(0) translateX(0);
            opacity: 0.25;
          }
          50% {
            transform: translateY(-120px) translateX(-40px);
            opacity: 0.5;
          }
        }

        @keyframes particle-4 {
          0%, 100% {
            transform: translateY(0) translateX(0) scale(1);
            opacity: 0.4;
          }
          50% {
            transform: translateY(60px) translateX(80px) scale(2);
            opacity: 0.7;
          }
        }

        .animate-particle-1 {
          animation: particle-1 15s ease-in-out infinite;
        }

        .animate-particle-2 {
          animation: particle-2 12s ease-in-out infinite;
        }

        .animate-particle-3 {
          animation: particle-3 18s ease-in-out infinite;
        }

        .animate-particle-4 {
          animation: particle-4 10s ease-in-out infinite;
        }

        /* Shimmer effect for gradient lines */
        @keyframes shimmer-slow {
          0% {
            opacity: 0.05;
          }
          50% {
            opacity: 0.15;
          }
          100% {
            opacity: 0.05;
          }
        }

        .animate-shimmer-slow {
          animation: shimmer-slow 6s ease-in-out infinite;
        }

        /* Slide up animation for login card */
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(30px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }

        .animate-slideUp {
          animation: slideUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Enhanced input focus glow */
        input:focus {
          box-shadow: 0 0 0 3px rgba(255, 212, 28, 0.1),
                      0 0 20px rgba(255, 212, 28, 0.15);
        }

        /* Button hover glow */
        button:hover:not(:disabled) {
          box-shadow: 0 8px 30px rgba(255, 212, 28, 0.4),
                      0 0 40px rgba(255, 212, 28, 0.2);
        }

        /* Smooth step transitions */
        .step-transition {
          animation: fadeInStep 0.4s ease-out;
        }

        @keyframes fadeInStep {
          from {
            opacity: 0;
            transform: translateX(-20px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
      `})]})}const kl="http://18.166.29.239:3000/api",z2={admin:{title:"Administrator Terms and Conditions",sections:[{title:"1. Administrative Responsibilities",content:"As an administrator of the NUCash system, you are entrusted with managing financial transactions, user accounts, and system configurations. You agree to perform your duties with utmost integrity and professionalism."},{title:"2. Data Privacy and Confidentiality",content:"You acknowledge that you will have access to sensitive user information including personal data and financial records. You agree to maintain strict confidentiality and comply with the Data Privacy Act of 2012 (Republic Act No. 10173)."},{title:"3. Security Protocols",content:"You agree to follow all security protocols including: keeping your PIN confidential, logging out after each session, reporting any suspicious activities immediately, and never sharing your credentials with others."},{title:"4. Transaction Handling",content:"All financial transactions must be processed accurately and recorded properly. Any discrepancies must be reported immediately to your supervisor. Unauthorized transactions or fund manipulation is strictly prohibited and may result in disciplinary action."},{title:"5. System Usage",content:"The NUCash administrative system is to be used solely for authorized purposes. Personal use, unauthorized access to other accounts, or any form of system abuse is prohibited."},{title:"6. Liability",content:"You understand that any violation of these terms may result in suspension of access, disciplinary action, and potential legal consequences. National University reserves the right to audit all administrative activities."}]},user:{title:"NUCash User Agreement",sections:[{title:"1. Account Registration",content:"By activating your NUCash account, you confirm that all information provided during registration is accurate and complete. You agree to keep your account information up to date."},{title:"2. PIN Security",content:"Your 6-digit PIN is your primary authentication method. You are responsible for keeping your PIN confidential. Never share your PIN with anyone, including NUCash staff. We will never ask for your PIN."},{title:"3. RFID Card Usage",content:"Your NUCash account is linked to your RFID card. Report any lost or stolen cards immediately to the Treasury Office. You are responsible for all transactions made with your card until it is reported lost."},{title:"4. Transaction Terms",content:"All transactions are final once processed. Your NUCash balance can be used for shuttle fare payments, merchant purchases, and other campus services. Negative balances up to the allowed limit may be permitted."},{title:"5. Privacy Policy",content:"National University collects and processes your personal data in accordance with the Data Privacy Act of 2012. Your transaction history and account information are kept confidential and used only for system operations."},{title:"6. Account Deactivation",content:"You may request to deactivate your account at any time. Any remaining balance will be refunded according to university policy. Inactive accounts may be automatically suspended after extended periods of non-use."}]}};function B2(){const[e]=Y1(),a=st(),r=e.get("accountId"),s=e.get("accountType")||"user",n=e.get("email")||"",l=e.get("fullName")||"",o=["admin","motorpool","treasury","accounting","merchant"].includes(s),i=o?"admin":"user",[d,u]=p.useState("terms"),[c,x]=p.useState(!1),[m,h]=p.useState(""),[v,S]=p.useState(!1),[f,y]=p.useState(!1),b=p.useRef(null),[g,j]=p.useState(""),[C,T]=p.useState(""),[E,D]=p.useState(!1),[I,z]=p.useState(["","","","","",""]),Y=p.useRef([]),[_,V]=p.useState(0);p.useEffect(()=>{r||(W.error("Invalid activation link. Please try logging in again."),a("/login"))},[r,a]);const R=H=>{const{scrollTop:J,scrollHeight:ee,clientHeight:L}=H.target;J+L>=ee-10&&y(!0)},B=async()=>{if(!v){W.warning("Please read and accept the terms and conditions");return}x(!0),h("");try{const H=await fetch(`${kl}/activation/accept-terms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:r,accountType:o?"admin":"user"})}),J=await H.json();if(!H.ok)throw new Error(J.error||"Failed to accept terms");W.success("Terms accepted!"),u("pin")}catch(H){h(H.message),W.error(H.message)}finally{x(!1)}},F=async()=>{if(g.length!==6){h("PIN must be exactly 6 digits");return}if(!/^\d{6}$/.test(g)){h("PIN must contain only numbers");return}if(g!==C){h("PINs do not match");return}if(["123456","654321","111111","222222","333333","444444","555555","666666","777777","888888","999999","000000"].includes(g)){h("Please choose a stronger PIN");return}x(!0),h("");try{const J=await fetch(`${kl}/activation/set-new-pin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:r,accountType:o?"admin":"user",newPin:g})}),ee=await J.json();if(!J.ok)throw new Error(ee.error||"Failed to set PIN");W.success("PIN set! Check your email for the verification code."),u("otp"),V(60)}catch(J){h(J.message),W.error(J.message)}finally{x(!1)}},$=(H,J)=>{var L;if(!/^\d*$/.test(J))return;const ee=[...I];ee[H]=J.slice(-1),z(ee),J&&H<5&&((L=Y.current[H+1])==null||L.focus())},N=(H,J)=>{var ee;J.key==="Backspace"&&!I[H]&&H>0&&((ee=Y.current[H-1])==null||ee.focus())},w=H=>{var ee;H.preventDefault();const J=H.clipboardData.getData("text").slice(0,6);if(/^\d+$/.test(J)){const L=J.split("").concat(Array(6).fill("")).slice(0,6);z(L),(ee=Y.current[Math.min(J.length,5)])==null||ee.focus()}},k=async()=>{const H=I.join("");if(H.length!==6){h("Please enter the complete 6-digit code");return}x(!0),h("");try{const J=await fetch(`${kl}/activation/verify-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:r,accountType:o?"admin":"user",otp:H})}),ee=await J.json();if(!J.ok)throw new Error(ee.error||"Invalid verification code");W.success("Account activated successfully!"),u("success")}catch(J){h(J.message),W.error(J.message)}finally{x(!1)}},A=async()=>{if(!(_>0)){x(!0);try{const H=await fetch(`${kl}/activation/resend-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:r,accountType:o?"admin":"user"})}),J=await H.json();if(!H.ok)throw new Error(J.error||"Failed to resend code");W.success("Verification code resent!"),V(60),z(["","","","","",""])}catch(H){W.error(H.message)}finally{x(!1)}}};p.useEffect(()=>{if(_>0){const H=setTimeout(()=>V(_-1),1e3);return()=>clearTimeout(H)}},[_]);const O=()=>{a("/login")},q=z2[i],U=["Terms","PIN","Verify","Done"];return t.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0F1227 0%, #181D40 100%)",position:"relative",overflow:"hidden",padding:"20px"},children:[t.jsxs("div",{style:{position:"absolute",inset:0,overflow:"hidden",pointerEvents:"none"},children:[t.jsx("div",{style:{position:"absolute",top:"25%",left:"-80px",width:"384px",height:"384px",background:"#FFD41C",opacity:.05,borderRadius:"50%",filter:"blur(60px)"}}),t.jsx("div",{style:{position:"absolute",bottom:"25%",right:"-80px",width:"384px",height:"384px",background:"#FFD41C",opacity:.05,borderRadius:"50%",filter:"blur(60px)"}})]}),t.jsxs("div",{style:{position:"relative",zIndex:10,width:"100%",maxWidth:"500px"},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[t.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"96px",height:"96px",background:"#FFD41C",borderRadius:"50%",marginBottom:"24px",boxShadow:"0 8px 32px rgba(255, 212, 28, 0.4)"},children:t.jsx("span",{style:{fontSize:"48px",fontWeight:800,color:"#181D40"},children:"NU"})}),t.jsx("h1",{style:{fontSize:"28px",fontWeight:800,color:"#FBFBFB",margin:"0 0 8px 0",letterSpacing:"-0.5px"},children:"Account Activation"}),t.jsxs("p",{style:{color:"rgba(251, 251, 251, 0.6)",margin:0,fontSize:"14px"},children:["Welcome, ",t.jsx("span",{style:{color:"#FFD41C",fontWeight:600},children:l||n})]})]}),t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"32px"},children:U.map((H,J)=>{const L=["terms","pin","otp","success"].indexOf(d),X=L>J,te=L===J;return t.jsxs(ke.Fragment,{children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"6px"},children:[t.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"14px",transition:"all 0.3s ease",background:te?"#FFD41C":X?"#22C55E":"rgba(255, 255, 255, 0.1)",color:te?"#181D40":X?"#FFFFFF":"rgba(251, 251, 251, 0.4)",border:te?"3px solid rgba(255, 212, 28, 0.5)":X?"3px solid rgba(34, 197, 94, 0.5)":"3px solid rgba(255, 255, 255, 0.1)",boxShadow:te?"0 4px 20px rgba(255, 212, 28, 0.4)":X?"0 4px 20px rgba(34, 197, 94, 0.3)":"none"},children:X?"":J+1}),t.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:te?"#FFD41C":X?"#22C55E":"rgba(251, 251, 251, 0.4)",textTransform:"uppercase",letterSpacing:"0.5px"},children:H})]}),J<3&&t.jsx("div",{style:{width:"40px",height:"3px",borderRadius:"2px",background:X?"#22C55E":"rgba(255, 255, 255, 0.1)",marginBottom:"20px"}})]},H)})}),t.jsxs("div",{style:{background:"rgba(30, 35, 71, 0.95)",borderRadius:"20px",border:"2px solid rgba(255, 212, 28, 0.3)",overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.4)",backdropFilter:"blur(10px)"},children:[d==="terms"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(255, 212, 28, 0.15) 0%, rgba(255, 212, 28, 0.05) 100%)",borderBottom:"2px solid rgba(255, 212, 28, 0.2)",padding:"20px 24px"},children:[t.jsxs("h2",{style:{color:"#FFD41C",fontSize:"20px",fontWeight:700,margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," ",q.title]}),t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.6)",fontSize:"13px",margin:"8px 0 0 0"},children:"Please read carefully before proceeding"})]}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsx("div",{ref:b,onScroll:R,style:{height:"280px",overflowY:"auto",background:"rgba(15, 18, 39, 0.5)",borderRadius:"12px",padding:"20px",marginBottom:"16px",border:"2px solid rgba(255, 212, 28, 0.15)"},children:q.sections.map((H,J)=>t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h3",{style:{color:"#FFD41C",fontWeight:700,fontSize:"14px",margin:"0 0 8px 0"},children:H.title}),t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.7)",fontSize:"13px",lineHeight:"1.7",margin:0},children:H.content})]},J))}),!f&&t.jsxs("p",{style:{color:"rgba(251, 251, 251, 0.4)",fontSize:"12px",textAlign:"center",marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[t.jsx("span",{children:""})," Scroll to the bottom to enable acceptance"]}),t.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:f?"pointer":"not-allowed",marginBottom:"24px",padding:"16px",background:v?"rgba(255, 212, 28, 0.1)":"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:v?"2px solid rgba(255, 212, 28, 0.3)":"2px solid rgba(255, 255, 255, 0.1)",transition:"all 0.2s ease"},children:[t.jsx("input",{type:"checkbox",checked:v,onChange:H=>S(H.target.checked),disabled:!f,style:{width:"20px",height:"20px",marginTop:"2px",cursor:f?"pointer":"not-allowed",accentColor:"#FFD41C"}}),t.jsxs("span",{style:{fontSize:"14px",color:f?"#FBFBFB":"rgba(251, 251, 251, 0.4)",lineHeight:"1.5"},children:["I have read and agree to the ",o?"Administrator":"User"," Terms and Conditions"]})]}),m&&t.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.3)",color:"#EF4444",padding:"12px 16px",borderRadius:"10px",marginBottom:"16px",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," ",m]}),t.jsx("button",{onClick:B,disabled:!v||c,style:{width:"100%",padding:"16px",borderRadius:"12px",border:"none",background:!v||c?"rgba(255, 212, 28, 0.3)":"#FFD41C",color:"#181D40",fontSize:"16px",fontWeight:700,cursor:!v||c?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:!v||c?"none":"0 4px 20px rgba(255, 212, 28, 0.4)",textTransform:"uppercase",letterSpacing:"1px"},children:c?"Processing...":"Accept & Continue "})]})]}),d==="pin"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.05) 100%)",borderBottom:"2px solid rgba(59, 130, 246, 0.2)",padding:"20px 24px"},children:[t.jsxs("h2",{style:{color:"#3B82F6",fontSize:"20px",fontWeight:700,margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," Set Your New PIN"]}),t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.6)",fontSize:"13px",margin:"8px 0 0 0"},children:"Create a secure 6-digit PIN for your account"})]}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",color:"#FFD41C",fontWeight:700,fontSize:"12px",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"New PIN"}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:E?"text":"password",value:g,onChange:H=>j(H.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,style:{width:"100%",padding:"16px 50px 16px 20px",borderRadius:"12px",border:"2px solid rgba(255, 212, 28, 0.3)",background:"rgba(15, 18, 39, 0.5)",color:"#FBFBFB",fontSize:"28px",fontFamily:"monospace",letterSpacing:"0.5em",textAlign:"center",outline:"none",boxSizing:"border-box",transition:"all 0.2s ease"},placeholder:"",onFocus:H=>{H.target.style.borderColor="#FFD41C",H.target.style.boxShadow="0 0 0 3px rgba(255, 212, 28, 0.1)"},onBlur:H=>{H.target.style.borderColor="rgba(255, 212, 28, 0.3)",H.target.style.boxShadow="none"}}),t.jsx("button",{type:"button",onClick:()=>D(!E),style:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"rgba(251, 251, 251, 0.5)",cursor:"pointer",fontSize:"20px",padding:"4px"},children:E?"":""})]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",color:"#FFD41C",fontWeight:700,fontSize:"12px",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Confirm PIN"}),t.jsx("input",{type:E?"text":"password",value:C,onChange:H=>T(H.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,style:{width:"100%",padding:"16px 20px",borderRadius:"12px",border:"2px solid rgba(255, 212, 28, 0.3)",background:"rgba(15, 18, 39, 0.5)",color:"#FBFBFB",fontSize:"28px",fontFamily:"monospace",letterSpacing:"0.5em",textAlign:"center",outline:"none",boxSizing:"border-box",transition:"all 0.2s ease"},placeholder:"",onFocus:H=>{H.target.style.borderColor="#FFD41C",H.target.style.boxShadow="0 0 0 3px rgba(255, 212, 28, 0.1)"},onBlur:H=>{H.target.style.borderColor="rgba(255, 212, 28, 0.3)",H.target.style.boxShadow="none"}})]}),C&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px",padding:"12px 16px",borderRadius:"10px",background:g===C?"rgba(34, 197, 94, 0.15)":"rgba(239, 68, 68, 0.15)",border:`2px solid ${g===C?"rgba(34, 197, 94, 0.3)":"rgba(239, 68, 68, 0.3)"}`,color:g===C?"#22C55E":"#EF4444",fontSize:"14px",fontWeight:600},children:[t.jsx("span",{children:g===C?"":""}),g===C?"PINs match":"PINs do not match"]}),t.jsxs("div",{style:{background:"rgba(255, 212, 28, 0.08)",borderRadius:"12px",padding:"16px",marginBottom:"20px",border:"2px solid rgba(255, 212, 28, 0.15)"},children:[t.jsxs("h4",{style:{color:"#FFD41C",fontWeight:700,fontSize:"13px",margin:"0 0 12px 0",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," PIN Tips"]}),t.jsxs("ul",{style:{margin:0,paddingLeft:"20px",color:"rgba(251, 251, 251, 0.6)",fontSize:"12px",lineHeight:"1.8"},children:[t.jsx("li",{children:"Use 6 digits that are easy for you to remember"}),t.jsx("li",{children:"Avoid simple patterns like 123456 or 111111"}),t.jsx("li",{children:"Don't use your birthday or phone number"}),t.jsx("li",{children:"Never share your PIN with anyone"})]})]}),m&&t.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.3)",color:"#EF4444",padding:"12px 16px",borderRadius:"10px",marginBottom:"16px",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," ",m]}),t.jsx("button",{onClick:F,disabled:g.length!==6||g!==C||c,style:{width:"100%",padding:"16px",borderRadius:"12px",border:"none",background:g.length!==6||g!==C||c?"rgba(59, 130, 246, 0.3)":"#3B82F6",color:"#FFFFFF",fontSize:"16px",fontWeight:700,cursor:g.length!==6||g!==C||c?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:g.length!==6||g!==C||c?"none":"0 4px 20px rgba(59, 130, 246, 0.4)",textTransform:"uppercase",letterSpacing:"1px"},children:c?"Setting PIN...":"Set PIN & Continue "})]})]}),d==="otp"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(34, 197, 94, 0.05) 100%)",borderBottom:"2px solid rgba(34, 197, 94, 0.2)",padding:"20px 24px"},children:[t.jsxs("h2",{style:{color:"#22C55E",fontSize:"20px",fontWeight:700,margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," Verify Your Email"]}),t.jsxs("p",{style:{color:"rgba(251, 251, 251, 0.6)",fontSize:"13px",margin:"8px 0 0 0"},children:["Enter the 6-digit code sent to ",t.jsx("strong",{style:{color:"#FFD41C"},children:n})]})]}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginBottom:"24px"},children:I.map((H,J)=>t.jsx("input",{ref:ee=>Y.current[J]=ee,type:"text",inputMode:"numeric",maxLength:1,value:H,onChange:ee=>$(J,ee.target.value),onKeyDown:ee=>N(J,ee),onPaste:w,style:{width:"52px",height:"64px",textAlign:"center",fontSize:"28px",fontWeight:700,borderRadius:"12px",border:H?"2px solid #22C55E":"2px solid rgba(255, 212, 28, 0.3)",background:H?"rgba(34, 197, 94, 0.1)":"rgba(15, 18, 39, 0.5)",color:"#FBFBFB",outline:"none",transition:"all 0.2s ease"},onFocus:ee=>{ee.target.style.borderColor="#FFD41C",ee.target.style.boxShadow="0 0 0 3px rgba(255, 212, 28, 0.2)"},onBlur:ee=>{ee.target.style.borderColor=H?"#22C55E":"rgba(255, 212, 28, 0.3)",ee.target.style.boxShadow="none"}},J))}),t.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.5)",fontSize:"13px",marginBottom:"8px"},children:"Didn't receive the code?"}),t.jsx("button",{onClick:A,disabled:_>0||c,style:{background:"none",border:"none",color:_>0||c?"rgba(251, 251, 251, 0.3)":"#FFD41C",fontWeight:700,fontSize:"14px",cursor:_>0||c?"not-allowed":"pointer",textDecoration:"underline",padding:"8px"},children:_>0?`Resend in ${_}s`:"Resend Code"})]}),m&&t.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.3)",color:"#EF4444",padding:"12px 16px",borderRadius:"10px",marginBottom:"16px",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," ",m]}),t.jsx("button",{onClick:k,disabled:I.join("").length!==6||c,style:{width:"100%",padding:"16px",borderRadius:"12px",border:"none",background:I.join("").length!==6||c?"rgba(34, 197, 94, 0.3)":"#22C55E",color:"#FFFFFF",fontSize:"16px",fontWeight:700,cursor:I.join("").length!==6||c?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:I.join("").length!==6||c?"none":"0 4px 20px rgba(34, 197, 94, 0.4)",textTransform:"uppercase",letterSpacing:"1px"},children:c?"Verifying...":"Verify & Activate "})]})]}),d==="success"&&t.jsxs("div",{style:{padding:"40px 24px",textAlign:"center"},children:[t.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100px",height:"100px",background:"linear-gradient(135deg, #22C55E 0%, #16A34A 100%)",borderRadius:"50%",marginBottom:"24px",boxShadow:"0 8px 32px rgba(34, 197, 94, 0.4)"},children:t.jsx("span",{style:{fontSize:"50px",color:"#FFFFFF"},children:""})}),t.jsx("h2",{style:{color:"#22C55E",fontSize:"26px",fontWeight:800,margin:"0 0 8px 0"},children:"Account Activated!"}),t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.7)",fontSize:"15px",margin:"0 0 24px 0",lineHeight:"1.6"},children:"Your account is now active. You can now log in with your new PIN."}),t.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"2px solid rgba(34, 197, 94, 0.3)"},children:[t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.5)",fontSize:"12px",margin:"0 0 4px 0",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Account Details"}),t.jsx("p",{style:{color:"#FBFBFB",fontWeight:700,fontSize:"18px",margin:"0 0 4px 0"},children:l||"User"}),t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.6)",fontSize:"14px",margin:0},children:n})]}),t.jsx("button",{onClick:O,style:{width:"100%",padding:"16px",borderRadius:"12px",border:"none",background:"#FFD41C",color:"#181D40",fontSize:"16px",fontWeight:700,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 20px rgba(255, 212, 28, 0.4)",textTransform:"uppercase",letterSpacing:"1px"},onMouseEnter:H=>{H.target.style.transform="translateY(-2px)",H.target.style.boxShadow="0 6px 24px rgba(255, 212, 28, 0.5)"},onMouseLeave:H=>{H.target.style.transform="translateY(0)",H.target.style.boxShadow="0 4px 20px rgba(255, 212, 28, 0.4)"},children:"Go to Login "})]})]}),t.jsxs("p",{style:{textAlign:"center",color:"rgba(251, 251, 251, 0.3)",fontSize:"12px",marginTop:"24px",lineHeight:"1.6"},children:["National University - Laguna Campus",t.jsx("br",{})," 2026 NUCash Digital Campus Wallet"]})]})]})}function Zr(){const{isDarkMode:e,toggleTheme:a}=ne();return t.jsx("button",{onClick:a,title:e?"Switch to Light Mode":"Switch to Dark Mode",style:{width:"40px",height:"40px",borderRadius:"50%",background:e?"rgba(255, 212, 28, 0.15)":"rgba(24, 29, 64, 0.1)",border:e?"2px solid rgba(255, 212, 28, 0.3)":"2px solid rgba(24, 29, 64, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",fontSize:"18px"},onMouseEnter:r=>{r.currentTarget.style.background=e?"rgba(255, 212, 28, 0.25)":"rgba(24, 29, 64, 0.15)",r.currentTarget.style.transform="scale(1.05) rotate(15deg)"},onMouseLeave:r=>{r.currentTarget.style.background=e?"rgba(255, 212, 28, 0.15)":"rgba(24, 29, 64, 0.1)",r.currentTarget.style.transform="scale(1) rotate(0deg)"},children:e?"":""})}function D2({adminData:e,onLogout:a,onOpenProfile:r}){var c;const{theme:s,isDarkMode:n}=ne(),[l,o]=p.useState(!1),i=p.useRef(null);p.useEffect(()=>{const x=m=>{i.current&&!i.current.contains(m.target)&&o(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const d=()=>{var h,v;if(!e)return"A";const x=((h=e.firstName)==null?void 0:h[0])||"",m=((v=e.lastName)==null?void 0:v[0])||"";return(x+m).toUpperCase()||"A"},u=()=>e&&`${e.firstName||""} ${e.lastName||""}`.trim()||"Admin";return t.jsxs("header",{style:{background:n?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${s.accent.primary}`,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsx("div",{style:{width:"45px",height:"45px",background:s.accent.primary,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:n?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:s.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash Admin Dashboard"}),t.jsx("p",{style:{fontSize:"12px",color:s.accent.primary,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"Motorpool Management System"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(34, 197, 94, 0.2)",padding:"6px 14px",borderRadius:"20px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[t.jsx("div",{style:{width:"7px",height:"7px",background:"#22C55E",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#22C55E"},children:"LIVE"})]}),t.jsx(Zr,{}),t.jsxs("div",{style:{position:"relative"},ref:i,children:[t.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${s.accent.primary}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:x=>{x.currentTarget.style.background=n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",x.currentTarget.style.transform="scale(1.02)"},onMouseLeave:x=>{x.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",x.currentTarget.style.transform="scale(1)"},children:[t.jsx("div",{style:{width:"32px",height:"32px",background:s.accent.primary,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:n?"#181D40":"#FFFFFF",flexShrink:0},children:d()}),t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:s.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&t.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:n?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${s.border.primary}`,boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 212, 28, 0.2)",marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:s.text.primary,marginBottom:"4px"},children:u()}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary},children:(e==null?void 0:e.email)||"admin@nu.edu.ph"}),t.jsx("div",{style:{fontSize:"10px",color:s.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:((c=e==null?void 0:e.role)==null?void 0:c.replace("_"," "))||"Admin"})]}),t.jsxs("button",{onClick:()=>{o(!1),r()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:s.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:x=>{x.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",x.currentTarget.style.color=s.accent.primary},onMouseLeave:x=>{x.currentTarget.style.background="transparent",x.currentTarget.style.color=s.text.primary},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Manage Profile"})]}),t.jsx("div",{style:{height:"1px",background:"rgba(255, 212, 28, 0.2)",margin:"8px 0"}}),t.jsxs("button",{onClick:()=>{o(!1),a()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:x=>{x.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:x=>{x.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]}),t.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.5;
            transform: scale(0.8);
          }
        }
        
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function hr(){const{theme:e,isDarkMode:a}=ne(),r=new Date().getFullYear();return t.jsx("footer",{style:{background:e.bg.primary,borderTop:`2px solid ${e.accent.primary}`,color:e.text.secondary,boxShadow:a?"0 -4px 20px rgba(0, 0, 0, 0.2)":"0 -4px 20px rgba(59, 130, 246, 0.05)"},className:"mt-auto px-[40px] py-[20px] text-center text-[12px]",children:t.jsxs("p",{className:"m-0",children:[" ",r," NUCash System | Jose Anjelo Abued, Ashley Gwyneth Cuevas, Jhustine Brylle Logronio |"," ",t.jsx(Eo,{to:"/terms",style:{color:e.accent.primary},className:"hover:opacity-80 transition font-semibold",onMouseEnter:s=>s.currentTarget.style.opacity="0.8",onMouseLeave:s=>s.currentTarget.style.opacity="1",children:"Terms and Conditions"})," ","|"," ",t.jsx(Eo,{to:"/privacy",style:{color:e.accent.primary},className:"hover:opacity-80 transition font-semibold",onMouseEnter:s=>s.currentTarget.style.opacity="0.8",onMouseLeave:s=>s.currentTarget.style.opacity="1",children:"Privacy Policy"})]})})}function _2({children:e}){const a=st(),r=Nt(),{theme:s,isDarkMode:n}=ne(),[l]=p.useState(()=>{const c=localStorage.getItem("adminData");return c?JSON.parse(c):null}),o=()=>{localStorage.clear(),a("/login")},i=()=>{a("/admin/motorpool/profile")},d=[{path:"/admin/motorpool",icon:"",label:"Home"},{path:"/admin/motorpool/routes",icon:"",label:"Routes"},{path:"/admin/motorpool/drivers",icon:"",label:"Drivers"},{path:"/admin/motorpool/shuttles",icon:"",label:"Shuttles"},{path:"/admin/motorpool/trips",icon:"",label:"Trips"},{path:"/admin/motorpool/phones",icon:"",label:"Phones"}],u=[{path:"/admin/logs",icon:"",label:"Logs"},{path:"/admin/motorpool/concerns",icon:"",label:"Concerns"},{path:"/admin/motorpool/configurations",icon:"",label:"Settings"}];return t.jsxs("div",{style:{background:s.bg.primary},className:"min-h-screen flex flex-col",children:[t.jsx(D2,{adminData:l,onLogout:o,onOpenProfile:i}),t.jsx("div",{style:{background:s.bg.primary},className:"h-4"}),t.jsx("div",{style:{background:s.bg.secondary,borderColor:s.border.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-8 rounded-lg px-6 py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:c=>{c.currentTarget.style.borderColor=s.border.hover,c.currentTarget.style.boxShadow=n?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:c=>{c.currentTarget.style.borderColor=s.border.primary,c.currentTarget.style.boxShadow=n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:t.jsxs("div",{className:"flex items-center gap-2",children:[d.map(c=>{const x=r.pathname===c.path;return t.jsxs("button",{onClick:()=>a(c.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.secondary},className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-md font-semibold text-sm
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.secondary)},children:[t.jsx("span",{className:`text-base transition-transform duration-300 ${x?"scale-110":""}`,children:c.icon}),t.jsx("span",{children:c.label})]},c.path)}),t.jsx("div",{className:"h-10 w-[2px] bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.4)] to-transparent mx-4"}),u.map(c=>{const x=r.pathname===c.path;return t.jsxs("button",{onClick:()=>a(c.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.tertiary},className:`
                  flex items-center gap-2 px-4 py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.tertiary)},children:[t.jsx("span",{className:`text-sm transition-transform duration-300 ${x?"scale-110":""}`,children:c.icon}),t.jsx("span",{children:c.label})]},c.path)})]})}),t.jsx("main",{className:"flex-1 p-8 overflow-auto animate-fadeIn",children:e}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${s.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${s.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${s.scrollbar.thumbHover};
        }
      `}),t.jsx(hr,{})]})}function M2({merchantData:e,onLogout:a,onOpenProfile:r}){const{theme:s,isDarkMode:n}=ne(),[l,o]=p.useState(!1),i=p.useRef(null);p.useEffect(()=>{const c=x=>{i.current&&!i.current.contains(x.target)&&o(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const d=()=>e&&(e.businessName||"").charAt(0).toUpperCase()||"M",u=()=>e&&e.businessName||"Merchant";return t.jsxs("header",{style:{background:n?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${s.accent.primary}`,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsx("div",{style:{width:"45px",height:"45px",background:s.accent.primary,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:n?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:s.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash Admin Dashboard"}),t.jsx("p",{style:{fontSize:"12px",color:s.accent.primary,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"Merchant Management System"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(34, 197, 94, 0.2)",padding:"6px 14px",borderRadius:"20px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[t.jsx("div",{style:{width:"7px",height:"7px",background:"#22C55E",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#22C55E"},children:"LIVE"})]}),t.jsx(Zr,{}),t.jsxs("div",{style:{position:"relative"},ref:i,children:[t.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${s.accent.primary}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background=n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",c.currentTarget.style.transform="scale(1.02)"},onMouseLeave:c=>{c.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",c.currentTarget.style.transform="scale(1)"},children:[t.jsx("div",{style:{width:"32px",height:"32px",background:s.accent.primary,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:n?"#181D40":"#FFFFFF",flexShrink:0},children:d()}),t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:s.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&t.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:n?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${s.border.primary}`,boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 212, 28, 0.2)",marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:s.text.primary,marginBottom:"4px"},children:u()}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary},children:(e==null?void 0:e.email)||"merchant@nu.edu.ph"}),t.jsx("div",{style:{fontSize:"10px",color:s.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:(e==null?void 0:e.merchantId)||"Merchant"})]}),t.jsxs("button",{onClick:()=>{o(!1),r()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:s.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",c.currentTarget.style.color=s.accent.primary},onMouseLeave:c=>{c.currentTarget.style.background="transparent",c.currentTarget.style.color=s.text.primary},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Manage Profile"})]}),t.jsx("div",{style:{height:"1px",background:"rgba(255, 212, 28, 0.2)",margin:"8px 0"}}),t.jsxs("button",{onClick:()=>{o(!1),a()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:c=>{c.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]}),t.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.5;
            transform: scale(0.8);
          }
        }

        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function I2({children:e}){const a=st(),r=Nt(),{theme:s,isDarkMode:n}=ne(),[l]=p.useState(()=>{const c=localStorage.getItem("adminData");return c?JSON.parse(c):null}),o=()=>{localStorage.clear(),a("/login")},i=()=>{a("/admin/merchant/profile")},d=[{path:"/admin/merchant",icon:"",label:"Home"},{path:"/admin/merchant/merchants",icon:"",label:"Merchants"},{path:"/admin/merchant/phones",icon:"",label:"Phones"}],u=[{path:"/admin/merchant/logs",icon:"",label:"Logs"},{path:"/admin/merchant/concerns",icon:"",label:"Concerns"},{path:"/admin/merchant/configurations",icon:"",label:"Settings"}];return t.jsxs("div",{style:{background:s.bg.primary},className:"min-h-screen flex flex-col",children:[t.jsx(M2,{merchantData:l,onLogout:o,onOpenProfile:i}),t.jsx("div",{style:{background:s.bg.primary},className:"h-4"}),t.jsx("div",{style:{background:s.bg.secondary,borderColor:s.border.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-8 rounded-lg px-6 py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:c=>{c.currentTarget.style.borderColor=s.border.hover,c.currentTarget.style.boxShadow=n?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:c=>{c.currentTarget.style.borderColor=s.border.primary,c.currentTarget.style.boxShadow=n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:t.jsxs("div",{className:"flex items-center gap-2",children:[d.map(c=>{const x=r.pathname===c.path;return t.jsxs("button",{onClick:()=>a(c.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.secondary},className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-md font-semibold text-sm
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.secondary)},children:[t.jsx("span",{className:`text-base transition-transform duration-300 ${x?"scale-110":""}`,children:c.icon}),t.jsx("span",{children:c.label})]},c.path)}),t.jsx("div",{className:"h-10 w-[2px] bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.4)] to-transparent mx-4"}),u.map(c=>{const x=r.pathname===c.path;return t.jsxs("button",{onClick:()=>a(c.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.tertiary},className:`
                  flex items-center gap-2 px-4 py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.tertiary)},children:[t.jsx("span",{className:`text-sm transition-transform duration-300 ${x?"scale-110":""}`,children:c.icon}),t.jsx("span",{children:c.label})]},c.path)})]})}),t.jsx("main",{className:"flex-1 p-8 overflow-auto animate-fadeIn",children:e}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${s.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${s.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${s.scrollbar.thumbHover};
        }
      `}),t.jsx(hr,{})]})}function L2({adminData:e,onLogout:a,onOpenProfile:r}){const{theme:s,isDarkMode:n}=ne(),[l,o]=p.useState(!1),i=p.useRef(null);p.useEffect(()=>{const c=x=>{i.current&&!i.current.contains(x.target)&&o(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const d=()=>{var m,h;if(!e)return"T";const c=((m=e.firstName)==null?void 0:m[0])||"",x=((h=e.lastName)==null?void 0:h[0])||"";return(c+x).toUpperCase()||"T"},u=()=>e&&`${e.firstName||""} ${e.lastName||""}`.trim()||"Treasury Admin";return t.jsxs("header",{style:{background:n?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${s.accent.primary}`,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsx("div",{style:{width:"45px",height:"45px",background:s.accent.primary,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:n?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:s.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash Admin Dashboard"}),t.jsx("p",{style:{fontSize:"12px",color:s.accent.primary,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"Treasury Management System"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(34, 197, 94, 0.2)",padding:"6px 14px",borderRadius:"20px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[t.jsx("div",{style:{width:"7px",height:"7px",background:"#22C55E",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#22C55E"},children:"LIVE"})]}),t.jsx(Zr,{}),t.jsxs("div",{style:{position:"relative"},ref:i,children:[t.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${s.accent.primary}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background=n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",c.currentTarget.style.transform="scale(1.02)"},onMouseLeave:c=>{c.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",c.currentTarget.style.transform="scale(1)"},children:[t.jsx("div",{style:{width:"32px",height:"32px",background:s.accent.primary,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:n?"#181D40":"#FFFFFF",flexShrink:0},children:d()}),t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:s.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&t.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:n?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${s.border.primary}`,boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${s.border.primary}`,marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:s.text.primary,marginBottom:"4px"},children:u()}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary},children:(e==null?void 0:e.email)||"treasury@nu.edu.ph"}),t.jsx("div",{style:{fontSize:"10px",color:s.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:"Treasury Admin"})]}),t.jsxs("button",{onClick:()=>{o(!1),r()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:s.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",c.currentTarget.style.color=s.accent.primary},onMouseLeave:c=>{c.currentTarget.style.background="transparent",c.currentTarget.style.color=s.text.primary},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Manage Profile"})]}),t.jsx("div",{style:{height:"1px",background:s.border.primary,margin:"8px 0"}}),t.jsxs("button",{onClick:()=>{o(!1),a()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:c=>{c.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]}),t.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.5; transform: scale(0.8); }
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-10px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]})}function O2({children:e}){const a=st(),r=Nt(),{theme:s,isDarkMode:n}=ne(),[l]=p.useState(()=>{const c=localStorage.getItem("adminData");return c?JSON.parse(c):null}),o=()=>{localStorage.clear(),a("/login")},i=()=>{a("/admin/treasury/profile")},d=[{path:"/admin/treasury/dashboard",icon:"",label:"Home"},{path:"/admin/treasury/transactions",icon:"",label:"Transactions"},{path:"/admin/treasury/merchants",icon:"",label:"Merchants"}],u=[{path:"/admin/treasury/logs",icon:"",label:"Logs"},{path:"/admin/treasury/concerns",icon:"",label:"Concerns"},{path:"/admin/treasury/config",icon:"",label:"Settings"}];return t.jsxs("div",{style:{background:s.bg.primary},className:"min-h-screen flex flex-col",children:[t.jsx(L2,{adminData:l,onLogout:o,onOpenProfile:i}),t.jsx("div",{style:{background:s.bg.primary},className:"h-4"}),t.jsx("div",{style:{background:s.bg.secondary,borderColor:s.border.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-8 rounded-lg px-6 py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:c=>{c.currentTarget.style.borderColor=s.border.hover,c.currentTarget.style.boxShadow=n?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:c=>{c.currentTarget.style.borderColor=s.border.primary,c.currentTarget.style.boxShadow=n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:t.jsxs("div",{className:"flex items-center gap-2",children:[d.map(c=>{const x=r.pathname===c.path;return t.jsxs("button",{onClick:()=>a(c.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.secondary},className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-md font-semibold text-sm
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.secondary)},children:[t.jsx("span",{className:`text-base transition-transform duration-300 ${x?"scale-110":""}`,children:c.icon}),t.jsx("span",{children:c.label})]},c.path)}),t.jsx("div",{className:"h-10 w-[2px] bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.4)] to-transparent mx-4"}),u.map(c=>{const x=r.pathname===c.path;return t.jsxs("button",{onClick:()=>a(c.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.tertiary},className:`
                  flex items-center gap-2 px-4 py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.tertiary)},children:[t.jsx("span",{className:`text-sm transition-transform duration-300 ${x?"scale-110":""}`,children:c.icon}),t.jsx("span",{children:c.label})]},c.path)})]})}),t.jsx("main",{className:"flex-1 p-8 overflow-auto animate-fadeIn",children:e}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${s.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${s.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${s.scrollbar.thumbHover};
        }
      `}),t.jsx(hr,{})]})}function $2({adminData:e,onLogout:a,onOpenProfile:r}){const{theme:s,isDarkMode:n}=ne(),[l,o]=p.useState(!1),i=p.useRef(null);p.useEffect(()=>{const c=x=>{i.current&&!i.current.contains(x.target)&&o(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const d=()=>{var m,h;if(!e)return"A";const c=((m=e.firstName)==null?void 0:m[0])||"",x=((h=e.lastName)==null?void 0:h[0])||"";return(c+x).toUpperCase()||"A"},u=()=>e&&`${e.firstName||""} ${e.lastName||""}`.trim()||"Accounting Admin";return t.jsxs("header",{style:{background:n?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${s.accent.primary}`,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsx("div",{style:{width:"45px",height:"45px",background:s.accent.primary,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:n?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:s.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash Admin Dashboard"}),t.jsx("p",{style:{fontSize:"12px",color:s.accent.primary,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"Accounting Management System"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(34, 197, 94, 0.2)",padding:"6px 14px",borderRadius:"20px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[t.jsx("div",{style:{width:"7px",height:"7px",background:"#22C55E",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#22C55E"},children:"LIVE"})]}),t.jsx(Zr,{}),t.jsxs("div",{style:{position:"relative"},ref:i,children:[t.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${s.accent.primary}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background=n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",c.currentTarget.style.transform="scale(1.02)"},onMouseLeave:c=>{c.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",c.currentTarget.style.transform="scale(1)"},children:[t.jsx("div",{style:{width:"32px",height:"32px",background:s.accent.primary,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:n?"#181D40":"#FFFFFF",flexShrink:0},children:d()}),t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:s.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&t.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:n?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${s.border.primary}`,boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${s.border.primary}`,marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:s.text.primary,marginBottom:"4px"},children:u()}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary},children:(e==null?void 0:e.email)||"accounting@nu.edu.ph"}),t.jsx("div",{style:{fontSize:"10px",color:s.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:"Accounting Admin"})]}),t.jsxs("button",{onClick:()=>{o(!1),r()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:s.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",c.currentTarget.style.color=s.accent.primary},onMouseLeave:c=>{c.currentTarget.style.background="transparent",c.currentTarget.style.color=s.text.primary},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Manage Profile"})]}),t.jsx("div",{style:{height:"1px",background:s.border.primary,margin:"8px 0"}}),t.jsxs("button",{onClick:()=>{o(!1),a()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:c=>{c.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]}),t.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.5; transform: scale(0.8); }
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-10px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]})}function U2({children:e}){const a=st(),r=Nt(),{theme:s,isDarkMode:n}=ne(),[l]=p.useState(()=>{const c=localStorage.getItem("adminData");return c?JSON.parse(c):null}),o=()=>{localStorage.clear(),a("/login")},i=()=>{a("/admin/accounting/profile")},d=[{path:"/admin/accounting/home",icon:"",label:"Home"},{path:"/admin/accounting/transactions",icon:"",label:"Transactions"},{path:"/admin/accounting/merchants",icon:"",label:"Merchants"}],u=[{path:"/admin/accounting/logs",icon:"",label:"Logs"},{path:"/admin/accounting/config",icon:"",label:"Settings"}];return t.jsxs("div",{style:{background:s.bg.primary},className:"min-h-screen flex flex-col",children:[t.jsx($2,{adminData:l,onLogout:o,onOpenProfile:i}),t.jsx("div",{style:{background:s.bg.primary},className:"h-4"}),t.jsx("div",{style:{background:s.bg.secondary,borderColor:s.border.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-8 rounded-lg px-6 py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:c=>{c.currentTarget.style.borderColor=s.border.hover,c.currentTarget.style.boxShadow=n?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:c=>{c.currentTarget.style.borderColor=s.border.primary,c.currentTarget.style.boxShadow=n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:t.jsxs("div",{className:"flex items-center gap-2",children:[d.map(c=>{const x=r.pathname===c.path;return t.jsxs("button",{onClick:()=>a(c.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.secondary},className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-md font-semibold text-sm
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.secondary)},children:[t.jsx("span",{className:`text-base transition-transform duration-300 ${x?"scale-110":""}`,children:c.icon}),t.jsx("span",{children:c.label})]},c.path)}),t.jsx("div",{className:"h-10 w-[2px] bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.4)] to-transparent mx-4"}),u.map(c=>{const x=r.pathname===c.path;return t.jsxs("button",{onClick:()=>a(c.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.tertiary},className:`
                  flex items-center gap-2 px-4 py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.tertiary)},children:[t.jsx("span",{className:`text-sm transition-transform duration-300 ${x?"scale-110":""}`,children:c.icon}),t.jsx("span",{children:c.label})]},c.path)})]})}),t.jsx("main",{className:"flex-1 p-8 overflow-auto animate-fadeIn",children:e}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${s.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${s.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${s.scrollbar.thumbHover};
        }
      `}),t.jsx(hr,{})]})}function P2({adminData:e,onLogout:a,onOpenProfile:r}){const{theme:s,isDarkMode:n}=ne(),[l,o]=p.useState(!1),i=p.useRef(null),d=s.accent.primary,u=n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",c=n?"rgba(255, 212, 28, 0.3)":"rgba(59, 130, 246, 0.3)";p.useEffect(()=>{const h=v=>{i.current&&!i.current.contains(v.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const x=()=>{var S,f;if(!e)return"SA";const h=((S=e.firstName)==null?void 0:S[0])||"",v=((f=e.lastName)==null?void 0:f[0])||"";return(h+v).toUpperCase()||"SA"},m=()=>e&&`${e.firstName||""} ${e.lastName||""}`.trim()||"System Admin";return t.jsxs("header",{style:{background:n?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${d}`,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsx("div",{style:{width:"45px",height:"45px",background:n?"linear-gradient(135deg, #FFD41C 0%, #FFC700 100%)":"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:n?"#181D40":"#FFFFFF",boxShadow:n?"0 0 0 3px rgba(255, 212, 28, 0.2)":"0 0 0 3px rgba(59, 130, 246, 0.2)"},children:"NU"}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:s.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash Admin Dashboard"}),t.jsx("p",{style:{fontSize:"12px",color:d,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"System Administration"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(34, 197, 94, 0.2)",padding:"6px 14px",borderRadius:"20px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[t.jsx("div",{style:{width:"7px",height:"7px",background:"#22C55E",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#22C55E"},children:"LIVE"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:u,padding:"6px 14px",borderRadius:"20px",border:`1px solid ${c}`},children:[t.jsx("span",{style:{fontSize:"12px"},children:""}),t.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:d},children:"SYSTEM ADMIN"})]}),t.jsx(Zr,{}),t.jsxs("div",{style:{position:"relative"},ref:i,children:[t.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:u,border:`2px solid ${d}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:h=>{h.currentTarget.style.background="rgba(255, 212, 28, 0.3)",h.currentTarget.style.transform="scale(1.02)"},onMouseLeave:h=>{h.currentTarget.style.background=u,h.currentTarget.style.transform="scale(1)"},children:[t.jsx("div",{style:{width:"32px",height:"32px",background:n?"linear-gradient(135deg, #FFD41C 0%, #FFC700 100%)":"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:n?"#181D40":"#FFFFFF",flexShrink:0},children:x()}),t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:d,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&t.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:n?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${s.border.primary}`,boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${s.border.primary}`,marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:s.text.primary,marginBottom:"4px"},children:m()}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary},children:(e==null?void 0:e.email)||"sysad@nu.edu.ph"}),t.jsxs("div",{style:{fontSize:"10px",color:d,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px",display:"flex",alignItems:"center",gap:"4px"},children:[t.jsx("span",{children:""})," System Administrator"]})]}),t.jsxs("button",{onClick:()=>{o(!1),r()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:s.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:h=>{h.currentTarget.style.background=u,h.currentTarget.style.color=d},onMouseLeave:h=>{h.currentTarget.style.background="transparent",h.currentTarget.style.color=s.text.primary},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Manage Profile"})]}),t.jsx("div",{style:{height:"1px",background:s.border.primary,margin:"8px 0"}}),t.jsxs("button",{onClick:()=>{o(!1),a()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:h=>{h.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:h=>{h.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]}),t.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.5; transform: scale(0.8); }
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-10px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]})}function W2({children:e}){const a=st(),r=Nt(),{theme:s,isDarkMode:n}=ne(),[l]=p.useState(()=>{const m=localStorage.getItem("adminData");return m?JSON.parse(m):null}),o=s.accent.primary,i=n?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",d=()=>{localStorage.clear(),a("/login")},u=()=>{a("/admin/sysad/profile")},c=[{path:"/admin/sysad/dashboard",icon:"",label:"Home"},{path:"/admin/sysad/users",icon:"",label:"Manage Users"},{path:"/admin/sysad/transfer-card",icon:"",label:"Transfer Card"}],x=[{path:"/admin/sysad/logs",icon:"",label:"Logs"},{path:"/admin/sysad/concerns",icon:"",label:"Concerns"},{path:"/admin/sysad/config",icon:"",label:"Settings"}];return t.jsxs("div",{style:{background:s.bg.primary},className:"min-h-screen flex flex-col",children:[t.jsx(P2,{adminData:l,onLogout:d,onOpenProfile:u}),t.jsx("div",{style:{background:s.bg.primary},className:"h-4"}),t.jsx("div",{style:{background:s.bg.secondary,borderColor:s.border.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-8 rounded-lg px-6 py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:m=>{m.currentTarget.style.borderColor=s.border.hover,m.currentTarget.style.boxShadow=n?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:m=>{m.currentTarget.style.borderColor=s.border.primary,m.currentTarget.style.boxShadow=n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:t.jsxs("div",{className:"flex items-center gap-2",children:[c.map(m=>{const h=r.pathname===m.path;return t.jsxs("button",{onClick:()=>a(m.path),style:{background:h?o:"transparent",color:h?n?"#181D40":"#FFFFFF":s.text.secondary},className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-md font-semibold text-sm
                  transition-all duration-300 ease-out
                  ${h?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:v=>{h||(v.currentTarget.style.background=i,v.currentTarget.style.color=o)},onMouseLeave:v=>{h||(v.currentTarget.style.background="transparent",v.currentTarget.style.color=s.text.secondary)},children:[t.jsx("span",{className:`text-base transition-transform duration-300 ${h?"scale-110":""}`,children:m.icon}),t.jsx("span",{children:m.label})]},m.path)}),t.jsx("div",{style:{background:`linear-gradient(to bottom, transparent, ${o}66, transparent)`},className:"h-10 w-[2px] mx-4"}),x.map(m=>{const h=r.pathname===m.path;return t.jsxs("button",{onClick:()=>a(m.path),style:{background:h?o:"transparent",color:h?n?"#181D40":"#FFFFFF":s.text.tertiary},className:`
                  flex items-center gap-2 px-4 py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${h?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:v=>{h||(v.currentTarget.style.background=i,v.currentTarget.style.color=o)},onMouseLeave:v=>{h||(v.currentTarget.style.background="transparent",v.currentTarget.style.color=s.text.tertiary)},children:[t.jsx("span",{className:`text-sm transition-transform duration-300 ${h?"scale-110":""}`,children:m.icon}),t.jsx("span",{children:m.label})]},m.path)})]})}),t.jsx("main",{className:"flex-1 p-8 overflow-auto animate-fadeIn",children:e}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${s.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${s.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${s.scrollbar.thumbHover};
        }
      `}),t.jsx(hr,{})]})}function H2({userData:e,onLogout:a,onOpenProfile:r}){const{theme:s,isDarkMode:n}=ne(),[l,o]=p.useState(!1),i=p.useRef(null);p.useEffect(()=>{const c=x=>{i.current&&!i.current.contains(x.target)&&o(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const d=()=>{var m,h;if(!e)return"U";const c=((m=e.firstName)==null?void 0:m[0])||"",x=((h=e.lastName)==null?void 0:h[0])||"";return(c+x).toUpperCase()||"U"},u=()=>e&&`${e.firstName||""} ${e.lastName||""}`.trim()||"User";return t.jsxs("header",{className:"sticky top-0 z-[1000] flex justify-between items-center px-3 py-3 sm:px-4 sm:py-4 md:px-10 md:py-5",style:{background:n?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",borderBottom:`2px solid ${s.accent.primary}`,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-5",children:[t.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 md:w-[45px] md:h-[45px] rounded-lg flex items-center justify-center font-extrabold text-base sm:text-lg md:text-[22px]",style:{background:s.accent.primary,color:n?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-base sm:text-lg md:text-2xl font-bold m-0",style:{color:s.text.primary,letterSpacing:"0.5px"},children:"NUCash"}),t.jsx("p",{className:"text-[10px] sm:text-xs font-semibold uppercase m-0 mt-0.5 hidden sm:block",style:{color:s.accent.primary,letterSpacing:"1px"},children:"Student Portal"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-5",children:[t.jsx(Zr,{}),t.jsxs("div",{className:"relative",ref:i,children:[t.jsxs("button",{onClick:()=>o(!l),className:"flex items-center gap-1 sm:gap-2 rounded-full p-1 pr-2 sm:pr-3 cursor-pointer transition-all duration-200",style:{background:n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${s.accent.primary}`},onMouseEnter:c=>{c.currentTarget.style.background=n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",c.currentTarget.style.transform="scale(1.02)"},onMouseLeave:c=>{c.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",c.currentTarget.style.transform="scale(1)"},children:[t.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center font-extrabold text-xs sm:text-sm flex-shrink-0",style:{background:s.accent.primary,color:n?"#181D40":"#FFFFFF"},children:d()}),t.jsx("svg",{className:"w-3 h-3 hidden sm:block",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:s.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&t.jsxs("div",{className:"absolute top-12 right-0 rounded-xl py-2 min-w-[180px] sm:min-w-[220px] z-50",style:{background:n?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",border:`2px solid ${s.border.primary}`,boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${s.border.primary}`,marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:s.text.primary,marginBottom:"4px"},children:u()}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary},children:(e==null?void 0:e.email)||"student@nu.edu.ph"}),t.jsx("div",{style:{fontSize:"10px",color:s.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:(e==null?void 0:e.accountType)==="employee"?"Employee":"Student"})]}),t.jsxs("button",{onClick:()=>{o(!1),r&&r()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:s.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",c.currentTarget.style.color=s.accent.primary},onMouseLeave:c=>{c.currentTarget.style.background="transparent",c.currentTarget.style.color=s.text.primary},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Manage Profile"})]}),t.jsx("div",{style:{height:"1px",background:s.border.primary,margin:"8px 0"}}),t.jsxs("button",{onClick:()=>{o(!1),a()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:c=>{c.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]}),t.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.5; transform: scale(0.8); }
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-10px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]})}function q2({children:e}){const a=st(),r=Nt(),{theme:s,isDarkMode:n}=ne(),[l]=p.useState(()=>{try{const c=localStorage.getItem("userData");return c&&c!=="undefined"&&c!=="null"?JSON.parse(c):null}catch(c){return console.error("Error parsing userData from localStorage:",c),null}}),o=()=>{localStorage.clear(),a("/login")},i=()=>{a("/user/profile")},d=[{path:"/user/dashboard",icon:"",label:"Home"},{path:"/user/history",icon:"",label:"History"},{path:"/user/concerns",icon:"",label:"My Concerns"}],u=[{path:"/faq",icon:"",label:"FAQs"}];return t.jsxs("div",{style:{background:s.bg.primary},className:"min-h-screen flex flex-col",children:[t.jsx(H2,{userData:l,onLogout:o,onOpenProfile:i}),t.jsx("div",{style:{background:s.bg.primary},className:"h-4"}),t.jsx("div",{style:{background:s.bg.secondary,borderColor:s.border.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-3 sm:mx-4 md:mx-8 rounded-lg px-2 sm:px-4 md:px-6 py-2 sm:py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:c=>{c.currentTarget.style.borderColor=s.border.hover,c.currentTarget.style.boxShadow=n?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:c=>{c.currentTarget.style.borderColor=s.border.primary,c.currentTarget.style.boxShadow=n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:t.jsxs("div",{className:"flex flex-wrap items-center justify-center sm:justify-start gap-1 sm:gap-2",children:[d.map(c=>{const x=r.pathname===c.path;return t.jsxs("button",{onClick:()=>a(c.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.secondary},className:`
                  flex items-center gap-1 sm:gap-2 px-3 sm:px-5 py-2 sm:py-2.5 rounded-md font-semibold text-xs sm:text-sm
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.secondary)},children:[t.jsx("span",{className:`text-sm sm:text-base transition-transform duration-300 ${x?"scale-110":""}`,children:c.icon}),t.jsx("span",{className:"hidden xs:inline sm:inline",children:c.label})]},c.path)}),t.jsx("div",{className:"hidden sm:block h-10 w-[2px] bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.4)] to-transparent mx-2 md:mx-4"}),u.map(c=>{const x=r.pathname===c.path;return t.jsxs("button",{onClick:()=>a(c.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.tertiary},className:`
                  flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-2 sm:py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.tertiary)},children:[t.jsx("span",{className:`text-sm transition-transform duration-300 ${x?"scale-110":""}`,children:c.icon}),t.jsx("span",{className:"hidden xs:inline sm:inline",children:c.label})]},c.path)})]})}),t.jsx("main",{className:"flex-1 p-3 sm:p-4 md:p-8 overflow-auto animate-fadeIn",children:e}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${s.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${s.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${s.scrollbar.thumbHover};
        }
      `}),t.jsx(hr,{})]})}function ib(e,a){return function(){return e.apply(a,arguments)}}const{toString:Y2}=Object.prototype,{getPrototypeOf:ku}=Object,{iterator:ti,toStringTag:cb}=Symbol,ai=(e=>a=>{const r=Y2.call(a);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ca=e=>(e=e.toLowerCase(),a=>ai(a)===e),ri=e=>a=>typeof a===e,{isArray:Xs}=Array,Is=ri("undefined");function ll(e){return e!==null&&!Is(e)&&e.constructor!==null&&!Is(e.constructor)&&Tt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const db=ca("ArrayBuffer");function V2(e){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(e):a=e&&e.buffer&&db(e.buffer),a}const G2=ri("string"),Tt=ri("function"),ub=ri("number"),ol=e=>e!==null&&typeof e=="object",X2=e=>e===!0||e===!1,Vl=e=>{if(ai(e)!=="object")return!1;const a=ku(e);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(cb in e)&&!(ti in e)},Q2=e=>{if(!ol(e)||ll(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Z2=ca("Date"),J2=ca("File"),K2=ca("Blob"),e5=ca("FileList"),t5=e=>ol(e)&&Tt(e.pipe),a5=e=>{let a;return e&&(typeof FormData=="function"&&e instanceof FormData||Tt(e.append)&&((a=ai(e))==="formdata"||a==="object"&&Tt(e.toString)&&e.toString()==="[object FormData]"))},r5=ca("URLSearchParams"),[s5,n5,l5,o5]=["ReadableStream","Request","Response","Headers"].map(ca),i5=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function il(e,a,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,n;if(typeof e!="object"&&(e=[e]),Xs(e))for(s=0,n=e.length;s<n;s++)a.call(null,e[s],s,e);else{if(ll(e))return;const l=r?Object.getOwnPropertyNames(e):Object.keys(e),o=l.length;let i;for(s=0;s<o;s++)i=l[s],a.call(null,e[i],i,e)}}function pb(e,a){if(ll(e))return null;a=a.toLowerCase();const r=Object.keys(e);let s=r.length,n;for(;s-- >0;)if(n=r[s],a===n.toLowerCase())return n;return null}const Rr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xb=e=>!Is(e)&&e!==Rr;function id(){const{caseless:e,skipUndefined:a}=xb(this)&&this||{},r={},s=(n,l)=>{const o=e&&pb(r,l)||l;Vl(r[o])&&Vl(n)?r[o]=id(r[o],n):Vl(n)?r[o]=id({},n):Xs(n)?r[o]=n.slice():(!a||!Is(n))&&(r[o]=n)};for(let n=0,l=arguments.length;n<l;n++)arguments[n]&&il(arguments[n],s);return r}const c5=(e,a,r,{allOwnKeys:s}={})=>(il(a,(n,l)=>{r&&Tt(n)?e[l]=ib(n,r):e[l]=n},{allOwnKeys:s}),e),d5=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),u5=(e,a,r,s)=>{e.prototype=Object.create(a.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:a.prototype}),r&&Object.assign(e.prototype,r)},p5=(e,a,r,s)=>{let n,l,o;const i={};if(a=a||{},e==null)return a;do{for(n=Object.getOwnPropertyNames(e),l=n.length;l-- >0;)o=n[l],(!s||s(o,e,a))&&!i[o]&&(a[o]=e[o],i[o]=!0);e=r!==!1&&ku(e)}while(e&&(!r||r(e,a))&&e!==Object.prototype);return a},x5=(e,a,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=a.length;const s=e.indexOf(a,r);return s!==-1&&s===r},m5=e=>{if(!e)return null;if(Xs(e))return e;let a=e.length;if(!ub(a))return null;const r=new Array(a);for(;a-- >0;)r[a]=e[a];return r},f5=(e=>a=>e&&a instanceof e)(typeof Uint8Array<"u"&&ku(Uint8Array)),g5=(e,a)=>{const s=(e&&e[ti]).call(e);let n;for(;(n=s.next())&&!n.done;){const l=n.value;a.call(e,l[0],l[1])}},b5=(e,a)=>{let r;const s=[];for(;(r=e.exec(a))!==null;)s.push(r);return s},h5=ca("HTMLFormElement"),y5=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,n){return s.toUpperCase()+n}),bx=(({hasOwnProperty:e})=>(a,r)=>e.call(a,r))(Object.prototype),v5=ca("RegExp"),mb=(e,a)=>{const r=Object.getOwnPropertyDescriptors(e),s={};il(r,(n,l)=>{let o;(o=a(n,l,e))!==!1&&(s[l]=o||n)}),Object.defineProperties(e,s)},j5=e=>{mb(e,(a,r)=>{if(Tt(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(Tt(s)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},N5=(e,a)=>{const r={},s=n=>{n.forEach(l=>{r[l]=!0})};return Xs(e)?s(e):s(String(e).split(a)),r},S5=()=>{},w5=(e,a)=>e!=null&&Number.isFinite(e=+e)?e:a;function C5(e){return!!(e&&Tt(e.append)&&e[cb]==="FormData"&&e[ti])}const k5=e=>{const a=new Array(10),r=(s,n)=>{if(ol(s)){if(a.indexOf(s)>=0)return;if(ll(s))return s;if(!("toJSON"in s)){a[n]=s;const l=Xs(s)?[]:{};return il(s,(o,i)=>{const d=r(o,n+1);!Is(d)&&(l[i]=d)}),a[n]=void 0,l}}return s};return r(e,0)},F5=ca("AsyncFunction"),T5=e=>e&&(ol(e)||Tt(e))&&Tt(e.then)&&Tt(e.catch),fb=((e,a)=>e?setImmediate:a?((r,s)=>(Rr.addEventListener("message",({source:n,data:l})=>{n===Rr&&l===r&&s.length&&s.shift()()},!1),n=>{s.push(n),Rr.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Tt(Rr.postMessage)),E5=typeof queueMicrotask<"u"?queueMicrotask.bind(Rr):typeof process<"u"&&process.nextTick||fb,A5=e=>e!=null&&Tt(e[ti]),Q={isArray:Xs,isArrayBuffer:db,isBuffer:ll,isFormData:a5,isArrayBufferView:V2,isString:G2,isNumber:ub,isBoolean:X2,isObject:ol,isPlainObject:Vl,isEmptyObject:Q2,isReadableStream:s5,isRequest:n5,isResponse:l5,isHeaders:o5,isUndefined:Is,isDate:Z2,isFile:J2,isBlob:K2,isRegExp:v5,isFunction:Tt,isStream:t5,isURLSearchParams:r5,isTypedArray:f5,isFileList:e5,forEach:il,merge:id,extend:c5,trim:i5,stripBOM:d5,inherits:u5,toFlatObject:p5,kindOf:ai,kindOfTest:ca,endsWith:x5,toArray:m5,forEachEntry:g5,matchAll:b5,isHTMLForm:h5,hasOwnProperty:bx,hasOwnProp:bx,reduceDescriptors:mb,freezeMethods:j5,toObjectSet:N5,toCamelCase:y5,noop:S5,toFiniteNumber:w5,findKey:pb,global:Rr,isContextDefined:xb,isSpecCompliantForm:C5,toJSONObject:k5,isAsyncFn:F5,isThenable:T5,setImmediate:fb,asap:E5,isIterable:A5};function fe(e,a,r,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",a&&(this.code=a),r&&(this.config=r),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}Q.inherits(fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const gb=fe.prototype,bb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{bb[e]={value:e}});Object.defineProperties(fe,bb);Object.defineProperty(gb,"isAxiosError",{value:!0});fe.from=(e,a,r,s,n,l)=>{const o=Object.create(gb);Q.toFlatObject(e,o,function(c){return c!==Error.prototype},u=>u!=="isAxiosError");const i=e&&e.message?e.message:"Error",d=a==null&&e?e.code:a;return fe.call(o,i,d,r,s,n),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",l&&Object.assign(o,l),o};const R5=null;function cd(e){return Q.isPlainObject(e)||Q.isArray(e)}function hb(e){return Q.endsWith(e,"[]")?e.slice(0,-2):e}function hx(e,a,r){return e?e.concat(a).map(function(n,l){return n=hb(n),!r&&l?"["+n+"]":n}).join(r?".":""):a}function z5(e){return Q.isArray(e)&&!e.some(cd)}const B5=Q.toFlatObject(Q,{},null,function(a){return/^is[A-Z]/.test(a)});function si(e,a,r){if(!Q.isObject(e))throw new TypeError("target must be an object");a=a||new FormData,r=Q.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,f){return!Q.isUndefined(f[S])});const s=r.metaTokens,n=r.visitor||c,l=r.dots,o=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&Q.isSpecCompliantForm(a);if(!Q.isFunction(n))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(Q.isDate(v))return v.toISOString();if(Q.isBoolean(v))return v.toString();if(!d&&Q.isBlob(v))throw new fe("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(v)||Q.isTypedArray(v)?d&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function c(v,S,f){let y=v;if(v&&!f&&typeof v=="object"){if(Q.endsWith(S,"{}"))S=s?S:S.slice(0,-2),v=JSON.stringify(v);else if(Q.isArray(v)&&z5(v)||(Q.isFileList(v)||Q.endsWith(S,"[]"))&&(y=Q.toArray(v)))return S=hb(S),y.forEach(function(g,j){!(Q.isUndefined(g)||g===null)&&a.append(o===!0?hx([S],j,l):o===null?S:S+"[]",u(g))}),!1}return cd(v)?!0:(a.append(hx(f,S,l),u(v)),!1)}const x=[],m=Object.assign(B5,{defaultVisitor:c,convertValue:u,isVisitable:cd});function h(v,S){if(!Q.isUndefined(v)){if(x.indexOf(v)!==-1)throw Error("Circular reference detected in "+S.join("."));x.push(v),Q.forEach(v,function(y,b){(!(Q.isUndefined(y)||y===null)&&n.call(a,y,Q.isString(b)?b.trim():b,S,m))===!0&&h(y,S?S.concat(b):[b])}),x.pop()}}if(!Q.isObject(e))throw new TypeError("data must be an object");return h(e),a}function yx(e){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return a[s]})}function Fu(e,a){this._pairs=[],e&&si(e,this,a)}const yb=Fu.prototype;yb.append=function(a,r){this._pairs.push([a,r])};yb.toString=function(a){const r=a?function(s){return a.call(this,s,yx)}:yx;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function D5(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function vb(e,a,r){if(!a)return e;const s=r&&r.encode||D5;Q.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let l;if(n?l=n(a,r):l=Q.isURLSearchParams(a)?a.toString():new Fu(a,r).toString(s),l){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class vx{constructor(){this.handlers=[]}use(a,r,s){return this.handlers.push({fulfilled:a,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){Q.forEach(this.handlers,function(s){s!==null&&a(s)})}}const jb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_5=typeof URLSearchParams<"u"?URLSearchParams:Fu,M5=typeof FormData<"u"?FormData:null,I5=typeof Blob<"u"?Blob:null,L5={isBrowser:!0,classes:{URLSearchParams:_5,FormData:M5,Blob:I5},protocols:["http","https","file","blob","url","data"]},Tu=typeof window<"u"&&typeof document<"u",dd=typeof navigator=="object"&&navigator||void 0,O5=Tu&&(!dd||["ReactNative","NativeScript","NS"].indexOf(dd.product)<0),$5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",U5=Tu&&window.location.href||"http://localhost",P5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Tu,hasStandardBrowserEnv:O5,hasStandardBrowserWebWorkerEnv:$5,navigator:dd,origin:U5},Symbol.toStringTag,{value:"Module"})),mt={...P5,...L5};function W5(e,a){return si(e,new mt.classes.URLSearchParams,{visitor:function(r,s,n,l){return mt.isNode&&Q.isBuffer(r)?(this.append(s,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...a})}function H5(e){return Q.matchAll(/\w+|\[(\w*)]/g,e).map(a=>a[0]==="[]"?"":a[1]||a[0])}function q5(e){const a={},r=Object.keys(e);let s;const n=r.length;let l;for(s=0;s<n;s++)l=r[s],a[l]=e[l];return a}function Nb(e){function a(r,s,n,l){let o=r[l++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),d=l>=r.length;return o=!o&&Q.isArray(n)?n.length:o,d?(Q.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!i):((!n[o]||!Q.isObject(n[o]))&&(n[o]=[]),a(r,s,n[o],l)&&Q.isArray(n[o])&&(n[o]=q5(n[o])),!i)}if(Q.isFormData(e)&&Q.isFunction(e.entries)){const r={};return Q.forEachEntry(e,(s,n)=>{a(H5(s),n,r,0)}),r}return null}function Y5(e,a,r){if(Q.isString(e))try{return(a||JSON.parse)(e),Q.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const cl={transitional:jb,adapter:["xhr","http","fetch"],transformRequest:[function(a,r){const s=r.getContentType()||"",n=s.indexOf("application/json")>-1,l=Q.isObject(a);if(l&&Q.isHTMLForm(a)&&(a=new FormData(a)),Q.isFormData(a))return n?JSON.stringify(Nb(a)):a;if(Q.isArrayBuffer(a)||Q.isBuffer(a)||Q.isStream(a)||Q.isFile(a)||Q.isBlob(a)||Q.isReadableStream(a))return a;if(Q.isArrayBufferView(a))return a.buffer;if(Q.isURLSearchParams(a))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let i;if(l){if(s.indexOf("application/x-www-form-urlencoded")>-1)return W5(a,this.formSerializer).toString();if((i=Q.isFileList(a))||s.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return si(i?{"files[]":a}:a,d&&new d,this.formSerializer)}}return l||n?(r.setContentType("application/json",!1),Y5(a)):a}],transformResponse:[function(a){const r=this.transitional||cl.transitional,s=r&&r.forcedJSONParsing,n=this.responseType==="json";if(Q.isResponse(a)||Q.isReadableStream(a))return a;if(a&&Q.isString(a)&&(s&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(a,this.parseReviver)}catch(i){if(o)throw i.name==="SyntaxError"?fe.from(i,fe.ERR_BAD_RESPONSE,this,null,this.response):i}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mt.classes.FormData,Blob:mt.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],e=>{cl.headers[e]={}});const V5=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),G5=e=>{const a={};let r,s,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!r||a[r]&&V5[r])&&(r==="set-cookie"?a[r]?a[r].push(s):a[r]=[s]:a[r]=a[r]?a[r]+", "+s:s)}),a},jx=Symbol("internals");function nn(e){return e&&String(e).trim().toLowerCase()}function Gl(e){return e===!1||e==null?e:Q.isArray(e)?e.map(Gl):String(e)}function X5(e){const a=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)a[s[1]]=s[2];return a}const Q5=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Gi(e,a,r,s,n){if(Q.isFunction(s))return s.call(this,a,r);if(n&&(a=r),!!Q.isString(a)){if(Q.isString(s))return a.indexOf(s)!==-1;if(Q.isRegExp(s))return s.test(a)}}function Z5(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,r,s)=>r.toUpperCase()+s)}function J5(e,a){const r=Q.toCamelCase(" "+a);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(n,l,o){return this[s].call(this,a,n,l,o)},configurable:!0})})}let Et=class{constructor(a){a&&this.set(a)}set(a,r,s){const n=this;function l(i,d,u){const c=nn(d);if(!c)throw new Error("header name must be a non-empty string");const x=Q.findKey(n,c);(!x||n[x]===void 0||u===!0||u===void 0&&n[x]!==!1)&&(n[x||d]=Gl(i))}const o=(i,d)=>Q.forEach(i,(u,c)=>l(u,c,d));if(Q.isPlainObject(a)||a instanceof this.constructor)o(a,r);else if(Q.isString(a)&&(a=a.trim())&&!Q5(a))o(G5(a),r);else if(Q.isObject(a)&&Q.isIterable(a)){let i={},d,u;for(const c of a){if(!Q.isArray(c))throw TypeError("Object iterator must return a key-value pair");i[u=c[0]]=(d=i[u])?Q.isArray(d)?[...d,c[1]]:[d,c[1]]:c[1]}o(i,r)}else a!=null&&l(r,a,s);return this}get(a,r){if(a=nn(a),a){const s=Q.findKey(this,a);if(s){const n=this[s];if(!r)return n;if(r===!0)return X5(n);if(Q.isFunction(r))return r.call(this,n,s);if(Q.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,r){if(a=nn(a),a){const s=Q.findKey(this,a);return!!(s&&this[s]!==void 0&&(!r||Gi(this,this[s],s,r)))}return!1}delete(a,r){const s=this;let n=!1;function l(o){if(o=nn(o),o){const i=Q.findKey(s,o);i&&(!r||Gi(s,s[i],i,r))&&(delete s[i],n=!0)}}return Q.isArray(a)?a.forEach(l):l(a),n}clear(a){const r=Object.keys(this);let s=r.length,n=!1;for(;s--;){const l=r[s];(!a||Gi(this,this[l],l,a,!0))&&(delete this[l],n=!0)}return n}normalize(a){const r=this,s={};return Q.forEach(this,(n,l)=>{const o=Q.findKey(s,l);if(o){r[o]=Gl(n),delete r[l];return}const i=a?Z5(l):String(l).trim();i!==l&&delete r[l],r[i]=Gl(n),s[i]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const r=Object.create(null);return Q.forEach(this,(s,n)=>{s!=null&&s!==!1&&(r[n]=a&&Q.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,r])=>a+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...r){const s=new this(a);return r.forEach(n=>s.set(n)),s}static accessor(a){const s=(this[jx]=this[jx]={accessors:{}}).accessors,n=this.prototype;function l(o){const i=nn(o);s[i]||(J5(n,o),s[i]=!0)}return Q.isArray(a)?a.forEach(l):l(a),this}};Et.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Q.reduceDescriptors(Et.prototype,({value:e},a)=>{let r=a[0].toUpperCase()+a.slice(1);return{get:()=>e,set(s){this[r]=s}}});Q.freezeMethods(Et);function Xi(e,a){const r=this||cl,s=a||r,n=Et.from(s.headers);let l=s.data;return Q.forEach(e,function(i){l=i.call(r,l,n.normalize(),a?a.status:void 0)}),n.normalize(),l}function Sb(e){return!!(e&&e.__CANCEL__)}function Qs(e,a,r){fe.call(this,e??"canceled",fe.ERR_CANCELED,a,r),this.name="CanceledError"}Q.inherits(Qs,fe,{__CANCEL__:!0});function wb(e,a,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):a(new fe("Request failed with status code "+r.status,[fe.ERR_BAD_REQUEST,fe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function K5(e){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return a&&a[1]||""}function ev(e,a){e=e||10;const r=new Array(e),s=new Array(e);let n=0,l=0,o;return a=a!==void 0?a:1e3,function(d){const u=Date.now(),c=s[l];o||(o=u),r[n]=d,s[n]=u;let x=l,m=0;for(;x!==n;)m+=r[x++],x=x%e;if(n=(n+1)%e,n===l&&(l=(l+1)%e),u-o<a)return;const h=c&&u-c;return h?Math.round(m*1e3/h):void 0}}function tv(e,a){let r=0,s=1e3/a,n,l;const o=(u,c=Date.now())=>{r=c,n=null,l&&(clearTimeout(l),l=null),e(...u)};return[(...u)=>{const c=Date.now(),x=c-r;x>=s?o(u,c):(n=u,l||(l=setTimeout(()=>{l=null,o(n)},s-x)))},()=>n&&o(n)]}const Ao=(e,a,r=3)=>{let s=0;const n=ev(50,250);return tv(l=>{const o=l.loaded,i=l.lengthComputable?l.total:void 0,d=o-s,u=n(d),c=o<=i;s=o;const x={loaded:o,total:i,progress:i?o/i:void 0,bytes:d,rate:u||void 0,estimated:u&&i&&c?(i-o)/u:void 0,event:l,lengthComputable:i!=null,[a?"download":"upload"]:!0};e(x)},r)},Nx=(e,a)=>{const r=e!=null;return[s=>a[0]({lengthComputable:r,total:e,loaded:s}),a[1]]},Sx=e=>(...a)=>Q.asap(()=>e(...a)),av=mt.hasStandardBrowserEnv?((e,a)=>r=>(r=new URL(r,mt.origin),e.protocol===r.protocol&&e.host===r.host&&(a||e.port===r.port)))(new URL(mt.origin),mt.navigator&&/(msie|trident)/i.test(mt.navigator.userAgent)):()=>!0,rv=mt.hasStandardBrowserEnv?{write(e,a,r,s,n,l,o){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(a)}`];Q.isNumber(r)&&i.push(`expires=${new Date(r).toUTCString()}`),Q.isString(s)&&i.push(`path=${s}`),Q.isString(n)&&i.push(`domain=${n}`),l===!0&&i.push("secure"),Q.isString(o)&&i.push(`SameSite=${o}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const a=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return a?decodeURIComponent(a[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function sv(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function nv(e,a){return a?e.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):e}function Cb(e,a,r){let s=!sv(a);return e&&(s||r==!1)?nv(e,a):a}const wx=e=>e instanceof Et?{...e}:e;function qr(e,a){a=a||{};const r={};function s(u,c,x,m){return Q.isPlainObject(u)&&Q.isPlainObject(c)?Q.merge.call({caseless:m},u,c):Q.isPlainObject(c)?Q.merge({},c):Q.isArray(c)?c.slice():c}function n(u,c,x,m){if(Q.isUndefined(c)){if(!Q.isUndefined(u))return s(void 0,u,x,m)}else return s(u,c,x,m)}function l(u,c){if(!Q.isUndefined(c))return s(void 0,c)}function o(u,c){if(Q.isUndefined(c)){if(!Q.isUndefined(u))return s(void 0,u)}else return s(void 0,c)}function i(u,c,x){if(x in a)return s(u,c);if(x in e)return s(void 0,u)}const d={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(u,c,x)=>n(wx(u),wx(c),x,!0)};return Q.forEach(Object.keys({...e,...a}),function(c){const x=d[c]||n,m=x(e[c],a[c],c);Q.isUndefined(m)&&x!==i||(r[c]=m)}),r}const kb=e=>{const a=qr({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:l,headers:o,auth:i}=a;if(a.headers=o=Et.from(o),a.url=vb(Cb(a.baseURL,a.url,a.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),Q.isFormData(r)){if(mt.hasStandardBrowserEnv||mt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Q.isFunction(r.getHeaders)){const d=r.getHeaders(),u=["content-type","content-length"];Object.entries(d).forEach(([c,x])=>{u.includes(c.toLowerCase())&&o.set(c,x)})}}if(mt.hasStandardBrowserEnv&&(s&&Q.isFunction(s)&&(s=s(a)),s||s!==!1&&av(a.url))){const d=n&&l&&rv.read(l);d&&o.set(n,d)}return a},lv=typeof XMLHttpRequest<"u",ov=lv&&function(e){return new Promise(function(r,s){const n=kb(e);let l=n.data;const o=Et.from(n.headers).normalize();let{responseType:i,onUploadProgress:d,onDownloadProgress:u}=n,c,x,m,h,v;function S(){h&&h(),v&&v(),n.cancelToken&&n.cancelToken.unsubscribe(c),n.signal&&n.signal.removeEventListener("abort",c)}let f=new XMLHttpRequest;f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout;function y(){if(!f)return;const g=Et.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),C={data:!i||i==="text"||i==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:g,config:e,request:f};wb(function(E){r(E),S()},function(E){s(E),S()},C),f=null}"onloadend"in f?f.onloadend=y:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(y)},f.onabort=function(){f&&(s(new fe("Request aborted",fe.ECONNABORTED,e,f)),f=null)},f.onerror=function(j){const C=j&&j.message?j.message:"Network Error",T=new fe(C,fe.ERR_NETWORK,e,f);T.event=j||null,s(T),f=null},f.ontimeout=function(){let j=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const C=n.transitional||jb;n.timeoutErrorMessage&&(j=n.timeoutErrorMessage),s(new fe(j,C.clarifyTimeoutError?fe.ETIMEDOUT:fe.ECONNABORTED,e,f)),f=null},l===void 0&&o.setContentType(null),"setRequestHeader"in f&&Q.forEach(o.toJSON(),function(j,C){f.setRequestHeader(C,j)}),Q.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),i&&i!=="json"&&(f.responseType=n.responseType),u&&([m,v]=Ao(u,!0),f.addEventListener("progress",m)),d&&f.upload&&([x,h]=Ao(d),f.upload.addEventListener("progress",x),f.upload.addEventListener("loadend",h)),(n.cancelToken||n.signal)&&(c=g=>{f&&(s(!g||g.type?new Qs(null,e,f):g),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(c),n.signal&&(n.signal.aborted?c():n.signal.addEventListener("abort",c)));const b=K5(n.url);if(b&&mt.protocols.indexOf(b)===-1){s(new fe("Unsupported protocol "+b+":",fe.ERR_BAD_REQUEST,e));return}f.send(l||null)})},iv=(e,a)=>{const{length:r}=e=e?e.filter(Boolean):[];if(a||r){let s=new AbortController,n;const l=function(u){if(!n){n=!0,i();const c=u instanceof Error?u:this.reason;s.abort(c instanceof fe?c:new Qs(c instanceof Error?c.message:c))}};let o=a&&setTimeout(()=>{o=null,l(new fe(`timeout ${a} of ms exceeded`,fe.ETIMEDOUT))},a);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(l):u.removeEventListener("abort",l)}),e=null)};e.forEach(u=>u.addEventListener("abort",l));const{signal:d}=s;return d.unsubscribe=()=>Q.asap(i),d}},cv=function*(e,a){let r=e.byteLength;if(r<a){yield e;return}let s=0,n;for(;s<r;)n=s+a,yield e.slice(s,n),s=n},dv=async function*(e,a){for await(const r of uv(e))yield*cv(r,a)},uv=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const a=e.getReader();try{for(;;){const{done:r,value:s}=await a.read();if(r)break;yield s}}finally{await a.cancel()}},Cx=(e,a,r,s)=>{const n=dv(e,a);let l=0,o,i=d=>{o||(o=!0,s&&s(d))};return new ReadableStream({async pull(d){try{const{done:u,value:c}=await n.next();if(u){i(),d.close();return}let x=c.byteLength;if(r){let m=l+=x;r(m)}d.enqueue(new Uint8Array(c))}catch(u){throw i(u),u}},cancel(d){return i(d),n.return()}},{highWaterMark:2})},kx=64*1024,{isFunction:Fl}=Q,pv=(({Request:e,Response:a})=>({Request:e,Response:a}))(Q.global),{ReadableStream:Fx,TextEncoder:Tx}=Q.global,Ex=(e,...a)=>{try{return!!e(...a)}catch{return!1}},xv=e=>{e=Q.merge.call({skipUndefined:!0},pv,e);const{fetch:a,Request:r,Response:s}=e,n=a?Fl(a):typeof fetch=="function",l=Fl(r),o=Fl(s);if(!n)return!1;const i=n&&Fl(Fx),d=n&&(typeof Tx=="function"?(v=>S=>v.encode(S))(new Tx):async v=>new Uint8Array(await new r(v).arrayBuffer())),u=l&&i&&Ex(()=>{let v=!1;const S=new r(mt.origin,{body:new Fx,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!S}),c=o&&i&&Ex(()=>Q.isReadableStream(new s("").body)),x={stream:c&&(v=>v.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!x[v]&&(x[v]=(S,f)=>{let y=S&&S[v];if(y)return y.call(S);throw new fe(`Response type '${v}' is not supported`,fe.ERR_NOT_SUPPORT,f)})});const m=async v=>{if(v==null)return 0;if(Q.isBlob(v))return v.size;if(Q.isSpecCompliantForm(v))return(await new r(mt.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(Q.isArrayBufferView(v)||Q.isArrayBuffer(v))return v.byteLength;if(Q.isURLSearchParams(v)&&(v=v+""),Q.isString(v))return(await d(v)).byteLength},h=async(v,S)=>{const f=Q.toFiniteNumber(v.getContentLength());return f??m(S)};return async v=>{let{url:S,method:f,data:y,signal:b,cancelToken:g,timeout:j,onDownloadProgress:C,onUploadProgress:T,responseType:E,headers:D,withCredentials:I="same-origin",fetchOptions:z}=kb(v),Y=a||fetch;E=E?(E+"").toLowerCase():"text";let _=iv([b,g&&g.toAbortSignal()],j),V=null;const R=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let B;try{if(T&&u&&f!=="get"&&f!=="head"&&(B=await h(D,y))!==0){let A=new r(S,{method:"POST",body:y,duplex:"half"}),O;if(Q.isFormData(y)&&(O=A.headers.get("content-type"))&&D.setContentType(O),A.body){const[q,U]=Nx(B,Ao(Sx(T)));y=Cx(A.body,kx,q,U)}}Q.isString(I)||(I=I?"include":"omit");const F=l&&"credentials"in r.prototype,$={...z,signal:_,method:f.toUpperCase(),headers:D.normalize().toJSON(),body:y,duplex:"half",credentials:F?I:void 0};V=l&&new r(S,$);let N=await(l?Y(V,z):Y(S,$));const w=c&&(E==="stream"||E==="response");if(c&&(C||w&&R)){const A={};["status","statusText","headers"].forEach(H=>{A[H]=N[H]});const O=Q.toFiniteNumber(N.headers.get("content-length")),[q,U]=C&&Nx(O,Ao(Sx(C),!0))||[];N=new s(Cx(N.body,kx,q,()=>{U&&U(),R&&R()}),A)}E=E||"text";let k=await x[Q.findKey(x,E)||"text"](N,v);return!w&&R&&R(),await new Promise((A,O)=>{wb(A,O,{data:k,headers:Et.from(N.headers),status:N.status,statusText:N.statusText,config:v,request:V})})}catch(F){throw R&&R(),F&&F.name==="TypeError"&&/Load failed|fetch/i.test(F.message)?Object.assign(new fe("Network Error",fe.ERR_NETWORK,v,V),{cause:F.cause||F}):fe.from(F,F&&F.code,v,V)}}},mv=new Map,Fb=e=>{let a=e&&e.env||{};const{fetch:r,Request:s,Response:n}=a,l=[s,n,r];let o=l.length,i=o,d,u,c=mv;for(;i--;)d=l[i],u=c.get(d),u===void 0&&c.set(d,u=i?new Map:xv(a)),c=u;return u};Fb();const Eu={http:R5,xhr:ov,fetch:{get:Fb}};Q.forEach(Eu,(e,a)=>{if(e){try{Object.defineProperty(e,"name",{value:a})}catch{}Object.defineProperty(e,"adapterName",{value:a})}});const Ax=e=>`- ${e}`,fv=e=>Q.isFunction(e)||e===null||e===!1;function gv(e,a){e=Q.isArray(e)?e:[e];const{length:r}=e;let s,n;const l={};for(let o=0;o<r;o++){s=e[o];let i;if(n=s,!fv(s)&&(n=Eu[(i=String(s)).toLowerCase()],n===void 0))throw new fe(`Unknown adapter '${i}'`);if(n&&(Q.isFunction(n)||(n=n.get(a))))break;l[i||"#"+o]=n}if(!n){const o=Object.entries(l).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let i=r?o.length>1?`since :
`+o.map(Ax).join(`
`):" "+Ax(o[0]):"as no adapter specified";throw new fe("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n}const Tb={getAdapter:gv,adapters:Eu};function Qi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Qs(null,e)}function Rx(e){return Qi(e),e.headers=Et.from(e.headers),e.data=Xi.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Tb.getAdapter(e.adapter||cl.adapter,e)(e).then(function(s){return Qi(e),s.data=Xi.call(e,e.transformResponse,s),s.headers=Et.from(s.headers),s},function(s){return Sb(s)||(Qi(e),s&&s.response&&(s.response.data=Xi.call(e,e.transformResponse,s.response),s.response.headers=Et.from(s.response.headers))),Promise.reject(s)})}const Eb="1.13.2",ni={};["object","boolean","number","function","string","symbol"].forEach((e,a)=>{ni[e]=function(s){return typeof s===e||"a"+(a<1?"n ":" ")+e}});const zx={};ni.transitional=function(a,r,s){function n(l,o){return"[Axios v"+Eb+"] Transitional option '"+l+"'"+o+(s?". "+s:"")}return(l,o,i)=>{if(a===!1)throw new fe(n(o," has been removed"+(r?" in "+r:"")),fe.ERR_DEPRECATED);return r&&!zx[o]&&(zx[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),a?a(l,o,i):!0}};ni.spelling=function(a){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${a}`),!0)};function bv(e,a,r){if(typeof e!="object")throw new fe("options must be an object",fe.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const l=s[n],o=a[l];if(o){const i=e[l],d=i===void 0||o(i,l,e);if(d!==!0)throw new fe("option "+l+" must be "+d,fe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new fe("Unknown option "+l,fe.ERR_BAD_OPTION)}}const Xl={assertOptions:bv,validators:ni},da=Xl.validators;let Lr=class{constructor(a){this.defaults=a||{},this.interceptors={request:new vx,response:new vx}}async request(a,r){try{return await this._request(a,r)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const l=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?l&&!String(s.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+l):s.stack=l}catch{}}throw s}}_request(a,r){typeof a=="string"?(r=r||{},r.url=a):r=a||{},r=qr(this.defaults,r);const{transitional:s,paramsSerializer:n,headers:l}=r;s!==void 0&&Xl.assertOptions(s,{silentJSONParsing:da.transitional(da.boolean),forcedJSONParsing:da.transitional(da.boolean),clarifyTimeoutError:da.transitional(da.boolean)},!1),n!=null&&(Q.isFunction(n)?r.paramsSerializer={serialize:n}:Xl.assertOptions(n,{encode:da.function,serialize:da.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Xl.assertOptions(r,{baseUrl:da.spelling("baseURL"),withXsrfToken:da.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=l&&Q.merge(l.common,l[r.method]);l&&Q.forEach(["delete","get","head","post","put","patch","common"],v=>{delete l[v]}),r.headers=Et.concat(o,l);const i=[];let d=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(r)===!1||(d=d&&S.synchronous,i.unshift(S.fulfilled,S.rejected))});const u=[];this.interceptors.response.forEach(function(S){u.push(S.fulfilled,S.rejected)});let c,x=0,m;if(!d){const v=[Rx.bind(this),void 0];for(v.unshift(...i),v.push(...u),m=v.length,c=Promise.resolve(r);x<m;)c=c.then(v[x++],v[x++]);return c}m=i.length;let h=r;for(;x<m;){const v=i[x++],S=i[x++];try{h=v(h)}catch(f){S.call(this,f);break}}try{c=Rx.call(this,h)}catch(v){return Promise.reject(v)}for(x=0,m=u.length;x<m;)c=c.then(u[x++],u[x++]);return c}getUri(a){a=qr(this.defaults,a);const r=Cb(a.baseURL,a.url,a.allowAbsoluteUrls);return vb(r,a.params,a.paramsSerializer)}};Q.forEach(["delete","get","head","options"],function(a){Lr.prototype[a]=function(r,s){return this.request(qr(s||{},{method:a,url:r,data:(s||{}).data}))}});Q.forEach(["post","put","patch"],function(a){function r(s){return function(l,o,i){return this.request(qr(i||{},{method:a,headers:s?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}Lr.prototype[a]=r(),Lr.prototype[a+"Form"]=r(!0)});let hv=class Ab{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const s=this;this.promise.then(n=>{if(!s._listeners)return;let l=s._listeners.length;for(;l-- >0;)s._listeners[l](n);s._listeners=null}),this.promise.then=n=>{let l;const o=new Promise(i=>{s.subscribe(i),l=i}).then(n);return o.cancel=function(){s.unsubscribe(l)},o},a(function(l,o,i){s.reason||(s.reason=new Qs(l,o,i),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const r=this._listeners.indexOf(a);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const a=new AbortController,r=s=>{a.abort(s)};return this.subscribe(r),a.signal.unsubscribe=()=>this.unsubscribe(r),a.signal}static source(){let a;return{token:new Ab(function(n){a=n}),cancel:a}}};function yv(e){return function(r){return e.apply(null,r)}}function vv(e){return Q.isObject(e)&&e.isAxiosError===!0}const ud={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ud).forEach(([e,a])=>{ud[a]=e});function Rb(e){const a=new Lr(e),r=ib(Lr.prototype.request,a);return Q.extend(r,Lr.prototype,a,{allOwnKeys:!0}),Q.extend(r,a,null,{allOwnKeys:!0}),r.create=function(n){return Rb(qr(e,n))},r}const Qe=Rb(cl);Qe.Axios=Lr;Qe.CanceledError=Qs;Qe.CancelToken=hv;Qe.isCancel=Sb;Qe.VERSION=Eb;Qe.toFormData=si;Qe.AxiosError=fe;Qe.Cancel=Qe.CanceledError;Qe.all=function(a){return Promise.all(a)};Qe.spread=yv;Qe.isAxiosError=vv;Qe.mergeConfig=qr;Qe.AxiosHeaders=Et;Qe.formToJSON=e=>Nb(Q.isHTMLForm(e)?new FormData(e):e);Qe.getAdapter=Tb.getAdapter;Qe.HttpStatusCode=ud;Qe.default=Qe;const{Axios:sN,AxiosError:nN,CanceledError:lN,isCancel:oN,CancelToken:iN,VERSION:cN,all:dN,Cancel:uN,isAxiosError:pN,spread:xN,toFormData:mN,AxiosHeaders:fN,HttpStatusCode:gN,formToJSON:bN,getAdapter:hN,mergeConfig:yN}=Qe,jv="http://18.166.29.239:3000/api",Z=Qe.create({baseURL:jv,timeout:3e5,headers:{"Content-Type":"application/json"}});Z.interceptors.request.use(e=>{const a=localStorage.getItem("adminToken")||localStorage.getItem("merchantToken")||localStorage.getItem("userToken");a&&(e.headers.Authorization=`Bearer ${a}`);const r=localStorage.getItem("adminData");if(r)try{const s=JSON.parse(r);e.headers["X-Admin-Id"]=s.adminId,e.headers["X-Admin-Name"]=`${s.firstName} ${s.lastName}`,e.headers["X-Admin-Role"]=s.role,e.headers["X-Admin-Department"]=s.role}catch(s){console.warn("Failed to parse adminData:",s)}return e});Z.interceptors.response.use(e=>e.data,e=>{var a,r,s;if(((a=e.response)==null?void 0:a.status)===401&&(localStorage.clear(),window.location.href="/login"),((r=e.response)==null?void 0:r.status)===503){const n=e.response.data;n!=null&&n.maintenanceMode&&(n!=null&&n.forceLogout)&&(console.log(" Maintenance mode detected - forcing logout"),localStorage.clear(),window.location.href="/login")}return Promise.reject(((s=e.response)==null?void 0:s.data)||{message:e.message})});const Nv="AIzaSyBOFPwkdS8TKEe3I2QUDBFWq_q3On5kDBI";function Sv(){var y,b,g;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState({today:{rides:0,revenue:0,passengers:0},activeShuttles:0}),[n,l]=p.useState([]),[o,i]=p.useState(!0),[d,u]=p.useState(null),c=p.useRef(null),x=p.useRef(null),m=p.useRef([]);p.useRef(!1);const h=async()=>{try{const j=await Z.get("/admin/analytics/dashboard");s({today:(j==null?void 0:j.today)||{rides:0,revenue:0,passengers:0},activeShuttles:(j==null?void 0:j.activeShuttles)||0})}catch(j){console.error("Error loading stats:",j)}finally{i(!1)}},v=async()=>{try{const j=await Z.get("/admin/shuttle-positions");l(Array.isArray(j)?j:[]),f(j||[])}catch(j){console.error("Error loading shuttle positions:",j)}},S=p.useCallback(j=>{if(j&&window.google&&window.google.maps&&!x.current)try{const C={lat:14.17815,lng:121.1359};console.log(" Initializing map...");const T=a?[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]}]:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#e0e0e0"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9d9f1"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]}];x.current=new window.google.maps.Map(j,{center:C,zoom:15,styles:T,disableDefaultUI:!0,zoomControl:!0}),console.log(" Map initialized successfully"),u(null),v()}catch(C){console.error(" Map initialization error:",C),u(`Failed to initialize map: ${C.message}`)}c.current=j},[a]),f=j=>{!x.current||!window.google||(m.current.forEach(C=>C.setMap(null)),m.current=[],j.forEach(C=>{var T,E;if(C.latitude&&C.longitude){const D=new window.google.maps.Marker({position:{lat:C.latitude,lng:C.longitude},map:x.current,title:C.shuttleId,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:12,fillColor:a?"#FFD41C":"#3B82F6",fillOpacity:1,strokeColor:a?"#181D40":"#FFFFFF",strokeWeight:3},label:{text:"",fontSize:"16px"}});let I=null;(T=C.currentTrip)!=null&&T.endLatitude&&((E=C.currentTrip)!=null&&E.endLongitude)&&(I=new window.google.maps.Marker({position:{lat:C.currentTrip.endLatitude,lng:C.currentTrip.endLongitude},map:x.current,title:"Destination",icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#EF4444",fillOpacity:1,strokeColor:"#FBFBFB",strokeWeight:3},label:{text:"",fontSize:"14px"}}),m.current.push(I));const z=new window.google.maps.InfoWindow({content:`
            <div style="color: #181D40; padding: 12px; min-width: 250px;">
              <div style="font-weight: 700; font-size: 14px; margin-bottom: 8px; color: #FFD41C; background: #181D40; padding: 6px; border-radius: 4px;">
                ${C.shuttleId}
              </div>
              <div style="margin-bottom: 4px;">
                <strong>Driver:</strong> ${C.driverName||"No driver assigned"}
              </div>
              ${C.vehicleInfo?`<div style="margin-bottom: 4px;"><strong>Vehicle:</strong> ${C.vehicleInfo}</div>`:""}
              ${C.route?`
                <div style="margin-top: 12px; padding: 8px; background: #f0f0f0; border-radius: 4px;">
                  <div style="font-weight: 600; margin-bottom: 4px;">Route: ${C.route.routeName}</div>
                  <div style="font-size: 12px; color: #666;"> From: ${C.route.fromName}</div>
                  <div style="font-size: 12px; color: #666;"> To: ${C.route.toName}</div>
                </div>
              `:""}
              <div style="margin-top: 8px; font-size: 11px; color: #666;">
                Current location: ${C.latitude.toFixed(6)}, ${C.longitude.toFixed(6)}
              </div>
              <div style="font-size: 11px; color: #666;">
                Last update: ${new Date(C.updatedAt).toLocaleTimeString()}
              </div>
            </div>
          `});D.addListener("click",()=>{z.open(x.current,D),x.current.panTo({lat:C.latitude,lng:C.longitude}),x.current.setZoom(16)}),m.current.push(D)}}))};return p.useEffect(()=>{var C;h(),!window.googleMapsLoadingPromise&&!((C=window.google)!=null&&C.maps)&&(document.querySelector('script[src*="maps.googleapis.com"]')?console.log(" Google Maps script already in DOM"):window.googleMapsLoadingPromise=new Promise((E,D)=>{window.initGoogleMaps=()=>{console.log(" Google Maps loaded successfully (with places library)"),E()};const I=document.createElement("script");I.src=`https://maps.googleapis.com/maps/api/js?key=${Nv}&libraries=places&callback=initGoogleMaps`,I.async=!0,I.defer=!0,I.onerror=z=>{console.error(" Failed to load Google Maps:",z),u("Failed to load Google Maps. Please check API key."),D(z)},document.head.appendChild(I)}));const j=setInterval(()=>{h(),v()},2e3);return()=>clearInterval(j)},[]),o?t.jsx("div",{style:{color:e.accent.primary},className:"text-center py-[60px]",children:"Loading dashboard..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-[30px] border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Home"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Real-time motorpool analytics  Auto-updates every 5 seconds"})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-5 mb-[30px]",children:[t.jsx(Tl,{icon:"",label:"TODAY'S RIDES",value:((y=r.today)==null?void 0:y.rides)||0,subtitle:"trips completed",color:"#10B981",theme:e}),t.jsx(Tl,{icon:"",label:"TODAY'S COLLECTIONS",value:`${(((b=r.today)==null?void 0:b.revenue)||0).toLocaleString()}`,subtitle:"fare collected",color:"#FFD41C",theme:e}),t.jsx(Tl,{icon:"",label:"TODAY'S PASSENGERS",value:((g=r.today)==null?void 0:g.passengers)||0,subtitle:"total today",color:"#3B82F6",theme:e}),t.jsx(Tl,{icon:"",label:"ACTIVE SHUTTLES",value:`${n.length}/${r.activeShuttles||0}`,subtitle:"in transit / total",color:"#A855F7",theme:e})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-5 border-b flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h3",{style:{color:e.accent.primary},className:"m-0 mb-1 text-lg font-bold",children:" Live Shuttle Tracking"}),t.jsxs("p",{style:{color:e.text.secondary},className:"m-0 text-xs",children:[n.length," shuttle(s) currently in transit"]})]}),t.jsxs("div",{className:"flex items-center gap-2 bg-[rgba(16,185,129,0.2)] px-3 py-1.5 rounded-[20px] border border-[rgba(16,185,129,0.3)]",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-[#10B981] animate-pulse"}),t.jsx("span",{className:"text-[#10B981] text-xs font-semibold",children:"LIVE"})]})]}),t.jsx("div",{className:"relative h-[500px]",children:d?t.jsxs("div",{style:{color:e.text.tertiary},className:"h-full flex flex-col items-center justify-center p-10",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{className:"mb-2 text-[#EF4444]",children:d}),t.jsx("div",{className:"text-xs opacity-70",children:"Check console for details"})]}):t.jsx("div",{ref:S,className:"w-full h-full"})}),n.length>0&&!d&&t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-5 border-t",children:[t.jsxs("div",{style:{color:e.accent.primary},className:"text-[11px] font-bold mb-3 uppercase tracking-wide",children:["Shuttles in Transit (",n.length,")"]}),t.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-3",children:n.map((j,C)=>{var T,E;return t.jsxs("button",{onClick:()=>{x.current&&j.latitude&&j.longitude&&(x.current.panTo({lat:j.latitude,lng:j.longitude}),x.current.setZoom(16))},style:{background:e.bg.card,borderColor:e.border.primary},className:"border rounded-xl px-4 py-3 cursor-pointer transition-all duration-200 text-left hover:-translate-y-0.5",onMouseEnter:D=>{D.currentTarget.style.background=a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",D.currentTarget.style.borderColor=e.border.hover},onMouseLeave:D=>{D.currentTarget.style.background=e.bg.card,D.currentTarget.style.borderColor=e.border.primary},children:[t.jsxs("div",{className:"flex items-center gap-[10px] mb-2",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("span",{style:{color:e.accent.primary},className:"text-sm font-bold",children:j.shuttleId}),t.jsx("span",{style:{color:e.text.tertiary},className:"text-[10px]",children:""}),t.jsx("span",{style:{color:e.text.secondary},className:"text-xs",children:j.driverName||"Unknown"})]}),j.route&&t.jsx("div",{style:{color:e.text.primary,borderColor:e.accent.primary,background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},className:"text-xs mb-1.5 px-2 py-1.5 rounded-md border-l-[3px]",children:t.jsxs("div",{className:"font-semibold mb-0.5",children:[" ",j.route.fromName,"   ",j.route.toName]})}),t.jsxs("div",{style:{color:e.text.tertiary},className:"text-[11px]",children:["Current: ",(T=j.latitude)==null?void 0:T.toFixed(5),", ",(E=j.longitude)==null?void 0:E.toFixed(5)]}),j.updatedAt&&t.jsxs("div",{style:{color:e.text.muted},className:"text-[10px] mt-1",children:["Updated ",new Date(j.updatedAt).toLocaleTimeString()]})]},C)})})]})]})})]})}function Tl({icon:e,label:a,value:r,subtitle:s,color:n,theme:l}){return t.jsxs("div",{style:{background:l.bg.card,borderColor:l.border.primary},className:"p-6 rounded-2xl border relative overflow-hidden transition-all duration-300",children:[t.jsx("div",{className:"absolute right-4 top-4 text-[40px] opacity-15",children:e}),t.jsx("div",{style:{color:l.text.secondary},className:"text-[11px] font-bold uppercase tracking-wide mb-3",children:a}),t.jsx("div",{style:{color:l.text.primary},className:"text-[32px] font-extrabold mb-2",children:r}),t.jsx("div",{className:"text-xs font-semibold inline-block py-[3px] px-[10px] rounded-xl",style:{color:n,background:`${n}20`},children:s})]})}function Ht({value:e,onChange:a,placeholder:r="Search..."}){const{theme:s,isDarkMode:n}=ne();return t.jsxs("div",{className:"relative w-full max-w-[400px]",children:[t.jsx("span",{style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",fontSize:"18px",color:n?"rgba(255,212,28,0.6)":"rgba(59,130,246,0.6)"},children:""}),t.jsx("input",{type:"text",value:e,onChange:l=>a(l.target.value),placeholder:r,style:{width:"100%",padding:"12px 16px 12px 44px",border:`2px solid ${n?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"10px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",transition:"all 0.3s",outline:"none",boxSizing:"border-box"},onFocus:l=>{l.target.style.borderColor=n?"rgba(255,212,28,0.6)":"rgba(59,130,246,0.6)",l.target.style.background="rgba(251,251,251,0.08)"},onBlur:l=>{l.target.style.borderColor=n?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",l.target.style.background="rgba(251,251,251,0.05)"}})]})}function qt({onClick:e,disabled:a=!1}){const{theme:r,isDarkMode:s}=ne(),n=s?"255, 212, 28":"59, 130, 246";return t.jsxs("button",{onClick:e,disabled:a,style:{padding:"12px 20px",background:a?`rgba(${n}, 0.3)`:`rgba(${n}, 0.15)`,border:`2px solid rgba(${n}, 0.4)`,borderRadius:"10px",color:a?`rgba(${n}, 0.5)`:r.accent.primary,fontSize:"14px",fontWeight:600,cursor:a?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",whiteSpace:"nowrap"},onMouseEnter:l=>{a||(l.currentTarget.style.background=`rgba(${n}, 0.25)`,l.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:l=>{a||(l.currentTarget.style.background=`rgba(${n}, 0.15)`,l.currentTarget.style.transform="translateY(0)")},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Export CSV"})]})}function wv({variant:e="info",message:a,onClose:r,autoClose:s=4e3}){const{isDarkMode:n}=ne(),[l,o]=p.useState(!1);if(p.useEffect(()=>{if(s>0&&r){const c=setTimeout(()=>{o(!0),setTimeout(r,300)},s);return()=>clearTimeout(c)}},[s,r]),!a)return null;const i=()=>{o(!0),setTimeout(r,300)},d={success:"",error:"",warning:"!",info:"i"}[e],u={success:{bg:n?"rgba(16,185,129,0.2)":"rgba(16,185,129,0.15)",text:"#10B981",border:"#10B981",iconBg:"rgba(16,185,129,0.3)"},error:{bg:n?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.15)",text:"#EF4444",border:"#EF4444",iconBg:"rgba(239,68,68,0.3)"},warning:{bg:n?"rgba(251,191,36,0.2)":"rgba(251,191,36,0.15)",text:"#FBBF24",border:"#FBBF24",iconBg:"rgba(251,191,36,0.3)"},info:{bg:n?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.15)",text:"#3B82F6",border:"#3B82F6",iconBg:"rgba(59,130,246,0.3)"}}[e];return t.jsxs("div",{style:{background:u.bg,color:u.text,borderLeft:`4px solid ${u.border}`,padding:"14px 20px",borderRadius:"12px",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",gap:"12px",boxShadow:n?"0 8px 32px rgba(0,0,0,0.4)":"0 8px 32px rgba(0,0,0,0.1)",backdropFilter:"blur(10px)",animation:l?"slideOutRight 0.3s ease-out forwards":"slideInRight 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",maxWidth:"500px",minWidth:"300px"},children:[t.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:u.iconBg,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"16px",flexShrink:0},children:d}),t.jsx("span",{style:{flex:1},children:a}),r&&t.jsx("button",{onClick:i,style:{background:"transparent",border:"none",color:u.text,cursor:"pointer",fontSize:"24px",fontWeight:"bold",padding:"0 4px",lineHeight:1,transition:"all 0.2s",opacity:.7},onMouseEnter:c=>{c.currentTarget.style.opacity="1",c.currentTarget.style.transform="scale(1.2)"},onMouseLeave:c=>{c.currentTarget.style.opacity="0.7",c.currentTarget.style.transform="scale(1)"},children:""}),t.jsx("style",{children:`
        @keyframes slideInRight {
          from {
            transform: translateX(400px);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }

        @keyframes slideOutRight {
          from {
            transform: translateX(0);
            opacity: 1;
          }
          to {
            transform: translateX(400px);
            opacity: 0;
          }
        }
      `})]})}function zt(e,a){if(!e||e.length===0){alert("No data to export");return}const r=Object.keys(e[0]),s=[r.join(","),...e.map(i=>r.map(d=>{const u=i[d];if(u==null)return"";const c=String(u);return c.includes(",")||c.includes('"')||c.includes(`
`)?`"${c.replace(/"/g,'""')}"`:c}).join(","))].join(`
`),n=new Blob([s],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),o=URL.createObjectURL(n);l.setAttribute("href",o),l.setAttribute("download",`${a}_${new Date().toISOString().split("T")[0]}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}function Jr(e,a=["_id","__v","password","pin"]){return e.map(r=>{const s={};return Object.keys(r).forEach(n=>{a.includes(n)||(r[n]instanceof Date||typeof r[n]=="string"&&/^\d{4}-\d{2}-\d{2}T/.test(r[n])?s[n]=new Date(r[n]).toLocaleString():s[n]=r[n])}),s})}function Bx({location:e,onLocationChange:a,onConfirm:r,pointLabel:s,pointColor:n,apiKey:l}){var g,j;const{theme:o,isDarkMode:i}=ne(),d=p.useRef(null),u=p.useRef(null),c=p.useRef(null),x=p.useRef(null),m=p.useRef(null),[h,v]=p.useState(!1),[S,f]=p.useState(e),[y,b]=p.useState(e.displayName||"");return p.useEffect(()=>{var E;if(!d.current||!((E=window.google)!=null&&E.maps))return;const C=new window.google.maps.Map(d.current,{center:e.latitude&&e.longitude?{lat:e.latitude,lng:e.longitude}:{lat:14.5995,lng:120.9842},zoom:15,mapTypeControl:!0,streetViewControl:!1,fullscreenControl:!0});u.current=C,v(!0);const T=n==="green"?"green-dot":"red-dot";return c.current=new window.google.maps.Marker({map:C,draggable:!0,label:s,title:`Point ${s}`,icon:{url:`http://maps.google.com/mapfiles/ms/icons/${T}.png`},position:e.latitude&&e.longitude?{lat:e.latitude,lng:e.longitude}:C.getCenter()}),c.current.addListener("dragend",async D=>{const I=D.latLng.lat(),z=D.latLng.lng(),Y=new window.google.maps.Geocoder;try{const _=await Y.geocode({location:{lat:I,lng:z}});_.results[0]&&f({name:_.results[0].formatted_address,latitude:I,longitude:z})}catch(_){console.error("Geocoding error:",_),f({name:`${I.toFixed(6)}, ${z.toFixed(6)}`,latitude:I,longitude:z})}}),()=>{c.current&&c.current.setMap(null)}},[]),p.useEffect(()=>{if(c.current&&S.latitude&&S.longitude){const C={lat:S.latitude,lng:S.longitude};c.current.setPosition(C),u.current&&u.current.panTo(C)}},[S]),p.useEffect(()=>{var E,D,I,z;if(!h||!((D=(E=window.google)==null?void 0:E.maps)!=null&&D.places)||!m.current){console.log("Autocomplete not ready:",{isMapReady:h,hasGoogle:!!((z=(I=window.google)==null?void 0:I.maps)!=null&&z.places),hasInput:!!m.current});return}console.log("Initializing Autocomplete...");const C=new window.google.maps.places.Autocomplete(m.current,{componentRestrictions:{country:"ph"},fields:["formatted_address","geometry","name"],types:["establishment","geocode"]});x.current=C,C.bindTo("bounds",u.current),m.current.addEventListener("focus",()=>{console.log("Search input focused - autocomplete should show suggestions when typing")});const T=C.addListener("place_changed",()=>{console.log("Place changed triggered");const Y=C.getPlace();if(console.log("Selected place:",Y),!Y.geometry){console.warn("No geometry for place");return}const _=Y.geometry.location.lat(),V=Y.geometry.location.lng();console.log("Coordinates:",_,V),f({name:Y.formatted_address,latitude:_,longitude:V}),b(Y.name||"")});return()=>{T&&window.google.maps.event.removeListener(T)}},[h]),t.jsxs("div",{children:[t.jsx("style",{children:`
        .pac-container {
          background-color: #1E2347 !important;
          border: 2px solid #FFD41C !important;
          border-radius: 8px !important;
          margin-top: 4px !important;
          box-shadow: 0 4px 12px rgba(0,0,0,0.3) !important;
          z-index: 10000 !important;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
        }
        .pac-item {
          padding: 10px 12px !important;
          cursor: pointer !important;
          border-top: 1px solid rgba(255,212,28,0.2) !important;
          color: rgba(251,251,251,0.9) !important;
          font-size: 14px !important;
        }
        .pac-item:first-child {
          border-top: none !important;
        }
        .pac-item:hover {
          background-color: rgba(255,212,28,0.1) !important;
        }
        .pac-item-selected {
          background-color: rgba(255,212,28,0.15) !important;
        }
        .pac-item-query {
          color: #FFD41C !important;
          font-size: 14px !important;
        }
        .pac-matched {
          font-weight: 700 !important;
          color: #FFD41C !important;
        }
        .pac-icon {
          display: none !important;
        }
      `}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block mb-2 font-semibold text-sm",style:{color:o.accent.primary},children:s==="A"?" Search Starting Location":" Search Destination"}),t.jsx("input",{ref:m,type:"text",placeholder:"Type location name or address...",className:"w-full p-3 border-2 rounded-lg text-sm box-border",style:{borderColor:n==="green"?"rgba(34,197,94,0.3)":"rgba(239,68,68,0.3)",background:"rgba(251,251,251,0.05)",color:o.text.primary}}),t.jsx("div",{className:"text-[11px] mt-1",style:{color:o.text.secondary},children:"Start typing and select from dropdown suggestions"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block mb-2 font-semibold text-sm",style:{color:o.accent.primary},children:"Display Name (shown in app)"}),t.jsx("input",{type:"text",value:y,onChange:C=>b(C.target.value),placeholder:"e.g., National University, Manila",className:"w-full p-3 border-2 rounded-lg text-sm box-border",style:{borderColor:n==="green"?"rgba(34,197,94,0.3)":"rgba(239,68,68,0.3)",background:"rgba(251,251,251,0.05)",color:o.text.primary}}),t.jsx("div",{className:"text-[11px] mt-1",style:{color:o.text.secondary},children:"Short, readable name for users (instead of full address)"})]}),t.jsx("div",{ref:d,className:"w-full h-[400px] rounded-xl border-2 border-[rgba(255,212,28,0.3)] overflow-hidden mb-4"}),S.name&&t.jsxs("div",{className:`p-3 rounded-lg mb-4 ${n==="green"?"border border-[rgba(34,197,94,0.3)]":"border border-[rgba(239,68,68,0.3)]"}`,style:{background:n==="green"?"rgba(34,197,94,0.1)":"rgba(239,68,68,0.1)"},children:[t.jsx("div",{className:"text-xs mb-1",style:{color:o.text.secondary},children:"Selected Location:"}),t.jsxs("div",{className:`text-sm font-semibold ${n==="green"?"text-[#22C55E]":"text-[#EF4444]"}`,children:[" ",y||S.name]}),t.jsxs("div",{className:"text-[11px] mt-1",style:{color:o.text.secondary},children:["Full address: ",S.name]}),t.jsxs("div",{className:"text-[11px] mt-0.5",style:{color:o.text.secondary},children:["Coordinates: ",(g=S.latitude)==null?void 0:g.toFixed(6),", ",(j=S.longitude)==null?void 0:j.toFixed(6)]})]}),t.jsxs("div",{className:"p-3 border rounded-lg text-xs mb-6",style:{background:i?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",borderColor:i?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:o.text.primary},children:[" ",t.jsx("strong",{children:"Tip:"})," Search for a location above or drag the ",s==="A"?" green":" red"," marker on the map to adjust position precisely."]}),t.jsx("button",{onClick:()=>r({...S,displayName:y||S.name}),disabled:!S.name||!S.latitude||!y,className:"w-full py-3.5 px-4 border-none rounded-lg text-[15px] font-bold transition-all duration-200",style:!S.name||!S.latitude||!y?{background:"rgba(100,100,100,0.2)",color:"rgba(251,251,251,0.3)",cursor:"not-allowed"}:{background:o.accent.primary,color:o.accent.secondary,cursor:"pointer",boxShadow:i?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},children:s==="A"?"Set Point A & Continue ":"Set Point B & Continue "})]})}function Cv(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(!1),[d,u]=p.useState(1),[c,x]=p.useState(null),[m,h]=p.useState(null),[v,S]=p.useState(""),[f,y]=p.useState(1),b=20,[g,j]=p.useState({name:"",displayName:"",latitude:null,longitude:null}),[C,T]=p.useState({name:"",displayName:"",latitude:null,longitude:null}),[E,D]=p.useState(15),[I,z]=p.useState(!0),[Y,_]=p.useState(!0),V="AIzaSyBOFPwkdS8TKEe3I2QUDBFWq_q3On5kDBI",[R,B]=p.useState(!1);p.useEffect(()=>{if(window.google&&window.google.maps&&window.google.maps.places){console.log(" Google Maps already loaded and ready"),B(!0);return}window.initGoogleMaps=()=>{console.log(" Google Maps API loaded via callback"),B(!0)};const L=document.querySelector('script[src*="maps.googleapis.com"]');if(L){console.log(" Google Maps script already in DOM, waiting for load..."),console.log("Script src:",L.src);let te=0;const ce=100,de=setInterval(()=>{te++,window.google&&window.google.maps&&window.google.maps.places?(console.log(" Google Maps API ready after",te*100,"ms"),B(!0),clearInterval(de)):te>=ce&&(console.error(" Timeout waiting for Google Maps API to load"),console.error("Check browser console for Google Maps errors"),clearInterval(de))},100);return()=>clearInterval(de)}console.log(" Loading Google Maps script with key:",V.substring(0,20)+"...");const X=document.createElement("script");return X.src=`https://maps.googleapis.com/maps/api/js?key=${V}&libraries=places&callback=initGoogleMaps`,X.async=!0,X.defer=!0,X.onload=()=>{console.log("Script loaded, waiting for callback...")},X.onerror=te=>{console.error(" Failed to load Google Maps script:",te),console.error("Possible causes: Invalid API key, network issue, or API restrictions")},document.head.appendChild(X),()=>{}},[V]);const F=async()=>{try{const L=await Z.get("/admin/routes");s(Array.isArray(L)?L:[]),l(!1)}catch(L){console.error("Error loading routes:",L),l(!1)}};p.useEffect(()=>{F();const L=setInterval(F,5e3);return()=>clearInterval(L)},[]),p.useEffect(()=>{y(1)},[v]);const $=()=>{if(r.length===0)return"ROUTE_001";let L=0;for(const X of r)if(X.routeId){const te=X.routeId.match(/ROUTE_(\d+)/i);if(te){const ce=parseInt(te[1],10);ce>L&&(L=ce)}}return`ROUTE_${String(L+1).padStart(3,"0")}`},N=async()=>{try{const X={routeName:`${g.displayName||g.name}  ${C.displayName||C.name}`,fromName:g.displayName||g.name,fromLatitude:g.latitude,fromLongitude:g.longitude,toName:C.displayName||C.name,toLatitude:C.latitude,toLongitude:C.longitude,fare:parseFloat(E),isActive:I};if(c)await Z.put(`/admin/routes/${c._id}`,X),h({type:"success",message:"Route updated successfully!"});else{const te=$();if(await Z.post("/admin/routes",{...X,routeId:te}),Y){const de={routeId:`ROUTE_${String(parseInt(te.split("_")[1])+1).padStart(3,"0")}`,routeName:`${C.displayName||C.name}  ${g.displayName||g.name}`,fromName:C.displayName||C.name,fromLatitude:C.latitude,fromLongitude:C.longitude,toName:g.displayName||g.name,toLatitude:g.latitude,toLongitude:g.longitude,fare:parseFloat(E),isActive:I};await Z.post("/admin/routes",de),h({type:"success",message:"Route and reverse route created successfully! "})}else h({type:"success",message:"Route created successfully! "})}w(),i(!1),F()}catch(L){h({type:"error",message:L.message||"Failed to save route"})}},w=()=>{j({name:"",displayName:"",latitude:null,longitude:null}),T({name:"",displayName:"",latitude:null,longitude:null}),D(15),z(!0),x(null),_(!0),u(1)},k=L=>{x(L),j({name:L.fromName,displayName:L.fromName,latitude:L.fromLatitude,longitude:L.fromLongitude}),T({name:L.toName,displayName:L.toName,latitude:L.toLatitude,longitude:L.toLongitude}),D(L.fare),z(L.isActive),u(3),i(!0)},A=async L=>{if(window.confirm("Are you sure you want to delete this route?"))try{await Z.delete(`/admin/routes/${L}`),h({type:"success",message:"Route deleted successfully!"}),F()}catch{h({type:"error",message:"Failed to delete route"})}},O=()=>{const L=Jr(r,["routeId","routeName","fromName","toName","fare","isActive"]);zt(L,`routes_${new Date().toISOString().split("T")[0]}.csv`)},q=r.filter(L=>{var X,te,ce,de;return((X=L.routeName)==null?void 0:X.toLowerCase().includes(v.toLowerCase()))||((te=L.fromName)==null?void 0:te.toLowerCase().includes(v.toLowerCase()))||((ce=L.toName)==null?void 0:ce.toLowerCase().includes(v.toLowerCase()))||((de=L.routeId)==null?void 0:de.toLowerCase().includes(v.toLowerCase()))}),U=Math.ceil(q.length/b),H=(f-1)*b,J=H+b,ee=q.slice(H,J);return t.jsxs("div",{className:"p-6 h-full flex flex-col",children:[m&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e4},children:t.jsx(wv,{variant:m.type,message:m.message,onClose:()=>h(null)})}),t.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("div",{className:"flex justify-between items-center mb-5",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[t.jsx("span",{children:""})," Route Management"]}),t.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:"Manage shuttle routes with interactive map"})]}),t.jsx("button",{onClick:()=>{w(),i(!0)},style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.3s"},children:"+ Add Route"})]}),t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsx(Ht,{value:v,onChange:S,placeholder:"Search routes..."}),t.jsx(qt,{onClick:O,disabled:q.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:q.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{children:"No routes found"})]}):t.jsxs("div",{className:"overflow-x-auto rounded-xl border border-[rgba(255,212,28,0.2)]",children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{color:e.accent.primary,borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Route ID"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Route Name"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"From"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"To"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Fare"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:n?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"text-center py-10 text-[rgba(251,251,251,0.5)]",children:"Loading routes..."})}):ee.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"text-center py-10 text-[rgba(251,251,251,0.5)]",children:"No routes found"})}):ee.map(L=>t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[t.jsx("td",{className:"p-4",style:{color:e.text.primary},children:t.jsx("strong",{children:L.routeId})}),t.jsx("td",{className:"p-4",style:{color:e.text.primary},children:L.routeName}),t.jsx("td",{className:"p-4",style:{color:e.text.primary},children:L.fromName}),t.jsx("td",{className:"p-4",style:{color:e.text.primary},children:L.toName}),t.jsxs("td",{className:"p-4",style:{color:e.text.primary},children:["",L.fare]}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`inline-block px-3 py-1.5 rounded-md text-[11px] font-bold uppercase ${L.isActive?"bg-[rgba(34,197,94,0.2)] text-[#22C55E]":"bg-[rgba(239,68,68,0.2)] text-[#EF4444]"}`,children:L.isActive?"Active":"Inactive"})}),t.jsxs("td",{className:"p-4",children:[t.jsx("button",{onClick:()=>k(L),className:"px-3 py-1.5 bg-[rgba(59,130,246,0.2)] text-[#3B82F6] border border-[rgba(59,130,246,0.3)] rounded-md cursor-pointer text-xs font-semibold mr-2 hover:bg-[rgba(59,130,246,0.3)] transition-colors",children:"Edit"}),t.jsx("button",{onClick:()=>A(L._id),className:"px-3 py-1.5 bg-[rgba(239,68,68,0.2)] text-[#EF4444] border border-[rgba(239,68,68,0.3)] rounded-md cursor-pointer text-xs font-semibold hover:bg-[rgba(239,68,68,0.3)] transition-colors",children:"Delete"})]})]},L._id))})]}),U>1&&t.jsxs("div",{className:"flex justify-center items-center gap-2.5 mt-5",children:[t.jsx("button",{onClick:()=>y(L=>Math.max(1,L-1)),disabled:f===1,style:{padding:"8px 16px",background:f===1?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:f===1?e.text.muted:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:f===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:e.text.secondary,fontSize:"13px",fontWeight:600},children:["Page ",f," of ",U]}),t.jsx("button",{onClick:()=>y(L=>Math.min(U,L+1)),disabled:f===U,style:{padding:"8px 16px",background:f===U?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:f===U?e.text.muted:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:f===U?"not-allowed":"pointer"},children:"Next "})]})]})}),o&&t.jsx("div",{onClick:()=>{i(!1),w()},style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:t.jsxs("div",{onClick:L=>L.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,width:"90%",maxWidth:"700px",maxHeight:"85vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:e.accent.primary,margin:0},children:c?"Edit Route":"Add New Route"}),t.jsx("button",{onClick:()=>{i(!1),w()},style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),t.jsx("div",{style:{padding:"24px",paddingBottom:"16px"},children:t.jsxs("div",{style:{marginBottom:"8px"},children:[!c&&t.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3,4].map(L=>t.jsx("div",{style:{background:L<=d?e.accent.primary:a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"},className:"flex-1 h-1 rounded-sm transition-all duration-300"},L))}),t.jsx("div",{style:{color:e.text.secondary},className:"text-[13px]",children:!c&&t.jsxs(t.Fragment,{children:[d===1&&"Step 1 of 4: Set Starting Point",d===2&&"Step 2 of 4: Set Destination",d===3&&"Step 3 of 4: Route Details",d===4&&"Step 4 of 4: Review & Confirm"]})})]})}),d===1&&!c&&t.jsx("div",{style:{padding:"0 24px 24px 24px"},children:R?t.jsx(Bx,{location:g,onLocationChange:j,onConfirm:L=>{j(L),u(2)},pointLabel:"A",pointColor:"green",apiKey:V}):t.jsx("div",{className:"text-center py-8",style:{color:e.text.secondary},children:"Loading Google Maps..."})}),d===2&&!c&&t.jsx("div",{style:{padding:"0 24px 24px 24px"},children:R?t.jsxs(t.Fragment,{children:[t.jsx(Bx,{location:C,onLocationChange:T,onConfirm:L=>{T(L),u(3)},pointLabel:"B",pointColor:"red",apiKey:V}),t.jsx("button",{onClick:()=>u(1),style:{width:"100%",padding:"12px 16px",background:"transparent",color:e.text.primary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",cursor:"pointer",fontWeight:600,marginTop:"12px",transition:"all 0.2s"},children:" Back to Point A"})]}):t.jsx("div",{className:"text-center py-8",style:{color:e.text.secondary},children:"Loading Google Maps..."})}),d===3&&t.jsxs("div",{style:{padding:"0 24px 24px 24px"},children:[t.jsxs("div",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",border:`1px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"12px",padding:"16px",marginBottom:"24px"},children:[t.jsx("div",{style:{fontSize:"13px",color:e.text.secondary,marginBottom:"12px"},children:"Selected Route:"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-[11px] text-[#22C55E] mb-1",children:" FROM"}),t.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:g.displayName||g.name})]}),t.jsx("div",{style:{fontSize:"20px",color:e.accent.primary},children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-[11px] text-[#EF4444] mb-1",children:" TO"}),t.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:C.displayName||C.name})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Fare () *"}),t.jsx("input",{type:"number",value:E,onChange:L=>D(L.target.value),min:"0",step:"0.01",style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:a?"rgba(251,251,251,0.05)":"#FFFFFF",color:e.text.primary,fontSize:"14px",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Status"}),t.jsxs("select",{value:I?"true":"false",onChange:L=>z(L.target.value==="true"),style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:a?"rgba(251,251,251,0.05)":"#FFFFFF",color:e.text.primary,fontSize:"14px",boxSizing:"border-box"},children:[t.jsx("option",{value:"true",children:"Active"}),t.jsx("option",{value:"false",children:"Inactive"})]})]})]}),!c&&t.jsx("div",{style:{marginBottom:"24px"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",padding:"14px",background:a?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.08)",border:`1px solid ${a?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)"}`,borderRadius:"8px"},children:[t.jsx("input",{type:"checkbox",checked:Y,onChange:L=>_(L.target.checked),style:{width:"20px",height:"20px",cursor:"pointer"}}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{color:e.text.primary,fontSize:"14px",fontWeight:600,marginBottom:"4px"},children:" Create Reverse Route"}),t.jsxs("div",{style:{fontSize:"12px",color:e.text.secondary},children:["Automatically create: ",C.displayName||C.name||"Point B","  ",g.displayName||g.name||"Point A"]})]})]})}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[!c&&t.jsx("button",{onClick:()=>u(2),style:{flex:1,padding:"12px",background:"transparent",color:e.text.primary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",cursor:"pointer",fontWeight:600,transition:"all 0.2s"},children:" Back"}),t.jsx("button",{onClick:()=>{c?N():u(4)},style:{flex:1,padding:"12px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,boxShadow:a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.2s"},children:c?"Update Route":"Review "})]})]}),d===4&&!c&&t.jsxs("div",{style:{padding:"0 24px 24px 24px"},children:[t.jsxs("div",{style:{background:a?"rgba(255,212,28,0.05)":"rgba(59,130,246,0.05)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[t.jsx("h4",{style:{margin:"0 0 20px 0",color:e.accent.primary,fontSize:"18px"},children:" Route Summary"}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("div",{style:{fontSize:"12px",color:e.text.secondary,marginBottom:"8px"},children:"Main Route:"}),t.jsxs("div",{style:{background:a?"rgba(251,251,251,0.05)":"rgba(0,0,0,0.03)",padding:"16px",borderRadius:"8px",marginBottom:"12px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:"11px",color:"#22C55E",marginBottom:"4px"},children:" FROM"}),t.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:g.displayName||g.name})]}),t.jsx("div",{style:{fontSize:"20px",color:e.accent.primary},children:""}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:"11px",color:"#EF4444",marginBottom:"4px"},children:" TO"}),t.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:C.displayName||C.name})]})]}),t.jsxs("div",{style:{paddingTop:"12px",borderTop:`1px solid ${e.border.secondary}`,display:"flex",justifyContent:"space-between",fontSize:"13px"},children:[t.jsxs("div",{style:{color:e.text.secondary},children:["Fare: ",t.jsxs("span",{style:{color:e.accent.primary,fontWeight:600},children:["",E]})]}),t.jsxs("div",{style:{color:e.text.secondary},children:["Status: ",t.jsx("span",{style:{color:I?"#22C55E":e.text.muted,fontWeight:600},children:I?"Active":"Inactive"})]})]})]})]}),Y&&t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"12px",color:e.text.secondary,marginBottom:"8px"},children:"Reverse Route (Auto-created):"}),t.jsxs("div",{style:{background:a?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.08)",padding:"16px",borderRadius:"8px",border:`1px solid ${a?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:"11px",color:"#EF4444",marginBottom:"4px"},children:" FROM"}),t.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:C.displayName||C.name})]}),t.jsx("div",{style:{fontSize:"20px",color:"#3B82F6"},children:""}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:"11px",color:"#22C55E",marginBottom:"4px"},children:" TO"}),t.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:g.displayName||g.name})]})]}),t.jsxs("div",{style:{paddingTop:"12px",borderTop:"1px solid rgba(59,130,246,0.2)",display:"flex",justifyContent:"space-between",fontSize:"13px"},children:[t.jsxs("div",{style:{color:e.text.secondary},children:["Fare: ",t.jsxs("span",{style:{color:"#3B82F6",fontWeight:600},children:["",E]})]}),t.jsxs("div",{style:{color:e.text.secondary},children:["Status: ",t.jsx("span",{style:{color:I?"#22C55E":e.text.muted,fontWeight:600},children:I?"Active":"Inactive"})]})]})]})]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:()=>u(3),style:{flex:1,padding:"12px",background:"transparent",color:e.text.primary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",cursor:"pointer",fontWeight:600,transition:"all 0.2s"},children:" Back to Edit"}),t.jsx("button",{onClick:N,style:{flex:1,padding:"12px",background:"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"15px",boxShadow:"0 4px 12px rgba(34,197,94,0.4)",transition:"all 0.2s"},children:Y?" Create Both Routes":" Create Route"})]})]})]})}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function kv(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(!1),[d,u]=p.useState(null),[c,x]=p.useState(null),[m,h]=p.useState(""),[v,S]=p.useState(!1),[f,y]=p.useState(1),b=20,[g,j]=p.useState({driverId:"",firstName:"",lastName:"",middleInitial:"",email:"",password:"",shuttleId:"",licenseNumber:"",licenseExpiry:""}),C=async()=>{try{const w=await Z.get("/admin/drivers");s(w),l(!1)}catch(w){console.error("Error loading drivers:",w),x({type:"error",message:"Failed to load drivers"}),l(!1)}};p.useEffect(()=>{C();const w=setInterval(C,5e3);return()=>clearInterval(w)},[]);const T=()=>{if(r.length===0)return"DRV001";let w=0;for(const k of r)if(k.driverId){const A=k.driverId.match(/DRV(\d+)/i);if(A){const O=parseInt(A[1],10);O>w&&(w=O)}}return`DRV${String(w+1).padStart(3,"0")}`},E=()=>{u(null),j({driverId:T(),firstName:"",lastName:"",middleInitial:"",email:"",password:"",shuttleId:"",licenseNumber:"",licenseExpiry:""}),i(!0)},D=w=>{u(w),j({driverId:w.driverId,firstName:w.firstName,lastName:w.lastName,middleInitial:w.middleInitial||"",email:w.email,password:"",shuttleId:w.shuttleId||"",licenseNumber:w.licenseNumber||"",licenseExpiry:w.licenseExpiry?w.licenseExpiry.split("T")[0]:""}),i(!0)},I=async w=>{var A,O,q,U,H,J;if(w.preventDefault(),!g.firstName||g.firstName.trim().length===0){x({type:"error",message:"First name is required"});return}if(!g.lastName||g.lastName.trim().length===0){x({type:"error",message:"Last name is required"});return}const k=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!g.email||!k.test(g.email.trim())){x({type:"error",message:"Please enter a valid email address"});return}if(g.password&&!/^\d{6}$/.test(g.password)){x({type:"error",message:"PIN must be exactly 6 digits"});return}if(!d&&(!g.licenseNumber||g.licenseNumber.trim().length===0)){x({type:"error",message:"License number is required"});return}if(!d&&(!g.licenseExpiry||g.licenseExpiry.trim().length===0)){x({type:"error",message:"License expiry date is required"});return}if(g.licenseExpiry){const ee=new Date(g.licenseExpiry),L=new Date;if(L.setHours(0,0,0,0),ee<L){x({type:"error",message:"License expiry date cannot be in the past"});return}}S(!0);try{if(d){const ee={...g};ee.password||delete ee.password,await Z.put(`/admin/drivers/${d._id}`,ee),x({type:"success",message:"Driver updated successfully!"})}else{if(!g.password){x({type:"error",message:"PIN is required for new drivers"}),S(!1);return}await Z.post("/admin/drivers",g),x({type:"success",message:"Driver created successfully!"})}i(!1),C(),setTimeout(()=>x(null),3e3)}catch(ee){console.error("Error saving driver:",ee);let L="Failed to save driver";((A=ee.response)==null?void 0:A.status)===409?L="Email already exists. Please use a different email.":((O=ee.response)==null?void 0:O.status)===400?L=((U=(q=ee.response)==null?void 0:q.data)==null?void 0:U.error)||"Invalid driver data. Please check all fields.":((H=ee.response)==null?void 0:H.status)===500?L="Server error. Please try again later.":(J=ee.message)!=null&&J.includes("Network")&&(L="Network error. Please check your connection."),x({type:"error",message:L})}finally{S(!1)}},z=async w=>{if(window.confirm(`Delete driver ${w.fullName}? This cannot be undone.`))try{await Z.delete(`/admin/drivers/${w._id}`),x({type:"success",message:"Driver deleted successfully!"}),C(),setTimeout(()=>x(null),3e3)}catch(k){console.error("Error deleting driver:",k),x({type:"error",message:"Failed to delete driver"})}},Y=async(w,k)=>{try{await Z.put(`/admin/drivers/${w._id}`,{isActive:k==="active"}),x({type:"success",message:"Status updated!"}),C(),setTimeout(()=>x(null),2e3)}catch(A){console.error("Error updating status:",A),x({type:"error",message:"Failed to update status"})}},_=w=>{const{name:k,value:A}=w.target;if(k==="password"){const O=A.replace(/\D/g,"").slice(0,6);j(q=>({...q,[k]:O}))}else j(O=>({...O,[k]:A}))},V=()=>{const w=Jr(R);zt(w,"drivers")},R=r.filter(w=>{var O,q,U,H,J;if(!m)return!0;const k=m.toLowerCase(),A=`${w.firstName} ${w.lastName}`.toLowerCase();return((O=w.driverId)==null?void 0:O.toLowerCase().includes(k))||((q=w.firstName)==null?void 0:q.toLowerCase().includes(k))||((U=w.lastName)==null?void 0:U.toLowerCase().includes(k))||A.includes(k)||((H=w.email)==null?void 0:H.toLowerCase().includes(k))||((J=w.shuttleId)==null?void 0:J.toLowerCase().includes(k))}),B=Math.ceil(R.length/b),F=(f-1)*b,$=F+b,N=R.slice(F,$);return p.useEffect(()=>{y(1)},[m]),n?t.jsx("div",{className:"text-center py-[60px]",style:{color:e.accent.primary},children:"Loading drivers..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[c&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:c.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:c.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${c.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4,animation:"fadeIn 0.3s ease"},children:c.message}),t.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("div",{className:"flex justify-between items-center mb-5",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[t.jsx("span",{children:""})," Driver Management"]}),t.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:R.length>0?`Showing ${F+1}-${Math.min($,R.length)} of ${R.length}  Page ${f} of ${B}`:`Total: ${r.length} drivers`})]}),t.jsx("button",{onClick:E,style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.3s"},children:"+ Add Driver"})]}),t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsx(Ht,{value:m,onChange:h,placeholder:"Search by name, ID, email, or shuttle..."}),t.jsx(qt,{onClick:V,disabled:R.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:R.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{children:m?"No drivers match your search":"No drivers found"}),m&&t.jsx("button",{onClick:()=>h(""),style:{marginTop:"16px",padding:"8px 16px",background:a?"rgba(255, 212, 28, 0.15)":"rgba(59, 130, 246, 0.15)",border:`2px solid ${a?"rgba(255, 212, 28, 0.4)":"rgba(59, 130, 246, 0.4)"}`,borderRadius:"8px",color:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):t.jsxs("div",{className:"overflow-x-auto rounded-xl",style:{border:`1px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Driver ID"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Name"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Email"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Shuttle"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Status"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Actions"})]})}),t.jsx("tbody",{children:N.map(w=>t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:t.jsx("strong",{children:w.driverId})}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:w.fullName||`${w.firstName} ${w.lastName}`}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:w.email}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:w.shuttleId||"None"}),t.jsx("td",{style:{padding:"16px"},children:t.jsxs("select",{value:w.isActive?"active":"inactive",onChange:k=>Y(w,k.target.value),style:{padding:"6px 12px",borderRadius:"6px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",border:"none",cursor:"pointer",background:w.isActive?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:w.isActive?"#22C55E":"#EF4444"},children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]})}),t.jsxs("td",{style:{padding:"16px"},children:[t.jsx("button",{onClick:()=>D(w),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",marginRight:"8px"},children:"Edit"}),t.jsx("button",{onClick:()=>z(w),style:{padding:"6px 12px",background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Delete"})]})]},w._id))})]}),B>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[t.jsx("button",{onClick:()=>y(w=>Math.max(1,w-1)),disabled:f===1,style:{padding:"8px 16px",background:f===1?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:f===1?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:f===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",f," of ",B]}),t.jsx("button",{onClick:()=>y(w=>Math.min(B,w+1)),disabled:f===B,style:{padding:"8px 16px",background:f===B?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:f===B?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:f===B?"not-allowed":"pointer"},children:"Next "})]})]})}),o&&t.jsx("div",{onClick:()=>i(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:t.jsxs("div",{onClick:w=>w.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:e.accent.primary,margin:0},children:d?"Edit Driver":"Add New Driver"}),t.jsx("button",{onClick:()=>i(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),t.jsxs("form",{onSubmit:I,style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["Driver ID ",!d&&t.jsx("span",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontWeight:400},children:"(Auto-generated)"})]}),t.jsx("input",{type:"text",name:"driverId",value:g.driverId,disabled:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"8px",background:"rgba(100,100,100,0.2)",color:"rgba(251,251,251,0.5)",fontSize:"14px",boxSizing:"border-box",cursor:"not-allowed"}})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 80px",gap:"20px",marginBottom:"20px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"First Name *"}),t.jsx("input",{type:"text",name:"firstName",value:g.firstName,onChange:_,required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Last Name *"}),t.jsx("input",{type:"text",name:"lastName",value:g.lastName,onChange:_,required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"M.I."}),t.jsx("input",{type:"text",name:"middleInitial",value:g.middleInitial,onChange:_,maxLength:"1",style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",textAlign:"center",textTransform:"uppercase"}})]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Email *"}),t.jsx("input",{type:"email",name:"email",value:g.email,onChange:_,required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["6-Digit PIN ",d&&t.jsx("span",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontWeight:400},children:"(leave blank to keep current)"})]}),t.jsx("input",{type:"text",name:"password",value:g.password,onChange:_,required:!d,maxLength:"6",placeholder:"123456",pattern:"\\d{6}",style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"18px",boxSizing:"border-box",letterSpacing:"8px",textAlign:"center",fontWeight:700}}),t.jsx("p",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginTop:"8px",marginBottom:0},children:"Numbers only, exactly 6 digits"})]}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["Driver's License Number ",t.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),t.jsx("input",{type:"text",name:"licenseNumber",value:g.licenseNumber,onChange:_,placeholder:"e.g., N12-34-567890",required:!d,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["License Expiry Date ",t.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),t.jsx("input",{type:"date",name:"licenseExpiry",value:g.licenseExpiry,onChange:_,required:!d,min:new Date().toISOString().split("T")[0],style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",colorScheme:"dark"}})]}),t.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",paddingTop:"20px",borderTop:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsx("button",{type:"button",onClick:()=>i(!1),style:{padding:"12px 24px",background:"rgba(251,251,251,0.1)",color:"rgba(251,251,251,0.7)",border:"1px solid rgba(251,251,251,0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:v,style:{padding:"12px 24px",background:v?"#CCCCCC":e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:v?"not-allowed":"pointer",boxShadow:v?"none":a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",opacity:v?.6:1},children:v?"Saving...":d?"Update Driver":"Create Driver"})]})]})]})}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from { 
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to { 
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}function aa({value:e,onChange:a,options:r,label:s="Status"}){return t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",minWidth:"150px"},children:[t.jsx("label",{style:{fontSize:"11px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:s}),t.jsxs("select",{value:e,onChange:n=>a(n.target.value),style:{padding:"10px 12px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease",outline:"none"},children:[t.jsx("option",{value:"",children:"All"}),r.map(n=>t.jsx("option",{value:n.value,children:n.label},n.value))]})]})}function Fv(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(!1),[d,u]=p.useState(null),[c,x]=p.useState(null),[m,h]=p.useState(""),[v,S]=p.useState(""),[f,y]=p.useState(1),b=20,[g,j]=p.useState({shuttleId:"",vehicleType:"",vehicleModel:"",plateNumber:"",capacity:15}),C=async()=>{try{const N=await Z.get("/admin/shuttles");s(Array.isArray(N)?N:[]),l(!1)}catch(N){console.error("Error loading shuttles:",N),l(!1)}};p.useEffect(()=>{C();const N=setInterval(C,2e3);return()=>clearInterval(N)},[]);const T=()=>{if(r.length===0)return"SHUTTLE_001";let N=0;for(const w of r)if(w.shuttleId){const k=w.shuttleId.match(/SHUTTLE_(\d+)/i);if(k){const A=parseInt(k[1],10);A>N&&(N=A)}}return`SHUTTLE_${String(N+1).padStart(3,"0")}`},E=async N=>{var w,k;N.preventDefault();try{if(d)await Z.put(`/admin/shuttles/${d._id}`,g),x({type:"success",message:"Shuttle updated successfully!"});else{const A=T();await Z.post("/admin/shuttles",{...g,shuttleId:A}),x({type:"success",message:"Shuttle created successfully!"})}i(!1),u(null),Y(),C(),setTimeout(()=>x(null),3e3)}catch(A){x({type:"error",message:((k=(w=A.response)==null?void 0:w.data)==null?void 0:k.error)||"Failed to save shuttle"})}},D=N=>{u(N),j({shuttleId:N.shuttleId,vehicleType:N.vehicleType,vehicleModel:N.vehicleModel,plateNumber:N.plateNumber||"",capacity:N.capacity||15}),i(!0)},I=async N=>{var w,k;if(window.confirm("Are you sure you want to delete this shuttle?"))try{await Z.delete(`/admin/shuttles/${N}`),x({type:"success",message:"Shuttle deleted successfully!"}),C(),setTimeout(()=>x(null),3e3)}catch(A){x({type:"error",message:((k=(w=A.response)==null?void 0:w.data)==null?void 0:k.error)||"Failed to delete shuttle"})}},z=async(N,w)=>{try{await Z.put(`/admin/shuttles/${N._id}`,{...N,status:w}),x({type:"success",message:"Status updated!"}),C(),setTimeout(()=>x(null),2e3)}catch{x({type:"error",message:"Failed to update status"})}},Y=()=>{j({shuttleId:"",vehicleType:"",vehicleModel:"",plateNumber:"",capacity:15})},_=()=>{const N=Jr(V);zt(N,"shuttles")},V=r.filter(N=>{var w,k,A,O,q,U;if(m){const H=m.toLowerCase();if(!(((w=N.shuttleId)==null?void 0:w.toLowerCase().includes(H))||((k=N.vehicleType)==null?void 0:k.toLowerCase().includes(H))||((A=N.vehicleModel)==null?void 0:A.toLowerCase().includes(H))||((O=N.plateNumber)==null?void 0:O.toLowerCase().includes(H))||((q=N.status)==null?void 0:q.toLowerCase().includes(H))||((U=N.currentDriver)==null?void 0:U.toLowerCase().includes(H))))return!1}return!(v&&N.status!==v)}),R=Math.ceil(V.length/b),B=(f-1)*b,F=B+b,$=V.slice(B,F);return p.useEffect(()=>{y(1)},[m,v]),n?t.jsx("div",{className:"text-center py-[60px]",style:{color:e.accent.primary},children:"Loading shuttles..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[c&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:c.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:c.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${c.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4,animation:"fadeIn 0.3s ease"},children:c.message}),t.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[t.jsx("span",{children:""})," Fleet Management"]}),t.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:V.length>0?`Showing ${B+1}-${Math.min(F,V.length)} of ${V.length}  Page ${f} of ${R}`:`Total shuttles: ${r.length}`})]}),t.jsx("button",{onClick:()=>{Y(),u(null),i(!0)},style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.3s"},children:"+ Add Shuttle"})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[t.jsx(Ht,{value:m,onChange:h,placeholder:"Search by ID, vehicle, plate, status, or driver..."}),t.jsx(aa,{value:v,onChange:S,label:"Status",options:[{value:"available",label:"Available"},{value:"reserved",label:"Reserved"},{value:"taken",label:"Taken"},{value:"unavailable",label:"Unavailable"}]}),t.jsx(qt,{onClick:_,disabled:V.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:r.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{children:"No shuttles found"})]}):V.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{style:{marginBottom:"12px"},children:"No shuttles match your search"}),t.jsx("button",{onClick:()=>h(""),style:{padding:"8px 16px",background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):t.jsxs("div",{className:"overflow-x-auto rounded-xl",style:{border:`1px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Shuttle ID"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Vehicle"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Plate"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Capacity"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Status"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Current Driver"}),t.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:e.accent.primary,textTransform:"uppercase",borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Actions"})]})}),t.jsx("tbody",{children:$.map(N=>t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:t.jsx("strong",{children:N.shuttleId})}),t.jsxs("td",{style:{padding:"16px",color:e.text.primary},children:[N.vehicleType," ",N.vehicleModel]}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:N.plateNumber||"N/A"}),t.jsxs("td",{style:{padding:"16px",color:e.text.primary},children:[N.capacity," pax"]}),t.jsx("td",{style:{padding:"16px"},children:t.jsxs("select",{value:N.status,onChange:w=>z(N,w.target.value),style:{padding:"6px 12px",borderRadius:"6px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",border:"none",cursor:"pointer",background:N.status==="available"?"rgba(34,197,94,0.2)":N.status==="reserved"?"rgba(59,130,246,0.2)":N.status==="taken"?"rgba(251,191,36,0.2)":"rgba(239,68,68,0.2)",color:N.status==="available"?"#22C55E":N.status==="reserved"?"#3B82F6":N.status==="taken"?a?"#FBBF24":"#F59E0B":"#EF4444"},children:[t.jsx("option",{value:"available",children:"Available"}),t.jsx("option",{value:"reserved",children:"Reserved"}),t.jsx("option",{value:"taken",children:"Taken"}),t.jsx("option",{value:"unavailable",children:"Unavailable"})]})}),t.jsx("td",{style:{padding:"16px",color:e.text.secondary,fontSize:"12px"},children:N.currentDriver||""}),t.jsxs("td",{style:{padding:"16px",textAlign:"right"},children:[t.jsx("button",{onClick:()=>D(N),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",marginRight:"8px"},children:"Edit"}),t.jsx("button",{onClick:()=>I(N._id),style:{padding:"6px 12px",background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Delete"})]})]},N._id))})]}),R>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[t.jsx("button",{onClick:()=>y(N=>Math.max(1,N-1)),disabled:f===1,style:{padding:"8px 16px",background:f===1?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:f===1?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:f===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",f," of ",R]}),t.jsx("button",{onClick:()=>y(N=>Math.min(R,N+1)),disabled:f===R,style:{padding:"8px 16px",background:f===R?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:f===R?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:f===R?"not-allowed":"pointer"},children:"Next "})]})]})}),o&&t.jsx("div",{onClick:()=>i(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:t.jsxs("div",{onClick:N=>N.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:e.accent.primary,margin:0},children:d?"Edit Shuttle":"Add New Shuttle"}),t.jsx("button",{onClick:()=>i(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),t.jsxs("form",{onSubmit:E,style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["Shuttle ID ",!d&&t.jsx("span",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontWeight:400},children:"(Auto-generated)"})]}),t.jsx("input",{type:"text",value:d?g.shuttleId:T(),disabled:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"8px",background:"rgba(100,100,100,0.2)",color:"rgba(251,251,251,0.5)",fontSize:"14px",boxSizing:"border-box",cursor:"not-allowed"}})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Vehicle Type *"}),t.jsx("input",{type:"text",value:g.vehicleType,onChange:N=>j({...g,vehicleType:N.target.value}),required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"},placeholder:"e.g., Isuzu, Toyota"})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Vehicle Model *"}),t.jsx("input",{type:"text",value:g.vehicleModel,onChange:N=>j({...g,vehicleModel:N.target.value}),required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"},placeholder:"e.g., Traviz, Hiace"})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Plate Number"}),t.jsx("input",{type:"text",value:g.plateNumber,onChange:N=>j({...g,plateNumber:N.target.value}),style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"},placeholder:"e.g., ABC 1234"})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Capacity *"}),t.jsx("input",{type:"number",value:g.capacity,onChange:N=>j({...g,capacity:parseInt(N.target.value)}),required:!0,min:"1",style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",paddingTop:"20px",borderTop:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsx("button",{type:"button",onClick:()=>i(!1),style:{padding:"12px 24px",background:"rgba(251,251,251,0.1)",color:"rgba(251,251,251,0.7)",border:"1px solid rgba(251,251,251,0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},children:d?"Update Shuttle":"Create Shuttle"})]})]})]})}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from { 
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to { 
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}function yr({startDate:e,endDate:a,onStartChange:r,onEndChange:s}){return t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t.jsx("label",{style:{fontSize:"11px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"From"}),t.jsx("input",{type:"date",value:e,onChange:n=>r(n.target.value),style:{padding:"10px 12px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease",outline:"none"}})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t.jsx("label",{style:{fontSize:"11px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"To"}),t.jsx("input",{type:"date",value:a,onChange:n=>s(n.target.value),style:{padding:"10px 12px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease",outline:"none"}})]}),(e||a)&&t.jsx("button",{onClick:()=>{r(""),s("")},style:{padding:"10px 16px",background:"rgba(239, 68, 68, 0.2)",border:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"10px",color:"#EF4444",fontSize:"13px",fontWeight:600,cursor:"pointer",whiteSpace:"nowrap"},children:"Clear Dates"})]})}function Tv({trip:e,onClose:a,onUpdate:r}){const s=p.useRef(null),n=p.useRef(null),[l,o]=p.useState(""),[i,d]=p.useState(!1),[u,c]=p.useState(e);p.useEffect(()=>{c(e)},[e]),p.useEffect(()=>{if(!u||!s.current||n.current)return;const S=()=>{window.google&&window.google.maps?f():window.googleMapsLoadingPromise?window.googleMapsLoadingPromise.then(()=>{window.google&&window.google.maps&&f()}).catch(y=>{console.error("Failed to load Google Maps:",y)}):console.warn("Google Maps is not available. Please ensure Dashboard loaded first.")},f=()=>{if(!s.current||n.current)return;const y=new window.google.maps.LatLngBounds,b={lat:u.startLatitude,lng:u.startLongitude},g={lat:u.endLatitude,lng:u.endLongitude};y.extend(b),y.extend(g),n.current=new window.google.maps.Map(s.current,{center:y.getCenter(),zoom:14,styles:[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]}],disableDefaultUI:!0,zoomControl:!0}),new window.google.maps.Marker({position:b,map:n.current,title:u.startLocationName||"Start Location",icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#22C55E",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2},label:{text:"",fontSize:"16px"}}),new window.google.maps.Marker({position:g,map:n.current,title:u.endLocationName||"End Location",icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#EF4444",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2},label:{text:"",fontSize:"16px"}}),new window.google.maps.Polyline({path:[b,g],geodesic:!0,strokeColor:"#FFD41C",strokeOpacity:.8,strokeWeight:4,map:n.current}),n.current.fitBounds(y)};return S(),()=>{n.current&&(n.current=null)}},[u]);const x=async()=>{if(l.trim()){d(!0);try{const S=JSON.parse(localStorage.getItem("adminData")||"{}"),f=await Z.post(`/admin/trips/${u._id}/notes`,{content:l,adminId:S._id||"unknown",adminName:S.name||"Admin"});f.trip&&(c(f.trip),o(""),r&&r(f.trip))}catch(S){console.error("Error adding note:",S),alert("Failed to add note. Please try again.")}finally{d(!1)}}};if(!u)return null;const h=(S=>{switch(S){case"completed":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"in_progress":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"cancelled":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};default:return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"}}})(u.status),v=S=>{if(!S)return"N/A";const f=Math.floor(S/60),y=S%60;return f>0?`${f}h ${y}m`:`${y}m`};return t.jsxs("div",{onClick:a,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{onClick:S=>S.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"800px",width:"90%",maxHeight:"85vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#FFD41C",margin:0},children:"Trip Details"}),t.jsx("span",{style:{fontSize:"16px",color:"#FFD41C",fontWeight:700,fontFamily:"monospace",background:"rgba(255,212,28,0.15)",padding:"4px 12px",borderRadius:"6px"},children:u.tripId||`#${u._id.slice(-8)}`})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[t.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:h.bg,color:h.color},children:u.status}),u.status==="in_progress"&&t.jsxs("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:"rgba(251,191,36,0.2)",color:"#FBBF24",display:"flex",alignItems:"center",gap:"4px"},children:[t.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#FBBF24",animation:"pulse 2s infinite"}}),"ACTIVE"]})]})]}),t.jsx("button",{onClick:a,style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",border:"1px solid rgba(255,212,28,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"Trip Information"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Shuttle ID"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:u.shuttleId})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Driver"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:u.driverName||u.driverId})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Route ID"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:u.routeId})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Distance Traveled"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:u.distanceTraveledKm?`${u.distanceTraveledKm} km`:"N/A"})]})]})]}),t.jsxs("div",{style:{background:"rgba(59,130,246,0.05)",border:"1px solid rgba(59,130,246,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#3B82F6",textTransform:"uppercase",marginBottom:"12px"},children:"Timing"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Departure Time"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:new Date(u.departureTime).toLocaleString()})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Arrival Time"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:u.arrivalTime?new Date(u.arrivalTime).toLocaleString():"In Progress"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Duration"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:v(u.durationMinutes)})]})]})]}),t.jsxs("div",{style:{background:"rgba(168,85,247,0.05)",border:"1px solid rgba(168,85,247,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#A855F7",textTransform:"uppercase",marginBottom:"12px"},children:"Route Details"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"12px",color:"#A855F7",marginBottom:"8px",fontWeight:600},children:" Start Location"}),t.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.9)",marginBottom:"4px",fontWeight:600},children:u.startLocationName||"Unknown Location"}),t.jsxs("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontFamily:"monospace"},children:[u.startLatitude.toFixed(6),", ",u.startLongitude.toFixed(6)]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"12px",color:"#A855F7",marginBottom:"8px",fontWeight:600},children:" End Location"}),t.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.9)",marginBottom:"4px",fontWeight:600},children:u.endLocationName||"Unknown Location"}),t.jsxs("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontFamily:"monospace"},children:[u.endLatitude.toFixed(6),", ",u.endLongitude.toFixed(6)]})]})]}),t.jsxs("div",{style:{marginTop:"16px"},children:[t.jsx("div",{style:{fontSize:"12px",color:"#A855F7",marginBottom:"8px",fontWeight:600},children:" Route Map"}),t.jsx("div",{ref:s,style:{width:"100%",height:"300px",borderRadius:"8px",border:"2px solid rgba(168,85,247,0.3)",overflow:"hidden"}})]})]}),t.jsxs("div",{style:{background:"rgba(34,197,94,0.05)",border:"1px solid rgba(34,197,94,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#22C55E",textTransform:"uppercase",marginBottom:"12px"},children:"Trip Statistics"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Total Passengers"}),t.jsx("div",{style:{fontSize:"24px",color:"#22C55E",fontWeight:700},children:u.passengerCount||0})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Total Collections"}),t.jsxs("div",{style:{fontSize:"24px",color:"#22C55E",fontWeight:700},children:["",(u.totalCollections||0).toLocaleString()]})]})]})]}),t.jsxs("div",{style:{background:"rgba(251,191,36,0.05)",border:"1px solid rgba(251,191,36,0.2)",borderRadius:"12px",padding:"16px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FBBF24",textTransform:"uppercase",marginBottom:"12px"},children:" Admin Notes"}),u.notes&&u.notes.length>0?t.jsx("div",{style:{marginBottom:"16px",maxHeight:"200px",overflowY:"auto"},children:u.notes.sort((S,f)=>new Date(f.timestamp)-new Date(S.timestamp)).map((S,f)=>t.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"8px",padding:"12px",marginBottom:"8px",border:"1px solid rgba(251,191,36,0.1)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[t.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"#FBBF24"},children:S.adminName||"Admin"}),t.jsx("div",{style:{fontSize:"10px",color:"rgba(251,251,251,0.5)"},children:new Date(S.timestamp).toLocaleString()})]}),t.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.8)",lineHeight:"1.5"},children:S.content})]},f))}):t.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.5)",marginBottom:"16px",textAlign:"center",padding:"20px"},children:"No notes yet. Add the first note below."}),t.jsxs("div",{children:[t.jsx("textarea",{value:l,onChange:S=>o(S.target.value),placeholder:"Add a note about this trip...",style:{width:"100%",minHeight:"80px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(251,191,36,0.3)",borderRadius:"8px",padding:"12px",color:"#FBFBFB",fontSize:"13px",fontFamily:"inherit",resize:"vertical",marginBottom:"12px"}}),t.jsx("button",{onClick:x,disabled:!l.trim()||i,style:{padding:"10px 20px",background:l.trim()&&!i?"#FBBF24":"rgba(251,191,36,0.3)",color:l.trim()&&!i?"#181D40":"rgba(251,251,251,0.5)",border:"none",borderRadius:"8px",fontSize:"13px",fontWeight:700,cursor:l.trim()&&!i?"pointer":"not-allowed",width:"100%"},children:i?"Adding Note...":"Add Note"})]})]})]}),t.jsx("div",{style:{padding:"20px 24px",borderTop:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{onClick:a,style:{padding:"12px 24px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:"0 4px 12px rgba(255,212,28,0.4)"},children:"Close"})})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
        @keyframes pulse {
          0% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.5; transform: scale(1.2); }
          100% { opacity: 1; transform: scale(1); }
        }
      `})]})}function Ev(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(""),[d,u]=p.useState(""),[c,x]=p.useState(""),[m,h]=p.useState(""),[v,S]=p.useState(null),[f,y]=p.useState(1),b=20,g=async()=>{try{const _=await Z.get("/admin/trips");s(_||[]),l(!1)}catch(_){console.error("Error loading trips:",_),l(!1)}};p.useEffect(()=>{g();const _=setInterval(g,5e3);return()=>clearInterval(_)},[]);const j=()=>{const _=Jr(C);zt(_,"trips")},C=r.filter(_=>{var V,R,B,F,$,N,w;if(o){const k=o.toLowerCase();if(!(((V=_._id)==null?void 0:V.toLowerCase().includes(k))||((R=_.shuttleId)==null?void 0:R.toLowerCase().includes(k))||((B=_.driverId)==null?void 0:B.toLowerCase().includes(k))||((F=_.routeId)==null?void 0:F.toLowerCase().includes(k))||(($=_.startLocationName)==null?void 0:$.toLowerCase().includes(k))||((N=_.endLocationName)==null?void 0:N.toLowerCase().includes(k))||((w=_.status)==null?void 0:w.toLowerCase().includes(k))))return!1}if(d&&_.status!==d)return!1;if(c||m){const k=new Date(_.departureTime);if(c&&k<new Date(c)||m&&k>new Date(m+"T23:59:59"))return!1}return!0}),T=Math.ceil(C.length/b),E=(f-1)*b,D=E+b,I=C.slice(E,D);p.useEffect(()=>{y(1)},[o,d,c,m]);const z=_=>{switch(_){case"completed":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"in_progress":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"cancelled":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};default:return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"}}},Y=_=>{if(!_)return"N/A";const V=Math.floor(_/60),R=_%60;return V>0?`${V}h ${R}m`:`${R}m`};return n?t.jsx("div",{className:"text-center py-[60px]",style:{color:e.accent.primary},children:"Loading trips..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[t.jsx("span",{children:""})," Trip Management"]}),t.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:C.length>0?`Showing ${E+1}-${Math.min(D,C.length)} of ${C.length}  Page ${f} of ${T}`:`Track all shuttle trips  Total: ${r.length}`})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[t.jsx(Ht,{value:o,onChange:i,placeholder:"Search by shuttle, driver, route, or location..."}),t.jsx(aa,{value:d,onChange:u,label:"Status",options:[{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]}),t.jsx(yr,{startDate:c,endDate:m,onStartChange:x,onEndChange:h}),t.jsx(qt,{onClick:j,disabled:C.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:r.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{children:"No trips found"})]}):C.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{style:{marginBottom:"12px"},children:"No trips match your search"}),t.jsx("button",{onClick:()=>i(""),style:{padding:"8px 16px",background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):t.jsxs("div",{className:"overflow-x-auto rounded-xl",style:{border:`1px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Trip ID"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Shuttle"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Driver"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Route"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Departure"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Duration"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Passengers"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Revenue"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Status"}),t.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:e.accent.primary,textTransform:"uppercase",borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Actions"})]})}),t.jsx("tbody",{children:I.map(_=>{const V=z(_.status);return t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[t.jsx("td",{style:{padding:"16px",color:e.text.primary,fontFamily:"monospace",fontSize:"11px",fontWeight:700},children:_.tripId||_._id.slice(-8)}),t.jsx("td",{style:{padding:"16px",color:e.text.primary,fontWeight:600},children:_.shuttleId}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:_.driverName||_.driverId}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:_.routeId}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:new Date(_.departureTime).toLocaleString()}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:Y(_.durationMinutes)}),t.jsx("td",{style:{padding:"16px",color:e.text.primary,textAlign:"center"},children:_.passengerCount||0}),t.jsxs("td",{style:{padding:"16px",color:e.text.primary,fontWeight:600},children:["",(_.totalCollections||0).toLocaleString()]}),t.jsx("td",{style:{padding:"16px"},children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:V.bg,color:V.color,border:`1px solid ${V.color}40`},children:_.status})}),t.jsx("td",{style:{padding:"16px",textAlign:"right"},children:t.jsx("button",{onClick:()=>S(_),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"})})]},_._id)})})]}),T>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[t.jsx("button",{onClick:()=>y(_=>Math.max(1,_-1)),disabled:f===1,style:{padding:"8px 16px",background:f===1?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:f===1?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:f===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",f," of ",T]}),t.jsx("button",{onClick:()=>y(_=>Math.min(T,_+1)),disabled:f===T,style:{padding:"8px 16px",background:f===T?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:f===T?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:f===T?"not-allowed":"pointer"},children:"Next "})]})]})}),v&&t.jsx(Tv,{trip:v,onClose:()=>S(null),onUpdate:_=>{s(r.map(V=>V._id===_._id?_:V)),S(_)}})]})}function Av(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState([]),[o,i]=p.useState(!0),[d,u]=p.useState(!1),[c,x]=p.useState(null),[m,h]=p.useState(null),[v,S]=p.useState(""),[f,y]=p.useState(1),b=20,[g,j]=p.useState({phoneId:"",phoneModel:"",phoneType:"Android",assignedDriverId:"",assignedDriverName:"",status:"available",notes:""}),C=async()=>{try{const A=await Z.get("/admin/phones");s(Array.isArray(A)?A:[]),i(!1)}catch(A){console.error("Error loading phones:",A),i(!1)}},T=async()=>{try{const A=await Z.get("/admin/drivers");l(Array.isArray(A)?A:[])}catch(A){console.error("Error loading drivers:",A)}};p.useEffect(()=>{C(),T();const A=setInterval(C,5e3);return()=>clearInterval(A)},[]);const E=()=>{if(r.length===0)return"PHONE_001";let A=0;for(const O of r)if(O.phoneId){const q=O.phoneId.match(/PHONE_(\d+)/i);if(q){const U=parseInt(q[1],10);U>A&&(A=U)}}return`PHONE_${String(A+1).padStart(3,"0")}`},D=A=>{if(!A)j({...g,assignedDriverId:"",assignedDriverName:"",status:"available",assignedDate:null});else{const O=n.find(q=>q.driverId===A);j({...g,assignedDriverId:A,assignedDriverName:(O==null?void 0:O.name)||"",status:"assigned",assignedDate:new Date})}},I=async A=>{var O,q;A.preventDefault();try{if(c)await Z.put(`/admin/phones/${c._id}`,g),h({type:"success",message:"Phone updated successfully!"});else{const U=E();await Z.post("/admin/phones",{...g,phoneId:U}),h({type:"success",message:"Phone created successfully!"})}u(!1),x(null),V(),C(),setTimeout(()=>h(null),3e3)}catch(U){h({type:"error",message:((q=(O=U.response)==null?void 0:O.data)==null?void 0:q.error)||"Failed to save phone"})}},z=A=>{x(A),j({phoneId:A.phoneId,phoneModel:A.phoneModel,phoneType:A.phoneType,assignedDriverId:A.assignedDriverId||"",assignedDriverName:A.assignedDriverName||"",status:A.status,notes:A.notes||""}),u(!0)},Y=async A=>{var O,q;if(window.confirm("Are you sure you want to delete this phone?"))try{await Z.delete(`/admin/phones/${A}`),h({type:"success",message:"Phone deleted successfully!"}),C(),setTimeout(()=>h(null),3e3)}catch(U){h({type:"error",message:((q=(O=U.response)==null?void 0:O.data)==null?void 0:q.error)||"Failed to delete phone"})}},_=async(A,O)=>{try{const q=n.find(H=>H.driverId===O),U={...A,assignedDriverId:O||null,assignedDriverName:(q==null?void 0:q.name)||null,assignedDate:O?new Date:null,status:O?"assigned":"available"};await Z.put(`/admin/phones/${A._id}`,U),h({type:"success",message:"Driver assignment updated!"}),C(),setTimeout(()=>h(null),2e3)}catch{h({type:"error",message:"Failed to update assignment"})}},V=()=>{j({phoneId:"",phoneModel:"",phoneType:"Android",assignedDriverId:"",assignedDriverName:"",status:"available",notes:""})},R=A=>{switch(A){case"available":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"assigned":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"maintenance":return{bg:"rgba(251,191,36,0.2)",color:a?"#FBBF24":"#F59E0B"};case"retired":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};default:return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"}}},B=()=>{const A=Jr(F);zt(A,"phones")},F=r.filter(A=>{var q,U,H,J,ee,L;if(!v)return!0;const O=v.toLowerCase();return((q=A.phoneId)==null?void 0:q.toLowerCase().includes(O))||((U=A.phoneModel)==null?void 0:U.toLowerCase().includes(O))||((H=A.phoneType)==null?void 0:H.toLowerCase().includes(O))||((J=A.assignedDriverName)==null?void 0:J.toLowerCase().includes(O))||((ee=A.assignedDriverId)==null?void 0:ee.toLowerCase().includes(O))||((L=A.status)==null?void 0:L.toLowerCase().includes(O))}),$=Math.ceil(F.length/b),N=(f-1)*b,w=N+b,k=F.slice(N,w);return p.useEffect(()=>{y(1)},[v]),o?t.jsx("div",{className:"text-center py-[60px]",style:{color:e.accent.primary},children:"Loading phones..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[m&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:m.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:m.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${m.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4,animation:"fadeIn 0.3s ease"},children:m.message}),t.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[t.jsx("span",{children:""})," Phone Inventory"]}),t.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:v?`Showing: ${F.length} of ${r.length} (Page ${f} of ${$||1})`:`Total devices: ${r.length}  Available: ${r.filter(A=>A.status==="available").length}  Assigned: ${r.filter(A=>A.status==="assigned").length} (Page ${f} of ${$||1})`})]}),t.jsx("button",{onClick:()=>{V(),x(null),u(!0)},style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.3s"},children:"+ Add Phone"})]}),t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsx(Ht,{value:v,onChange:S,placeholder:"Search by phone ID, model, serial, or driver..."}),t.jsx(qt,{onClick:B,disabled:F.length===0})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[r.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{children:"No phones found"})]}):F.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{style:{marginBottom:"12px"},children:"No phones match your search"}),t.jsx("button",{onClick:()=>S(""),style:{padding:"8px 16px",background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):t.jsx("div",{className:"overflow-x-auto rounded-xl",style:{border:`1px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Phone ID"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Device"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Type"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Assigned Driver"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Status"}),t.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:e.accent.primary,textTransform:"uppercase",borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Actions"})]})}),t.jsx("tbody",{children:k.map(A=>{const O=R(A.status);return t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:t.jsx("strong",{children:A.phoneId})}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:A.phoneModel}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:A.phoneType}),t.jsx("td",{style:{padding:"16px"},children:t.jsxs("select",{value:A.assignedDriverId||"",onChange:q=>_(A,q.target.value),style:{padding:"8px 12px",background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",color:e.accent.primary,border:`1px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",minWidth:"180px"},children:[t.jsx("option",{value:"",children:"Unassigned"}),n.map(q=>t.jsxs("option",{value:q.driverId,children:[q.name," (",q.driverId,")"]},q.driverId))]})}),t.jsx("td",{style:{padding:"16px"},children:t.jsx("span",{style:{padding:"6px 12px",background:O.bg,color:O.color,borderRadius:"6px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",display:"inline-block"},children:A.status})}),t.jsxs("td",{style:{padding:"16px",textAlign:"right"},children:[t.jsx("button",{onClick:()=>z(A),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",marginRight:"8px"},children:"Edit"}),t.jsx("button",{onClick:()=>Y(A._id),style:{padding:"6px 12px",background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Delete"})]})]},A._id)})})]})}),$>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"12px",marginTop:"24px",paddingTop:"24px",borderTop:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsx("button",{onClick:()=>y(A=>Math.max(1,A-1)),disabled:f===1,style:{padding:"10px 20px",background:f===1?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:f===1?a?"rgba(255,212,28,0.5)":"rgba(59,130,246,0.5)":e.accent.primary,fontSize:"14px",fontWeight:600,cursor:f===1?"not-allowed":"pointer",transition:"all 0.2s"},children:" Previous"}),t.jsxs("span",{style:{color:"rgba(251,251,251,0.8)",fontSize:"14px",fontWeight:600,minWidth:"120px",textAlign:"center"},children:["Page ",f," of ",$]}),t.jsx("button",{onClick:()=>y(A=>Math.min($,A+1)),disabled:f===$,style:{padding:"10px 20px",background:f===$?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:f===$?a?"rgba(255,212,28,0.5)":"rgba(59,130,246,0.5)":e.accent.primary,fontSize:"14px",fontWeight:600,cursor:f===$?"not-allowed":"pointer",transition:"all 0.2s"},children:"Next "})]})]}),d&&t.jsx("div",{onClick:()=>u(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:t.jsxs("div",{onClick:A=>A.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:e.accent.primary,margin:0},children:c?"Edit Phone":"Add New Phone"}),t.jsx("button",{onClick:()=>u(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),t.jsxs("form",{onSubmit:I,style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["Phone ID ",!c&&t.jsx("span",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontWeight:400},children:"(Auto-generated)"})]}),t.jsx("input",{type:"text",value:c?g.phoneId:E(),disabled:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"8px",background:"rgba(100,100,100,0.2)",color:"rgba(251,251,251,0.5)",fontSize:"14px",boxSizing:"border-box",cursor:"not-allowed"}})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Phone Model *"}),t.jsx("input",{type:"text",value:g.phoneModel,onChange:A=>j({...g,phoneModel:A.target.value}),required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"},placeholder:"e.g., Samsung Galaxy A14"})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Phone Type *"}),t.jsxs("select",{value:g.phoneType,onChange:A=>j({...g,phoneType:A.target.value}),required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",cursor:"pointer"},children:[t.jsx("option",{value:"Android",children:"Android"}),t.jsx("option",{value:"iOS",children:"iOS"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Assign to Driver"}),t.jsxs("select",{value:g.assignedDriverId,onChange:A=>D(A.target.value),style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",cursor:"pointer"},children:[t.jsx("option",{value:"",children:"Unassigned"}),n.map(A=>t.jsxs("option",{value:A.driverId,children:[A.name," (",A.driverId,")"]},A.driverId))]})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Notes"}),t.jsx("textarea",{value:g.notes,onChange:A=>j({...g,notes:A.target.value}),rows:"3",style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",fontFamily:"inherit",resize:"vertical"},placeholder:"Any additional notes about this device"})]}),t.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",paddingTop:"20px",borderTop:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsx("button",{type:"button",onClick:()=>u(!1),style:{padding:"12px 24px",background:"rgba(251,251,251,0.1)",color:"rgba(251,251,251,0.7)",border:"1px solid rgba(251,251,251,0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},children:c?"Update Phone":"Create Phone"})]})]})]})}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from { 
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to { 
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}function Rv(){var H,J,ee,L;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState("all"),[d,u]=p.useState(""),[c,x]=p.useState(""),[m,h]=p.useState(""),[v,S]=p.useState(""),[f,y]=p.useState(null),[b,g]=p.useState(!1),[j,C]=p.useState(!1),[T,E]=p.useState(""),[D,I]=p.useState(!1),[z,Y]=p.useState(1),_=15,V=p.useRef(null),R=async(X=!1)=>{try{X||l(!0);const te=new URLSearchParams;c&&te.append("status",c),d&&te.append("search",d);const ce=await Z.get(`/admin/user-concerns?${te}`);if(ce!=null&&ce.concerns||Array.isArray(ce)){const we=(ce.concerns||ce).filter(ae=>{var ue,Ce;return ae.reportTo==="NU Shuttle Service"||((ue=ae.reportTo)==null?void 0:ue.toLowerCase().includes("motorpool"))||((Ce=ae.reportTo)==null?void 0:Ce.toLowerCase().includes("shuttle"))});s(we)}}catch{X||W.error("Failed to load concerns")}finally{X||l(!1)}};p.useEffect(()=>(R(),V.current=setInterval(()=>R(!0),3e4),()=>{V.current&&clearInterval(V.current)}),[c,d]),p.useEffect(()=>{Y(1)},[d,c,o,m,v]);const B=X=>{y(X),g(!0)},F=X=>{y(X),E(""),g(!1),C(!0)},$=async(X,te)=>{try{const ce=JSON.parse(localStorage.getItem("adminData")||"{}"),de=await Z.patch(`/admin/user-concerns/${X.concernId||X._id}/status`,{status:te,adminName:ce.firstName?`${ce.firstName} ${ce.lastName||""}`.trim():"Motorpool Admin"});de!=null&&de.success&&(W.success("Status updated! User has been notified."),R(!0))}catch(ce){W.error(ce.message||"Failed to update status")}},N=async()=>{if(!T.trim()){W.error("Please provide a resolution message");return}I(!0);try{const X=JSON.parse(localStorage.getItem("adminData")||"{}"),te=await Z.patch(`/admin/user-concerns/${f.concernId||f._id}/status`,{status:"resolved",resolution:T.trim(),adminName:X.firstName?`${X.firstName} ${X.lastName||""}`.trim():"Motorpool Admin"});te!=null&&te.success&&(W.success("Concern resolved! User has been notified via email."),C(!1),R(!0))}catch(X){W.error(X.message||"Failed to resolve concern")}finally{I(!1)}},w=()=>{const X=k.map(te=>{var ce;return{ID:te.concernId||((ce=te._id)==null?void 0:ce.slice(-8))||"",Type:te.submissionType||"assistance",User:te.userName||"",Subject:te.subject||"",Status:te.status||"pending",Priority:te.priority||"medium",Rating:te.rating||"",Date:te.submittedAt||te.createdAt?new Date(te.submittedAt||te.createdAt).toLocaleDateString():""}});zt(X,"motorpool_concerns")},k=r.filter(X=>{var te,ce,de,we,ae;if(o==="assistance"&&X.submissionType!=="assistance"||o==="feedback"&&X.submissionType!=="feedback")return!1;if(d){const ue=d.toLowerCase();if(!(((te=X._id)==null?void 0:te.toLowerCase().includes(ue))||((ce=X.concernId)==null?void 0:ce.toLowerCase().includes(ue))||((de=X.subject)==null?void 0:de.toLowerCase().includes(ue))||((we=X.feedbackText)==null?void 0:we.toLowerCase().includes(ue))||((ae=X.userName)==null?void 0:ae.toLowerCase().includes(ue))))return!1}if(c&&X.status!==c)return!1;if(m||v){const ue=new Date(X.submittedAt||X.createdAt);if(m&&ue<new Date(m)||v&&ue>new Date(v+"T23:59:59"))return!1}return!0}),A=Math.ceil(k.length/_),O=(z-1)*_,q=k.slice(O,O+_),U=X=>{switch(X){case"pending":return"#FBBF24";case"in_progress":return"#3B82F6";case"resolved":return"#10B981";default:return e.text.secondary}};return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading concerns..."]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("div",{className:"mb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Concerns & Feedback"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:k.length>0?`Showing ${O+1}-${Math.min(O+_,k.length)} of ${k.length}  Page ${z} of ${A}`:`Manage motorpool concerns and feedback  Total: ${r.length}`})]}),t.jsxs("div",{className:"flex gap-2 mb-5",children:[t.jsxs("button",{onClick:()=>i("all"),style:{padding:"10px 20px",background:o==="all"?"rgba(255,212,28,0.2)":"transparent",border:`2px solid ${o==="all"?e.accent.primary:"rgba(255,212,28,0.3)"}`,borderRadius:"8px",color:o==="all"?e.accent.primary:e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["All (",r.length,")"]}),t.jsxs("button",{onClick:()=>i("assistance"),style:{padding:"10px 20px",background:o==="assistance"?"rgba(59,130,246,0.2)":"transparent",border:`2px solid ${o==="assistance"?"#3B82F6":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:o==="assistance"?"#3B82F6":e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Assistance (",r.filter(X=>X.submissionType==="assistance"||!X.submissionType).length,")"]}),t.jsxs("button",{onClick:()=>i("feedback"),style:{padding:"10px 20px",background:o==="feedback"?"rgba(34,197,94,0.2)":"transparent",border:`2px solid ${o==="feedback"?"#22C55E":"rgba(34,197,94,0.3)"}`,borderRadius:"8px",color:o==="feedback"?"#22C55E":e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Feedback (",r.filter(X=>X.submissionType==="feedback").length,")"]})]}),t.jsxs("div",{className:"flex gap-3 items-end flex-wrap",children:[t.jsx(Ht,{value:d,onChange:u,placeholder:"Search by ID, user, subject..."}),o!=="feedback"&&t.jsx(aa,{value:c,onChange:x,label:"Status",options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"}]}),t.jsx(yr,{startDate:m,endDate:v,onStartChange:h,onEndChange:S}),t.jsx(qt,{onClick:w,disabled:k.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:k.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{children:"No concerns found"})]}):t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"ID"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"User"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Subject"}),o==="all"&&t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Type"}),o==="feedback"?t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Rating"}):t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Date"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-right p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:q.map(X=>{var te,ce,de;return t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},className:"hover:bg-white/5 transition",children:[t.jsx("td",{style:{color:e.text.primary},className:"p-4 font-mono text-xs",children:X.concernId||((te=X._id)==null?void 0:te.slice(-8))}),t.jsx("td",{style:{color:e.text.primary},className:"p-4",children:X.userName||"N/A"}),t.jsx("td",{style:{color:e.text.primary},className:"p-4 max-w-[200px] truncate",children:X.subject||(((ce=X.selectedConcerns)==null?void 0:ce.length)>0?X.selectedConcerns.join(", "):"No subject")}),o==="all"&&t.jsx("td",{className:"p-4",children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:X.submissionType==="feedback"?"rgba(34,197,94,0.2)":"rgba(59,130,246,0.2)",color:X.submissionType==="feedback"?"#22C55E":"#3B82F6",border:`1px solid ${X.submissionType==="feedback"?"rgba(34,197,94,0.3)":"rgba(59,130,246,0.3)"}`},children:X.submissionType==="feedback"?" Feedback":" Assistance"})}),o==="feedback"?t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((we,ae)=>t.jsx("span",{style:{fontSize:"14px",color:ae<(X.rating||0)?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},ae)),t.jsxs("span",{style:{color:e.text.muted,marginLeft:"8px",fontSize:"11px"},children:["(",X.rating||0,"/5)"]})]})}):t.jsx("td",{className:"p-4",children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:`${U(X.status)}20`,color:U(X.status)},children:((de=X.status)==null?void 0:de.replace("_"," "))||"Pending"})}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4 text-sm",children:X.submittedAt||X.createdAt?new Date(X.submittedAt||X.createdAt).toLocaleDateString():""}),t.jsx("td",{className:"p-4 text-right",children:t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{onClick:()=>B(X),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"}),o!=="feedback"&&X.status!=="resolved"&&t.jsxs(t.Fragment,{children:[X.status!=="in_progress"&&t.jsx("button",{onClick:()=>$(X,"in_progress"),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"2px solid #3B82F6",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:700},children:"In Progress"}),t.jsx("button",{onClick:()=>F(X),style:{padding:"6px 12px",background:"#10B981",color:"#FFFFFF",border:"2px solid #10B981",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:700},children:"Resolve"})]})]})})]},X._id)})})]}),A>1&&t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-4 border-t flex items-center justify-center gap-3",children:[t.jsx("button",{onClick:()=>Y(X=>Math.max(1,X-1)),disabled:z===1,style:{padding:"8px 16px",background:z===1?"rgba(100,100,100,0.2)":e.bg.tertiary,color:z===1?e.text.muted:e.accent.primary,border:`2px solid ${z===1?"transparent":e.accent.primary}`,borderRadius:"8px",fontSize:"13px",fontWeight:600,cursor:z===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:e.text.secondary,fontSize:"13px",fontWeight:600},children:["Page ",z," of ",A]}),t.jsx("button",{onClick:()=>Y(X=>Math.min(A,X+1)),disabled:z===A,style:{padding:"8px 16px",background:z===A?"rgba(100,100,100,0.2)":e.bg.tertiary,color:z===A?e.text.muted:e.accent.primary,border:`2px solid ${z===A?"transparent":e.accent.primary}`,borderRadius:"8px",fontSize:"13px",fontWeight:600,cursor:z===A?"not-allowed":"pointer"},children:"Next "})]})]})}),b&&f&&t.jsx("div",{onClick:()=>g(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:X=>X.stopPropagation(),style:{background:a?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:`2px solid ${e.border.primary}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${e.border.primary}`,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t.jsxs("div",{children:[t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:`${U(f.status)}20`,color:U(f.status),marginBottom:"8px"},children:((H=f.status)==null?void 0:H.replace("_"," "))||"Pending"}),t.jsx("h2",{style:{fontSize:"20px",fontWeight:700,color:e.text.primary,margin:0},children:f.subject||(((J=f.selectedConcerns)==null?void 0:J.length)>0?f.selectedConcerns.join(", "):"No Subject")})]}),t.jsx("button",{onClick:()=>g(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px"},children:""})]}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[t.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:e.accent.primary,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"18px",color:e.accent.secondary},children:((ee=f.userName)==null?void 0:ee[0])||"?"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.primary,fontWeight:600,margin:0},children:f.userName||"Unknown User"}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",margin:0},children:f.userEmail||"No email provided"})]}),t.jsx("div",{style:{marginLeft:"auto",textAlign:"right"},children:t.jsx("p",{style:{color:e.text.muted,fontSize:"12px",margin:0},children:f.submittedAt||f.createdAt?new Date(f.submittedAt||f.createdAt).toLocaleString():""})})]}),t.jsx("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",marginBottom:"20px",border:`1px solid ${e.border.primary}`},children:t.jsx("p",{style:{color:e.text.primary,whiteSpace:"pre-wrap",margin:0,lineHeight:"1.6"},children:f.feedbackText||f.description||"No message provided"})}),f.submissionType==="feedback"&&f.rating&&t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("p",{style:{color:e.text.secondary,fontSize:"12px",marginBottom:"8px",fontWeight:600},children:"Rating"}),t.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((X,te)=>t.jsx("span",{style:{fontSize:"24px",color:te<f.rating?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},te)),t.jsxs("span",{style:{color:e.text.secondary,marginLeft:"8px"},children:["(",f.rating,"/5)"]})]})]}),(f.resolution||f.adminResponse)&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(16,185,129,0.3)"},children:[t.jsx("p",{style:{color:"#10B981",fontSize:"12px",marginBottom:"8px",fontWeight:700},children:"Admin Response"}),t.jsx("p",{style:{color:e.text.primary,margin:0},children:f.resolution||f.adminResponse})]})]}),f.status!=="resolved"&&f.submissionType!=="feedback"&&t.jsxs("div",{style:{padding:"20px 24px",borderTop:`2px solid ${e.border.primary}`,display:"flex",gap:"12px",justifyContent:"flex-end"},children:[f.status!=="in_progress"&&t.jsx("button",{onClick:()=>{$(f,"in_progress"),g(!1)},style:{padding:"12px 24px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"2px solid #3B82F6",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:700},children:"Mark In Progress"}),t.jsx("button",{onClick:()=>{g(!1),F(f)},style:{padding:"12px 24px",background:"#10B981",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:700,boxShadow:"0 4px 12px rgba(16,185,129,0.4)"},children:" Resolve Concern"})]})]})}),j&&f&&t.jsx("div",{onClick:()=>C(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:X=>X.stopPropagation(),style:{background:a?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",maxWidth:"500px",width:"90%",border:`2px solid ${e.border.primary}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("div",{style:{padding:"24px",borderBottom:"2px solid rgba(16,185,129,0.3)",background:"rgba(16,185,129,0.1)",borderRadius:"16px 16px 0 0"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#10B981",margin:0,marginBottom:"8px"},children:"Resolve Concern"}),t.jsx("p",{style:{fontSize:"13px",color:e.text.secondary,margin:0},children:"Mark this concern as resolved and notify the user"})]}),t.jsx("button",{onClick:()=>C(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px"},children:""})]})}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",marginBottom:"20px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:e.text.secondary,fontSize:"12px"},children:"From"}),t.jsx("span",{style:{color:e.text.primary,fontSize:"14px",fontWeight:600},children:f.userName||"Unknown User"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:e.text.secondary,fontSize:"12px"},children:"Subject"}),t.jsx("span",{style:{color:e.text.primary,fontSize:"14px",fontWeight:600,maxWidth:"60%",textAlign:"right"},children:f.subject||(((L=f.selectedConcerns)==null?void 0:L.length)>0?f.selectedConcerns.join(", "):"No Subject")})]})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:e.text.primary,fontWeight:600,display:"block",marginBottom:"8px"},children:["Resolution Message ",t.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",marginBottom:"12px"},children:"This message will be sent to the user via email."}),t.jsx("textarea",{value:T,onChange:X=>E(X.target.value),placeholder:"Enter your resolution response...",rows:5,style:{width:"100%",padding:"12px",borderRadius:"8px",border:`2px solid ${e.border.primary}`,background:e.bg.tertiary,color:e.text.primary,fontSize:"14px",resize:"vertical",outline:"none",boxSizing:"border-box"},autoFocus:!0})]})]}),t.jsxs("div",{style:{padding:"20px 24px",borderTop:`2px solid ${e.border.primary}`,display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:()=>C(!1),disabled:D,style:{flex:1,padding:"14px",background:e.bg.tertiary,color:e.text.primary,border:`1px solid ${e.border.primary}`,borderRadius:"8px",cursor:D?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:D?.5:1},children:"Cancel"}),t.jsx("button",{onClick:N,disabled:D||!T.trim(),style:{flex:1,padding:"14px",background:D||!T.trim()?"rgba(16,185,129,0.3)":"#10B981",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:D||!T.trim()?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:D||!T.trim()?.6:1,boxShadow:D||!T.trim()?"none":"0 4px 12px rgba(16,185,129,0.4)"},children:D?" Resolving...":" Resolve & Notify User"})]})]})})]})}function zv(){var B,F,$;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState({autoExport:{frequency:"daily",exportTypes:[],time:"00:00",emailRecipients:[]}}),[n,l]=p.useState(!1),[o,i]=p.useState(!1),[d,u]=p.useState(!1),[c,x]=p.useState([]),[m,h]=p.useState("all"),[v,S]=p.useState(""),[f,y]=p.useState({start:"",end:""}),[b,g]=p.useState("all"),[j,C]=p.useState(""),[T,E]=p.useState(""),D=[{value:"Drivers",icon:"",label:"Drivers"},{value:"Routes",icon:"",label:"Routes"},{value:"Trips",icon:"",label:"Trips"},{value:"Shuttles",icon:"",label:"Shuttles"},{value:"Phones",icon:"",label:"Driver Phones"},{value:"Logs",icon:"",label:"Motorpool Logs"},{value:"Concerns",icon:"",label:"Motorpool Concerns"}];p.useEffect(()=>{I(),z()},[]);const I=async()=>{try{const N=await Z.get("/admin/configurations?adminRole=motorpool");N&&s(N)}catch(N){console.error("Error loading configurations:",N)}},z=async()=>{try{const[N,w]=await Promise.all([Z.get("/admin/configurations/scheduled-exports?adminRole=motorpool").catch(()=>[]),Z.get("/admin/configurations/export-history?adminRole=motorpool").catch(()=>[])]),k=(Array.isArray(N)?N:[]).map(q=>({...q,exportSource:"auto"})),A=(Array.isArray(w)?w:[]).map(q=>({...q,exportSource:"manual"})),O=[...k,...A].sort((q,U)=>{const H=new Date(q.exportedAt||q.timestamp||q.createdAt);return new Date(U.exportedAt||U.timestamp||U.createdAt)-H});x(O)}catch(N){console.error("Error loading export archive:",N)}},Y=async()=>{var N,w;l(!0);try{await Z.put("/admin/configurations/auto-export",{...r.autoExport,adminRole:"motorpool"}),W.success("Auto-export settings saved successfully!"),i(!1),I()}catch(k){W.error(((w=(N=k.response)==null?void 0:N.data)==null?void 0:w.error)||"Failed to save settings")}finally{l(!1)}},_=async()=>{var N,w;l(!0);try{if(!r.autoExport.exportTypes||r.autoExport.exportTypes.length===0){W.error("Please select at least one export type in the configuration settings"),l(!1);return}const k=await Z.post("/admin/configurations/manual-export-motorpool",{exportTypes:r.autoExport.exportTypes,dateRange:b,customStartDate:j,customEndDate:T});if(W.success(`Motorpool data exported successfully! (${k.totalRecords||k.recordCount||0} total records)`),k.downloadUrl){const A=document.createElement("a");A.href=k.downloadUrl,A.download=k.fileName||`motorpool_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(A),A.click(),document.body.removeChild(A)}u(!1),g("all"),C(""),E(""),z()}catch(k){W.error(((w=(N=k.response)==null?void 0:N.data)==null?void 0:w.error)||"Export failed")}finally{l(!1)}},V=async N=>{try{const w=await Z.get(`/admin/configurations/download-export/${N}`);if(w.downloadUrl){const k=document.createElement("a");k.href=w.downloadUrl,k.download=w.fileName,document.body.appendChild(k),k.click(),document.body.removeChild(k)}}catch{W.error("Failed to download export")}},R=c.filter(N=>{var w,k;if(m!=="all"&&N.exportSource!==m)return!1;if(v){const A=v.toLowerCase();if(!(((w=N.exportType)==null?void 0:w.toLowerCase().includes(A))||((k=N.fileName)==null?void 0:k.toLowerCase().includes(A))))return!1}if(f.start||f.end){const A=new Date(N.exportedAt||N.timestamp||N.createdAt);if(f.start&&A<new Date(f.start)||f.end&&A>new Date(f.end+"T23:59:59"))return!1}return!0});return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{marginBottom:"24px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,paddingBottom:"16px"},children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Motorpool Settings"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Configure automated motorpool data exports and system settings"})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[t.jsxs("div",{style:{background:e.bg.card,borderRadius:"16px",border:`1px solid ${e.border.primary}`,padding:"28px",marginBottom:"24px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{color:e.accent.primary,fontSize:"20px",fontWeight:700,margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," Automated Motorpool Export"]}),t.jsxs("p",{style:{color:e.text.secondary,fontSize:"14px",margin:0,lineHeight:"1.5"},children:["System automatically exports motorpool data as ZIP files for backup and compliance.",t.jsx("br",{}),"Configure the schedule and download reports manually anytime."]})]}),t.jsxs("button",{onClick:()=>i(!0),style:{padding:"12px 20px",background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"10px",color:e.accent.primary,fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Configure Schedule"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[t.jsx(Zi,{icon:"",label:"Frequency",value:((B=r.autoExport.frequency)==null?void 0:B.charAt(0).toUpperCase())+((F=r.autoExport.frequency)==null?void 0:F.slice(1))||"Not set",theme:e}),t.jsx(Zi,{icon:"",label:"Export Time",value:r.autoExport.time||"Not set",theme:e}),t.jsx(Zi,{icon:"",label:"Data Types",value:`${(($=r.autoExport.exportTypes)==null?void 0:$.length)||0} selected`,theme:e})]}),t.jsxs("div",{style:{padding:"24px",background:"rgba(34,197,94,0.1)",border:"2px dashed rgba(34,197,94,0.3)",borderRadius:"12px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),t.jsx("h4",{style:{color:e.text.primary,fontSize:"16px",fontWeight:700,marginBottom:"8px"},children:"Export Motorpool Data Now"}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",marginBottom:"16px"},children:"Download a complete ZIP file with all motorpool data: drivers, routes, trips, shuttles, phones, logs, and concerns."}),t.jsx("button",{onClick:()=>u(!0),disabled:n,style:{padding:"14px 32px",background:n?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:n?"not-allowed":"pointer",boxShadow:n?"none":"0 4px 12px rgba(34,197,94,0.4)",transition:"all 0.2s ease",opacity:n?.6:1},children:n?" Exporting...":" Download Motorpool Data (ZIP)"})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderRadius:"16px",border:`1px solid ${e.border.primary}`,padding:"28px",marginBottom:"24px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{color:e.accent.primary,fontSize:"18px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," Export Archive"]}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"12px",margin:0},children:"All exports - auto-scheduled and manual"})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("div",{style:{display:"flex",borderRadius:"8px",overflow:"hidden",border:`1px solid ${e.border.primary}`},children:[{key:"all",label:"All"},{key:"auto",label:" Auto"},{key:"manual",label:" Manual"}].map(N=>t.jsx("button",{onClick:()=>h(N.key),style:{padding:"8px 16px",background:m===N.key?e.accent.primary:"transparent",color:m===N.key?a?"#181D40":"#FFFFFF":e.text.secondary,border:"none",fontSize:"12px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:N.label},N.key))}),t.jsx("input",{type:"text",placeholder:"Search exports...",value:v,onChange:N=>S(N.target.value),style:{padding:"8px 16px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"13px",outline:"none",width:"180px"}}),t.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t.jsx("input",{type:"date",value:f.start,onChange:N=>y({...f,start:N.target.value}),style:{padding:"8px 12px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"12px",outline:"none"}}),t.jsx("span",{style:{color:e.text.tertiary},children:""}),t.jsx("input",{type:"date",value:f.end,onChange:N=>y({...f,end:N.target.value}),style:{padding:"8px 12px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"12px",outline:"none"}}),(f.start||f.end||v)&&t.jsx("button",{onClick:()=>{S(""),y({start:"",end:""})},style:{padding:"8px 12px",background:"rgba(239,68,68,0.2)",border:"2px solid rgba(239,68,68,0.3)",borderRadius:"8px",color:"#EF4444",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Clear"})]})]})]}),R.length===0?t.jsxs("div",{style:{padding:"40px",textAlign:"center",color:e.text.tertiary,fontSize:"14px"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",opacity:.3},children:""}),t.jsx("p",{style:{margin:0},children:"No exports found"}),t.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"12px"},children:[m!=="all"?"Try changing the filter or ":"","Configure auto-export or run a manual export to start"]})]}):t.jsx("div",{style:{maxHeight:"500px",overflowY:"auto",paddingRight:"8px"},children:t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:R.map((N,w)=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 18px",background:e.bg.tertiary,borderRadius:"10px",border:`1px solid ${e.border.primary}`,fontSize:"14px",transition:"all 0.2s ease"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},children:[t.jsx("span",{style:{fontSize:"20px"},children:N.exportSource==="auto"?"":""}),t.jsx("span",{style:{color:e.accent.primary,fontWeight:700,fontSize:"15px"},children:N.exportType||"Motorpool Export"}),t.jsx("span",{style:{padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:700,background:N.exportSource==="auto"?"rgba(59,130,246,0.2)":"rgba(34,197,94,0.2)",color:N.exportSource==="auto"?"#3B82F6":"#22C55E",border:`1px solid ${N.exportSource==="auto"?"rgba(59,130,246,0.3)":"rgba(34,197,94,0.3)"}`},children:N.exportSource==="auto"?"AUTO":"MANUAL"})]}),t.jsxs("div",{style:{display:"flex",gap:"20px",fontSize:"13px",color:e.text.secondary},children:[t.jsxs("span",{children:[" ",new Date(N.exportedAt||N.timestamp||N.createdAt).toLocaleDateString()]}),t.jsxs("span",{children:[" ",new Date(N.exportedAt||N.timestamp||N.createdAt).toLocaleTimeString()]}),N.fileName&&t.jsxs("span",{children:[" ",N.fileName]}),N.recordCount&&t.jsxs("span",{children:[" ",N.recordCount," records"]})]})]}),N.status==="success"||!N.status?t.jsx("button",{onClick:()=>V(N._id),style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(34,197,94,0.2)",color:"#22C55E",border:"2px solid rgba(34,197,94,0.3)",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},children:" Download"}):t.jsx("span",{style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"2px solid rgba(239,68,68,0.3)"},children:" Failed"})]},N._id||w))})})]})]}),d&&t.jsx(Bv,{dateRange:b,setDateRange:g,customStartDate:j,setCustomStartDate:C,customEndDate:T,setCustomEndDate:E,loading:n,onExport:_,onCancel:()=>{u(!1),g("all"),C(""),E("")},theme:e,isDarkMode:a}),o&&t.jsx(Dv,{configurations:r,setConfigurations:s,exportTypes:D,loading:n,onSave:Y,onCancel:()=>i(!1),theme:e,isDarkMode:a})]})}function Zi({icon:e,label:a,value:r,theme:s}){return t.jsxs("div",{style:{padding:"20px",background:s.bg.tertiary,borderRadius:"12px",border:`1px solid ${s.border.primary}`},children:[t.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:e}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary,marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:700},children:a}),t.jsx("div",{style:{fontSize:"16px",color:s.text.primary,fontWeight:700},children:r})]})}function Bv({dateRange:e,setDateRange:a,customStartDate:r,setCustomStartDate:s,customEndDate:n,setCustomEndDate:l,loading:o,onExport:i,onCancel:d,theme:u,isDarkMode:c}){return t.jsx("div",{onClick:d,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:x=>x.stopPropagation(),style:{background:c?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",border:`1px solid ${u.border.primary}`,padding:"32px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("h3",{style:{color:u.accent.primary,fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Select Date Range"}),t.jsx("p",{style:{color:u.text.secondary,fontSize:"13px",margin:"0 0 24px 0"},children:"Choose which records to include in the export"}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:[{value:"all",label:" All Time",desc:"Export all records"},{value:"24hr",label:" Last 24 Hours",desc:"Records from the past day"},{value:"week",label:" This Week",desc:"Records from the past 7 days"},{value:"month",label:" This Month",desc:"Records from current month"},{value:"custom",label:" Custom Range",desc:"Choose specific dates"}].map(x=>t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px",background:e===x.value?`${u.accent.primary}20`:u.bg.tertiary,border:`2px solid ${e===x.value?u.accent.primary:u.border.primary}`,borderRadius:"10px",cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsx("input",{type:"radio",name:"dateRange",value:x.value,checked:e===x.value,onChange:m=>a(m.target.value),style:{cursor:"pointer",width:"18px",height:"18px"}}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{color:u.text.primary,fontSize:"14px",fontWeight:700,marginBottom:"4px"},children:x.label}),t.jsx("div",{style:{color:u.text.secondary,fontSize:"12px"},children:x.desc})]})]},x.value))}),e==="custom"&&t.jsx("div",{style:{marginBottom:"24px",padding:"16px",background:u.bg.tertiary,borderRadius:"10px"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:u.accent.primary},children:"Start Date"}),t.jsx("input",{type:"date",value:r,onChange:x=>s(x.target.value),style:{width:"100%",padding:"10px",background:u.bg.secondary,border:`2px solid ${u.border.primary}`,borderRadius:"8px",color:u.text.primary,fontSize:"13px",outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:u.accent.primary},children:"End Date"}),t.jsx("input",{type:"date",value:n,onChange:x=>l(x.target.value),style:{width:"100%",padding:"10px",background:u.bg.secondary,border:`2px solid ${u.border.primary}`,borderRadius:"8px",color:u.text.primary,fontSize:"13px",outline:"none",boxSizing:"border-box"}})]})]})}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:i,disabled:o,style:{flex:1,padding:"14px 24px",background:o?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:o?"not-allowed":"pointer",boxShadow:o?"none":"0 4px 12px rgba(34,197,94,0.4)",opacity:o?.6:1},children:o?" Exporting...":" Export Now"}),t.jsx("button",{onClick:d,disabled:o,style:{flex:1,padding:"14px 24px",background:u.bg.tertiary,color:u.text.primary,border:`2px solid ${u.border.primary}`,borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:o?"not-allowed":"pointer"},children:"Cancel"})]})]})})}function Dv({configurations:e,setConfigurations:a,exportTypes:r,loading:s,onSave:n,onCancel:l,theme:o,isDarkMode:i}){var d,u,c,x,m;return t.jsx("div",{onClick:l,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:h=>h.stopPropagation(),style:{background:i?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",border:`1px solid ${o.border.primary}`,padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("h3",{style:{color:o.accent.primary,fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Configure Export Schedule"}),t.jsx("p",{style:{color:o.text.secondary,fontSize:"13px",margin:"0 0 24px 0"},children:"Set up when and how often the system should automatically export data."}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",borderRadius:"12px",background:(d=e.autoExport)!=null&&d.enabled?"rgba(16,185,129,0.1)":"rgba(239,68,68,0.1)",border:`2px solid ${(u=e.autoExport)!=null&&u.enabled?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"}`},children:[t.jsxs("div",{children:[t.jsx("div",{style:{color:o.text.primary,fontWeight:700,fontSize:"14px"},children:"Enable Automatic Export"}),t.jsx("div",{style:{color:o.text.secondary,fontSize:"12px",marginTop:"4px"},children:(c=e.autoExport)!=null&&c.enabled?" Auto-export is active":" Auto-export is disabled"})]}),t.jsx("button",{onClick:()=>{var h;return a({...e,autoExport:{...e.autoExport,enabled:!((h=e.autoExport)!=null&&h.enabled)}})},style:{background:(x=e.autoExport)!=null&&x.enabled?"#10B981":"#6B7280",width:"52px",height:"28px",borderRadius:"14px",position:"relative",border:"none",cursor:"pointer",transition:"all 0.2s ease"},children:t.jsx("div",{style:{position:"absolute",top:"2px",left:(m=e.autoExport)!=null&&m.enabled?"26px":"2px",width:"24px",height:"24px",borderRadius:"12px",background:"#FFFFFF",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Frequency"}),t.jsxs("select",{value:e.autoExport.frequency,onChange:h=>a({...e,autoExport:{...e.autoExport,frequency:h.target.value}}),style:{width:"100%",padding:"12px 16px",background:o.bg.tertiary,border:`2px solid ${o.border.primary}`,borderRadius:"8px",color:o.text.primary,fontSize:"14px",fontWeight:600,cursor:"pointer",outline:"none"},children:[t.jsx("option",{value:"daily",style:{background:i?"#1E2347":"#FFFFFF"},children:" Daily"}),t.jsx("option",{value:"weekly",style:{background:i?"#1E2347":"#FFFFFF"},children:" Weekly"}),t.jsx("option",{value:"monthly",style:{background:i?"#1E2347":"#FFFFFF"},children:" Monthly"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Export Time (24-hour)"}),t.jsx("input",{type:"time",value:e.autoExport.time,onChange:h=>a({...e,autoExport:{...e.autoExport,time:h.target.value}}),style:{width:"100%",padding:"12px 16px",background:o.bg.tertiary,border:`2px solid ${o.border.primary}`,borderRadius:"8px",color:o.text.primary,fontSize:"14px",fontWeight:600,outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"12px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Data Types to Export"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:r.map(h=>{var v,S,f;return t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px",background:(v=e.autoExport.exportTypes)!=null&&v.includes(h.value)?`${o.accent.primary}20`:o.bg.tertiary,border:`2px solid ${(S=e.autoExport.exportTypes)!=null&&S.includes(h.value)?o.accent.primary:o.border.primary}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsx("input",{type:"checkbox",checked:((f=e.autoExport.exportTypes)==null?void 0:f.includes(h.value))||!1,onChange:y=>{const b=e.autoExport.exportTypes||[],g=y.target.checked?[...b,h.value]:b.filter(j=>j!==h.value);a({...e,autoExport:{...e.autoExport,exportTypes:g}})},style:{cursor:"pointer",width:"16px",height:"16px"}}),t.jsx("span",{style:{fontSize:"16px"},children:h.icon}),t.jsx("span",{style:{color:o.text.primary,fontSize:"14px",fontWeight:600},children:h.label})]},h.value)})})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[t.jsx("button",{onClick:n,disabled:s,style:{flex:1,padding:"14px 24px",background:s?"#9CA3AF":o.accent.primary,color:i?"#181D40":"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:s?"not-allowed":"pointer",boxShadow:s?"none":"0 4px 12px rgba(255,212,28,0.4)",opacity:s?.6:1},children:s?" Saving...":" Save Settings"}),t.jsx("button",{onClick:l,disabled:s,style:{flex:1,padding:"14px 24px",background:o.bg.tertiary,color:o.text.primary,border:`2px solid ${o.border.primary}`,borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:s?"not-allowed":"pointer"},children:"Cancel"})]})]})]})})}function _v(){const e=st(),{theme:a,isDarkMode:r}=ne(),[s,n]=p.useState(null),[l,o]=p.useState(!0),i=p.useRef(null),d=async()=>{try{const u=await Z.get("/merchant/stats");n(u)}catch(u){console.error("Error loading merchant stats:",u),n({totalMerchants:0,activeMerchants:0,inactiveMerchants:0,todayTransactions:0,phonesRegistered:0,recentMerchants:[]})}finally{o(!1)}};return p.useEffect(()=>(d(),i.current=setInterval(d,5e3),()=>{i.current&&clearInterval(i.current)}),[]),l?t.jsx("div",{style:{color:a.accent.primary},className:"text-center py-[60px]",children:"Loading dashboard..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:a.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:a.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Merchant Home"]}),t.jsx("p",{style:{color:a.text.secondary},className:"text-[13px] m-0",children:"Merchant management and monitoring dashboard  Auto-updates every 5 seconds"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[t.jsx(Ji,{icon:"",label:"TOTAL MERCHANTS",value:(s==null?void 0:s.totalMerchants)||0,subtitle:"registered",color:"#F59E0B",theme:a}),t.jsx(Ji,{icon:"",label:"ACTIVE MERCHANTS",value:(s==null?void 0:s.activeMerchants)||0,subtitle:"currently active",color:"#10B981",theme:a}),t.jsx(Ji,{icon:"",label:"PHONES REGISTERED",value:(s==null?void 0:s.phonesRegistered)||0,subtitle:"devices",color:"#A855F7",theme:a})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[t.jsxs("button",{onClick:()=>e("/admin/merchant/merchants"),style:{background:"linear-gradient(135deg, rgba(245,158,11,0.2) 0%, rgba(245,158,11,0.1) 100%)",borderColor:"rgba(245,158,11,0.3)"},className:"col-span-2 p-5 rounded-2xl border flex items-center gap-4 transition-all hover:scale-[1.01] hover:shadow-lg cursor-pointer",children:[t.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center text-2xl flex-shrink-0",style:{background:"rgba(245,158,11,0.2)"},children:""}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{className:"text-base font-bold text-amber-500 m-0",children:"Manage Merchants"}),t.jsx("p",{style:{color:a.text.secondary},className:"text-xs m-0 mt-1",children:"View, add, and manage merchant accounts"})]})]}),t.jsxs("button",{onClick:()=>e("/admin/merchant/phones"),style:{background:r?"linear-gradient(135deg, rgba(168,85,247,0.2) 0%, rgba(168,85,247,0.1) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.2) 0%, rgba(59,130,246,0.1) 100%)",borderColor:r?"rgba(168,85,247,0.3)":"rgba(59,130,246,0.3)"},className:"col-span-2 p-5 rounded-2xl border flex items-center gap-4 transition-all hover:scale-[1.01] hover:shadow-lg cursor-pointer",children:[t.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center text-2xl flex-shrink-0",style:{background:r?"rgba(168,85,247,0.2)":"rgba(59,130,246,0.2)"},children:""}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{style:{color:a.accent.primary},className:"text-base font-bold m-0",children:"Manage Phones"}),t.jsx("p",{style:{color:a.text.secondary},className:"text-xs m-0 mt-1",children:"View and manage phone assignments"})]})]})]}),t.jsx("div",{className:"flex-1 overflow-hidden flex flex-col min-h-0",children:t.jsxs("div",{style:{background:a.bg.card,borderColor:a.border.primary},className:"rounded-2xl border overflow-hidden flex-1 flex flex-col",children:[t.jsx("div",{style:{borderColor:a.border.primary},className:"p-4 border-b flex justify-between items-center flex-shrink-0",children:t.jsxs("div",{children:[t.jsx("h3",{style:{color:a.accent.primary},className:"m-0 mb-1 text-base font-bold",children:" Recently Added Merchants"}),t.jsx("p",{style:{color:a.text.secondary},className:"m-0 text-xs",children:"Latest merchant accounts added to the system"})]})}),t.jsx("div",{className:"p-4 overflow-y-auto flex-1",children:s!=null&&s.recentMerchants&&s.recentMerchants.length>0?t.jsx("div",{className:"flex flex-col gap-3",children:s.recentMerchants.slice(0,5).map((u,c)=>t.jsxs("div",{style:{background:r?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",borderColor:a.border.primary},className:"flex justify-between items-center p-4 rounded-xl border",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold",style:{background:r?"linear-gradient(135deg, rgba(245,158,11,0.3), rgba(245,158,11,0.1))":"linear-gradient(135deg, rgba(245,158,11,0.2), rgba(245,158,11,0.1))",color:a.accent.primary},children:""}),t.jsxs("div",{children:[t.jsx("div",{style:{color:a.text.primary},className:"font-semibold text-[15px] mb-1",children:u.businessName||"Merchant"}),t.jsx("div",{style:{color:a.text.tertiary},className:"text-xs",children:u.email})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"py-1 px-3 rounded-full text-[11px] font-bold uppercase tracking-wide",style:{background:u.isActive?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)",border:`1px solid ${u.isActive?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"}`,color:u.isActive?"#10B981":"#EF4444"},children:u.isActive?"Active":"Inactive"}),t.jsx("span",{style:{color:a.text.tertiary},className:"text-[11px] whitespace-nowrap",children:u.createdAt?new Date(u.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Recently"})]})]},u._id||c))}):t.jsxs("div",{style:{color:a.text.tertiary},className:"text-center py-16",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{children:"No merchants added yet"}),t.jsx("p",{className:"text-xs mt-2",children:"Navigate to the Merchants tab to add new merchants"})]})})]})})]})}function Ji({icon:e,label:a,value:r,subtitle:s,color:n,theme:l}){return t.jsxs("div",{style:{background:l.bg.card,borderColor:l.border.primary},className:"p-4 rounded-2xl border relative overflow-hidden transition-all duration-300",children:[t.jsx("div",{className:"absolute right-3 top-3 text-[32px] opacity-15",children:e}),t.jsx("div",{style:{color:l.text.secondary},className:"text-[10px] font-bold uppercase tracking-wide mb-2",children:a}),t.jsx("div",{style:{color:l.text.primary},className:"text-2xl font-extrabold mb-1",children:r}),t.jsx("div",{className:"text-[10px] font-semibold inline-block py-[2px] px-[8px] rounded-lg",style:{color:n,background:`${n}20`},children:s})]})}function Mv({isOpen:e,title:a,message:r,confirmText:s="Confirm",cancelText:n="Cancel",confirmColor:l="danger",onConfirm:o,onCancel:i}){if(!e)return null;const d=l==="danger"?{background:"linear-gradient(135deg, #EF4444 0%, #DC2626 100%)",color:"#FFFFFF"}:{background:"linear-gradient(135deg, #22C55E 0%, #16A34A 100%)",color:"#FFFFFF"};return t.jsxs("div",{onClick:i,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15, 18, 39, 0.9)",backdropFilter:"blur(8px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{onClick:u=>u.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",border:"1px solid rgba(255, 212, 28, 0.2)",padding:"32px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",animation:"slideUp 0.3s ease"},children:[t.jsx("h3",{style:{fontSize:"20px",fontWeight:700,color:"#FBFBFB",margin:"0 0 16px 0"},children:a}),t.jsx("p",{style:{fontSize:"14px",color:"rgba(251, 251, 251, 0.8)",margin:"0 0 24px 0",lineHeight:"1.6"},children:r}),t.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[t.jsx("button",{onClick:i,style:{padding:"12px 24px",background:"rgba(255, 212, 28, 0.1)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(255, 212, 28, 0.2)"},onMouseLeave:u=>{u.currentTarget.style.background="rgba(255, 212, 28, 0.1)"},children:n}),t.jsx("button",{onClick:o,style:{padding:"12px 24px",...d,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.opacity="0.9"},onMouseLeave:u=>{u.currentTarget.style.opacity="1"},children:s})]})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function Iv(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(!1),[d,u]=p.useState(null),[c,x]=p.useState(null),[m,h]=p.useState(""),[v,S]=p.useState(!1),[f,y]=p.useState(1),b=20,[g,j]=p.useState({isOpen:!1,merchantId:null}),[C,T]=p.useState({businessName:"",firstName:"",lastName:"",email:"",password:""});p.useEffect(()=>{E()},[]);const E=async()=>{try{const N=await Z.get("/merchant/merchants");s(N.merchants||[])}catch(N){console.error("Error loading merchants:",N),x({type:"error",message:"Failed to load merchants"})}finally{l(!1)}},D=()=>{u(null),T({businessName:"",firstName:"",lastName:"",email:"",password:""}),i(!0)},I=N=>{u(N),T({businessName:N.businessName||"",firstName:N.firstName||"",lastName:N.lastName||"",email:N.email||"",password:""}),i(!0)},z=async N=>{var k,A;if(N.preventDefault(),!C.businessName||C.businessName.trim().length===0){x({type:"error",message:"Business name is required"});return}if(!C.firstName||C.firstName.trim().length===0){x({type:"error",message:"First name is required"});return}if(!C.lastName||C.lastName.trim().length===0){x({type:"error",message:"Last name is required"});return}const w=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!C.email||!w.test(C.email.trim())){x({type:"error",message:"Please enter a valid email address"});return}if(C.password&&!/^\d{6}$/.test(C.password)){x({type:"error",message:"PIN must be exactly 6 digits"});return}S(!0);try{if(d){const O={...C};O.password||delete O.password,await Z.put(`/merchant/merchants/${d._id}`,O),x({type:"success",message:"Merchant updated successfully!"})}else{if(!C.password){x({type:"error",message:"PIN is required for new merchants"}),S(!1);return}await Z.post("/merchant/merchants",C),x({type:"success",message:"Merchant created successfully!"})}i(!1),E(),setTimeout(()=>x(null),3e3)}catch(O){console.error("Error saving merchant:",O);let q="Failed to save merchant";(k=O.message)!=null&&k.includes("Email already exists")||(A=O.error)!=null&&A.includes("Email already exists")?q="Email already exists. Please use a different email.":q=O.error||O.message||q,x({type:"error",message:q})}finally{S(!1)}},Y=async N=>{const w=!N.isActive,k=w?"activate":"deactivate";try{await Z.put(`/merchant/merchants/${N._id}`,{isActive:w}),x({type:"success",message:`Merchant ${k}d successfully!`}),E(),setTimeout(()=>x(null),3e3)}catch(A){console.error(`Error ${k}ing merchant:`,A),x({type:"error",message:`Failed to ${k} merchant`})}},_=N=>{j({isOpen:!0,merchantId:N})},V=async()=>{const N=g.merchantId;j({isOpen:!1,merchantId:null});try{await Z.delete(`/merchant/merchants/${N}`),x({type:"success",message:"Merchant deleted permanently!"}),i(!1),E(),setTimeout(()=>x(null),3e3)}catch(w){console.error("Error deleting merchant:",w),x({type:"error",message:"Failed to delete merchant"})}},R=r.filter(N=>{var w,k,A,O,q;return((w=N.businessName)==null?void 0:w.toLowerCase().includes(m.toLowerCase()))||((k=N.firstName)==null?void 0:k.toLowerCase().includes(m.toLowerCase()))||((A=N.lastName)==null?void 0:A.toLowerCase().includes(m.toLowerCase()))||((O=N.email)==null?void 0:O.toLowerCase().includes(m.toLowerCase()))||((q=N.merchantId)==null?void 0:q.toLowerCase().includes(m.toLowerCase()))}).sort((N,w)=>N.isActive!==w.isActive?w.isActive?1:-1:(N.businessName||"").localeCompare(w.businessName||"")),B=Math.ceil(R.length/b),F=(f-1)*b,$=R.slice(F,F+b);return p.useEffect(()=>{y(1)},[m]),n?t.jsx("div",{style:{color:e.accent.primary},className:"text-center py-[60px]",children:"Loading merchants..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{style:{color:e.text.primary},className:"text-2xl font-bold m-0 mb-2",children:"Merchant Accounts"}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm m-0",children:[R.length," merchant",R.length!==1?"s":""," registered (Page ",f," of ",B||1,")"]})]}),t.jsxs("button",{onClick:D,style:{background:e.accent.primary,color:a?"#181D40":"#FFF"},className:"py-3 px-6 rounded-xl text-sm font-bold cursor-pointer flex items-center gap-2 shadow-lg border-none",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Add Merchant"})]})]}),c&&t.jsxs("div",{className:"py-3 px-5 rounded-xl text-sm font-semibold mb-5 flex items-center gap-2",style:{background:c.type==="success"?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)",border:`2px solid ${c.type==="success"?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"}`,color:c.type==="success"?"#10B981":"#EF4444"},children:[t.jsx("span",{children:c.type==="success"?"":""}),t.jsx("span",{children:c.message})]}),t.jsx("div",{className:"mb-5",children:t.jsx("input",{type:"text",placeholder:" Search merchants by name, contact, email, or ID...",value:m,onChange:N=>h(N.target.value),style:{background:a?"rgba(30,35,71,0.5)":"rgba(0,0,0,0.04)",borderColor:e.border.primary,color:e.text.primary},className:"w-full py-3 px-4 border-2 rounded-xl text-sm outline-none"})}),t.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[R.length>0?t.jsx("div",{className:"grid gap-5",style:{gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))"},children:$.map(N=>t.jsx(Lv,{merchant:N,onEdit:I,onToggleActive:Y,theme:e,isDarkMode:a},N._id))}):t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary,color:e.text.tertiary},className:"rounded-2xl border-2 p-16 text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:""}),t.jsx("p",{className:"m-0 text-base",children:m?"No merchants found matching your search":"No merchants yet. Add your first merchant!"})]}),B>1&&t.jsxs("div",{style:{borderColor:e.border.primary},className:"flex justify-center items-center gap-3 mt-6 pt-6 border-t-2",children:[t.jsx("button",{onClick:()=>y(N=>Math.max(1,N-1)),disabled:f===1,style:{background:f===1?`${e.accent.primary}15`:`${e.accent.primary}30`,borderColor:e.border.primary,color:f===1?e.text.tertiary:e.accent.primary},className:"py-2 px-5 border-2 rounded-lg text-sm font-semibold transition-all",...f===1?{style:{cursor:"not-allowed"}}:{style:{cursor:"pointer"}},children:" Previous"}),t.jsxs("span",{style:{color:e.text.secondary},className:"text-sm font-semibold min-w-[120px] text-center",children:["Page ",f," of ",B]}),t.jsx("button",{onClick:()=>y(N=>Math.min(B,N+1)),disabled:f===B,style:{background:f===B?`${e.accent.primary}15`:`${e.accent.primary}30`,borderColor:e.border.primary,color:f===B?e.text.tertiary:e.accent.primary,cursor:f===B?"not-allowed":"pointer"},className:"py-2 px-5 border-2 rounded-lg text-sm font-semibold transition-all",children:"Next "})]})]}),o&&t.jsx("div",{onClick:()=>i(!1),className:"fixed inset-0 flex items-center justify-center z-[9999]",style:{background:"rgba(0,0,0,0.7)",backdropFilter:"blur(8px)"},children:t.jsxs("div",{onClick:N=>N.stopPropagation(),style:{background:a?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border p-8 w-[90%] max-w-[600px] max-h-[90vh] overflow-auto shadow-2xl",children:[t.jsx("h3",{style:{color:e.text.primary},className:"text-xl font-bold m-0 mb-6",children:d?"Edit Merchant":"Add New Merchant"}),t.jsxs("form",{onSubmit:z,children:[t.jsxs("div",{className:"grid gap-4",children:[d&&d.merchantId&&t.jsxs("div",{children:[t.jsx("label",{style:{color:e.accent.primary},className:"block mb-2 text-xs font-bold uppercase tracking-wide",children:"Merchant ID"}),t.jsx("div",{style:{background:`${e.accent.primary}15`,borderColor:e.border.primary,color:e.accent.primary},className:"py-3 px-4 border-2 rounded-lg text-sm font-bold",children:d.merchantId})]}),t.jsx(El,{label:"Business Name",value:C.businessName,onChange:N=>T({...C,businessName:N}),placeholder:"e.g., Canteen 1",required:!0,theme:e}),t.jsx(El,{label:"First Name",value:C.firstName,onChange:N=>T({...C,firstName:N}),placeholder:"e.g., Juan",required:!0,theme:e}),t.jsx(El,{label:"Last Name",value:C.lastName,onChange:N=>T({...C,lastName:N}),placeholder:"e.g., Dela Cruz",required:!0,theme:e}),t.jsx(El,{label:"Email",type:"email",value:C.email,onChange:N=>T({...C,email:N}),placeholder:"merchant@nu-laguna.edu.ph",required:!0,theme:e}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:e.accent.primary},className:"block mb-2 text-xs font-bold uppercase tracking-wide",children:[d?"6-Digit PIN (leave blank to keep current)":"6-Digit PIN"," ",!d&&t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:C.password,onChange:N=>{const w=N.target.value;(w===""||/^\d+$/.test(w))&&T({...C,password:w})},required:!d,maxLength:"6",placeholder:"123456",pattern:"\\d{6}",style:{background:a?"rgba(251,251,251,0.05)":"rgba(0,0,0,0.03)",borderColor:e.border.primary,color:e.text.primary},className:"w-full py-3 px-4 border-2 rounded-lg text-lg text-center font-bold tracking-[8px] outline-none box-border"})]})]}),t.jsxs("div",{className:`flex gap-3 mt-6 ${d?"justify-between":"justify-end"}`,children:[d&&t.jsx("button",{type:"button",onClick:()=>_(d._id),className:"py-3 px-6 rounded-lg text-sm font-semibold cursor-pointer transition-all border-2 hover:opacity-80",style:{background:"rgba(239,68,68,0.15)",borderColor:"rgba(239,68,68,0.4)",color:"#EF4444"},children:" Delete Permanently"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{type:"button",onClick:()=>i(!1),style:{background:`${e.accent.primary}15`,borderColor:e.border.primary,color:e.accent.primary},className:"py-3 px-6 border-2 rounded-lg text-sm font-semibold cursor-pointer",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:v,style:{background:v?"#999":e.accent.primary,color:a?"#181D40":"#FFF",opacity:v?.6:1},className:"py-3 px-6 border-none rounded-lg text-sm font-bold cursor-pointer shadow-lg",children:v?"Saving...":d?"Update Merchant":"Create Merchant"})]})]})]})]})}),t.jsx(Mv,{isOpen:g.isOpen,title:"Delete Merchant",message:"Are you sure you want to permanently delete this merchant? This action cannot be undone.",confirmText:"Delete Merchant",cancelText:"Cancel",confirmColor:"danger",onConfirm:V,onCancel:()=>j({isOpen:!1,merchantId:null})})]})}function Lv({merchant:e,onEdit:a,onToggleActive:r,theme:s,isDarkMode:n}){const l=e.isActive!==!1;return t.jsxs("div",{style:{background:s.bg.card,borderColor:s.border.primary,opacity:l?1:.7},className:"rounded-2xl border-2 p-6 transition-all duration-200 cursor-pointer hover:-translate-y-1 hover:shadow-xl",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("div",{style:{background:`${s.accent.primary}20`,borderColor:s.border.primary,color:s.accent.primary},className:"py-1.5 px-3.5 border rounded-lg text-xs font-bold",children:e.merchantId||"N/A"}),t.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:l?"#10B981":"#EF4444",boxShadow:`0 0 0 3px ${l?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)"}`}})]}),t.jsx("h3",{style:{color:s.text.primary},className:"text-xl font-bold m-0 mb-2",children:e.businessName}),t.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[t.jsxs("div",{style:{color:s.text.secondary},className:"text-[13px] flex items-center gap-2",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:[e.firstName," ",e.lastName]})]}),t.jsxs("div",{style:{color:s.text.secondary},className:"text-[13px] flex items-center gap-2",children:[t.jsx("span",{children:""}),t.jsx("span",{children:e.email})]})]}),t.jsxs("div",{style:{borderColor:s.border.primary},className:"flex gap-2 pt-4 border-t",children:[t.jsx("button",{onClick:o=>{o.stopPropagation(),a(e)},className:"flex-1 py-2.5 px-4 rounded-lg text-[13px] font-semibold cursor-pointer transition-all border hover:opacity-80",style:{background:"rgba(59,130,246,0.2)",borderColor:"rgba(59,130,246,0.4)",color:"#3B82F6"},children:" Edit"}),t.jsx("button",{onClick:o=>{o.stopPropagation(),r(e)},className:"flex-1 py-2.5 px-4 rounded-lg text-[13px] font-semibold cursor-pointer transition-all border hover:opacity-80",style:{background:l?"rgba(239,68,68,0.2)":"rgba(16,185,129,0.2)",borderColor:l?"rgba(239,68,68,0.4)":"rgba(16,185,129,0.4)",color:l?"#EF4444":"#10B981"},children:l?" Deactivate":" Activate"})]})]})}function El({label:e,type:a="text",value:r,onChange:s,placeholder:n,required:l,theme:o}){return t.jsxs("div",{children:[t.jsxs("label",{style:{color:o.accent.primary},className:"block mb-2 text-xs font-bold uppercase tracking-wide",children:[e," ",l&&t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:a,value:r,onChange:i=>s(i.target.value),placeholder:n,required:l,style:{background:"rgba(251,251,251,0.05)",borderColor:o.border.primary,color:o.text.primary},className:"w-full py-3 px-4 border-2 rounded-lg text-sm outline-none box-border"})]})}function Ov(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState([]),[o,i]=p.useState(!0),[d,u]=p.useState(!1),[c,x]=p.useState(null),[m,h]=p.useState(null),[v,S]=p.useState(""),[f,y]=p.useState(1),b=20,[g,j]=p.useState({phoneId:"",phoneModel:"",phoneType:"Android",assignedMerchantId:"",assignedBusinessName:"",status:"available",notes:""}),C=async()=>{try{const k=await Z.get("/merchant/phones");s(Array.isArray(k)?k:[]),i(!1)}catch(k){console.error("Error loading phones:",k),i(!1)}},T=async()=>{try{const k=await Z.get("/merchant/merchants");l(Array.isArray(k)?k:[])}catch(k){console.error("Error loading merchants:",k)}};p.useEffect(()=>{C(),T();const k=setInterval(C,5e3);return()=>clearInterval(k)},[]);const E=()=>{if(r.length===0)return"PHONE_001";let k=0;for(const A of r)if(A.phoneId){const O=A.phoneId.match(/PHONE_(\d+)/i);if(O){const q=parseInt(O[1],10);q>k&&(k=q)}}return`PHONE_${String(k+1).padStart(3,"0")}`},D=k=>{if(!k)j({...g,assignedMerchantId:"",assignedBusinessName:"",status:"available",assignedMerchantDate:null});else{const A=n.find(O=>O.merchantId===k);j({...g,assignedMerchantId:k,assignedBusinessName:(A==null?void 0:A.businessName)||"",status:"assigned",assignedMerchantDate:new Date})}},I=async k=>{var A,O;k.preventDefault();try{c?(await Z.put(`/merchant/phones/${c._id}`,g),h({type:"success",message:"Phone updated successfully!"})):(await Z.post("/merchant/phones",g),h({type:"success",message:"Phone created successfully!"})),u(!1),x(null),V(),C(),setTimeout(()=>h(null),3e3)}catch(q){h({type:"error",message:((O=(A=q.response)==null?void 0:A.data)==null?void 0:O.error)||"Failed to save phone"})}},z=k=>{x(k),j({phoneId:k.phoneId,phoneModel:k.phoneModel,phoneType:k.phoneType,assignedMerchantId:k.assignedMerchantId||"",assignedBusinessName:k.assignedBusinessName||"",status:k.status,notes:k.notes||""}),u(!0)},Y=async k=>{var A,O;if(window.confirm("Are you sure you want to delete this phone?"))try{await Z.delete(`/merchant/phones/${k}`),h({type:"success",message:"Phone deleted successfully!"}),C(),setTimeout(()=>h(null),3e3)}catch(q){h({type:"error",message:((O=(A=q.response)==null?void 0:A.data)==null?void 0:O.error)||"Failed to delete phone"})}},_=async(k,A)=>{try{const O=n.find(U=>U.merchantId===A),q={...k,assignedMerchantId:A||null,assignedBusinessName:(O==null?void 0:O.businessName)||null,assignedMerchantDate:A?new Date:null,status:A?"assigned":"available"};await Z.put(`/merchant/phones/${k._id}`,q),h({type:"success",message:"Merchant assignment updated!"}),C(),setTimeout(()=>h(null),2e3)}catch{h({type:"error",message:"Failed to update assignment"})}},V=()=>{j({phoneId:"",phoneModel:"",phoneType:"Android",assignedMerchantId:"",assignedBusinessName:"",status:"available",notes:""})},R=k=>{switch(k){case"available":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"assigned":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"maintenance":return{bg:"rgba(251,191,36,0.2)",color:"#FBBF24"};case"retired":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};default:return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"}}},B=()=>{const k=Jr(F);zt(k,"merchant-phones")},F=r.filter(k=>{var O,q,U,H,J,ee;if(!v)return!0;const A=v.toLowerCase();return((O=k.phoneId)==null?void 0:O.toLowerCase().includes(A))||((q=k.phoneModel)==null?void 0:q.toLowerCase().includes(A))||((U=k.phoneType)==null?void 0:U.toLowerCase().includes(A))||((H=k.assignedBusinessName)==null?void 0:H.toLowerCase().includes(A))||((J=k.assignedMerchantId)==null?void 0:J.toLowerCase().includes(A))||((ee=k.status)==null?void 0:ee.toLowerCase().includes(A))}),$=Math.ceil(F.length/b),N=(f-1)*b,w=F.slice(N,N+b);return p.useEffect(()=>{y(1)},[v]),o?t.jsx("div",{style:{color:e.accent.primary},className:"text-center py-[60px]",children:"Loading phones..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[m&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:m.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:m.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${m.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4},children:m.message}),t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-7 border-b-2 pb-5",children:[t.jsxs("div",{className:"flex justify-between items-start mb-5",children:[t.jsxs("div",{children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-2.5",children:[t.jsx("span",{children:""})," Merchant Phone Inventory"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:v?`Showing: ${F.length} of ${r.length} (Page ${f} of ${$||1})`:`Total devices: ${r.length}  Available: ${r.filter(k=>k.status==="available").length}  Assigned: ${r.filter(k=>k.status==="assigned").length} (Page ${f} of ${$||1})`})]}),t.jsx("button",{onClick:()=>{V(),x(null),u(!0)},style:{background:e.accent.primary,color:a?"#181D40":"#FFF"},className:"py-3 px-6 rounded-lg text-sm font-bold cursor-pointer border-none shadow-lg transition-all",children:"+ Add Phone"})]}),t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsx(Ht,{value:v,onChange:S,placeholder:"Search by phone ID, model, serial, or merchant..."}),t.jsx(qt,{onClick:B,disabled:F.length===0})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[r.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-[60px]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{children:"No phones found"})]}):F.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-[60px]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{className:"mb-3",children:"No phones match your search"}),t.jsx("button",{onClick:()=>S(""),style:{background:`${e.accent.primary}20`,borderColor:e.border.primary,color:e.accent.primary},className:"py-2 px-4 border-2 rounded-lg text-[13px] font-semibold cursor-pointer",children:"Clear Search"})]}):t.jsx("div",{style:{borderColor:e.border.primary},className:"overflow-x-auto rounded-xl border",children:t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsx("tr",{style:{background:`${e.accent.primary}15`},children:["Phone ID","Device","Type","Assigned Merchant","Status",""].map((k,A)=>t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary,textAlign:A===5?"right":"left"},className:"p-4 text-[11px] font-extrabold uppercase border-b-2",children:k||"Actions"},k||"actions"))})}),t.jsx("tbody",{children:w.map(k=>{const A=R(k.status);return t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[t.jsx("td",{style:{color:e.text.primary},className:"p-4",children:t.jsx("strong",{children:k.phoneId})}),t.jsx("td",{style:{color:e.text.primary},className:"p-4",children:k.phoneModel}),t.jsx("td",{style:{color:e.text.primary},className:"p-4",children:k.phoneType}),t.jsx("td",{className:"p-4",children:t.jsxs("select",{value:k.assignedMerchantId||"",onChange:O=>_(k,O.target.value),style:{background:`${e.accent.primary}15`,color:e.accent.primary,borderColor:e.border.primary},className:"py-2 px-3 border rounded-md text-xs font-semibold cursor-pointer min-w-[200px]",children:[t.jsx("option",{value:"",children:"Unassigned"}),n.map(O=>t.jsxs("option",{value:O.merchantId,children:[O.businessName," (",O.merchantId,")"]},O.merchantId))]})}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:"py-1.5 px-3 rounded-md text-[11px] font-bold uppercase inline-block",style:{background:A.bg,color:A.color},children:k.status})}),t.jsxs("td",{className:"p-4 text-right",children:[t.jsx("button",{onClick:()=>z(k),className:"py-1.5 px-3 rounded-md text-xs font-semibold cursor-pointer mr-2 border hover:opacity-80 transition-all",style:{background:"rgba(59,130,246,0.2)",color:"#3B82F6",borderColor:"rgba(59,130,246,0.3)"},children:"Edit"}),t.jsx("button",{onClick:()=>Y(k._id),className:"py-1.5 px-3 rounded-md text-xs font-semibold cursor-pointer border hover:opacity-80 transition-all",style:{background:"rgba(239,68,68,0.2)",color:"#EF4444",borderColor:"rgba(239,68,68,0.3)"},children:"Delete"})]})]},k._id)})})]})}),$>1&&t.jsxs("div",{style:{borderColor:e.border.primary},className:"flex justify-center items-center gap-3 mt-6 pt-6 border-t-2",children:[t.jsx("button",{onClick:()=>y(k=>Math.max(1,k-1)),disabled:f===1,style:{background:f===1?`${e.accent.primary}15`:`${e.accent.primary}30`,borderColor:e.border.primary,color:f===1?e.text.tertiary:e.accent.primary,cursor:f===1?"not-allowed":"pointer"},className:"py-2.5 px-5 border-2 rounded-lg text-sm font-semibold transition-all",children:" Previous"}),t.jsxs("span",{style:{color:e.text.secondary},className:"text-sm font-semibold min-w-[120px] text-center",children:["Page ",f," of ",$]}),t.jsx("button",{onClick:()=>y(k=>Math.min($,k+1)),disabled:f===$,style:{background:f===$?`${e.accent.primary}15`:`${e.accent.primary}30`,borderColor:e.border.primary,color:f===$?e.text.tertiary:e.accent.primary,cursor:f===$?"not-allowed":"pointer"},className:"py-2.5 px-5 border-2 rounded-lg text-sm font-semibold transition-all",children:"Next "})]})]}),d&&t.jsx("div",{onClick:()=>u(!1),className:"fixed inset-0 flex items-center justify-center z-[9999]",style:{background:"rgba(0,0,0,0.7)",backdropFilter:"blur(8px)"},children:t.jsxs("div",{onClick:k=>k.stopPropagation(),style:{background:a?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":e.bg.card,borderColor:e.border.primary},className:"rounded-2xl max-w-[600px] w-[90%] max-h-[85vh] overflow-auto border-2 shadow-2xl",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-6 border-b-2 flex justify-between items-center",children:[t.jsx("h2",{style:{color:e.accent.primary},className:"text-[22px] font-bold m-0",children:c?"Edit Phone":"Add New Phone"}),t.jsx("button",{onClick:()=>u(!1),className:"w-8 h-8 rounded-full flex items-center justify-center cursor-pointer text-lg border-none",style:{background:"rgba(239,68,68,0.2)",color:"#EF4444"},children:""})]}),t.jsxs("form",{onSubmit:I,className:"p-6",children:[t.jsx(Dx,{label:"Phone ID",disabled:!0,value:c?g.phoneId:E(),theme:e,isDarkMode:a,hint:c?void 0:"(Auto-generated)"}),t.jsx(Dx,{label:"Phone Model *",value:g.phoneModel,onChange:k=>j({...g,phoneModel:k}),required:!0,placeholder:"e.g., Samsung Galaxy A14",theme:e,isDarkMode:a}),t.jsxs("div",{className:"mb-5",children:[t.jsx("label",{style:{color:e.accent.primary},className:"block mb-2 text-xs font-bold uppercase",children:"Phone Type *"}),t.jsxs("select",{value:g.phoneType,onChange:k=>j({...g,phoneType:k.target.value}),required:!0,style:{background:a?"rgba(251,251,251,0.05)":"rgba(0,0,0,0.03)",borderColor:e.border.primary,color:e.text.primary},className:"w-full py-3 px-4 border-2 rounded-lg text-sm cursor-pointer box-border",children:[t.jsx("option",{value:"Android",children:"Android"}),t.jsx("option",{value:"iOS",children:"iOS"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{className:"mb-5",children:[t.jsx("label",{style:{color:e.accent.primary},className:"block mb-2 text-xs font-bold uppercase",children:"Assign to Merchant"}),t.jsxs("select",{value:g.assignedMerchantId,onChange:k=>D(k.target.value),style:{background:a?"rgba(251,251,251,0.05)":"rgba(0,0,0,0.03)",borderColor:e.border.primary,color:e.text.primary},className:"w-full py-3 px-4 border-2 rounded-lg text-sm cursor-pointer box-border",children:[t.jsx("option",{value:"",children:"Unassigned"}),n.map(k=>t.jsxs("option",{value:k.merchantId,children:[k.businessName," (",k.merchantId,")"]},k.merchantId))]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{style:{color:e.accent.primary},className:"block mb-2 text-xs font-bold uppercase",children:"Notes"}),t.jsx("textarea",{value:g.notes,onChange:k=>j({...g,notes:k.target.value}),rows:"3",placeholder:"Any additional notes about this device",style:{background:a?"rgba(251,251,251,0.05)":"rgba(0,0,0,0.03)",borderColor:e.border.primary,color:e.text.primary},className:"w-full py-3 px-4 border-2 rounded-lg text-sm box-border font-[inherit] resize-y"})]}),t.jsxs("div",{style:{borderColor:e.border.primary},className:"flex gap-2.5 justify-end pt-5 border-t-2",children:[t.jsx("button",{type:"button",onClick:()=>u(!1),style:{background:a?"rgba(251,251,251,0.1)":"rgba(0,0,0,0.05)",color:e.text.secondary,borderColor:e.border.primary},className:"py-3 px-6 border rounded-lg text-sm font-semibold cursor-pointer",children:"Cancel"}),t.jsx("button",{type:"submit",style:{background:e.accent.primary,color:a?"#181D40":"#FFF"},className:"py-3 px-6 border-none rounded-lg text-sm font-bold cursor-pointer shadow-lg",children:c?"Update Phone":"Create Phone"})]})]})]})})]})}function Dx({label:e,value:a,onChange:r,disabled:s,required:n,placeholder:l,hint:o,theme:i,isDarkMode:d}){return t.jsxs("div",{className:"mb-5",children:[t.jsxs("label",{style:{color:i.accent.primary},className:"block mb-2 text-xs font-bold uppercase",children:[e," ",o&&t.jsx("span",{style:{color:i.text.tertiary},className:"text-[11px] font-normal",children:o})]}),t.jsx("input",{type:"text",value:a,onChange:r?u=>r(u.target.value):void 0,disabled:s,required:n,placeholder:l,style:{background:s?"rgba(100,100,100,0.2)":d?"rgba(251,251,251,0.05)":"rgba(0,0,0,0.03)",borderColor:i.border.primary,color:s?i.text.tertiary:i.text.primary,cursor:s?"not-allowed":"text"},className:"w-full py-3 px-4 border-2 rounded-lg text-sm box-border outline-none"})]})}function $v(){var de,we;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState("all"),[d,u]=p.useState(""),[c,x]=p.useState(""),[m,h]=p.useState(""),[v,S]=p.useState(""),[f,y]=p.useState(null),[b,g]=p.useState(!1),[j,C]=p.useState(!1),[T,E]=p.useState(""),[D,I]=p.useState(!1),[z,Y]=p.useState(1),[_,V]=p.useState("details"),[R,B]=p.useState(""),[F,$]=p.useState(!1),N=15,w=p.useRef(null),k=async(ae=!1)=>{try{ae||l(!0);const ue=new URLSearchParams;c&&ue.append("status",c),d&&ue.append("search",d);const Ce=await Z.get(`/admin/user-concerns?${ue}`);if(Ce!=null&&Ce.concerns||Array.isArray(Ce)){const Ne=(Ce.concerns||Ce).filter(Ue=>Ue.reportTo==="Merchant Office");s(Ne)}}catch{ae||W.error("Failed to load concerns")}finally{ae||l(!1)}};p.useEffect(()=>(k(!1),w.current=setInterval(()=>k(!0),1e4),()=>{w.current&&clearInterval(w.current)}),[c,d]);const A=ae=>{y(ae),g(!0),V("details")},O=async(ae,ue)=>{try{if(ue==="resolved"){y(ae),g(!1),C(!0);return}(await Z.put(`/admin/concerns/${ae._id}/status`,{status:ue})).success&&(W.success("Status updated successfully"),k(!0))}catch{W.error("Failed to update status")}},q=async()=>{if(!T.trim()){W.error("Please provide a resolution message");return}I(!0);try{(await Z.put(`/admin/concerns/${f._id}/status`,{status:"resolved",adminResponse:T,resolvedDate:new Date().toISOString()})).success&&(W.success("Concern resolved successfully"),C(!1),E(""),y(null),k(!0))}catch{W.error("Failed to resolve concern")}finally{I(!1)}},U=async()=>{if(!R.trim()){W.error("Please enter a note");return}$(!0);try{if((await Z.post(`/admin/concerns/${f._id}/notes`,{message:R,adminName:"Merchant Admin"})).success){W.success("Note added successfully"),B("");const ue={...f};ue.notes=ue.notes||[],ue.notes.push({message:R,adminName:"Merchant Admin",timestamp:new Date().toISOString()}),y(ue),k(!0)}}catch{W.error("Failed to add note")}finally{$(!1)}},H=()=>{zt(X||[],"merchant-concerns")},J=ae=>{switch(ae){case"pending":return"#FBBF24";case"in_progress":return"#3B82F6";case"resolved":return"#10B981";default:return e.text.secondary}},ee=ae=>{switch(ae){case"pending":return"";case"in_progress":return"";case"resolved":return"";default:return""}},L=ae=>ae?new Date(ae).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",X=(r||[]).filter(ae=>o==="all"?!0:o==="assistance"?ae.submissionType==="assistance":o==="feedback"?ae.submissionType==="feedback":!0),te=Math.ceil((X||[]).length/N),ce=(X||[]).slice((z-1)*N,z*N);return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading concerns..."]}):t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Merchant Concerns"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Manage concerns reported to Merchant Office"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-5",children:[t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(251, 191, 36, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(251, 191, 36, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Pending"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-500",children:(r||[]).filter(ae=>ae.status==="pending").length})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(59, 130, 246, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(59, 130, 246, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"In Progress"}),t.jsx("p",{className:"text-2xl font-bold text-blue-500",children:(r||[]).filter(ae=>ae.status==="in_progress").length})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(16, 185, 129, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(16, 185, 129, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Resolved"}),t.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:(r||[]).filter(ae=>ae.status==="resolved").length})]})]})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.8)":e.bg.card,borderColor:e.accent.primary},className:"rounded-xl border-2 p-4 mb-5 flex flex-col lg:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row gap-3",children:[t.jsx(Ht,{value:d,onChange:u,placeholder:"Search concerns...",theme:e,isDarkMode:a}),t.jsx(aa,{value:c,onChange:x,theme:e,isDarkMode:a,options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"}]}),t.jsx(yr,{startDate:m,endDate:v,onStartChange:h,onEndChange:S,theme:e,isDarkMode:a})]}),t.jsx(qt,{onClick:H,disabled:!X||X.length===0})]}),t.jsx("div",{className:"flex gap-2 mb-5",children:[{value:"all",label:"All Concerns"},{value:"assistance",label:"Assistance"},{value:"feedback",label:"Feedback"}].map(ae=>t.jsx("button",{onClick:()=>i(ae.value),style:{background:o===ae.value?e.accent.primary:a?"rgba(30,35,71,0.8)":"#F9FAFB",color:o===ae.value?a?"#181D40":"#FFFFFF":e.text.primary,borderColor:e.border.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm border hover:opacity-80 transition",children:ae.label},ae.value))}),t.jsx("div",{className:"mb-4",children:t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:["Showing ",t.jsx("span",{style:{color:e.accent.primary},className:"font-bold",children:(X||[]).length})," concerns"]})}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:(X||[]).length?t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB"},children:t.jsxs("tr",{style:{borderColor:e.border.primary},className:"border-b",children:[t.jsx("th",{style:{color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"ID"}),t.jsx("th",{style:{color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"User"}),t.jsx("th",{style:{color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Subject"}),t.jsx("th",{style:{color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Date"}),t.jsx("th",{style:{color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:(ce||[]).map(ae=>{var ue;return t.jsxs("tr",{style:{borderColor:e.border.primary},className:"border-b hover:bg-white/5 transition",children:[t.jsx("td",{style:{color:e.text.primary},className:"p-4",children:t.jsx("span",{className:"font-mono text-xs",children:ae.concernId||"N/A"})}),t.jsx("td",{style:{color:e.text.primary},className:"p-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-sm",children:ae.userName||"Unknown"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs",children:ae.userEmail||"No email"})]})}),t.jsxs("td",{style:{color:e.text.primary},className:"p-4",children:[t.jsx("p",{className:"font-semibold text-sm",children:ae.subject||"No subject"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs line-clamp-2",children:ae.feedbackText||ae.otherConcern||"No details"})]}),t.jsx("td",{className:"p-4",children:t.jsxs("span",{style:{background:`${J(ae.status)}20`,color:J(ae.status)},className:"px-2 py-1 rounded-full text-xs font-semibold capitalize flex items-center gap-1 w-fit",children:[t.jsx("span",{children:ee(ae.status)}),(ue=ae.status)==null?void 0:ue.replace("_"," ")]})}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4",children:t.jsx("p",{className:"text-xs",children:L(ae.createdAt||ae.submittedAt)})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>A(ae),style:{background:"rgba(59,130,246,0.1)",color:"#3B82F6"},className:"px-3 py-1 rounded text-xs font-semibold hover:opacity-80 transition",children:"View"}),ae.status!=="resolved"&&t.jsx("button",{onClick:()=>O(ae,"in_progress"),style:{background:"rgba(251,191,36,0.1)",color:"#F59E0B"},className:"px-3 py-1 rounded text-xs font-semibold hover:opacity-80 transition",children:"Progress"}),ae.status!=="resolved"&&t.jsx("button",{onClick:()=>O(ae,"resolved"),style:{background:"rgba(16,185,129,0.1)",color:"#10B981"},className:"px-3 py-1 rounded text-xs font-semibold hover:opacity-80 transition",children:"Resolve"})]})})]},ae._id)})})]})}):t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{className:"font-semibold",children:"No concerns found"}),t.jsx("p",{className:"text-sm mt-2",children:(r||[]).length?"Try adjusting your filters":"No concerns have been reported to Merchant Office"})]})})}),te>1&&t.jsxs("div",{className:"flex justify-center items-center gap-2 mt-5",children:[t.jsx("button",{onClick:()=>Y(ae=>Math.max(1,ae-1)),disabled:z===1,style:{background:z===1?"rgba(0,0,0,0.1)":e.accent.primary,color:z===1?e.text.secondary:a?"#181D40":"#FFFFFF",cursor:z===1?"not-allowed":"pointer"},className:"px-3 py-1 rounded text-sm font-semibold transition",children:"Previous"}),t.jsxs("span",{style:{color:e.text.primary},className:"text-sm",children:["Page ",z," of ",te]}),t.jsx("button",{onClick:()=>Y(ae=>Math.min(te,ae+1)),disabled:z===te,style:{background:z===te?"rgba(0,0,0,0.1)":e.accent.primary,color:z===te?e.text.secondary:a?"#181D40":"#FFFFFF",cursor:z===te?"not-allowed":"pointer"},className:"px-3 py-1 rounded text-sm font-semibold transition",children:"Next"})]}),b&&f&&t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:()=>g(!1),children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-4xl max-h-[85vh] overflow-hidden",onClick:ae=>ae.stopPropagation(),children:[t.jsxs("div",{style:{background:a?`linear-gradient(135deg, ${J(f.status)}30 0%, ${J(f.status)}10 100%)`:`linear-gradient(135deg, ${J(f.status)}20 0%, ${J(f.status)}10 100%)`,borderColor:`${J(f.status)}50`},className:"px-6 py-4 flex items-center justify-between border-b",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:`${J(f.status)}30`},className:"w-10 h-10 rounded-full flex items-center justify-center",children:t.jsx("span",{children:ee(f.status)})}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:J(f.status)},className:"text-xl font-bold",children:"Concern Details"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:f.concernId||"No ID"})]})]}),t.jsx("button",{onClick:()=>g(!1),style:{color:e.text.secondary},className:"hover:opacity-70 transition-colors",children:""})]}),t.jsxs("div",{style:{padding:"0 24px",borderBottom:`2px solid ${e.border.primary}`,display:"flex",gap:"8px"},children:[t.jsx("button",{onClick:()=>V("details"),style:{padding:"12px 20px",background:"transparent",border:"none",borderBottom:`3px solid ${_==="details"?e.accent.primary:"transparent"}`,color:_==="details"?e.accent.primary:e.text.secondary,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:" Details"}),t.jsxs("button",{onClick:()=>V("notes"),style:{padding:"12px 20px",background:"transparent",border:"none",borderBottom:`3px solid ${_==="notes"?e.accent.primary:"transparent"}`,color:_==="notes"?e.accent.primary:e.text.secondary,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Notes ",((de=f.notes)==null?void 0:de.length)>0&&`(${f.notes.length})`]})]}),t.jsx("div",{style:{flex:1,overflow:"auto",padding:"24px",maxHeight:"60vh"},children:_==="details"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex items-center gap-3 mb-5",children:t.jsxs("span",{style:{background:`${J(f.status)}20`,color:J(f.status)},className:"px-3 py-1.5 rounded-full text-sm font-bold capitalize flex items-center gap-2",children:[t.jsx("span",{children:ee(f.status)}),(we=f.status)==null?void 0:we.replace("_"," ")]})}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"rounded-xl border p-4 space-y-3 mb-5",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Submitted By"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold text-right",children:f.userName||"Unknown"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Email"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold",children:f.userEmail||"N/A"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Subject"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold text-right max-w-[60%]",children:f.subject||"N/A"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Submitted To"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold",children:f.reportTo||"N/A"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Date"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold",children:L(f.createdAt||f.submittedAt)})]})]}),t.jsxs("div",{className:"mb-5",children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-sm font-semibold mb-2",children:"Message"}),t.jsx("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"rounded-xl border p-4",children:t.jsx("p",{style:{color:e.text.primary},className:"whitespace-pre-wrap",children:f.feedbackText||f.otherConcern||"No message provided"})})]}),f.status!=="resolved"&&t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{g(!1),O(f,"in_progress")},style:{background:"rgba(251,191,36,0.1)",color:"#F59E0B"},className:"px-4 py-2 rounded-lg font-semibold hover:opacity-80 transition",children:"Mark as In Progress"}),t.jsx("button",{onClick:()=>{g(!1),O(f,"resolved")},style:{background:"rgba(16,185,129,0.1)",color:"#10B981"},className:"px-4 py-2 rounded-lg font-semibold hover:opacity-80 transition",children:"Resolve"})]})]}):t.jsxs("div",{children:[t.jsx("div",{className:"mb-5",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:R,onChange:ae=>B(ae.target.value),placeholder:"Add a note...",style:{flex:1,background:a?"rgba(15,18,39,0.6)":"#F9FAFB",border:`2px solid ${e.border.primary}`,borderRadius:"12px",color:e.text.primary,padding:"12px 16px",outline:"none"}}),t.jsx("button",{onClick:U,disabled:F,style:{background:e.accent.primary,color:a?"#181D40":"#FFFFFF",borderRadius:"12px",padding:"12px 20px",fontWeight:600,cursor:F?"not-allowed":"pointer",opacity:F?.6:1},children:F?"Adding...":"Add Note"})]})}),!f.notes||f.notes.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:e.text.tertiary},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("p",{style:{fontSize:"14px",margin:0},children:"No notes yet"}),t.jsx("p",{style:{fontSize:"12px",color:e.text.muted,marginTop:"8px"},children:"Add notes to track progress on this concern"})]}):t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:f.notes.slice().reverse().map((ae,ue)=>t.jsxs("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsxs("span",{style:{color:e.accent.primary,fontSize:"12px",fontWeight:700},children:[" ",ae.adminName||"Admin"]}),t.jsx("span",{style:{color:e.text.muted,fontSize:"11px"},children:ae.timestamp?L(ae.timestamp):""})]}),t.jsx("p",{style:{color:e.text.primary,margin:0,lineHeight:"1.5"},children:ae.message})]},ue))})]})}),t.jsx("div",{className:"px-6 py-4 flex justify-end border-t",style:{borderColor:e.border.primary},children:t.jsx("button",{onClick:()=>g(!1),style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"px-6 py-2.5 rounded-xl font-semibold transition-all hover:opacity-80",children:"Close"})})]})]}),j&&f&&t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:()=>C(!1),children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-lg",onClick:ae=>ae.stopPropagation(),children:[t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"px-6 py-5 flex items-center justify-between border-b",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:"#10B981"},className:"text-xl font-bold",children:"Resolve Concern"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:f.concernId||"No ID"})]})]}),t.jsx("button",{onClick:()=>C(!1),style:{color:e.text.secondary},className:"hover:opacity-70 transition",children:""})]}),t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"mb-5",children:[t.jsxs("label",{style:{color:e.text.primary},className:"block font-semibold mb-2",children:["Resolution Message ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("textarea",{value:T,onChange:ae=>E(ae.target.value),placeholder:"Please provide details about how this concern was resolved...",rows:5,style:{width:"100%",background:a?"rgba(15,18,39,0.6)":"#F9FAFB",border:`2px solid ${e.border.primary}`,borderRadius:"12px",color:e.text.primary,padding:"14px 16px",outline:"none",resize:"none",fontSize:"14px"}})]})}),t.jsxs("div",{className:"px-6 py-4 flex justify-end gap-3 border-t",style:{borderColor:e.border.primary},children:[t.jsx("button",{onClick:()=>C(!1),style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"px-6 py-2.5 rounded-xl font-semibold transition-all hover:opacity-80",children:"Cancel"}),t.jsx("button",{onClick:q,disabled:D,style:{background:"#10B981",color:"#FFFFFF",cursor:D?"not-allowed":"pointer",opacity:D?.6:1},className:"px-6 py-2.5 rounded-xl font-semibold transition-all",children:D?"Resolving...":"Resolve Concern"})]})]})]})]})}function Uv(){var B,F,$;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState({autoExport:{frequency:"daily",exportTypes:[],time:"00:00",emailRecipients:[]}}),[n,l]=p.useState(!1),[o,i]=p.useState(!1),[d,u]=p.useState(!1),[c,x]=p.useState([]),[m,h]=p.useState("all"),[v,S]=p.useState(""),[f,y]=p.useState({start:"",end:""}),[b,g]=p.useState("all"),[j,C]=p.useState(""),[T,E]=p.useState(""),D=[{value:"Merchants",icon:"",label:"Merchants"},{value:"Phones",icon:"",label:"Merchant Phones"},{value:"Logs",icon:"",label:"Merchant Logs"},{value:"Concerns",icon:"",label:"Merchant Concerns"}];p.useEffect(()=>{I(),z()},[]);const I=async()=>{try{const N=await Z.get("/admin/configurations?adminRole=merchant");N&&s(N)}catch(N){console.error("Error loading configurations:",N)}},z=async()=>{try{const[N,w]=await Promise.all([Z.get("/admin/configurations/scheduled-exports?adminRole=merchant").catch(()=>[]),Z.get("/admin/configurations/export-history?adminRole=merchant").catch(()=>[])]),k=(Array.isArray(N)?N:[]).map(q=>({...q,exportSource:"auto"})),A=(Array.isArray(w)?w:[]).map(q=>({...q,exportSource:"manual"})),O=[...k,...A].sort((q,U)=>{const H=new Date(q.exportedAt||q.timestamp||q.createdAt);return new Date(U.exportedAt||U.timestamp||U.createdAt)-H});x(O)}catch(N){console.error("Error loading export archive:",N)}},Y=async()=>{var N,w;l(!0);try{await Z.put("/admin/configurations/auto-export",{...r.autoExport,adminRole:"merchant"}),W.success("Auto-export settings saved successfully!"),i(!1),I()}catch(k){W.error(((w=(N=k.response)==null?void 0:N.data)==null?void 0:w.error)||"Failed to save settings")}finally{l(!1)}},_=async()=>{var N,w;l(!0);try{if(!r.autoExport.exportTypes||r.autoExport.exportTypes.length===0){W.error("Please select at least one export type in the configuration settings"),l(!1);return}const k=await Z.post("/admin/configurations/manual-export-merchant",{exportTypes:r.autoExport.exportTypes,dateRange:b,customStartDate:j,customEndDate:T});if(W.success(`Merchant data exported successfully! (${k.totalRecords||k.recordCount||0} total records)`),k.downloadUrl){const A=document.createElement("a");A.href=k.downloadUrl,A.download=k.fileName||`merchant_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(A),A.click(),document.body.removeChild(A)}u(!1),g("all"),C(""),E(""),z()}catch(k){W.error(((w=(N=k.response)==null?void 0:N.data)==null?void 0:w.error)||"Export failed")}finally{l(!1)}},V=async N=>{try{const w=await Z.get(`/admin/configurations/download-export/${N}`);if(w.downloadUrl){const k=document.createElement("a");k.href=w.downloadUrl,k.download=w.fileName,document.body.appendChild(k),k.click(),document.body.removeChild(k)}}catch{W.error("Failed to download export")}},R=c.filter(N=>{var w,k;if(m!=="all"&&N.exportSource!==m)return!1;if(v){const A=v.toLowerCase();if(!(((w=N.exportType)==null?void 0:w.toLowerCase().includes(A))||((k=N.fileName)==null?void 0:k.toLowerCase().includes(A))))return!1}if(f.start||f.end){const A=new Date(N.exportedAt||N.timestamp||N.createdAt);if(f.start&&A<new Date(f.start)||f.end&&A>new Date(f.end+"T23:59:59"))return!1}return!0});return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{marginBottom:"24px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,paddingBottom:"16px"},children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Merchant Settings"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Configure automated merchant data exports and system settings"})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[t.jsxs("div",{style:{background:e.bg.card,borderRadius:"16px",border:`1px solid ${e.border.primary}`,padding:"28px",marginBottom:"24px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{color:e.accent.primary,fontSize:"20px",fontWeight:700,margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," Automated Merchant Export"]}),t.jsxs("p",{style:{color:e.text.secondary,fontSize:"14px",margin:0,lineHeight:"1.5"},children:["System automatically exports merchant data as ZIP files for backup and compliance.",t.jsx("br",{}),"Configure the schedule and download reports manually anytime."]})]}),t.jsxs("button",{onClick:()=>i(!0),style:{padding:"12px 20px",background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"10px",color:e.accent.primary,fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Configure Schedule"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[t.jsx(Ki,{icon:"",label:"Frequency",value:((B=r.autoExport.frequency)==null?void 0:B.charAt(0).toUpperCase())+((F=r.autoExport.frequency)==null?void 0:F.slice(1))||"Not set",theme:e}),t.jsx(Ki,{icon:"",label:"Export Time",value:r.autoExport.time||"Not set",theme:e}),t.jsx(Ki,{icon:"",label:"Data Types",value:`${(($=r.autoExport.exportTypes)==null?void 0:$.length)||0} selected`,theme:e})]}),t.jsxs("div",{style:{padding:"24px",background:"rgba(34,197,94,0.1)",border:"2px dashed rgba(34,197,94,0.3)",borderRadius:"12px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),t.jsx("h4",{style:{color:e.text.primary,fontSize:"16px",fontWeight:700,marginBottom:"8px"},children:"Export Merchant Data Now"}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",marginBottom:"16px"},children:"Download a complete ZIP file with all merchant data: merchants, phones, logs, and concerns."}),t.jsx("button",{onClick:()=>u(!0),disabled:n,style:{padding:"14px 32px",background:n?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:n?"not-allowed":"pointer",boxShadow:n?"none":"0 4px 12px rgba(34,197,94,0.4)",transition:"all 0.2s ease",opacity:n?.6:1},children:n?" Exporting...":" Download Merchant Data (ZIP)"})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderRadius:"16px",border:`1px solid ${e.border.primary}`,padding:"28px",marginBottom:"24px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{color:e.accent.primary,fontSize:"18px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," Export Archive"]}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"12px",margin:0},children:"All exports - auto-scheduled and manual"})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("div",{style:{display:"flex",borderRadius:"8px",overflow:"hidden",border:`1px solid ${e.border.primary}`},children:[{key:"all",label:"All"},{key:"auto",label:" Auto"},{key:"manual",label:" Manual"}].map(N=>t.jsx("button",{onClick:()=>h(N.key),style:{padding:"8px 16px",background:m===N.key?e.accent.primary:"transparent",color:m===N.key?a?"#181D40":"#FFFFFF":e.text.secondary,border:"none",fontSize:"12px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:N.label},N.key))}),t.jsx("input",{type:"text",placeholder:"Search exports...",value:v,onChange:N=>S(N.target.value),style:{padding:"8px 16px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"13px",outline:"none",width:"180px"}}),t.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t.jsx("input",{type:"date",value:f.start,onChange:N=>y({...f,start:N.target.value}),style:{padding:"8px 12px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"12px",outline:"none"}}),t.jsx("span",{style:{color:e.text.tertiary},children:""}),t.jsx("input",{type:"date",value:f.end,onChange:N=>y({...f,end:N.target.value}),style:{padding:"8px 12px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"12px",outline:"none"}}),(f.start||f.end||v)&&t.jsx("button",{onClick:()=>{S(""),y({start:"",end:""})},style:{padding:"8px 12px",background:"rgba(239,68,68,0.2)",border:"2px solid rgba(239,68,68,0.3)",borderRadius:"8px",color:"#EF4444",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Clear"})]})]})]}),R.length===0?t.jsxs("div",{style:{padding:"40px",textAlign:"center",color:e.text.tertiary,fontSize:"14px"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",opacity:.3},children:""}),t.jsx("p",{style:{margin:0},children:"No exports found"}),t.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"12px"},children:[m!=="all"?"Try changing the filter or ":"","Configure auto-export or run a manual export to start"]})]}):t.jsx("div",{style:{maxHeight:"500px",overflowY:"auto",paddingRight:"8px"},children:t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:R.map((N,w)=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 18px",background:e.bg.tertiary,borderRadius:"10px",border:`1px solid ${e.border.primary}`,fontSize:"14px",transition:"all 0.2s ease"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},children:[t.jsx("span",{style:{fontSize:"20px"},children:N.exportSource==="auto"?"":""}),t.jsx("span",{style:{color:e.accent.primary,fontWeight:700,fontSize:"15px"},children:N.exportType||"Merchant Export"}),t.jsx("span",{style:{padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:700,background:N.exportSource==="auto"?"rgba(59,130,246,0.2)":"rgba(34,197,94,0.2)",color:N.exportSource==="auto"?"#3B82F6":"#22C55E",border:`1px solid ${N.exportSource==="auto"?"rgba(59,130,246,0.3)":"rgba(34,197,94,0.3)"}`},children:N.exportSource==="auto"?"AUTO":"MANUAL"})]}),t.jsxs("div",{style:{display:"flex",gap:"20px",fontSize:"13px",color:e.text.secondary},children:[t.jsxs("span",{children:[" ",new Date(N.exportedAt||N.timestamp||N.createdAt).toLocaleDateString()]}),t.jsxs("span",{children:[" ",new Date(N.exportedAt||N.timestamp||N.createdAt).toLocaleTimeString()]}),N.fileName&&t.jsxs("span",{children:[" ",N.fileName]}),N.recordCount&&t.jsxs("span",{children:[" ",N.recordCount," records"]})]})]}),N.status==="success"||!N.status?t.jsx("button",{onClick:()=>V(N._id),style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(34,197,94,0.2)",color:"#22C55E",border:"2px solid rgba(34,197,94,0.3)",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},children:" Download"}):t.jsx("span",{style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"2px solid rgba(239,68,68,0.3)"},children:" Failed"})]},N._id||w))})})]})]}),d&&t.jsx(Pv,{dateRange:b,setDateRange:g,customStartDate:j,setCustomStartDate:C,customEndDate:T,setCustomEndDate:E,loading:n,onExport:_,onCancel:()=>{u(!1),g("all"),C(""),E("")},theme:e,isDarkMode:a}),o&&t.jsx(Wv,{configurations:r,setConfigurations:s,exportTypes:D,loading:n,onSave:Y,onCancel:()=>i(!1),theme:e,isDarkMode:a})]})}function Ki({icon:e,label:a,value:r,theme:s}){return t.jsxs("div",{style:{padding:"20px",background:s.bg.tertiary,borderRadius:"12px",border:`1px solid ${s.border.primary}`},children:[t.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:e}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary,marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:700},children:a}),t.jsx("div",{style:{fontSize:"16px",color:s.text.primary,fontWeight:700},children:r})]})}function Pv({dateRange:e,setDateRange:a,customStartDate:r,setCustomStartDate:s,customEndDate:n,setCustomEndDate:l,loading:o,onExport:i,onCancel:d,theme:u,isDarkMode:c}){return t.jsx("div",{onClick:d,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:x=>x.stopPropagation(),style:{background:c?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",border:`1px solid ${u.border.primary}`,padding:"32px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("h3",{style:{color:u.accent.primary,fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Select Date Range"}),t.jsx("p",{style:{color:u.text.secondary,fontSize:"13px",margin:"0 0 24px 0"},children:"Choose which records to include in the export"}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:[{value:"all",label:" All Time",desc:"Export all records"},{value:"24hr",label:" Last 24 Hours",desc:"Records from the past day"},{value:"week",label:" This Week",desc:"Records from the past 7 days"},{value:"month",label:" This Month",desc:"Records from current month"},{value:"custom",label:" Custom Range",desc:"Choose specific dates"}].map(x=>t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px",background:e===x.value?`${u.accent.primary}20`:u.bg.tertiary,border:`2px solid ${e===x.value?u.accent.primary:u.border.primary}`,borderRadius:"10px",cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsx("input",{type:"radio",name:"dateRange",value:x.value,checked:e===x.value,onChange:m=>a(m.target.value),style:{cursor:"pointer",width:"18px",height:"18px"}}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{color:u.text.primary,fontSize:"14px",fontWeight:700,marginBottom:"4px"},children:x.label}),t.jsx("div",{style:{color:u.text.secondary,fontSize:"12px"},children:x.desc})]})]},x.value))}),e==="custom"&&t.jsx("div",{style:{marginBottom:"24px",padding:"16px",background:u.bg.tertiary,borderRadius:"10px"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:u.accent.primary},children:"Start Date"}),t.jsx("input",{type:"date",value:r,onChange:x=>s(x.target.value),style:{width:"100%",padding:"10px",background:u.bg.secondary,border:`2px solid ${u.border.primary}`,borderRadius:"8px",color:u.text.primary,fontSize:"13px",outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:u.accent.primary},children:"End Date"}),t.jsx("input",{type:"date",value:n,onChange:x=>l(x.target.value),style:{width:"100%",padding:"10px",background:u.bg.secondary,border:`2px solid ${u.border.primary}`,borderRadius:"8px",color:u.text.primary,fontSize:"13px",outline:"none",boxSizing:"border-box"}})]})]})}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:i,disabled:o,style:{flex:1,padding:"14px 24px",background:o?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:o?"not-allowed":"pointer",boxShadow:o?"none":"0 4px 12px rgba(34,197,94,0.4)",opacity:o?.6:1},children:o?" Exporting...":" Export Now"}),t.jsx("button",{onClick:d,disabled:o,style:{flex:1,padding:"14px 24px",background:u.bg.tertiary,color:u.text.primary,border:`2px solid ${u.border.primary}`,borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:o?"not-allowed":"pointer"},children:"Cancel"})]})]})})}function Wv({configurations:e,setConfigurations:a,exportTypes:r,loading:s,onSave:n,onCancel:l,theme:o,isDarkMode:i}){var d,u,c,x,m;return t.jsx("div",{onClick:l,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:h=>h.stopPropagation(),style:{background:i?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",border:`1px solid ${o.border.primary}`,padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("h3",{style:{color:o.accent.primary,fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Configure Export Schedule"}),t.jsx("p",{style:{color:o.text.secondary,fontSize:"13px",margin:"0 0 24px 0"},children:"Set up when and how often the system should automatically export data."}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",borderRadius:"12px",background:(d=e.autoExport)!=null&&d.enabled?"rgba(16,185,129,0.1)":"rgba(239,68,68,0.1)",border:`2px solid ${(u=e.autoExport)!=null&&u.enabled?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"}`},children:[t.jsxs("div",{children:[t.jsx("div",{style:{color:o.text.primary,fontWeight:700,fontSize:"14px"},children:"Enable Automatic Export"}),t.jsx("div",{style:{color:o.text.secondary,fontSize:"12px",marginTop:"4px"},children:(c=e.autoExport)!=null&&c.enabled?" Auto-export is active":" Auto-export is disabled"})]}),t.jsx("button",{onClick:()=>{var h;return a({...e,autoExport:{...e.autoExport,enabled:!((h=e.autoExport)!=null&&h.enabled)}})},style:{background:(x=e.autoExport)!=null&&x.enabled?"#10B981":"#6B7280",width:"52px",height:"28px",borderRadius:"14px",position:"relative",border:"none",cursor:"pointer",transition:"all 0.2s ease"},children:t.jsx("div",{style:{position:"absolute",top:"2px",left:(m=e.autoExport)!=null&&m.enabled?"26px":"2px",width:"24px",height:"24px",borderRadius:"12px",background:"#FFFFFF",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Frequency"}),t.jsxs("select",{value:e.autoExport.frequency,onChange:h=>a({...e,autoExport:{...e.autoExport,frequency:h.target.value}}),style:{width:"100%",padding:"12px 16px",background:o.bg.tertiary,border:`2px solid ${o.border.primary}`,borderRadius:"8px",color:o.text.primary,fontSize:"14px",fontWeight:600,cursor:"pointer",outline:"none"},children:[t.jsx("option",{value:"daily",style:{background:i?"#1E2347":"#FFFFFF"},children:" Daily"}),t.jsx("option",{value:"weekly",style:{background:i?"#1E2347":"#FFFFFF"},children:" Weekly"}),t.jsx("option",{value:"monthly",style:{background:i?"#1E2347":"#FFFFFF"},children:" Monthly"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Export Time (24-hour)"}),t.jsx("input",{type:"time",value:e.autoExport.time,onChange:h=>a({...e,autoExport:{...e.autoExport,time:h.target.value}}),style:{width:"100%",padding:"12px 16px",background:o.bg.tertiary,border:`2px solid ${o.border.primary}`,borderRadius:"8px",color:o.text.primary,fontSize:"14px",fontWeight:600,outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"12px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Data Types to Export"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:r.map(h=>{var v,S,f;return t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px",background:(v=e.autoExport.exportTypes)!=null&&v.includes(h.value)?`${o.accent.primary}20`:o.bg.tertiary,border:`2px solid ${(S=e.autoExport.exportTypes)!=null&&S.includes(h.value)?o.accent.primary:o.border.primary}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsx("input",{type:"checkbox",checked:((f=e.autoExport.exportTypes)==null?void 0:f.includes(h.value))||!1,onChange:y=>{const b=e.autoExport.exportTypes||[],g=y.target.checked?[...b,h.value]:b.filter(j=>j!==h.value);a({...e,autoExport:{...e.autoExport,exportTypes:g}})},style:{cursor:"pointer",width:"16px",height:"16px"}}),t.jsx("span",{style:{fontSize:"16px"},children:h.icon}),t.jsx("span",{style:{color:o.text.primary,fontSize:"14px",fontWeight:600},children:h.label})]},h.value)})})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[t.jsx("button",{onClick:n,disabled:s,style:{flex:1,padding:"14px 24px",background:s?"#9CA3AF":o.accent.primary,color:i?"#181D40":"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:s?"not-allowed":"pointer",boxShadow:s?"none":"0 4px 12px rgba(255,212,28,0.4)",opacity:s?.6:1},children:s?" Saving...":" Save Settings"}),t.jsx("button",{onClick:l,disabled:s,style:{flex:1,padding:"14px 24px",background:o.bg.tertiary,color:o.text.primary,border:`2px solid ${o.border.primary}`,borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:s?"not-allowed":"pointer"},children:"Cancel"})]})]})]})})}function zb({transactions:e=[],onRowClick:a,showHeader:r=!1,showColors:s=!0,compact:n=!1}){const{theme:l,isDarkMode:o}=ne(),i=o?"255, 212, 28":"59, 130, 246",d=b=>b.date?b.date:b.createdAt?new Date(b.createdAt).toLocaleDateString("en-PH",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A",u=b=>b.time?b.time:b.createdAt?new Date(b.createdAt).toLocaleTimeString("en-PH",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"N/A",c=b=>b.transactionId||b.id||b._id||"N/A",x=b=>b.transactionType==="credit",m=b=>b.transactionType==="debit",h=b=>b.idNumber||b.schoolUId||"N/A",v=b=>{if(b.status==="Refunded"){const g=b.userName||"User";return b.shuttleId?`NU Shuttle Service Refund: ${g}`:m(b)?`${b.businessName||b.merchantName||"Merchant"} Refund: ${g}`:`Cash-In Refund: ${g}`}if(x(b))return`Cash-In: ${b.userName||"User"}`;if(m(b)){const g=b.userName||"User";return b.shuttleId?`Payment to NU Shuttle Service: ${g}`:`Payment to ${b.businessName||b.merchantName||"Merchant"}: ${g}`}return b.description||b.userName||"Transaction"},S=b=>x(b)?b.adminName?b.adminName:b.processedBy?b.processedBy:b.adminId?`Admin #${b.adminId}`:"Treasury":"",f=b=>{const g=Number(b.amount).toFixed(2);return x(b)?`+ ${g}`:m(b)?`- ${g}`:`${g}`},y=b=>s?x(b)?"#10B981":m(b)?"#EF4444":l.text.primary:l.text.primary;return t.jsx("div",{className:"flex flex-col w-full max-w-full",style:{height:n?"300px":"auto",background:l.bg.card,border:`1px solid rgba(${i}, 0.2)`,borderRadius:"12px",overflow:"hidden",boxShadow:o?"0 4px 12px rgba(0,0,0,0.2)":"0 4px 12px rgba(59,130,246,0.1)"},children:e.length===0?t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,textAlign:"center",color:l.text.secondary,padding:"64px 16px"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),t.jsx("div",{children:"No transactions found"})]}):t.jsx("div",{style:{flex:1,overflow:"auto"},children:t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsx("tr",{style:{background:`rgba(${i}, 0.1)`},children:["Date","Time","ID Number","Details","Amount","Processed By","Transaction ID"].map(b=>t.jsx("th",{style:{textAlign:"center",padding:"12px 16px",fontSize:"11px",fontWeight:800,color:l.accent.primary,textTransform:"uppercase",borderBottom:`2px solid rgba(${i}, 0.3)`},children:b},b))})}),t.jsx("tbody",{children:e.map((b,g)=>{const j=f(b),C=y(b);return t.jsxs("tr",{onClick:()=>a==null?void 0:a(b),style:{borderBottom:`1px solid ${l.border.primary}`,cursor:a?"pointer":"default",transition:"all 0.2s"},onMouseEnter:T=>{T.currentTarget.style.background=l.bg.hover},onMouseLeave:T=>{T.currentTarget.style.background="transparent"},children:[t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",color:l.text.primary},children:d(b)}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",color:l.text.primary},children:u(b)}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",color:l.text.primary,fontFamily:"monospace",fontSize:"11px",fontWeight:700},children:h(b)}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",color:l.text.secondary},children:v(b)}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",fontWeight:"bold",color:C},children:j}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",color:l.text.secondary,fontSize:"12px"},children:S(b)}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",fontFamily:"monospace",fontSize:"11px",color:l.text.secondary},children:c(b)})]},b._id||b.id||b.transactionId||g)})})]})})})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=(...e)=>e.filter((a,r,s)=>!!a&&a.trim()!==""&&s.indexOf(a)===r).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,r,s)=>s?s.toUpperCase():r.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=e=>{const a=qv(e);return a.charAt(0).toUpperCase()+a.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=e=>{for(const a in e)if(a.startsWith("aria-")||a==="role"||a==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=p.forwardRef(({color:e="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:n="",children:l,iconNode:o,...i},d)=>p.createElement("svg",{ref:d,...Yv,width:a,height:a,stroke:e,strokeWidth:s?Number(r)*24/Number(a):r,className:Bb("lucide",n),...!l&&!Vv(i)&&{"aria-hidden":"true"},...i},[...o.map(([u,c])=>p.createElement(u,c)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(e,a)=>{const r=p.forwardRef(({className:s,...n},l)=>p.createElement(Gv,{ref:l,iconNode:a,className:Bb(`lucide-${Hv(_x(e))}`,`lucide-${e}`,s),...n}));return r.displayName=_x(e),r};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Qv=be("archive",Xv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],za=be("arrow-right",Zv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Db=be("briefcase",Jv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],li=be("calendar",Kv);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],yt=be("check",ej);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],aj=be("chevron-down",tj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],_b=be("chevron-left",rj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ro=be("chevron-right",sj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vt=be("circle-alert",nj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ve=be("circle-check-big",lj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ij=be("circle-x",oj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],oa=be("clock",cj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],la=be("credit-card",dj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],oi=be("dollar-sign",uj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Mb=be("download",pj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ql=be("eye-off",xj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zl=be("eye",mj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gj=be("file-text",fj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Ib=be("graduation-cap",bj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],yj=be("id-card",hj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Lb=be("info",vj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Oe=be("loader-circle",jj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Tn=be("mail",Nj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],wj=be("pen-line",Sj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Au=be("plus",Cj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],Fj=be("power",kj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],pd=be("refresh-cw",Tj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],vr=be("search",Ej);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Rj=be("settings",Aj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ii=be("shield",zj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Dj=be("square-pen",Bj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Zs=be("store",_j);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ci=be("trending-up",Mj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fa=be("triangle-alert",Ij);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],jr=be("truck",Lj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],xd=be("user-check",Oj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],md=be("user-plus",$j);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],fd=be("user-x",Uj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gd=be("user",Pj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ls=be("users",Wj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],qj=be("wallet",Hj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ft=be("x",Yj),Mx=e=>{if(!e)return"";let a=e.replace(/\s+/g,"").toUpperCase();if(/[A-F]/.test(a)&&/^[0-9A-F]+$/.test(a))return a;if(/^\d+$/.test(a)){let n=parseInt(a,10).toString(16).toUpperCase();return n.length%2!==0&&(n="0"+n),n}const r=a.match(/\d+/g);if(r&&r.length>0){const s=r.reduce((o,i)=>o.length>i.length?o:i);let l=parseInt(s,10).toString(16).toUpperCase();return l.length%2!==0&&(l="0"+l),l}return a},Vj=e=>{const a=e.replace(/\D/g,"");return a.length<=4?a:`${a.slice(0,4)}-${a.slice(4,10)}`},ec=e=>e.replace(/\D/g,"").slice(0,10),Ix=e=>!e||e.length<4?"***":"****"+e.slice(-4);function Gj({isOpen:e,onClose:a,onSuccess:r,prefillRfid:s=""}){const{theme:n,isDarkMode:l}=ne(),[o,i]=p.useState(1),[d,u]=p.useState(!1),[c,x]=p.useState(!1),m=p.useRef(null),[h,v]=p.useState(""),[S,f]=p.useState(""),[y,b]=p.useState({firstName:"",middleName:"",lastName:"",role:"student",schoolUId:"",email:""}),[g,j]=p.useState(null);p.useEffect(()=>{e&&s&&(f(s),v(s),i(2))},[s,e]),p.useEffect(()=>{e&&o===1&&m.current&&!s&&setTimeout(()=>{var B;return(B=m.current)==null?void 0:B.focus()},100)},[e,o,s]);const C=()=>{i(1),v(""),f(""),b({firstName:"",middleName:"",lastName:"",role:"student",schoolUId:"",email:""}),j(null),u(!1),x(!1)},T=()=>{C(),a()},E=B=>{const F=B.target.value.toUpperCase();v(F)},D=async()=>{if(!h.trim()){W.error("Please scan or enter RFID");return}x(!0);try{const B=Mx(h.trim());if(!(await Z.get(`/admin/treasury/users/check-rfid?rfidUId=${B}`)).available){W.error("This RFID is already registered to another user"),x(!1);return}f(B),i(2)}catch(B){console.error("RFID check error:",B),W.error(B.message||"Error checking RFID")}finally{x(!1)}},I=B=>{B.key==="Enter"&&(B.preventDefault(),D())},z=B=>{const F=Vj(B.target.value);b($=>({...$,schoolUId:F}))},Y=()=>y.firstName.trim()?y.lastName.trim()?!y.schoolUId||ec(y.schoolUId).length!==10?(W.error("Please enter a valid 10-digit School ID"),!1):!y.email.trim()||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y.email)?(W.error("Please enter a valid email address"),!1):!0:(W.error("Last name is required"),!1):(W.error("First name is required"),!1),_=async()=>{if(Y()){x(!0);try{const B=ec(y.schoolUId);if(!(await Z.get(`/admin/treasury/users/check-schoolid?schoolUId=${B}`)).available){W.error("This School ID is already registered"),x(!1);return}i(3)}catch(B){console.error("Validation error:",B),W.error(B.message||"Error validating user details")}finally{x(!1)}}},V=async()=>{u(!0);try{const B=Math.floor(1e5+Math.random()*9e5).toString(),F={rfidUId:S,firstName:y.firstName.trim(),middleName:y.middleName.trim(),lastName:y.lastName.trim(),role:y.role,schoolUId:ec(y.schoolUId),email:y.email.trim().toLowerCase(),pin:B},$=await Z.post("/admin/treasury/users/register",F);$.success?(j({...$.user,emailSent:$.emailSent}),i(4),W.success("User registered successfully!"),$.emailSent?W.info("Temporary PIN has been sent to the user's email"):W.warning("Could not send email. Please inform the user of their temporary PIN manually.")):W.error($.message||"Registration failed")}catch(B){console.error("Registration error:",B),W.error(B.message||"Failed to register user")}finally{u(!1)}},R=()=>{r&&r(g),T()};return e?t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:T}),t.jsxs("div",{style:{background:l?"#1E2347":"#FFFFFF",borderColor:n.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-2xl overflow-hidden animate-fadeIn",children:[t.jsxs("div",{style:{background:l?"linear-gradient(135deg, rgba(255,212,28,0.2) 0%, rgba(255,212,28,0.1) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.2) 0%, rgba(59,130,246,0.1) 100%)",borderColor:l?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"px-6 py-4 flex items-center justify-between border-b",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(md,{style:{color:n.accent.primary},className:"w-6 h-6"}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:n.accent.primary},className:"text-xl font-bold",children:"Register New User"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm",children:"Add a new student or employee to NUCash"})]})]}),t.jsx("button",{onClick:T,disabled:d,style:{color:n.text.secondary},className:"hover:opacity-70 transition-colors disabled:opacity-50",children:t.jsx(ft,{className:"w-6 h-6"})})]}),t.jsx("div",{style:{background:l?"rgba(15,18,39,0.5)":"rgba(243,244,246,0.5)"},className:"flex items-center justify-center gap-3 py-4 px-6",children:[{num:1,label:"RFID"},{num:2,label:"Details"},{num:3,label:"Summary"},{num:4,label:"Complete"}].map((B,F)=>t.jsxs(ke.Fragment,{children:[t.jsxs("div",{className:`flex items-center gap-2 ${o>=B.num?"":"opacity-40"}`,children:[t.jsx("div",{style:{background:o>=B.num?n.accent.primary:"transparent",borderColor:o>=B.num?n.accent.primary:n.border.primary,color:o>=B.num?l?"#181D40":"#FFFFFF":n.text.secondary},className:"w-8 h-8 rounded-full flex items-center justify-center font-bold border-2 text-sm",children:o>B.num?t.jsx(Ve,{className:"w-4 h-4"}):B.num}),t.jsx("span",{style:{color:o>=B.num?n.accent.primary:n.text.secondary},className:"hidden sm:inline font-medium text-sm",children:B.label})]}),F<3&&t.jsx("div",{style:{background:o>B.num?n.accent.primary:n.border.primary},className:"w-8 h-0.5 rounded"})]},B.num))}),t.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[o===1&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{style:{background:l?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",borderColor:l?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"p-4 rounded-xl border flex items-start gap-3",children:[t.jsx(la,{style:{color:n.accent.primary},className:"w-5 h-5 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:n.text.primary},className:"font-semibold",children:"Scan User's ID Card"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm mt-1",children:"Place the ID card on the RFID scanner or type the RFID manually. Format will be automatically converted to Hex format (decimal  hex, hex  unchanged)."})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:n.text.primary},className:"font-semibold mb-2 block",children:"RFID Tag"}),t.jsx("input",{ref:m,type:"text",value:h,onChange:E,onKeyDown:I,placeholder:"Scan or enter RFID...",style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-yellow-400/50 font-mono text-lg tracking-wider",autoComplete:"off"}),h&&t.jsxs("p",{style:{color:n.text.tertiary},className:"text-xs mt-2",children:["Will be stored as: ",t.jsx("span",{className:"font-mono",children:Mx(h)})]})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{onClick:T,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:"Cancel"}),t.jsx("button",{onClick:D,disabled:!h.trim()||c,style:{background:n.accent.primary,color:l?"#181D40":"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2",children:c?t.jsxs(t.Fragment,{children:[t.jsx(Oe,{className:"w-5 h-5 animate-spin"})," Checking..."]}):t.jsx(t.Fragment,{children:"Continue "})})]})]}),o===2&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"p-3 rounded-xl border flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(la,{style:{color:n.accent.primary},className:"w-5 h-5"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:n.text.secondary},className:"text-xs",children:"RFID Tag"}),t.jsx("p",{style:{color:n.text.primary},className:"font-mono font-semibold",children:Ix(S)})]})]}),t.jsx(Ve,{className:"w-5 h-5 text-green-500"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsxs("label",{style:{color:n.text.primary},className:"font-semibold mb-1.5 block text-sm",children:["First Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:y.firstName,onChange:B=>b(F=>({...F,firstName:B.target.value})),placeholder:"Juan",style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full px-3 py-2.5 rounded-xl border focus:outline-none focus:ring-2 focus:ring-yellow-400/50"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:n.text.primary},className:"font-semibold mb-1.5 block text-sm",children:"Middle Name"}),t.jsx("input",{type:"text",value:y.middleName,onChange:B=>b(F=>({...F,middleName:B.target.value})),placeholder:"Dela",style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full px-3 py-2.5 rounded-xl border focus:outline-none focus:ring-2 focus:ring-yellow-400/50"})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:n.text.primary},className:"font-semibold mb-1.5 block text-sm",children:["Last Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:y.lastName,onChange:B=>b(F=>({...F,lastName:B.target.value})),placeholder:"Cruz",style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full px-3 py-2.5 rounded-xl border focus:outline-none focus:ring-2 focus:ring-yellow-400/50"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:n.text.primary},className:"font-semibold mb-1.5 block text-sm",children:["User Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:["student","employee"].map(B=>t.jsxs("button",{type:"button",onClick:()=>b(F=>({...F,role:B})),style:{background:y.role===B?n.accent.primary:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:y.role===B?l?"#181D40":"#FFFFFF":n.text.primary,borderColor:y.role===B?n.accent.primary:n.border.primary},className:"py-2.5 rounded-xl border font-semibold capitalize transition-all hover:opacity-90",children:[B==="student"?" ":" ",B]},B))})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:n.text.primary},className:"font-semibold mb-1.5 block text-sm",children:["School ID ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(yj,{style:{color:n.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),t.jsx("input",{type:"text",value:y.schoolUId,onChange:z,placeholder:"2024-123456",maxLength:11,style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full pl-10 pr-4 py-2.5 rounded-xl border focus:outline-none focus:ring-2 focus:ring-yellow-400/50 font-mono"})]}),t.jsx("p",{style:{color:n.text.tertiary},className:"text-xs mt-1",children:"Format: ####-###### (will be stored as 10 digits)"})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:n.text.primary},className:"font-semibold mb-1.5 block text-sm",children:["Email Address ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Tn,{style:{color:n.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),t.jsx("input",{type:"email",value:y.email,onChange:B=>b(F=>({...F,email:B.target.value})),placeholder:"juan.delacruz@nu.edu.ph",style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full pl-10 pr-4 py-2.5 rounded-xl border focus:outline-none focus:ring-2 focus:ring-yellow-400/50"})]}),t.jsx("p",{style:{color:n.text.tertiary},className:"text-xs mt-1",children:"Temporary PIN will be sent to this email"})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{onClick:()=>{s?T():i(1)},style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:" Back"}),t.jsx("button",{onClick:_,disabled:c,style:{background:n.accent.primary,color:l?"#181D40":"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2",children:c?t.jsxs(t.Fragment,{children:[t.jsx(Oe,{className:"w-5 h-5 animate-spin"})," Validating..."]}):t.jsx(t.Fragment,{children:"Review "})})]})]}),o===3&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{style:{background:l?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",borderColor:l?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"p-4 rounded-xl border flex items-start gap-3",children:[t.jsx(vt,{style:{color:n.accent.primary},className:"w-5 h-5 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:n.text.primary},className:"font-semibold",children:"Review User Details"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm mt-1",children:"Please verify all information before registering."})]})]}),t.jsx("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"rounded-xl border overflow-hidden",children:[{label:"RFID Tag",value:Ix(S)},{label:"Full Name",value:`${y.firstName} ${y.middleName?y.middleName+" ":""}${y.lastName}`},{label:"User Type",value:y.role,badge:!0},{label:"School ID",value:y.schoolUId},{label:"Email",value:y.email}].map((B,F)=>t.jsxs("div",{style:{borderColor:n.border.primary},className:`flex justify-between items-center px-4 py-3 ${F<4?"border-b":""}`,children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:B.label}),B.badge?t.jsxs("span",{style:{background:y.role==="student"?"rgba(59,130,246,0.2)":"rgba(168,85,247,0.2)",color:y.role==="student"?"#3B82F6":"#A855F7"},className:"px-3 py-1 rounded-full text-sm font-semibold capitalize",children:[y.role==="student"?" ":" ",B.value]}):t.jsx("span",{style:{color:n.text.primary},className:"font-semibold text-sm",children:B.value})]},B.label))}),t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{className:"font-semibold text-sm text-emerald-500",children:" What happens next?"}),t.jsxs("ul",{style:{color:n.text.secondary},className:"text-sm mt-2 space-y-1",children:[t.jsx("li",{children:" A temporary PIN will be generated and emailed to the user"}),t.jsx("li",{children:" The user must log in and change their PIN to activate"}),t.jsxs("li",{children:[" Status: ",t.jsx("span",{className:"font-semibold text-yellow-500",children:"Inactive"})," until PIN is changed"]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>i(2),disabled:d,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80 disabled:opacity-50",children:" Edit"}),t.jsx("button",{onClick:V,disabled:d,className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2 bg-emerald-500 text-white",children:d?t.jsxs(t.Fragment,{children:[t.jsx(Oe,{className:"w-5 h-5 animate-spin"})," Registering..."]}):t.jsxs(t.Fragment,{children:[t.jsx(md,{className:"w-5 h-5"})," Register User"]})})]})]}),o===4&&t.jsxs("div",{className:"text-center space-y-5",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto",children:t.jsx(Ve,{className:"w-12 h-12 text-emerald-500"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-bold text-emerald-500",children:"Registration Successful!"}),t.jsx("p",{style:{color:n.text.secondary},className:"mt-2",children:g!=null&&g.emailSent?"A temporary PIN has been sent to the user's email.":"User registered but email could not be sent."})]}),g&&!g.emailSent&&t.jsxs("div",{style:{background:"rgba(251,191,36,0.15)",borderColor:"rgba(251,191,36,0.4)"},className:"p-4 rounded-xl border flex items-start gap-3 text-left",children:[t.jsx(vt,{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-yellow-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-yellow-500 text-sm",children:"Email Not Sent"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm mt-1",children:"Please inform the user of their temporary PIN manually or ask them to request a new PIN through the app."})]})]}),g&&g.emailSent&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.15)",borderColor:"rgba(16,185,129,0.4)"},className:"p-4 rounded-xl border flex items-start gap-3 text-left",children:[t.jsx(Tn,{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-emerald-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-emerald-500 text-sm",children:"Email Sent Successfully"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm mt-1",children:"The user should check their inbox (and spam folder) for the temporary PIN."})]})]}),g&&t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"rounded-xl border p-5 text-left space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"User ID"}),t.jsx("span",{style:{color:n.text.primary},className:"font-mono font-semibold",children:g.userId})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"Name"}),t.jsxs("span",{style:{color:n.text.primary},className:"font-semibold",children:[g.firstName," ",g.lastName]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"School ID"}),t.jsx("span",{style:{color:n.text.primary},className:"font-mono",children:g.schoolUId})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"Email"}),t.jsx("span",{style:{color:n.text.primary},className:"text-sm",children:g.email})]}),t.jsxs("div",{className:"flex justify-between pt-2 border-t",style:{borderColor:n.border.primary},children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"Status"}),t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-yellow-500/20 text-yellow-500",children:"Pending Activation"})]})]}),t.jsx("button",{onClick:R,style:{background:n.accent.primary,color:l?"#181D40":"#FFFFFF"},className:"w-full py-3 rounded-xl font-bold transition-all hover:opacity-90",children:"Done"})]})]}),t.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
          }
          .animate-fadeIn {
            animation: fadeIn 0.2s ease-out;
          }
        `})]})]}):null}const Lx=e=>{if(!e)return"";let a=e.replace(/[\s:-]/g,"").toUpperCase();if(/^[0-9A-F]{8}$/.test(a))return a;if(/^[0-9A-F]+$/.test(a))return a.length%2!==0&&(a="0"+a),(a.match(/.{2}/g)||[]).reverse().join("");if(/^\d+$/.test(a)){let s=BigInt(a).toString(16).toUpperCase();for(s.length%2!==0&&(s="0"+s);s.length<8;)s="0"+s;return(s.match(/.{2}/g)||[]).reverse().join("")}return a},Xj=e=>!e||e.length<4?"***":"****"+e.slice(-4),Qj=[100,200,300,500,1e3],tc="cashin_preset_amounts";function Zj({isOpen:e,onClose:a,onSuccess:r,onRegisterUser:s}){var Ue,Se;const{theme:n,isDarkMode:l}=ne(),[o,i]=p.useState(1),[d,u]=p.useState(!1),[c,x]=p.useState(!1),m=p.useRef(null),h=p.useRef(null),[v,S]=p.useState(""),[f,y]=p.useState(""),[b,g]=p.useState(null),[j,C]=p.useState(null),[T,E]=p.useState(""),[D,I]=p.useState(5),[z,Y]=p.useState(null),[_,V]=p.useState(()=>{const P=localStorage.getItem(tc);return P?JSON.parse(P):Qj}),[R,B]=p.useState(!1),[F,$]=p.useState([]),[N,w]=p.useState(""),[k,A]=p.useState(!1);p.useEffect(()=>{const P=localStorage.getItem(tc);P&&V(JSON.parse(P))},[]),p.useEffect(()=>{e&&o===1&&m.current&&setTimeout(()=>{var P;return(P=m.current)==null?void 0:P.focus()},100)},[e,o]),p.useEffect(()=>(o===4&&D>0?h.current=setTimeout(()=>{I(P=>P-1)},1e3):o===4&&D===0&&X(),()=>{h.current&&clearTimeout(h.current)}),[o,D]);const O=()=>{i(1),S(""),y(""),g(null),C(null),E(""),I(5),Y(null),u(!1),x(!1),B(!1),$([]),w(""),A(!1)},q=()=>{h.current&&clearTimeout(h.current),O(),a()},U=async()=>{var P;if(!v.trim()){W.error("Please scan or enter RFID");return}x(!0);try{const M=Lx(v.trim());y(M);const G=await Z.get(`/admin/treasury/users/search-rfid?rfidUId=${M}`);G.success&&G.user?(g(G.user),i(2)):i("not_found")}catch(M){console.error("Search user error:",M),(P=M.message)!=null&&P.includes("not found")||M.status===404?i("not_found"):W.error(M.message||"Error searching for user")}finally{x(!1)}},H=P=>{P.key==="Enter"&&(P.preventDefault(),U())},J=()=>j==="custom"?parseFloat(T)||0:j||0,ee=()=>{const P=J();if(!P||P<=0){W.error("Please select or enter a valid amount");return}if(P<10){W.error("Minimum cash-in amount is 10");return}if(P>1e4){W.error("Maximum cash-in amount is 10,000");return}I(5),i(4)},L=()=>{h.current&&clearTimeout(h.current),I(5),i(3)},X=async()=>{u(!0);try{const P=J(),M=localStorage.getItem("adminData"),G=M?JSON.parse(M):null,se=await Z.post("/admin/treasury/cash-in",{rfid:f,amount:P,adminId:(G==null?void 0:G._id)||(G==null?void 0:G.id)||null});se.success?(Y(se.transaction),g(oe=>{var xe;return{...oe,balance:((xe=se.user)==null?void 0:xe.balance)||oe.balance+P}}),i(5),W.success("Cash-in successful!")):(W.error(se.message||"Cash-in failed"),i(3))}catch(P){console.error("Cash-in error:",P),W.error(P.message||"Failed to process cash-in"),i(3)}finally{u(!1)}},te=()=>{q(),s&&s(f)},ce=()=>{r&&r(z),q()},de=()=>{O(),setTimeout(()=>{var P;return(P=m.current)==null?void 0:P.focus()},100)},we=()=>{$([..._]),B(!0),A(!1),w("")},ae=()=>{if(F.length!==5){W.error("You must have exactly 5 preset amounts");return}V(F),localStorage.setItem(tc,JSON.stringify(F)),B(!1),A(!1),w(""),W.success("Preset amounts updated!")},ue=()=>{$([]),B(!1),A(!1),w("")},Ce=P=>{if(F.length<=1){W.error("You must have at least 1 preset amount");return}const M=F.filter((G,se)=>se!==P);$(M)},re=()=>{const P=parseInt(N,10);if(!N.trim()||isNaN(P)){W.error("Please enter a valid amount");return}if(P<=0){W.error("Amount must be positive");return}if(F.length>=5){W.error("Maximum 5 preset amounts allowed");return}if(F.includes(P)){W.error("This amount already exists");return}$([...F,P].sort((M,G)=>M-G)),w(""),A(!1)};if(!e)return null;const Ne=R?F:_;return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:q}),t.jsxs("div",{style:{background:l?"#1E2347":"#FFFFFF",borderColor:n.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-2xl overflow-hidden animate-fadeIn",children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16,185,129,0.2) 0%, rgba(16,185,129,0.1) 100%)",borderColor:"rgba(16,185,129,0.3)"},className:"px-6 py-4 flex items-center justify-between border-b",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(qj,{className:"w-6 h-6 text-emerald-500"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-emerald-500",children:"Cash-In for User"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm",children:"Load balance to user's NUCash account"})]})]}),t.jsx("button",{onClick:q,disabled:d||o===4,style:{color:n.text.secondary},className:"hover:opacity-70 transition-colors disabled:opacity-50",children:t.jsx(ft,{className:"w-6 h-6"})})]}),t.jsx("div",{style:{background:l?"rgba(15,18,39,0.5)":"rgba(243,244,246,0.5)"},className:"flex items-center justify-center gap-3 py-4 px-6",children:[{num:1,label:"Scan"},{num:2,label:"User"},{num:3,label:"Amount"},{num:4,label:"Confirm"},{num:5,label:"Done"}].map((P,M)=>{const G=o==="not_found"?1:o;return t.jsxs(ke.Fragment,{children:[t.jsxs("div",{className:`flex items-center gap-2 ${G>=P.num?"":"opacity-40"}`,children:[t.jsx("div",{style:{background:G>=P.num?"#10B981":"transparent",borderColor:G>=P.num?"#10B981":n.border.primary,color:G>=P.num?"#FFFFFF":n.text.secondary},className:"w-8 h-8 rounded-full flex items-center justify-center font-bold border-2 text-sm",children:G>P.num?t.jsx(Ve,{className:"w-4 h-4"}):P.num}),t.jsx("span",{style:{color:G>=P.num?"#10B981":n.text.secondary},className:"hidden sm:inline font-medium text-sm",children:P.label})]}),M<4&&t.jsx("div",{style:{background:G>P.num?"#10B981":n.border.primary},className:"w-8 h-0.5 rounded"})]},P.num)})}),t.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[o===1&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-4 rounded-xl border flex items-start gap-3",children:[t.jsx(la,{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-emerald-500"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:n.text.primary},className:"font-semibold",children:"Scan User's ID Card"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm mt-1",children:"Place the ID card on the RFID scanner or type the RFID manually. The system will look up the user's account."})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:n.text.primary},className:"font-semibold mb-2 block",children:"RFID Tag"}),t.jsx("input",{ref:m,type:"text",value:v,onChange:P=>S(P.target.value.toUpperCase()),onKeyDown:H,placeholder:"Scan or enter RFID...",style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-emerald-400/50 font-mono text-lg tracking-wider",autoComplete:"off"}),v&&t.jsxs("p",{style:{color:n.text.tertiary},className:"text-xs mt-2",children:["Will search as: ",t.jsx("span",{className:"font-mono",children:Lx(v)})]})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{onClick:q,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:"Cancel"}),t.jsx("button",{onClick:U,disabled:!v.trim()||c,className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2 bg-emerald-500 text-white",children:c?t.jsxs(t.Fragment,{children:[t.jsx(Oe,{className:"w-5 h-5 animate-spin"})," Searching..."]}):t.jsxs(t.Fragment,{children:["Search User ",t.jsx(za,{className:"w-5 h-5"})]})})]})]}),o==="not_found"&&t.jsxs("div",{className:"space-y-5 text-center",children:[t.jsx("div",{style:{background:"rgba(239,68,68,0.2)"},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto",children:t.jsx(vt,{className:"w-12 h-12 text-red-500"})}),t.jsxs("div",{children:[t.jsx("h3",{style:{color:n.text.primary},className:"text-xl font-bold",children:"User Not Found"}),t.jsxs("p",{style:{color:n.text.secondary},className:"mt-2",children:["No user is registered with this RFID.",t.jsx("br",{}),"Would you like to register a new user?"]})]}),t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:n.text.secondary},className:"text-sm",children:"Scanned RFID:"}),t.jsx("p",{style:{color:n.text.primary},className:"font-mono font-semibold mt-1",children:f})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{i(1),S(""),y(""),setTimeout(()=>{var P;return(P=m.current)==null?void 0:P.focus()},100)},style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:"Try Again"}),t.jsxs("button",{onClick:te,style:{background:n.accent.primary,color:l?"#181D40":"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 flex items-center justify-center gap-2",children:[t.jsx(md,{className:"w-5 h-5"})," Register User"]})]})]}),o===2&&b&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-3 rounded-xl border flex items-center gap-3",children:[t.jsx(Ve,{className:"w-5 h-5 text-emerald-500"}),t.jsx("p",{className:"font-semibold text-emerald-500",children:"User Found!"})]}),t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"rounded-xl border overflow-hidden",children:[t.jsxs("div",{className:"p-4 flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-14 h-14 rounded-full flex items-center justify-center",children:t.jsx(gd,{className:"w-7 h-7 text-emerald-500"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{style:{color:n.text.primary},className:"font-bold text-lg",children:[b.firstName," ",b.lastName]}),t.jsxs("p",{style:{color:n.text.secondary},className:"text-sm",children:[b.role==="student"?"":""," ",((Ue=b.role)==null?void 0:Ue.charAt(0).toUpperCase())+((Se=b.role)==null?void 0:Se.slice(1))]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{style:{color:n.text.secondary},className:"text-xs",children:"Balance"}),t.jsxs("p",{className:"text-xl font-bold text-emerald-500",children:["",parseFloat(b.balance||0).toLocaleString()]})]})]}),t.jsx("div",{style:{borderColor:n.border.primary},className:"border-t",children:[{label:"RFID",value:Xj(f)},{label:"School ID",value:b.schoolUId},{label:"Email",value:b.email}].map((P,M)=>t.jsxs("div",{style:{borderColor:n.border.primary},className:`flex justify-between items-center px-4 py-2.5 ${M<2?"border-b":""}`,children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:P.label}),t.jsx("span",{style:{color:n.text.primary},className:"font-semibold text-sm font-mono",children:P.value})]},P.label))})]}),!b.isActive&&!b.isDeactivated&&t.jsxs("div",{style:{background:"rgba(251,191,36,0.15)",borderColor:"rgba(251,191,36,0.4)"},className:"p-4 rounded-xl border flex items-start gap-3",children:[t.jsx(vt,{className:"w-6 h-6 mt-0.5 flex-shrink-0 text-yellow-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-yellow-500 text-base",children:"Account Not Yet Activated"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm mt-2",children:"This user's account has not yet been activated. Please ask them to:"}),t.jsxs("ol",{style:{color:n.text.secondary},className:"text-sm mt-2 ml-4 list-decimal space-y-1",children:[t.jsx("li",{children:"Log in to the NUCash app using their email and temporary PIN"}),t.jsx("li",{children:"Change their PIN to activate their account"})]}),t.jsx("p",{style:{color:n.text.tertiary},className:"text-xs mt-3 italic",children:"Cash-in is only allowed for activated accounts."})]})]}),b.isDeactivated&&t.jsxs("div",{style:{background:"rgba(239,68,68,0.15)",borderColor:"rgba(239,68,68,0.4)"},className:"p-4 rounded-xl border flex items-start gap-3",children:[t.jsx(vt,{className:"w-6 h-6 mt-0.5 flex-shrink-0 text-red-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-red-500 text-base",children:"Account Deactivated"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm mt-2",children:"This user's account has been deactivated and cannot receive cash-ins. Please contact the system administrator if this is an error."})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{i(1),g(null),S(""),y(""),setTimeout(()=>{var P;return(P=m.current)==null?void 0:P.focus()},100)},style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:"Scan Different Card"}),t.jsxs("button",{onClick:()=>i(3),disabled:!b.isActive||b.isDeactivated,className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 bg-emerald-500 text-white",children:["Continue ",t.jsx(za,{className:"w-5 h-5"})]})]})]}),o===3&&b&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"p-3 rounded-xl border flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(gd,{style:{color:n.text.tertiary},className:"w-5 h-5"}),t.jsxs("div",{children:[t.jsxs("p",{style:{color:n.text.primary},className:"font-semibold",children:[b.firstName," ",b.lastName]}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm",children:b.schoolUId})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{style:{color:n.text.secondary},className:"text-xs",children:"Balance"}),t.jsxs("p",{className:"font-bold text-emerald-500",children:["",parseFloat(b.balance||0).toLocaleString()]})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{style:{color:n.text.primary},className:"font-semibold",children:"Select Amount"}),R?t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:ue,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary,borderColor:n.border.primary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold border hover:opacity-80 transition",children:"Cancel"}),t.jsx("button",{onClick:ae,className:"px-3 py-1.5 rounded-lg text-xs font-semibold hover:opacity-90 transition bg-emerald-500 text-white",children:"Save"})]}):t.jsxs("button",{onClick:we,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary,borderColor:n.border.primary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold border hover:opacity-80 transition flex items-center gap-1.5",children:[t.jsx(wj,{className:"w-3.5 h-3.5"})," Edit"]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[Ne.map((P,M)=>t.jsxs("div",{className:"relative",children:[t.jsxs("button",{type:"button",onClick:()=>{R||(C(P),E(""))},disabled:R,style:{background:j===P&&!R?"#10B981":l?"rgba(15,18,39,0.5)":"#F9FAFB",color:j===P&&!R?"#FFFFFF":n.text.primary,borderColor:j===P&&!R?"#10B981":n.border.primary,opacity:R?.7:1},className:"w-full py-4 rounded-xl border font-bold text-xl transition-all hover:opacity-90 disabled:cursor-not-allowed",children:["",P]}),R&&t.jsx("button",{onClick:()=>Ce(M),style:{background:"#EF4444"},className:"absolute -top-2 -right-2 w-5 h-5 rounded-full text-white text-xs font-bold flex items-center justify-center hover:opacity-80 transition",children:""})]},M)),R&&Ne.length<5&&!k&&t.jsx("button",{onClick:()=>A(!0),style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary,color:n.text.primary},className:"py-4 rounded-xl font-bold text-2xl border-2 border-dashed hover:opacity-80 transition",children:"+"}),!R&&t.jsx("button",{type:"button",onClick:()=>C("custom"),style:{background:j==="custom"?"#10B981":l?"rgba(15,18,39,0.5)":"#F9FAFB",color:j==="custom"?"#FFFFFF":n.text.primary,borderColor:j==="custom"?"#10B981":n.border.primary},className:"py-4 rounded-xl border font-semibold transition-all hover:opacity-90",children:"Custom"})]}),R&&k&&t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"p-3 rounded-xl border",children:[t.jsx("label",{style:{color:n.text.secondary},className:"text-xs uppercase font-bold mb-2 block",children:"Add New Amount"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",value:N,onChange:P=>w(P.target.value),onKeyDown:P=>P.key==="Enter"&&re(),placeholder:"Enter amount...",style:{background:l?"rgba(15,18,39,0.8)":"#FFFFFF",color:n.text.primary,borderColor:n.border.primary},className:"flex-1 px-3 py-2 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400/50",autoFocus:!0}),t.jsx("button",{onClick:re,className:"px-4 py-2 rounded-lg text-xs font-bold hover:opacity-90 transition bg-emerald-500 text-white",children:"Add"}),t.jsx("button",{onClick:()=>{A(!1),w("")},style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary,borderColor:n.border.primary},className:"px-3 py-2 rounded-lg border text-xs font-semibold hover:opacity-80 transition",children:"Cancel"})]})]}),j==="custom"&&!R&&t.jsxs("div",{children:[t.jsx("label",{style:{color:n.text.primary},className:"font-semibold mb-2 block",children:"Enter Custom Amount"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{style:{color:n.text.tertiary},className:"absolute left-4 top-1/2 -translate-y-1/2 text-xl font-bold",children:""}),t.jsx("input",{type:"number",value:T,onChange:P=>E(P.target.value),placeholder:"Enter amount",min:"10",max:"10000",style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full pl-12 pr-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-xl font-bold",autoFocus:!0})]}),t.jsx("p",{style:{color:n.text.tertiary},className:"text-xs mt-1",children:"Min: 10 | Max: 10,000"})]}),J()>0&&!R&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-4 rounded-xl border",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{style:{color:n.text.secondary},children:"Amount to Load"}),t.jsxs("span",{className:"text-2xl font-bold text-emerald-500",children:["",J().toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-emerald-500/20",children:[t.jsx("span",{style:{color:n.text.secondary},children:"New Balance"}),t.jsxs("span",{style:{color:n.text.primary},className:"font-semibold",children:["",(parseFloat(b.balance||0)+J()).toLocaleString()]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>i(2),disabled:R,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80 disabled:opacity-50 disabled:cursor-not-allowed",children:" Back"}),t.jsxs("button",{onClick:ee,disabled:J()<=0||R,className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 bg-emerald-500 text-white",children:["Proceed ",t.jsx(za,{className:"w-5 h-5"})]})]})]}),o===4&&b&&t.jsxs("div",{className:"space-y-5 text-center",children:[t.jsxs("div",{style:{background:"rgba(251,191,36,0.2)"},className:"w-28 h-28 rounded-full flex flex-col items-center justify-center mx-auto",children:[t.jsx(oa,{className:"w-8 h-8 text-yellow-500"}),t.jsx("span",{className:"text-4xl font-bold text-yellow-500 mt-1",children:D})]}),t.jsxs("div",{children:[t.jsx("h3",{style:{color:n.text.primary},className:"text-xl font-bold",children:"Confirm Cash-In"}),t.jsxs("p",{style:{color:n.text.secondary},className:"mt-2",children:["Transaction will be processed in ",D," second",D!==1?"s":""]})]}),t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"rounded-xl border p-4 text-left space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},children:"User"}),t.jsxs("span",{style:{color:n.text.primary},className:"font-semibold",children:[b.firstName," ",b.lastName]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},children:"School ID"}),t.jsx("span",{style:{color:n.text.primary},className:"font-mono",children:b.schoolUId})]}),t.jsxs("div",{className:"flex justify-between pt-2 border-t border-dashed",style:{borderColor:n.border.primary},children:[t.jsx("span",{style:{color:n.text.secondary},children:"Amount"}),t.jsxs("span",{className:"text-2xl font-bold text-emerald-500",children:["",J().toLocaleString()]})]})]}),t.jsx("button",{onClick:L,className:"w-full py-3 rounded-xl font-bold transition-all hover:opacity-90 bg-red-500 text-white",children:"Cancel"})]}),o===5&&z&&t.jsxs("div",{className:"text-center space-y-5",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto",children:t.jsx(Ve,{className:"w-12 h-12 text-emerald-500"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-bold text-emerald-500",children:"Cash-In Successful!"}),t.jsx("p",{style:{color:n.text.secondary},className:"mt-2",children:"The balance has been loaded to the user's account"})]}),t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"rounded-xl border p-5 text-left space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"Transaction ID"}),t.jsx("span",{style:{color:n.text.primary},className:"font-mono font-semibold text-sm",children:z.transactionId||z.transaction_id})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"User"}),t.jsxs("span",{style:{color:n.text.primary},className:"font-semibold text-sm",children:[b.firstName," ",b.lastName]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"Amount Loaded"}),t.jsxs("span",{className:"font-bold text-emerald-500",children:["+",parseFloat(z.amount).toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between pt-2 border-t",style:{borderColor:n.border.primary},children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"New Balance"}),t.jsxs("span",{style:{color:n.text.primary},className:"text-lg font-bold",children:["",parseFloat(z.newBalance||b.balance).toLocaleString()]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:de,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:"Cash-In Another"}),t.jsx("button",{onClick:ce,className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 bg-emerald-500 text-white",children:"Done"})]})]})]}),t.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
          }
          .animate-fadeIn {
            animation: fadeIn 0.2s ease-out;
          }
        `})]})]})}function Jj(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState({todayCashIn:0,todayCashOut:0,todayTransactions:0,todayRefunds:0,todayRefundsCount:0,totalUsers:0,activeUsers:0,totalMerchants:0}),[n,l]=p.useState([]),[o,i]=p.useState(!0),d=p.useRef(null),[u,c]=p.useState(!1),[x,m]=p.useState(!1),[h,v]=p.useState(""),S=async()=>{try{const g=await Z.get("/admin/treasury/dashboard");g&&s({todayCashIn:g.todayCashIn||0,todayCashOut:g.todayCashOut||0,todayTransactions:g.todayTransactions||0,todayRefundsCount:g.todayRefundsCount||0,totalUsers:g.totalUsers||0,activeUsers:g.activeUsers||0,totalMerchants:g.totalMerchants||0});const j=await Z.get("/admin/treasury/transactions?limit=10");j!=null&&j.transactions&&l(j.transactions)}catch(g){console.error("Error loading dashboard:",g)}finally{i(!1)}};p.useEffect(()=>(S(),d.current=setInterval(S,5e3),()=>{d.current&&clearInterval(d.current)}),[]);const f=g=>{v(g),m(!1),c(!0)},y=()=>{S()},b=()=>{S()};return o?t.jsx("div",{style:{color:e.accent.primary},className:"text-center py-[60px]",children:"Loading dashboard..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Treasury Home"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Cash-in and User Registration operations with transaction monitoring  Auto-updates every 5 seconds"})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[t.jsx(Al,{icon:"",label:"TODAY'S CASH-IN",value:`${(r.todayCashIn||0).toLocaleString()}`,subtitle:"loaded today",color:"#10B981",theme:e}),t.jsx(Al,{icon:"",label:"TODAY'S TRANSACTIONS",value:r.todayTransactions||0,subtitle:"cash-ins today",color:"#3B82F6",theme:e}),t.jsx(Al,{icon:"",label:"REGISTERED USERS",value:r.totalUsers||0,subtitle:`${r.activeUsers||0} active`,color:"#A855F7",theme:e}),t.jsx(Al,{icon:"",label:"MERCHANTS",value:r.totalMerchants||0,subtitle:"registered",color:"#F59E0B",theme:e})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[t.jsxs("button",{onClick:()=>{v(""),m(!0)},style:{background:"linear-gradient(135deg, rgba(16,185,129,0.2) 0%, rgba(16,185,129,0.1) 100%)",borderColor:"rgba(16,185,129,0.3)"},className:"col-span-2 p-5 rounded-2xl border flex items-center gap-4 transition-all hover:scale-[1.01] hover:shadow-lg cursor-pointer",children:[t.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center text-2xl flex-shrink-0",style:{background:"rgba(16,185,129,0.2)"},children:""}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{className:"text-base font-bold text-emerald-500 m-0",children:"Cash-In for User"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs m-0 mt-1",children:"Load balance to NUCash account"})]})]}),t.jsxs("button",{onClick:()=>{v(""),c(!0)},style:{background:a?"linear-gradient(135deg, rgba(255,212,28,0.2) 0%, rgba(255,212,28,0.1) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.2) 0%, rgba(59,130,246,0.1) 100%)",borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"col-span-2 p-5 rounded-2xl border flex items-center gap-4 transition-all hover:scale-[1.01] hover:shadow-lg cursor-pointer",children:[t.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center text-2xl flex-shrink-0",style:{background:a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"},children:""}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{style:{color:e.accent.primary},className:"text-base font-bold m-0",children:"Register New User"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs m-0 mt-1",children:"Add student or employee to NUCash"})]})]})]}),t.jsx("div",{className:"flex-1 overflow-hidden flex flex-col min-h-0",children:t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden flex-1 flex flex-col",children:[t.jsx("div",{style:{borderColor:e.border.primary},className:"p-4 border-b flex justify-between items-center flex-shrink-0",children:t.jsxs("div",{children:[t.jsx("h3",{style:{color:e.accent.primary},className:"m-0 mb-1 text-base font-bold",children:" Recent Transactions"}),t.jsx("p",{style:{color:e.text.secondary},className:"m-0 text-xs",children:"Latest cash-in and cash-out activities"})]})}),t.jsx("div",{className:"p-4 overflow-y-auto flex-1",children:n.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-16",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{children:"No transactions yet today"})]}):t.jsx(zb,{transactions:n,showHeader:!1,compact:!0})})]})}),t.jsx(Gj,{isOpen:u,onClose:()=>{c(!1),v("")},onSuccess:y,prefillRfid:h}),t.jsx(Zj,{isOpen:x,onClose:()=>m(!1),onSuccess:b,onRegisterUser:f})]})}function Al({icon:e,label:a,value:r,subtitle:s,color:n,theme:l}){return t.jsxs("div",{style:{background:l.bg.card,borderColor:l.border.primary},className:"p-4 rounded-2xl border relative overflow-hidden transition-all duration-300",children:[t.jsx("div",{className:"absolute right-3 top-3 text-[32px] opacity-15",children:e}),t.jsx("div",{style:{color:l.text.secondary},className:"text-[10px] font-bold uppercase tracking-wide mb-2",children:a}),t.jsx("div",{style:{color:l.text.primary},className:"text-2xl font-extrabold mb-1",children:r}),t.jsx("div",{className:"text-[10px] font-semibold inline-block py-[2px] px-[8px] rounded-lg",style:{color:n,background:`${n}20`},children:s})]})}const Kj=e=>{const a=e.trim();if(/^\d+$/.test(a)){const s=parseInt(a,10);let n=s.toString(16).toUpperCase();n.length%2!==0&&(n="0"+n),n=n.padStart(8,"0");const o=(n.match(/.{2}/g)||[]).reverse().join("");return console.log(" RFID Conversion (CashIn Search):",{input:a,decimal:s,hexBigEndian:n,hexLittleEndian:o}),o}if(/^[0-9A-Fa-f]+$/.test(a)&&a.length%2===0){const n=(a.match(/.{2}/g)||[]).reverse().join("").toUpperCase();return console.log(" RFID Conversion (CashIn Search - already hex):",{input:a,hexBigEndian:a.toUpperCase(),hexLittleEndian:n}),n}return console.warn(" Unrecognized RFID format:",a),a};function e4(){var g;const e=st(),{theme:a}=ne(),[r,s]=p.useState(""),[n,l]=p.useState(null),[o,i]=p.useState(""),[d,u]=p.useState(!1),[c,x]=p.useState(!1),[m,h]=p.useState(null),v=p.useRef(null),S=[50,100,200,500,1e3],f=async()=>{if(!r.trim()){W.error("Please enter a School ID or RFID");return}x(!0),l(null);try{let j=r.trim();/^\d+$/.test(j)?(j=Kj(j),console.log(" Searching with converted RFID:",j)):console.log(" Searching with School ID:",j);const C=await Z.get(`/admin/treasury/user/search?query=${encodeURIComponent(j)}`);C!=null&&C.user?(l(C.user),W.success("User found!")):W.error("User not found")}catch(j){W.error(j.message||"Failed to find user")}finally{x(!1)}},y=async()=>{if(!n){W.error("Please search for a user first");return}const j=parseFloat(o);if(!j||j<=0){W.error("Please enter a valid amount");return}if(j<10){W.error("Minimum cash-in is 10");return}if(j>1e4){W.error("Maximum cash-in is 10,000");return}u(!0);try{const C=await Z.post("/admin/treasury/cashin",{userId:n._id||n.userId,amount:j});C!=null&&C.success?(h({userName:`${n.firstName} ${n.lastName}`,amount:j,newBalance:C.newBalance,transactionId:C.transactionId,timestamp:new Date().toLocaleString()}),W.success("Cash-in successful!")):W.error((C==null?void 0:C.message)||"Cash-in failed")}catch(C){W.error(C.message||"Cash-in failed")}finally{u(!1)}},b=()=>{var j;l(null),s(""),i(""),h(null),(j=v.current)==null||j.focus()};return m?t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:a.border.primary},className:"mb-[30px] border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:a.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Cash-In Complete"]}),t.jsx("p",{style:{color:a.text.secondary},className:"text-[13px] m-0",children:"Transaction processed successfully"})]}),t.jsx("div",{className:"max-w-md mx-auto w-full",children:t.jsxs("div",{style:{background:a.bg.card,borderColor:"rgba(16,185,129,0.5)"},className:"rounded-2xl border-2 overflow-hidden",children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, #10B981 0%, #059669 100%)"},className:"p-6 text-center",children:[t.jsx("div",{className:"text-5xl mb-3",children:""}),t.jsx("h3",{className:"text-white text-xl font-bold",children:"Cash-In Successful!"})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"User"}),t.jsx("span",{style:{color:a.text.primary},className:"font-semibold",children:m.userName})]}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"Amount"}),t.jsxs("span",{style:{color:"#10B981"},className:"font-bold text-xl",children:["+",m.amount.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"New Balance"}),t.jsxs("span",{style:{color:a.text.primary},className:"font-bold",children:["",(g=m.newBalance)==null?void 0:g.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"Transaction ID"}),t.jsx("span",{style:{color:a.text.secondary,fontFamily:"monospace"},className:"text-xs",children:m.transactionId})]}),t.jsxs("div",{className:"flex justify-between items-center py-3",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"Date & Time"}),t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:m.timestamp})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:()=>e("/admin/treasury/dashboard"),style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"flex-1 py-3 rounded-xl font-semibold border hover:opacity-80 transition",children:"Back to Home"}),t.jsx("button",{onClick:b,style:{background:a.accent.primary,color:a.accent.secondary},className:"flex-1 py-3 rounded-xl font-bold hover:opacity-90 transition",children:"New Cash-In"})]})]})]})})]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:a.border.primary},className:"mb-[30px] border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:a.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Cash-In"]}),t.jsx("p",{style:{color:a.text.secondary},className:"text-[13px] m-0",children:"Load balance to user accounts"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{style:{background:a.bg.card,borderColor:a.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("h3",{style:{color:a.text.primary},className:"text-lg font-bold mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""})," Find User"]}),t.jsxs("div",{className:"flex gap-3 mb-4",children:[t.jsx("input",{ref:v,type:"password",value:r,onChange:j=>s(j.target.value),onKeyDown:j=>j.key==="Enter"&&f(),placeholder:"Enter School ID or RFID...",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"flex-1 px-4 py-3 rounded-xl border text-sm focus:outline-none",autoFocus:!0}),t.jsx("button",{onClick:f,disabled:c,style:{background:a.accent.primary,color:a.accent.secondary},className:"px-6 py-3 rounded-xl font-bold text-sm hover:opacity-90 transition disabled:opacity-50",children:c?"Searching...":"Search"})]}),n&&t.jsxs("div",{style:{background:a.bg.tertiary,borderColor:a.border.primary},className:"p-5 rounded-xl border",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase font-bold mb-1",children:"User Found"}),t.jsxs("h4",{style:{color:a.text.primary},className:"text-xl font-bold",children:[n.firstName," ",n.lastName]}),t.jsxs("p",{style:{color:a.text.secondary},className:"text-sm",children:[n.schoolUId,"  ",n.role]})]}),t.jsx("div",{style:{background:n.isActive?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:n.isActive?"#10B981":"#EF4444"},className:"px-3 py-1 rounded-full text-xs font-bold",children:n.isActive?"ACTIVE":"INACTIVE"})]}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"pt-4 border-t",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase font-bold mb-1",children:"Current Balance"}),t.jsxs("p",{style:{color:"#10B981"},className:"text-3xl font-extrabold",children:["",(n.balance||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]}),!n&&!c&&t.jsxs("div",{style:{color:a.text.tertiary},className:"text-center py-10",children:[t.jsx("div",{className:"text-4xl mb-3",children:""}),t.jsx("p",{className:"text-sm",children:"Search for a user to begin cash-in"})]})]}),t.jsxs("div",{style:{background:a.bg.card,borderColor:a.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("h3",{style:{color:a.text.primary},className:"text-lg font-bold mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""})," Enter Amount"]}),t.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:S.map(j=>t.jsxs("button",{onClick:()=>i(j.toString()),style:{background:o===j.toString()?a.accent.primary:a.bg.tertiary,color:o===j.toString()?a.accent.secondary:a.text.primary,borderColor:a.border.primary},className:"py-3 rounded-xl font-bold text-sm border hover:opacity-80 transition",children:["",j]},j))}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{style:{color:a.text.secondary},className:"text-xs uppercase font-bold mb-2 block",children:"Custom Amount"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{style:{color:a.text.secondary},className:"absolute left-4 top-1/2 -translate-y-1/2 text-xl font-bold",children:""}),t.jsx("input",{type:"number",value:o,onChange:j=>i(j.target.value),placeholder:"0.00",min:"0",step:"0.01",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full pl-10 pr-4 py-4 rounded-xl border text-2xl font-bold focus:outline-none"})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:b,style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"flex-1 py-4 rounded-xl font-bold text-sm border hover:opacity-80 transition",children:"Reset"}),t.jsx("button",{onClick:y,disabled:!n||!o||d,style:{background:"#10B981",color:"#FFFFFF"},className:"flex-1 py-4 rounded-xl font-bold text-sm hover:opacity-90 transition disabled:opacity-50",children:d?"Processing...":`Load ${o||"0.00"}`})]}),n&&o&&parseFloat(o)>0&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"mt-4 p-4 rounded-xl border",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs mb-1",children:"New Balance After Cash-In"}),t.jsxs("p",{style:{color:"#10B981"},className:"text-2xl font-extrabold",children:["",((n.balance||0)+parseFloat(o||0)).toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]})]})]})}const t4=e=>{const a=e.trim();if(/^\d+$/.test(a)){const s=parseInt(a,10);let n=s.toString(16).toUpperCase();n.length%2!==0&&(n="0"+n),n=n.padStart(8,"0");const o=(n.match(/.{2}/g)||[]).reverse().join("");return console.log(" RFID Conversion (Registration):",{input:a,decimal:s,hexBigEndian:n,hexLittleEndian:o}),o}if(/^[0-9A-Fa-f]+$/.test(a)&&a.length%2===0){const n=(a.match(/.{2}/g)||[]).reverse().join("").toUpperCase();return console.log(" RFID Conversion (Registration - already hex):",{input:a,hexBigEndian:a.toUpperCase(),hexLittleEndian:n}),n}return console.warn(" Unrecognized RFID format:",a),a};function a4(){const e=st(),{theme:a}=ne(),r=p.useRef(null),[s,n]=p.useState({rfidUId:"",schoolUId:"",firstName:"",lastName:"",middleName:"",email:"",role:"student",pin:""}),[l,o]=p.useState(!1),[i,d]=p.useState(!1),[u,c]=p.useState(null),x=(S,f)=>{n(y=>({...y,[S]:f}))},m=()=>s.rfidUId.trim()?s.schoolUId.trim()?s.firstName.trim()?s.lastName.trim()?s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)?!s.pin||s.pin.length<4?(W.error("PIN must be at least 4 digits"),!1):!0:(W.error("Please enter a valid email address"),!1):(W.error("Email is required"),!1):(W.error("Last name is required"),!1):(W.error("First name is required"),!1):(W.error("School ID is required"),!1):(W.error("RFID is required"),!1),h=async()=>{if(!m())return;const S=t4(s.rfidUId);console.log(" Sending registration with RFID:",S),o(!0);try{const f=await Z.post("/admin/treasury/register",{rfidUId:S,schoolUId:s.schoolUId.trim(),firstName:s.firstName.trim(),lastName:s.lastName.trim(),middleName:s.middleName.trim(),email:s.email.trim().toLowerCase(),role:s.role,pin:s.pin});f!=null&&f.success?(c(f.user),d(!0),W.success("User registered successfully!")):W.error((f==null?void 0:f.message)||"Failed to register user")}catch(f){W.error(f.message||"Failed to register user")}finally{o(!1)}},v=()=>{var S;n({rfidUId:"",schoolUId:"",firstName:"",lastName:"",middleName:"",email:"",role:"student",pin:""}),d(!1),c(null),(S=r.current)==null||S.focus()};return i?t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:a.border.primary},className:"mb-[30px] border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:a.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Registration Complete"]}),t.jsx("p",{style:{color:a.text.secondary},className:"text-[13px] m-0",children:"New user has been registered successfully"})]}),t.jsx("div",{className:"max-w-md mx-auto w-full",children:t.jsxs("div",{style:{background:a.bg.card,borderColor:"rgba(16,185,129,0.5)"},className:"rounded-2xl border-2 overflow-hidden",children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, #10B981 0%, #059669 100%)"},className:"p-6 text-center",children:[t.jsx("div",{className:"text-5xl mb-3",children:""}),t.jsx("h3",{className:"text-white text-xl font-bold",children:"Registration Successful!"})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"Name"}),t.jsxs("span",{style:{color:a.text.primary},className:"font-semibold",children:[u==null?void 0:u.firstName," ",u==null?void 0:u.lastName]})]}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"School ID"}),t.jsx("span",{style:{color:a.text.primary},className:"font-semibold",children:u==null?void 0:u.schoolUId})]}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"Email"}),t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:u==null?void 0:u.email})]}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"Role"}),t.jsx("span",{style:{color:a.text.primary},className:"capitalize",children:u==null?void 0:u.role})]}),t.jsxs("div",{className:"flex justify-between items-center py-3",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"Balance"}),t.jsx("span",{style:{color:a.accent.primary},className:"font-bold",children:"0.00"})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:v,style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"flex-1 py-3 rounded-xl font-semibold border hover:opacity-80 transition",children:"Register Another"}),t.jsx("button",{onClick:()=>e("/admin/treasury/cashin"),style:{background:a.accent.primary,color:a.accent.secondary},className:"flex-1 py-3 rounded-xl font-bold hover:opacity-90 transition",children:"Cash In Now"})]})]})]})})]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:a.border.primary},className:"mb-[30px] border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:a.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Register User"]}),t.jsx("p",{style:{color:a.text.secondary},className:"text-[13px] m-0",children:"Create a new NUCash account for a student or employee"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{style:{background:a.bg.card,borderColor:a.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("h3",{style:{color:a.text.primary},className:"text-lg font-bold mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""})," Identification"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:["RFID ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{ref:r,type:"password",value:s.rfidUId,onChange:S=>x("rfidUId",S.target.value),placeholder:"Scan or enter RFID",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border font-mono text-sm focus:outline-none",autoFocus:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:["School ID ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:s.schoolUId,onChange:S=>x("schoolUId",S.target.value),placeholder:"e.g., 2024-12345",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:["First Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:s.firstName,onChange:S=>x("firstName",S.target.value),placeholder:"Juan",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:["Last Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:s.lastName,onChange:S=>x("lastName",S.target.value),placeholder:"Dela Cruz",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:"Middle Name"}),t.jsx("input",{type:"text",value:s.middleName,onChange:S=>x("middleName",S.target.value),placeholder:"Optional",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:["Email ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"email",value:s.email,onChange:S=>x("email",S.target.value),placeholder:"juan.delacruz@nu.edu.ph",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none"})]})]}),t.jsxs("div",{style:{background:a.bg.card,borderColor:a.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("h3",{style:{color:a.text.primary},className:"text-lg font-bold mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""})," Account Settings"]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-3",children:"User Type"}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:["student","employee"].map(S=>t.jsx("button",{onClick:()=>x("role",S),style:{background:s.role===S?a.accent.primary:a.bg.tertiary,color:s.role===S?a.accent.secondary:a.text.primary,borderColor:a.border.primary},className:"py-4 rounded-xl font-bold text-sm border capitalize hover:opacity-80 transition",children:S==="student"?" Student":" Employee"},S))})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:["PIN ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"password",value:s.pin,onChange:S=>x("pin",S.target.value),placeholder:"Enter 4-6 digit PIN",maxLength:6,style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none text-center tracking-widest"}),t.jsx("p",{style:{color:a.text.muted},className:"text-xs mt-2",children:"User will use this PIN to login"})]}),t.jsxs("div",{className:"flex gap-3 mt-8",children:[t.jsx("button",{onClick:()=>e("/admin/treasury/dashboard"),style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"flex-1 py-4 rounded-xl font-bold text-sm border hover:opacity-80 transition",children:"Cancel"}),t.jsx("button",{onClick:h,disabled:l,style:{background:a.accent.primary,color:a.accent.secondary},className:"flex-1 py-4 rounded-xl font-bold text-sm hover:opacity-90 transition disabled:opacity-50",children:l?"Registering...":"Register User"})]})]})]})]})}function Ox(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(""),[d,u]=p.useState(""),[c,x]=p.useState(""),[m,h]=p.useState(""),v=p.useRef(null),S=async(b=!1)=>{try{b||l(!0);const g=new URLSearchParams;g.append("limit","100"),d&&(d==="refunded"?g.append("status","Refunded"):g.append("transactionType",d)),o&&g.append("search",o),c&&g.append("startDate",c),m&&g.append("endDate",m);const j=await Z.get(`/admin/treasury/transactions?${g}`);j!=null&&j.transactions&&s(j.transactions)}catch{b||W.error("Failed to load transactions")}finally{b||l(!1)}};p.useEffect(()=>(S(),v.current=setInterval(()=>S(!0),1e4),()=>{v.current&&clearInterval(v.current)}),[d,o,c,m]);const f=()=>{const b=y.map(g=>({Date:g.createdAt?new Date(g.createdAt).toLocaleDateString():g.date||"",Time:g.createdAt?new Date(g.createdAt).toLocaleTimeString():g.time||"","ID Number":g.idNumber||g.schoolUId||"",Name:g.userName||"",Type:g.transactionType==="credit"?"Cash-In":"Payment",Status:g.status||"Completed",Amount:g.amount,"Processed By":g.transactionType==="credit"?g.adminName||g.processedBy||"Treasury":"","Transaction ID":g.transactionId||g._id||""}));zt(b,"transactions")},y=r.filter(b=>{var j,C,T,E,D,I,z,Y;if(!o)return!0;const g=o.toLowerCase();return((j=b.transactionId)==null?void 0:j.toLowerCase().includes(g))||((C=b._id)==null?void 0:C.toLowerCase().includes(g))||((T=b.idNumber)==null?void 0:T.toLowerCase().includes(g))||((E=b.schoolUId)==null?void 0:E.toLowerCase().includes(g))||((D=b.userName)==null?void 0:D.toLowerCase().includes(g))||((I=b.businessName)==null?void 0:I.toLowerCase().includes(g))||((z=b.adminName)==null?void 0:z.toLowerCase().includes(g))||((Y=b.processedBy)==null?void 0:Y.toLowerCase().includes(g))});return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{className:"mb-6 border-b-2 pb-5",style:{borderColor:a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"},children:[t.jsxs("div",{className:"mb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Transactions"]}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:["Showing ",y.length," transactions  Auto-refreshes every 10s"]})]}),t.jsxs("div",{className:"flex gap-3 items-end flex-wrap",children:[t.jsx(Ht,{value:o,onChange:i,placeholder:"Search by ID, name, transaction ID..."}),t.jsx(aa,{value:d,onChange:u,label:"Type",options:[{value:"credit",label:"Cash-In"},{value:"debit",label:"Payment"},{value:"refunded",label:"Refunded"}]}),t.jsx(yr,{startDate:c,endDate:m,onStartChange:x,onEndChange:h}),t.jsx(qt,{onClick:f,disabled:y.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading transactions..."]}):y.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{children:"No transactions found"})]}):t.jsx(zb,{transactions:y,showHeader:!1})})]})}function r4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState([]),[o,i]=p.useState(!0),[d,u]=p.useState(""),[c,x]=p.useState("all"),[m,h]=p.useState(null),v=p.useRef(null),S=async()=>{try{const T=await Z.get("/admin/treasury/merchants?limit=999");T!=null&&T.merchants&&s(T.merchants)}catch{console.error("Failed to fetch stats")}},f=async(T=!1)=>{try{T||i(!0);const E=new URLSearchParams;c!=="all"&&E.append("isActive",c==="active"),d&&E.append("search",d);const D=await Z.get(`/admin/treasury/merchants?${E}`);D!=null&&D.merchants&&l(D.merchants)}catch{T||W.error("Failed to load merchants")}finally{T||i(!1)}};p.useEffect(()=>(S(),f(),v.current=setInterval(()=>{S(),f(!0)},3e4),()=>{v.current&&clearInterval(v.current)}),[c,d]);const y=n,b=r.length,g=r.filter(T=>T.isActive!==!1).length,j=r.reduce((T,E)=>T+(E.totalCollections||0),0),C=r.reduce((T,E)=>T+(E.todayCollections||0),0);return t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Merchants"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"View merchant accounts and transaction metrics"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-5",children:[t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(59, 130, 246, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(59, 130, 246, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(Zs,{className:"w-6 h-6 text-blue-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Total Merchants"}),t.jsx("p",{className:"text-2xl font-bold text-blue-500",children:b})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(16, 185, 129, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(16, 185, 129, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(ci,{className:"w-6 h-6 text-emerald-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Active"}),t.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:g})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(251, 191, 36, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(251, 191, 36, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(oi,{className:"w-6 h-6 text-yellow-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Total Collections"}),t.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:["",j.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(139, 92, 246, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(139, 92, 246, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(li,{className:"w-6 h-6 text-violet-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Today's Collections"}),t.jsxs("p",{className:"text-2xl font-bold text-violet-500",children:["",C.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.8)":e.bg.card,borderColor:e.accent.primary},className:"rounded-xl border-2 p-3 mb-5 flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(vr,{style:{color:e.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search merchants...",value:d,onChange:T=>u(T.target.value),style:{background:"transparent",color:e.text.primary,borderColor:"transparent"},className:"w-full pl-10 pr-4 py-2.5 rounded-lg text-sm focus:outline-none placeholder:text-gray-500"})]}),t.jsx("div",{style:{background:e.border.primary},className:"hidden sm:block w-px h-8"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","active","inactive"].map(T=>t.jsx("button",{onClick:()=>x(T),style:{background:c===T?e.accent.primary:a?"rgba(30,35,71,0.8)":"#F9FAFB",color:c===T?a?"#181D40":"#FFFFFF":e.text.primary,borderColor:e.border.primary},className:"px-3 py-2 rounded-lg font-semibold text-xs border hover:opacity-80 transition capitalize",children:T},T))})]}),t.jsx("div",{className:"mb-4",children:t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:["Showing ",t.jsx("span",{style:{color:e.accent.primary},className:"font-bold",children:y.length})," of ",r.length," merchants"]})}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:o?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading merchants..."]}):y.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{className:"font-semibold",children:"No merchants found"}),t.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your search or filters"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:y.map(T=>t.jsx(s4,{merchant:T,theme:e,isDarkMode:a,onView:()=>h(T)},T._id||T.merchantId))})})}),m&&t.jsx(n4,{merchant:m,theme:e,isDarkMode:a,onClose:()=>h(null)})]})}function s4({merchant:e,theme:a,isDarkMode:r,onView:s}){const n=e.isActive!==!1,l=e.type==="motorpool";return t.jsxs("div",{style:{background:r?"rgba(30,35,71,0.6)":a.bg.tertiary,borderColor:l?"rgba(139, 92, 246, 0.4)":a.border.primary},className:"p-5 rounded-xl border cursor-pointer hover:opacity-90 transition relative overflow-hidden",onClick:s,children:[l&&t.jsxs("div",{style:{background:"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)"},className:"absolute top-0 right-0 px-3 py-1 rounded-bl-lg text-white text-xs font-bold flex items-center gap-1",children:[t.jsx(jr,{className:"w-3 h-3"})," Shuttle"]}),t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsx("div",{style:{background:l?"rgba(139,92,246,0.15)":"rgba(255,212,28,0.15)",color:l?"#8B5CF6":"#FFD41C"},className:"px-3 py-1 rounded-lg text-xs font-bold",children:e.merchantId||"N/A"}),t.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:n?"#10B981":"#EF4444"}})]}),t.jsx("h4",{style:{color:a.text.primary},className:"font-bold text-lg mb-2",children:e.businessName||e.name||"Unknown"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-xs",children:"Total Collections"}),t.jsxs("span",{style:{color:"#3B82F6"},className:"font-bold text-sm",children:["",(e.totalCollections||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-xs",children:"Transactions"}),t.jsx("span",{style:{color:a.text.primary},className:"font-bold text-sm",children:(e.totalTransactions||0).toLocaleString()})]})]}),t.jsx("button",{style:{background:l?"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)":a.accent.primary,color:l?"#FFFFFF":a.accent.secondary},className:"w-full mt-4 py-2 rounded-lg font-bold text-sm hover:opacity-90 transition",children:"View Details"})]})}function n4({merchant:e,theme:a,isDarkMode:r,onClose:s}){const[n,l]=p.useState("metrics"),[o,i]=p.useState(!0),[d,u]=p.useState(null),[c,x]=p.useState([]),[m,h]=p.useState(null),[v,S]=p.useState(1),[f,y]=p.useState(1),b=e.type==="motorpool";p.useEffect(()=>{g()},[e.merchantId,v]);const g=async()=>{var T;try{i(!0);const E=await Z.get(`/admin/treasury/merchants/${e.merchantId}/details?page=${v}&limit=10`);E!=null&&E.success&&(u(E.merchant),h(E.metrics),x(E.transactions||[]),y(((T=E.pagination)==null?void 0:T.pages)||1))}catch{W.error("Failed to load merchant details")}finally{i(!1)}},j=T=>T?new Date(T).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",C=[{id:"metrics",label:"Metrics & Info",icon:ci},{id:"transactions",label:"Recent Transactions",icon:oa}];return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:s,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:r?"#1E2347":"#FFFFFF",borderColor:a.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-5xl max-h-[85vh] overflow-hidden animate-fadeIn",onClick:T=>T.stopPropagation(),children:[t.jsxs("div",{style:{background:b?"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)":`linear-gradient(135deg, ${a.accent.primary} 0%, ${r?"#B8860B":"#2563EB"} 100%)`},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(255,255,255,0.2)"},className:"w-14 h-14 rounded-full flex items-center justify-center",children:b?t.jsx(jr,{className:"w-7 h-7 text-white"}):t.jsx(Zs,{className:"w-7 h-7 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:e.businessName||e.name}),t.jsx("p",{className:"text-white/80 text-sm font-mono",children:e.merchantId})]})]}),t.jsx("button",{onClick:s,className:"text-white/80 hover:text-white transition-colors",children:t.jsx(ft,{className:"w-6 h-6"})})]}),t.jsx("div",{style:{background:r?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:a.border.primary},className:"px-6 py-3 border-b flex gap-2",children:C.map(T=>{const E=T.icon;return t.jsxs("button",{onClick:()=>l(T.id),style:{background:n===T.id?b?"#8B5CF6":a.accent.primary:"transparent",color:n===T.id?b||!r?"#FFFFFF":"#181D40":a.text.secondary,borderColor:n===T.id?"transparent":a.border.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm border flex items-center gap-2 transition-all hover:opacity-80",children:[t.jsx(E,{className:"w-4 h-4"}),T.label]},T.id)})}),t.jsx("div",{className:"p-6 max-h-[55vh] overflow-y-auto",children:o?t.jsxs("div",{style:{color:a.accent.primary},className:"text-center py-10",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${a.accent.primary} transparent transparent transparent`}}),"Loading details..."]}):n==="metrics"?t.jsx(l4,{merchant:d||e,metrics:m,theme:a,isDarkMode:r,isMotorpool:b}):t.jsx(o4,{transactions:c,theme:a,isDarkMode:r,isMotorpool:b,formatDate:j,currentPage:v,totalPages:f,onPageChange:S})})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
      `})]})}function l4({merchant:e,metrics:a,theme:r,isDarkMode:s,isMotorpool:n}){const l=n?"#8B5CF6":r.accent.primary;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"Today's Collections"}),t.jsxs("p",{className:"text-2xl font-bold text-emerald-500",children:["",((a==null?void 0:a.todayCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.todayTransactions)||0," transactions"]})]}),t.jsxs("div",{style:{background:"rgba(59,130,246,0.1)",borderColor:"rgba(59,130,246,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"This Week"}),t.jsxs("p",{className:"text-2xl font-bold text-blue-500",children:["",((a==null?void 0:a.weekCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.weekTransactions)||0," transactions"]})]}),t.jsxs("div",{style:{background:"rgba(251,191,36,0.1)",borderColor:"rgba(251,191,36,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"This Month"}),t.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:["",((a==null?void 0:a.monthCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.monthTransactions)||0," transactions"]})]}),t.jsxs("div",{style:{background:n?"rgba(139,92,246,0.1)":s?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",borderColor:n?"rgba(139,92,246,0.3)":s?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"All Time"}),t.jsxs("p",{className:"text-2xl font-bold",style:{color:l},children:["",((a==null?void 0:a.totalCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.totalTransactions)||0," transactions"]})]})]}),t.jsxs("div",{children:[t.jsxs("h4",{style:{color:r.text.primary},className:"font-bold mb-3 flex items-center gap-2",children:[n?t.jsx(jr,{className:"w-4 h-4"}):t.jsx(Zs,{className:"w-4 h-4"}),n?"Motorpool Info":"Merchant Info"]}),t.jsxs("div",{style:{background:s?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:r.border.primary},className:"rounded-xl border p-4 space-y-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Status"}),t.jsx("span",{style:{background:e.isActive!==!1?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:e.isActive!==!1?"#10B981":"#EF4444"},className:"px-2 py-0.5 rounded text-xs font-bold",children:e.isActive!==!1?"Active":"Inactive"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Type"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold capitalize",children:e.type||"Merchant"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Email"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm",children:e.email||"N/A"})]}),!n&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Contact Person"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm",children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:"N/A"})]}),e.licenseNumber&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"License #"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-mono",children:e.licenseNumber})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Registered"}),t.jsx("span",{style:{color:r.text.muted},className:"text-sm",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})]})]})]})]})}function o4({transactions:e,theme:a,isDarkMode:r,isMotorpool:s,formatDate:n,currentPage:l,totalPages:o,onPageChange:i}){return e.length===0?t.jsxs("div",{style:{color:a.text.tertiary},className:"text-center py-10",children:[t.jsx(oa,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{className:"font-semibold",children:"No transactions yet"}),t.jsx("p",{className:"text-sm mt-1",children:"Transactions will appear here once made"})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{style:{background:r?"rgba(15,18,39,0.3)":"#FFFFFF",borderColor:a.border.primary},className:"rounded-xl border overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{style:{background:r?"rgba(15,18,39,0.8)":"#F9FAFB",borderColor:a.border.primary},children:t.jsxs("tr",{className:"border-b",children:[t.jsx("th",{style:{color:a.text.secondary},className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"User"}),t.jsx("th",{style:{color:a.text.secondary},className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"Description"}),t.jsx("th",{style:{color:a.text.secondary},className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"Date & Time"}),t.jsx("th",{style:{color:a.text.secondary},className:"px-4 py-3 text-right text-xs font-bold uppercase tracking-wider",children:"Amount"}),t.jsx("th",{style:{color:a.text.secondary},className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider",children:"Status"})]})}),t.jsx("tbody",{children:e.map((d,u)=>{const c=d.status==="Refunded",x=d.status==="Completed";return t.jsxs("tr",{style:{borderColor:a.border.primary,background:r?u%2===0?"rgba(30,35,71,0.3)":"rgba(15,18,39,0.3)":u%2===0?"#FFFFFF":"#F9FAFB"},className:"border-b hover:opacity-80 transition-opacity",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("p",{style:{color:a.text.primary},className:"font-semibold text-sm",children:d.userName||"Unknown User"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("div",{style:{background:c?"rgba(239,68,68,0.2)":s?"rgba(139,92,246,0.2)":"rgba(16,185,129,0.2)"},className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5",children:c?t.jsx(pd,{className:"w-4 h-4 text-red-500"}):s?t.jsx(jr,{className:"w-4 h-4 text-violet-500"}):t.jsx(oi,{className:"w-4 h-4 text-emerald-500"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{style:{color:c?"#EF4444":a.text.primary},className:"text-sm font-medium break-words",children:d.itemDescription||"Payment"}),s&&d.transactionId&&t.jsxs("p",{style:{color:a.text.muted},className:"text-xs font-mono mt-1",children:["TXN: ",d.transactionId]})]})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.primary},className:"text-sm font-semibold whitespace-nowrap",children:new Date(d.timestamp||d.createdAt).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"})}),t.jsx("p",{style:{color:a.text.muted},className:"text-xs whitespace-nowrap mt-0.5",children:new Date(d.timestamp||d.createdAt).toLocaleTimeString("en-PH",{hour:"2-digit",minute:"2-digit"})})]})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsxs("p",{className:`font-bold text-base ${c?"text-red-500":"text-emerald-500"}`,children:[c?"-":"+","",(d.amount||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("div",{className:"flex justify-center",children:t.jsx("span",{style:{background:c?"rgba(239,68,68,0.2)":x?"rgba(16,185,129,0.2)":"rgba(251,191,36,0.2)",color:c?"#EF4444":x?"#10B981":"#F59E0B"},className:"px-2.5 py-1 rounded-md text-xs font-bold whitespace-nowrap",children:d.status||"Completed"})})})]},d._id||u)})})]})})}),o>1&&t.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[t.jsx("button",{onClick:()=>i(Math.max(1,l-1)),disabled:l===1,style:{background:r?"rgba(71,85,105,0.5)":"#E5E7EB",color:a.text.primary,borderColor:a.border.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm border disabled:opacity-50 transition hover:opacity-80",children:"Previous"}),t.jsxs("span",{style:{color:a.text.secondary,background:r?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:a.border.primary},className:"px-4 py-2 text-sm border rounded-lg flex items-center",children:["Page ",l," of ",o]}),t.jsx("button",{onClick:()=>i(Math.min(o,l+1)),disabled:l===o,style:{background:r?"rgba(71,85,105,0.5)":"#E5E7EB",color:a.text.primary,borderColor:a.border.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm border disabled:opacity-50 transition hover:opacity-80",children:"Next"})]})]})}function i4(){var de,we,ae,ue,Ce,re,Ne,Ue,Se,P;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState("all"),[d,u]=p.useState(""),[c,x]=p.useState(""),[m,h]=p.useState(""),[v,S]=p.useState(""),[f,y]=p.useState(null),[b,g]=p.useState(!1),[j,C]=p.useState(!1),[T,E]=p.useState(""),[D,I]=p.useState(!1),[z,Y]=p.useState(1),[_,V]=p.useState("details"),[R,B]=p.useState(""),[F,$]=p.useState(!1),N=15,w=p.useRef(null),k=async(M=!1)=>{try{M||l(!0);const G=new URLSearchParams;c&&G.append("status",c),d&&G.append("search",d);const se=await Z.get(`/admin/treasury/concerns?${G}`);se!=null&&se.concerns&&s(se.concerns)}catch{M||W.error("Failed to load concerns")}finally{M||l(!1)}};p.useEffect(()=>(k(),w.current=setInterval(()=>k(!0),3e4),()=>{w.current&&clearInterval(w.current)}),[c,d]),p.useEffect(()=>{Y(1)},[d,c,o,m,v]);const A=async M=>{var G;if(console.log(" Opening concern:",{id:M._id,hasNotes:!!M.notes,notesCount:((G=M.notes)==null?void 0:G.length)||0,notes:M.notes}),M.status==="pending"&&M.submissionType!=="feedback")try{const se=JSON.parse(localStorage.getItem("adminData")||"{}");await Z.patch(`/admin/treasury/concerns/${M._id}/status`,{status:"in_progress",adminName:se.firstName?`${se.firstName} ${se.lastName||""}`.trim():"Treasury Admin"}),M.status="in_progress"}catch(se){console.error("Failed to update status:",se)}y(M),V("details"),B(""),g(!0),console.log(" selectedConcern set:",{hasNotes:!!M.notes,notesArray:M.notes})},O=M=>{E(""),g(!1),C(!0)},q=async()=>{var M,G,se,oe,xe;if(!R.trim()){W.error("Please enter a note message");return}$(!0);try{const ie=JSON.parse(localStorage.getItem("adminData")||"{}"),nt=ie.firstName?`${ie.firstName} ${ie.lastName||""}`.trim():"Treasury Admin";console.log(" Sending note to:",f._id);const We=await Z.post(`/admin/treasury/concerns/${f._id}/note`,{note:R.trim(),adminName:nt}),Re=(We==null?void 0:We.data)||We;console.log(" Response received:",{success:Re==null?void 0:Re.success,notesCount:((G=(M=Re==null?void 0:Re.concern)==null?void 0:M.notes)==null?void 0:G.length)||0}),Re!=null&&Re.success?(W.success("Note sent successfully!"),B(""),Re.concern&&(console.log(" Updating with",(se=Re.concern.notes)==null?void 0:se.length,"notes"),y(Re.concern),V("notes")),k(!0)):W.error((Re==null?void 0:Re.message)||"Failed to send note")}catch(ie){console.error(" Send note error:",ie),W.error(((xe=(oe=ie==null?void 0:ie.response)==null?void 0:oe.data)==null?void 0:xe.message)||(ie==null?void 0:ie.message)||"Failed to send note")}finally{$(!1)}},U=async()=>{if(!T.trim()){W.error("Please provide a resolution message");return}I(!0);try{const M=JSON.parse(localStorage.getItem("adminData")||"{}"),G=await Z.patch(`/admin/treasury/concerns/${f._id}/status`,{status:"resolved",reply:T.trim(),adminName:M.firstName?`${M.firstName} ${M.lastName||""}`.trim():"Treasury Admin"});G!=null&&G.success&&(W.success("Concern resolved! User has been notified via email."),C(!1),g(!1),k(!0))}catch(M){W.error(M.message||"Failed to resolve concern")}finally{I(!1)}},H=()=>{const M=J.map(G=>{var se,oe;return{ID:((se=G._id)==null?void 0:se.slice(-8))||"",Type:G.submissionType||"assistance",User:(oe=G.user)!=null&&oe.firstName?`${G.user.firstName} ${G.user.lastName||""}`:G.userName||"",Subject:G.subject||"",Status:G.status||"pending",Priority:G.priority||"medium",Rating:G.rating||"",Date:G.createdAt?new Date(G.createdAt).toLocaleDateString():""}});zt(M,"treasury_concerns")},J=r.filter(M=>{var G,se,oe,xe,ie,nt,We,Re;if(o==="assistance"&&M.submissionType!=="assistance"||o==="feedback"&&M.submissionType!=="feedback")return!1;if(d){const tt=d.toLowerCase();if(!(((G=M._id)==null?void 0:G.toLowerCase().includes(tt))||((se=M.subject)==null?void 0:se.toLowerCase().includes(tt))||((oe=M.message)==null?void 0:oe.toLowerCase().includes(tt))||((ie=(xe=M.user)==null?void 0:xe.firstName)==null?void 0:ie.toLowerCase().includes(tt))||((We=(nt=M.user)==null?void 0:nt.lastName)==null?void 0:We.toLowerCase().includes(tt))||((Re=M.userName)==null?void 0:Re.toLowerCase().includes(tt))))return!1}if(c&&M.status!==c)return!1;if(m||v){const tt=new Date(M.createdAt);if(m&&tt<new Date(m)||v&&tt>new Date(v+"T23:59:59"))return!1}return!0}),ee=Math.ceil(J.length/N),L=(z-1)*N,X=J.slice(L,L+N),te=M=>{switch(M){case"pending":return"#FBBF24";case"in_progress":return"#3B82F6";case"resolved":return"#10B981";default:return e.text.secondary}},ce=M=>{if(M.submissionType!=="assistance"||M.status==="resolved")return null;const G=new Date,se=new Date(M.createdAt),oe=Math.floor((G-se)/(1e3*60*60*24));let xe=0,ie="transparent",nt=e.text.primary,We="",Re="";return oe<1?(xe=0,ie="transparent",We="New",Re="#10B981"):oe>=1&&oe<3?(xe=1,ie="rgba(251, 191, 36, 0.1)",We=`${oe}d old`,Re="#FBBF24"):oe>=3&&oe<5?(xe=2,ie="rgba(249, 115, 22, 0.15)",We=`${oe}d old`,Re="#F97316"):oe>=5&&oe<7?(xe=3,ie="rgba(234, 88, 12, 0.2)",We=`${oe}d old`,Re="#EA580C"):(xe=4,ie="rgba(239, 68, 68, 0.25)",We=`${oe}d old`,Re="#EF4444"),{ageInDays:oe,level:xe,backgroundColor:ie,textColor:nt,badgeText:We,badgeColor:Re}};return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading concerns..."]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("div",{className:"mb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Concerns & Feedback"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:J.length>0?`Showing ${L+1}-${Math.min(L+N,J.length)} of ${J.length}  Page ${z} of ${ee}`:`Manage user concerns and feedback  Total: ${r.length}`})]}),t.jsxs("div",{className:"flex gap-2 mb-5",children:[t.jsxs("button",{onClick:()=>i("all"),style:{padding:"10px 20px",background:o==="all"?"rgba(255,212,28,0.2)":"transparent",border:`2px solid ${o==="all"?e.accent.primary:"rgba(255,212,28,0.3)"}`,borderRadius:"8px",color:o==="all"?e.accent.primary:e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["All (",r.length,")"]}),t.jsxs("button",{onClick:()=>i("assistance"),style:{padding:"10px 20px",background:o==="assistance"?"rgba(59,130,246,0.2)":"transparent",border:`2px solid ${o==="assistance"?"#3B82F6":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:o==="assistance"?"#3B82F6":e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Assistance (",r.filter(M=>M.submissionType==="assistance"||!M.submissionType).length,")"]}),t.jsxs("button",{onClick:()=>i("feedback"),style:{padding:"10px 20px",background:o==="feedback"?"rgba(34,197,94,0.2)":"transparent",border:`2px solid ${o==="feedback"?"#22C55E":"rgba(34,197,94,0.3)"}`,borderRadius:"8px",color:o==="feedback"?"#22C55E":e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Feedback (",r.filter(M=>M.submissionType==="feedback").length,")"]})]}),t.jsxs("div",{className:"flex gap-3 items-end flex-wrap",children:[t.jsx(Ht,{value:d,onChange:u,placeholder:"Search by ID, user, subject..."}),o!=="feedback"&&t.jsx(aa,{value:c,onChange:x,label:"Status",options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"}]}),t.jsx(yr,{startDate:m,endDate:v,onStartChange:h,onEndChange:S}),t.jsx(qt,{onClick:H,disabled:J.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:J.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{children:"No concerns found"})]}):t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"ID"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"User"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Subject"}),o==="all"&&t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Type"}),o==="feedback"?t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Rating"}):t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Date"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-right p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:X.map(M=>{var se,oe,xe,ie;const G=ce(M);return t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`,background:G?G.backgroundColor:"transparent"},className:"hover:bg-white/5 transition",children:[t.jsxs("td",{style:{color:e.text.primary},className:"p-4 font-mono text-xs",children:[(se=M._id)==null?void 0:se.slice(-8),G&&G.badgeText&&t.jsx("span",{style:{background:G.badgeColor,color:"#FFFFFF",fontSize:"9px",fontWeight:700,padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase",whiteSpace:"nowrap",marginLeft:"8px"},children:G.badgeText})]}),t.jsxs("td",{style:{color:e.text.primary},className:"p-4",children:[(oe=M.user)==null?void 0:oe.firstName," ",(xe=M.user)==null?void 0:xe.lastName]}),t.jsx("td",{style:{color:e.text.primary},className:"p-4 max-w-[200px] truncate",children:M.subject||"No subject"}),o==="all"&&t.jsx("td",{className:"p-4",children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:M.submissionType==="feedback"?"rgba(34,197,94,0.2)":"rgba(59,130,246,0.2)",color:M.submissionType==="feedback"?"#22C55E":"#3B82F6",border:`1px solid ${M.submissionType==="feedback"?"rgba(34,197,94,0.3)":"rgba(59,130,246,0.3)"}`},children:M.submissionType==="feedback"?" Feedback":" Assistance"})}),o==="feedback"?t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((nt,We)=>t.jsx("span",{style:{fontSize:"14px",color:We<(M.rating||0)?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},We)),t.jsxs("span",{style:{color:e.text.muted,marginLeft:"8px",fontSize:"11px"},children:["(",M.rating||0,"/5)"]})]})}):t.jsx("td",{className:"p-4",children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:`${te(M.status)}20`,color:te(M.status)},children:((ie=M.status)==null?void 0:ie.replace("_"," "))||"Pending"})}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4 text-sm",children:M.createdAt?new Date(M.createdAt).toLocaleDateString():""}),t.jsx("td",{className:"p-4 text-right",children:t.jsx("button",{onClick:()=>A(M),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"})})]},M._id)})})]}),ee>1&&t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-4 border-t flex items-center justify-center gap-3",children:[t.jsx("button",{onClick:()=>Y(M=>Math.max(1,M-1)),disabled:z===1,style:{padding:"8px 16px",background:z===1?"rgba(100,100,100,0.2)":e.bg.tertiary,color:z===1?e.text.muted:e.accent.primary,border:`2px solid ${z===1?"transparent":e.accent.primary}`,borderRadius:"8px",fontSize:"13px",fontWeight:600,cursor:z===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:e.text.secondary,fontSize:"13px",fontWeight:600},children:["Page ",z," of ",ee]}),t.jsx("button",{onClick:()=>Y(M=>Math.min(ee,M+1)),disabled:z===ee,style:{padding:"8px 16px",background:z===ee?"rgba(100,100,100,0.2)":e.bg.tertiary,color:z===ee?e.text.muted:e.accent.primary,border:`2px solid ${z===ee?"transparent":e.accent.primary}`,borderRadius:"8px",fontSize:"13px",fontWeight:600,cursor:z===ee?"not-allowed":"pointer"},children:"Next "})]})]})}),b&&f&&t.jsx("div",{onClick:()=>g(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:M=>M.stopPropagation(),style:{background:a?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",maxWidth:"700px",width:"90%",maxHeight:"90vh",display:"flex",flexDirection:"column",border:`2px solid ${e.border.primary}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${e.border.primary}`,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t.jsxs("div",{children:[t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:`${te(f.status)}20`,color:te(f.status),marginBottom:"8px"},children:((de=f.status)==null?void 0:de.replace("_"," "))||"Pending"}),t.jsx("h2",{style:{fontSize:"20px",fontWeight:700,color:e.text.primary,margin:0},children:f.subject||"No Subject"})]}),t.jsx("button",{onClick:()=>g(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px"},children:""})]}),t.jsxs("div",{style:{padding:"0 24px",borderBottom:`2px solid ${e.border.primary}`,display:"flex",gap:"8px"},children:[t.jsx("button",{onClick:()=>V("details"),style:{padding:"12px 20px",background:"transparent",border:"none",borderBottom:`3px solid ${_==="details"?e.accent.primary:"transparent"}`,color:_==="details"?e.accent.primary:e.text.secondary,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:" Details"}),t.jsxs("button",{onClick:()=>V("notes"),style:{padding:"12px 20px",background:"transparent",border:"none",borderBottom:`3px solid ${_==="notes"?e.accent.primary:"transparent"}`,color:_==="notes"?e.accent.primary:e.text.secondary,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Notes History ",((we=f.notes)==null?void 0:we.length)>0&&`(${f.notes.length})`]})]}),t.jsx("div",{style:{flex:1,overflow:"auto",padding:"24px"},children:_==="details"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[t.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:e.accent.primary,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"18px",color:e.accent.secondary},children:((ue=(ae=f.user)==null?void 0:ae.firstName)==null?void 0:ue[0])||"?"}),t.jsxs("div",{children:[t.jsxs("p",{style:{color:e.text.primary,fontWeight:600,margin:0},children:[(Ce=f.user)==null?void 0:Ce.firstName," ",(re=f.user)==null?void 0:re.lastName]}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",margin:0},children:(Ne=f.user)==null?void 0:Ne.email})]}),t.jsx("div",{style:{marginLeft:"auto",textAlign:"right"},children:t.jsx("p",{style:{color:e.text.muted,fontSize:"12px",margin:0},children:f.createdAt?new Date(f.createdAt).toLocaleString():""})})]}),t.jsx("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",marginBottom:"20px",border:`1px solid ${e.border.primary}`},children:t.jsx("p",{style:{color:e.text.primary,whiteSpace:"pre-wrap",margin:0,lineHeight:"1.6"},children:f.message||f.description||"No message provided"})}),f.submissionType==="feedback"&&f.rating&&t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("p",{style:{color:e.text.secondary,fontSize:"12px",marginBottom:"8px",fontWeight:600},children:"Rating"}),t.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((M,G)=>t.jsx("span",{style:{fontSize:"24px",color:G<f.rating?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},G)),t.jsxs("span",{style:{color:e.text.secondary,marginLeft:"8px"},children:["(",f.rating,"/5)"]})]})]}),f.status==="resolved"&&f.adminResponse&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(16,185,129,0.3)"},children:[t.jsx("p",{style:{color:"#10B981",fontSize:"12px",marginBottom:"8px",fontWeight:700},children:" Resolution"}),t.jsx("p",{style:{color:e.text.primary,margin:0},children:f.adminResponse})]})]}):t.jsx("div",{children:(!f.notes||f.notes.length===0)&&f.status!=="resolved"?t.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:e.text.tertiary},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("p",{style:{fontSize:"14px",margin:0},children:"No notes sent yet"}),t.jsx("p",{style:{fontSize:"12px",color:e.text.muted,marginTop:"8px"},children:"Use the note field below to send updates to the user"})]}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(Ue=f.notes)==null?void 0:Ue.slice().reverse().map((M,G)=>t.jsxs("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsxs("span",{style:{color:e.accent.primary,fontSize:"12px",fontWeight:700},children:[" ",M.adminName||"Treasury Admin"]}),t.jsx("span",{style:{color:e.text.muted,fontSize:"11px"},children:M.timestamp?new Date(M.timestamp).toLocaleString():""})]}),t.jsx("p",{style:{color:e.text.primary,margin:0,lineHeight:"1.5"},children:M.message})]},G)),f.status==="resolved"&&f.adminResponse&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderRadius:"12px",padding:"16px",border:"2px solid rgba(16,185,129,0.3)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsxs("span",{style:{color:"#10B981",fontSize:"12px",fontWeight:700},children:[" RESOLVED by ",f.resolvedBy||"Treasury Admin"]}),t.jsx("span",{style:{color:"#10B981",fontSize:"11px",fontWeight:600},children:f.resolvedAt?new Date(f.resolvedAt).toLocaleString():""})]}),t.jsx("p",{style:{color:e.text.primary,margin:0,lineHeight:"1.5",fontWeight:500},children:f.adminResponse})]})]})})}),f.status==="in_progress"&&f.submissionType!=="feedback"&&t.jsxs("div",{style:{borderTop:`2px solid ${e.border.primary}`,padding:"20px 24px"},children:[t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("label",{style:{color:e.text.primary,fontWeight:600,fontSize:"13px",display:"block",marginBottom:"8px"},children:" Send Note to User"}),t.jsx("textarea",{value:R,onChange:M=>B(M.target.value),placeholder:"Type your message here... The user will receive this via email.",rows:3,style:{width:"100%",padding:"12px",borderRadius:"8px",border:`2px solid ${e.border.primary}`,background:e.bg.tertiary,color:e.text.primary,fontSize:"14px",resize:"vertical",outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:q,disabled:F||!R.trim(),style:{flex:1,padding:"12px 24px",background:F||!R.trim()?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)",color:F||!R.trim()?"rgba(59,130,246,0.5)":"#3B82F6",border:`2px solid ${F||!R.trim()?"rgba(59,130,246,0.3)":"#3B82F6"}`,borderRadius:"8px",cursor:F||!R.trim()?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:F||!R.trim()?.6:1},children:F?" Sending...":" Send Note"}),t.jsx("button",{onClick:()=>O(),style:{flex:1,padding:"12px 24px",background:"#10B981",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:700,boxShadow:"0 4px 12px rgba(16,185,129,0.4)"},children:" Resolve Concern"})]})]}),f.status==="pending"&&f.submissionType!=="feedback"&&t.jsx("div",{style:{borderTop:`2px solid ${e.border.primary}`,padding:"20px 24px",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{onClick:()=>O(),style:{padding:"12px 24px",background:"#10B981",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:700,boxShadow:"0 4px 12px rgba(16,185,129,0.4)"},children:" Resolve Concern"})})]})}),j&&f&&t.jsx("div",{onClick:()=>C(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:M=>M.stopPropagation(),style:{background:a?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",maxWidth:"500px",width:"90%",border:`2px solid ${e.border.primary}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("div",{style:{padding:"24px",borderBottom:"2px solid rgba(16,185,129,0.3)",background:"rgba(16,185,129,0.1)",borderRadius:"16px 16px 0 0"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#10B981",margin:0,marginBottom:"8px"},children:"Resolve Concern"}),t.jsx("p",{style:{fontSize:"13px",color:e.text.secondary,margin:0},children:"Mark this concern as resolved and notify the user"})]}),t.jsx("button",{onClick:()=>C(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px"},children:""})]})}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",marginBottom:"20px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:e.text.secondary,fontSize:"12px"},children:"From"}),t.jsxs("span",{style:{color:e.text.primary,fontSize:"14px",fontWeight:600},children:[(Se=f.user)==null?void 0:Se.firstName," ",(P=f.user)==null?void 0:P.lastName]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:e.text.secondary,fontSize:"12px"},children:"Subject"}),t.jsx("span",{style:{color:e.text.primary,fontSize:"14px",fontWeight:600,maxWidth:"60%",textAlign:"right"},children:f.subject})]})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:e.text.primary,fontWeight:600,display:"block",marginBottom:"8px"},children:["Resolution Message ",t.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",marginBottom:"12px"},children:"This final message will be sent to the user via email and mark the concern as resolved."}),t.jsx("textarea",{value:T,onChange:M=>E(M.target.value),placeholder:"Enter your resolution response...",rows:5,style:{width:"100%",padding:"12px",borderRadius:"8px",border:`2px solid ${e.border.primary}`,background:e.bg.tertiary,color:e.text.primary,fontSize:"14px",resize:"vertical",outline:"none",boxSizing:"border-box"},autoFocus:!0})]})]}),t.jsxs("div",{style:{padding:"20px 24px",borderTop:`2px solid ${e.border.primary}`,display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:()=>C(!1),disabled:D,style:{flex:1,padding:"14px",background:e.bg.tertiary,color:e.text.primary,border:`1px solid ${e.border.primary}`,borderRadius:"8px",cursor:D?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:D?.5:1},children:"Cancel"}),t.jsx("button",{onClick:U,disabled:D||!T.trim(),style:{flex:1,padding:"14px",background:D||!T.trim()?"rgba(16,185,129,0.3)":"#10B981",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:D||!T.trim()?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:D||!T.trim()?.6:1,boxShadow:D||!T.trim()?"none":"0 4px 12px rgba(16,185,129,0.4)"},children:D?" Resolving...":" Resolve & Notify User"})]})]})})]})}function c4(){var B,F,$;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState({autoExport:{frequency:"daily",exportTypes:[],time:"00:00",emailRecipients:[]}}),[n,l]=p.useState(!1),[o,i]=p.useState(!1),[d,u]=p.useState(!1),[c,x]=p.useState([]),[m,h]=p.useState("all"),[v,S]=p.useState(""),[f,y]=p.useState({start:"",end:""}),[b,g]=p.useState("all"),[j,C]=p.useState(""),[T,E]=p.useState(""),D=[{value:"Transactions",icon:"",label:"Transactions"},{value:"Cash-Ins",icon:"",label:"Cash-Ins"},{value:"Users",icon:"",label:"Users"},{value:"Balances",icon:"",label:"Balance Summary"},{value:"Logs",icon:"",label:"Treasury Logs"},{value:"Concerns",icon:"",label:"Treasury Concerns"}];p.useEffect(()=>{I(),z()},[]);const I=async()=>{try{const N=await Z.get("/admin/configurations?adminRole=treasury");N&&s(N)}catch(N){console.error("Error loading configurations:",N)}},z=async()=>{try{const[N,w]=await Promise.all([Z.get("/admin/configurations/scheduled-exports?adminRole=treasury").catch(()=>[]),Z.get("/admin/configurations/export-history?adminRole=treasury").catch(()=>[])]),k=(Array.isArray(N)?N:[]).map(q=>({...q,exportSource:"auto"})),A=(Array.isArray(w)?w:[]).map(q=>({...q,exportSource:"manual"})),O=[...k,...A].sort((q,U)=>{const H=new Date(q.exportedAt||q.timestamp||q.createdAt);return new Date(U.exportedAt||U.timestamp||U.createdAt)-H});x(O)}catch(N){console.error("Error loading export archive:",N)}},Y=async()=>{var N,w;l(!0);try{await Z.put("/admin/configurations/auto-export",{...r.autoExport,adminRole:"treasury"}),W.success("Auto-export settings saved successfully!"),i(!1),I()}catch(k){W.error(((w=(N=k.response)==null?void 0:N.data)==null?void 0:w.error)||"Failed to save settings")}finally{l(!1)}},_=async()=>{var N,w;l(!0);try{if(!r.autoExport.exportTypes||r.autoExport.exportTypes.length===0){W.error("Please select at least one export type in the configuration settings"),l(!1);return}const k=await Z.post("/admin/configurations/manual-export-treasury",{exportTypes:r.autoExport.exportTypes,dateRange:b,customStartDate:j,customEndDate:T});if(W.success(`Treasury data exported successfully! (${k.totalRecords||0} total records)`),k.downloadUrl){const A=document.createElement("a");A.href=k.downloadUrl,A.download=k.fileName||`treasury_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(A),A.click(),document.body.removeChild(A)}u(!1),g("all"),C(""),E(""),z()}catch(k){W.error(((w=(N=k.response)==null?void 0:N.data)==null?void 0:w.error)||"Export failed")}finally{l(!1)}},V=async N=>{try{const w=await Z.get(`/admin/configurations/download-export/${N}`);if(w.downloadUrl){const k=document.createElement("a");k.href=w.downloadUrl,k.download=w.fileName,document.body.appendChild(k),k.click(),document.body.removeChild(k)}}catch{W.error("Failed to download export")}},R=c.filter(N=>{var w,k;if(m!=="all"&&N.exportSource!==m)return!1;if(v){const A=v.toLowerCase();if(!(((w=N.exportType)==null?void 0:w.toLowerCase().includes(A))||((k=N.fileName)==null?void 0:k.toLowerCase().includes(A))))return!1}if(f.start||f.end){const A=new Date(N.exportedAt||N.timestamp||N.createdAt);if(f.start&&A<new Date(f.start)||f.end&&A>new Date(f.end+"T23:59:59"))return!1}return!0});return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{marginBottom:"24px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,paddingBottom:"16px"},children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Treasury Settings"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Configure automated treasury data exports and system settings"})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[t.jsxs("div",{style:{background:e.bg.card,borderRadius:"16px",border:`1px solid ${e.border.primary}`,padding:"28px",marginBottom:"24px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{color:e.accent.primary,fontSize:"20px",fontWeight:700,margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," Automated Treasury Export"]}),t.jsxs("p",{style:{color:e.text.secondary,fontSize:"14px",margin:0,lineHeight:"1.5"},children:["System automatically exports treasury data as ZIP files for backup and compliance.",t.jsx("br",{}),"Configure the schedule and download reports manually anytime."]})]}),t.jsxs("button",{onClick:()=>i(!0),style:{padding:"12px 20px",background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"10px",color:e.accent.primary,fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Configure Schedule"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[t.jsx(ac,{icon:"",label:"Frequency",value:((B=r.autoExport.frequency)==null?void 0:B.charAt(0).toUpperCase())+((F=r.autoExport.frequency)==null?void 0:F.slice(1))||"Not set",theme:e}),t.jsx(ac,{icon:"",label:"Export Time",value:r.autoExport.time||"Not set",theme:e}),t.jsx(ac,{icon:"",label:"Data Types",value:`${(($=r.autoExport.exportTypes)==null?void 0:$.length)||0} selected`,theme:e})]}),t.jsxs("div",{style:{padding:"24px",background:"rgba(34,197,94,0.1)",border:"2px dashed rgba(34,197,94,0.3)",borderRadius:"12px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),t.jsx("h4",{style:{color:e.text.primary,fontSize:"16px",fontWeight:700,marginBottom:"8px"},children:"Export Treasury Data Now"}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",marginBottom:"16px"},children:"Download a complete ZIP file with all treasury data: transactions, cash-ins, users, balances, logs, and concerns."}),t.jsx("button",{onClick:()=>u(!0),disabled:n,style:{padding:"14px 32px",background:n?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:n?"not-allowed":"pointer",boxShadow:n?"none":"0 4px 12px rgba(34,197,94,0.4)",transition:"all 0.2s ease",opacity:n?.6:1},children:n?" Exporting...":" Download Treasury Data (ZIP)"})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderRadius:"16px",border:`1px solid ${e.border.primary}`,padding:"28px",marginBottom:"24px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{color:e.accent.primary,fontSize:"18px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," Export Archive"]}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"12px",margin:0},children:"All exports - auto-scheduled and manual"})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("div",{style:{display:"flex",borderRadius:"8px",overflow:"hidden",border:`1px solid ${e.border.primary}`},children:[{key:"all",label:"All"},{key:"auto",label:" Auto"},{key:"manual",label:" Manual"}].map(N=>t.jsx("button",{onClick:()=>h(N.key),style:{padding:"8px 16px",background:m===N.key?e.accent.primary:"transparent",color:m===N.key?a?"#181D40":"#FFFFFF":e.text.secondary,border:"none",fontSize:"12px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:N.label},N.key))}),t.jsx("input",{type:"text",placeholder:"Search exports...",value:v,onChange:N=>S(N.target.value),style:{padding:"8px 16px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"13px",outline:"none",width:"180px"}}),t.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t.jsx("input",{type:"date",value:f.start,onChange:N=>y({...f,start:N.target.value}),style:{padding:"8px 12px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"12px",outline:"none"}}),t.jsx("span",{style:{color:e.text.tertiary},children:""}),t.jsx("input",{type:"date",value:f.end,onChange:N=>y({...f,end:N.target.value}),style:{padding:"8px 12px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"12px",outline:"none"}}),(f.start||f.end||v)&&t.jsx("button",{onClick:()=>{S(""),y({start:"",end:""})},style:{padding:"8px 12px",background:"rgba(239,68,68,0.2)",border:"2px solid rgba(239,68,68,0.3)",borderRadius:"8px",color:"#EF4444",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Clear"})]})]})]}),R.length===0?t.jsxs("div",{style:{padding:"40px",textAlign:"center",color:e.text.tertiary,fontSize:"14px"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",opacity:.3},children:""}),t.jsx("p",{style:{margin:0},children:"No exports found"}),t.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"12px"},children:[m!=="all"?"Try changing the filter or ":"","Configure auto-export or run a manual export to start"]})]}):t.jsx("div",{style:{maxHeight:"500px",overflowY:"auto",paddingRight:"8px"},children:t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:R.map((N,w)=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 18px",background:e.bg.tertiary,borderRadius:"10px",border:`1px solid ${e.border.primary}`,fontSize:"14px",transition:"all 0.2s ease"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},children:[t.jsx("span",{style:{fontSize:"20px"},children:N.exportSource==="auto"?"":""}),t.jsx("span",{style:{color:e.accent.primary,fontWeight:700,fontSize:"15px"},children:N.exportType||"Treasury Export"}),t.jsx("span",{style:{padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:700,background:N.exportSource==="auto"?"rgba(59,130,246,0.2)":"rgba(34,197,94,0.2)",color:N.exportSource==="auto"?"#3B82F6":"#22C55E",border:`1px solid ${N.exportSource==="auto"?"rgba(59,130,246,0.3)":"rgba(34,197,94,0.3)"}`},children:N.exportSource==="auto"?"AUTO":"MANUAL"})]}),t.jsxs("div",{style:{display:"flex",gap:"20px",fontSize:"13px",color:e.text.secondary},children:[t.jsxs("span",{children:[" ",new Date(N.exportedAt||N.timestamp||N.createdAt).toLocaleDateString()]}),t.jsxs("span",{children:[" ",new Date(N.exportedAt||N.timestamp||N.createdAt).toLocaleTimeString()]}),N.fileName&&t.jsxs("span",{children:[" ",N.fileName]}),N.recordCount&&t.jsxs("span",{children:[" ",N.recordCount," records"]})]})]}),N.status==="success"||!N.status?t.jsx("button",{onClick:()=>V(N._id),style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(34,197,94,0.2)",color:"#22C55E",border:"2px solid rgba(34,197,94,0.3)",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},children:" Download"}):t.jsx("span",{style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"2px solid rgba(239,68,68,0.3)"},children:" Failed"})]},N._id||w))})})]})]}),d&&t.jsx(d4,{dateRange:b,setDateRange:g,customStartDate:j,setCustomStartDate:C,customEndDate:T,setCustomEndDate:E,loading:n,onExport:_,onCancel:()=>{u(!1),g("all"),C(""),E("")},theme:e,isDarkMode:a}),o&&t.jsx(u4,{configurations:r,setConfigurations:s,exportTypes:D,loading:n,onSave:Y,onCancel:()=>i(!1),theme:e,isDarkMode:a})]})}function ac({icon:e,label:a,value:r,theme:s}){return t.jsxs("div",{style:{padding:"20px",background:s.bg.tertiary,borderRadius:"12px",border:`1px solid ${s.border.primary}`},children:[t.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:e}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary,marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:700},children:a}),t.jsx("div",{style:{fontSize:"16px",color:s.text.primary,fontWeight:700},children:r})]})}function d4({dateRange:e,setDateRange:a,customStartDate:r,setCustomStartDate:s,customEndDate:n,setCustomEndDate:l,loading:o,onExport:i,onCancel:d,theme:u,isDarkMode:c}){return t.jsx("div",{onClick:d,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:x=>x.stopPropagation(),style:{background:c?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",border:`1px solid ${u.border.primary}`,padding:"32px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("h3",{style:{color:u.accent.primary,fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Select Date Range"}),t.jsx("p",{style:{color:u.text.secondary,fontSize:"13px",margin:"0 0 24px 0"},children:"Choose which records to include in the export"}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:[{value:"all",label:" All Time",desc:"Export all records"},{value:"24hr",label:" Last 24 Hours",desc:"Records from the past day"},{value:"week",label:" This Week",desc:"Records from the past 7 days"},{value:"month",label:" This Month",desc:"Records from current month"},{value:"custom",label:" Custom Range",desc:"Choose specific dates"}].map(x=>t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px",background:e===x.value?`${u.accent.primary}20`:u.bg.tertiary,border:`2px solid ${e===x.value?u.accent.primary:u.border.primary}`,borderRadius:"10px",cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsx("input",{type:"radio",name:"dateRange",value:x.value,checked:e===x.value,onChange:m=>a(m.target.value),style:{cursor:"pointer",width:"18px",height:"18px"}}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{color:u.text.primary,fontSize:"14px",fontWeight:700,marginBottom:"4px"},children:x.label}),t.jsx("div",{style:{color:u.text.secondary,fontSize:"12px"},children:x.desc})]})]},x.value))}),e==="custom"&&t.jsx("div",{style:{marginBottom:"24px",padding:"16px",background:u.bg.tertiary,borderRadius:"10px"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:u.accent.primary},children:"Start Date"}),t.jsx("input",{type:"date",value:r,onChange:x=>s(x.target.value),style:{width:"100%",padding:"10px",background:u.bg.secondary,border:`2px solid ${u.border.primary}`,borderRadius:"8px",color:u.text.primary,fontSize:"13px",outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:u.accent.primary},children:"End Date"}),t.jsx("input",{type:"date",value:n,onChange:x=>l(x.target.value),style:{width:"100%",padding:"10px",background:u.bg.secondary,border:`2px solid ${u.border.primary}`,borderRadius:"8px",color:u.text.primary,fontSize:"13px",outline:"none",boxSizing:"border-box"}})]})]})}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:i,disabled:o,style:{flex:1,padding:"14px 24px",background:o?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:o?"not-allowed":"pointer",boxShadow:o?"none":"0 4px 12px rgba(34,197,94,0.4)",opacity:o?.6:1},children:o?" Exporting...":" Export Now"}),t.jsx("button",{onClick:d,disabled:o,style:{flex:1,padding:"14px 24px",background:u.bg.tertiary,color:u.text.primary,border:`2px solid ${u.border.primary}`,borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:o?"not-allowed":"pointer"},children:"Cancel"})]})]})})}function u4({configurations:e,setConfigurations:a,exportTypes:r,loading:s,onSave:n,onCancel:l,theme:o,isDarkMode:i}){var d,u,c,x,m;return t.jsx("div",{onClick:l,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:h=>h.stopPropagation(),style:{background:i?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",border:`1px solid ${o.border.primary}`,padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("h3",{style:{color:o.accent.primary,fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Configure Export Schedule"}),t.jsx("p",{style:{color:o.text.secondary,fontSize:"13px",margin:"0 0 24px 0"},children:"Set up when and how often the system should automatically export data."}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",borderRadius:"12px",background:(d=e.autoExport)!=null&&d.enabled?"rgba(16,185,129,0.1)":"rgba(239,68,68,0.1)",border:`2px solid ${(u=e.autoExport)!=null&&u.enabled?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"}`},children:[t.jsxs("div",{children:[t.jsx("div",{style:{color:o.text.primary,fontWeight:700,fontSize:"14px"},children:"Enable Automatic Export"}),t.jsx("div",{style:{color:o.text.secondary,fontSize:"12px",marginTop:"4px"},children:(c=e.autoExport)!=null&&c.enabled?" Auto-export is active":" Auto-export is disabled"})]}),t.jsx("button",{onClick:()=>{var h;return a({...e,autoExport:{...e.autoExport,enabled:!((h=e.autoExport)!=null&&h.enabled)}})},style:{background:(x=e.autoExport)!=null&&x.enabled?"#10B981":"#6B7280",width:"52px",height:"28px",borderRadius:"14px",position:"relative",border:"none",cursor:"pointer",transition:"all 0.2s ease"},children:t.jsx("div",{style:{position:"absolute",top:"2px",left:(m=e.autoExport)!=null&&m.enabled?"26px":"2px",width:"24px",height:"24px",borderRadius:"12px",background:"#FFFFFF",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Frequency"}),t.jsxs("select",{value:e.autoExport.frequency,onChange:h=>a({...e,autoExport:{...e.autoExport,frequency:h.target.value}}),style:{width:"100%",padding:"12px 16px",background:o.bg.tertiary,border:`2px solid ${o.border.primary}`,borderRadius:"8px",color:o.text.primary,fontSize:"14px",fontWeight:600,cursor:"pointer",outline:"none"},children:[t.jsx("option",{value:"daily",style:{background:i?"#1E2347":"#FFFFFF"},children:" Daily"}),t.jsx("option",{value:"weekly",style:{background:i?"#1E2347":"#FFFFFF"},children:" Weekly"}),t.jsx("option",{value:"monthly",style:{background:i?"#1E2347":"#FFFFFF"},children:" Monthly"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Export Time (24-hour)"}),t.jsx("input",{type:"time",value:e.autoExport.time,onChange:h=>a({...e,autoExport:{...e.autoExport,time:h.target.value}}),style:{width:"100%",padding:"12px 16px",background:o.bg.tertiary,border:`2px solid ${o.border.primary}`,borderRadius:"8px",color:o.text.primary,fontSize:"14px",fontWeight:600,outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"12px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Data Types to Export"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:r.map(h=>{var v,S,f;return t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px",background:(v=e.autoExport.exportTypes)!=null&&v.includes(h.value)?`${o.accent.primary}20`:o.bg.tertiary,border:`2px solid ${(S=e.autoExport.exportTypes)!=null&&S.includes(h.value)?o.accent.primary:o.border.primary}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsx("input",{type:"checkbox",checked:((f=e.autoExport.exportTypes)==null?void 0:f.includes(h.value))||!1,onChange:y=>{const b=e.autoExport.exportTypes||[],g=y.target.checked?[...b,h.value]:b.filter(j=>j!==h.value);a({...e,autoExport:{...e.autoExport,exportTypes:g}})},style:{cursor:"pointer",width:"16px",height:"16px"}}),t.jsx("span",{style:{fontSize:"16px"},children:h.icon}),t.jsx("span",{style:{color:o.text.primary,fontSize:"14px",fontWeight:600},children:h.label})]},h.value)})})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[t.jsx("button",{onClick:n,disabled:s,style:{flex:1,padding:"14px 24px",background:s?"#9CA3AF":o.accent.primary,color:i?"#181D40":"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:s?"not-allowed":"pointer",boxShadow:s?"none":"0 4px 12px rgba(255,212,28,0.4)",opacity:s?.6:1},children:s?" Saving...":" Save Settings"}),t.jsx("button",{onClick:l,disabled:s,style:{flex:1,padding:"14px 24px",background:o.bg.tertiary,color:o.text.primary,border:`2px solid ${o.border.primary}`,borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:s?"not-allowed":"pointer"},children:"Cancel"})]})]})]})})}function p4(){const{theme:e,isDarkMode:a}=ne();st();const[r,s]=p.useState({todayCashIn:0,todayCashOut:0,todayTransactions:0,totalUsers:0,totalMerchants:0,totalBalance:0}),[n,l]=p.useState(!0),[o,i]=p.useState("today"),d=p.useRef(null),u=async(x=!1)=>{try{x||l(!0);const m=await Z.get(`/admin/accounting/analytics?range=${o}`);m&&s({todayCashIn:m.todayCashIn||0,todayCashOut:m.todayCashOut||0,todayTransactions:m.todayTransactions||0,totalUsers:m.totalUsers||0,totalMerchants:m.totalMerchants||0,totalBalance:m.totalBalance||0})}catch{x||console.error("Failed to load analytics")}finally{x||l(!1)}};p.useEffect(()=>(u(),d.current=setInterval(()=>u(!0),6e4),()=>{d.current&&clearInterval(d.current)}),[o]);const c=r.todayCashIn-r.todayCashOut;return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading analytics..."]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-[30px] border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Accounting Dashboard"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Financial reports and transaction analytics  Auto-updates every minute"})]}),t.jsx("div",{className:"flex gap-2 mb-5",children:[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"}].map(({value:x,label:m})=>t.jsx("button",{onClick:()=>i(x),style:{background:o===x?e.accent.primary:e.bg.card,color:o===x?e.accent.secondary:e.text.primary,borderColor:e.border.primary},className:"px-4 py-2 rounded-xl font-bold text-sm border hover:opacity-80 transition",children:m},x))}),t.jsxs("div",{className:"grid grid-cols-4 gap-5 mb-5",children:[t.jsx(Sr,{icon:"",label:"CASH-IN",value:`${r.todayCashIn.toLocaleString()}`,subtitle:"loaded",color:"#10B981",theme:e}),t.jsx(Sr,{icon:"",label:"CASH-OUT",value:`${r.todayCashOut.toLocaleString()}`,subtitle:"withdrawn",color:"#EF4444",theme:e}),t.jsx(Sr,{icon:"",label:"NET FLOW",value:`${c.toLocaleString()}`,subtitle:c>=0?"positive":"negative",color:c>=0?"#10B981":"#EF4444",theme:e}),t.jsx(Sr,{icon:"",label:"TRANSACTIONS",value:r.todayTransactions,subtitle:"total",color:"#3B82F6",theme:e})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-5 mb-5",children:[t.jsx(Sr,{icon:"",label:"TOTAL USERS",value:r.totalUsers.toLocaleString(),subtitle:"registered",color:"#A855F7",theme:e}),t.jsx(Sr,{icon:"",label:"MERCHANTS",value:r.totalMerchants.toLocaleString(),subtitle:"active",color:"#F59E0B",theme:e}),t.jsx(Sr,{icon:"",label:"SYSTEM BALANCE",value:`${r.totalBalance.toLocaleString()}`,subtitle:"in circulation",color:"#06B6D4",theme:e})]})]})}function Sr({icon:e,label:a,value:r,subtitle:s,color:n,theme:l}){return t.jsxs("div",{style:{background:l.bg.card,borderColor:l.border.primary},className:"p-6 rounded-2xl border relative overflow-hidden",children:[t.jsx("div",{className:"absolute right-4 top-4 text-[40px] opacity-15",children:e}),t.jsx("div",{style:{color:l.text.secondary},className:"text-[11px] font-bold uppercase tracking-wide mb-3",children:a}),t.jsx("div",{style:{color:l.text.primary},className:"text-[28px] font-extrabold mb-2",children:r}),t.jsx("div",{className:"text-xs font-semibold inline-block py-[3px] px-[10px] rounded-xl",style:{color:n,background:`${n}20`},children:s})]})}function x4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(""),[d,u]=p.useState("all"),[c,x]=p.useState(null),m=p.useRef(null),h=async(g=!1)=>{try{g||l(!0);const j=new URLSearchParams;d!=="all"&&j.append("isActive",d==="active"),o&&j.append("search",o);const C=await Z.get(`/admin/accounting/merchants?${j}`);C!=null&&C.merchants&&s(C.merchants)}catch{g||W.error("Failed to load merchants")}finally{g||l(!1)}};p.useEffect(()=>(h(),m.current=setInterval(()=>h(!0),3e4),()=>{m.current&&clearInterval(m.current)}),[d,o]);const v=r.filter(g=>{var T,E,D;const j=!o||((T=g.businessName)==null?void 0:T.toLowerCase().includes(o.toLowerCase()))||((E=g.merchantId)==null?void 0:E.toLowerCase().includes(o.toLowerCase()))||((D=g.email)==null?void 0:D.toLowerCase().includes(o.toLowerCase())),C=d==="all"||d==="active"&&g.isActive!==!1||d==="inactive"&&g.isActive===!1;return j&&C}),S=r.length,f=r.filter(g=>g.isActive!==!1).length,y=r.reduce((g,j)=>g+(j.totalCollections||0),0),b=r.reduce((g,j)=>g+(j.todayCollections||0),0);return t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Merchants"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"View merchant accounts and transaction metrics"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-5",children:[t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(59, 130, 246, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(59, 130, 246, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(Zs,{className:"w-6 h-6 text-blue-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Total Merchants"}),t.jsx("p",{className:"text-2xl font-bold text-blue-500",children:S})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(16, 185, 129, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(16, 185, 129, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(ci,{className:"w-6 h-6 text-emerald-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Active"}),t.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:f})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(251, 191, 36, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(251, 191, 36, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(oi,{className:"w-6 h-6 text-yellow-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Total Collections"}),t.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:["",y.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(139, 92, 246, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(139, 92, 246, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(li,{className:"w-6 h-6 text-violet-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Today's Collections"}),t.jsxs("p",{className:"text-2xl font-bold text-violet-500",children:["",b.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.8)":e.bg.card,borderColor:e.accent.primary},className:"rounded-xl border-2 p-3 mb-5 flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(vr,{style:{color:e.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search merchants...",value:o,onChange:g=>i(g.target.value),style:{background:"transparent",color:e.text.primary,borderColor:"transparent"},className:"w-full pl-10 pr-4 py-2.5 rounded-lg text-sm focus:outline-none placeholder:text-gray-500"})]}),t.jsx("div",{style:{background:e.border.primary},className:"hidden sm:block w-px h-8"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","active","inactive"].map(g=>t.jsx("button",{onClick:()=>u(g),style:{background:d===g?e.accent.primary:a?"rgba(30,35,71,0.8)":"#F9FAFB",color:d===g?a?"#181D40":"#FFFFFF":e.text.primary,borderColor:e.border.primary},className:"px-3 py-2 rounded-lg font-semibold text-xs border hover:opacity-80 transition capitalize",children:g},g))})]}),t.jsx("div",{className:"mb-4",children:t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:["Showing ",t.jsx("span",{style:{color:e.accent.primary},className:"font-bold",children:v.length})," of ",r.length," merchants"]})}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading merchants..."]}):v.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{className:"font-semibold",children:"No merchants found"}),t.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your search or filters"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:v.map(g=>t.jsx(m4,{merchant:g,theme:e,isDarkMode:a,onView:()=>x(g)},g._id||g.merchantId))})})}),c&&t.jsx(f4,{merchant:c,theme:e,isDarkMode:a,onClose:()=>x(null)})]})}function m4({merchant:e,theme:a,isDarkMode:r,onView:s}){const n=e.isActive!==!1,l=e.type==="motorpool";return t.jsxs("div",{style:{background:r?"rgba(30,35,71,0.6)":a.bg.tertiary,borderColor:l?"rgba(139, 92, 246, 0.4)":a.border.primary},className:"p-5 rounded-xl border cursor-pointer hover:opacity-90 transition relative overflow-hidden",onClick:s,children:[l&&t.jsxs("div",{style:{background:"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)"},className:"absolute top-0 right-0 px-3 py-1 rounded-bl-lg text-white text-xs font-bold flex items-center gap-1",children:[t.jsx(jr,{className:"w-3 h-3"})," Shuttle"]}),t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsx("div",{style:{background:l?"rgba(139,92,246,0.15)":"rgba(255,212,28,0.15)",color:l?"#8B5CF6":"#FFD41C"},className:"px-3 py-1 rounded-lg text-xs font-bold",children:e.merchantId||"N/A"}),t.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:n?"#10B981":"#EF4444"}})]}),t.jsx("h4",{style:{color:a.text.primary},className:"font-bold text-lg mb-2",children:e.businessName||e.name||"Unknown"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-xs",children:"Today's Sales"}),t.jsxs("span",{style:{color:"#10B981"},className:"font-bold text-sm",children:["",(e.todayCollections||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-xs",children:"Total Collections"}),t.jsxs("span",{style:{color:"#3B82F6"},className:"font-bold text-sm",children:["",(e.totalCollections||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-xs",children:"Transactions"}),t.jsx("span",{style:{color:a.text.primary},className:"font-bold text-sm",children:(e.totalTransactions||0).toLocaleString()})]})]}),t.jsx("button",{style:{background:l?"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)":a.accent.primary,color:l?"#FFFFFF":a.accent.secondary},className:"w-full mt-4 py-2 rounded-lg font-bold text-sm hover:opacity-90 transition",children:"View Details"})]})}function f4({merchant:e,theme:a,isDarkMode:r,onClose:s}){const[n,l]=p.useState("metrics"),[o,i]=p.useState(!0),[d,u]=p.useState(null),[c,x]=p.useState([]),[m,h]=p.useState(null),[v,S]=p.useState(1),[f,y]=p.useState(1),b=e.type==="motorpool";p.useEffect(()=>{g()},[e.merchantId,v]);const g=async()=>{var T;try{i(!0);const E=await Z.get(`/admin/accounting/merchants/${e.merchantId}/details?page=${v}&limit=10`);E!=null&&E.success&&(u(E.merchant),h(E.metrics),x(E.transactions||[]),y(((T=E.pagination)==null?void 0:T.pages)||1))}catch{W.error("Failed to load merchant details")}finally{i(!1)}},j=T=>T?new Date(T).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",C=[{id:"metrics",label:"Metrics & Info",icon:ci},{id:"transactions",label:"Recent Transactions",icon:oa}];return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:s,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:r?"#1E2347":"#FFFFFF",borderColor:a.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-3xl max-h-[85vh] overflow-hidden animate-fadeIn",onClick:T=>T.stopPropagation(),children:[t.jsxs("div",{style:{background:b?"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)":`linear-gradient(135deg, ${a.accent.primary} 0%, ${r?"#B8860B":"#2563EB"} 100%)`},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(255,255,255,0.2)"},className:"w-14 h-14 rounded-full flex items-center justify-center",children:b?t.jsx(jr,{className:"w-7 h-7 text-white"}):t.jsx(Zs,{className:"w-7 h-7 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:e.businessName||e.name}),t.jsx("p",{className:"text-white/80 text-sm font-mono",children:e.merchantId})]})]}),t.jsx("button",{onClick:s,className:"text-white/80 hover:text-white transition-colors",children:t.jsx(ft,{className:"w-6 h-6"})})]}),t.jsx("div",{style:{background:r?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:a.border.primary},className:"px-6 py-3 border-b flex gap-2",children:C.map(T=>{const E=T.icon;return t.jsxs("button",{onClick:()=>l(T.id),style:{background:n===T.id?b?"#8B5CF6":a.accent.primary:"transparent",color:n===T.id?b||!r?"#FFFFFF":"#181D40":a.text.secondary,borderColor:n===T.id?"transparent":a.border.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm border flex items-center gap-2 transition-all hover:opacity-80",children:[t.jsx(E,{className:"w-4 h-4"}),T.label]},T.id)})}),t.jsx("div",{className:"p-6 max-h-[55vh] overflow-y-auto",children:o?t.jsxs("div",{style:{color:a.accent.primary},className:"text-center py-10",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${a.accent.primary} transparent transparent transparent`}}),"Loading details..."]}):n==="metrics"?t.jsx(g4,{merchant:d||e,metrics:m,theme:a,isDarkMode:r,isMotorpool:b}):t.jsx(b4,{transactions:c,theme:a,isDarkMode:r,isMotorpool:b,formatDate:j,currentPage:v,totalPages:f,onPageChange:S})}),t.jsx("div",{style:{borderColor:a.border.primary},className:"px-6 py-4 border-t flex justify-end",children:t.jsx("button",{onClick:s,style:{background:r?"rgba(71,85,105,0.5)":"#E5E7EB",color:a.text.primary},className:"px-6 py-2.5 rounded-xl font-semibold transition-all hover:opacity-80",children:"Close"})})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
      `})]})}function g4({merchant:e,metrics:a,theme:r,isDarkMode:s,isMotorpool:n}){const l=n?"#8B5CF6":r.accent.primary;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"Today's Collections"}),t.jsxs("p",{className:"text-2xl font-bold text-emerald-500",children:["",((a==null?void 0:a.todayCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.todayTransactions)||0," transactions"]})]}),t.jsxs("div",{style:{background:"rgba(59,130,246,0.1)",borderColor:"rgba(59,130,246,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"This Week"}),t.jsxs("p",{className:"text-2xl font-bold text-blue-500",children:["",((a==null?void 0:a.weekCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.weekTransactions)||0," transactions"]})]}),t.jsxs("div",{style:{background:"rgba(251,191,36,0.1)",borderColor:"rgba(251,191,36,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"This Month"}),t.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:["",((a==null?void 0:a.monthCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.monthTransactions)||0," transactions"]})]}),t.jsxs("div",{style:{background:n?"rgba(139,92,246,0.1)":s?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",borderColor:n?"rgba(139,92,246,0.3)":s?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"All Time"}),t.jsxs("p",{className:"text-2xl font-bold",style:{color:l},children:["",((a==null?void 0:a.totalCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.totalTransactions)||0," transactions"]})]})]}),t.jsxs("div",{children:[t.jsxs("h4",{style:{color:r.text.primary},className:"font-bold mb-3 flex items-center gap-2",children:[n?t.jsx(jr,{className:"w-4 h-4"}):t.jsx(Zs,{className:"w-4 h-4"}),n?"Motorpool Info":"Merchant Info"]}),t.jsxs("div",{style:{background:s?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:r.border.primary},className:"rounded-xl border p-4 space-y-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Status"}),t.jsx("span",{style:{background:e.isActive!==!1?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:e.isActive!==!1?"#10B981":"#EF4444"},className:"px-2 py-0.5 rounded text-xs font-bold",children:e.isActive!==!1?"Active":"Inactive"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Type"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold capitalize",children:e.type||"Merchant"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Email"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm",children:e.email||"N/A"})]}),!n&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Contact Person"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm",children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:"N/A"})]}),e.licenseNumber&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"License #"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-mono",children:e.licenseNumber})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Registered"}),t.jsx("span",{style:{color:r.text.muted},className:"text-sm",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})]})]})]})]})}function b4({transactions:e,theme:a,isDarkMode:r,isMotorpool:s,formatDate:n,currentPage:l,totalPages:o,onPageChange:i}){return e.length===0?t.jsxs("div",{style:{color:a.text.tertiary},className:"text-center py-10",children:[t.jsx(oa,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{className:"font-semibold",children:"No transactions yet"}),t.jsx("p",{className:"text-sm mt-1",children:"Transactions will appear here once made"})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"space-y-3",children:e.map((d,u)=>t.jsxs("div",{style:{background:r?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:a.border.primary},className:"rounded-xl border p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:s?"rgba(139,92,246,0.2)":"rgba(16,185,129,0.2)"},className:"w-10 h-10 rounded-full flex items-center justify-center",children:s?t.jsx(jr,{className:"w-5 h-5 text-violet-500"}):t.jsx(oi,{className:"w-5 h-5 text-emerald-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.primary},className:"font-semibold text-sm",children:d.userName||"User"}),t.jsx("p",{style:{color:a.text.muted},className:"text-xs",children:d.userEmail||d.cardUid||"N/A"})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"font-bold text-emerald-500",children:["+",(d.amount||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsx("p",{style:{color:a.text.muted},className:"text-xs",children:n(d.timestamp||d.createdAt)})]})]}),d.itemDescription&&t.jsx("div",{style:{background:r?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)"},className:"mt-2 px-3 py-2 rounded-lg",children:t.jsx("p",{style:{color:a.text.secondary},className:"text-xs",children:d.itemDescription})})]},d._id||u))}),o>1&&t.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[t.jsx("button",{onClick:()=>i(Math.max(1,l-1)),disabled:l===1,style:{background:r?"rgba(71,85,105,0.5)":"#E5E7EB",color:a.text.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm disabled:opacity-50 transition hover:opacity-80",children:"Previous"}),t.jsxs("span",{style:{color:a.text.secondary},className:"px-4 py-2 text-sm",children:["Page ",l," of ",o]}),t.jsx("button",{onClick:()=>i(Math.min(o,l+1)),disabled:l===o,style:{background:r?"rgba(71,85,105,0.5)":"#E5E7EB",color:a.text.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm disabled:opacity-50 transition hover:opacity-80",children:"Next"})]})]})}function h4({log:e,onClose:a}){const{theme:r,isDarkMode:s}=ne();if(!e)return null;const n=d=>{switch(d){case"login":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E",border:"rgba(34,197,94,0.3)"};case"logout":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444",border:"rgba(239,68,68,0.3)"};case"cash_in":return{bg:"rgba(16,185,129,0.2)",color:"#10B981",border:"rgba(16,185,129,0.3)"};case"registration":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"rgba(59,130,246,0.3)"};case"admin_action":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"rgba(59,130,246,0.3)"};case"user_action":return{bg:"rgba(168,85,247,0.2)",color:"#A855F7",border:"rgba(168,85,247,0.3)"};default:return{bg:"rgba(255,212,28,0.2)",color:"#FFD41C",border:"rgba(255,212,28,0.3)"}}},l=d=>d==="success"||!d?{bg:"rgba(34,197,94,0.2)",color:"#22C55E",border:"rgba(34,197,94,0.3)"}:d==="failed"||d==="error"?{bg:"rgba(239,68,68,0.2)",color:"#EF4444",border:"rgba(239,68,68,0.3)"}:{bg:"rgba(251,191,36,0.2)",color:"#FBBF24",border:"rgba(251,191,36,0.3)"},o=n(e.eventType||e.type),i=l(e.status);return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:a,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:s?"#1E2347":"#FFFFFF",borderColor:r.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-2xl max-h-[85vh] overflow-hidden animate-fadeIn",onClick:d=>d.stopPropagation(),children:[t.jsxs("div",{style:{background:`linear-gradient(135deg, ${r.accent.primary} 0%, ${s?"#B8860B":"#2563EB"} 100%)`},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:" Log Details"}),t.jsx("p",{className:"text-white/70 text-sm mt-1 font-mono",children:e.eventId||e._id})]}),t.jsx("button",{onClick:a,className:"text-white/80 hover:text-white transition-colors",children:t.jsx(ft,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto space-y-5",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsx("span",{style:{background:o.bg,color:o.color,border:`1px solid ${o.border}`},className:"px-3 py-1.5 rounded-full text-xs font-bold uppercase",children:e.eventType||e.type||"action"}),t.jsx("span",{style:{background:i.bg,color:i.color,border:`1px solid ${i.border}`},className:"px-3 py-1.5 rounded-full text-xs font-bold uppercase",children:e.status||"success"}),t.jsxs("span",{style:{color:r.text.secondary},className:"text-sm",children:[" ",new Date(e.timestamp).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})]})]}),e.title&&t.jsxs("div",{children:[t.jsx("div",{style:{color:r.accent.primary},className:"text-xs font-bold uppercase tracking-wide mb-2",children:"Action"}),t.jsx("div",{style:{color:r.text.primary},className:"text-lg font-semibold",children:e.title})]}),(e.description||e.message)&&t.jsxs("div",{children:[t.jsx("div",{style:{color:r.accent.primary},className:"text-xs font-bold uppercase tracking-wide mb-2",children:"Description"}),t.jsx("div",{style:{background:s?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:r.border.primary},className:"p-4 rounded-xl border",children:t.jsx("p",{style:{color:r.text.primary},className:"whitespace-pre-wrap leading-relaxed",children:e.description||e.message})})]}),t.jsxs("div",{children:[t.jsx("div",{style:{color:r.accent.primary},className:"text-xs font-bold uppercase tracking-wide mb-2",children:"Entity Information"}),t.jsxs("div",{style:{background:s?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:r.border.primary},className:"rounded-xl border p-4 space-y-3",children:[(e.adminName||e.driverName)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"User"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold",children:e.adminName||e.driverName||"System"})]}),(e.adminId||e.driverId||e.userId)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"ID Number"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-mono font-semibold",children:e.adminId||e.driverId||e.userId})]}),e.targetEntity&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Target Entity"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold capitalize",children:e.targetEntity})]}),e.targetId&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Target ID"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-mono font-semibold",children:e.targetId})]})]})]}),e.metadata&&Object.keys(e.metadata).length>0&&t.jsxs("div",{children:[t.jsx("div",{style:{color:r.accent.primary},className:"text-xs font-bold uppercase tracking-wide mb-2",children:"Additional Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(e.metadata.userName||e.metadata.schoolUId||e.metadata.email||e.metadata.role)&&t.jsxs("div",{style:{background:s?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderColor:s?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)"},className:"p-4 rounded-xl border space-y-3",children:[t.jsx("h4",{style:{color:r.text.primary},className:"font-bold text-sm mb-3",children:"User Information"}),e.metadata.userName&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"Name"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold text-right capitalize",children:e.metadata.userName})]}),e.metadata.schoolUId&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"School ID"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-mono font-semibold",children:e.metadata.schoolUId})]}),e.metadata.email&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"Email"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold text-right break-all",children:e.metadata.email})]}),e.metadata.role&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"Role"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold capitalize",children:e.metadata.role})]})]}),(e.metadata.adminName||e.metadata.adminEmail||e.metadata.adminSchoolUId||e.metadata.registeredAt)&&t.jsxs("div",{style:{background:s?"rgba(16,185,129,0.1)":"rgba(16,185,129,0.05)",borderColor:s?"rgba(16,185,129,0.3)":"rgba(16,185,129,0.2)"},className:"p-4 rounded-xl border space-y-3",children:[t.jsx("h4",{style:{color:r.text.primary},className:"font-bold text-sm mb-3",children:"Processed By"}),e.metadata.adminName&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"Admin"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold text-right",children:e.metadata.adminName})]}),e.metadata.adminEmail&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"Email"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold text-right break-all",children:e.metadata.adminEmail})]}),e.metadata.adminSchoolUId&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"Admin ID"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-mono font-semibold",children:e.metadata.adminSchoolUId})]}),e.metadata.registeredAt&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"Processed At"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold text-right",children:new Date(e.metadata.registeredAt).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]})]}),t.jsx("div",{style:{borderColor:r.border.primary},className:"px-6 py-4 border-t flex justify-end",children:t.jsx("button",{onClick:a,style:{background:s?"rgba(71,85,105,0.5)":"#E5E7EB",color:r.text.primary},className:"px-6 py-2.5 rounded-xl font-semibold transition-all hover:opacity-80",children:"Close"})})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
      `})]})}function ln(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(""),[d,u]=p.useState(""),[c,x]=p.useState(""),[m,h]=p.useState(""),[v,S]=p.useState(""),[f,y]=p.useState(null),[b,g]=p.useState(1),[j,C]=p.useState("timestamp"),T=20,[E]=p.useState(()=>{const w=localStorage.getItem("adminData");return w?JSON.parse(w):null}),D=async()=>{try{const w=(E==null?void 0:E.role)||"sysad",k=await Z.get(`/admin/event-logs?department=${w}`);s(k||[]),l(!1)}catch(w){console.error("Error loading logs:",w),l(!1)}};p.useEffect(()=>{D();const w=setInterval(D,1e4);return()=>clearInterval(w)},[]);const I=()=>{const w=Y.map(k=>({Timestamp:new Date(k.timestamp).toLocaleString(),Action:k.title||k.eventType||"N/A",User:k.adminName||k.driverName||k.userId||"System","ID Number":k.adminId||k.driverId||k.userId||"-",Description:k.description||k.message||"-",Status:k.status||"success"}));zt(w,`${(E==null?void 0:E.role)||"system"}-logs`)},z=w=>{var A,O,q,U,H,J,ee,L,X,te,ce,de,we,ae,ue,Ce,re,Ne,Ue,Se;const k=E==null?void 0:E.role;if(k==="sysad")return!0;if(k==="motorpool"){const P=(w.eventType==="login"||w.eventType==="logout")&&((A=w.metadata)==null?void 0:A.adminRole)==="motorpool",M=(w.eventType==="crud_create"||w.eventType==="crud_update"||w.eventType==="crud_delete")&&((O=w.metadata)==null?void 0:O.adminRole)==="motorpool",G=(w.eventType==="note_added"||w.eventType==="note_updated"||w.eventType==="concern_resolved")&&((q=w.metadata)==null?void 0:q.adminRole)==="motorpool",se=w.eventType==="driver_login"||w.eventType==="driver_logout"||w.eventType==="trip_start"||w.eventType==="trip_end"||w.eventType==="route_change"||w.eventType==="refund",oe=(w.eventType==="export_manual"||w.eventType==="export_auto")&&((U=w.metadata)==null?void 0:U.adminRole)==="motorpool",xe=w.eventType==="config_updated"&&((H=w.metadata)==null?void 0:H.adminRole)==="motorpool"||w.department==="motorpool",ie=w.driverId||w.shuttleId||w.routeId||w.tripId||w.targetEntity==="driver"||w.targetEntity==="shuttle"||w.targetEntity==="route"||w.targetEntity==="trip"||w.targetEntity==="phone";return P||M||G||se||oe||xe||ie}if(k==="merchant"){const P=(w.eventType==="login"||w.eventType==="logout")&&((J=w.metadata)==null?void 0:J.adminRole)==="merchant",M=(w.eventType==="crud_create"||w.eventType==="crud_update"||w.eventType==="crud_delete")&&((ee=w.metadata)==null?void 0:ee.adminRole)==="merchant",G=(w.eventType==="note_added"||w.eventType==="note_updated"||w.eventType==="concern_resolved")&&((L=w.metadata)==null?void 0:L.adminRole)==="merchant",se=w.eventType==="merchant_login"||w.eventType==="merchant_logout",oe=(w.eventType==="export_manual"||w.eventType==="export_auto")&&((X=w.metadata)==null?void 0:X.adminRole)==="merchant",xe=w.eventType==="config_updated"&&((te=w.metadata)==null?void 0:te.adminRole)==="merchant"||w.department==="merchant",ie=w.targetEntity==="merchant";return P||M||G||se||oe||xe||ie}if(k==="treasury"){const P=(w.eventType==="login"||w.eventType==="logout")&&((ce=w.metadata)==null?void 0:ce.adminRole)==="treasury",M=(w.eventType==="crud_create"||w.eventType==="crud_update"||w.eventType==="crud_delete")&&((de=w.metadata)==null?void 0:de.adminRole)==="treasury",G=(w.eventType==="note_added"||w.eventType==="note_updated"||w.eventType==="concern_resolved")&&((we=w.metadata)==null?void 0:we.adminRole)==="treasury",se=w.eventType==="cash_in"&&((ae=w.metadata)==null?void 0:ae.adminRole)==="treasury",oe=(w.eventType==="export_manual"||w.eventType==="export_auto")&&((ue=w.metadata)==null?void 0:ue.adminRole)==="treasury",xe=w.eventType==="config_updated"&&((Ce=w.metadata)==null?void 0:Ce.adminRole)==="treasury"||w.department==="treasury",ie=w.targetEntity==="user"||w.targetEntity==="transaction"||w.eventType==="registration";return P||M||G||se||oe||xe||ie}if(k==="accounting"){const P=(w.eventType==="login"||w.eventType==="logout")&&((re=w.metadata)==null?void 0:re.adminRole)==="accounting",M=(w.eventType==="crud_create"||w.eventType==="crud_update"||w.eventType==="crud_delete")&&((Ne=w.metadata)==null?void 0:Ne.adminRole)==="accounting",G=(w.eventType==="export_manual"||w.eventType==="export_auto")&&((Ue=w.metadata)==null?void 0:Ue.adminRole)==="accounting",se=w.eventType==="config_updated"&&((Se=w.metadata)==null?void 0:Se.adminRole)==="accounting"||w.department==="accounting";return P||M||G||se}return!1},Y=r.filter(w=>{var k,A,O,q,U,H,J;if(!z(w))return!1;if(o){const ee=o.toLowerCase();if(!(((k=w.eventType)==null?void 0:k.toLowerCase().includes(ee))||((A=w.type)==null?void 0:A.toLowerCase().includes(ee))||((O=w.title)==null?void 0:O.toLowerCase().includes(ee))||((q=w.description)==null?void 0:q.toLowerCase().includes(ee))||((U=w.message)==null?void 0:U.toLowerCase().includes(ee))||((H=w.adminName)==null?void 0:H.toLowerCase().includes(ee))||((J=w.adminId)==null?void 0:J.toLowerCase().includes(ee))||new Date(w.timestamp).toLocaleString().toLowerCase().includes(ee)))return!1}if(d&&(w.eventType||w.type)!==d||c&&w.status!==c)return!1;if(m||v){const ee=new Date(w.timestamp);if(m&&ee<new Date(m)||v&&ee>new Date(v+"T23:59:59"))return!1}return!0}),_=[...Y].sort((w,k)=>j==="timestamp"?new Date(k.timestamp)-new Date(w.timestamp):j==="type"?(w.eventType||w.type||"").localeCompare(k.eventType||k.type||""):j==="user"?(w.adminName||w.driverName||"").localeCompare(k.adminName||k.driverName||""):0),V=Math.ceil(_.length/T),R=(b-1)*T,B=R+T,F=_.slice(R,B);p.useEffect(()=>{g(1)},[o,d,c,m,v]);const $=()=>{const w=E==null?void 0:E.role;return w==="motorpool"?[{value:"login",label:"Admin Login"},{value:"logout",label:"Admin Logout"},{value:"crud_create",label:"Create Record"},{value:"crud_update",label:"Update Record"},{value:"crud_delete",label:"Delete Record"},{value:"note_added",label:"Note Added"},{value:"note_updated",label:"Note Updated"},{value:"concern_resolved",label:"Concern Resolved"},{value:"driver_login",label:"Driver Login"},{value:"driver_logout",label:"Driver Logout"},{value:"trip_start",label:"Trip Start"},{value:"trip_end",label:"Trip End"},{value:"route_change",label:"Route Change"},{value:"refund",label:"Refund"},{value:"export_manual",label:"Manual Export"},{value:"export_auto",label:"Auto Export"},{value:"config_updated",label:"Config Updated"}]:w==="treasury"?[{value:"login",label:"Admin Login"},{value:"logout",label:"Admin Logout"},{value:"crud_create",label:"Create Record"},{value:"crud_update",label:"Update Record"},{value:"crud_delete",label:"Delete Record"},{value:"note_added",label:"Note Added"},{value:"note_updated",label:"Note Updated"},{value:"concern_resolved",label:"Concern Resolved"},{value:"cash_in",label:"Cash In"},{value:"registration",label:"Registration"},{value:"export_manual",label:"Manual Export"},{value:"export_auto",label:"Auto Export"},{value:"config_updated",label:"Config Updated"}]:w==="merchant"?[{value:"login",label:"Admin Login"},{value:"logout",label:"Admin Logout"},{value:"crud_create",label:"Create Record"},{value:"crud_update",label:"Update Record"},{value:"crud_delete",label:"Delete Record"},{value:"note_added",label:"Note Added"},{value:"note_updated",label:"Note Updated"},{value:"concern_resolved",label:"Concern Resolved"},{value:"merchant_login",label:"Merchant Login"},{value:"merchant_logout",label:"Merchant Logout"},{value:"export_manual",label:"Manual Export"},{value:"export_auto",label:"Auto Export"},{value:"config_updated",label:"Config Updated"}]:w==="accounting"?[{value:"login",label:"Admin Login"},{value:"logout",label:"Admin Logout"},{value:"crud_create",label:"Create Record"},{value:"crud_update",label:"Update Record"},{value:"crud_delete",label:"Delete Record"},{value:"export_manual",label:"Manual Export"},{value:"export_auto",label:"Auto Export"},{value:"config_updated",label:"Config Updated"}]:[{value:"login",label:"Login"},{value:"logout",label:"Logout"},{value:"crud_create",label:"Create Record"},{value:"crud_update",label:"Update Record"},{value:"crud_delete",label:"Delete Record"},{value:"note_added",label:"Note Added"},{value:"note_updated",label:"Note Updated"},{value:"concern_resolved",label:"Concern Resolved"},{value:"driver_login",label:"Driver Login"},{value:"driver_logout",label:"Driver Logout"},{value:"merchant_login",label:"Merchant Login"},{value:"merchant_logout",label:"Merchant Logout"},{value:"trip_start",label:"Trip Start"},{value:"trip_end",label:"Trip End"},{value:"route_change",label:"Route Change"},{value:"refund",label:"Refund"},{value:"cash_in",label:"Cash In"},{value:"registration",label:"Registration"},{value:"export_manual",label:"Manual Export"},{value:"export_auto",label:"Auto Export"},{value:"maintenance_mode",label:"Maintenance Mode"},{value:"student_deactivation",label:"Student Deactivation"},{value:"config_updated",label:"Config Updated"},{value:"admin_action",label:"Admin Action"},{value:"user_action",label:"User Action"},{value:"system",label:"System Event"},{value:"security",label:"Security Event"},{value:"error",label:"Error"}]},N=w=>w==="success"||!w?{bg:"rgba(34,197,94,0.2)",color:"#22C55E",label:"Success"}:w==="failed"||w==="error"?{bg:"rgba(239,68,68,0.2)",color:"#EF4444",label:"Failed"}:{bg:"rgba(251,191,36,0.2)",color:"#FBBF24",label:w};return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading logs..."]}):t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Activity Logs"]}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:["Showing ",Y.length," logs  Page ",b," of ",Math.max(1,V)]})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.8)":e.bg.card,borderColor:e.accent.primary},className:"rounded-xl border-2 p-4 mb-5 flex flex-wrap gap-3 items-end",children:[t.jsx(Ht,{value:o,onChange:i,placeholder:"Search logs..."}),t.jsx(aa,{value:d,onChange:u,label:"Type",options:$()}),t.jsx(aa,{value:c,onChange:x,label:"Status",options:[{value:"success",label:"Success"},{value:"failed",label:"Failed"}]}),t.jsx(yr,{startDate:m,endDate:v,onStartChange:h,onEndChange:S}),t.jsx("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:a?"rgba(30,35,71,0.8)":"#F3F4F6"},children:[{value:"timestamp",label:"Date"},{value:"type",label:"Type"},{value:"user",label:"User"}].map(w=>t.jsx("button",{onClick:()=>{C(w.value),g(1)},style:{background:j===w.value?e.accent.primary:"transparent",color:j===w.value?a?"#181D40":"#FFFFFF":e.text.secondary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all hover:opacity-80",children:w.label},w.value))}),t.jsx(qt,{onClick:I,disabled:_.length===0})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:_.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{className:"font-semibold",children:"No logs found"}),t.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your filters"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"overflow-x-auto rounded-xl border mb-5",children:t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Timestamp"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Action"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"User"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"ID Number"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Description"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-center p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:F.map((w,k)=>{const A=w.adminName||w.driverName||"System",O=w.adminId||w.driverId||w.userId||"-",q=N(w.status);return t.jsxs("tr",{style:{borderColor:e.border.primary},className:"border-b hover:bg-white/5 transition",children:[t.jsxs("td",{style:{color:e.text.secondary},className:"p-4 text-xs",children:[t.jsx("div",{children:new Date(w.timestamp).toLocaleDateString()}),t.jsx("div",{style:{color:e.text.muted},className:"text-[11px]",children:new Date(w.timestamp).toLocaleTimeString()})]}),t.jsxs("td",{className:"p-4",children:[t.jsx("div",{style:{color:e.text.primary},className:"font-semibold mb-1",children:w.title||"N/A"}),t.jsx("span",{style:{background:w.eventType==="login"?"rgba(34,197,94,0.2)":w.eventType==="logout"?"rgba(239,68,68,0.2)":"rgba(59,130,246,0.2)",color:w.eventType==="login"?"#22C55E":w.eventType==="logout"?"#EF4444":"#3B82F6"},className:"inline-block px-2.5 py-0.5 rounded-full text-[10px] font-bold uppercase",children:w.eventType||w.type||"action"})]}),t.jsx("td",{style:{color:e.text.primary},className:"p-4 font-semibold",children:A}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4 font-mono text-xs",children:O}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4 max-w-[300px] overflow-hidden text-ellipsis whitespace-nowrap",children:w.description||w.message||"-"}),t.jsx("td",{className:"p-4",children:t.jsx("span",{style:{background:q.bg,color:q.color},className:"inline-block px-3 py-1 rounded-full text-[10px] font-bold uppercase",children:q.label})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("button",{onClick:()=>y(w),style:{background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"px-3.5 py-1.5 border-2 rounded-lg text-[11px] font-semibold cursor-pointer hover:opacity-80 transition-colors",children:"View"})})]},w._id||k)})})]})}),V>1&&t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"flex justify-between items-center p-4 rounded-xl border",children:[t.jsxs("div",{style:{color:e.text.secondary},className:"text-sm",children:["Showing ",R+1,"-",Math.min(B,_.length)," of ",_.length]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>g(Math.max(1,b-1)),disabled:b===1,style:{background:b===1?"rgba(255,255,255,0.05)":a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",borderColor:e.border.primary,color:b===1?e.text.muted:e.accent.primary},className:"px-4 py-2 border-2 rounded-lg text-xs font-semibold transition-colors disabled:cursor-not-allowed",children:"Previous"}),t.jsx("button",{onClick:()=>g(Math.min(V,b+1)),disabled:b===V,style:{background:b===V?"rgba(255,255,255,0.05)":a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",borderColor:e.border.primary,color:b===V?e.text.muted:e.accent.primary},className:"px-4 py-2 border-2 rounded-lg text-xs font-semibold transition-colors disabled:cursor-not-allowed",children:"Next"})]})]})]})}),f&&t.jsx(h4,{log:f,onClose:()=>y(null)})]})}function ts(){const[e,a]=p.useState(()=>{const z=localStorage.getItem("adminData");return z?JSON.parse(z):null}),[r,s]=p.useState(!0),[n,l]=p.useState("personal"),[o,i]=p.useState(1),[d,u]=p.useState({oldPin:"",newPin:"",otp:""}),[c,x]=p.useState(!1),[m,h]=p.useState(""),[v,S]=p.useState(!1),[f,y]=p.useState(!1);p.useEffect(()=>{(async()=>{try{const Y=localStorage.getItem("adminToken");if(!Y){s(!1);return}const _=await fetch("http://18.166.29.239:3000/api/admin/auth/me",{headers:{Authorization:`Bearer ${Y}`}});if(_.ok){const V=await _.json();a(V),localStorage.setItem("adminData",JSON.stringify(V))}}catch(Y){console.error("Failed to fetch profile:",Y)}finally{s(!1)}})()},[]);const b=(z,Y)=>{z!=="otp"&&!/^\d*$/.test(Y)||(z==="oldPin"||z==="newPin")&&Y.length>6||z==="otp"&&Y.length>6||(u({...d,[z]:Y}),h(""))},g=async()=>{if(!d.oldPin||d.oldPin.length!==6){h("Old PIN must be exactly 6 digits");return}if(!d.newPin||d.newPin.length!==6){h("New PIN must be exactly 6 digits");return}if(d.oldPin===d.newPin){h("New PIN must be different from old PIN");return}x(!0),h("");try{const z=await fetch("http://18.166.29.239:3000/api/admin/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify({email:e.email,purpose:"password_change"})}),Y=await z.json();if(!z.ok)throw new Error(Y.error||"Failed to send OTP");S(!0),i(2),h("")}catch(z){console.error("Send OTP error:",z),h(z.message||"Failed to send OTP. Please try again.")}finally{x(!1)}},j=async()=>{if(!d.otp||d.otp.length!==6){h("OTP must be exactly 6 digits");return}x(!0),h("");try{const z=await fetch("http://18.166.29.239:3000/api/admin/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify({oldPin:d.oldPin,newPin:d.newPin,otp:d.otp})}),Y=await z.json();if(!z.ok)throw new Error(Y.error||"Failed to change password");i(3),h("")}catch(z){console.error("Change password error:",z),h(z.message||"Failed to change password. Please try again.")}finally{x(!1)}},C=()=>{i(1),u({oldPin:"",newPin:"",otp:""}),h(""),S(!1),y(!1)},T=()=>{var _,V;if(!e)return"?";const z=((_=e.firstName)==null?void 0:_[0])||"",Y=((V=e.lastName)==null?void 0:V[0])||"";return(z+Y).toUpperCase()},E=z=>({motorpool:"Motorpool Admin",merchant:"Merchant Admin",treasury:"Treasury Admin",accounting:"Accounting Admin",sysad:"System Administrator"})[z]||z,D=()=>t.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",overflow:"hidden"},children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(255,212,28,0.2) 0%, rgba(255,212,28,0.05) 100%)",padding:"40px",display:"flex",alignItems:"center",gap:"24px",borderBottom:"1px solid rgba(255,212,28,0.2)"},children:[t.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"linear-gradient(135deg, #FFD41C 0%, #F59E0B 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"40px",fontWeight:800,color:"#181D40",boxShadow:"0 0 0 6px rgba(255,212,28,0.2)"},children:T()}),t.jsxs("div",{children:[t.jsxs("h2",{style:{fontSize:"28px",fontWeight:700,color:"#FBFBFB",margin:"0 0 8px 0"},children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),t.jsx("div",{style:{display:"inline-block",padding:"6px 16px",background:"rgba(255,212,28,0.2)",border:"1px solid rgba(255,212,28,0.4)",borderRadius:"20px",color:"#FFD41C",fontSize:"13px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.5px"},children:E(e==null?void 0:e.role)})]})]}),t.jsx("div",{style:{padding:"32px"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"24px"},children:[t.jsx(Ua,{label:"Admin ID",value:(e==null?void 0:e.adminId)||"N/A"}),t.jsx(Ua,{label:"Role",value:E(e==null?void 0:e.role)}),t.jsx(Ua,{label:"First Name",value:(e==null?void 0:e.firstName)||"N/A"}),t.jsx(Ua,{label:"Last Name",value:(e==null?void 0:e.lastName)||"N/A"}),t.jsx(Ua,{label:"Middle Name",value:(e==null?void 0:e.middleName)||"N/A"}),t.jsx(Ua,{label:"Email Address",value:(e==null?void 0:e.email)||"N/A"}),t.jsx(Ua,{label:"Account Status",value:e!=null&&e.isActive?"Active":"Inactive",highlight:e!=null&&e.isActive?"success":"error"}),t.jsx(Ua,{label:"Created By",value:(e==null?void 0:e.createdBy)||"System"})]})})]}),I=()=>t.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",overflow:"hidden"},children:[t.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",padding:"24px 32px",borderBottom:"1px solid rgba(255,212,28,0.2)"},children:[t.jsxs("h3",{style:{fontSize:"18px",fontWeight:700,color:"#FFD41C",margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," Security Settings"]}),t.jsx("p",{style:{fontSize:"14px",color:"rgba(251,251,251,0.6)",margin:0},children:"Update your 6-digit PIN for enhanced security"})]}),t.jsxs("div",{style:{padding:"32px"},children:[m&&t.jsxs("div",{style:{padding:"14px 20px",background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",color:"#EF4444",fontSize:"13px",fontWeight:600,marginBottom:"24px",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:m})]}),o===1&&t.jsxs("div",{style:{maxWidth:"500px"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Enter Old PIN (6 digits) *"}),t.jsx("input",{type:"password",value:d.oldPin,onChange:z=>b("oldPin",z.target.value),disabled:c,placeholder:"",maxLength:"6",style:{width:"100%",padding:"14px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"24px",fontWeight:700,letterSpacing:"12px",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Enter New PIN (6 digits) *"}),t.jsx("input",{type:"password",value:d.newPin,onChange:z=>b("newPin",z.target.value),disabled:c,placeholder:"",maxLength:"6",style:{width:"100%",padding:"14px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"24px",fontWeight:700,letterSpacing:"12px",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}}),t.jsx("p",{style:{fontSize:"11px",color:"rgba(251, 251, 251, 0.5)",marginTop:"8px",marginBottom:0},children:"Must be different from old PIN"})]}),t.jsx("button",{onClick:g,disabled:c||d.oldPin.length!==6||d.newPin.length!==6,style:{width:"100%",padding:"14px",background:c||d.oldPin.length!==6||d.newPin.length!==6?"rgba(255, 212, 28, 0.3)":"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:c||d.oldPin.length!==6||d.newPin.length!==6?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.3s ease"},children:c?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid rgba(24, 29, 64, 0.3)",borderTopColor:"#181D40",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),t.jsx("span",{children:"Sending OTP..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Send OTP to Email"})]})})]}),o===2&&t.jsxs("div",{style:{maxWidth:"500px"},children:[t.jsxs("div",{style:{padding:"16px",background:"rgba(59, 130, 246, 0.15)",border:"2px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",marginBottom:"24px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:""}),t.jsx("div",{style:{fontSize:"14px",color:"#3B82F6",fontWeight:600,marginBottom:"4px"},children:"OTP Sent Successfully!"}),t.jsxs("div",{style:{fontSize:"12px",color:"rgba(251, 251, 251, 0.7)"},children:["Check your email: ",e==null?void 0:e.email]})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Enter OTP (6 digits) *"}),t.jsx("input",{type:"text",value:d.otp,onChange:z=>b("otp",z.target.value),disabled:c,placeholder:"______",maxLength:"6",style:{width:"100%",padding:"14px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"24px",fontWeight:700,letterSpacing:"12px",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}}),t.jsx("p",{style:{fontSize:"11px",color:"rgba(251, 251, 251, 0.5)",marginTop:"8px",marginBottom:0},children:"OTP expires in 10 minutes"})]}),t.jsxs("button",{onClick:()=>y(!0),disabled:c||d.otp.length!==6,style:{width:"100%",padding:"14px",background:c||d.otp.length!==6?"rgba(255, 212, 28, 0.3)":"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:c||d.otp.length!==6?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.3s ease"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Change Password"})]})]}),o===3&&t.jsxs("div",{style:{textAlign:"center",padding:"40px 0",maxWidth:"500px",margin:"0 auto"},children:[t.jsx("div",{style:{fontSize:"80px",marginBottom:"24px"},children:""}),t.jsx("h3",{style:{fontSize:"24px",fontWeight:700,color:"#22C55E",marginBottom:"12px"},children:"Password Changed Successfully!"}),t.jsx("p",{style:{fontSize:"14px",color:"rgba(251, 251, 251, 0.7)",marginBottom:"32px"},children:"Your password has been updated. Please use your new PIN for future logins."}),t.jsx("button",{onClick:C,style:{padding:"14px 32px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px"},children:"Done"})]}),f&&t.jsx("div",{onClick:()=>y(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.7)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:z=>z.stopPropagation(),style:{background:"#1a1f3a",borderRadius:"16px",padding:"32px",maxWidth:"400px",width:"90%",border:"2px solid rgba(255, 212, 28, 0.3)",textAlign:"center"},children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("h3",{style:{fontSize:"18px",fontWeight:700,color:"#FBFBFB",marginBottom:"12px"},children:"Confirm Password Change"}),t.jsx("p",{style:{fontSize:"14px",color:"rgba(251, 251, 251, 0.7)",marginBottom:"24px"},children:"Are you sure you want to change your password? You will need to use the new PIN for future logins."}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:()=>y(!1),style:{flex:1,padding:"12px",background:"rgba(251, 251, 251, 0.1)",color:"rgba(251, 251, 251, 0.7)",border:"1px solid rgba(251, 251, 251, 0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),t.jsx("button",{onClick:()=>{y(!1),j()},style:{flex:1,padding:"12px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer"},children:"Confirm"})]})]})}),t.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})]});return t.jsxs("div",{children:[t.jsxs("div",{className:"mb-[30px] border-b-2 border-[rgba(255,212,28,0.2)] pb-5",children:[t.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," My Profile"]}),t.jsx("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:"Manage your account information and security settings"})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"30px"},children:[t.jsxs("button",{onClick:()=>l("personal"),style:{padding:"12px 24px",background:n==="personal"?"rgba(255, 212, 28, 0.15)":"rgba(30, 35, 71, 0.4)",border:n==="personal"?"2px solid rgba(255, 212, 28, 0.4)":"2px solid rgba(255, 212, 28, 0.1)",borderRadius:"12px",color:n==="personal"?"#FFD41C":"rgba(251, 251, 251, 0.7)",fontSize:"14px",fontWeight:n==="personal"?700:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Personal Information"})]}),t.jsxs("button",{onClick:()=>l("security"),style:{padding:"12px 24px",background:n==="security"?"rgba(255, 212, 28, 0.15)":"rgba(30, 35, 71, 0.4)",border:n==="security"?"2px solid rgba(255, 212, 28, 0.4)":"2px solid rgba(255, 212, 28, 0.1)",borderRadius:"12px",color:n==="security"?"#FFD41C":"rgba(251, 251, 251, 0.7)",fontSize:"14px",fontWeight:n==="security"?700:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Security Settings"})]})]}),r?t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"80px 20px",color:"rgba(251, 251, 251, 0.6)"},children:t.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid rgba(255, 212, 28, 0.2)",borderTopColor:"#FFD41C",borderRadius:"50%",animation:"spin 0.8s linear infinite"}})}):t.jsxs(t.Fragment,{children:[n==="personal"&&D(),n==="security"&&I()]})]})}function Ua({label:e,value:a,highlight:r,fullWidth:s}){const l=r==="success"?{bg:"rgba(34, 197, 94, 0.15)",border:"rgba(34, 197, 94, 0.3)",color:"#22C55E"}:r==="error"?{bg:"rgba(239, 68, 68, 0.15)",border:"rgba(239, 68, 68, 0.3)",color:"#EF4444"}:r==="warning"?{bg:"rgba(245, 158, 11, 0.15)",border:"rgba(245, 158, 11, 0.3)",color:"#F59E0B"}:null;return t.jsxs("div",{style:{gridColumn:s?"1 / -1":"span 1"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"11px",fontWeight:700,color:"rgba(255,212,28,0.8)",textTransform:"uppercase",letterSpacing:"0.5px"},children:e}),t.jsx("div",{style:{padding:"12px 16px",background:l?l.bg:"rgba(251,251,251,0.05)",border:`1px solid ${l?l.border:"rgba(255,212,28,0.1)"}`,borderRadius:"8px",color:l?l.color:"rgba(251,251,251,0.9)",fontSize:"15px",fontWeight:r?700:500},children:a||"N/A"})]})}const Ru="http://18.166.29.239:3000/api/admin",zu=()=>({Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}),Ob=async(e={})=>{try{const a=new URLSearchParams({page:e.page||1,limit:e.limit||1e3,...e.status&&{status:e.status},...e.priority&&{priority:e.priority},...e.submissionType&&{submissionType:e.submissionType},...e.startDate&&{startDate:e.startDate},...e.endDate&&{endDate:e.endDate},...e.search&&{search:e.search}}),r=await fetch(`${Ru}/user-concerns?${a}`,{headers:zu()}),s=await r.json();if(!r.ok)throw new Error(s.message||s.error||"Failed to fetch concerns");return Array.isArray(s)?{success:!0,concerns:s}:s}catch(a){throw a}},y4=async e=>{try{const a=await fetch(`${Ru}/user-concerns/${e}`,{headers:zu()}),r=await a.json();if(!a.ok)throw new Error(r.message||"Failed to fetch concern details");return r}catch(a){throw a}},bd=async(e,a)=>{try{const r=await fetch(`${Ru}/user-concerns/${e}/status`,{method:"PATCH",headers:zu(),body:JSON.stringify(a)}),s=await r.json();if(!r.ok)throw new Error(s.message||"Failed to update concern status");return s}catch(r){throw r}};function v4({concern:e,onClose:a}){if(!e)return null;const r=o=>{switch(o){case"high":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};case"medium":return{bg:"rgba(251,191,36,0.2)",color:"#FBBF24"};default:return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"}}},s=o=>{switch(o){case"resolved":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"in_progress":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"closed":return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"};default:return{bg:"rgba(251,191,36,0.2)",color:"#FBBF24"}}},n=r(e.priority),l=s(e.status);return t.jsxs("div",{onClick:a,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{onClick:o=>o.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"700px",width:"90%",maxHeight:"85vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#FFD41C",margin:0},children:"Concern Details"}),t.jsxs("span",{style:{fontSize:"14px",color:"rgba(251,251,251,0.5)",fontWeight:600},children:["#",e.concernId||e._id.slice(-6)]})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[t.jsxs("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:n.bg,color:n.color},children:[e.priority||"low"," priority"]}),t.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:l.bg,color:l.color},children:e.status||"pending"}),t.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:"rgba(59,130,246,0.2)",color:"#3B82F6"},children:e.category||"general"})]})]}),t.jsx("button",{onClick:a,style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",border:"1px solid rgba(255,212,28,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"User Information"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"User Name"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:e.userName||"N/A"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"User ID"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontFamily:"monospace"},children:e.userId||"N/A"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Submitted At"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:new Date(e.submittedAt||e.createdAt).toLocaleString()})]}),e.email&&t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Email"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:e.email})]})]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"8px"},children:"Subject"}),t.jsx("div",{style:{fontSize:"16px",color:"rgba(251,251,251,0.95)",fontWeight:600,padding:"12px 16px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",border:"1px solid rgba(255,212,28,0.1)"},children:e.title||e.subject||"No title provided"})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"8px"},children:"Description"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.85)",lineHeight:"1.6",padding:"16px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",border:"1px solid rgba(255,212,28,0.1)",whiteSpace:"pre-wrap"},children:e.description||e.message||"No description provided"})]}),(e.attachments||e.metadata)&&t.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,212,28,0.1)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"Additional Information"}),e.attachments&&t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Attachments"}),t.jsxs("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.7)"},children:[e.attachments.length||0," file(s)"]})]}),e.metadata&&t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Metadata"}),t.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.6)",fontFamily:"monospace"},children:JSON.stringify(e.metadata,null,2)})]})]}),e.response&&t.jsxs("div",{style:{background:"rgba(34,197,94,0.05)",border:"1px solid rgba(34,197,94,0.2)",borderRadius:"12px",padding:"16px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#22C55E",textTransform:"uppercase",marginBottom:"8px"},children:"Admin Response"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.85)",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:e.response}),e.respondedAt&&t.jsxs("div",{style:{fontSize:"12px",color:"rgba(251,251,251,0.5)",marginTop:"8px"},children:["Responded at: ",new Date(e.respondedAt).toLocaleString()]})]})]}),t.jsx("div",{style:{padding:"20px 24px",borderTop:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{onClick:a,style:{padding:"12px 24px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:"0 4px 12px rgba(255,212,28,0.4)"},children:"Close"})})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}function j4(){const[e,a]=p.useState([]),[r,s]=p.useState(!0),[n,l]=p.useState(null),[o,i]=p.useState("all"),[d,u]=p.useState(""),[c,x]=p.useState(""),[m,h]=p.useState(""),[v,S]=p.useState(""),[f,y]=p.useState(""),[b,g]=p.useState(""),[j,C]=p.useState(null),[T,E]=p.useState(!1),[D,I]=p.useState(!1),[z,Y]=p.useState(""),[_,V]=p.useState(!1),[R,B]=p.useState(1),F=20,$=async(L=!1)=>{try{L||s(!0);const X=await Ob({page:1,limit:1e3});X.success&&a(X.concerns||[])}catch(X){console.error("Error loading concerns:",X)}finally{L||s(!1)}};p.useEffect(()=>{$(!1);const L=setInterval(()=>$(!0),5e3);return()=>clearInterval(L)},[]);const N=async L=>{try{const X=await y4(L);X.success&&(C(X.concern),E(!0))}catch{l({type:"error",message:"Failed to load concern details"}),setTimeout(()=>l(null),3e3)}},w=L=>{C(L),Y(""),E(!1),I(!0)},k=async(L,X)=>{try{if(X==="resolved"){C(L),I(!0);return}(await bd(L.concernId,{status:X})).success&&(l({type:"success",message:"Status updated!"}),$(!0),setTimeout(()=>l(null),2e3))}catch(te){console.error("Error updating status:",te),l({type:"error",message:te.message||"Failed to update status"}),setTimeout(()=>l(null),3e3)}},A=async()=>{V(!0);try{(await bd(j.concernId,{status:"resolved",resolution:z.trim()||"No resolution details provided."})).success&&(l({type:"success",message:"Concern resolved and email sent"}),I(!1),$(!0),setTimeout(()=>l(null),2e3))}catch(L){l({type:"error",message:L.message||"Failed to resolve concern"}),setTimeout(()=>l(null),3e3)}finally{V(!1)}},O=()=>{const L=Jr(q);zt(L,"concerns")},q=e.filter(L=>{var X,te,ce,de,we,ae,ue,Ce,re,Ne,Ue;if(o==="assistance"&&L.submissionType!=="assistance"||o==="feedback"&&L.submissionType!=="feedback")return!1;if(d){const Se=d.toLowerCase();if(!(((X=L.concernId)==null?void 0:X.toLowerCase().includes(Se))||((te=L._id)==null?void 0:te.toLowerCase().includes(Se))||((ce=L.userName)==null?void 0:ce.toLowerCase().includes(Se))||((de=L.userId)==null?void 0:de.toLowerCase().includes(Se))||((we=L.title)==null?void 0:we.toLowerCase().includes(Se))||((ae=L.description)==null?void 0:ae.toLowerCase().includes(Se))||((ue=L.category)==null?void 0:ue.toLowerCase().includes(Se))||((Ce=L.subject)==null?void 0:Ce.toLowerCase().includes(Se))||((re=L.feedbackText)==null?void 0:re.toLowerCase().includes(Se))||((Ne=L.priority)==null?void 0:Ne.toLowerCase().includes(Se))||((Ue=L.status)==null?void 0:Ue.toLowerCase().includes(Se))))return!1}if(c&&L.status!==c||m&&L.priority!==m||v&&L.category!==v)return!1;if(f||b){const Se=new Date(L.submittedAt||L.createdAt);if(f&&Se<new Date(f)||b&&Se>new Date(b+"T23:59:59"))return!1}return!0}),U=Math.ceil(q.length/F),H=(R-1)*F,J=H+F,ee=q.slice(H,J);return p.useEffect(()=>{B(1)},[d,c,m,v,f,b,o]),r?t.jsx("div",{className:"text-center py-[60px] text-[#FFD41C]",children:"Loading concerns..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[n&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:n.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:n.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${n.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4},children:n.message}),t.jsxs("div",{className:"mb-[30px] border-b-2 border-[rgba(255,212,28,0.2)] pb-5",children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," User Concerns"]}),t.jsx("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:q.length>0?`Showing ${H+1}-${Math.min(J,q.length)} of ${q.length}  Page ${R} of ${U}`:`Support tickets and feedback  Total: ${e.length}`})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px"},children:[t.jsxs("button",{onClick:()=>i("all"),style:{padding:"10px 20px",background:o==="all"?"rgba(255,212,28,0.2)":"transparent",border:`2px solid ${o==="all"?"#FFD41C":"rgba(255,212,28,0.3)"}`,borderRadius:"8px",color:o==="all"?"#FFD41C":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["All (",e.length,")"]}),t.jsxs("button",{onClick:()=>i("assistance"),style:{padding:"10px 20px",background:o==="assistance"?"rgba(59,130,246,0.2)":"transparent",border:`2px solid ${o==="assistance"?"#3B82F6":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:o==="assistance"?"#3B82F6":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Assistance (",e.filter(L=>L.submissionType==="assistance").length,")"]}),t.jsxs("button",{onClick:()=>i("feedback"),style:{padding:"10px 20px",background:o==="feedback"?"rgba(34,197,94,0.2)":"transparent",border:`2px solid ${o==="feedback"?"#22C55E":"rgba(34,197,94,0.3)"}`,borderRadius:"8px",color:o==="feedback"?"#22C55E":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Feedback (",e.filter(L=>L.submissionType==="feedback").length,")"]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[t.jsx(Ht,{value:d,onChange:u,placeholder:"Search by ID, user, title, category, or status..."}),t.jsx(aa,{value:c,onChange:x,label:"Status",options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]}),t.jsx(aa,{value:m,onChange:h,label:"Priority",options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}]}),t.jsx(aa,{value:v,onChange:S,label:"Category",options:[{value:"payment_issue",label:"Payment Issue"},{value:"driver_complaint",label:"Driver Complaint"},{value:"shuttle_issue",label:"Shuttle Issue"},{value:"technical_problem",label:"Technical Problem"},{value:"safety_concern",label:"Safety Concern"},{value:"route_suggestion",label:"Route Suggestion"},{value:"billing_dispute",label:"Billing Dispute"},{value:"lost_item",label:"Lost Item"},{value:"other",label:"Other"}]}),t.jsx(yr,{startDate:f,endDate:b,onStartChange:y,onEndChange:g}),t.jsx(qt,{onClick:O,disabled:q.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:e.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{children:"No concerns found"})]}):q.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{style:{marginBottom:"12px"},children:"No concerns match your search"}),t.jsx("button",{onClick:()=>u(""),style:{padding:"8px 16px",background:"rgba(255,212,28,0.15)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):t.jsxs("div",{className:"overflow-x-auto rounded-xl border border-[rgba(255,212,28,0.2)]",children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-[rgba(255,212,28,0.1)]",children:[t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"ID"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"User"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Subject"}),o==="all"&&t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Type"}),o==="feedback"&&t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Rating"}),o!=="feedback"&&t.jsxs(t.Fragment,{children:[t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Priority"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Status"})]}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Date"}),t.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:"#FFD41C",textTransform:"uppercase",borderBottom:"2px solid rgba(255,212,28,0.3)"},children:"Actions"})]})}),t.jsx("tbody",{children:ee.map(L=>t.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,212,28,0.1)"},children:[t.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:t.jsx("strong",{children:L.concernId||L._id.slice(-6)})}),t.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:L.userName||"N/A"}),t.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:L.subject||(L.selectedConcerns&&L.selectedConcerns.length>0?`${L.selectedConcerns[0]}${L.selectedConcerns.length>1?` +${L.selectedConcerns.length-1}`:""}`:"N/A")}),o==="all"&&t.jsx("td",{style:{padding:"16px"},children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:L.submissionType==="assistance"?"rgba(59,130,246,0.2)":"rgba(34,197,94,0.2)",color:L.submissionType==="assistance"?"#3B82F6":"#22C55E",border:`1px solid ${L.submissionType==="assistance"?"rgba(59,130,246,0.3)":"rgba(34,197,94,0.3)"}`},children:L.submissionType==="assistance"?" Assistance":" Feedback"})}),o==="feedback"&&t.jsx("td",{style:{padding:"16px"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[[...Array(5)].map((X,te)=>t.jsx("span",{style:{fontSize:"16px",color:te<(L.rating||0)?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},te)),t.jsxs("span",{style:{marginLeft:"8px",color:"rgba(251,251,251,0.7)",fontSize:"12px"},children:["(",L.rating||0,"/5)"]})]})}),o!=="feedback"&&t.jsxs(t.Fragment,{children:[t.jsx("td",{style:{padding:"16px"},children:L.submissionType==="assistance"?t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:L.priority==="urgent"?"rgba(239,68,68,0.2)":L.priority==="high"?"rgba(251,146,60,0.2)":L.priority==="medium"?"rgba(251,191,36,0.2)":"rgba(34,197,94,0.2)",color:L.priority==="urgent"?"#EF4444":L.priority==="high"?"#FB923C":L.priority==="medium"?"#FBBF24":"#22C55E"},children:L.priority||"low"}):t.jsx("span",{style:{color:"rgba(251,251,251,0.4)",fontSize:"11px"},children:""})}),t.jsx("td",{style:{padding:"16px"},children:L.submissionType==="assistance"?t.jsxs("select",{value:L.status||"pending",onChange:X=>k(L,X.target.value),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid rgba(255,212,28,0.3)",background:"rgba(255,255,255,0.05)",color:L.status==="resolved"?"#22C55E":L.status==="in_progress"?"#3B82F6":L.status==="closed"?"#6B7280":"#FBBF24",fontSize:"11px",fontWeight:600,cursor:"pointer"},children:[t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"in_progress",children:"In Progress"}),t.jsx("option",{value:"resolved",children:"Resolved"}),t.jsx("option",{value:"closed",children:"Closed"})]}):t.jsx("span",{style:{color:"rgba(251,251,251,0.4)",fontSize:"11px"},children:""})})]}),t.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:new Date(L.submittedAt||L.createdAt).toLocaleDateString()}),t.jsx("td",{style:{padding:"16px",textAlign:"right"},children:t.jsx("button",{onClick:()=>N(L.concernId),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"})})]},L._id))})]}),U>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[t.jsx("button",{onClick:()=>B(L=>Math.max(1,L-1)),disabled:R===1,style:{padding:"8px 16px",background:R===1?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:R===1?"rgba(251,251,251,0.3)":"#FFD41C",fontSize:"13px",fontWeight:600,cursor:R===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",R," of ",U]}),t.jsx("button",{onClick:()=>B(L=>Math.min(U,L+1)),disabled:R===U,style:{padding:"8px 16px",background:R===U?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:R===U?"rgba(251,251,251,0.3)":"#FFD41C",fontSize:"13px",fontWeight:600,cursor:R===U?"not-allowed":"pointer"},children:"Next "})]})]})}),T&&j&&t.jsx(v4,{concern:j,onClose:()=>E(!1),onResolve:()=>w(j)}),D&&j&&t.jsxs("div",{onClick:()=>I(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{onClick:L=>L.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#FFD41C",margin:0,marginBottom:"8px"},children:"Resolve Concern"}),t.jsx("p",{style:{fontSize:"13px",color:"rgba(251,251,251,0.6)",margin:0},children:"Mark this concern as resolved and notify the user"})]}),t.jsx("button",{onClick:()=>I(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{background:"rgba(251,191,36,0.1)",border:"1px solid rgba(251,191,36,0.3)",borderLeft:"4px solid #FBBF24",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[t.jsx("span",{style:{fontSize:"20px"},children:""}),t.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#FBBF24"},children:"Confirm Resolution"})]}),t.jsx("p",{style:{fontSize:"13px",color:"rgba(251,251,251,0.7)",margin:0,lineHeight:"1.5"},children:"This will mark the concern as resolved and send an email notification to the user."})]}),t.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",border:"1px solid rgba(255,212,28,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"Concern Information"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"10px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Concern ID"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontFamily:"monospace",fontWeight:600},children:j.concernId})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"User"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:j.userName})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Subject"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:j.subject})]})]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"8px"},children:"Resolution Details (Optional)"}),t.jsx("textarea",{value:z,onChange:L=>Y(L.target.value),placeholder:"Describe how this concern was resolved (optional)...",rows:6,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid rgba(255,212,28,0.2)",background:"rgba(255,255,255,0.05)",color:"#FBFBFB",fontSize:"13px",lineHeight:"1.5",resize:"vertical",outline:"none",fontFamily:"inherit",boxSizing:"border-box"}}),t.jsx("p",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginTop:"8px",margin:"8px 0 0 0"},children:"This message will be included in the email notification to the user."})]})]}),t.jsxs("div",{style:{padding:"20px 24px",borderTop:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[t.jsx("button",{onClick:()=>I(!1),disabled:_,style:{padding:"12px 24px",background:"rgba(255,255,255,0.1)",color:"#FBFBFB",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",cursor:_?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:_?.5:1},children:"Cancel"}),t.jsx("button",{onClick:A,disabled:_,style:{padding:"12px 24px",background:_?"rgba(34,197,94,0.3)":"#22C55E",color:_?"#22C55E":"#0f1227",border:"none",borderRadius:"8px",cursor:_?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:_?.5:1,boxShadow:_?"none":"0 4px 12px rgba(34,197,94,0.4)"},children:_?"Resolving...":" Mark as Resolved"})]})]}),t.jsx("style",{children:`
            @keyframes fadeIn {
              from { opacity: 0; }
              to { opacity: 1; }
            }
            @keyframes slideIn {
              from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
              }
              to {
                opacity: 1;
                transform: translateY(0) scale(1);
              }
            }
          `})]})]})}function $b(){const{theme:e,isDarkMode:a}=ne(),{userData:r,loadingUserData:s,logoutUser:n}=p.useContext(Cu),[l,o]=p.useState(!1),[i,d]=p.useState(navigator.onLine),u=p.useRef(null),c=st();p.useEffect(()=>{const S=f=>{u.current&&!u.current.contains(f.target)&&o(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]),p.useEffect(()=>{const S=()=>d(!0),f=()=>d(!1);return window.addEventListener("online",S),window.addEventListener("offline",f),()=>{window.removeEventListener("online",S),window.removeEventListener("offline",f)}},[]);const x=()=>r&&((r==null?void 0:r.name)||(r==null?void 0:r.firstName))||"User",m=()=>x().charAt(0).toUpperCase(),h=(r==null?void 0:r.email)||"user@nu.edu.ph",v=async()=>{await n(),c("/login")};return s?t.jsx("header",{style:{background:a?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",borderBottom:`2px solid ${e.accent.primary}`,boxShadow:a?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"px-[40px] py-[20px]",children:t.jsx("p",{style:{color:e.text.primary},className:"text-sm",children:"Loading user info..."})}):t.jsxs("header",{style:{background:a?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${e.accent.primary}`,boxShadow:a?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsx("div",{style:{width:"45px",height:"45px",background:e.accent.primary,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:a?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${a?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:e.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash System"}),t.jsx("p",{style:{fontSize:"12px",color:e.accent.primary,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"Digital Wallet System"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:i?"rgba(34, 197, 94, 0.2)":"rgba(107, 114, 128, 0.2)",padding:"6px 14px",borderRadius:"20px",border:i?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(107, 114, 128, 0.3)"},children:[t.jsx("div",{style:{width:"7px",height:"7px",background:i?"#22C55E":"#6B7280",borderRadius:"50%",animation:i?"pulse 2s ease-in-out infinite":"none"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:i?"#22C55E":"#6B7280"},children:i?"LIVE":"INACTIVE"})]}),t.jsx(Zr,{}),t.jsxs("div",{style:{position:"relative"},ref:u,children:[t.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:a?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${e.accent.primary}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:S=>{S.currentTarget.style.background=a?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",S.currentTarget.style.transform="scale(1.02)"},onMouseLeave:S=>{S.currentTarget.style.background=a?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",S.currentTarget.style.transform="scale(1)"},children:[t.jsx("div",{style:{width:"32px",height:"32px",background:e.accent.primary,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:a?"#181D40":"#FFFFFF",flexShrink:0},children:m()}),t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:e.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&t.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:a?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${e.border.primary}`,boxShadow:a?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${a?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`,marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:e.text.primary,marginBottom:"4px"},children:x()}),t.jsx("div",{style:{fontSize:"12px",color:e.text.secondary},children:h}),t.jsx("div",{style:{fontSize:"10px",color:e.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:"User"})]}),t.jsxs("button",{onClick:()=>{o(!1),c("/user/settings")},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:e.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:S=>{S.currentTarget.style.background=a?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",S.currentTarget.style.color=e.accent.primary},onMouseLeave:S=>{S.currentTarget.style.background="transparent",S.currentTarget.style.color=e.text.primary},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Manage Account"})]}),t.jsx("div",{style:{height:"1px",background:a?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",margin:"8px 0"}}),t.jsxs("button",{onClick:()=>{o(!1),v()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:S=>{S.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:S=>{S.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]}),t.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.5;
            transform: scale(0.8);
          }
        }

        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function Ub(){const e=st(),a=Nt(),{theme:r,isDarkMode:s}=ne(),i=a.pathname.startsWith("/admin/treasury")?[{id:"dashboard",label:"Dashboard",icon:"",route:"/admin/treasury/dashboard"},{id:"transactions",label:"Transaction History",icon:"",route:"/admin/treasury/transactions"},{id:"merchants",label:"Merchants",icon:"",route:"/admin/treasury/merchants"},{id:"logs",label:"Logs",icon:"",route:"/admin/treasury/logs"},{id:"concerns",label:"Concerns",icon:"",route:"/admin/treasury/concerns"},{id:"config",label:"Configuration",icon:"",route:"/admin/treasury/config"}]:[{id:"home",label:"Home",icon:"",route:"/admin/accounting/home"},{id:"transactions",label:"Transaction History",icon:"",route:"/admin/accounting/transactions"},{id:"merchants",label:"Merchants",icon:"",route:"/admin/accounting/merchants"},{id:"logs",label:"Logs",icon:"",route:"/admin/accounting/logs"},{id:"concerns",label:"Concerns",icon:"",route:"/admin/accounting/concerns"},{id:"config",label:"Configuration",icon:"",route:"/admin/accounting/config"}];return t.jsx("nav",{style:{background:r.bg.secondary,borderColor:r.border.primary,boxShadow:s?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",borderRadius:"12px",padding:"12px 24px",marginBottom:"20px",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},className:"flex gap-2 border",onMouseEnter:d=>{d.currentTarget.style.borderColor=r.border.hover,d.currentTarget.style.boxShadow=s?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:d=>{d.currentTarget.style.borderColor=r.border.primary,d.currentTarget.style.boxShadow=s?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:i.map(d=>{const u=a.pathname.startsWith(d.route);return t.jsxs("button",{onClick:()=>e(d.route),style:{background:u?r.accent.primary:"transparent",color:u?r.accent.secondary:r.text.secondary,padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",transition:"all 0.3s ease",transform:u?"scale(1.05)":"scale(1)",boxShadow:u?s?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)":"none"},className:"flex items-center gap-2 font-semibold text-sm",onMouseEnter:c=>{u||(c.currentTarget.style.background=s?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",c.currentTarget.style.color=r.accent.primary,c.currentTarget.style.transform="scale(1.02)",c.currentTarget.style.boxShadow=s?"0 2px 8px rgba(255,212,28,0.2)":"0 2px 8px rgba(59,130,246,0.2)")},onMouseLeave:c=>{u||(c.currentTarget.style.background="transparent",c.currentTarget.style.color=r.text.secondary,c.currentTarget.style.transform="scale(1)",c.currentTarget.style.boxShadow="none")},children:[t.jsx("span",{className:`text-base transition-transform duration-300 ${u?"scale-110":""}`,children:d.icon}),t.jsx("span",{children:d.label})]},d.id)})})}function N4(){const{theme:e,isDarkMode:a}=ne();Nt();const[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(""),[d,u]=p.useState(""),[c,x]=p.useState("");p.useEffect(()=>{m()},[]);const m=async()=>{l(!0);try{const y={search:o,...d&&{status:d},...c&&{priority:c}},b=await Ob(y);s(b.concerns||b.data||[])}catch(y){console.error("Failed to fetch concerns:",y),W.error("Failed to load concerns")}finally{l(!1)}},h=async(y,b)=>{try{await bd(y,{status:b}),W.success("Concern status updated"),m()}catch(g){console.error("Failed to update concern status:",g),W.error("Failed to update concern status")}},v=y=>{switch(y){case"high":return"#EF4444";case"medium":return"#F59E0B";case"low":return"#10B981";default:return e.text.secondary}},S=y=>{switch(y){case"resolved":return"#10B981";case"in_progress":return"#F59E0B";case"pending":return"#6B7280";default:return e.text.secondary}},f=a?"255, 212, 28":"59, 130, 246";return t.jsxs("div",{style:{minHeight:"100vh",background:e.bg.primary,display:"flex",flexDirection:"column"},children:[t.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3},children:t.jsx($b,{})}),t.jsxs("div",{style:{flex:1,padding:"40px"},children:[t.jsx(Ub,{}),t.jsx("div",{className:"mb-5 p-3 rounded-lg",style:{background:`rgba(${f}, 0.1)`,borderBottom:`2px solid ${e.accent.primary}`},children:t.jsx("h1",{className:"text-2xl font-bold",style:{color:e.accent.primary},children:" Concerns Management"})}),t.jsx("div",{className:"mb-4 p-4 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${f}, 0.2)`},children:t.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[t.jsx("input",{type:"text",placeholder:"Search concerns...",value:o,onChange:y=>i(y.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${f}, 0.3)`},className:"px-3 py-2 rounded-md outline-none"}),t.jsxs("select",{value:d,onChange:y=>u(y.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${f}, 0.3)`},className:"px-3 py-2 rounded-md outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"in_progress",children:"In Progress"}),t.jsx("option",{value:"resolved",children:"Resolved"})]}),t.jsxs("select",{value:c,onChange:y=>x(y.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${f}, 0.3)`},className:"px-3 py-2 rounded-md outline-none",children:[t.jsx("option",{value:"",children:"All Priority"}),t.jsx("option",{value:"high",children:"High"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"low",children:"Low"})]}),t.jsx("button",{onClick:m,style:{background:e.accent.primary,color:e.bg.primary},className:"px-4 py-2 rounded-md font-semibold hover:opacity-80 transition",children:" Search"})]})}),n?t.jsx("div",{className:"p-8 text-center",style:{color:e.text.secondary},children:"Loading concerns..."}):r.length===0?t.jsx("div",{className:"p-8 text-center",style:{color:e.text.secondary},children:"No concerns found"}):t.jsx("div",{className:"space-y-3",children:r.map(y=>{var b;return t.jsxs("div",{className:"p-4 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${f}, 0.2)`},children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-bold mb-1",style:{color:e.text.primary},children:y.title||y.subject||"Untitled Concern"}),t.jsx("p",{className:"text-sm mb-2",style:{color:e.text.secondary},children:y.description||y.message||"No description"}),t.jsxs("div",{className:"flex gap-3 text-xs",style:{color:e.text.muted},children:[t.jsxs("span",{children:["From: ",y.userName||((b=y.user)==null?void 0:b.fullName)||"Unknown"]}),t.jsx("span",{children:""}),t.jsx("span",{children:new Date(y.createdAt).toLocaleString()}),t.jsx("span",{children:""}),t.jsxs("span",{children:["Type: ",y.submissionType||"general"]})]})]}),t.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold text-center",style:{background:v(y.priority),color:"#fff"},children:y.priority||"medium"}),t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold text-center",style:{background:S(y.status),color:"#fff"},children:y.status||"pending"})]})]}),t.jsx("div",{className:"flex gap-2 mt-3",children:y.status!=="resolved"&&t.jsxs(t.Fragment,{children:[y.status==="pending"&&t.jsx("button",{onClick:()=>h(y._id,"in_progress"),style:{background:"#F59E0B",color:"#fff"},className:"px-3 py-1 rounded-md text-xs font-semibold hover:opacity-80 transition",children:"Start Progress"}),t.jsx("button",{onClick:()=>h(y._id,"resolved"),style:{background:"#10B981",color:"#fff"},className:"px-3 py-1 rounded-md text-xs font-semibold hover:opacity-80 transition",children:"Mark Resolved"})]})})]},y._id)})})]}),t.jsx(hr,{})]})}function S4(){const{theme:e,isDarkMode:a}=ne();Nt().pathname.startsWith("/treasury");const[s,n]=p.useState({maxTransactionAmount:1e4,minCashInAmount:50,enableNotifications:!0,enableEmailAlerts:!1,autoApproveTransactions:!1,sessionTimeout:30}),l=(u,c)=>{n(x=>({...x,[u]:c}))},o=()=>{W.success("Settings saved successfully")},i=()=>{n({maxTransactionAmount:1e4,minCashInAmount:50,enableNotifications:!0,enableEmailAlerts:!1,autoApproveTransactions:!1,sessionTimeout:30}),W.info("Settings reset to defaults")},d=a?"255, 212, 28":"59, 130, 246";return t.jsxs("div",{style:{minHeight:"100vh",background:e.bg.primary,display:"flex",flexDirection:"column"},children:[t.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3},children:t.jsx($b,{})}),t.jsxs("div",{style:{flex:1,padding:"40px"},children:[t.jsx(Ub,{}),t.jsx("div",{className:"mb-5 p-3 rounded-lg",style:{background:`rgba(${d}, 0.1)`,borderBottom:`2px solid ${e.accent.primary}`},children:t.jsx("h1",{className:"text-2xl font-bold",style:{color:e.accent.primary},children:" Configuration"})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-5 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${d}, 0.2)`},children:[t.jsx("h2",{className:"text-lg font-bold mb-4",style:{color:e.text.primary},children:" Transaction Settings"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:e.text.secondary},children:"Maximum Transaction Amount ()"}),t.jsx("input",{type:"number",value:s.maxTransactionAmount,onChange:u=>l("maxTransactionAmount",parseInt(u.target.value)),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${d}, 0.3)`},className:"w-full px-3 py-2 rounded-md outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:e.text.secondary},children:"Minimum Cash-In Amount ()"}),t.jsx("input",{type:"number",value:s.minCashInAmount,onChange:u=>l("minCashInAmount",parseInt(u.target.value)),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${d}, 0.3)`},className:"w-full px-3 py-2 rounded-md outline-none"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"checkbox",id:"autoApprove",checked:s.autoApproveTransactions,onChange:u=>l("autoApproveTransactions",u.target.checked),style:{accentColor:e.accent.primary}}),t.jsx("label",{htmlFor:"autoApprove",className:"text-sm",style:{color:e.text.primary},children:"Auto-approve transactions under 500"})]})]})]}),t.jsxs("div",{className:"p-5 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${d}, 0.2)`},children:[t.jsx("h2",{className:"text-lg font-bold mb-4",style:{color:e.text.primary},children:" Notification Settings"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"checkbox",id:"enableNotifications",checked:s.enableNotifications,onChange:u=>l("enableNotifications",u.target.checked),style:{accentColor:e.accent.primary}}),t.jsx("label",{htmlFor:"enableNotifications",className:"text-sm",style:{color:e.text.primary},children:"Enable push notifications"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"checkbox",id:"enableEmailAlerts",checked:s.enableEmailAlerts,onChange:u=>l("enableEmailAlerts",u.target.checked),style:{accentColor:e.accent.primary}}),t.jsx("label",{htmlFor:"enableEmailAlerts",className:"text-sm",style:{color:e.text.primary},children:"Enable email alerts for large transactions"})]})]})]}),t.jsxs("div",{className:"p-5 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${d}, 0.2)`},children:[t.jsx("h2",{className:"text-lg font-bold mb-4",style:{color:e.text.primary},children:" Security Settings"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:e.text.secondary},children:"Session Timeout (minutes)"}),t.jsxs("select",{value:s.sessionTimeout,onChange:u=>l("sessionTimeout",parseInt(u.target.value)),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${d}, 0.3)`},className:"w-full px-3 py-2 rounded-md outline-none",children:[t.jsx("option",{value:15,children:"15 minutes"}),t.jsx("option",{value:30,children:"30 minutes"}),t.jsx("option",{value:60,children:"1 hour"}),t.jsx("option",{value:120,children:"2 hours"})]})]})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:o,style:{background:e.accent.primary,color:e.bg.primary},className:"flex-1 py-3 rounded-md font-semibold hover:opacity-80 transition",children:" Save Changes"}),t.jsx("button",{onClick:i,style:{background:e.bg.secondary,color:e.accent.primary,border:`1px solid ${e.accent.primary}`},className:"px-6 py-3 rounded-md font-semibold hover:opacity-80 transition",children:" Reset to Defaults"})]})]}),t.jsx(hr,{})]})}function w4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState(null),[n,l]=p.useState(0),[o,i]=p.useState(!1),[d,u]=p.useState([]),[c,x]=p.useState([]),[m,h]=p.useState(!0),[v,S]=p.useState("today"),f=p.useRef(null),[y,b]=p.useState(!1),[g,j]=p.useState(!1),C=D=>{var Y,_;const I=D.transactionType||D.type;if(D.status==="Refunded"){if(D.shuttleId){const V=D.plateNumber||((Y=D.shuttle)==null?void 0:Y.plateNumber);return V?`Refund from NU Shuttle Service (${V})`:"Refund from NU Shuttle Service"}return D.merchantName||D.businessName?`Refund from ${D.businessName||D.merchantName||"Merchant"}`:"Refund from Treasury Office"}if(I==="debit"){if(D.shuttleId){const R=D.plateNumber||((_=D.shuttle)==null?void 0:_.plateNumber);return R?`Payment to NU Shuttle Service (${R})`:"Payment to NU Shuttle Service"}return`Payment to ${D.businessName||D.merchantName||D.description||"Merchant"}`}return I==="credit"?"Cash-In":D.description||"Transaction"},T=async(D=!1)=>{try{D||h(!0);const I=await Z.get("/user/balance");(I==null?void 0:I.balance)!==void 0&&l(I.balance),(I!=null&&I.user||(I==null?void 0:I.isActive)!==void 0)&&s(Y=>{var _;return{...Y,isActive:((_=I.user)==null?void 0:_.isActive)??I.isActive??(Y==null?void 0:Y.isActive)}});const z=await Z.get("/user/transactions?limit=100");z!=null&&z.transactions&&(x(z.transactions),E(z.transactions,v))}catch{console.error("Failed to load data")}finally{D||h(!1)}},E=(D,I)=>{const z=new Date,Y=new Date(z.getFullYear(),z.getMonth(),z.getDate()),_=new Date(Y);_.setDate(_.getDate()-_.getDay());const V=new Date(z.getFullYear(),z.getMonth(),1);let R=D;I==="today"?R=D.filter(B=>new Date(B.createdAt||B.date)>=Y):I==="week"?R=D.filter(B=>new Date(B.createdAt||B.date)>=_):I==="month"&&(R=D.filter(B=>new Date(B.createdAt||B.date)>=V)),u(R)};return p.useEffect(()=>{const D=localStorage.getItem("userData");if(D&&D!=="undefined"&&D!=="null")try{s(JSON.parse(D))}catch{console.error("Error parsing userData")}return T(),f.current=setInterval(()=>T(!0),1e4),()=>{f.current&&clearInterval(f.current)}},[]),p.useEffect(()=>{E(c,v)},[v,c]),m?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading..."]}):t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col lg:flex-row gap-5",children:[t.jsxs("div",{className:"w-full lg:w-[500px] flex flex-col gap-5 flex-shrink-0",children:[t.jsxs("div",{style:{background:a?"linear-gradient(135deg, rgba(255,212,28,0.08) 0%, rgba(24,29,64,1) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.08) 0%, rgba(255,255,255,1) 100%)",borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",boxShadow:a?"0 8px 32px rgba(255,212,28,0.15)":"0 8px 32px rgba(59,130,246,0.15)"},className:"p-6 rounded-2xl border-2 relative overflow-hidden",children:[t.jsx("div",{style:{position:"absolute",top:"-20px",right:"-20px",width:"120px",height:"120px",background:a?"radial-gradient(circle, rgba(255,212,28,0.15) 0%, transparent 70%)":"radial-gradient(circle, rgba(59,130,246,0.1) 0%, transparent 70%)",borderRadius:"50%"}}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{style:{color:e.accent.primary},className:"text-xs font-bold uppercase tracking-wider flex items-center gap-2",children:[t.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:(r==null?void 0:r.isActive)!==!1?"#10B981":"#EF4444",boxShadow:(r==null?void 0:r.isActive)!==!1?"0 0 8px rgba(16,185,129,0.6)":"0 0 8px rgba(239,68,68,0.6)"}}),"NUCash Balance"]}),t.jsx("button",{onClick:()=>i(!o),style:{color:e.text.secondary,background:a?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",border:`1px solid ${a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`,position:"relative",zIndex:20},className:"p-2.5 rounded-xl hover:opacity-80 transition",children:o?t.jsx(Ql,{className:"w-5 h-5"}):t.jsx(Zl,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{style:{color:o?"#10B981":e.text.tertiary,fontFamily:"system-ui, -apple-system, sans-serif"},className:"text-4xl font-extrabold mb-4 tracking-tight",children:o?`${n.toLocaleString("en-PH",{minimumFractionDigits:2})}`:" ."}),t.jsx("div",{className:"flex items-center justify-between"})]})]}),t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("button",{onClick:()=>b(!0),style:{background:"linear-gradient(135deg, rgba(245,158,11,0.15) 0%, rgba(245,158,11,0.05) 100%)",borderColor:"rgba(245,158,11,0.3)"},className:"p-4 rounded-xl border flex items-center gap-3 transition-all hover:scale-[1.02] hover:shadow-md text-left",children:[t.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-xl",style:{background:"rgba(245,158,11,0.2)"},children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{style:{color:"#F59E0B"},className:"font-bold text-sm",children:"Report a Concern"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs",children:"Get help with issues"})]}),t.jsx(Ro,{style:{color:e.text.tertiary},className:"w-5 h-5"})]}),t.jsxs("button",{onClick:()=>j(!0),style:{background:"linear-gradient(135deg, rgba(59,130,246,0.15) 0%, rgba(59,130,246,0.05) 100%)",borderColor:"rgba(59,130,246,0.3)"},className:"p-4 rounded-xl border flex items-center gap-3 transition-all hover:scale-[1.02] hover:shadow-md text-left",children:[t.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-xl",style:{background:"rgba(59,130,246,0.2)"},children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{style:{color:"#3B82F6"},className:"font-bold text-sm",children:"Share Feedback"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs",children:"Rate your experience"})]}),t.jsx(Ro,{style:{color:e.text.tertiary},className:"w-5 h-5"})]})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"w-full lg:flex-1 lg:max-w-[1000px] rounded-2xl border overflow-hidden flex flex-col max-h-[450px] lg:max-h-[600px]",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-4 border-b flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3 mb-2",children:[t.jsxs("h3",{style:{color:e.accent.primary},className:"text-base font-bold flex items-center gap-2",children:[t.jsx(gj,{className:"w-4 h-4"})," Recent Transactions"]}),t.jsx("div",{className:"flex rounded-lg overflow-hidden border",style:{borderColor:e.border.primary},children:[{key:"today",label:"Today"},{key:"week",label:"Week"},{key:"month",label:"Month"}].map(D=>t.jsx("button",{onClick:()=>S(D.key),style:{background:v===D.key?e.accent.primary:"transparent",color:v===D.key?a?"#181D40":"#FFFFFF":e.text.secondary},className:"px-2 sm:px-3 py-1.5 text-xs font-semibold transition-all",children:D.label},D.key))})]}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-xs",children:[d.length," transaction",d.length!==1?"s":""," found"]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:d.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-16",children:[t.jsx(li,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{className:"text-sm",children:"No transactions for this period"}),t.jsx("p",{className:"text-xs mt-1",children:"Try selecting a different time range"})]}):t.jsx("div",{className:"divide-y",style:{borderColor:e.border.primary},children:d.map((D,I)=>{const z=D.transactionType||D.type,Y=D.status==="Refunded";return t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-white/5 transition",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:Y?"rgba(59,130,246,0.2)":z==="credit"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)"},className:"w-10 h-10 rounded-full flex items-center justify-center text-lg",children:Y?"":z==="credit"?"":D.shuttleId?"":""}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.primary},className:"font-semibold text-sm",children:C(D)}),t.jsxs("p",{style:{color:e.text.muted},className:"text-xs",children:[D.date||new Date(D.createdAt).toLocaleDateString()," ",D.time||""]})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("p",{style:{color:Y?"#3B82F6":z==="credit"?"#10B981":"#EF4444"},className:"font-bold text-sm",children:[Y||z==="credit"?"+":"-","",Math.abs(D.amount||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})})]},D._id||D.id||I)})})})]}),y&&t.jsx(C4,{onClose:()=>b(!1),theme:e,isDarkMode:a}),g&&t.jsx(k4,{onClose:()=>j(!1),theme:e,isDarkMode:a})]})}function C4({onClose:e,theme:a,isDarkMode:r}){const[s,n]=p.useState(1),[l,o]=p.useState(""),[i,d]=p.useState(""),[u,c]=p.useState([]),[x,m]=p.useState(""),[h,v]=p.useState(""),[S,f]=p.useState(!1),[y,b]=p.useState(!1),g=[{value:"sysad",label:"NUCash System",icon:"",desc:"Technical issues, app problems"},{value:"treasury",label:"Finance",icon:"",desc:"Balance, cash-in, payments"},{value:"merchants",label:"Merchants",icon:"",desc:"Store-related concerns"},{value:"motorpool",label:"Shuttle Service",icon:"",desc:"Transportation concerns"}];p.useEffect(()=>{l==="merchants"&&j()},[l]);const j=async()=>{b(!0);try{const z=await Z.get("/user/merchants");z.success&&c(z.merchants)}catch{console.error("Failed to fetch merchants"),c([])}finally{b(!1)}},C=()=>{s===1&&l?n(l==="merchants"?2:3):s===2&&i?n(3):s===3&&x&&h&&n(4)},T=()=>{s===2?(n(1),d("")):s===3?n(l==="merchants"?2:1):s===4&&n(3)},E=async()=>{f(!0);try{(await Z.post("/user/concerns",{department:l,merchant:l==="merchants"?i:void 0,subject:x,details:h})).success&&n(5)}catch{console.error("Failed to submit concern")}finally{f(!1)}},D=()=>{const z=g.find(Y=>Y.value===l);return z?z.label:""},I={width:"100%",padding:"14px 16px",background:r?"rgba(15,18,39,0.6)":"#F9FAFB",border:`2px solid ${r?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"12px",color:a.text.primary,fontSize:"14px",outline:"none",transition:"all 0.2s ease"};return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),t.jsxs("div",{className:"relative rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden",style:{background:r?"linear-gradient(135deg, #1E2347 0%, #181D40 100%)":"linear-gradient(135deg, #FFFFFF 0%, #F8FAFC 100%)",border:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,boxShadow:r?"0 25px 50px rgba(0,0,0,0.5)":"0 25px 50px rgba(0,0,0,0.15)"},children:[t.jsxs("div",{style:{background:r?"linear-gradient(135deg, rgba(245,158,11,0.2) 0%, rgba(245,158,11,0.05) 100%)":"linear-gradient(135deg, rgba(245,158,11,0.15) 0%, rgba(245,158,11,0.05) 100%)",borderBottom:`2px solid ${r?"rgba(245,158,11,0.3)":"rgba(245,158,11,0.2)"}`},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:"rgba(245,158,11,0.2)"},className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:"#F59E0B"},className:"text-xl font-bold",children:"Report a Concern"}),t.jsx("p",{style:{color:a.text.secondary},className:"text-sm",children:s<5?`Step ${s} of 4`:"Complete"})]})]}),t.jsx("button",{onClick:e,style:{color:a.text.secondary},className:"p-2 hover:opacity-70 transition",children:t.jsx(ft,{className:"w-6 h-6"})})]}),s<5&&t.jsx("div",{style:{background:r?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)"},className:"h-1",children:t.jsx("div",{style:{width:`${s/4*100}%`,background:"#F59E0B",transition:"width 0.3s ease"},className:"h-full"})}),t.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[s===1&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-sm mb-4",children:"Select the department you want to report to:"}),g.map(z=>t.jsxs("button",{onClick:()=>o(z.value),style:{background:l===z.value?r?"rgba(245,158,11,0.2)":"rgba(245,158,11,0.15)":r?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`2px solid ${l===z.value?"#F59E0B":r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"w-full p-4 rounded-xl flex items-center gap-4 transition-all hover:scale-[1.02] text-left",children:[t.jsx("div",{style:{background:"rgba(245,158,11,0.15)"},className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl flex-shrink-0",children:z.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{style:{color:a.text.primary},className:"font-bold",children:z.label}),t.jsx("p",{style:{color:a.text.secondary},className:"text-sm",children:z.desc})]}),l===z.value&&t.jsx("div",{style:{background:"#F59E0B"},className:"w-6 h-6 rounded-full flex items-center justify-center",children:t.jsx(yt,{className:"w-4 h-4 text-white"})})]},z.value))]}),s===2&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-sm mb-4",children:"Select the merchant you want to report:"}),y?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-3",style:{borderColor:"#F59E0B transparent transparent transparent"}}),t.jsx("p",{style:{color:a.text.secondary},children:"Loading merchants..."})]}):u.length===0?t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{style:{color:a.text.secondary},children:"No merchants available"})}):t.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto",children:u.map((z,Y)=>t.jsxs("button",{onClick:()=>d(z.value),style:{background:i===z.value?r?"rgba(245,158,11,0.2)":"rgba(245,158,11,0.15)":r?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`2px solid ${i===z.value?"#F59E0B":r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"w-full p-4 rounded-xl flex items-center gap-4 transition-all hover:scale-[1.01] text-left",children:[t.jsx("div",{style:{background:"rgba(245,158,11,0.15)"},className:"w-10 h-10 rounded-lg flex items-center justify-center text-xl",children:""}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold flex-1",children:z.label}),i===z.value&&t.jsx("div",{style:{background:"#F59E0B"},className:"w-6 h-6 rounded-full flex items-center justify-center",children:t.jsx(yt,{className:"w-4 h-4 text-white"})})]},Y))})]}),s===3&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.primary},className:"block font-semibold mb-2",children:["Subject ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"text",value:x,onChange:z=>m(z.target.value),placeholder:"Brief description of your concern",style:I,onFocus:z=>z.target.style.borderColor="#F59E0B",onBlur:z=>z.target.style.borderColor=r?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.primary},className:"block font-semibold mb-2",children:["Details ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("textarea",{value:h,onChange:z=>v(z.target.value),placeholder:"Please provide more details about your concern...",rows:5,style:{...I,resize:"none"},onFocus:z=>z.target.style.borderColor="#F59E0B",onBlur:z=>z.target.style.borderColor=r?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"})]})]}),s===4&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-sm mb-4",children:"Please review your concern before submitting:"}),t.jsxs("div",{style:{background:r?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.03)",border:`1px solid ${r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"rounded-xl p-5 space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Department"}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold",children:D()})]}),l==="merchants"&&i&&t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Merchant"}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold",children:i})]}),t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Subject"}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold",children:x})]}),t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Details"}),t.jsx("p",{style:{color:a.text.primary},className:"text-sm whitespace-pre-wrap",children:h})]})]})]}),s===5&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-5",children:t.jsx(yt,{className:"w-10 h-10 text-emerald-500"})}),t.jsx("h3",{style:{color:"#10B981"},className:"text-2xl font-bold mb-2",children:"Concern Submitted!"}),t.jsx("p",{style:{color:a.text.secondary},className:"mb-4",children:"Your concern has been received. You can track it in your Concerns tab."}),t.jsx("button",{onClick:e,style:{background:"#F59E0B",color:"#FFFFFF"},className:"px-8 py-3 rounded-xl font-bold text-sm transition-all hover:opacity-90",children:"Done"})]})]}),s<5&&t.jsxs("div",{style:{borderTop:`1px solid ${r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"px-6 py-4 flex gap-3",children:[s>1&&t.jsxs("button",{onClick:T,style:{background:r?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)",color:a.text.primary},className:"flex-1 py-3 rounded-xl font-semibold flex items-center justify-center gap-2 transition-all hover:opacity-80",children:[t.jsx(_b,{className:"w-5 h-5"})," Back"]}),s<4?t.jsxs("button",{onClick:C,disabled:s===1&&!l||s===2&&!i||s===3&&(!x||!h),style:{background:"#F59E0B",color:"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:["Next ",t.jsx(Ro,{className:"w-5 h-5"})]}):t.jsx("button",{onClick:E,disabled:S,style:{background:"#10B981",color:"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50",children:S?"Submitting...":"Submit Concern"})]})]})]})}function k4({onClose:e,theme:a,isDarkMode:r}){const[s,n]=p.useState(1),[l,o]=p.useState(""),[i,d]=p.useState(""),[u,c]=p.useState([]),[x,m]=p.useState(""),[h,v]=p.useState(""),[S,f]=p.useState(0),[y,b]=p.useState(0),[g,j]=p.useState(!1),[C,T]=p.useState(!1),E=[{value:"sysad",label:"NUCash System",icon:"",desc:"App experience feedback"},{value:"treasury",label:"Finance",icon:"",desc:"Service experience"},{value:"merchants",label:"Merchants",icon:"",desc:"Store experience"},{value:"motorpool",label:"Shuttle Service",icon:"",desc:"Transport experience"}];p.useEffect(()=>{l==="merchants"&&D()},[l]);const D=async()=>{T(!0);try{const B=await Z.get("/user/merchants");B.success&&c(B.merchants)}catch{c([])}finally{T(!1)}},I=()=>{s===1&&l?n(l==="merchants"?2:3):s===2&&i?n(3):s===3&&S>0&&n(4)},z=()=>{s===2?(n(1),d("")):s===3?n(l==="merchants"?2:1):s===4&&n(3)},Y=async()=>{j(!0);try{(await Z.post("/user/feedback",{department:l,merchant:l==="merchants"?i:void 0,subject:x||void 0,feedback:h||void 0,rating:S})).success&&n(5)}catch{console.error("Failed to submit feedback")}finally{j(!1)}},_=()=>{const B=E.find(F=>F.value===l);return B?B.label:""},V=()=>["","Poor","Fair","Good","Very Good","Excellent"][S]||"",R={width:"100%",padding:"14px 16px",background:r?"rgba(15,18,39,0.6)":"#F9FAFB",border:"2px solid rgba(59,130,246,0.2)",borderRadius:"12px",color:a.text.primary,fontSize:"14px",outline:"none",transition:"all 0.2s ease"};return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),t.jsxs("div",{style:{background:r?"linear-gradient(135deg, #1E2347 0%, #181D40 100%)":"linear-gradient(135deg, #FFFFFF 0%, #F8FAFC 100%)",border:"2px solid rgba(59,130,246,0.3)",boxShadow:r?"0 25px 50px rgba(0,0,0,0.5)":"0 25px 50px rgba(0,0,0,0.15)"},className:"relative rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden",children:[t.jsxs("div",{style:{background:r?"linear-gradient(135deg, rgba(59,130,246,0.2) 0%, rgba(59,130,246,0.05) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.15) 0%, rgba(59,130,246,0.05) 100%)",borderBottom:`2px solid ${r?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)"}`},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:"rgba(59,130,246,0.2)"},className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:"#3B82F6"},className:"text-xl font-bold",children:"Share Feedback"}),t.jsx("p",{style:{color:a.text.secondary},className:"text-sm",children:s<5?`Step ${s} of 4`:"Complete"})]})]}),t.jsx("button",{onClick:e,style:{color:a.text.secondary},className:"p-2 hover:opacity-70 transition",children:t.jsx(ft,{className:"w-6 h-6"})})]}),s<5&&t.jsx("div",{style:{background:r?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)"},className:"h-1",children:t.jsx("div",{style:{width:`${s/4*100}%`,background:"#3B82F6",transition:"width 0.3s ease"},className:"h-full"})}),t.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[s===1&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-sm mb-4",children:"Select what you want to give feedback about:"}),E.map(B=>t.jsxs("button",{onClick:()=>o(B.value),style:{background:l===B.value?r?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.15)":r?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`2px solid ${l===B.value?"#3B82F6":r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"w-full p-4 rounded-xl flex items-center gap-4 transition-all hover:scale-[1.02] text-left",children:[t.jsx("div",{style:{background:"rgba(59,130,246,0.15)"},className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl flex-shrink-0",children:B.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{style:{color:a.text.primary},className:"font-bold",children:B.label}),t.jsx("p",{style:{color:a.text.secondary},className:"text-sm",children:B.desc})]}),l===B.value&&t.jsx("div",{style:{background:"#3B82F6"},className:"w-6 h-6 rounded-full flex items-center justify-center",children:t.jsx(yt,{className:"w-4 h-4 text-white"})})]},B.value))]}),s===2&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-sm mb-4",children:"Select the merchant:"}),C?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-3",style:{borderColor:"#3B82F6 transparent transparent transparent"}}),t.jsx("p",{style:{color:a.text.secondary},children:"Loading merchants..."})]}):u.length===0?t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{style:{color:a.text.secondary},children:"No merchants available"})}):t.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto",children:u.map((B,F)=>t.jsxs("button",{onClick:()=>d(B.value),style:{background:i===B.value?r?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.15)":r?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`2px solid ${i===B.value?"#3B82F6":r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"w-full p-4 rounded-xl flex items-center gap-4 transition-all hover:scale-[1.01] text-left",children:[t.jsx("div",{style:{background:"rgba(59,130,246,0.15)"},className:"w-10 h-10 rounded-lg flex items-center justify-center text-xl",children:""}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold flex-1",children:B.label}),i===B.value&&t.jsx("div",{style:{background:"#3B82F6"},className:"w-6 h-6 rounded-full flex items-center justify-center",children:t.jsx(yt,{className:"w-4 h-4 text-white"})})]},F))})]}),s===3&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.primary},className:"block font-semibold mb-3",children:["Your Rating ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("div",{className:"flex justify-center gap-2 mb-2",children:[1,2,3,4,5].map(B=>t.jsx("button",{type:"button",onClick:()=>f(B),onMouseEnter:()=>b(B),onMouseLeave:()=>b(0),className:"transition-transform hover:scale-110",children:t.jsx("svg",{className:"w-12 h-12",fill:B<=(y||S)?"#FFD41C":"none",stroke:"#FFD41C",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},B))}),S>0&&t.jsx("p",{style:{color:"#FFD41C"},className:"text-center font-semibold",children:V()})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.primary},className:"block font-semibold mb-2",children:["Subject ",t.jsx("span",{style:{color:a.text.tertiary},className:"font-normal text-sm",children:"(Optional)"})]}),t.jsx("input",{type:"text",value:x,onChange:B=>m(B.target.value),placeholder:"What's this about?",style:R,onFocus:B=>B.target.style.borderColor="#3B82F6",onBlur:B=>B.target.style.borderColor="rgba(59,130,246,0.2)"})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.primary},className:"block font-semibold mb-2",children:["Feedback ",t.jsx("span",{style:{color:a.text.tertiary},className:"font-normal text-sm",children:"(Optional)"})]}),t.jsx("textarea",{value:h,onChange:B=>v(B.target.value),placeholder:"Share your thoughts...",rows:4,style:{...R,resize:"none"},onFocus:B=>B.target.style.borderColor="#3B82F6",onBlur:B=>B.target.style.borderColor="rgba(59,130,246,0.2)"})]})]}),s===4&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-sm mb-4",children:"Please review your feedback before submitting:"}),t.jsxs("div",{style:{background:r?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.03)",border:`1px solid ${r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"rounded-xl p-5 space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Department"}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold",children:_()})]}),l==="merchants"&&i&&t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Merchant"}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold",children:i})]}),t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Rating"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex",children:[1,2,3,4,5].map(B=>t.jsx("svg",{className:"w-5 h-5",fill:B<=S?"#FFD41C":"none",stroke:"#FFD41C",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})},B))}),t.jsx("span",{style:{color:"#FFD41C"},className:"font-semibold",children:V()})]})]}),x&&t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Subject"}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold",children:x})]}),h&&t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Feedback"}),t.jsx("p",{style:{color:a.text.primary},className:"text-sm whitespace-pre-wrap",children:h})]})]})]}),s===5&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-5",children:t.jsx(yt,{className:"w-10 h-10 text-emerald-500"})}),t.jsx("h3",{style:{color:"#10B981"},className:"text-2xl font-bold mb-2",children:"Feedback Submitted!"}),t.jsx("p",{style:{color:a.text.secondary},className:"mb-4",children:"Thank you for your feedback! You can track it in your Concerns tab."}),t.jsx("button",{onClick:e,style:{background:"#3B82F6",color:"#FFFFFF"},className:"px-8 py-3 rounded-xl font-bold text-sm transition-all hover:opacity-90",children:"Done"})]})]}),s<5&&t.jsxs("div",{style:{borderTop:`1px solid ${r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"px-6 py-4 flex gap-3",children:[s>1&&t.jsxs("button",{onClick:z,style:{background:r?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)",color:a.text.primary},className:"flex-1 py-3 rounded-xl font-semibold flex items-center justify-center gap-2 transition-all hover:opacity-80",children:[t.jsx(_b,{className:"w-5 h-5"})," Back"]}),s<4?t.jsxs("button",{onClick:I,disabled:s===1&&!l||s===2&&!i||s===3&&S===0,style:{background:"#3B82F6",color:"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:["Next ",t.jsx(Ro,{className:"w-5 h-5"})]}):t.jsx("button",{onClick:Y,disabled:g,style:{background:"#10B981",color:"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50",children:g?"Submitting...":"Submit Feedback"})]})]})]})}function F4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState("all"),[d,u]=p.useState(""),[c,x]=p.useState(""),[m,h]=p.useState(""),[v,S]=p.useState({page:1,limit:20,total:0,totalPages:1}),[f,y]=p.useState(!1),[b,g]=p.useState(!1),[j,C]=p.useState(!1),[T,E]=p.useState(null),D=p.useRef(null),I=R=>{var $,N;const B=R.transactionType||R.type;if(R.status==="Refunded"){if(R.shuttleId){const w=R.plateNumber||(($=R.shuttle)==null?void 0:$.plateNumber);return w?`Refund: NU Shuttle Service (${w})`:"Refund: NU Shuttle Service"}return R.merchantName||R.businessName?`Refund: ${R.businessName||R.merchantName||"Merchant"}`:"Refund: Treasury Office"}if(B==="debit"){if(R.shuttleId){const k=R.plateNumber||((N=R.shuttle)==null?void 0:N.plateNumber);return k?`Payment to NU Shuttle Service (${k})`:"Payment to NU Shuttle Service"}return`Payment to ${R.businessName||R.merchantName||R.description||"Merchant"}`}return B==="credit"?"Cash-In":R.description||"Transaction"},z=async(R=!1)=>{try{R||l(!0);const B=new URLSearchParams;B.append("page",v.page),B.append("limit",v.limit),o!=="all"&&B.append("type",o),d&&B.append("search",d),c&&B.append("startDate",c),m&&B.append("endDate",m);const F=await Z.get(`/user/transactions?${B}`);F!=null&&F.transactions&&(s(F.transactions),F.pagination&&S($=>({...$,total:F.pagination.total||0,totalPages:F.pagination.totalPages||1})))}catch{R||W.error("Failed to load transactions")}finally{R||l(!1)}};p.useEffect(()=>(z(),D.current=setInterval(()=>z(!0),3e4),()=>{D.current&&clearInterval(D.current)}),[o,v.page]);const Y=R=>{R>=1&&R<=v.totalPages&&S(B=>({...B,page:R}))},_=async()=>{g(!0);try{await Z.post("/user/request-transaction-history",{startDate:c||void 0,endDate:m||void 0,type:o!=="all"?o:void 0}),C(!0),setTimeout(()=>{y(!1),C(!1)},2e3)}catch{W.error("Failed to request transaction history. Please try again.")}finally{g(!1)}},V=r.filter(R=>{var F,$,N,w,k,A,O;if(o!=="all"){const q=R.transactionType||R.type;if((R.status==="Refunded"?"credit":q)!==o)return!1}if(c||m){const q=new Date(R.createdAt||R.date);if(c){const U=new Date(c);if(U.setHours(0,0,0,0),q<U)return!1}if(m){const U=new Date(m);if(U.setHours(23,59,59,999),q>U)return!1}}if(!d)return!0;const B=d.toLowerCase();return((F=R.transactionId)==null?void 0:F.toLowerCase().includes(B))||(($=R._id)==null?void 0:$.toLowerCase().includes(B))||((N=R.description)==null?void 0:N.toLowerCase().includes(B))||((k=(w=R.merchant)==null?void 0:w.name)==null?void 0:k.toLowerCase().includes(B))||((A=R.merchantName)==null?void 0:A.toLowerCase().includes(B))||((O=R.businessName)==null?void 0:O.toLowerCase().includes(B))});return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading transactions..."]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("div",{className:"mb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Transaction History"]}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:["Showing ",V.length," of ",v.total||r.length," transactions  Auto-refreshes every 30s"]})]}),t.jsxs("div",{className:"flex gap-3 items-end flex-wrap",children:[t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-[11px] font-bold uppercase tracking-wide mb-2",children:"Search"}),t.jsxs("div",{className:"relative",children:[t.jsx(vr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",style:{color:e.text.muted}}),t.jsx("input",{type:"text",placeholder:"Search transactions...",value:d,onChange:R=>{u(R.target.value),S(B=>({...B,page:1}))},style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"w-full pl-10 pr-4 py-2.5 rounded-xl border text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/30"})]})]}),t.jsxs("div",{className:"min-w-[140px]",children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-[11px] font-bold uppercase tracking-wide mb-2",children:"Type"}),t.jsxs("select",{value:o,onChange:R=>{i(R.target.value),S(B=>({...B,page:1}))},style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/30 cursor-pointer",children:[t.jsx("option",{value:"all",children:"All Types"}),t.jsx("option",{value:"credit",children:"Credit"}),t.jsx("option",{value:"debit",children:"Debit"})]})]}),t.jsxs("div",{className:"flex gap-2 items-end",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"hidden sm:block text-[11px] font-bold uppercase tracking-wide mb-2",children:"From"}),t.jsx("input",{type:"date",value:c,onChange:R=>x(R.target.value),style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"px-3 py-2.5 rounded-xl border text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/30"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"hidden sm:block text-[11px] font-bold uppercase tracking-wide mb-2",children:"To"}),t.jsx("input",{type:"date",value:m,onChange:R=>h(R.target.value),style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"px-3 py-2.5 rounded-xl border text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/30"})]})]}),t.jsxs("button",{onClick:()=>y(!0),style:{background:a?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.15)",color:"#3B82F6",borderColor:"rgba(59,130,246,0.3)"},className:"flex items-center gap-2 px-5 py-2.5 rounded-xl border-2 font-semibold text-sm hover:opacity-80 transition whitespace-nowrap",children:[t.jsx(Tn,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Request History"})]})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:V.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{children:"No transactions found"}),t.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your filters"})]}):t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:[t.jsx("div",{className:"max-h-[500px] lg:max-h-[70vh] overflow-y-auto",children:t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"sticky top-0 z-10 backdrop-blur-md",style:{background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},children:[t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left pl-4 sm:pl-8 md:pl-12 lg:pl-20 pr-2 sm:pr-4 py-3 sm:py-4 text-[11px] font-extrabold uppercase border-b-2 w-[25%]",children:"Date"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left px-2 sm:p-4 py-3 sm:py-4 text-[11px] font-extrabold uppercase border-b-2 w-[25%]",children:"Description"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left px-2 sm:p-4 py-3 sm:py-4 text-[11px] font-extrabold uppercase border-b-2 w-[25%]",children:"Amount"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"hidden lg:table-cell text-left p-4 text-[11px] font-extrabold uppercase border-b-2 w-[25%]",children:"Transaction ID"})]})}),t.jsx("tbody",{children:V.map((R,B)=>{const F=R.transactionType||R.type,$=I(R),N=R.status==="Refunded";return t.jsxs("tr",{onClick:()=>E(R),className:"hover:bg-white/5 transition cursor-pointer",style:{borderBottom:`1px solid ${e.border.primary}`},children:[t.jsxs("td",{style:{color:e.text.primary},className:"pl-4 sm:pl-8 md:pl-12 lg:pl-20 pr-2 sm:pr-4 py-3 sm:py-4 w-[15%]",children:[t.jsx("div",{className:"font-semibold text-xs sm:text-sm",children:R.date||new Date(R.createdAt).toLocaleDateString()}),t.jsx("div",{style:{color:e.text.muted},className:"text-xs hidden lg:block",children:R.time||new Date(R.createdAt).toLocaleTimeString()})]}),t.jsx("td",{style:{color:e.text.primary},className:"px-2 sm:p-4 py-3 sm:py-4 w-[35%]",children:t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[t.jsx("div",{style:{background:N?"rgba(59,130,246,0.2)":F==="credit"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)"},className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs sm:text-sm flex-shrink-0",children:N?"":F==="credit"?"":R.shuttleId?"":""}),t.jsx("div",{className:"min-w-0 flex-1",children:t.jsxs("div",{className:"font-semibold text-xs sm:text-sm truncate lg:whitespace-normal",title:$,children:[t.jsx("span",{className:"lg:hidden",children:$.length>20?`${$.substring(0,20)}...`:$}),t.jsx("span",{className:"hidden lg:inline",children:$})]})})]})}),t.jsx("td",{className:"px-2 sm:p-4 py-3 sm:py-4 w-[20%]",children:t.jsxs("span",{style:{color:N?"#3B82F6":F==="credit"?"#10B981":"#EF4444"},className:"font-bold text-xs sm:text-base whitespace-nowrap",children:[N||F==="credit"?"+":"-","",Math.abs(R.amount||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})}),t.jsx("td",{style:{color:e.text.primary},className:"hidden lg:table-cell p-4 w-[25%]",children:t.jsx("code",{style:{background:a?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)",padding:"4px 8px",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace"},children:R.transactionId||R.id||"N/A"})})]},R._id||R.id||B)})})]})}),v.totalPages>1&&t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-4 border-t flex items-center justify-between flex-wrap gap-3",children:[t.jsxs("p",{style:{color:e.text.muted},className:"text-xs sm:text-sm",children:["Page ",v.page," of ",v.totalPages," (",v.total," total)"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>Y(v.page-1),disabled:v.page===1,style:{background:v.page===1?"rgba(100,100,100,0.2)":e.bg.tertiary,color:v.page===1?e.text.muted:e.accent.primary,borderColor:v.page===1?"transparent":e.accent.primary},className:"px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm border-2 font-semibold disabled:cursor-not-allowed transition hover:opacity-80",children:[" ",t.jsx("span",{className:"hidden sm:inline",children:"Previous"}),t.jsx("span",{className:"sm:hidden",children:"Prev"})]}),t.jsxs("button",{onClick:()=>Y(v.page+1),disabled:v.page===v.totalPages,style:{background:v.page===v.totalPages?"rgba(100,100,100,0.2)":e.bg.tertiary,color:v.page===v.totalPages?e.text.muted:e.accent.primary,borderColor:v.page===v.totalPages?"transparent":e.accent.primary},className:"px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm border-2 font-semibold disabled:cursor-not-allowed transition hover:opacity-80",children:[t.jsx("span",{className:"hidden sm:inline",children:"Next"}),t.jsx("span",{className:"sm:hidden",children:"Next"})," "]})]})]})]})}),T&&t.jsx(T4,{transaction:T,onClose:()=>E(null),theme:e,isDarkMode:a,getTransactionDescription:I}),f&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0,0,0,0.8)",backdropFilter:"blur(8px)"},onClick:()=>!b&&y(!1),children:t.jsx("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"w-full max-w-md rounded-2xl border overflow-hidden",onClick:R=>R.stopPropagation(),children:j?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Ve,{className:"w-12 h-12 text-emerald-500"})}),t.jsx("h3",{className:"text-2xl font-bold text-emerald-500 mb-2",children:"Request Sent!"}),t.jsx("p",{style:{color:e.text.secondary},children:"Your transaction history will be sent to your email shortly."})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{background:"rgba(59,130,246,0.15)",borderColor:"rgba(59,130,246,0.3)"},className:"p-5 border-b",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Tn,{className:"w-6 h-6 text-blue-500"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-blue-500",children:"Request Transaction History"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:"Get a formatted copy via email"})]})]}),t.jsx("button",{onClick:()=>y(!1),disabled:b,style:{color:e.text.secondary},className:"hover:opacity-70 disabled:opacity-50",children:t.jsx(ft,{className:"w-5 h-5"})})]})}),t.jsxs("div",{className:"p-6 space-y-5",children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:"We'll send a formatted PDF of your transaction history to your registered email address."}),t.jsxs("div",{style:{background:e.bg.tertiary,borderColor:e.border.primary},className:"p-4 rounded-xl border",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx(li,{className:"w-5 h-5",style:{color:e.accent.primary}}),t.jsx("span",{style:{color:e.text.primary},className:"font-semibold",children:"Date Range (Optional)"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-bold uppercase mb-1",children:"From"}),t.jsx("input",{type:"date",value:c,onChange:R=>x(R.target.value),style:{background:e.bg.secondary,color:e.text.primary,borderColor:e.border.primary},className:"w-full px-3 py-2 rounded-lg border text-sm focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-bold uppercase mb-1",children:"To"}),t.jsx("input",{type:"date",value:m,onChange:R=>h(R.target.value),style:{background:e.bg.secondary,color:e.text.primary,borderColor:e.border.primary},className:"w-full px-3 py-2 rounded-lg border text-sm focus:outline-none"})]})]}),t.jsx("p",{style:{color:e.text.muted},className:"text-xs mt-2",children:"Leave empty to get all transactions"})]}),t.jsx("div",{style:{background:"rgba(59,130,246,0.1)",borderColor:"rgba(59,130,246,0.2)"},className:"p-4 rounded-xl border",children:t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:[t.jsx("strong",{style:{color:"#3B82F6"},children:"Note:"})," The email will be sent to your registered email address and may take a few minutes to arrive. Check your spam folder if you don't see it."]})})]}),t.jsxs("div",{className:"flex gap-3 p-4 border-t",style:{borderColor:e.border.primary},children:[t.jsx("button",{onClick:()=>y(!1),disabled:b,style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"flex-1 py-3 rounded-xl font-semibold border hover:opacity-80 transition disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:_,disabled:b,className:"flex-1 py-3 rounded-xl font-bold bg-blue-500 text-white hover:opacity-90 transition disabled:opacity-50 flex items-center justify-center gap-2",children:b?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Tn,{className:"w-4 h-4"}),"Send to Email"]})})]})]})})})]})}function T4({transaction:e,onClose:a,theme:r,isDarkMode:s,getTransactionDescription:n}){const l=e.transactionType||e.type,o=e.status==="Refunded";return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 lg:hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:a}),t.jsxs("div",{style:{background:s?"linear-gradient(135deg, #1E2347 0%, #181D40 100%)":"linear-gradient(135deg, #FFFFFF 0%, #F8FAFC 100%)",border:`2px solid ${s?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,boxShadow:s?"0 25px 50px rgba(0,0,0,0.5)":"0 25px 50px rgba(0,0,0,0.15)"},className:"relative rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden",onClick:i=>i.stopPropagation(),children:[t.jsxs("div",{style:{background:s?`linear-gradient(135deg, ${o?"rgba(59,130,246,0.2)":l==="credit"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)"} 0%, ${o?"rgba(59,130,246,0.05)":l==="credit"?"rgba(16,185,129,0.05)":"rgba(239,68,68,0.05)"} 100%)`:`linear-gradient(135deg, ${o?"rgba(59,130,246,0.15)":l==="credit"?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)"} 0%, ${o?"rgba(59,130,246,0.05)":l==="credit"?"rgba(16,185,129,0.05)":"rgba(239,68,68,0.05)"} 100%)`,borderBottom:`2px solid ${o?"rgba(59,130,246,0.3)":l==="credit"?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"}`},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:o?"rgba(59,130,246,0.2)":l==="credit"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)"},className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl",children:o?"":l==="credit"?"":e.shuttleId?"":""}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:o?"#3B82F6":l==="credit"?"#10B981":"#EF4444"},className:"text-xl font-bold",children:"Transaction Details"}),t.jsx("p",{style:{color:r.text.secondary},className:"text-sm",children:e.date||new Date(e.createdAt).toLocaleDateString()})]})]}),t.jsx("button",{onClick:a,style:{color:r.text.secondary},className:"p-2 hover:opacity-70 transition",children:t.jsx(ft,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[t.jsxs("div",{style:{background:s?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.03)",border:`1px solid ${s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"rounded-xl p-5 mb-5 text-center",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs uppercase tracking-wide mb-2 font-bold",children:"Amount"}),t.jsxs("p",{style:{color:o?"#3B82F6":l==="credit"?"#10B981":"#EF4444"},className:"text-4xl font-bold",children:[o||l==="credit"?"+":"-","",Math.abs(e.amount||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs uppercase tracking-wide mb-1 font-bold",children:"Description"}),t.jsx("p",{style:{color:r.text.primary},className:"font-semibold",children:n(e)})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs uppercase tracking-wide mb-1 font-bold",children:"Date"}),t.jsx("p",{style:{color:r.text.primary},className:"font-semibold",children:e.date||new Date(e.createdAt).toLocaleDateString()})]}),t.jsxs("div",{children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs uppercase tracking-wide mb-1 font-bold",children:"Time"}),t.jsx("p",{style:{color:r.text.primary},className:"font-semibold",children:e.time||new Date(e.createdAt).toLocaleTimeString()})]})]}),t.jsxs("div",{children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs uppercase tracking-wide mb-2 font-bold",children:"Transaction ID"}),t.jsx("code",{style:{background:s?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)",color:r.text.primary,padding:"8px 12px",borderRadius:"8px",fontSize:"12px",fontFamily:"monospace",display:"block",wordBreak:"break-all"},children:e.transactionId||e.id||"N/A"})]})]})]}),t.jsx("div",{style:{borderTop:`1px solid ${s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"px-6 py-4",children:t.jsx("button",{onClick:a,style:{background:o?"#3B82F6":l==="credit"?"#10B981":"#EF4444",color:"#FFFFFF"},className:"w-full py-3 rounded-xl font-bold transition-all hover:opacity-90",children:"Close"})})]})]})}function E4(){var D,I,z,Y;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState("all"),[d,u]=p.useState(""),[c,x]=p.useState(null),[m,h]=p.useState("details"),v=p.useRef(null),S=async(_=!1)=>{try{_||l(!0);const V=await Z.get("/user/concerns/my-concerns");V!=null&&V.concerns&&s(V.concerns)}catch{_||W.error("Failed to load concerns")}finally{_||l(!1)}};p.useEffect(()=>(S(),v.current=setInterval(()=>S(!0),6e4),()=>{v.current&&clearInterval(v.current)}),[]);const f=r.filter(_=>{var B,F,$;const V=o==="all"||_.status===o,R=!d||((B=_.subject)==null?void 0:B.toLowerCase().includes(d.toLowerCase()))||((F=_.concernId)==null?void 0:F.toLowerCase().includes(d.toLowerCase()))||(($=_.feedbackText)==null?void 0:$.toLowerCase().includes(d.toLowerCase()));return V&&R}),y=r.filter(_=>_.status==="pending").length,b=r.filter(_=>_.status==="in_progress").length,g=r.filter(_=>_.status==="resolved").length,j=_=>{switch(_){case"pending":return"#FBBF24";case"in_progress":return"#3B82F6";case"resolved":return"#10B981";default:return e.text.secondary}},C=_=>{switch(_){case"pending":return t.jsx(oa,{className:"w-4 h-4"});case"in_progress":return t.jsx(Oe,{className:"w-4 h-4 animate-spin"});case"resolved":return t.jsx(Ve,{className:"w-4 h-4"});default:return t.jsx(vt,{className:"w-4 h-4"})}},T=_=>_?new Date(_).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",E=_=>{x(_),h("details")};return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading your concerns..."]}):t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," My Concerns"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Track the status of your submitted concerns and feedback"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-5",children:[t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(251, 191, 36, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(251, 191, 36, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(oa,{className:"w-6 h-6 text-yellow-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Pending"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-500",children:y})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(59, 130, 246, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(59, 130, 246, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(Oe,{className:"w-6 h-6 text-blue-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"In Progress"}),t.jsx("p",{className:"text-2xl font-bold text-blue-500",children:b})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(16, 185, 129, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(16, 185, 129, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(Ve,{className:"w-6 h-6 text-emerald-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Resolved"}),t.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:g})]})]})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.8)":e.bg.card,borderColor:e.accent.primary},className:"rounded-xl border-2 p-3 mb-5 flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(vr,{style:{color:e.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search concerns...",value:d,onChange:_=>u(_.target.value),style:{background:"transparent",color:e.text.primary,borderColor:"transparent"},className:"w-full pl-10 pr-4 py-2.5 rounded-lg text-sm focus:outline-none placeholder:text-gray-500"})]}),t.jsx("div",{style:{background:e.border.primary},className:"hidden sm:block w-px h-8"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","pending","in_progress","resolved"].map(_=>t.jsx("button",{onClick:()=>i(_),style:{background:o===_?e.accent.primary:a?"rgba(30,35,71,0.8)":"#F9FAFB",color:o===_?a?"#181D40":"#FFFFFF":e.text.primary,borderColor:e.border.primary},className:"px-3 py-2 rounded-lg font-semibold text-xs border hover:opacity-80 transition",children:_==="in_progress"?"In Progress":_.charAt(0).toUpperCase()+_.slice(1)},_))})]}),t.jsx("div",{className:"mb-4",children:t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:["Showing ",t.jsx("span",{style:{color:e.accent.primary},className:"font-bold",children:f.length})," of ",r.length," concerns"]})}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:f.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{className:"font-semibold",children:"No concerns found"}),t.jsx("p",{className:"text-sm mt-2",children:r.length===0?"You haven't submitted any concerns yet":"Try adjusting your filters"})]}):t.jsx("div",{className:"divide-y",style:{borderColor:e.border.primary},children:f.map(_=>{var V,R;return t.jsxs("div",{className:"p-4 flex items-center justify-between cursor-pointer transition hover:bg-white/5",onClick:()=>E(_),children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[t.jsxs("span",{style:{background:`${j(_.status)}20`,color:j(_.status)},className:"px-2 py-1 rounded text-xs font-semibold capitalize flex items-center gap-1",children:[C(_.status),(V=_.status)==null?void 0:V.replace("_"," ")]}),t.jsx("span",{style:{color:e.text.primary},className:"font-semibold",children:_.subject||((R=_.selectedConcerns)==null?void 0:R.join(", "))||"No subject"})]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm line-clamp-1",children:_.feedbackText||_.otherConcern||"No details"}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 flex-wrap",children:[t.jsxs("span",{style:{color:e.text.muted},className:"text-xs",children:["To: ",_.reportTo]}),t.jsx("span",{style:{color:e.text.muted},className:"text-xs",children:T(_.submittedAt||_.createdAt)}),_.concernId&&t.jsxs("span",{style:{color:e.text.muted},className:"text-xs font-mono",children:["#",_.concernId]})]})]}),t.jsx("span",{style:{color:e.text.secondary},className:"text-xl ml-4",children:""})]},_._id)})})})}),c&&t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:()=>x(null),children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-2xl max-h-[85vh] overflow-hidden animate-fadeIn",onClick:_=>_.stopPropagation(),children:[t.jsxs("div",{style:{background:a?`linear-gradient(135deg, ${j(c.status)}30 0%, ${j(c.status)}10 100%)`:`linear-gradient(135deg, ${j(c.status)}20 0%, ${j(c.status)}10 100%)`,borderColor:`${j(c.status)}50`},className:"px-6 py-4 flex items-center justify-between border-b",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:`${j(c.status)}30`},className:"w-10 h-10 rounded-full flex items-center justify-center",children:C(c.status)}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:j(c.status)},className:"text-xl font-bold",children:"Concern Details"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:c.concernId||"No ID"})]})]}),t.jsx("button",{onClick:()=>x(null),style:{color:e.text.secondary},className:"hover:opacity-70 transition-colors",children:t.jsx(ft,{className:"w-6 h-6"})})]}),t.jsxs("div",{style:{padding:"0 24px",borderBottom:`2px solid ${e.border.primary}`,display:"flex",gap:"8px"},children:[t.jsx("button",{onClick:()=>h("details"),style:{padding:"12px 20px",background:"transparent",border:"none",borderBottom:`3px solid ${m==="details"?e.accent.primary:"transparent"}`,color:m==="details"?e.accent.primary:e.text.secondary,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:" Details"}),t.jsxs("button",{onClick:()=>h("notes"),style:{padding:"12px 20px",background:"transparent",border:"none",borderBottom:`3px solid ${m==="notes"?e.accent.primary:"transparent"}`,color:m==="notes"?e.accent.primary:e.text.secondary,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Notes History ",((D=c.notes)==null?void 0:D.length)>0&&`(${c.notes.length})`]})]}),t.jsx("div",{style:{flex:1,overflow:"auto",padding:"24px",maxHeight:"60vh"},children:m==="details"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex items-center gap-3 mb-5",children:t.jsxs("span",{style:{background:`${j(c.status)}20`,color:j(c.status)},className:"px-3 py-1.5 rounded-full text-sm font-bold capitalize flex items-center gap-2",children:[C(c.status),(I=c.status)==null?void 0:I.replace("_"," ")]})}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"rounded-xl border p-4 space-y-3 mb-5",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Submitted"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold",children:T(c.submittedAt||c.createdAt)})]}),c.status==="in_progress"&&c.inProgressDate&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"In Progress Since"}),t.jsx("span",{style:{color:"#3B82F6"},className:"text-sm font-semibold",children:T(c.inProgressDate)})]}),c.resolvedDate&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Resolved Date"}),t.jsx("span",{style:{color:"#10B981"},className:"text-sm font-semibold",children:T(c.resolvedDate)})]})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"rounded-xl border p-4 space-y-3 mb-5",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Subject"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold text-right max-w-[60%]",children:c.subject||((z=c.selectedConcerns)==null?void 0:z.join(", "))||"N/A"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Submitted To"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold",children:c.reportTo||"N/A"})]}),c.plateNumber&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Plate Number"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-mono font-semibold",children:c.plateNumber})]})]}),t.jsxs("div",{className:"mb-5",children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-sm font-semibold mb-2",children:"Your Message"}),t.jsx("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"rounded-xl border p-4",children:t.jsx("p",{style:{color:e.text.primary},className:"whitespace-pre-wrap",children:c.feedbackText||c.otherConcern||"No message provided"})})]}),c.status==="pending"&&t.jsxs("div",{style:{background:"rgba(251,191,36,0.1)",borderColor:"rgba(251,191,36,0.3)"},className:"rounded-xl border p-4 flex items-start gap-3 mt-5",children:[t.jsx(oa,{className:"w-5 h-5 text-yellow-500 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:"#FBBF24"},className:"font-semibold",children:"Awaiting Review"}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm mt-1",children:["Your concern has been received and is waiting to be reviewed by the ",c.reportTo||"support team","."]})]})]}),c.status==="in_progress"&&t.jsxs("div",{style:{background:"rgba(59,130,246,0.1)",borderColor:"rgba(59,130,246,0.3)"},className:"rounded-xl border p-4 flex items-start gap-3 mt-5",children:[t.jsx(Oe,{className:"w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0 animate-spin"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:"#3B82F6"},className:"font-semibold",children:"Being Reviewed"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm mt-1",children:"Our team is currently looking into your concern. We'll get back to you with a resolution soon."})]})]})]}):t.jsx("div",{children:(!c.notes||c.notes.length===0)&&c.status!=="resolved"?t.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:e.text.tertiary},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("p",{style:{fontSize:"14px",margin:0},children:"No updates yet"}),t.jsx("p",{style:{fontSize:"12px",color:e.text.muted,marginTop:"8px"},children:"Admin updates will appear here as they work on your concern"})]}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(Y=c.notes)==null?void 0:Y.slice().reverse().map((_,V)=>t.jsxs("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsxs("span",{style:{color:e.accent.primary,fontSize:"12px",fontWeight:700},children:[" ",_.adminName||"Admin"]}),t.jsx("span",{style:{color:e.text.muted,fontSize:"11px"},children:_.timestamp?T(_.timestamp):""})]}),t.jsx("p",{style:{color:e.text.primary,margin:0,lineHeight:"1.5"},children:_.message})]},V)),c.status==="resolved"&&c.adminResponse&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderRadius:"12px",padding:"16px",border:"2px solid rgba(16,185,129,0.3)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#10B981",fontSize:"12px",fontWeight:700},children:" RESOLVED"}),t.jsx("span",{style:{color:"#10B981",fontSize:"11px",fontWeight:600},children:c.resolvedDate?T(c.resolvedDate):""})]}),t.jsx("p",{style:{color:e.text.primary,margin:0,lineHeight:"1.5",fontWeight:500},children:c.adminResponse})]})]})})}),t.jsx("div",{className:"px-6 py-4 flex justify-end border-t",style:{borderColor:e.border.primary},children:t.jsx("button",{onClick:()=>x(null),style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"px-6 py-2.5 rounded-xl font-semibold transition-all hover:opacity-80",children:"Close"})})]})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
      `})]})}function A4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState("profile"),[n,l]=p.useState(null),[o,i]=p.useState(!0),[d,u]=p.useState(1),[c,x]=p.useState({currentPin:"",newPin:"",confirmPin:"",otp:""}),[m,h]=p.useState(!1),[v,S]=p.useState(!1),[f,y]=p.useState(!1),[b,g]=p.useState(!1),[j,C]=p.useState(!1),[T,E]=p.useState(""),[D,I]=p.useState(!1),[z,Y]=p.useState(!1),[_,V]=p.useState(1),[R,B]=p.useState(""),[F,$]=p.useState(!1),[N,w]=p.useState(!1),[k,A]=p.useState("");p.useEffect(()=>{O()},[]);const O=async()=>{try{i(!0);const re=localStorage.getItem("userData");if(re&&re!=="undefined"&&re!=="null"){const Ue=JSON.parse(re);l(Ue)}const Ne=await Z.get("/user/profile");Ne&&l(Ne)}catch(re){console.error("Error fetching user data:",re)}finally{i(!1)}},q=async()=>{if(!c.currentPin||c.currentPin.length!==6){E("Current PIN must be exactly 6 digits");return}if(!c.newPin||c.newPin.length!==6){E("New PIN must be exactly 6 digits");return}if(!c.confirmPin||c.confirmPin.length!==6){E("Please confirm your new PIN");return}if(c.newPin!==c.confirmPin){E("New PIN and Confirm PIN do not match");return}if(c.currentPin===c.newPin){E("New PIN must be different from current PIN");return}g(!0),E("");try{const re=await Z.post("/user/send-pin-change-otp",{currentPin:c.currentPin,newPin:c.newPin});re!=null&&re.success&&(W.success("Verification code sent to your email"),u(2))}catch(re){E(re.message||"Failed to send verification code. Please try again.")}finally{g(!1)}},U=async()=>{if(!c.otp||c.otp.length!==6){E("Please enter the 6-digit verification code");return}C(!0),E("");try{const re=await Z.post("/user/change-pin",{otp:c.otp});re!=null&&re.success&&(I(!0),E(""))}catch(re){E(re.message||"Failed to change PIN. Please try again.")}finally{C(!1)}},H=()=>{u(1),x({currentPin:"",newPin:"",confirmPin:"",otp:""}),E(""),I(!1),h(!1),S(!1),y(!1)},J=()=>{u(1),x({...c,otp:""}),E("")},ee=async()=>{g(!0),E("");try{const re=await Z.post("/user/send-pin-change-otp",{currentPin:c.currentPin,newPin:c.newPin});re!=null&&re.success&&W.success("Verification code resent to your email")}catch(re){E(re.message||"Failed to resend verification code.")}finally{g(!1)}},L=async()=>{$(!0),A("");try{const re=await Z.post("/user/send-deactivation-otp");re!=null&&re.success&&(W.success("Verification code sent to your email"),V(2))}catch(re){console.error("Send deactivation OTP error:",re),W.error(re.message||"Failed to send verification code"),A(re.message||"Failed to send verification code")}finally{$(!1)}},X=async()=>{$(!0),A("");try{const re=await Z.post("/user/send-deactivation-otp");re!=null&&re.success&&(W.success("Verification code sent to your email"),Y(!0))}catch(re){console.error("Send deactivation OTP error:",re),W.error(re.message||"Failed to send verification code"),A(re.message||"Failed to send verification code")}finally{$(!1)}},te=async()=>{if(!R||R.length!==6){A("Please enter the 6-digit verification code");return}w(!0),A("");try{const re=await Z.post("/user/deactivate-account",{otp:R});re!=null&&re.success&&(W.success("Account deactivated successfully"),setTimeout(()=>{localStorage.removeItem("token"),localStorage.removeItem("userData"),localStorage.removeItem("userRole"),window.location.href="/login?deactivated=true"},1500))}catch(re){console.error("Deactivation error:",re),A(re.message||"Failed to deactivate account")}finally{w(!1)}},ce=()=>{V(1),B(""),A(""),Y(!1)},de=()=>{V(1),B(""),A("")},we=async()=>{$(!0),A("");try{const re=await Z.post("/user/send-deactivation-otp");re!=null&&re.success&&W.success("Verification code resent to your email")}catch(re){A(re.message||"Failed to resend verification code")}finally{$(!1)}},ae=()=>{var Ue,Se;if(!n)return"?";const re=((Ue=n.firstName)==null?void 0:Ue[0])||"",Ne=((Se=n.lastName)==null?void 0:Se[0])||"";return(re+Ne).toUpperCase()};if(o)return t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"80px 20px",color:"rgba(251, 251, 251, 0.6)"},children:[t.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid rgba(255, 212, 28, 0.2)",borderTopColor:"#FFD41C",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),t.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]});const ue=()=>t.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",overflow:"hidden"},children:[t.jsxs("div",{className:"profile-header",style:{background:"linear-gradient(135deg, rgba(255,212,28,0.2) 0%, rgba(255,212,28,0.05) 100%)",padding:"40px",display:"flex",alignItems:"center",gap:"24px",borderBottom:"1px solid rgba(255,212,28,0.2)"},children:[t.jsx("div",{className:"profile-avatar",style:{width:"100px",height:"100px",borderRadius:"50%",background:"linear-gradient(135deg, #FFD41C 0%, #F59E0B 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"40px",fontWeight:800,color:"#181D40",boxShadow:"0 0 0 6px rgba(255,212,28,0.2)",flexShrink:0},children:ae()}),t.jsxs("div",{style:{minWidth:0},children:[t.jsxs("h2",{className:"profile-name",style:{fontSize:"28px",fontWeight:700,color:"#FBFBFB",margin:"0 0 8px 0",wordBreak:"break-word"},children:[n==null?void 0:n.firstName," ",n==null?void 0:n.lastName]}),t.jsx("div",{style:{display:"inline-block",padding:"6px 16px",background:"rgba(255,212,28,0.2)",border:"1px solid rgba(255,212,28,0.4)",borderRadius:"20px",color:"#FFD41C",fontSize:"13px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.5px"},children:(n==null?void 0:n.role)||"Student"})]})]}),t.jsx("div",{style:{padding:"32px"},children:t.jsxs("div",{className:"info-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"24px"},children:[t.jsx(Rl,{label:"First Name",value:(n==null?void 0:n.firstName)||"N/A"}),t.jsx(Rl,{label:"Last Name",value:(n==null?void 0:n.lastName)||"N/A"}),t.jsx(Rl,{label:"Email Address",value:(n==null?void 0:n.email)||"N/A",fullWidth:!0}),t.jsx(Rl,{label:"School ID",value:(n==null?void 0:n.schoolUId)||"N/A"})]})})]}),Ce=()=>t.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",overflow:"hidden"},children:[t.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",padding:"24px 32px",borderBottom:"1px solid rgba(255,212,28,0.2)"},children:[t.jsxs("h3",{style:{fontSize:"18px",fontWeight:700,color:"#FFD41C",margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," Security Settings"]}),t.jsx("p",{style:{fontSize:"14px",color:"rgba(251,251,251,0.6)",margin:0},children:"Manage your PIN and account security"})]}),t.jsxs("div",{style:{padding:"32px"},children:[T&&t.jsxs("div",{style:{padding:"14px 20px",background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",color:"#EF4444",fontSize:"13px",fontWeight:600,marginBottom:"24px",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:T})]}),t.jsxs("div",{className:"security-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"24px",marginBottom:"32px"},children:[t.jsxs("div",{className:"pin-section",style:{padding:"24px",background:"rgba(255, 212, 28, 0.1)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"12px"},children:[t.jsxs("h4",{style:{fontSize:"16px",fontWeight:700,color:"#FFD41C",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," Change PIN"]}),d===1&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Current PIN (6 digits) *"}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:m?"text":"password",value:c.currentPin,onChange:re=>{const Ne=re.target.value.replace(/\D/g,"").slice(0,6);x({...c,currentPin:Ne}),E("")},disabled:b,placeholder:"",maxLength:"6",className:"pin-input",style:{width:"100%",padding:"14px 45px 14px 14px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"24px",fontWeight:700,letterSpacing:"12px",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}}),t.jsx("button",{type:"button",onClick:()=>h(!m),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"rgba(251, 251, 251, 0.5)",padding:"4px"},children:m?t.jsx(Ql,{className:"w-5 h-5"}):t.jsx(Zl,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"New PIN (6 digits) *"}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:v?"text":"password",value:c.newPin,onChange:re=>{const Ne=re.target.value.replace(/\D/g,"").slice(0,6);x({...c,newPin:Ne}),E("")},disabled:b,placeholder:"",maxLength:"6",className:"pin-input",style:{width:"100%",padding:"14px 45px 14px 14px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"24px",fontWeight:700,letterSpacing:"12px",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}}),t.jsx("button",{type:"button",onClick:()=>S(!v),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"rgba(251, 251, 251, 0.5)",padding:"4px"},children:v?t.jsx(Ql,{className:"w-5 h-5"}):t.jsx(Zl,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Confirm New PIN (6 digits) *"}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:f?"text":"password",value:c.confirmPin,onChange:re=>{const Ne=re.target.value.replace(/\D/g,"").slice(0,6);x({...c,confirmPin:Ne}),E("")},disabled:b,placeholder:"",maxLength:"6",className:"pin-input",style:{width:"100%",padding:"14px 45px 14px 14px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"24px",fontWeight:700,letterSpacing:"12px",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}}),t.jsx("button",{type:"button",onClick:()=>y(!f),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"rgba(251, 251, 251, 0.5)",padding:"4px"},children:f?t.jsx(Ql,{className:"w-5 h-5"}):t.jsx(Zl,{className:"w-5 h-5"})})]}),t.jsx("p",{style:{fontSize:"11px",color:"rgba(251, 251, 251, 0.5)",marginTop:"8px",marginBottom:0},children:"Must match the new PIN above"})]}),t.jsx("button",{onClick:q,disabled:b||c.currentPin.length!==6||c.newPin.length!==6||c.confirmPin.length!==6,style:{width:"100%",padding:"14px",background:b||c.currentPin.length!==6||c.newPin.length!==6||c.confirmPin.length!==6?"rgba(255, 212, 28, 0.3)":"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:b||c.currentPin.length!==6||c.newPin.length!==6||c.confirmPin.length!==6?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.3s ease"},children:b?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{width:"14px",height:"14px",border:"2px solid rgba(24, 29, 64, 0.3)",borderTopColor:"#181D40",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),t.jsx("span",{children:"Sending..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Send OTP"})]})})]}),d===2&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[t.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"rgba(59, 130, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",fontSize:"28px"},children:""}),t.jsx("p",{style:{fontSize:"14px",fontWeight:600,color:"#FBFBFB",marginBottom:"8px"},children:"Check your email"}),t.jsxs("p",{style:{fontSize:"12px",color:"rgba(251, 251, 251, 0.7)",lineHeight:"1.5",margin:0},children:["We sent a 6-digit code to",t.jsx("br",{}),t.jsx("strong",{style:{color:"#FFD41C"},children:n==null?void 0:n.email})]})]}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center"},children:"Enter Verification Code"}),t.jsx("input",{type:"text",value:c.otp,onChange:re=>{const Ne=re.target.value.replace(/\D/g,"").slice(0,6);x({...c,otp:Ne}),E("")},maxLength:6,placeholder:"",disabled:j,style:{width:"100%",padding:"16px",background:"rgba(251, 251, 251, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",color:"rgba(251, 251, 251, 0.9)",fontSize:"28px",fontWeight:700,letterSpacing:"0.5em",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}}),t.jsxs("p",{style:{fontSize:"11px",color:"rgba(251, 251, 251, 0.5)",textAlign:"center",marginTop:"12px",marginBottom:0},children:["Didn't receive the code?"," ",t.jsx("button",{onClick:ee,disabled:b,style:{background:"none",border:"none",color:"#FFD41C",fontWeight:700,cursor:b?"not-allowed":"pointer",textDecoration:"underline",opacity:b?.5:1},children:b?"Sending...":"Resend"})]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:J,disabled:j,style:{flex:1,padding:"14px",background:"rgba(251, 251, 251, 0.1)",color:"rgba(251, 251, 251, 0.7)",border:"1px solid rgba(251, 251, 251, 0.2)",borderRadius:"10px",fontSize:"14px",fontWeight:600,cursor:j?"not-allowed":"pointer",opacity:j?.5:1},children:" Back"}),t.jsx("button",{onClick:U,disabled:j||c.otp.length!==6,style:{flex:1,padding:"14px",background:j||c.otp.length!==6?"rgba(255, 212, 28, 0.3)":"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:j||c.otp.length!==6?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"0.5px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:j?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{width:"14px",height:"14px",border:"2px solid rgba(24, 29, 64, 0.3)",borderTopColor:"#181D40",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),t.jsx("span",{children:"Verifying..."})]}):"Verify & Change PIN"})]})]})]}),t.jsxs("div",{className:"deactivate-section-desktop",style:{padding:"24px",background:"rgba(239, 68, 68, 0.1)",border:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[t.jsxs("h4",{style:{fontSize:"16px",fontWeight:700,color:"#EF4444",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx(fa,{className:"w-5 h-5"}),"Deactivate Account"]}),_===2&&t.jsx("span",{style:{fontSize:"11px",fontWeight:700,color:"rgba(251, 251, 251, 0.5)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Step 2 of 2"})]}),k&&t.jsxs("div",{style:{padding:"12px 16px",background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"10px",color:"#EF4444",fontSize:"12px",fontWeight:600,marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:k})]}),_===1&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"20px",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[t.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"rgba(239, 68, 68, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px",fontSize:"36px"},children:""}),t.jsxs("p",{style:{fontSize:"13px",color:"rgba(251, 251, 251, 0.7)",marginBottom:"16px",lineHeight:"1.6"},children:["Temporarily disable your account while keeping all data and balance intact.",t.jsx("span",{className:"desktop-break",children:t.jsx("br",{})}),"You may reactivate it anytime through ITSO."]}),t.jsxs("div",{style:{padding:"12px",background:"rgba(245, 158, 11, 0.1)",border:"2px solid rgba(245, 158, 11, 0.3)",borderRadius:"8px",marginBottom:"16px",maxWidth:"450px"},children:[t.jsx("p",{style:{fontSize:"11px",fontWeight:700,color:"#F59E0B",marginBottom:"6px",display:"flex",alignItems:"center",gap:"6px",justifyContent:"center"},children:" Important"}),t.jsx("p",{style:{fontSize:"11px",color:"rgba(251, 251, 251, 0.7)",margin:0,lineHeight:"1.4",textAlign:"center"},children:"Once deactivated, you will not be able to access your account until it is reactivated."})]})]}),t.jsx("button",{onClick:L,disabled:F,style:{width:"100%",padding:"14px",background:F?"rgba(239, 68, 68, 0.5)":"#EF4444",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:F?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"0.5px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:F?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{width:"14px",height:"14px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"#FFFFFF",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),t.jsx("span",{children:"Sending Code..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Send Verification Code"})]})})]}),_===2&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[t.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"rgba(59, 130, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px",fontSize:"28px"},children:""}),t.jsx("p",{style:{fontSize:"13px",fontWeight:600,color:"#FBFBFB",marginBottom:"6px"},children:"Check your email"}),t.jsxs("p",{style:{fontSize:"11px",color:"rgba(251, 251, 251, 0.7)",lineHeight:"1.4",margin:0},children:["We sent a code to",t.jsx("br",{}),t.jsx("strong",{style:{color:"#FFD41C"},children:n==null?void 0:n.email})]})]}),t.jsxs("div",{style:{marginBottom:"12px",flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[t.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:700,color:"#FBFBFB",marginBottom:"8px",textAlign:"center"},children:"Enter verification code"}),t.jsx("input",{type:"text",value:R,onChange:re=>{B(re.target.value.replace(/\D/g,"").slice(0,6)),A("")},maxLength:6,placeholder:"",disabled:N,style:{width:"100%",padding:"14px",background:"rgba(251, 251, 251, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",color:"rgba(251, 251, 251, 0.9)",fontSize:"24px",fontWeight:700,letterSpacing:"0.5em",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}}),t.jsxs("p",{style:{fontSize:"10px",color:"rgba(251, 251, 251, 0.5)",textAlign:"center",marginTop:"10px",marginBottom:0},children:["Didn't receive it?"," ",t.jsx("button",{onClick:we,disabled:F,style:{background:"none",border:"none",color:"#FFD41C",fontWeight:700,cursor:F?"not-allowed":"pointer",textDecoration:"underline",opacity:F?.5:1},children:F?"Sending...":"Resend"})]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:de,disabled:N,style:{flex:1,padding:"12px",background:"rgba(251, 251, 251, 0.1)",color:"rgba(251, 251, 251, 0.7)",border:"1px solid rgba(251, 251, 251, 0.2)",borderRadius:"10px",fontSize:"13px",fontWeight:600,cursor:N?"not-allowed":"pointer",opacity:N?.5:1},children:" Back"}),t.jsx("button",{onClick:te,disabled:N||R.length!==6,style:{flex:1,padding:"12px",background:N||R.length!==6?"rgba(239, 68, 68, 0.5)":"#EF4444",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"13px",fontWeight:700,cursor:N||R.length!==6?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"0.5px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:N?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{width:"14px",height:"14px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"#FFFFFF",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),t.jsx("span",{children:"Deactivating..."})]}):"Confirm"})]})]})]}),t.jsxs("div",{className:"deactivate-section-mobile",style:{padding:"24px",background:"rgba(239, 68, 68, 0.1)",border:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",display:"none",flexDirection:"column"},children:[t.jsxs("h4",{style:{fontSize:"16px",fontWeight:700,color:"#EF4444",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx(fa,{className:"w-5 h-5"}),"Deactivate Account"]}),t.jsx("p",{style:{fontSize:"13px",color:"rgba(251, 251, 251, 0.7)",marginBottom:"16px",lineHeight:"1.6",flex:1},children:"Temporarily disable your account while keeping all data and balance intact. You may reactivate it anytime through ITSO."}),t.jsxs("div",{style:{padding:"14px",background:"rgba(245, 158, 11, 0.1)",border:"2px solid rgba(245, 158, 11, 0.3)",borderRadius:"10px",marginBottom:"16px"},children:[t.jsx("p",{style:{fontSize:"12px",fontWeight:700,color:"#F59E0B",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:" Warning"}),t.jsx("p",{style:{fontSize:"12px",color:"rgba(251, 251, 251, 0.7)",margin:0,lineHeight:"1.5"},children:"Once deactivated, you will not be able to access your account until it is reactivated."})]}),t.jsx("button",{onClick:X,disabled:F,style:{padding:"12px 24px",background:F?"rgba(239, 68, 68, 0.5)":"#EF4444",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:F?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:F?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{width:"14px",height:"14px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"#FFFFFF",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),t.jsx("span",{children:"Sending Code..."})]}):"Request Deactivation"})]})]}),t.jsxs("div",{style:{padding:"20px",background:"rgba(59, 130, 246, 0.1)",border:"2px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px"},children:[t.jsxs("h4",{style:{fontSize:"14px",fontWeight:700,color:"#3B82F6",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx(ii,{className:"w-4 h-4"}),"Security Tips"]}),t.jsxs("ul",{style:{fontSize:"13px",color:"rgba(251, 251, 251, 0.7)",margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[t.jsx("li",{children:"Never share your PIN with anyone"}),t.jsx("li",{children:"Change your PIN regularly (every 3 months recommended)"}),t.jsx("li",{children:"Use a PIN that's hard to guess (avoid birthdays, repeating numbers)"}),t.jsx("li",{children:"Report any suspicious activity immediately"})]})]})]})]});return t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:"30px",borderBottom:"2px solid rgba(255,212,28,0.2)",paddingBottom:"20px"},children:[t.jsxs("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#FFD41C",margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," My Profile"]}),t.jsx("p",{style:{fontSize:"13px",color:"rgba(251,251,251,0.6)",margin:0},children:"Manage your account information and security settings"})]}),t.jsxs("div",{className:"tab-navigation",style:{display:"flex",gap:"12px",marginBottom:"30px"},children:[t.jsxs("button",{onClick:()=>s("profile"),style:{padding:"12px 24px",background:r==="profile"?"rgba(255, 212, 28, 0.15)":"rgba(30, 35, 71, 0.4)",border:r==="profile"?"2px solid rgba(255, 212, 28, 0.4)":"2px solid rgba(255, 212, 28, 0.1)",borderRadius:"12px",color:r==="profile"?"#FFD41C":"rgba(251, 251, 251, 0.7)",fontSize:"14px",fontWeight:r==="profile"?700:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[t.jsx("span",{children:""}),t.jsx("span",{className:"tab-text",children:"Personal Information"})]}),t.jsxs("button",{onClick:()=>s("security"),style:{padding:"12px 24px",background:r==="security"?"rgba(255, 212, 28, 0.15)":"rgba(30, 35, 71, 0.4)",border:r==="security"?"2px solid rgba(255, 212, 28, 0.4)":"2px solid rgba(255, 212, 28, 0.1)",borderRadius:"12px",color:r==="security"?"#FFD41C":"rgba(251, 251, 251, 0.7)",fontSize:"14px",fontWeight:r==="security"?700:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[t.jsx("span",{children:""}),t.jsx("span",{className:"tab-text",children:"Security Settings"})]})]}),r==="profile"&&ue(),r==="security"&&Ce(),D&&t.jsx("div",{onClick:H,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(8px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:t.jsxs("div",{onClick:re=>re.stopPropagation(),style:{background:"#1E2347",borderRadius:"16px",maxWidth:"440px",width:"100%",border:"2px solid rgba(34, 197, 94, 0.3)",overflow:"hidden"},children:[t.jsx("div",{style:{background:"rgba(34, 197, 94, 0.15)",padding:"24px 32px",borderBottom:"2px solid rgba(34, 197, 94, 0.2)"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx(Ve,{className:"w-6 h-6",style:{color:"#22C55E"}}),t.jsx("div",{children:t.jsx("h2",{style:{fontSize:"18px",fontWeight:700,color:"#22C55E",margin:0},children:"PIN Changed Successfully!"})})]}),t.jsx("button",{onClick:H,style:{background:"none",border:"none",color:"rgba(251, 251, 251, 0.7)",cursor:"pointer",padding:"4px"},children:t.jsx(ft,{className:"w-5 h-5"})})]})}),t.jsxs("div",{style:{padding:"40px 32px",textAlign:"center"},children:[t.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"rgba(34, 197, 94, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",fontSize:"48px"},children:""}),t.jsx("p",{style:{fontSize:"15px",color:"rgba(251, 251, 251, 0.9)",marginBottom:"12px",lineHeight:"1.6",fontWeight:600},children:"Your PIN has been updated successfully."}),t.jsx("p",{style:{fontSize:"14px",color:"rgba(251, 251, 251, 0.6)",marginBottom:0,lineHeight:"1.5"},children:"Please use your new PIN for future logins."})]}),t.jsx("div",{style:{padding:"16px 32px 32px",borderTop:"1px solid rgba(255, 212, 28, 0.1)"},children:t.jsx("button",{onClick:H,style:{width:"100%",padding:"14px",background:"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.2s ease"},children:"Done"})})]})}),z&&t.jsx("div",{onClick:ce,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(8px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:t.jsxs("div",{onClick:re=>re.stopPropagation(),style:{background:"#1E2347",borderRadius:"16px",maxWidth:"460px",width:"100%",border:"2px solid rgba(239, 68, 68, 0.3)",overflow:"hidden"},children:[t.jsx("div",{style:{background:"rgba(239, 68, 68, 0.15)",padding:"24px 32px",borderBottom:"2px solid rgba(239, 68, 68, 0.2)"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx(fa,{className:"w-6 h-6",style:{color:"#EF4444"}}),t.jsx("div",{children:t.jsx("h2",{style:{fontSize:"18px",fontWeight:700,color:"#EF4444",margin:0},children:"Verify Deactivation"})})]}),t.jsx("button",{onClick:ce,disabled:N,style:{background:"none",border:"none",color:"rgba(251, 251, 251, 0.7)",cursor:N?"not-allowed":"pointer",padding:"4px",opacity:N?.5:1},children:t.jsx(ft,{className:"w-5 h-5"})})]})}),t.jsxs("div",{style:{padding:"32px"},children:[k&&t.jsxs("div",{style:{padding:"12px 16px",background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"10px",color:"#EF4444",fontSize:"13px",fontWeight:600,marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:k})]}),t.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[t.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"rgba(59, 130, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",fontSize:"36px"},children:""}),t.jsx("p",{style:{fontSize:"15px",fontWeight:600,color:"#FBFBFB",marginBottom:"8px"},children:"Check your email"}),t.jsxs("p",{style:{fontSize:"13px",color:"rgba(251, 251, 251, 0.7)",lineHeight:"1.5"},children:["We sent a 6-digit verification code to",t.jsx("br",{}),t.jsx("strong",{style:{color:"#FFD41C"},children:n==null?void 0:n.email})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:700,color:"#FBFBFB",marginBottom:"8px",textAlign:"center"},children:"Enter verification code"}),t.jsx("input",{type:"text",value:R,onChange:re=>{B(re.target.value.replace(/\D/g,"").slice(0,6)),A("")},maxLength:6,placeholder:"",disabled:N,style:{width:"100%",padding:"16px",background:"rgba(251, 251, 251, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",color:"rgba(251, 251, 251, 0.9)",fontSize:"28px",fontWeight:700,letterSpacing:"0.5em",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}})]}),t.jsxs("p",{style:{fontSize:"12px",color:"rgba(251, 251, 251, 0.5)",textAlign:"center",marginTop:"16px",marginBottom:0},children:["Didn't receive the code?"," ",t.jsx("button",{onClick:we,disabled:F,style:{background:"none",border:"none",color:"#FFD41C",fontWeight:700,cursor:F?"not-allowed":"pointer",textDecoration:"underline",opacity:F?.5:1},children:F?"Sending...":"Resend code"})]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",padding:"16px 32px 32px",borderTop:"1px solid rgba(255, 212, 28, 0.1)"},children:[t.jsx("button",{onClick:ce,disabled:N,style:{flex:1,padding:"14px",background:"rgba(251, 251, 251, 0.1)",color:"rgba(251, 251, 251, 0.7)",border:"1px solid rgba(251, 251, 251, 0.2)",borderRadius:"10px",fontSize:"14px",fontWeight:600,cursor:N?"not-allowed":"pointer",opacity:N?.5:1},children:"Cancel"}),t.jsx("button",{onClick:te,disabled:N||R.length!==6,style:{flex:1,padding:"14px",background:N||R.length!==6?"rgba(239, 68, 68, 0.5)":"#EF4444",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:N||R.length!==6?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"0.5px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:N?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{width:"14px",height:"14px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"#FFFFFF",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),t.jsx("span",{children:"Deactivating..."})]}):"Confirm Deactivation"})]})]})}),t.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        /* Desktop: Show card, hide mobile button */
        .deactivate-section-desktop {
          display: flex !important;
        }
        .deactivate-section-mobile {
          display: none !important;
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
          /* Hide desktop deactivation card, show mobile button */
          .deactivate-section-desktop {
            display: none !important;
          }
          .deactivate-section-mobile {
            display: flex !important;
          }

          /* Profile Header - Stack vertically on mobile */
          .profile-header {
            flex-direction: column !important;
            text-align: center !important;
            padding: 24px !important;
          }

          .profile-avatar {
            width: 80px !important;
            height: 80px !important;
            font-size: 32px !important;
          }

          .profile-name {
            font-size: 22px !important;
          }

          /* Personal Info Grid - Single column on mobile */
          .info-grid {
            grid-template-columns: 1fr !important;
            gap: 16px !important;
          }

          /* Tab Navigation - Smaller text on mobile */
          .tab-navigation {
            gap: 8px !important;
          }

          .tab-navigation button {
            padding: 10px 16px !important;
            font-size: 13px !important;
          }

          .tab-text {
            display: none !important;
          }

          .tab-navigation button span:first-child {
            font-size: 18px !important;
          }

          /* Security Grid - Stack vertically on mobile */
          .security-grid {
            grid-template-columns: 1fr !important;
            gap: 24px !important;
          }

          /* PIN Section - Full width on mobile */
          .pin-section {
            order: 1 !important;
          }

          /* Deactivate Section - Show mobile version */
          .deactivate-section-mobile {
            display: flex !important;
            order: 2 !important;
          }

          /* PIN Input - Smaller font on mobile */
          .pin-input {
            font-size: 20px !important;
            letter-spacing: 8px !important;
            padding: 12px 40px 12px 12px !important;
          }
        }

        @media (max-width: 480px) {
          .profile-avatar {
            width: 70px !important;
            height: 70px !important;
            font-size: 28px !important;
            box-shadow: 0 0 0 4px rgba(255,212,28,0.2) !important;
          }

          .profile-name {
            font-size: 20px !important;
          }

          .pin-input {
            font-size: 18px !important;
            letter-spacing: 6px !important;
          }
        }
      `})]})}function Rl({label:e,value:a,highlight:r,fullWidth:s}){const l=r==="success"?{bg:"rgba(34, 197, 94, 0.15)",border:"rgba(34, 197, 94, 0.3)",color:"#22C55E"}:r==="error"?{bg:"rgba(239, 68, 68, 0.15)",border:"rgba(239, 68, 68, 0.3)",color:"#EF4444"}:r==="warning"?{bg:"rgba(245, 158, 11, 0.15)",border:"rgba(245, 158, 11, 0.3)",color:"#F59E0B"}:null;return t.jsxs("div",{style:{gridColumn:s?"1 / -1":"span 1"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"11px",fontWeight:700,color:"rgba(255,212,28,0.8)",textTransform:"uppercase",letterSpacing:"0.5px"},children:e}),t.jsx("div",{style:{padding:"12px 16px",background:l?l.bg:"rgba(251,251,251,0.05)",border:`1px solid ${l?l.border:"rgba(255,212,28,0.1)"}`,borderRadius:"8px",color:l?l.color:"rgba(251,251,251,0.9)",fontSize:"15px",fontWeight:r?700:500,wordBreak:"break-word"},children:a||"N/A"})]})}function R4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState(""),[n,l]=p.useState("all"),[o,i]=p.useState({}),d=[{id:"all",label:"All FAQs",icon:""},{id:"account",label:"Account",icon:""},{id:"balance",label:"Balance & Cash-In",icon:""},{id:"transactions",label:"Transactions",icon:""},{id:"security",label:"Security",icon:""},{id:"technical",label:"Technical",icon:""}],u=[{id:1,category:"account",question:"How do I activate my NUCash account?",answer:"To activate your NUCash account, visit the Treasury Office with your valid school ID. They will verify your identity and activate your account on the spot. You will receive a confirmation via your registered email."},{id:2,category:"account",question:"What should I do if I forgot my PIN?",answer:'If you forgot your PIN, go to Manage Profile > Security tab and click "Change PIN". You will need to verify your identity through your registered email. Alternatively, visit the Treasury Office for in-person assistance.'},{id:3,category:"account",question:"Can I have multiple NUCash accounts?",answer:"No, each student or employee is only allowed one NUCash account tied to their official school ID. This ensures security and proper tracking of transactions."},{id:4,category:"account",question:"How do I update my personal information?",answer:"You can update some personal information through Manage Profile. However, changes to your name, email, or student ID must be done through the Registrar's Office, and the changes will reflect in NUCash within 24-48 hours."},{id:5,category:"balance",question:"How do I add money to my NUCash account?",answer:"You can add money (cash-in) at any Treasury Office window during operating hours. Simply present your school ID and the amount you wish to load. The balance will be updated instantly."},{id:6,category:"balance",question:"What is the minimum and maximum cash-in amount?",answer:"The minimum cash-in amount is 50.00. The maximum single cash-in is 10,000.00. Your total account balance cannot exceed 50,000.00."},{id:7,category:"balance",question:"Can I transfer my NUCash balance to another account?",answer:"Currently, peer-to-peer transfers are not available. You can only use your NUCash balance for purchases at registered merchants and shuttle services within the campus."},{id:8,category:"balance",question:"How do I check my current balance?",answer:"Your balance is displayed on the Home tab of your NUCash dashboard. For security, it's hidden by defaultclick the eye icon to reveal your balance. You can also check at any payment terminal."},{id:9,category:"transactions",question:"How can I view my transaction history?",answer:"Go to the History tab to view all your transactions. You can filter by date range (Today, Week, Month) and export your transaction history for your records."},{id:10,category:"transactions",question:"What should I do if a transaction is incorrect?",answer:'If you notice an incorrect transaction, report it immediately through the "Report a Concern" button on your dashboard. Select "Finance" as the department and provide transaction details. Our team will investigate within 24-48 hours.'},{id:11,category:"transactions",question:"Can I cancel or refund a transaction?",answer:"Transactions are final and cannot be cancelled once completed. For disputes, please file a concern through the app or visit the Treasury Office. Refunds are evaluated on a case-by-case basis."},{id:12,category:"transactions",question:"Why doesn't my transaction appear in my history?",answer:"Transactions typically appear instantly. If it's missing, wait a few minutes and refresh the page. If it still doesn't appear after 30 minutes, report the issue immediately with any receipt or reference number you may have."},{id:13,category:"security",question:"How do I keep my NUCash account secure?",answer:"Never share your PIN with anyone. Always log out after using shared devices. Enable notifications to monitor your account activity. Report any suspicious activity immediately."},{id:14,category:"security",question:"What should I do if I suspect unauthorized access?",answer:"If you suspect unauthorized access, immediately change your PIN through Manage Profile. Then report the incident to the Treasury Office and file a concern in the app. We will investigate and secure your account."},{id:15,category:"security",question:"How do I change my PIN?",answer:"Go to Manage Profile > Security tab > Change PIN. Enter your current PIN, then your new 6-digit PIN twice. For security, choose a PIN that's not easily guessable (avoid birthdays, sequential numbers)."},{id:16,category:"security",question:"What happens if I enter the wrong PIN multiple times?",answer:"After 5 consecutive incorrect PIN attempts, your account will be temporarily locked for 30 minutes. If you've forgotten your PIN, visit the Treasury Office for assistance."},{id:17,category:"technical",question:"Why is the app not loading properly?",answer:"Try clearing your browser cache and refreshing the page. Make sure you're using a supported browser (Chrome, Firefox, Safari, Edge). If issues persist, try accessing from a different device or network."},{id:18,category:"technical",question:"What browsers are supported?",answer:"NUCash works best on the latest versions of Google Chrome, Mozilla Firefox, Safari, and Microsoft Edge. For optimal experience, keep your browser updated."},{id:19,category:"technical",question:"Is there a mobile app for NUCash?",answer:"Currently, NUCash is a web application accessible through any mobile browser. A dedicated mobile app is planned for future release. Bookmark the website for quick access on your phone."},{id:20,category:"technical",question:"Who do I contact for technical support?",answer:'For technical issues, use the "Report a Concern" feature and select "NUCash System". For urgent matters, visit the IT Service Office (ITSO) or email support@nu.edu.ph.'}],c=h=>{i(v=>({...v,[h]:!v[h]}))},x=u.filter(h=>{const v=n==="all"||h.category===n,S=r===""||h.question.toLowerCase().includes(r.toLowerCase())||h.answer.toLowerCase().includes(r.toLowerCase());return v&&S}),m=h=>h==="all"?u.length:u.filter(v=>v.category===h).length;return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{marginBottom:"24px",paddingBottom:"20px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[t.jsx("div",{style:{background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},className:"w-14 h-14 rounded-xl flex items-center justify-center text-3xl",children:""}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0",children:"Frequently Asked Questions"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm m-0 mt-1",children:"Find answers to common questions about NUCash"})]})]}),t.jsxs("div",{className:"relative mt-4",children:[t.jsx(vr,{style:{color:e.text.tertiary},className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search FAQs...",value:r,onChange:h=>s(h.target.value),style:{width:"100%",padding:"14px 16px 14px 48px",background:a?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"12px",color:e.text.primary,fontSize:"15px",outline:"none",transition:"all 0.2s ease"},onFocus:h=>{h.target.style.borderColor=e.accent.primary,h.target.style.boxShadow=`0 0 0 3px ${a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"}`},onBlur:h=>{h.target.style.borderColor=a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",h.target.style.boxShadow="none"}})]})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:d.map(h=>t.jsxs("button",{onClick:()=>l(h.id),style:{background:n===h.id?e.accent.primary:a?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",color:n===h.id?a?"#181D40":"#FFFFFF":e.text.secondary,border:`2px solid ${n===h.id?e.accent.primary:a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 transition-all hover:scale-105",children:[t.jsx("span",{children:h.icon}),t.jsx("span",{children:h.label}),t.jsx("span",{style:{background:n===h.id?a?"rgba(24,29,64,0.3)":"rgba(255,255,255,0.3)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",color:n===h.id?a?"#181D40":"#FFFFFF":e.accent.primary},className:"px-2 py-0.5 rounded-full text-xs font-bold",children:m(h.id)})]},h.id))}),t.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:x.length===0?t.jsxs("div",{className:"text-center py-16",children:[t.jsx("div",{style:{background:a?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`2px dashed ${a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}`},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-4xl opacity-50",children:""}),t.jsx("p",{style:{color:e.text.secondary},className:"text-lg font-semibold",children:"No FAQs found"}),t.jsx("p",{style:{color:e.text.tertiary},className:"text-sm mt-1",children:"Try a different search term or category"})]}):x.map(h=>{var v;return t.jsxs("div",{style:{background:a?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.01)",border:`2px solid ${o[h.id]?e.accent.primary:a?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.05)"}`},className:"rounded-xl overflow-hidden transition-all",children:[t.jsxs("button",{onClick:()=>c(h.id),className:"w-full p-5 flex items-center justify-between text-left transition-all",style:{background:o[h.id]?a?"rgba(255,212,28,0.05)":"rgba(59,130,246,0.03)":"transparent"},children:[t.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[t.jsx("div",{style:{background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.1)",color:e.accent.primary},className:"w-10 h-10 rounded-lg flex items-center justify-center text-lg flex-shrink-0",children:((v=d.find(S=>S.id===h.category))==null?void 0:v.icon)||""}),t.jsx("span",{style:{color:e.text.primary},className:"font-semibold text-[15px]",children:h.question})]}),t.jsx(aj,{style:{color:e.accent.primary,transform:o[h.id]?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s ease"},className:"w-5 h-5 flex-shrink-0 ml-4"})]}),o[h.id]&&t.jsx("div",{style:{borderTop:`1px solid ${a?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.05)"}`},className:"px-5 py-4",children:t.jsx("p",{style:{color:e.text.secondary},className:"text-sm leading-relaxed whitespace-pre-wrap",children:h.answer})})]},h.id)})}),t.jsx("div",{style:{marginTop:"24px",padding:"20px",background:a?"linear-gradient(135deg, rgba(255,212,28,0.1) 0%, rgba(255,212,28,0.02) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.1) 0%, rgba(59,130,246,0.02) 100%)",border:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"16px"},children:t.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[t.jsx("div",{style:{background:a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.15)"},className:"w-14 h-14 rounded-xl flex items-center justify-center text-3xl flex-shrink-0",children:""}),t.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[t.jsx("h4",{style:{color:e.text.primary},className:"font-bold text-lg mb-1",children:"Still have questions?"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:"Can't find what you're looking for? Report a concern from your dashboard and our team will help you."})]}),t.jsx("button",{onClick:()=>window.location.href="/user/dashboard",style:{background:e.accent.primary,color:a?"#181D40":"#FFFFFF"},className:"px-6 py-3 rounded-xl font-bold text-sm transition-all hover:opacity-90 hover:scale-105 flex-shrink-0",children:"Get Help"})]})})]})}function z4(){var m,h,v,S,f,y;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState(!0),[n,l]=p.useState({totalUsers:0,activeUsers:0,inactiveUsers:0,admins:0,students:0,employees:0,recentLogins:[]}),o=p.useRef(null),[i,d]=p.useState(!1),[u,c]=p.useState(!1),x=async(b=!1)=>{var g,j,C,T,E,D;try{b||s(!0);const I=await Z.get("/admin/sysad/dashboard");if(I){const z={totalUsers:((g=I.userMetrics)==null?void 0:g.total)||I.totalUsers||0,activeUsers:((j=I.userMetrics)==null?void 0:j.active)||I.activeUsers||0,inactiveUsers:((C=I.userMetrics)==null?void 0:C.inactive)||I.inactiveUsers||0,admins:((T=I.userMetrics)==null?void 0:T.admins)||I.admins||0,students:((E=I.userMetrics)==null?void 0:E.students)||I.students||0,employees:((D=I.userMetrics)==null?void 0:D.employees)||I.employees||0,recentLogins:I.recentActivity||I.recentLogins||[]};l(z)}}catch(I){b||W.error("Failed to load dashboard metrics"),console.error("Dashboard error:",I)}finally{b||s(!1)}};return p.useEffect(()=>(x(),o.current=setInterval(()=>x(!0),3e4),()=>{o.current&&clearInterval(o.current)}),[]),r?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading dashboard..."]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Home"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Comprehensive overview of the NUCash system  Auto-updates every 30 seconds"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-4 mb-6",children:[t.jsx(as,{icon:t.jsx(Ls,{className:"w-6 h-6"}),label:"Total Users",value:((m=n.totalUsers)==null?void 0:m.toLocaleString())||"0",color:"#3B82F6",theme:e,isDarkMode:a}),t.jsx(as,{icon:t.jsx(xd,{className:"w-6 h-6"}),label:"Active Users",value:((h=n.activeUsers)==null?void 0:h.toLocaleString())||"0",color:"#10B981",theme:e,isDarkMode:a}),t.jsx(as,{icon:t.jsx(fd,{className:"w-6 h-6"}),label:"Inactive Users",value:((v=n.inactiveUsers)==null?void 0:v.toLocaleString())||"0",color:"#EF4444",theme:e,isDarkMode:a}),t.jsx(as,{icon:t.jsx(ii,{className:"w-6 h-6"}),label:"Admins",value:((S=n.admins)==null?void 0:S.toLocaleString())||"0",color:"#8B5CF6",theme:e,isDarkMode:a}),t.jsx(as,{icon:t.jsx(Ib,{className:"w-6 h-6"}),label:"Students",value:((f=n.students)==null?void 0:f.toLocaleString())||"0",color:"#F59E0B",theme:e,isDarkMode:a}),t.jsx(as,{icon:t.jsx(Db,{className:"w-6 h-6"}),label:"Employees",value:((y=n.employees)==null?void 0:y.toLocaleString())||"0",color:"#06B6D4",theme:e,isDarkMode:a})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[t.jsxs("button",{onClick:()=>d(!0),style:{background:a?"linear-gradient(135deg, rgba(255,212,28,0.15) 0%, rgba(255,212,28,0.05) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.15) 0%, rgba(59,130,246,0.05) 100%)",borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"p-5 rounded-2xl border flex items-center gap-4 hover:scale-[1.01] hover:shadow-lg transition-all cursor-pointer text-left",children:[t.jsx("div",{style:{background:a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"},className:"w-14 h-14 rounded-full flex items-center justify-center flex-shrink-0 text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.accent.primary},className:"font-bold text-base m-0",children:"Add User"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs m-0 mt-1",children:"Create a new student, employee, or admin account"})]})]}),t.jsxs("button",{onClick:()=>c(!0),style:{background:"linear-gradient(135deg, rgba(16,185,129,0.15) 0%, rgba(16,185,129,0.05) 100%)",borderColor:"rgba(16,185,129,0.3)"},className:"p-5 rounded-2xl border flex items-center gap-4 hover:scale-[1.01] hover:shadow-lg transition-all cursor-pointer text-left",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-14 h-14 rounded-full flex items-center justify-center flex-shrink-0 text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-base text-emerald-500 m-0",children:"Transfer Card"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs m-0 mt-1",children:"Transfer user data to a new RFID card"})]})]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{style:{color:e.text.primary},className:"text-lg font-bold mb-4 flex items-center gap-2",children:[t.jsx(oa,{className:"w-5 h-5",style:{color:e.accent.primary}}),"Recent Admin Activity"]}),t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border p-4",children:n.recentLogins&&n.recentLogins.length>0?t.jsx("div",{className:"space-y-3",children:n.recentLogins.map((b,g)=>{var j;return t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"p-4 rounded-xl border flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{style:{background:b.eventType==="login"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)"},className:"w-10 h-10 rounded-full flex items-center justify-center",children:b.eventType==="login"?t.jsx(xd,{className:"w-5 h-5 text-emerald-500"}):t.jsx(fd,{className:"w-5 h-5 text-red-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.primary},className:"font-semibold",children:b.adminName||"Admin"}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-xs",children:[((j=b.metadata)==null?void 0:j.adminRole)||"Admin","  ",b.adminId||"N/A"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{style:{background:b.eventType==="login"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:b.eventType==="login"?"#10B981":"#EF4444"},className:"px-3 py-1 rounded-full text-xs font-bold uppercase",children:b.eventType}),t.jsx("p",{style:{color:e.text.muted},className:"text-xs mt-1",children:new Date(b.timestamp).toLocaleString()})]})]},g)})}):t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-10",children:[t.jsx(oa,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{className:"font-semibold",children:"No recent admin activity"}),t.jsx("p",{className:"text-sm mt-1",children:"Admin logins and logouts will appear here"})]})})]}),i&&t.jsx(B4,{theme:e,isDarkMode:a,onClose:()=>d(!1),onSuccess:()=>{d(!1),x(!0),W.success("User created successfully!")}}),u&&t.jsx(D4,{theme:e,isDarkMode:a,onClose:()=>{c(!1),x(!0)}})]})}function B4({theme:e,isDarkMode:a,onClose:r,onSuccess:s}){const[n,l]=p.useState({rfidUId:"",firstName:"",middleName:"",lastName:"",email:"",schoolUId:"",role:"student",adminRole:""}),[o,i]=p.useState(!1),[d,u]=p.useState(null),[c,x]=p.useState(null),[m,h]=p.useState(null),[v,S]=p.useState(null),[f,y]=p.useState(!1),[b,g]=p.useState(!1),[j,C]=p.useState(!1),T=p.useRef(null),E=p.useRef(null),D=p.useRef(null),I=B=>{if(!B)return"";let F=B.replace(/[\s:-]/g,"").toUpperCase();if(/^[0-9A-F]{8}$/.test(F))return F;if(/^[0-9A-F]+$/.test(F))return F.length%2!==0&&(F="0"+F),(F.match(/.{2}/g)||[]).reverse().join("");if(/^\d+$/.test(F)){let N=BigInt(F).toString(16).toUpperCase();for(N.length%2!==0&&(N="0"+N);N.length<8;)N="0"+N;return(N.match(/.{2}/g)||[]).reverse().join("")}return F},z=B=>{const F=B.target.value.toUpperCase();l({...n,rfidUId:F}),x(null),F.trim()&&(T.current&&clearTimeout(T.current),T.current=setTimeout(async()=>{const $=I(F.trim());if($.length>=8){y(!0);try{const N=await Z.get(`/admin/sysad/users/check-rfid?rfidUId=${$}`);x(N.available?"available":"taken")}catch{x(null)}finally{y(!1)}}},300))},Y=B=>{const F=B.target.value;l({...n,email:F}),h(null),F.trim()&&(E.current&&clearTimeout(E.current),E.current=setTimeout(async()=>{if(F.includes("@")){g(!0);try{const $=await Z.get(`/admin/sysad/users/check-email?email=${encodeURIComponent(F.trim())}`);h($.available?"available":"taken")}catch{h(null)}finally{g(!1)}}},300))},_=B=>{const F=B.target.value;l({...n,schoolUId:F}),S(null),F.trim()&&(D.current&&clearTimeout(D.current),D.current=setTimeout(async()=>{if(F.length>=6){C(!0);try{const $=await Z.get(`/admin/sysad/users/check-schoolid?schoolUId=${encodeURIComponent(F.trim())}`);S($.available?"available":"taken")}catch{S(null)}finally{C(!1)}}},300))},V=async B=>{var $,N;B.preventDefault(),u(null);const F=n.role==="admin";if(!F&&!n.rfidUId.trim()){u("RFID is required for student/employee");return}if(!F&&c==="taken"){u("RFID already registered");return}if(!n.firstName||!n.lastName||!n.email||!n.schoolUId){u("Fill in all required fields");return}if(m==="taken"){u("Email already registered");return}if(v==="taken"){u("School ID already registered");return}if(F&&!n.adminRole){u("Select an admin type");return}i(!0);try{const w=Math.floor(1e5+Math.random()*9e5).toString(),k={...n,rfidUId:F?void 0:I(n.rfidUId.trim()),pin:w,role:F?n.adminRole:n.role};delete k.adminRole,await Z.post("/admin/sysad/users",k),s()}catch(w){u(((N=($=w.response)==null?void 0:$.data)==null?void 0:N.message)||w.message||"Failed to create user")}finally{i(!1)}},R={background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary};return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:r,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-lg overflow-hidden",onClick:B=>B.stopPropagation(),children:[t.jsxs("div",{style:{background:a?"linear-gradient(135deg, rgba(255,212,28,0.3) 0%, rgba(255,212,28,0.1) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.3) 0%, rgba(59,130,246,0.1) 100%)"},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("h3",{style:{color:e.accent.primary},className:"text-xl font-bold flex items-center gap-2",children:[t.jsx(Au,{className:"w-5 h-5"})," Add New User"]}),t.jsx("button",{onClick:r,style:{color:e.text.secondary},className:"hover:opacity-70",children:t.jsx(ft,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:V,className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[d&&t.jsxs("div",{style:{background:"rgba(239,68,68,0.15)",borderColor:"rgba(239,68,68,0.3)"},className:"p-3 rounded-xl border flex items-center gap-2",children:[t.jsx(vt,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),t.jsx("p",{className:"text-red-500 text-sm",children:d})]}),n.role!=="admin"&&t.jsxs("div",{children:[t.jsxs("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:["RFID Tag ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(la,{style:{color:e.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),t.jsx("input",{type:"text",value:n.rfidUId,onChange:z,placeholder:"Scan or enter RFID...",style:{...R,borderColor:c==="taken"?"#EF4444":c==="available"?"#10B981":e.border.primary},className:"w-full pl-10 pr-10 py-2.5 rounded-xl border text-sm focus:outline-none font-mono"}),f&&t.jsx(Oe,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 animate-spin text-blue-500"}),c==="available"&&!f&&t.jsx(yt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"}),c==="taken"&&!f&&t.jsx(vt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-red-500"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"First Name *"}),t.jsx("input",{type:"text",value:n.firstName,onChange:B=>l({...n,firstName:B.target.value}),style:R,className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Middle Name"}),t.jsx("input",{type:"text",value:n.middleName,onChange:B=>l({...n,middleName:B.target.value}),style:R,className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Last Name *"}),t.jsx("input",{type:"text",value:n.lastName,onChange:B=>l({...n,lastName:B.target.value}),style:R,className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Email *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"email",value:n.email,onChange:Y,style:{...R,borderColor:m==="taken"?"#EF4444":m==="available"?"#10B981":e.border.primary},className:"w-full px-4 pr-10 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0}),b&&t.jsx(Oe,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 animate-spin text-blue-500"}),m==="available"&&!b&&t.jsx(yt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"}),m==="taken"&&!b&&t.jsx(vt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-red-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"School ID *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:n.schoolUId,onChange:_,style:{...R,borderColor:v==="taken"?"#EF4444":v==="available"?"#10B981":e.border.primary},className:"w-full px-4 pr-10 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0}),j&&t.jsx(Oe,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 animate-spin text-blue-500"}),v==="available"&&!j&&t.jsx(yt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"}),v==="taken"&&!j&&t.jsx(vt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-red-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"User Role *"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"student",label:"Student",icon:""},{value:"employee",label:"Employee",icon:""},{value:"admin",label:"Admin",icon:""}].map(B=>t.jsxs("button",{type:"button",onClick:()=>l({...n,role:B.value,adminRole:""}),style:{background:n.role===B.value?e.accent.primary:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.role===B.value?a?"#181D40":"#FFFFFF":e.text.primary,borderColor:n.role===B.value?e.accent.primary:e.border.primary},className:"py-3 rounded-xl border font-semibold text-sm transition-all hover:opacity-90 flex items-center justify-center gap-2",children:[t.jsx("span",{children:B.icon})," ",B.label]},B.value))})]}),n.role==="admin"&&t.jsxs("div",{children:[t.jsxs("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:["Admin Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[{value:"sysad",label:"System Admin",color:"#8B5CF6"},{value:"treasury",label:"Treasury",color:"#10B981"},{value:"accounting",label:"Accounting",color:"#A855F7"},{value:"motorpool",label:"Motorpool",color:"#F59E0B"},{value:"merchant",label:"Merchant",color:"#EC4899"}].map(B=>t.jsx("button",{type:"button",onClick:()=>l({...n,adminRole:B.value}),style:{background:n.adminRole===B.value?B.color:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.adminRole===B.value?"#FFFFFF":e.text.primary,borderColor:n.adminRole===B.value?B.color:e.border.primary},className:"py-2.5 rounded-xl border font-semibold text-xs transition-all hover:opacity-90",children:B.label},B.value))})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:r,style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition hover:opacity-80",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:o||c==="taken",style:{background:e.accent.primary,color:a?"#181D40":"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-semibold transition hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2",children:[o?t.jsx(Oe,{className:"w-4 h-4 animate-spin"}):t.jsx(yt,{className:"w-4 h-4"}),o?"Creating...":"Create User"]})]})]})]})]})}function D4({theme:e,isDarkMode:a,onClose:r}){const[s,n]=p.useState([]),[l,o]=p.useState(!0),[i,d]=p.useState(""),[u,c]=p.useState(null),[x,m]=p.useState("search"),[h,v]=p.useState(""),[S,f]=p.useState(!1),y=j=>{if(!j)return"";const C=j.toUpperCase();if(/^[0-9A-F]+$/.test(C))return C;const T=parseInt(C,10);return isNaN(T)?C:T.toString(16).toUpperCase()};p.useEffect(()=>{b()},[i]);const b=async()=>{o(!0);try{const j=new URLSearchParams({page:1,limit:50});i&&j.append("search",i);const C=await Z.get(`/admin/sysad/users?${j}`);n((C.users||[]).filter(T=>T._type!=="admin"))}catch{n([])}finally{o(!1)}},g=async()=>{f(!0);try{await Z.post("/admin/sysad/transfer-card",{oldCardUid:u.rfidUId,newCardUid:y(h.trim()),adminId:"sysad"}),m("done")}catch{W.error("Transfer failed. Please try again.")}finally{f(!1)}};return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:r,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-2xl max-h-[85vh] overflow-hidden",onClick:j=>j.stopPropagation(),children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16,185,129,0.3) 0%, rgba(16,185,129,0.1) 100%)"},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("h3",{className:"text-xl font-bold text-emerald-500 flex items-center gap-2",children:[t.jsx(la,{className:"w-5 h-5"})," Transfer RFID Card"]}),t.jsx("button",{onClick:r,style:{color:e.text.secondary},className:"hover:opacity-70",children:t.jsx(ft,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 max-h-[65vh] overflow-y-auto",children:[x==="search"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(vr,{style:{color:e.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search user by name, ID, email...",value:i,onChange:j=>d(j.target.value),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full pl-10 pr-4 py-2.5 rounded-xl border text-sm focus:outline-none"})]}),l?t.jsx("div",{className:"text-center py-10",children:t.jsx(Oe,{className:"w-6 h-6 animate-spin mx-auto text-emerald-500"})}):s.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-10",children:[t.jsx(Ls,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),t.jsx("p",{children:"No users found"})]}):t.jsx("div",{className:"space-y-2 max-h-[40vh] overflow-y-auto",children:s.map(j=>t.jsxs("button",{onClick:()=>{c(j),m("rfid")},style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"w-full p-3 rounded-xl border flex items-center justify-between hover:border-emerald-500 transition-all text-left",children:[t.jsxs("div",{children:[t.jsxs("p",{style:{color:e.text.primary},className:"font-semibold",children:[j.firstName," ",j.lastName]}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-xs",children:[j.schoolUId||j.email,"  RFID: ",j.rfidUId||"None"]})]}),t.jsx(za,{className:"w-4 h-4 text-emerald-500"})]},j._id))})]}),x==="rfid"&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs uppercase font-semibold mb-1",children:"Selected User"}),t.jsxs("p",{style:{color:e.text.primary},className:"font-bold",children:[u==null?void 0:u.firstName," ",u==null?void 0:u.lastName]}),t.jsxs("p",{style:{color:e.text.muted},className:"text-xs",children:["Current RFID: ",(u==null?void 0:u.rfidUId)||"N/A"]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"New RFID Tag"}),t.jsx("input",{type:"text",value:h,onChange:j=>v(j.target.value.toUpperCase()),placeholder:"Scan or enter new RFID...",style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:"rgba(16,185,129,0.3)"},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none font-mono text-lg",autoFocus:!0})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{m("search"),v("")},style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"flex-1 py-3 rounded-xl font-semibold",children:" Back"}),t.jsx("button",{onClick:()=>m("confirm"),disabled:!h.trim(),className:"flex-1 py-3 rounded-xl font-bold bg-emerald-500 text-white disabled:opacity-50",children:"Continue "})]})]}),x==="confirm"&&t.jsxs("div",{className:"space-y-5 text-center",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.15)"},className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto",children:t.jsx(za,{className:"w-8 h-8 text-emerald-500"})}),t.jsx("h3",{style:{color:e.text.primary},className:"text-xl font-bold",children:"Confirm Transfer"}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:["Transfer ",u==null?void 0:u.firstName," ",u==null?void 0:u.lastName,"'s account?"]}),t.jsxs("div",{className:"space-y-3 text-left",children:[t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"p-3 rounded-xl border",children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs",children:"Current RFID"}),t.jsx("p",{style:{color:e.text.primary},className:"font-mono font-semibold",children:u==null?void 0:u.rfidUId})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx(za,{className:"w-5 h-5 text-emerald-500"})}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:"rgba(16,185,129,0.3)"},className:"p-3 rounded-xl border",children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs",children:"New RFID"}),t.jsx("p",{className:"font-mono font-semibold text-emerald-500",children:y(h)})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>m("rfid"),style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"flex-1 py-3 rounded-xl font-semibold",children:" Back"}),t.jsx("button",{onClick:g,disabled:S,className:"flex-1 py-3 rounded-xl font-bold bg-emerald-500 text-white disabled:opacity-50 flex items-center justify-center gap-2",children:S?t.jsxs(t.Fragment,{children:[t.jsx(Oe,{className:"w-4 h-4 animate-spin"})," Processing..."]}):"Confirm Transfer"})]})]}),x==="done"&&t.jsxs("div",{className:"text-center py-6",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.15)"},className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Ve,{className:"w-8 h-8 text-emerald-500"})}),t.jsx("h3",{style:{color:e.text.primary},className:"text-xl font-bold mb-2",children:"Transfer Successful!"}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm mb-6",children:["A new OTP has been sent to ",u==null?void 0:u.email," for activation."]}),t.jsx("button",{onClick:r,className:"px-8 py-3 rounded-xl font-bold bg-emerald-500 text-white hover:opacity-90",children:"Done"})]})]})]})]})}function as({icon:e,label:a,value:r,color:s,theme:n,isDarkMode:l,large:o}){return t.jsxs("div",{style:{background:n.bg.card,borderColor:`${s}30`},className:`p-4 rounded-xl border flex items-center gap-4 ${o?"col-span-1":""}`,children:[t.jsx("div",{style:{background:`${s}20`},className:"w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx("div",{style:{color:s},children:e})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{style:{color:n.text.secondary},className:"text-xs font-semibold uppercase truncate",children:a}),t.jsx("p",{style:{color:s},className:`font-bold truncate ${o?"text-xl":"text-lg"}`,children:r})]})]})}function _4({isOpen:e,onClose:a,type:r="success",title:s,message:n}){const{theme:l,isDarkMode:o}=ne();if(!e)return null;const i={success:{icon:Ve,color:"#10B981",bg:"rgba(16,185,129,0.15)"},error:{icon:ij,color:"#EF4444",bg:"rgba(239,68,68,0.15)"},warning:{icon:fa,color:"#F59E0B",bg:"rgba(245,158,11,0.15)"},info:{icon:Lb,color:"#3B82F6",bg:"rgba(59,130,246,0.15)"}},d=i[r]||i.success,u=d.icon;return t.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),t.jsxs("div",{style:{background:o?"#1E2347":"#FFFFFF",borderColor:d.color},className:"relative rounded-2xl shadow-2xl border-2 w-full max-w-sm overflow-hidden animate-modalSlide",children:[t.jsxs("div",{style:{background:d.bg},className:"p-6 flex flex-col items-center text-center",children:[t.jsx("div",{style:{background:d.bg,color:d.color},className:"w-16 h-16 rounded-full flex items-center justify-center mb-4",children:t.jsx(u,{className:"w-8 h-8"})}),t.jsx("h3",{style:{color:d.color},className:"text-xl font-bold mb-2",children:s}),t.jsx("p",{style:{color:l.text.secondary},className:"text-sm",children:n})]}),t.jsx("div",{className:"p-4",children:t.jsx("button",{onClick:a,style:{background:d.color,color:"#FFFFFF"},className:"w-full py-3 rounded-xl font-semibold transition-all hover:opacity-90",children:"OK"})})]}),t.jsx("style",{children:`
        @keyframes modalSlide { from { opacity: 0; transform: scale(0.9) translateY(-20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .animate-modalSlide { animation: modalSlide 0.25s ease-out; }
      `})]})}function M4({isOpen:e,onClose:a,onConfirm:r,title:s,message:n,confirmText:l="Confirm",cancelText:o="Cancel",type:i="warning"}){const{theme:d,isDarkMode:u}=ne();if(!e)return null;const c={danger:{color:"#EF4444",bg:"rgba(239,68,68,0.15)",icon:fa},warning:{color:"#F59E0B",bg:"rgba(245,158,11,0.15)",icon:fa},info:{color:"#3B82F6",bg:"rgba(59,130,246,0.15)",icon:Lb}},x=c[i]||c.warning,m=x.icon;return t.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),t.jsxs("div",{style:{background:u?"#1E2347":"#FFFFFF",borderColor:d.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-sm overflow-hidden animate-modalSlide",children:[t.jsxs("div",{className:"p-6 flex flex-col items-center text-center",children:[t.jsx("div",{style:{background:x.bg,color:x.color},className:"w-16 h-16 rounded-full flex items-center justify-center mb-4",children:t.jsx(m,{className:"w-8 h-8"})}),t.jsx("h3",{style:{color:d.text.primary},className:"text-xl font-bold mb-2",children:s}),t.jsx("p",{style:{color:d.text.secondary},className:"text-sm",children:n})]}),t.jsxs("div",{className:"p-4 flex gap-3",children:[t.jsx("button",{onClick:a,style:{background:u?"rgba(71,85,105,0.5)":"#E5E7EB",color:d.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:o}),t.jsx("button",{onClick:r,style:{background:x.color,color:"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-90",children:l})]})]}),t.jsx("style",{children:`
        @keyframes modalSlide { from { opacity: 0; transform: scale(0.9) translateY(-20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .animate-modalSlide { animation: modalSlide 0.25s ease-out; }
      `})]})}function I4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(""),[d,u]=p.useState("all"),[c,x]=p.useState("all"),[m,h]=p.useState("createdAt"),[v,S]=p.useState(1),[f,y]=p.useState(1),[b,g]=p.useState(0),[j,C]=p.useState(!1),[T,E]=p.useState(!1),[D,I]=p.useState(null),[z,Y]=p.useState({total:0,active:0,inactive:0,admins:0,employees:0,students:0}),_=p.useRef(null),V=20,[R,B]=p.useState({isOpen:!1,type:"success",title:"",message:""}),[F,$]=p.useState({isOpen:!1,title:"",message:"",onConfirm:null,type:"warning"}),N=(U,H,J)=>{B({isOpen:!0,type:U,title:H,message:J})},w=(U,H,J,ee="warning")=>{$({isOpen:!0,title:U,message:H,onConfirm:J,type:ee})},k=async(U=!1)=>{var H,J;try{U||l(!0);const ee=new URLSearchParams({page:v,limit:V,sortBy:m});o&&ee.append("search",o),d!=="all"&&ee.append("role",d),c!=="all"&&ee.append("status",c);const[L,X]=await Promise.all([Z.get(`/admin/sysad/users?${ee}`),Z.get("/admin/sysad/users/metrics")]);L&&(s(L.users||[]),y(((H=L.pagination)==null?void 0:H.pages)||1),g(((J=L.pagination)==null?void 0:J.total)||0)),X!=null&&X.metrics&&Y(X.metrics)}catch{U||N("error","Load Failed","Failed to load users. Please try again.")}finally{U||l(!1)}};p.useEffect(()=>{k()},[v,o,d,c,m]),p.useEffect(()=>(_.current=setInterval(()=>k(!0),6e4),()=>{_.current&&clearInterval(_.current)}),[]);const A=()=>{const U=r.map(H=>({"ID Number":H.schoolUId||H.adminId||"N/A",RFID:H.rfidUId||"N/A",Name:`${H.firstName||""} ${H.lastName||""}`.trim(),Email:H.email||"N/A",Role:H.role||"user",Status:H.isActive?"Active":"Inactive",Balance:H.balance||0,Created:new Date(H.createdAt).toLocaleDateString()}));zt(U,`users-export-${m}`),N("success","Export Complete","Users have been exported to CSV successfully.")},O=async U=>{w("Delete User","Are you sure you want to delete this user? This action cannot be undone.",async()=>{$({...F,isOpen:!1});try{await Z.delete(`/admin/sysad/users/${U}`),N("success","User Deleted","The user has been deleted successfully."),k(!0)}catch{N("error","Delete Failed","Failed to delete user. Please try again.")}},"danger")},q=async(U,H)=>{try{await Z.patch(`/admin/sysad/users/${U}/toggle-status`),N("success","Status Updated",`User has been ${H?"deactivated":"activated"} successfully.`),k(!0)}catch{N("error","Update Failed","Failed to update user status. Please try again.")}};return t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsx("style",{children:`
        @keyframes tableRowFade { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        .animate-tableRowFade { animation: tableRowFade 0.3s ease-out both; }
      `}),t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Manage Users"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"View, add, edit, and manage all system users"})]}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 mb-5",children:[t.jsx(rs,{icon:t.jsx(Ls,{className:"w-5 h-5"}),label:"Total Users",value:z.total,color:"#3B82F6",theme:e}),t.jsx(rs,{icon:t.jsx(xd,{className:"w-5 h-5"}),label:"Active",value:z.active,color:"#10B981",theme:e}),t.jsx(rs,{icon:t.jsx(fd,{className:"w-5 h-5"}),label:"Inactive",value:z.inactive,color:"#EF4444",theme:e}),t.jsx(rs,{icon:t.jsx(ii,{className:"w-5 h-5"}),label:"Admins",value:z.admins,color:a?"#FFD41C":"#3B82F6",theme:e}),t.jsx(rs,{icon:t.jsx(Db,{className:"w-5 h-5"}),label:"Employees",value:z.employees,color:"#F59E0B",theme:e}),t.jsx(rs,{icon:t.jsx(Ib,{className:"w-5 h-5"}),label:"Students",value:z.students,color:"#06B6D4",theme:e})]}),t.jsx("div",{style:{background:a?"rgba(15,18,39,0.8)":e.bg.card,borderColor:e.accent.primary},className:"rounded-xl border-2 p-4 mb-5",children:t.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between",children:[t.jsxs("div",{className:"flex flex-wrap gap-3 items-center flex-1",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-[300px]",children:[t.jsx(vr,{style:{color:e.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search by name, ID, email...",value:o,onChange:U=>{i(U.target.value),S(1)},style:{background:a?"rgba(30,35,71,0.8)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full pl-10 pr-4 py-2 rounded-xl border text-sm focus:outline-none transition-all focus:ring-2 focus:ring-opacity-50"})]}),t.jsx("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:a?"rgba(30,35,71,0.8)":"#F3F4F6"},children:[{value:"all",label:"All"},{value:"student",label:"Students"},{value:"employee",label:"Employees"},{value:"admin",label:"Admins"}].map(U=>t.jsx("button",{onClick:()=>{u(U.value),S(1)},style:{background:d===U.value?e.accent.primary:"transparent",color:d===U.value?a?"#181D40":"#FFFFFF":e.text.secondary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all hover:opacity-80",children:U.label},U.value))}),t.jsx("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:a?"rgba(30,35,71,0.8)":"#F3F4F6"},children:[{value:"all",label:"All",color:null},{value:"active",label:"Active",color:"#10B981"},{value:"inactive",label:"Inactive",color:"#EF4444"}].map(U=>t.jsx("button",{onClick:()=>{x(U.value),S(1)},style:{background:c===U.value?U.color||e.accent.primary:"transparent",color:c===U.value?"#FFFFFF":e.text.secondary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all hover:opacity-80",children:U.label},U.value))}),t.jsx("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:a?"rgba(30,35,71,0.8)":"#F3F4F6"},children:[{value:"createdAt",label:"Date"},{value:"lastName",label:"Name"},{value:"role",label:"Role"}].map(U=>t.jsx("button",{onClick:()=>{h(U.value),S(1)},style:{background:m===U.value?e.accent.primary:"transparent",color:m===U.value?a?"#181D40":"#FFFFFF":e.text.secondary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all hover:opacity-80",children:U.label},U.value))}),t.jsxs("button",{onClick:A,style:{background:"rgba(16,185,129,0.15)",color:"#10B981",borderColor:"rgba(16,185,129,0.3)"},className:"px-4 py-2 rounded-xl font-semibold text-sm border flex items-center gap-2 hover:opacity-80 transition-all",children:[t.jsx(Mb,{className:"w-4 h-4"}),"Export"]})]}),t.jsx("div",{className:"flex gap-3",children:t.jsxs("button",{onClick:()=>C(!0),style:{background:e.accent.primary,color:a?"#181D40":"#FFFFFF"},className:"px-4 py-2 rounded-xl font-semibold text-sm flex items-center gap-2 hover:opacity-90 transition-all shadow-lg",children:[t.jsx(Au,{className:"w-4 h-4"}),"Add User"]})})]})}),t.jsx("div",{className:"mb-4 flex justify-between items-center",children:t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:["Showing ",t.jsx("span",{style:{color:e.accent.primary},className:"font-bold",children:r.length})," of ",b," users"]})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx(Oe,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),"Loading users..."]}):r.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx(Ls,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"font-semibold",children:"No users found"}),t.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your search or filters"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"ID Number"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Name"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Email"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Role"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-center p-4 text-xs font-bold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:r.map((U,H)=>t.jsxs("tr",{style:{borderColor:e.border.primary,animationDelay:`${H*30}ms`},className:"border-b hover:bg-white/5 transition-all duration-200 animate-tableRowFade",children:[t.jsx("td",{style:{color:e.text.primary},className:"p-4 font-mono font-semibold",children:U.schoolUId||U.adminId||"N/A"}),t.jsx("td",{style:{color:e.text.primary},className:"p-4 font-semibold",children:`${U.firstName||""} ${U.lastName||""}`.trim()||"N/A"}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4",children:U.email||"N/A"}),t.jsx("td",{className:"p-4",children:t.jsx(L4,{role:U.role,isDarkMode:a})}),t.jsx("td",{className:"p-4",children:t.jsx(O4,{isActive:U.isActive})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("button",{onClick:()=>{I(U),E(!0)},style:{background:"rgba(59,130,246,0.15)",color:"#3B82F6",borderColor:"rgba(59,130,246,0.3)"},className:"px-3 py-1.5 rounded-lg hover:opacity-80 transition-all text-xs font-semibold border",children:"Edit"}),t.jsx("button",{onClick:()=>q(U._id,U.isActive),style:{background:U.isActive?"rgba(239,68,68,0.15)":"rgba(16,185,129,0.15)",color:U.isActive?"#EF4444":"#10B981",borderColor:U.isActive?"rgba(239,68,68,0.3)":"rgba(16,185,129,0.3)"},className:"px-3 py-1.5 rounded-lg hover:opacity-80 transition-all text-xs font-semibold border",children:U.isActive?"Deactivate":"Activate"}),t.jsx("button",{onClick:()=>O(U._id),style:{background:"rgba(239,68,68,0.15)",color:"#EF4444",borderColor:"rgba(239,68,68,0.3)"},className:"px-3 py-1.5 rounded-lg hover:opacity-80 transition-all text-xs font-semibold border",children:"Delete"})]})})]},U._id))})]})})}),f>1&&t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"mt-4 flex justify-between items-center p-4 rounded-xl border",children:[t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:["Page ",v," of ",f]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>S(Math.max(1,v-1)),disabled:v===1,style:{background:v===1?"rgba(255,255,255,0.05)":a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",color:v===1?e.text.muted:e.accent.primary,borderColor:e.border.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm border disabled:cursor-not-allowed transition",children:"Previous"}),t.jsx("button",{onClick:()=>S(Math.min(f,v+1)),disabled:v===f,style:{background:v===f?"rgba(255,255,255,0.05)":a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",color:v===f?e.text.muted:e.accent.primary,borderColor:e.border.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm border disabled:cursor-not-allowed transition",children:"Next"})]})]})]}),j&&t.jsx($4,{theme:e,isDarkMode:a,onClose:()=>C(!1),onSuccess:()=>{C(!1),k(!0),N("success","User Created","New user has been created successfully.")},showNotification:N}),T&&D&&t.jsx(U4,{theme:e,isDarkMode:a,user:D,onClose:()=>{E(!1),I(null)},onSuccess:()=>{E(!1),I(null),k(!0),N("success","User Updated","User information has been updated successfully.")}}),t.jsx(_4,{isOpen:R.isOpen,onClose:()=>B({...R,isOpen:!1}),type:R.type,title:R.title,message:R.message}),t.jsx(M4,{isOpen:F.isOpen,onClose:()=>$({...F,isOpen:!1}),onConfirm:F.onConfirm,title:F.title,message:F.message,type:F.type,confirmText:"Delete",cancelText:"Cancel"})]})}function rs({icon:e,label:a,value:r,color:s,theme:n}){return t.jsxs("div",{style:{background:n.bg.card,borderColor:`${s}25`},className:"p-4 rounded-xl border flex items-center gap-3 transition-all duration-300 hover:shadow-lg hover:scale-[1.02] cursor-default",children:[t.jsx("div",{style:{background:`${s}15`,color:s},className:"w-11 h-11 rounded-xl flex items-center justify-center transition-transform duration-300",children:e}),t.jsxs("div",{children:[t.jsx("p",{style:{color:n.text.secondary},className:"text-[10px] font-semibold uppercase tracking-wide",children:a}),t.jsx("p",{style:{color:s},className:"text-xl font-bold",children:(r==null?void 0:r.toLocaleString())||0})]})]})}function L4({role:e,isDarkMode:a}){const r={admin:{bg:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",color:a?"#FFD41C":"#3B82F6",label:"Admin"},sysad:{bg:"rgba(139,92,246,0.15)",color:"#8B5CF6",label:"System Admin"},treasury:{bg:"rgba(16,185,129,0.15)",color:"#10B981",label:"Treasury"},accounting:{bg:"rgba(168,85,247,0.15)",color:"#A855F7",label:"Accounting"},motorpool:{bg:"rgba(245,158,11,0.15)",color:"#F59E0B",label:"Motorpool"},merchant:{bg:"rgba(236,72,153,0.15)",color:"#EC4899",label:"Merchant"},student:{bg:"rgba(6,182,212,0.15)",color:"#06B6D4",label:"Student"},employee:{bg:"rgba(245,158,11,0.15)",color:"#F59E0B",label:"Employee"},user:{bg:"rgba(107,114,128,0.15)",color:"#6B7280",label:"User"}},{bg:s,color:n,label:l}=r[e]||r.user;return t.jsx("span",{style:{background:s,color:n,borderColor:`${n}30`},className:"px-2.5 py-1 rounded-lg text-xs font-semibold border",children:l})}function O4({isActive:e}){return t.jsxs("span",{style:{background:e?"rgba(16,185,129,0.12)":"rgba(239,68,68,0.12)",color:e?"#10B981":"#EF4444",borderColor:e?"rgba(16,185,129,0.25)":"rgba(239,68,68,0.25)"},className:"px-2.5 py-1 rounded-lg text-xs font-semibold border inline-flex items-center gap-1",children:[t.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${e?"bg-emerald-500":"bg-red-500"}`}),e?"Active":"Inactive"]})}const rc=e=>{if(!e)return"";let a=e.replace(/[\s:-]/g,"").toUpperCase();if(/^[0-9A-F]{8}$/.test(a))return a;if(/^[0-9A-F]+$/.test(a))return a.length%2!==0&&(a="0"+a),(a.match(/.{2}/g)||[]).reverse().join("");if(/^\d+$/.test(a)){let s=BigInt(a).toString(16).toUpperCase();for(s.length%2!==0&&(s="0"+s);s.length<8;)s="0"+s;return(s.match(/.{2}/g)||[]).reverse().join("")}return a};function $4({theme:e,isDarkMode:a,onClose:r,onSuccess:s,showNotification:n}){const[l,o]=p.useState({rfidUId:"",firstName:"",middleName:"",lastName:"",email:"",schoolUId:"",role:"student",adminRole:""}),[i,d]=p.useState(!1),[u,c]=p.useState(!1),[x,m]=p.useState(!1),[h,v]=p.useState(!1),[S,f]=p.useState(null),[y,b]=p.useState(null),[g,j]=p.useState(null),[C,T]=p.useState(null),E=p.useRef(null);p.useEffect(()=>{E.current&&setTimeout(()=>{var F;return(F=E.current)==null?void 0:F.focus()},100)},[]);const D=p.useRef(null),I=p.useRef(null),z=p.useRef(null),Y=async F=>{const $=F.target.value.toUpperCase();o({...l,rfidUId:$}),f(null),T(null),$.trim()&&(D.current&&clearTimeout(D.current),D.current=setTimeout(async()=>{const N=rc($.trim());if(N.length>=8){c(!0);try{const w=await Z.get(`/admin/sysad/users/check-rfid?rfidUId=${N}`);f(w.available===!0?"available":"taken")}catch(w){console.error("RFID check error:",w),f(null)}finally{c(!1)}}},300))},_=async F=>{const $=F.target.value;o({...l,email:$}),b(null),T(null),$.trim()&&(I.current&&clearTimeout(I.current),I.current=setTimeout(async()=>{if($.includes("@")){m(!0);try{const N=await Z.get(`/admin/sysad/users/check-email?email=${encodeURIComponent($.trim())}`);b(N.available===!0?"available":"taken")}catch(N){console.error("Email check error:",N),b(null)}finally{m(!1)}}},300))},V=async F=>{const $=F.target.value;o({...l,schoolUId:$}),j(null),T(null),$.trim()&&(z.current&&clearTimeout(z.current),z.current=setTimeout(async()=>{if($.length>=6){v(!0);try{const N=await Z.get(`/admin/sysad/users/check-schoolid?schoolUId=${encodeURIComponent($.trim())}`);j(N.available===!0?"available":"taken")}catch(N){console.error("School ID check error:",N),j(null)}finally{v(!1)}}},300))},R=()=>Math.floor(1e5+Math.random()*9e5).toString(),B=async F=>{var N,w;F.preventDefault(),T(null);const $=l.role==="admin";if(!$){if(!l.rfidUId.trim()){T("RFID is required for student/employee accounts");return}if(S==="taken"){T("This RFID is already registered to another user");return}}if(!l.firstName||!l.lastName||!l.email||!l.schoolUId){T("Please fill in all required fields");return}if(y==="taken"){T("This email is already registered");return}if(g==="taken"){T("This School ID is already registered");return}if($&&!l.adminRole){T("Please select an admin type");return}d(!0);try{const k=R(),A={...l,rfidUId:$?void 0:rc(l.rfidUId.trim()),pin:k,role:$?l.adminRole:l.role};delete A.adminRole;const O=await Z.post("/admin/sysad/users",A),q=$?"Admin":"User";O.emailSent?n==null||n("success",`${q} created! Temporary PIN sent to ${l.email}`):n==null||n("warning",`${q} created but email failed. Temporary PIN: ${k}`),s()}catch(k){T(((w=(N=k.response)==null?void 0:N.data)==null?void 0:w.message)||k.message||"Failed to create user")}finally{d(!1)}};return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:r,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-lg overflow-hidden animate-fadeIn",onClick:F=>F.stopPropagation(),children:[t.jsxs("div",{style:{background:a?"linear-gradient(135deg, rgba(255,212,28,0.3) 0%, rgba(255,212,28,0.1) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.3) 0%, rgba(59,130,246,0.1) 100%)"},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("h3",{style:{color:e.accent.primary},className:"text-xl font-bold flex items-center gap-2",children:[t.jsx(Au,{className:"w-5 h-5"})," Add New User"]}),t.jsx("button",{onClick:r,style:{color:e.text.secondary},className:"hover:opacity-70",children:t.jsx(ft,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:B,className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[C&&t.jsxs("div",{style:{background:"rgba(239,68,68,0.15)",borderColor:"rgba(239,68,68,0.3)"},className:"p-3 rounded-xl border flex items-center gap-2",children:[t.jsx(vt,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),t.jsx("p",{className:"text-red-500 text-sm",children:C})]}),l.role!=="admin"&&t.jsxs("div",{children:[t.jsxs("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:["RFID Tag ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(la,{style:{color:e.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),t.jsx("input",{ref:E,type:"text",value:l.rfidUId,onChange:Y,placeholder:"Scan or enter RFID...",style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:S==="taken"?"#EF4444":S==="available"?"#10B981":e.border.primary},className:"w-full pl-10 pr-10 py-2.5 rounded-xl border text-sm focus:outline-none font-mono"}),u&&t.jsx(Oe,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 animate-spin text-blue-500"}),S==="available"&&!u&&t.jsx(yt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"}),S==="taken"&&!u&&t.jsx(vt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-red-500"})]}),S==="taken"&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:"This RFID is already registered to another user"}),S==="available"&&t.jsx("p",{className:"text-green-500 text-xs mt-1",children:"RFID is available"}),l.rfidUId&&!S&&t.jsxs("p",{style:{color:e.text.tertiary},className:"text-xs mt-1",children:["Will be stored as: ",t.jsx("span",{className:"font-mono",children:rc(l.rfidUId)})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"First Name *"}),t.jsx("input",{type:"text",value:l.firstName,onChange:F=>o({...l,firstName:F.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Middle Name"}),t.jsx("input",{type:"text",value:l.middleName,onChange:F=>o({...l,middleName:F.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Last Name *"}),t.jsx("input",{type:"text",value:l.lastName,onChange:F=>o({...l,lastName:F.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Email *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"email",value:l.email,onChange:_,style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:y==="taken"?"#EF4444":y==="available"?"#10B981":e.border.primary},className:"w-full px-4 pr-10 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0}),x&&t.jsx(Oe,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 animate-spin text-blue-500"}),y==="available"&&!x&&t.jsx(yt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"}),y==="taken"&&!x&&t.jsx(vt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-red-500"})]}),y==="taken"&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:"This email is already registered"}),y==="available"&&t.jsx("p",{className:"text-green-500 text-xs mt-1",children:"Email is available"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"School ID *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:l.schoolUId,onChange:V,style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:g==="taken"?"#EF4444":g==="available"?"#10B981":e.border.primary},className:"w-full px-4 pr-10 py-2.5 rounded-xl border text-sm focus:outline-none transition-all",required:!0}),h&&t.jsx(Oe,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 animate-spin text-blue-500"}),g==="available"&&!h&&t.jsx(yt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"}),g==="taken"&&!h&&t.jsx(vt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-red-500"})]}),g==="taken"&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:"This School ID is already registered"}),g==="available"&&t.jsx("p",{className:"text-green-500 text-xs mt-1",children:"School ID is available"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"User Role *"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"student",label:"Student",icon:""},{value:"employee",label:"Employee",icon:""},{value:"admin",label:"Admin",icon:""}].map(F=>t.jsxs("button",{type:"button",onClick:()=>o({...l,role:F.value,adminRole:""}),style:{background:l.role===F.value?e.accent.primary:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:l.role===F.value?a?"#181D40":"#FFFFFF":e.text.primary,borderColor:l.role===F.value?e.accent.primary:e.border.primary},className:"py-3 rounded-xl border font-semibold text-sm transition-all hover:opacity-90 flex items-center justify-center gap-2",children:[t.jsx("span",{children:F.icon})," ",F.label]},F.value))})]}),l.role==="admin"&&t.jsxs("div",{children:[t.jsxs("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:["Admin Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[{value:"sysad",label:"System Admin",color:"#8B5CF6"},{value:"treasury",label:"Treasury",color:"#10B981"},{value:"accounting",label:"Accounting",color:"#A855F7"},{value:"motorpool",label:"Motorpool",color:"#F59E0B"},{value:"merchant",label:"Merchant",color:"#EC4899"}].map(F=>t.jsx("button",{type:"button",onClick:()=>o({...l,adminRole:F.value}),style:{background:l.adminRole===F.value?F.color:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:l.adminRole===F.value?"#FFFFFF":e.text.primary,borderColor:l.adminRole===F.value?F.color:e.border.primary},className:"py-2.5 rounded-xl border font-semibold text-xs transition-all hover:opacity-90",children:F.label},F.value))})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:r,style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition hover:opacity-80",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:i||S==="taken",style:{background:e.accent.primary,color:a?"#181D40":"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-semibold transition hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2",children:[i?t.jsx(Oe,{className:"w-4 h-4 animate-spin"}):t.jsx(yt,{className:"w-4 h-4"}),i?"Creating...":"Create User"]})]})]})]}),t.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .animate-fadeIn { animation: fadeIn 0.2s ease-out; }
        @keyframes tableRowFade { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-tableRowFade { animation: tableRowFade 0.3s ease-out both; }
      `})]})}function U4({theme:e,isDarkMode:a,user:r,onClose:s,onSuccess:n}){const[l,o]=p.useState({firstName:r.firstName||"",middleName:r.middleName||"",lastName:r.lastName||"",email:r.email||"",schoolUId:r.schoolUId||"",isActive:r.isActive!==!1}),[i,d]=p.useState(!1),[u,c]=p.useState(null),x=async m=>{if(m.preventDefault(),c(null),!l.firstName||!l.lastName||!l.email){c("Please fill in all required fields");return}d(!0);try{await Z.put(`/admin/sysad/users/${r._id}`,{firstName:l.firstName,lastName:l.lastName,email:l.email,studentId:l.schoolUId,status:l.isActive?"active":"inactive"}),n()}catch(h){c(h.message||"Failed to update user")}finally{d(!1)}};return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:s,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-lg overflow-hidden animate-fadeIn",onClick:m=>m.stopPropagation(),children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59,130,246,0.3) 0%, rgba(59,130,246,0.1) 100%)"},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("h3",{className:"text-xl font-bold text-blue-500 flex items-center gap-2",children:[t.jsx(Dj,{className:"w-5 h-5"})," Edit User"]}),t.jsx("button",{onClick:s,style:{color:e.text.secondary},className:"hover:opacity-70",children:t.jsx(ft,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[u&&t.jsxs("div",{style:{background:"rgba(239,68,68,0.15)",borderColor:"rgba(239,68,68,0.3)"},className:"p-3 rounded-xl border flex items-center gap-2",children:[t.jsx(vt,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),t.jsx("p",{className:"text-red-500 text-sm",children:u})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"First Name *"}),t.jsx("input",{type:"text",value:l.firstName,onChange:m=>o({...l,firstName:m.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Middle Name"}),t.jsx("input",{type:"text",value:l.middleName,onChange:m=>o({...l,middleName:m.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Last Name *"}),t.jsx("input",{type:"text",value:l.lastName,onChange:m=>o({...l,lastName:m.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Email *"}),t.jsx("input",{type:"email",value:l.email,onChange:m=>o({...l,email:m.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"School ID"}),t.jsx("input",{type:"text",value:l.schoolUId,onChange:m=>o({...l,schoolUId:m.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none"})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"p-4 rounded-xl border flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.primary},className:"font-semibold",children:"Account Status"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs",children:l.isActive?"User can access the system":"User cannot access the system"})]}),t.jsx("button",{type:"button",onClick:()=>o({...l,isActive:!l.isActive}),style:{background:l.isActive?"#10B981":"#EF4444"},className:"px-4 py-2 rounded-lg text-white font-semibold text-sm transition",children:l.isActive?"Active":"Inactive"})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:s,style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition hover:opacity-80",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:i,style:{background:"#3B82F6",color:"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-semibold transition hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2",children:[i?t.jsx(Oe,{className:"w-4 h-4 animate-spin"}):t.jsx(yt,{className:"w-4 h-4"}),i?"Saving...":"Save Changes"]})]})]})]}),t.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .animate-fadeIn { animation: fadeIn 0.2s ease-out; }
      `})]})}function P4({isOpen:e,onClose:a,type:r,title:s,message:n}){const{theme:l,isDarkMode:o}=ne();if(!e)return null;const i={success:{icon:Ve,color:"#10B981",bg:"rgba(16,185,129,0.15)"},error:{icon:fa,color:"#EF4444",bg:"rgba(239,68,68,0.15)"},warning:{icon:fa,color:"#F59E0B",bg:"rgba(245,158,11,0.15)"}},d=i[r]||i.success,u=d.icon;return t.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),t.jsxs("div",{style:{background:o?"#1E2347":"#FFFFFF",borderColor:d.color},className:"relative rounded-2xl shadow-2xl border-2 w-full max-w-sm overflow-hidden animate-modalSlide",children:[t.jsxs("div",{style:{background:d.bg},className:"p-6 flex flex-col items-center text-center",children:[t.jsx("div",{style:{background:d.bg,color:d.color},className:"w-16 h-16 rounded-full flex items-center justify-center mb-4",children:t.jsx(u,{className:"w-8 h-8"})}),t.jsx("h3",{style:{color:d.color},className:"text-xl font-bold mb-2",children:s}),t.jsx("p",{style:{color:l.text.secondary},className:"text-sm",children:n})]}),t.jsx("div",{className:"p-4",children:t.jsx("button",{onClick:a,style:{background:d.color},className:"w-full py-3 rounded-xl font-semibold text-white transition-all hover:opacity-90",children:"OK"})})]}),t.jsx("style",{children:`
        @keyframes modalSlide { from { opacity: 0; transform: scale(0.9) translateY(-20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .animate-modalSlide { animation: modalSlide 0.25s ease-out; }
      `})]})}function W4({isOpen:e,onClose:a,selectedUser:r}){const{theme:s,isDarkMode:n}=ne(),[l,o]=p.useState(1),[i,d]=p.useState(""),[u,c]=p.useState(!1),x=s.accent.primary,m=[{id:1,name:"RFID",icon:la},{id:2,name:"Details",icon:gd},{id:3,name:"Summary",icon:Ve},{id:4,name:"Complete",icon:Ve}],h=y=>{if(!y)return"";const b=y.toUpperCase();if(/^[0-9A-F]+$/.test(b))return b;const g=parseInt(b,10);return isNaN(g)?b:g.toString(16).toUpperCase()},v=()=>{i.trim()&&o(2)},S=async()=>{c(!0);try{const y=await Z.post("/admin/sysad/transfer-card",{oldCardUid:r.rfidUId,newCardUid:h(i.trim()),adminId:"sysad"});o(4)}catch(y){console.error("Transfer failed:",y),alert("Transfer failed. Please try again.")}finally{c(!1)}};if(!e)return null;const f=()=>{switch(l){case 1:return t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{className:"p-4 rounded-xl border flex items-start gap-3",style:{background:"rgba(255, 212, 28, 0.1)",borderColor:"rgba(255, 212, 28, 0.3)"},children:[t.jsx(la,{className:"w-5 h-5 mt-0.5 flex-shrink-0",style:{color:x}}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",style:{color:s.text.primary},children:"Scan New RFID Card"}),t.jsx("p",{className:"text-sm mt-1",style:{color:s.text.secondary},children:"Place the new RFID card on the scanner or type the RFID manually. Format will be automatically converted to Hex format (decimal  hex, hex  unchanged)."})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold mb-2 block",style:{color:s.text.primary},children:"New RFID Tag"}),t.jsx("input",{placeholder:"Scan or enter new RFID...",value:i,onChange:y=>d(y.target.value.toUpperCase()),className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-yellow-400/50 font-mono text-lg tracking-wider",style:{background:"rgba(15, 18, 39, 0.5)",color:s.text.primary,borderColor:"rgba(255, 212, 28, 0.2)"},autoFocus:!0})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{onClick:a,className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",style:{background:"rgba(71, 85, 105, 0.5)",color:s.text.primary},children:"Cancel"}),t.jsx("button",{onClick:v,disabled:!i.trim(),className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2",style:{background:x,color:"#1E1D40"},children:"Continue "})]})]});case 2:return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-3 rounded-xl border flex items-center justify-between",style:{background:"rgba(15, 18, 39, 0.5)",borderColor:"rgba(255, 212, 28, 0.2)"},children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(la,{className:"w-5 h-5",style:{color:x}}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs",style:{color:s.text.secondary},children:"New RFID Tag"}),t.jsx("p",{className:"font-mono font-semibold",style:{color:s.text.primary},children:h(i)})]})]}),t.jsx(Ve,{className:"w-5 h-5 text-green-500"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold mb-1.5 block text-sm",style:{color:s.text.primary},children:"First Name"}),t.jsx("input",{value:(r==null?void 0:r.firstName)||"",readOnly:!0,className:"w-full px-3 py-2.5 rounded-xl border",style:{background:"rgba(15, 18, 39, 0.5)",color:s.text.primary,borderColor:"rgba(255, 212, 28, 0.2)"}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold mb-1.5 block text-sm",style:{color:s.text.primary},children:"Middle Name"}),t.jsx("input",{value:(r==null?void 0:r.middleName)||"",readOnly:!0,className:"w-full px-3 py-2.5 rounded-xl border",style:{background:"rgba(15, 18, 39, 0.5)",color:s.text.primary,borderColor:"rgba(255, 212, 28, 0.2)"}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold mb-1.5 block text-sm",style:{color:s.text.primary},children:"Last Name"}),t.jsx("input",{value:(r==null?void 0:r.lastName)||"",readOnly:!0,className:"w-full px-3 py-2.5 rounded-xl border",style:{background:"rgba(15, 18, 39, 0.5)",color:s.text.primary,borderColor:"rgba(255, 212, 28, 0.2)"}})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold mb-1.5 block text-sm",style:{color:s.text.primary},children:"User Type"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("button",{type:"button",className:"py-2.5 rounded-xl border font-semibold capitalize",style:{background:(r==null?void 0:r.role)==="student"||(r==null?void 0:r.userType)==="student"?x:"rgba(15, 18, 39, 0.5)",color:(r==null?void 0:r.role)==="student"||(r==null?void 0:r.userType)==="student"?"#1E1D40":s.text.primary,borderColor:x},children:" Student"}),t.jsx("button",{type:"button",className:"py-2.5 rounded-xl border font-semibold capitalize",style:{background:(r==null?void 0:r.role)==="employee"||(r==null?void 0:r.userType)==="employee"?x:"rgba(15, 18, 39, 0.5)",color:(r==null?void 0:r.role)==="employee"||(r==null?void 0:r.userType)==="employee"?"#1E1D40":s.text.primary,borderColor:x},children:" Employee"})]}),((r==null?void 0:r.role)==="treasury"||(r==null?void 0:r.role)==="accounting"||(r==null?void 0:r.role)==="motorpool"||(r==null?void 0:r.role)==="sysad")&&t.jsx("div",{className:"mt-2",children:t.jsxs("button",{type:"button",className:"py-2.5 rounded-xl border font-semibold capitalize w-full",style:{background:x,color:"#1E1D40",borderColor:x},children:[" ",(r==null?void 0:r.role)||"Admin"]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold mb-1.5 block text-sm",style:{color:s.text.primary},children:"School ID"}),t.jsx("div",{className:"relative",children:t.jsx("input",{value:(r==null?void 0:r.schoolUId)||"",readOnly:!0,className:"w-full px-3 py-2.5 rounded-xl border font-mono pl-10",style:{background:"rgba(15, 18, 39, 0.5)",color:s.text.primary,borderColor:"rgba(255, 212, 28, 0.2)"}})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold mb-1.5 block text-sm",style:{color:s.text.primary},children:"Email Address"}),t.jsx("div",{className:"relative",children:t.jsx("input",{value:(r==null?void 0:r.email)||"",readOnly:!0,className:"w-full px-3 py-2.5 rounded-xl border font-mono pl-10",style:{background:"rgba(15, 18, 39, 0.5)",color:s.text.primary,borderColor:"rgba(255, 212, 28, 0.2)"}})})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{onClick:()=>o(1),className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",style:{background:"rgba(71, 85, 105, 0.5)",color:s.text.primary},children:" Back"}),t.jsx("button",{onClick:()=>o(3),className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 flex items-center justify-center gap-2",style:{background:x,color:"#1E1D40"},children:"Review "})]})]});case 3:return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{background:"rgba(255, 212, 28, 0.15)"},children:t.jsx(za,{className:"w-8 h-8",style:{color:x}})}),t.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:s.text.primary},children:"Confirm RFID Transfer"}),t.jsxs("p",{className:"text-sm",style:{color:s.text.secondary},children:["Are you sure you want to transfer ",r==null?void 0:r.firstName," ",r==null?void 0:r.lastName,"'s account to the new RFID card?"]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"p-3 rounded-xl border",style:{background:"rgba(15, 18, 39, 0.5)",borderColor:"rgba(255, 212, 28, 0.2)"},children:[t.jsx("p",{className:"text-xs",style:{color:s.text.secondary},children:"Current RFID"}),t.jsx("p",{className:"font-mono font-semibold",style:{color:s.text.primary},children:r==null?void 0:r.rfidUId})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx(za,{className:"w-5 h-5",style:{color:x}})}),t.jsxs("div",{className:"p-3 rounded-xl border",style:{background:"rgba(15, 18, 39, 0.5)",borderColor:"rgba(255, 212, 28, 0.2)"},children:[t.jsx("p",{className:"text-xs",style:{color:s.text.secondary},children:"New RFID"}),t.jsx("p",{className:"font-mono font-semibold",style:{color:s.text.primary},children:h(i)})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{onClick:()=>o(2),className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",style:{background:"rgba(71, 85, 105, 0.5)",color:s.text.primary},children:" Back"}),t.jsx("button",{onClick:S,disabled:u,className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2",style:{background:x,color:"#1E1D40"},children:u?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Processing..."]}):"Confirm Transfer"})]})]});case 4:return t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{background:"rgba(16, 185, 129, 0.15)"},children:t.jsx(Ve,{className:"w-8 h-8 text-green-500"})}),t.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:s.text.primary},children:"Transfer Successful!"}),t.jsxs("p",{className:"text-sm mb-4",style:{color:s.text.secondary},children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName,"'s account has been transferred to the new RFID card."]}),t.jsxs("div",{className:"p-3 rounded-xl border mb-6",style:{background:"rgba(255, 212, 28, 0.1)",borderColor:"rgba(255, 212, 28, 0.3)"},children:[t.jsx("p",{className:"text-sm font-semibold mb-2",style:{color:s.text.primary},children:" Important Information"}),t.jsxs("p",{className:"text-xs",style:{color:s.text.secondary},children:["The account has been set to ",t.jsx("strong",{children:"inactive"})," and the old PIN has been cleared. A new activation OTP has been sent to ",r==null?void 0:r.email," and set as the temporary PIN. The user will need to use this OTP to activate their account and set a new PIN."]})]}),t.jsx("button",{onClick:a,className:"px-6 py-3 rounded-xl font-bold transition-all hover:opacity-90",style:{background:x,color:"#1E1D40"},children:"Done"})]});default:return null}};return t.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),t.jsxs("div",{style:{background:n?"#1E2347":"#FFFFFF",borderColor:s.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-2xl overflow-hidden animate-fadeIn",children:[t.jsxs("div",{className:"px-6 py-4 flex items-center justify-between border-b",style:{background:"linear-gradient(135deg, rgba(255, 212, 28, 0.2) 0%, rgba(255, 212, 28, 0.1) 100%)",borderColor:"rgba(255, 212, 28, 0.3)"},children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(la,{className:"w-6 h-6",style:{color:x}}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold",style:{color:x},children:"Transfer RFID Card"}),t.jsx("p",{className:"text-sm",style:{color:s.text.secondary},children:"Transfer user account to new RFID card"})]})]}),t.jsx("button",{onClick:a,className:"hover:opacity-70 transition-colors disabled:opacity-50",style:{color:s.text.secondary},children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M18 6 6 18"}),t.jsx("path",{d:"m6 6 12 12"})]})})]}),l<4&&t.jsx("div",{className:"flex items-center justify-center gap-3 py-4 px-6",style:{background:"rgba(15, 18, 39, 0.5)"},children:m.map((y,b)=>t.jsxs(ke.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2",style:{opacity:l>=y.id?1:.4},children:[t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold border-2 text-sm",style:{background:l>=y.id?x:"transparent",borderColor:x,color:l>=y.id?"#1E1D40":s.text.secondary},children:l>y.id?t.jsx(Ve,{className:"w-4 h-4"}):y.id}),t.jsx("span",{className:"hidden sm:inline font-medium text-sm",style:{color:l>=y.id?x:s.text.secondary},children:y.name})]}),b<m.length-1&&t.jsx("div",{className:"w-8 h-0.5 rounded",style:{background:l>y.id?x:"rgba(255, 212, 28, 0.2)"}})]},y.id))}),t.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:f()})]})]})}const hd=document.createElement("style");hd.textContent=`
  @keyframes fadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }
  .animate-fadeIn {
    animation: fadeIn 0.2s ease-out;
  }
`;document.head.querySelector("style[data-transfer-modal]")||(hd.setAttribute("data-transfer-modal","true"),document.head.appendChild(hd));function H4({role:e,isDarkMode:a}){const r={sysad:{color:"#FFD41C",bg:a?"rgba(255,212,28,0.15)":"rgba(255,212,28,0.1)",label:"SysAd"},treasury:{color:"#10B981",bg:a?"rgba(16,185,129,0.15)":"rgba(16,185,129,0.1)",label:"Treasury"},accounting:{color:"#F59E0B",bg:a?"rgba(245,158,11,0.15)":"rgba(245,158,11,0.1)",label:"Accounting"},motorpool:{color:"#EF4444",bg:a?"rgba(239,68,68,0.15)":"rgba(239,68,68,0.1)",label:"Motorpool"},merchant:{color:"#8B5CF6",bg:a?"rgba(139,92,246,0.15)":"rgba(139,92,246,0.1)",label:"Merchant"},student:{color:"#3B82F6",bg:a?"rgba(59,130,246,0.15)":"rgba(59,130,246,0.1)",label:"Student"},employee:{color:"#06B6D4",bg:a?"rgba(6,182,212,0.15)":"rgba(6,182,212,0.1)",label:"Employee"},user:{color:"#6B7280",bg:a?"rgba(107,114,128,0.15)":"rgba(107,114,128,0.1)",label:"User"}},s=r[e]||r.user;return t.jsx("span",{style:{background:s.bg,color:s.color,borderColor:`${s.color}30`},className:"px-3 py-1 rounded-full text-xs font-bold border",children:s.label})}function q4({isActive:e}){return t.jsx("span",{style:{background:e?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)",color:e?"#10B981":"#EF4444",borderColor:e?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"},className:"px-3 py-1 rounded-full text-xs font-bold border",children:e?"Active":"Inactive"})}function Y4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!1),[o,i]=p.useState(""),[d,u]=p.useState("all"),[c,x]=p.useState("all"),[m,h]=p.useState("createdAt"),[v,S]=p.useState(null),[f,y]=p.useState(!1),[b,g]=p.useState(!1),[j,C]=p.useState(!1),[T,E]=p.useState({isOpen:!1,type:"success",title:"",message:""}),D=e.accent.primary,I=(R,B,F)=>{E({isOpen:!0,type:R,title:B,message:F})},z=async(R=!1)=>{R||l(!0);try{const B=new URLSearchParams;B.append("page",1),B.append("limit",100),o&&B.append("search",o),d!=="all"&&B.append("role",d),c!=="all"&&B.append("status",c),B.append("sortBy",m);const $=((await Z.get(`/admin/sysad/users?${B}`)).users||[]).filter(N=>N._type!=="admin");s($)}catch{I("error","Load Failed","Failed to load users. Please try again.")}finally{R||l(!1)}};p.useEffect(()=>{z()},[o,d,c,m]);const Y=R=>{S(R),C(!0)},_=()=>{C(!1),setCurrentStep(1),setNewRfid(""),S(null),z(!0)},V=()=>{S(null),g(!1)};return t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:D},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx(la,{className:"w-7 h-7"})," Transfer Card"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Transfer user information to a new RFID card with OTP activation"})]}),b&&t.jsxs("div",{style:{background:a?"rgba(16,185,129,0.08)":"rgba(16,185,129,0.05)",borderColor:"rgba(16,185,129,0.25)"},className:"p-8 rounded-2xl border mb-6 text-center",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.15)"},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-5",children:t.jsx(Ve,{className:"w-10 h-10 text-emerald-500"})}),t.jsx("h3",{style:{color:"#10B981"},className:"text-2xl font-bold mb-2",children:"Transfer Completed"}),t.jsx("p",{style:{color:e.text.secondary},className:"mb-6 text-sm max-w-md mx-auto",children:"RFID card has been successfully transferred. The user can now use the new RFID card for all system operations."}),t.jsx("div",{style:{background:"rgba(59,130,246,0.1)",borderColor:"rgba(59,130,246,0.3)"},className:"rounded-xl border p-4 mb-6",children:t.jsxs("p",{className:"text-blue-500 text-sm",children:[t.jsx("strong",{children:"Transfer Details:"}),t.jsx("br",{}),"Old RFID: ",v==null?void 0:v.rfidUId,t.jsx("br",{}),"New RFID: ",newCardId,t.jsx("br",{}),"User: ",v==null?void 0:v.firstName," ",v==null?void 0:v.lastName]})}),t.jsxs("button",{onClick:V,style:{background:D},className:"px-8 py-3 rounded-xl font-semibold text-white hover:opacity-90 transition-all inline-flex items-center gap-2",children:[t.jsx(pd,{className:"w-4 h-4"}),"New Transfer"]})]}),!b&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{background:a?"rgba(15,18,39,0.8)":e.bg.card,borderColor:e.accent.primary},className:"rounded-xl border-2 p-4 mb-5",children:t.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between",children:[t.jsxs("div",{className:"flex flex-wrap gap-3 items-center flex-1",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-[300px]",children:[t.jsx(vr,{style:{color:"rgba(251, 251, 251, 0.5)"},className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search by name, ID, email...",value:o,onChange:R=>i(R.target.value),style:{background:a?"rgba(30, 35, 71, 0.8)":"#F9FAFB",color:a?"rgba(251, 251, 251, 0.95)":e.text.primary,borderColor:"rgba(255, 212, 28, 0.2)"},className:"w-full pl-10 pr-4 py-2 rounded-xl border text-sm focus:outline-none transition-all focus:ring-2 focus:ring-opacity-50"})]}),t.jsx("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:a?"rgba(30,35,71,0.8)":"#F3F4F6"},children:[{value:"all",label:"All"},{value:"student",label:"Students"},{value:"employee",label:"Employees"}].map(R=>t.jsx("button",{onClick:()=>u(R.value),style:{background:d===R.value?e.accent.primary:"transparent",color:d===R.value?a?"#181D40":"#FFFFFF":a?"rgba(251, 251, 251, 0.6)":e.text.secondary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all hover:opacity-80",children:R.label},R.value))}),t.jsx("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:a?"rgba(30,35,71,0.8)":"#F3F4F6"},children:[{value:"all",label:"All",color:null},{value:"active",label:"Active",color:"#10B981"},{value:"inactive",label:"Inactive",color:"#EF4444"}].map(R=>t.jsx("button",{onClick:()=>x(R.value),style:{background:c===R.value?R.color||e.accent.primary:"transparent",color:c===R.value?"#FFFFFF":a?"rgba(251, 251, 251, 0.6)":e.text.secondary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all hover:opacity-80",children:R.label},R.value))}),t.jsx("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:a?"rgba(30,35,71,0.8)":"#F3F4F6"},children:[{value:"createdAt",label:"Date"},{value:"name",label:"Name"},{value:"role",label:"Role"}].map(R=>t.jsx("button",{onClick:()=>h(R.value),style:{background:m===R.value?e.accent.primary:"transparent",color:m===R.value?a?"#181D40":"#FFFFFF":a?"rgba(251, 251, 251, 0.6)":e.text.secondary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all hover:opacity-80",children:R.label},R.value))})]}),t.jsx("button",{onClick:z,style:{background:"rgba(255,212,28,0.15)",color:D},className:"p-2 rounded-lg hover:opacity-80 transition-all",children:t.jsx(pd,{className:"w-4 h-4"})})]})}),t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:n?t.jsx("div",{className:"flex justify-center items-center py-20",children:t.jsx(Oe,{className:"w-8 h-8 animate-spin",style:{color:D}})}):r.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx(Ls,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"font-semibold",children:"No users found"}),t.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your search"})]}):t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"ID Number"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Name"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Email"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Role"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-center p-4 text-xs font-bold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:r.map((R,B)=>t.jsxs("tr",{style:{borderColor:e.border.primary,animationDelay:`${B*30}ms`},className:"border-b hover:bg-white/5 transition-all duration-200",children:[t.jsx("td",{style:{color:e.text.primary},className:"p-4 font-mono font-semibold",children:R.cardUid||R.schoolUId||R.adminId||"N/A"}),t.jsx("td",{style:{color:e.text.primary},className:"p-4 font-semibold",children:`${R.firstName||""} ${R.lastName||""}`.trim()||"N/A"}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4",children:R.email||"N/A"}),t.jsx("td",{className:"p-4",children:t.jsx(H4,{role:R.role,isDarkMode:a})}),t.jsx("td",{className:"p-4",children:t.jsx(q4,{isActive:R.isActive})}),t.jsx("td",{className:"p-4",children:t.jsx("div",{className:"flex items-center justify-center gap-2",children:t.jsxs("button",{onClick:()=>Y(R),disabled:f,style:{background:"rgba(16,185,129,0.15)",color:"#10B981",borderColor:"rgba(16,185,129,0.3)"},className:"px-3 py-1.5 rounded-lg hover:opacity-80 transition-all text-xs font-semibold border disabled:cursor-not-allowed disabled:opacity-50",children:[f?t.jsx(Oe,{className:"w-3 h-3 animate-spin"}):t.jsx(za,{className:"w-3 h-3"}),"Transfer"]})})})]},R._id))})]})})})]}),t.jsx(W4,{isOpen:j,onClose:_,selectedUser:v}),t.jsx(P4,{isOpen:T.isOpen,onClose:()=>E({...T,isOpen:!1}),type:T.type,title:T.title,message:T.message})]})}function V4(){var de,we,ae,ue,Ce,re,Ne,Ue,Se,P;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState("all"),[d,u]=p.useState(""),[c,x]=p.useState(""),[m,h]=p.useState(""),[v,S]=p.useState(""),[f,y]=p.useState(null),[b,g]=p.useState(!1),[j,C]=p.useState(!1),[T,E]=p.useState(""),[D,I]=p.useState(!1),[z,Y]=p.useState(1),[_,V]=p.useState("details"),[R,B]=p.useState(""),[F,$]=p.useState(!1),N=15,w=p.useRef(null),k=async(M=!1)=>{try{M||l(!0);const G=new URLSearchParams;c&&G.append("status",c),d&&G.append("search",d);const se=await Z.get(`/admin/sysad/concerns?${G}`);se!=null&&se.concerns&&s(se.concerns)}catch{M||W.error("Failed to load concerns")}finally{M||l(!1)}};p.useEffect(()=>(k(),w.current=setInterval(()=>k(!0),3e4),()=>{w.current&&clearInterval(w.current)}),[c,d]),p.useEffect(()=>{Y(1)},[d,c,o,m,v]);const A=async M=>{if(M.status==="pending"&&M.submissionType!=="feedback")try{const G=JSON.parse(localStorage.getItem("adminData")||"{}");await Z.patch(`/admin/sysad/concerns/${M._id}/status`,{status:"in_progress",adminName:G.firstName?`${G.firstName} ${G.lastName||""}`.trim():"System Admin"}),M.status="in_progress"}catch(G){console.error("Failed to update status:",G)}y(M),V("details"),B(""),g(!0)},O=M=>{E(""),g(!1),C(!0)},q=async()=>{var M,G;if(!R.trim()){W.error("Please enter a note message");return}$(!0);try{const se=JSON.parse(localStorage.getItem("adminData")||"{}"),oe=se.firstName?`${se.firstName} ${se.lastName||""}`.trim():"System Admin",xe=await Z.post(`/admin/sysad/concerns/${f._id}/note`,{note:R.trim(),adminName:oe}),ie=(xe==null?void 0:xe.data)||xe;ie!=null&&ie.success?(W.success("Note sent successfully!"),B(""),ie.concern&&(y(ie.concern),V("notes")),k(!0)):W.error((ie==null?void 0:ie.message)||"Failed to send note")}catch(se){W.error(((G=(M=se==null?void 0:se.response)==null?void 0:M.data)==null?void 0:G.message)||(se==null?void 0:se.message)||"Failed to send note")}finally{$(!1)}},U=async()=>{if(!T.trim()){W.error("Please provide a resolution message");return}I(!0);try{const M=JSON.parse(localStorage.getItem("adminData")||"{}"),G=await Z.patch(`/admin/sysad/concerns/${f._id}/status`,{status:"resolved",reply:T.trim(),adminName:M.firstName?`${M.firstName} ${M.lastName||""}`.trim():"System Admin"});G!=null&&G.success&&(W.success("Concern resolved! User has been notified via email."),C(!1),g(!1),k(!0))}catch(M){W.error(M.message||"Failed to resolve concern")}finally{I(!1)}},H=()=>{const M=J.map(G=>{var se,oe;return{ID:((se=G._id)==null?void 0:se.slice(-8))||"",Type:G.submissionType||"assistance",User:(oe=G.user)!=null&&oe.firstName?`${G.user.firstName} ${G.user.lastName||""}`:G.userName||"",Subject:G.subject||"",Status:G.status||"pending",Priority:G.priority||"medium",Rating:G.rating||"",Date:G.createdAt?new Date(G.createdAt).toLocaleDateString():""}});zt(M,"sysad_concerns")},J=r.filter(M=>{var G,se,oe,xe,ie,nt,We,Re;if(o==="assistance"&&M.submissionType!=="assistance"||o==="feedback"&&M.submissionType!=="feedback")return!1;if(d){const tt=d.toLowerCase();if(!(((G=M._id)==null?void 0:G.toLowerCase().includes(tt))||((se=M.subject)==null?void 0:se.toLowerCase().includes(tt))||((oe=M.message)==null?void 0:oe.toLowerCase().includes(tt))||((ie=(xe=M.user)==null?void 0:xe.firstName)==null?void 0:ie.toLowerCase().includes(tt))||((We=(nt=M.user)==null?void 0:nt.lastName)==null?void 0:We.toLowerCase().includes(tt))||((Re=M.userName)==null?void 0:Re.toLowerCase().includes(tt))))return!1}if(c&&M.status!==c)return!1;if(m||v){const tt=new Date(M.createdAt);if(m&&tt<new Date(m)||v&&tt>new Date(v+"T23:59:59"))return!1}return!0}),ee=Math.ceil(J.length/N),L=(z-1)*N,X=J.slice(L,L+N),te=M=>{switch(M){case"pending":return"#FBBF24";case"in_progress":return"#3B82F6";case"resolved":return"#10B981";default:return e.text.secondary}},ce=M=>{if(M.submissionType!=="assistance"||M.status==="resolved")return null;const G=new Date,se=new Date(M.createdAt),oe=Math.floor((G-se)/(1e3*60*60*24));let xe="transparent",ie="",nt="";return oe<1?(xe="transparent",ie="New",nt="#10B981"):oe>=1&&oe<3?(xe="rgba(251, 191, 36, 0.1)",ie=`${oe}d old`,nt="#FBBF24"):oe>=3&&oe<5?(xe="rgba(249, 115, 22, 0.15)",ie=`${oe}d old`,nt="#F97316"):oe>=5&&oe<7?(xe="rgba(234, 88, 12, 0.2)",ie=`${oe}d old`,nt="#EA580C"):(xe="rgba(239, 68, 68, 0.25)",ie=`${oe}d old`,nt="#EF4444"),{ageInDays:oe,backgroundColor:xe,badgeText:ie,badgeColor:nt}};return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading concerns..."]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("div",{className:"mb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Concerns & Feedback"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:J.length>0?`Showing ${L+1}-${Math.min(L+N,J.length)} of ${J.length}  Page ${z} of ${ee}`:`All user reports and feedbacks about the NUCash system  Total: ${r.length}`})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-5",children:[t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(251, 191, 36, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4 transition-all duration-300 hover:shadow-lg hover:scale-[1.02]",children:[t.jsx("div",{style:{background:"rgba(251, 191, 36, 0.2)"},className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",children:t.jsx(oa,{style:{color:"#FBBF24"},className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-[10px] font-semibold uppercase tracking-wide",children:"Pending"}),t.jsx("p",{style:{color:"#FBBF24"},className:"text-2xl font-bold",children:r.filter(M=>M.status==="pending"&&M.submissionType!=="feedback").length})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(59, 130, 246, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4 transition-all duration-300 hover:shadow-lg hover:scale-[1.02]",children:[t.jsx("div",{style:{background:"rgba(59, 130, 246, 0.2)"},className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",children:t.jsx(Oe,{style:{color:"#3B82F6"},className:"w-6 h-6 animate-spin"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-[10px] font-semibold uppercase tracking-wide",children:"In Progress"}),t.jsx("p",{style:{color:"#3B82F6"},className:"text-2xl font-bold",children:r.filter(M=>M.status==="in_progress").length})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(16, 185, 129, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4 transition-all duration-300 hover:shadow-lg hover:scale-[1.02]",children:[t.jsx("div",{style:{background:"rgba(16, 185, 129, 0.2)"},className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",children:t.jsx(Ve,{style:{color:"#10B981"},className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-[10px] font-semibold uppercase tracking-wide",children:"Resolved"}),t.jsx("p",{style:{color:"#10B981"},className:"text-2xl font-bold",children:r.filter(M=>M.status==="resolved").length})]})]})]}),t.jsxs("div",{className:"flex gap-2 mb-5",children:[t.jsxs("button",{onClick:()=>i("all"),style:{padding:"10px 20px",background:o==="all"?a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)":"transparent",border:`2px solid ${o==="all"?e.accent.primary:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:o==="all"?e.accent.primary:e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["All (",r.length,")"]}),t.jsxs("button",{onClick:()=>i("assistance"),style:{padding:"10px 20px",background:o==="assistance"?"rgba(59,130,246,0.2)":"transparent",border:`2px solid ${o==="assistance"?"#3B82F6":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:o==="assistance"?"#3B82F6":e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["Assistance (",r.filter(M=>M.submissionType==="assistance"||!M.submissionType).length,")"]}),t.jsxs("button",{onClick:()=>i("feedback"),style:{padding:"10px 20px",background:o==="feedback"?"rgba(34,197,94,0.2)":"transparent",border:`2px solid ${o==="feedback"?"#22C55E":"rgba(34,197,94,0.3)"}`,borderRadius:"8px",color:o==="feedback"?"#22C55E":e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["Feedback (",r.filter(M=>M.submissionType==="feedback").length,")"]})]}),t.jsxs("div",{className:"flex gap-3 items-end flex-wrap",children:[t.jsx(Ht,{value:d,onChange:u,placeholder:"Search by ID, user, subject..."}),o!=="feedback"&&t.jsx(aa,{value:c,onChange:x,label:"Status",options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"}]}),t.jsx(yr,{startDate:m,endDate:v,onStartChange:h,onEndChange:S}),t.jsx(qt,{onClick:H,disabled:J.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:J.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{children:"No concerns found"})]}):t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"ID"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"User"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Subject"}),o==="all"&&t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Type"}),o==="feedback"?t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Rating"}):t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Date"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-right p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:X.map(M=>{var se,oe,xe,ie;const G=ce(M);return t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`,background:G?G.backgroundColor:"transparent"},className:"hover:bg-white/5 transition",children:[t.jsxs("td",{style:{color:e.text.primary},className:"p-4 font-mono text-xs",children:[(se=M._id)==null?void 0:se.slice(-8),G&&G.badgeText&&t.jsx("span",{style:{background:G.badgeColor,color:"#FFFFFF",fontSize:"9px",fontWeight:700,padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase",whiteSpace:"nowrap",marginLeft:"8px"},children:G.badgeText})]}),t.jsxs("td",{style:{color:e.text.primary},className:"p-4",children:[((oe=M.user)==null?void 0:oe.firstName)||M.userName," ",((xe=M.user)==null?void 0:xe.lastName)||""]}),t.jsx("td",{style:{color:e.text.primary},className:"p-4 max-w-[200px] truncate",children:M.subject||"No subject"}),o==="all"&&t.jsx("td",{className:"p-4",children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:M.submissionType==="feedback"?"rgba(34,197,94,0.2)":"rgba(59,130,246,0.2)",color:M.submissionType==="feedback"?"#22C55E":"#3B82F6",border:`1px solid ${M.submissionType==="feedback"?"rgba(34,197,94,0.3)":"rgba(59,130,246,0.3)"}`},children:M.submissionType==="feedback"?"Feedback":"Assistance"})}),o==="feedback"?t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((nt,We)=>t.jsx("span",{style:{fontSize:"14px",color:We<(M.rating||0)?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},We)),t.jsxs("span",{style:{color:e.text.muted,marginLeft:"8px",fontSize:"11px"},children:["(",M.rating||0,"/5)"]})]})}):t.jsx("td",{className:"p-4",children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:`${te(M.status)}20`,color:te(M.status)},children:((ie=M.status)==null?void 0:ie.replace("_"," "))||"Pending"})}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4 text-sm",children:M.createdAt?new Date(M.createdAt).toLocaleDateString():""}),t.jsx("td",{className:"p-4 text-right",children:t.jsx("button",{onClick:()=>A(M),style:{padding:"6px 12px",background:a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",color:e.accent.primary,border:`1px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"})})]},M._id)})})]}),ee>1&&t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-4 border-t flex items-center justify-center gap-3",children:[t.jsx("button",{onClick:()=>Y(M=>Math.max(1,M-1)),disabled:z===1,style:{padding:"8px 16px",background:z===1?"rgba(100,100,100,0.2)":e.bg.tertiary,color:z===1?e.text.muted:e.accent.primary,border:`2px solid ${z===1?"transparent":e.accent.primary}`,borderRadius:"8px",fontSize:"13px",fontWeight:600,cursor:z===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:e.text.secondary,fontSize:"13px",fontWeight:600},children:["Page ",z," of ",ee]}),t.jsx("button",{onClick:()=>Y(M=>Math.min(ee,M+1)),disabled:z===ee,style:{padding:"8px 16px",background:z===ee?"rgba(100,100,100,0.2)":e.bg.tertiary,color:z===ee?e.text.muted:e.accent.primary,border:`2px solid ${z===ee?"transparent":e.accent.primary}`,borderRadius:"8px",fontSize:"13px",fontWeight:600,cursor:z===ee?"not-allowed":"pointer"},children:"Next "})]})]})}),b&&f&&t.jsx("div",{onClick:()=>{g(!1),y(null)},style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:M=>M.stopPropagation(),style:{background:a?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",maxWidth:"700px",width:"90%",maxHeight:"90vh",display:"flex",flexDirection:"column",border:`2px solid ${e.border.primary}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${e.border.primary}`,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t.jsxs("div",{children:[t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:`${te(f.status)}20`,color:te(f.status),marginBottom:"8px"},children:((de=f.status)==null?void 0:de.replace("_"," "))||"Pending"}),t.jsx("h2",{style:{fontSize:"20px",fontWeight:700,color:e.text.primary,margin:0},children:f.subject||"No Subject"})]}),t.jsx("button",{onClick:()=>{g(!1),y(null)},style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px"},children:""})]}),t.jsxs("div",{style:{padding:"0 24px",borderBottom:`2px solid ${e.border.primary}`,display:"flex",gap:"8px"},children:[t.jsx("button",{onClick:()=>V("details"),style:{padding:"12px 20px",background:"transparent",border:"none",borderBottom:`3px solid ${_==="details"?e.accent.primary:"transparent"}`,color:_==="details"?e.accent.primary:e.text.secondary,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:" Details"}),f.submissionType!=="feedback"&&t.jsxs("button",{onClick:()=>V("notes"),style:{padding:"12px 20px",background:"transparent",border:"none",borderBottom:`3px solid ${_==="notes"?e.accent.primary:"transparent"}`,color:_==="notes"?e.accent.primary:e.text.secondary,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Notes History ",((we=f.notes)==null?void 0:we.length)>0&&`(${f.notes.length})`]})]}),t.jsx("div",{style:{flex:1,overflow:"auto",padding:"24px"},children:_==="details"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[t.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:e.accent.primary,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"18px",color:e.accent.secondary},children:((ue=(ae=f.user)==null?void 0:ae.firstName)==null?void 0:ue[0])||"?"}),t.jsxs("div",{children:[t.jsxs("p",{style:{color:e.text.primary,fontWeight:600,margin:0},children:[((Ce=f.user)==null?void 0:Ce.firstName)||f.userName," ",((re=f.user)==null?void 0:re.lastName)||""]}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",margin:0},children:((Ne=f.user)==null?void 0:Ne.email)||f.userEmail||"N/A"})]}),t.jsx("div",{style:{marginLeft:"auto",textAlign:"right"},children:t.jsx("p",{style:{color:e.text.muted,fontSize:"12px",margin:0},children:f.createdAt?new Date(f.createdAt).toLocaleString():""})})]}),t.jsx("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",marginBottom:"20px",border:`1px solid ${e.border.primary}`},children:t.jsx("p",{style:{color:e.text.primary,whiteSpace:"pre-wrap",margin:0,lineHeight:"1.6"},children:f.message||f.feedbackText||"No message provided"})}),f.submissionType==="feedback"&&f.rating&&t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("p",{style:{color:e.text.secondary,fontSize:"12px",marginBottom:"8px",fontWeight:600},children:"Rating"}),t.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((M,G)=>t.jsx("span",{style:{fontSize:"24px",color:G<f.rating?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},G)),t.jsxs("span",{style:{color:e.text.secondary,marginLeft:"8px"},children:["(",f.rating,"/5)"]})]})]}),f.status==="resolved"&&f.adminResponse&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(16,185,129,0.3)"},children:[t.jsx("p",{style:{color:"#10B981",fontSize:"12px",marginBottom:"8px",fontWeight:700},children:" Resolution"}),t.jsx("p",{style:{color:e.text.primary,margin:0},children:f.adminResponse})]})]}):t.jsx("div",{children:(!f.notes||f.notes.length===0)&&f.status!=="resolved"?t.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:e.text.tertiary},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("p",{style:{fontSize:"14px",margin:0},children:"No notes sent yet"}),t.jsx("p",{style:{fontSize:"12px",color:e.text.muted,marginTop:"8px"},children:"Use the note field below to send updates to the user"})]}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(Ue=f.notes)==null?void 0:Ue.slice().reverse().map((M,G)=>t.jsxs("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsxs("span",{style:{color:e.accent.primary,fontSize:"12px",fontWeight:700},children:[" ",M.adminName||"System Admin"]}),t.jsx("span",{style:{color:e.text.muted,fontSize:"11px"},children:M.timestamp?new Date(M.timestamp).toLocaleString():""})]}),t.jsx("p",{style:{color:e.text.primary,margin:0,lineHeight:"1.5"},children:M.message})]},G)),f.status==="resolved"&&f.adminResponse&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderRadius:"12px",padding:"16px",border:"2px solid rgba(16,185,129,0.3)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsxs("span",{style:{color:"#10B981",fontSize:"12px",fontWeight:700},children:[" RESOLVED by ",f.resolvedBy||"System Admin"]}),t.jsx("span",{style:{color:"#10B981",fontSize:"11px",fontWeight:600},children:f.resolvedAt?new Date(f.resolvedAt).toLocaleString():""})]}),t.jsx("p",{style:{color:e.text.primary,margin:0,lineHeight:"1.5",fontWeight:500},children:f.adminResponse})]})]})})}),f.status==="in_progress"&&f.submissionType!=="feedback"&&t.jsxs("div",{style:{borderTop:`2px solid ${e.border.primary}`,padding:"20px 24px"},children:[t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("label",{style:{color:e.text.primary,fontWeight:600,fontSize:"13px",display:"block",marginBottom:"8px"},children:" Send Note to User"}),t.jsx("textarea",{value:R,onChange:M=>B(M.target.value),placeholder:"Type your message here... The user will receive this via email.",rows:3,style:{width:"100%",padding:"12px",borderRadius:"8px",border:`2px solid ${e.border.primary}`,background:e.bg.tertiary,color:e.text.primary,fontSize:"14px",resize:"vertical",outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:q,disabled:F||!R.trim(),style:{flex:1,padding:"12px 24px",background:F||!R.trim()?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)",color:F||!R.trim()?"rgba(59,130,246,0.5)":"#3B82F6",border:`2px solid ${F||!R.trim()?"rgba(59,130,246,0.3)":"#3B82F6"}`,borderRadius:"8px",cursor:F||!R.trim()?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:F||!R.trim()?.6:1},children:F?" Sending...":" Send Note"}),t.jsx("button",{onClick:()=>O(),style:{flex:1,padding:"12px 24px",background:"#10B981",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:700,boxShadow:"0 4px 12px rgba(16,185,129,0.4)"},children:" Resolve Concern"})]})]}),f.status==="pending"&&f.submissionType!=="feedback"&&t.jsx("div",{style:{borderTop:`2px solid ${e.border.primary}`,padding:"20px 24px",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{onClick:()=>O(),style:{padding:"12px 24px",background:"#10B981",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:700,boxShadow:"0 4px 12px rgba(16,185,129,0.4)"},children:" Resolve Concern"})})]})}),j&&f&&t.jsx("div",{onClick:()=>C(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:M=>M.stopPropagation(),style:{background:a?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",maxWidth:"500px",width:"90%",border:`2px solid ${e.border.primary}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("div",{style:{padding:"24px",borderBottom:"2px solid rgba(16,185,129,0.3)",background:"rgba(16,185,129,0.1)",borderRadius:"16px 16px 0 0"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#10B981",margin:0,marginBottom:"8px"},children:"Resolve Concern"}),t.jsx("p",{style:{fontSize:"13px",color:e.text.secondary,margin:0},children:"Mark this concern as resolved and notify the user"})]}),t.jsx("button",{onClick:()=>C(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px"},children:""})]})}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",marginBottom:"20px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:e.text.secondary,fontSize:"12px"},children:"From"}),t.jsxs("span",{style:{color:e.text.primary,fontSize:"14px",fontWeight:600},children:[((Se=f.user)==null?void 0:Se.firstName)||f.userName," ",((P=f.user)==null?void 0:P.lastName)||""]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:e.text.secondary,fontSize:"12px"},children:"Subject"}),t.jsx("span",{style:{color:e.text.primary,fontSize:"14px",fontWeight:600,maxWidth:"60%",textAlign:"right"},children:f.subject})]})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:e.text.primary,fontWeight:600,display:"block",marginBottom:"8px"},children:["Resolution Message ",t.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",marginBottom:"12px"},children:"This final message will be sent to the user via email and mark the concern as resolved."}),t.jsx("textarea",{value:T,onChange:M=>E(M.target.value),placeholder:"Enter your resolution response...",rows:5,style:{width:"100%",padding:"12px",borderRadius:"8px",border:`2px solid ${e.border.primary}`,background:e.bg.tertiary,color:e.text.primary,fontSize:"14px",resize:"vertical",outline:"none",boxSizing:"border-box"},autoFocus:!0})]})]}),t.jsxs("div",{style:{padding:"20px 24px",borderTop:`2px solid ${e.border.primary}`,display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:()=>C(!1),disabled:D,style:{flex:1,padding:"14px",background:e.bg.tertiary,color:e.text.primary,border:`1px solid ${e.border.primary}`,borderRadius:"8px",cursor:D?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:D?.5:1},children:"Cancel"}),t.jsx("button",{onClick:U,disabled:D||!T.trim(),style:{flex:1,padding:"14px",background:D||!T.trim()?"rgba(16,185,129,0.3)":"#10B981",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:D||!T.trim()?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:D||!T.trim()?.6:1,boxShadow:D||!T.trim()?"none":"0 4px 12px rgba(16,185,129,0.4)"},children:D?" Resolving...":" Resolve & Notify User"})]})]})})]})}const G4=[{value:"Transactions",icon:"",label:"Transactions"},{value:"Users",icon:"",label:"Users"},{value:"Merchants",icon:"",label:"Merchants"},{value:"Admins",icon:"",label:"Admins"},{value:"Logs",icon:"",label:"System Logs"},{value:"Concerns",icon:"",label:"All Concerns"}];function X4(){var J,ee,L,X,te,ce,de,we,ae,ue,Ce,re,Ne,Ue,Se;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState(!0),[n,l]=p.useState({maintenanceMode:!1,maintenanceMessage:"System is under maintenance. Please try again later.",deactivationScheduler:{enabled:!1,date:"",time:""}}),[o,i]=p.useState({autoExport:{frequency:"daily",exportTypes:[],time:"00:00",emailRecipients:[]}}),[d,u]=p.useState([]),[c,x]=p.useState([]),[m,h]=p.useState(!1),[v,S]=p.useState(!1),[f,y]=p.useState(!1),[b,g]=p.useState(""),[j,C]=p.useState({start:"",end:""}),[T,E]=p.useState("all"),[D,I]=p.useState(""),[z,Y]=p.useState(""),[_,V]=p.useState("all"),R=e.accent.primary;p.useEffect(()=>{B(),F(),$(),N()},[]);const B=async()=>{try{s(!0);const P=await Z.get("/admin/sysad/config");P!=null&&P.config&&l(M=>({...M,...P.config}))}catch(P){console.error("Failed to fetch sysad config:",P)}finally{s(!1)}},F=async()=>{try{const P=await Z.get("/admin/configurations?adminRole=sysad");P&&i(P)}catch(P){console.error("Error loading configurations:",P)}},$=async()=>{try{const P=await Z.get("/admin/configurations/export-history?adminRole=sysad");u(Array.isArray(P)?P:[])}catch(P){console.error("Error loading export history:",P)}},N=async()=>{try{const P=await Z.get("/admin/configurations/scheduled-exports?adminRole=sysad");x(Array.isArray(P)?P:[])}catch(P){console.error("Error loading scheduled exports:",P)}},w=async()=>{const P=!n.maintenanceMode;if(P){const M=window.prompt("Enter custom maintenance message (optional):",n.maintenanceMessage);if(!window.confirm(`Are you sure you want to enable maintenance mode?

All non-sysadmin users will be immediately logged out and will see the maintenance message.`))return;y(!0);try{await Z.post("/admin/sysad/maintenance-mode",{enabled:P,message:M||n.maintenanceMessage}),l(G=>({...G,maintenanceMode:P,maintenanceMessage:M||G.maintenanceMessage})),W.success("Maintenance mode enabled. All non-sysadmin users will be logged out.")}catch{W.error("Failed to enable maintenance mode")}finally{y(!1)}}else{if(!window.confirm("Are you sure you want to disable maintenance mode?"))return;y(!0);try{await Z.post("/admin/sysad/maintenance-mode",{enabled:P}),l(M=>({...M,maintenanceMode:P})),W.success("Maintenance mode disabled")}catch{W.error("Failed to disable maintenance mode")}finally{y(!1)}}},k=async()=>{var P,M;y(!0);try{await Z.put("/admin/configurations/auto-export",{...o.autoExport,adminRole:"sysad"}),W.success("Auto-export settings saved successfully!"),S(!1),F()}catch(G){W.error(((M=(P=G.response)==null?void 0:P.data)==null?void 0:M.error)||"Failed to save settings")}finally{y(!1)}},A=async()=>{var P,M;y(!0);try{if(!o.autoExport.exportTypes||o.autoExport.exportTypes.length===0){W.error("Please select at least one export type in the configuration settings"),y(!1);return}const G=await Z.post("/admin/configurations/manual-export-sysad",{exportTypes:o.autoExport.exportTypes,dateRange:T,customStartDate:D,customEndDate:z});if(W.success(`System data exported successfully! (${G.totalRecords||G.recordCount} total records)`),G.downloadUrl){const se=document.createElement("a");se.href=G.downloadUrl,se.download=G.fileName||`sysad_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(se),se.click(),document.body.removeChild(se)}h(!1),E("all"),I(""),Y(""),$()}catch(G){W.error(((M=(P=G.response)==null?void 0:P.data)==null?void 0:M.error)||"Export failed")}finally{y(!1)}},O=async P=>{try{const M=await Z.get(`/admin/configurations/download-export/${P}`);if(M.downloadUrl){const G=document.createElement("a");G.href=M.downloadUrl,G.download=M.fileName,document.body.appendChild(G),G.click(),document.body.removeChild(G)}}catch{W.error("Failed to download export")}},q=async()=>{if(!n.deactivationScheduler.date||!n.deactivationScheduler.time){W.error("Please set both date and time");return}y(!0);try{await Z.post("/admin/sysad/deactivation-scheduler",n.deactivationScheduler),W.success("Deactivation schedule saved")}catch{W.error("Failed to save schedule")}finally{y(!1)}},H=[...c.map(P=>({...P,source:"auto"})),...d.map(P=>({...P,source:"manual"}))].sort((P,M)=>new Date(M.exportedAt||M.timestamp||M.createdAt)-new Date(P.exportedAt||P.timestamp||P.createdAt)).filter(P=>{var xe,ie;if(_!=="all"&&(_==="auto"&&P.source!=="auto"||_==="manual"&&P.source!=="manual"))return!1;const M=!b||((xe=P.exportType)==null?void 0:xe.toLowerCase().includes(b.toLowerCase()))||((ie=P.fileName)==null?void 0:ie.toLowerCase().includes(b.toLowerCase())),G=new Date(P.exportedAt||P.timestamp||P.createdAt),se=!j.start||G>=new Date(j.start),oe=!j.end||G<=new Date(j.end+"T23:59:59");return M&&se&&oe});return r?t.jsxs("div",{style:{color:R},className:"text-center py-20",children:[t.jsx(Oe,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),"Loading configuration..."]}):t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:R},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," System Configuration"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Manage system settings, maintenance mode, exports, and scheduled tasks"})]}),t.jsxs("div",{className:"space-y-6 flex-1 overflow-y-auto pr-2",children:[t.jsx("div",{style:{background:e.bg.card,borderColor:n.maintenanceMode?"rgba(239,68,68,0.5)":e.border.primary},className:"p-6 rounded-2xl border-2",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[t.jsx("div",{style:{background:n.maintenanceMode?"rgba(239,68,68,0.2)":`${R}20`},className:"w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx(ii,{className:"w-6 h-6",style:{color:n.maintenanceMode?"#EF4444":R}})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{style:{color:e.text.primary},className:"font-bold text-lg mb-1",children:"Maintenance Mode"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm mb-3",children:"When enabled, only system administrators can access the system. All other users will be logged out and will see a maintenance message."}),t.jsxs("div",{className:"mb-3",children:[t.jsx("div",{style:{color:e.text.secondary},className:"text-xs font-semibold mb-1",children:"CURRENT MESSAGE:"}),t.jsx("div",{style:{background:e.bg.secondary,borderColor:e.border.primary,color:e.text.primary},className:"p-3 rounded-lg border text-sm",children:n.maintenanceMessage})]}),n.maintenanceMode&&t.jsxs("div",{style:{background:"rgba(239,68,68,0.1)",borderColor:"rgba(239,68,68,0.3)"},className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg border mb-3",children:[t.jsx(fa,{className:"w-4 h-4 text-red-500"}),t.jsx("span",{className:"text-red-500 text-sm font-semibold",children:"System is in maintenance mode - All non-sysadmin users logged out"})]}),t.jsx("button",{onClick:()=>{const P=window.prompt("Edit maintenance message:",n.maintenanceMessage);P&&P.trim()&&(l(M=>({...M,maintenanceMessage:P.trim()})),n.maintenanceMode&&Z.post("/admin/sysad/maintenance-mode",{enabled:!0,message:P.trim()}).catch(()=>{W.error("Failed to update maintenance message")}))},style:{background:`${R}20`,color:R,borderColor:R},className:"px-4 py-2 rounded-lg text-sm font-medium border hover:opacity-80 transition mr-3",children:"Edit Message"})]})]}),t.jsxs("button",{onClick:w,disabled:f,style:{background:n.maintenanceMode?"#EF4444":"#10B981",color:"#FFFFFF"},className:"px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:opacity-90 transition disabled:opacity-50 flex-shrink-0 ml-4",children:[f?t.jsx(Oe,{className:"w-5 h-5 animate-spin"}):t.jsx(Fj,{className:"w-5 h-5"}),n.maintenanceMode?"Disable":"Enable"]})]})}),t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:`${R}20`},className:"w-10 h-10 rounded-full flex items-center justify-center",children:t.jsx(Mb,{className:"w-5 h-5",style:{color:R}})}),t.jsxs("div",{children:[t.jsx("h3",{style:{color:e.text.primary},className:"font-bold text-lg",children:"Automated System Export"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:"System automatically exports data as ZIP files for backup and compliance."})]})]}),t.jsxs("button",{onClick:()=>S(!0),style:{background:`${R}20`,color:R,borderColor:`${R}40`},className:"px-5 py-2.5 rounded-lg font-semibold text-sm border hover:opacity-80 transition flex items-center gap-2",children:[t.jsx(Rj,{className:"w-4 h-4"}),"Configure Schedule"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"p-4 rounded-xl border",children:[t.jsx("div",{className:"text-2xl mb-2",children:""}),t.jsx("div",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"Frequency"}),t.jsx("div",{style:{color:e.text.primary},className:"font-bold",children:((ee=(J=o.autoExport)==null?void 0:J.frequency)==null?void 0:ee.charAt(0).toUpperCase())+((X=(L=o.autoExport)==null?void 0:L.frequency)==null?void 0:X.slice(1))||"Not set"})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"p-4 rounded-xl border",children:[t.jsx("div",{className:"text-2xl mb-2",children:""}),t.jsx("div",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"Export Time"}),t.jsx("div",{style:{color:e.text.primary},className:"font-bold",children:((te=o.autoExport)==null?void 0:te.time)||"Not set"})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"p-4 rounded-xl border",children:[t.jsx("div",{className:"text-2xl mb-2",children:""}),t.jsx("div",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"Data Types"}),t.jsxs("div",{style:{color:e.text.primary},className:"font-bold",children:[((de=(ce=o.autoExport)==null?void 0:ce.exportTypes)==null?void 0:de.length)||0," selected"]})]})]}),t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-6 rounded-xl border-2 border-dashed text-center",children:[t.jsx("div",{className:"text-4xl mb-3",children:""}),t.jsx("h4",{style:{color:e.text.primary},className:"font-bold text-lg mb-2",children:"Export System Data Now"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm mb-4",children:"Download a complete ZIP file with all system data: transactions, users, merchants, admins, logs, and concerns."}),t.jsx("button",{onClick:()=>h(!0),disabled:f,style:{background:"#10B981",color:"#FFFFFF"},className:"px-8 py-3 rounded-xl font-bold hover:opacity-90 transition disabled:opacity-50",children:f?" Exporting...":" Download System Data (ZIP)"})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Qv,{className:"w-5 h-5",style:{color:R}}),t.jsx("h3",{style:{color:e.text.primary},className:"font-bold text-lg",children:"Export Archive"})]}),t.jsx("div",{className:"flex gap-2",children:["all","auto","manual"].map(P=>t.jsx("button",{onClick:()=>V(P),style:{background:_===P?`${R}20`:"transparent",color:_===P?R:e.text.secondary,borderColor:_===P?`${R}40`:e.border.primary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold border transition capitalize",children:P==="all"?"All":P==="auto"?"Auto-Scheduled":"Manual"},P))})]}),t.jsxs("div",{className:"flex gap-3 mb-4 flex-wrap",children:[t.jsx("input",{type:"text",placeholder:"Search exports...",value:b,onChange:P=>g(P.target.value),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"px-4 py-2 rounded-lg border text-sm flex-1 min-w-[200px] focus:outline-none"}),t.jsx("input",{type:"date",value:j.start,onChange:P=>C({...j,start:P.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"px-3 py-2 rounded-lg border text-sm focus:outline-none"}),t.jsx("span",{style:{color:e.text.secondary},className:"self-center",children:""}),t.jsx("input",{type:"date",value:j.end,onChange:P=>C({...j,end:P.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"px-3 py-2 rounded-lg border text-sm focus:outline-none"}),(j.start||j.end||b)&&t.jsx("button",{onClick:()=>{g(""),C({start:"",end:""})},className:"px-3 py-2 rounded-lg text-xs font-semibold bg-red-500/20 text-red-500 border border-red-500/30",children:"Clear"})]}),H.length===0?t.jsxs("div",{className:"text-center py-10",style:{color:e.text.muted},children:[t.jsx("div",{className:"text-4xl mb-3 opacity-30",children:""}),t.jsx("p",{children:"No exports yet"}),t.jsx("p",{className:"text-xs mt-1",children:"Configure auto-export or trigger a manual export"})]}):t.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2",children:H.map((P,M)=>t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.3)":"#F9FAFB",borderColor:e.border.primary},className:"flex items-center justify-between p-4 rounded-xl border hover:border-opacity-50 transition",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[t.jsx("span",{className:"text-lg",children:P.source==="auto"?"":""}),t.jsx("span",{style:{color:R},className:"font-bold",children:P.exportType||"System Export"}),t.jsx("span",{style:{background:P.source==="auto"?"rgba(59,130,246,0.2)":"rgba(168,85,247,0.2)",color:P.source==="auto"?"#3B82F6":"#A855F7"},className:"px-2 py-0.5 rounded text-xs font-bold",children:P.source==="auto"?"AUTO":"MANUAL"})]}),t.jsxs("div",{style:{color:e.text.secondary},className:"text-sm flex gap-4",children:[t.jsxs("span",{children:[" ",new Date(P.exportedAt||P.timestamp||P.createdAt).toLocaleDateString()]}),t.jsxs("span",{children:[" ",new Date(P.exportedAt||P.timestamp||P.createdAt).toLocaleTimeString()]}),P.fileName&&t.jsxs("span",{children:[" ",P.fileName]}),P.recordCount&&t.jsxs("span",{children:[" ",P.recordCount," records"]})]})]}),P.status==="success"?t.jsx("button",{onClick:()=>O(P._id),className:"px-4 py-2 rounded-lg text-sm font-bold bg-green-500/20 text-green-500 border border-green-500/30 hover:bg-green-500/30 transition",children:" Download"}):t.jsx("span",{className:"px-4 py-2 rounded-lg text-sm font-bold bg-red-500/20 text-red-500 border border-red-500/30",children:" Failed"})]},M))})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{style:{background:"rgba(239,68,68,0.2)"},className:"w-10 h-10 rounded-full flex items-center justify-center",children:t.jsx(Ls,{className:"w-5 h-5 text-red-500"})}),t.jsxs("div",{children:[t.jsx("h3",{style:{color:e.text.primary},className:"font-bold text-lg",children:"Student Deactivation Scheduler"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:"Schedule automatic deactivation of all STUDENT accounts (employees and admins not affected)"})]})]}),t.jsxs("div",{style:{background:"rgba(245,158,11,0.1)",borderColor:"rgba(245,158,11,0.3)"},className:"p-4 rounded-xl border mb-6 flex items-start gap-3",children:[t.jsx(fa,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:[t.jsx("strong",{className:"text-amber-500",children:"Warning:"})," This will deactivate ALL student accounts at the scheduled time. Employees and admin accounts will not be affected."]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Enable Scheduler"}),t.jsx("button",{onClick:()=>l(P=>({...P,deactivationScheduler:{...P.deactivationScheduler,enabled:!P.deactivationScheduler.enabled}})),style:{background:(we=n.deactivationScheduler)!=null&&we.enabled?"#EF4444":"rgba(107,114,128,0.2)",color:(ae=n.deactivationScheduler)!=null&&ae.enabled?"#FFFFFF":e.text.secondary},className:"w-full py-3 rounded-xl font-semibold transition",children:(ue=n.deactivationScheduler)!=null&&ue.enabled?"Enabled":"Disabled"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Date"}),t.jsx("input",{type:"date",value:((Ce=n.deactivationScheduler)==null?void 0:Ce.date)||"",onChange:P=>l(M=>({...M,deactivationScheduler:{...M.deactivationScheduler,date:P.target.value}})),disabled:!((re=n.deactivationScheduler)!=null&&re.enabled),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none disabled:opacity-50"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Time"}),t.jsx("input",{type:"time",value:((Ne=n.deactivationScheduler)==null?void 0:Ne.time)||"",onChange:P=>l(M=>({...M,deactivationScheduler:{...M.deactivationScheduler,time:P.target.value}})),disabled:!((Ue=n.deactivationScheduler)!=null&&Ue.enabled),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none disabled:opacity-50"})]})]}),((Se=n.deactivationScheduler)==null?void 0:Se.enabled)&&t.jsx("div",{className:"mt-4 flex justify-end",children:t.jsxs("button",{onClick:q,disabled:f,style:{background:"#EF4444",color:"#FFFFFF"},className:"px-6 py-3 rounded-xl font-semibold flex items-center gap-2 hover:opacity-90 transition disabled:opacity-50",children:[f?t.jsx(Oe,{className:"w-4 h-4 animate-spin"}):t.jsx(Ve,{className:"w-4 h-4"}),"Save Schedule"]})})]})]}),m&&t.jsx(Q4,{theme:e,isDarkMode:a,dateRange:T,setDateRange:E,customStartDate:D,setCustomStartDate:I,customEndDate:z,setCustomEndDate:Y,loading:f,onExport:A,onCancel:()=>{h(!1),E("all"),I(""),Y("")}}),v&&t.jsx(Z4,{theme:e,isDarkMode:a,configurations:o,setConfigurations:i,exportTypes:G4,loading:f,onSave:k,onCancel:()=>S(!1)})]})}function Q4({theme:e,isDarkMode:a,dateRange:r,setDateRange:s,customStartDate:n,setCustomStartDate:l,customEndDate:o,setCustomEndDate:i,loading:d,onExport:u,onCancel:c}){const x=e.accent.primary;return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:c,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-md overflow-hidden",onClick:m=>m.stopPropagation(),children:[t.jsxs("div",{style:{background:`linear-gradient(135deg, ${x}30 0%, ${x}10 100%)`},className:"px-6 py-5",children:[t.jsx("h3",{style:{color:x},className:"text-xl font-bold",children:"Select Date Range"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm mt-1",children:"Choose which records to include in the export"})]}),t.jsxs("div",{className:"p-6 space-y-3",children:[[{value:"all",label:" All Time",desc:"Export all records"},{value:"24hr",label:" Last 24 Hours",desc:"Records from the past day"},{value:"week",label:" This Week",desc:"Records from the past 7 days"},{value:"month",label:" This Month",desc:"Records from current month"},{value:"custom",label:" Custom Range",desc:"Choose specific dates"}].map(m=>t.jsxs("label",{style:{background:r===m.value?`${x}15`:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:r===m.value?`${x}40`:e.border.primary},className:"flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition",children:[t.jsx("input",{type:"radio",name:"dateRange",value:m.value,checked:r===m.value,onChange:h=>s(h.target.value),className:"w-4 h-4"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{style:{color:e.text.primary},className:"font-semibold text-sm",children:m.label}),t.jsx("div",{style:{color:e.text.secondary},className:"text-xs",children:m.desc})]})]},m.value)),r==="custom"&&t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB"},className:"p-4 rounded-xl grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:x},className:"block text-xs font-semibold mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:n,onChange:m=>l(m.target.value),style:{background:a?"rgba(30,35,71,0.8)":"#FFFFFF",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-3 py-2 rounded-lg border text-sm focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:x},className:"block text-xs font-semibold mb-2",children:"End Date"}),t.jsx("input",{type:"date",value:o,onChange:m=>i(m.target.value),style:{background:a?"rgba(30,35,71,0.8)":"#FFFFFF",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-3 py-2 rounded-lg border text-sm focus:outline-none"})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{onClick:u,disabled:d,style:{background:"#10B981",color:"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold hover:opacity-90 transition disabled:opacity-50",children:d?" Exporting...":" Export Now"}),t.jsx("button",{onClick:c,disabled:d,style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"flex-1 py-3 rounded-xl font-semibold hover:opacity-80 transition",children:"Cancel"})]})]})]})]})}function Z4({theme:e,isDarkMode:a,configurations:r,setConfigurations:s,exportTypes:n,loading:l,onSave:o,onCancel:i}){var u,c,x,m,h,v,S;const d=e.accent.primary;return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:i,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-lg max-h-[90vh] overflow-hidden",onClick:f=>f.stopPropagation(),children:[t.jsxs("div",{style:{background:`linear-gradient(135deg, ${d}30 0%, ${d}10 100%)`},className:"px-6 py-5",children:[t.jsx("h3",{style:{color:d},className:"text-xl font-bold",children:"Configure Export Schedule"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm mt-1",children:"Set up when and how often the system should automatically export data."})]}),t.jsxs("div",{className:"p-6 space-y-5 overflow-y-auto max-h-[calc(90vh-180px)]",children:[t.jsxs("div",{style:{background:(u=r.autoExport)!=null&&u.enabled?`${d}15`:a?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.05)",borderColor:(c=r.autoExport)!=null&&c.enabled?`${d}40`:"rgba(239,68,68,0.3)"},className:"flex items-center justify-between p-4 rounded-xl border",children:[t.jsxs("div",{children:[t.jsx("div",{style:{color:e.text.primary},className:"font-bold text-sm",children:"Enable Automatic Export"}),t.jsx("div",{style:{color:e.text.secondary},className:"text-xs mt-1",children:(x=r.autoExport)!=null&&x.enabled?" Auto-export is active":" Auto-export is disabled"})]}),t.jsx("button",{onClick:()=>{var f;return s({...r,autoExport:{...r.autoExport,enabled:!((f=r.autoExport)!=null&&f.enabled)}})},style:{background:(m=r.autoExport)!=null&&m.enabled?"#10B981":"#6B7280",width:"52px",height:"28px",borderRadius:"14px",position:"relative",transition:"all 0.2s ease"},children:t.jsx("div",{style:{position:"absolute",top:"2px",left:(h=r.autoExport)!=null&&h.enabled?"26px":"2px",width:"24px",height:"24px",borderRadius:"12px",background:"#FFFFFF",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:d},className:"block text-xs font-bold uppercase mb-2",children:"Frequency"}),t.jsxs("select",{value:((v=r.autoExport)==null?void 0:v.frequency)||"daily",onChange:f=>s({...r,autoExport:{...r.autoExport,frequency:f.target.value}}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none",children:[t.jsx("option",{value:"daily",children:" Daily"}),t.jsx("option",{value:"weekly",children:" Weekly"}),t.jsx("option",{value:"monthly",children:" Monthly"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:d},className:"block text-xs font-bold uppercase mb-2",children:"Export Time (24-hour)"}),t.jsx("input",{type:"time",value:((S=r.autoExport)==null?void 0:S.time)||"00:00",onChange:f=>s({...r,autoExport:{...r.autoExport,time:f.target.value}}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:d},className:"block text-xs font-bold uppercase mb-3",children:"Data Types to Export"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.map(f=>{var y,b,g,j,C,T;return t.jsxs("label",{style:{background:(b=(y=r.autoExport)==null?void 0:y.exportTypes)!=null&&b.includes(f.value)?`${d}15`:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:(j=(g=r.autoExport)==null?void 0:g.exportTypes)!=null&&j.includes(f.value)?`${d}40`:e.border.primary},className:"flex items-center gap-2 p-3 rounded-xl border cursor-pointer transition",children:[t.jsx("input",{type:"checkbox",checked:((T=(C=r.autoExport)==null?void 0:C.exportTypes)==null?void 0:T.includes(f.value))||!1,onChange:E=>{var z;const D=((z=r.autoExport)==null?void 0:z.exportTypes)||[],I=E.target.checked?[...D,f.value]:D.filter(Y=>Y!==f.value);s({...r,autoExport:{...r.autoExport,exportTypes:I}})},className:"w-4 h-4"}),t.jsx("span",{className:"text-lg",children:f.icon}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold",children:f.label})]},f.value)})})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{onClick:o,disabled:l,style:{background:d,color:a?"#181D40":"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold hover:opacity-90 transition disabled:opacity-50",children:l?" Saving...":" Save Settings"}),t.jsx("button",{onClick:i,disabled:l,style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"flex-1 py-3 rounded-xl font-semibold hover:opacity-80 transition",children:"Cancel"})]})]})]})]})}function $x({message:e}){st();const a=()=>{window.location.reload()};return t.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #181D40 0%, #0F1227 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",fontFamily:"Arial, sans-serif"},children:t.jsxs("div",{style:{background:"rgba(30, 35, 71, 0.95)",borderRadius:"24px",padding:"60px 40px",maxWidth:"500px",width:"100%",textAlign:"center",border:"2px solid #FFD41C",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.4)"},children:[t.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:"rgba(255, 212, 28, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 30px",border:"3px solid #FFD41C"},children:t.jsx("span",{style:{fontSize:"60px"},children:""})}),t.jsx("h1",{style:{color:"#FFD41C",fontSize:"32px",fontWeight:"700",margin:"0 0 16px 0"},children:"Under Maintenance"}),t.jsx("p",{style:{color:"#FBFBFB",fontSize:"16px",lineHeight:"1.6",margin:"0 0 30px 0",opacity:.9},children:e||"The NUCash system is currently undergoing scheduled maintenance. We apologize for any inconvenience."}),t.jsxs("div",{style:{background:"rgba(255, 212, 28, 0.1)",borderRadius:"12px",padding:"20px",marginBottom:"30px",border:"1px solid rgba(255, 212, 28, 0.3)"},children:[t.jsx("p",{style:{color:"#FFD41C",fontSize:"14px",margin:"0 0 8px 0",fontWeight:"600"},children:" Please check back later"}),t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.7)",fontSize:"13px",margin:0},children:"Our team is working to restore services as quickly as possible."})]}),t.jsx("button",{onClick:a,style:{background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"12px",padding:"16px 40px",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(255, 212, 28, 0.3)"},onMouseEnter:r=>{r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.boxShadow="0 6px 20px rgba(255, 212, 28, 0.4)"},onMouseLeave:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 4px 15px rgba(255, 212, 28, 0.3)"},children:" Try Again"}),t.jsxs("p",{style:{color:"rgba(251, 251, 251, 0.5)",fontSize:"12px",marginTop:"30px"},children:["Need assistance? Contact us at"," ",t.jsx("a",{href:"mailto:nucashsystem@gmail.com",style:{color:"#FFD41C",textDecoration:"none"},children:"nucashsystem@gmail.com"})]}),t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.4)",fontSize:"11px",marginTop:"20px"},children:" 2026 NUCash System | National University - Laguna"})]})})}function J4(){const{theme:e,isDarkMode:a}=ne();return t.jsx("div",{style:{minHeight:"100vh",background:e.bg.primary,color:e.text.primary,padding:"40px 20px"},children:t.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",background:e.bg.card,borderRadius:"16px",padding:"40px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"40px"},children:[t.jsx("h1",{style:{color:e.accent.primary,fontSize:"32px",marginBottom:"8px"},children:"Terms and Conditions"}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"14px"},children:"Last updated: February 2026"})]}),t.jsxs("div",{style:{lineHeight:"1.8",fontSize:"15px"},children:[t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"1. Acceptance of Terms"}),t.jsx("p",{style:{color:e.text.secondary},children:"By accessing and using the NUCash System, you accept and agree to be bound by the terms and provisions of this agreement. If you do not agree to abide by these terms, please do not use this service."})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"2. Description of Service"}),t.jsx("p",{style:{color:e.text.secondary},children:"NUCash is a digital payment and shuttle management system designed for National University - Laguna. The system provides:"}),t.jsxs("ul",{style:{color:e.text.secondary,paddingLeft:"20px",marginTop:"10px"},children:[t.jsx("li",{children:"Digital wallet services for cashless transactions"}),t.jsx("li",{children:"Shuttle service tracking and payment"}),t.jsx("li",{children:"Merchant payment processing"}),t.jsx("li",{children:"Account management features"})]})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"3. User Responsibilities"}),t.jsx("p",{style:{color:e.text.secondary},children:"Users are responsible for:"}),t.jsxs("ul",{style:{color:e.text.secondary,paddingLeft:"20px",marginTop:"10px"},children:[t.jsx("li",{children:"Maintaining the confidentiality of their PIN and account information"}),t.jsx("li",{children:"All activities that occur under their account"}),t.jsx("li",{children:"Notifying the administration immediately of any unauthorized use"}),t.jsx("li",{children:"Ensuring their RFID card is not shared with others"})]})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"4. Account Security"}),t.jsx("p",{style:{color:e.text.secondary},children:"You are responsible for safeguarding your 6-digit PIN. We recommend that you do not share your PIN with anyone. NUCash staff will never ask for your PIN."})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"5. Transactions"}),t.jsx("p",{style:{color:e.text.secondary},children:"All transactions made through the NUCash system are final. Refunds may be processed at the discretion of the Treasury Office. Users should verify transaction details before confirming any payment."})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"6. Limitation of Liability"}),t.jsx("p",{style:{color:e.text.secondary},children:"NUCash and National University shall not be liable for any indirect, incidental, special, consequential, or punitive damages resulting from your use of the service."})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"7. Modifications"}),t.jsx("p",{style:{color:e.text.secondary},children:"We reserve the right to modify these terms at any time. Users will be notified of significant changes through the system or via email."})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"8. Contact Information"}),t.jsxs("p",{style:{color:e.text.secondary},children:["For questions about these Terms and Conditions, please contact us at"," ",t.jsx("a",{href:"mailto:nucashsystem@gmail.com",style:{color:e.accent.primary},children:"nucashsystem@gmail.com"})]})]})]}),t.jsx("div",{style:{textAlign:"center",marginTop:"40px"},children:t.jsx(Eo,{to:"/login",style:{color:e.accent.primary,textDecoration:"none",fontWeight:"600",fontSize:"14px"},children:" Back to Login"})}),t.jsx("div",{style:{textAlign:"center",marginTop:"30px",paddingTop:"20px",borderTop:`1px solid ${e.border.primary}`},children:t.jsx("p",{style:{color:e.text.muted,fontSize:"12px"},children:" 2026 NUCash System | Jose Anjelo Abued, Ashley Gwyneth Cuevas, Jhustine Brylle Logronio"})})]})})}function K4(){const{theme:e,isDarkMode:a}=ne();return t.jsx("div",{style:{minHeight:"100vh",background:e.bg.primary,color:e.text.primary,padding:"40px 20px"},children:t.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",background:e.bg.card,borderRadius:"16px",padding:"40px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"40px"},children:[t.jsx("h1",{style:{color:e.accent.primary,fontSize:"32px",marginBottom:"8px"},children:"Privacy Policy"}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"14px"},children:"Last updated: February 2026"})]}),t.jsxs("div",{style:{lineHeight:"1.8",fontSize:"15px"},children:[t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"1. Information We Collect"}),t.jsx("p",{style:{color:e.text.secondary},children:"We collect information you provide directly to us, including:"}),t.jsxs("ul",{style:{color:e.text.secondary,paddingLeft:"20px",marginTop:"10px"},children:[t.jsx("li",{children:"Personal information (name, email, student/employee ID)"}),t.jsx("li",{children:"RFID card information"}),t.jsx("li",{children:"Transaction history"}),t.jsx("li",{children:"Account activity and usage data"})]})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"2. How We Use Your Information"}),t.jsx("p",{style:{color:e.text.secondary},children:"We use the information we collect to:"}),t.jsxs("ul",{style:{color:e.text.secondary,paddingLeft:"20px",marginTop:"10px"},children:[t.jsx("li",{children:"Process transactions and manage your account"}),t.jsx("li",{children:"Provide shuttle tracking and payment services"}),t.jsx("li",{children:"Send important notifications about your account"}),t.jsx("li",{children:"Improve our services and user experience"}),t.jsx("li",{children:"Ensure security and prevent fraud"})]})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"3. Information Sharing"}),t.jsx("p",{style:{color:e.text.secondary},children:"We do not sell, trade, or otherwise transfer your personal information to outside parties. Your information may be shared with:"}),t.jsxs("ul",{style:{color:e.text.secondary,paddingLeft:"20px",marginTop:"10px"},children:[t.jsx("li",{children:"National University administration for academic purposes"}),t.jsx("li",{children:"Authorized merchants for transaction processing"}),t.jsx("li",{children:"Law enforcement when required by law"})]})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"4. Data Security"}),t.jsx("p",{style:{color:e.text.secondary},children:"We implement appropriate security measures to protect your personal information:"}),t.jsxs("ul",{style:{color:e.text.secondary,paddingLeft:"20px",marginTop:"10px"},children:[t.jsx("li",{children:"Encrypted data transmission (HTTPS)"}),t.jsx("li",{children:"Secure password hashing (bcrypt)"}),t.jsx("li",{children:"Regular security audits"}),t.jsx("li",{children:"Access controls and authentication"})]})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"5. Data Retention"}),t.jsx("p",{style:{color:e.text.secondary},children:"We retain your personal information for as long as your account is active or as needed to provide you services. Transaction records are kept for a minimum of 5 years for auditing purposes."})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"6. Your Rights"}),t.jsx("p",{style:{color:e.text.secondary},children:"You have the right to:"}),t.jsxs("ul",{style:{color:e.text.secondary,paddingLeft:"20px",marginTop:"10px"},children:[t.jsx("li",{children:"Access your personal information"}),t.jsx("li",{children:"Request correction of inaccurate data"}),t.jsx("li",{children:"Request account deactivation"}),t.jsx("li",{children:"Receive a copy of your transaction history"})]})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"7. Cookies and Tracking"}),t.jsx("p",{style:{color:e.text.secondary},children:"We use local storage and session cookies to maintain your login session and preferences. These are essential for the proper functioning of the system."})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"8. Changes to This Policy"}),t.jsx("p",{style:{color:e.text.secondary},children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date.'})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"9. Contact Us"}),t.jsxs("p",{style:{color:e.text.secondary},children:["If you have any questions about this Privacy Policy, please contact us at"," ",t.jsx("a",{href:"mailto:nucashsystem@gmail.com",style:{color:e.accent.primary},children:"nucashsystem@gmail.com"})]})]})]}),t.jsx("div",{style:{textAlign:"center",marginTop:"40px"},children:t.jsx(Eo,{to:"/login",style:{color:e.accent.primary,textDecoration:"none",fontWeight:"600",fontSize:"14px"},children:" Back to Login"})}),t.jsx("div",{style:{textAlign:"center",marginTop:"30px",paddingTop:"20px",borderTop:`1px solid ${e.border.primary}`},children:t.jsx("p",{style:{color:e.text.muted,fontSize:"12px"},children:" 2026 NUCash System | Jose Anjelo Abued, Ashley Gwyneth Cuevas, Jhustine Brylle Logronio"})})]})})}const Yt=({children:e})=>{const a=localStorage.getItem("adminToken");return JSON.parse(localStorage.getItem("adminData")||"{}"),a?t.jsx(_2,{children:e}):t.jsx(Dt,{to:"/login",replace:!0})},wr=({children:e})=>localStorage.getItem("adminToken")?t.jsx(I2,{children:e}):t.jsx(Dt,{to:"/login",replace:!0}),Na=({children:e})=>localStorage.getItem("adminToken")?t.jsx(O2,{children:e}):t.jsx(Dt,{to:"/login",replace:!0}),Cr=({children:e})=>localStorage.getItem("adminToken")?t.jsx(U2,{children:e}):t.jsx(Dt,{to:"/login",replace:!0}),on=({children:e})=>localStorage.getItem("userToken")?t.jsx(q2,{children:e}):t.jsx(Dt,{to:"/login",replace:!0}),kr=({children:e})=>localStorage.getItem("adminToken")?t.jsx(W2,{children:e}):t.jsx(Dt,{to:"/login",replace:!0});function eN(){const{isMaintenanceMode:e,maintenanceMessage:a,isSysadmin:r}=A2();return e&&!r?t.jsx($x,{message:a}):t.jsxs(D1,{children:[t.jsx(le,{path:"/login",element:t.jsx(R2,{})}),t.jsx(le,{path:"/activate",element:t.jsx(B2,{})}),t.jsx(le,{path:"/maintenance",element:t.jsx($x,{})}),t.jsx(le,{path:"/terms",element:t.jsx(J4,{})}),t.jsx(le,{path:"/privacy",element:t.jsx(K4,{})}),t.jsx(le,{path:"/user/dashboard",element:t.jsx(on,{children:t.jsx(w4,{})})}),t.jsx(le,{path:"/user/history",element:t.jsx(on,{children:t.jsx(F4,{})})}),t.jsx(le,{path:"/user/concerns",element:t.jsx(on,{children:t.jsx(E4,{})})}),t.jsx(le,{path:"/user/profile",element:t.jsx(on,{children:t.jsx(A4,{})})}),t.jsx(le,{path:"/faq",element:t.jsx(on,{children:t.jsx(R4,{})})}),t.jsx(le,{path:"/users-dashboard",element:t.jsx(Dt,{to:"/user/dashboard",replace:!0})}),t.jsx(le,{path:"/admin/treasury/dashboard",element:t.jsx(Na,{children:t.jsx(Jj,{})})}),t.jsx(le,{path:"/admin/treasury/cashin",element:t.jsx(Na,{children:t.jsx(e4,{})})}),t.jsx(le,{path:"/admin/treasury/register",element:t.jsx(Na,{children:t.jsx(a4,{})})}),t.jsx(le,{path:"/admin/treasury/transactions",element:t.jsx(Na,{children:t.jsx(Ox,{})})}),t.jsx(le,{path:"/admin/treasury/merchants",element:t.jsx(Na,{children:t.jsx(r4,{})})}),t.jsx(le,{path:"/admin/treasury/logs",element:t.jsx(Na,{children:t.jsx(ln,{})})}),t.jsx(le,{path:"/admin/treasury/concerns",element:t.jsx(Na,{children:t.jsx(i4,{})})}),t.jsx(le,{path:"/admin/treasury/config",element:t.jsx(Na,{children:t.jsx(c4,{})})}),t.jsx(le,{path:"/admin/treasury/profile",element:t.jsx(Na,{children:t.jsx(ts,{})})}),t.jsx(le,{path:"/admin/treasury",element:t.jsx(Dt,{to:"/admin/treasury/dashboard",replace:!0})}),t.jsx(le,{path:"/admin/accounting/home",element:t.jsx(Cr,{children:t.jsx(p4,{})})}),t.jsx(le,{path:"/admin/accounting/transactions",element:t.jsx(Cr,{children:t.jsx(Ox,{})})}),t.jsx(le,{path:"/admin/accounting/merchants",element:t.jsx(Cr,{children:t.jsx(x4,{})})}),t.jsx(le,{path:"/admin/accounting/logs",element:t.jsx(Cr,{children:t.jsx(ln,{})})}),t.jsx(le,{path:"/admin/accounting/concerns",element:t.jsx(Cr,{children:t.jsx(N4,{})})}),t.jsx(le,{path:"/admin/accounting/config",element:t.jsx(Cr,{children:t.jsx(S4,{})})}),t.jsx(le,{path:"/admin/accounting/profile",element:t.jsx(Cr,{children:t.jsx(ts,{})})}),t.jsx(le,{path:"/admin/accounting",element:t.jsx(Dt,{to:"/admin/accounting/home",replace:!0})}),t.jsx(le,{path:"/admin/sysad/dashboard",element:t.jsx(kr,{children:t.jsx(z4,{})})}),t.jsx(le,{path:"/admin/sysad/users",element:t.jsx(kr,{children:t.jsx(I4,{})})}),t.jsx(le,{path:"/admin/sysad/transfer-card",element:t.jsx(kr,{children:t.jsx(Y4,{})})}),t.jsx(le,{path:"/admin/sysad/logs",element:t.jsx(kr,{children:t.jsx(ln,{})})}),t.jsx(le,{path:"/admin/sysad/concerns",element:t.jsx(kr,{children:t.jsx(V4,{})})}),t.jsx(le,{path:"/admin/sysad/config",element:t.jsx(kr,{children:t.jsx(X4,{})})}),t.jsx(le,{path:"/admin/sysad/profile",element:t.jsx(kr,{children:t.jsx(ts,{})})}),t.jsx(le,{path:"/admin/sysad",element:t.jsx(Dt,{to:"/admin/sysad/dashboard",replace:!0})}),t.jsx(le,{path:"/admin/motorpool",element:t.jsx(Yt,{children:t.jsx(Sv,{})})}),t.jsx(le,{path:"/admin/motorpool/routes",element:t.jsx(Yt,{children:t.jsx(Cv,{})})}),t.jsx(le,{path:"/admin/motorpool/drivers",element:t.jsx(Yt,{children:t.jsx(kv,{})})}),t.jsx(le,{path:"/admin/motorpool/shuttles",element:t.jsx(Yt,{children:t.jsx(Fv,{})})}),t.jsx(le,{path:"/admin/motorpool/trips",element:t.jsx(Yt,{children:t.jsx(Ev,{})})}),t.jsx(le,{path:"/admin/motorpool/phones",element:t.jsx(Yt,{children:t.jsx(Av,{})})}),t.jsx(le,{path:"/admin/motorpool/concerns",element:t.jsx(Yt,{children:t.jsx(Rv,{})})}),t.jsx(le,{path:"/admin/motorpool/configurations",element:t.jsx(Yt,{children:t.jsx(zv,{})})}),t.jsx(le,{path:"/admin/motorpool/profile",element:t.jsx(Yt,{children:t.jsx(ts,{})})}),t.jsx(le,{path:"/admin/merchant",element:t.jsx(wr,{children:t.jsx(_v,{})})}),t.jsx(le,{path:"/admin/merchant/merchants",element:t.jsx(wr,{children:t.jsx(Iv,{})})}),t.jsx(le,{path:"/admin/merchant/phones",element:t.jsx(wr,{children:t.jsx(Ov,{})})}),t.jsx(le,{path:"/admin/merchant/concerns",element:t.jsx(wr,{children:t.jsx($v,{})})}),t.jsx(le,{path:"/admin/merchant/configurations",element:t.jsx(wr,{children:t.jsx(Uv,{})})}),t.jsx(le,{path:"/admin/merchant/profile",element:t.jsx(wr,{children:t.jsx(ts,{})})}),t.jsx(le,{path:"/admin/merchant/logs",element:t.jsx(wr,{children:t.jsx(ln,{})})}),t.jsx(le,{path:"/admin/logs",element:t.jsx(Yt,{children:t.jsx(ln,{})})}),t.jsx(le,{path:"/admin/profile",element:t.jsx(Yt,{children:t.jsx(ts,{})})}),t.jsx(le,{path:"/admin/concerns",element:t.jsx(Yt,{children:t.jsx(j4,{})})}),t.jsx(le,{path:"/",element:t.jsx(Dt,{to:"/login",replace:!0})}),t.jsx(le,{path:"/admin",element:t.jsx(Dt,{to:"/admin/motorpool",replace:!0})}),t.jsx(le,{path:"*",element:t.jsx(Dt,{to:"/login",replace:!0})})]})}function tN(){return t.jsx(V1,{children:t.jsx(G1,{children:t.jsxs(P1,{children:[t.jsx(E2,{}),t.jsx(eN,{})]})})})}P0.createRoot(document.getElementById("root")).render(t.jsx(ke.StrictMode,{children:t.jsx(tN,{})}));
