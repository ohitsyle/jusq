function Ph(e,a){for(var r=0;r<a.length;r++){const s=a[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const l=Object.getOwnPropertyDescriptor(s,n);l&&Object.defineProperty(e,n,l.get?l:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();function Ox(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $x={exports:{}},_o={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh=Symbol.for("react.transitional.element"),Wh=Symbol.for("react.fragment");function Px(e,a,r){var s=null;if(r!==void 0&&(s=""+r),a.key!==void 0&&(s=""+a.key),"key"in a){r={};for(var n in a)n!=="key"&&(r[n]=a[n])}else r=a;return a=r.ref,{$$typeof:Hh,type:e,key:s,ref:a!==void 0?a:null,props:r}}_o.Fragment=Wh;_o.jsx=Px;_o.jsxs=Px;$x.exports=_o;var t=$x.exports,Hx={exports:{}},ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bd=Symbol.for("react.transitional.element"),qh=Symbol.for("react.portal"),Yh=Symbol.for("react.fragment"),Gh=Symbol.for("react.strict_mode"),Vh=Symbol.for("react.profiler"),Xh=Symbol.for("react.consumer"),Qh=Symbol.for("react.context"),Zh=Symbol.for("react.forward_ref"),Jh=Symbol.for("react.suspense"),Kh=Symbol.for("react.memo"),Wx=Symbol.for("react.lazy"),eb=Symbol.for("react.activity"),zu=Symbol.iterator;function tb(e){return e===null||typeof e!="object"?null:(e=zu&&e[zu]||e["@@iterator"],typeof e=="function"?e:null)}var qx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yx=Object.assign,Gx={};function Os(e,a,r){this.props=e,this.context=a,this.refs=Gx,this.updater=r||qx}Os.prototype.isReactComponent={};Os.prototype.setState=function(e,a){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,a,"setState")};Os.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Vx(){}Vx.prototype=Os.prototype;function yd(e,a,r){this.props=e,this.context=a,this.refs=Gx,this.updater=r||qx}var vd=yd.prototype=new Vx;vd.constructor=yd;Yx(vd,Os.prototype);vd.isPureReactComponent=!0;var Bu=Array.isArray;function sc(){}var _e={H:null,A:null,T:null,S:null},Xx=Object.prototype.hasOwnProperty;function jd(e,a,r){var s=r.ref;return{$$typeof:bd,type:e,key:a,ref:s!==void 0?s:null,props:r}}function ab(e,a){return jd(e.type,a,e.props)}function Nd(e){return typeof e=="object"&&e!==null&&e.$$typeof===bd}function rb(e){var a={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return a[r]})}var Du=/\/+/g;function di(e,a){return typeof e=="object"&&e!==null&&e.key!=null?rb(""+e.key):a.toString(36)}function sb(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(sc,sc):(e.status="pending",e.then(function(a){e.status==="pending"&&(e.status="fulfilled",e.value=a)},function(a){e.status==="pending"&&(e.status="rejected",e.reason=a)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function rs(e,a,r,s,n){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case bd:case qh:o=!0;break;case Wx:return o=e._init,rs(o(e._payload),a,r,s,n)}}if(o)return n=n(e),o=s===""?"."+di(e,0):s,Bu(n)?(r="",o!=null&&(r=o.replace(Du,"$&/")+"/"),rs(n,a,r,"",function(u){return u})):n!=null&&(Nd(n)&&(n=ab(n,r+(n.key==null||e&&e.key===n.key?"":(""+n.key).replace(Du,"$&/")+"/")+o)),a.push(n)),1;o=0;var i=s===""?".":s+":";if(Bu(e))for(var c=0;c<e.length;c++)s=e[c],l=i+di(s,c),o+=rs(s,a,r,l,n);else if(c=tb(e),typeof c=="function")for(e=c.call(e),c=0;!(s=e.next()).done;)s=s.value,l=i+di(s,c++),o+=rs(s,a,r,l,n);else if(l==="object"){if(typeof e.then=="function")return rs(sb(e),a,r,s,n);throw a=String(e),Error("Objects are not valid as a React child (found: "+(a==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.")}return o}function pl(e,a,r){if(e==null)return e;var s=[],n=0;return rs(e,s,"","",function(l){return a.call(r,l,n++)}),s}function nb(e){if(e._status===-1){var a=e._result;a=a(),a.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=a)}if(e._status===1)return e._result.default;throw e._result}var _u=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},lb={map:pl,forEach:function(e,a,r){pl(e,function(){a.apply(this,arguments)},r)},count:function(e){var a=0;return pl(e,function(){a++}),a},toArray:function(e){return pl(e,function(a){return a})||[]},only:function(e){if(!Nd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Activity=eb;ue.Children=lb;ue.Component=Os;ue.Fragment=Yh;ue.Profiler=Vh;ue.PureComponent=yd;ue.StrictMode=Gh;ue.Suspense=Jh;ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_e;ue.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _e.H.useMemoCache(e)}};ue.cache=function(e){return function(){return e.apply(null,arguments)}};ue.cacheSignal=function(){return null};ue.cloneElement=function(e,a,r){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var s=Yx({},e.props),n=e.key;if(a!=null)for(l in a.key!==void 0&&(n=""+a.key),a)!Xx.call(a,l)||l==="key"||l==="__self"||l==="__source"||l==="ref"&&a.ref===void 0||(s[l]=a[l]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var o=Array(l),i=0;i<l;i++)o[i]=arguments[i+2];s.children=o}return jd(e.type,n,s)};ue.createContext=function(e){return e={$$typeof:Qh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:Xh,_context:e},e};ue.createElement=function(e,a,r){var s,n={},l=null;if(a!=null)for(s in a.key!==void 0&&(l=""+a.key),a)Xx.call(a,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(n[s]=a[s]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var i=Array(o),c=0;c<o;c++)i[c]=arguments[c+2];n.children=i}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)n[s]===void 0&&(n[s]=o[s]);return jd(e,l,n)};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:Zh,render:e}};ue.isValidElement=Nd;ue.lazy=function(e){return{$$typeof:Wx,_payload:{_status:-1,_result:e},_init:nb}};ue.memo=function(e,a){return{$$typeof:Kh,type:e,compare:a===void 0?null:a}};ue.startTransition=function(e){var a=_e.T,r={};_e.T=r;try{var s=e(),n=_e.S;n!==null&&n(r,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(sc,_u)}catch(l){_u(l)}finally{a!==null&&r.types!==null&&(a.types=r.types),_e.T=a}};ue.unstable_useCacheRefresh=function(){return _e.H.useCacheRefresh()};ue.use=function(e){return _e.H.use(e)};ue.useActionState=function(e,a,r){return _e.H.useActionState(e,a,r)};ue.useCallback=function(e,a){return _e.H.useCallback(e,a)};ue.useContext=function(e){return _e.H.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e,a){return _e.H.useDeferredValue(e,a)};ue.useEffect=function(e,a){return _e.H.useEffect(e,a)};ue.useEffectEvent=function(e){return _e.H.useEffectEvent(e)};ue.useId=function(){return _e.H.useId()};ue.useImperativeHandle=function(e,a,r){return _e.H.useImperativeHandle(e,a,r)};ue.useInsertionEffect=function(e,a){return _e.H.useInsertionEffect(e,a)};ue.useLayoutEffect=function(e,a){return _e.H.useLayoutEffect(e,a)};ue.useMemo=function(e,a){return _e.H.useMemo(e,a)};ue.useOptimistic=function(e,a){return _e.H.useOptimistic(e,a)};ue.useReducer=function(e,a,r){return _e.H.useReducer(e,a,r)};ue.useRef=function(e){return _e.H.useRef(e)};ue.useState=function(e){return _e.H.useState(e)};ue.useSyncExternalStore=function(e,a,r){return _e.H.useSyncExternalStore(e,a,r)};ue.useTransition=function(){return _e.H.useTransition()};ue.version="19.2.3";Hx.exports=ue;var p=Hx.exports;const je=Ox(p),ob=Ph({__proto__:null,default:je},[p]);var Qx={exports:{}},Mo={},Zx={exports:{}},Jx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function a(z,q){var w=z.length;z.push(q);e:for(;0<w;){var N=w-1>>>1,R=z[N];if(0<n(R,q))z[N]=q,z[w]=R,w=N;else break e}}function r(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var q=z[0],w=z.pop();if(w!==q){z[0]=w;e:for(var N=0,R=z.length,T=R>>>1;N<T;){var O=2*(N+1)-1,V=z[O],P=O+1,W=z[P];if(0>n(V,w))P<R&&0>n(W,V)?(z[N]=W,z[P]=w,N=P):(z[N]=V,z[O]=w,N=O);else if(P<R&&0>n(W,w))z[N]=W,z[P]=w,N=P;else break e}}return q}function n(z,q){var w=z.sortIndex-q.sortIndex;return w!==0?w:z.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var c=[],u=[],d=1,x=null,m=3,b=!1,v=!1,S=!1,h=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;function j(z){for(var q=r(u);q!==null;){if(q.callback===null)s(u);else if(q.startTime<=z)s(u),q.sortIndex=q.expirationTime,a(c,q);else break;q=r(u)}}function C(z){if(S=!1,j(z),!v)if(r(c)!==null)v=!0,E||(E=!0,k());else{var q=r(u);q!==null&&_(C,q.startTime-z)}}var E=!1,A=-1,M=5,B=-1;function F(){return h?!0:!(e.unstable_now()-B<M)}function L(){if(h=!1,E){var z=e.unstable_now();B=z;var q=!0;try{e:{v=!1,S&&(S=!1,g(A),A=-1),b=!0;var w=m;try{t:{for(j(z),x=r(c);x!==null&&!(x.expirationTime>z&&F());){var N=x.callback;if(typeof N=="function"){x.callback=null,m=x.priorityLevel;var R=N(x.expirationTime<=z);if(z=e.unstable_now(),typeof R=="function"){x.callback=R,j(z),q=!0;break t}x===r(c)&&s(c),j(z)}else s(c);x=r(c)}if(x!==null)q=!0;else{var T=r(u);T!==null&&_(C,T.startTime-z),q=!1}}break e}finally{x=null,m=w,b=!1}q=void 0}}finally{q?k():E=!1}}}var k;if(typeof f=="function")k=function(){f(L)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,D=U.port2;U.port1.onmessage=L,k=function(){D.postMessage(null)}}else k=function(){y(L,0)};function _(z,q){A=y(function(){z(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(z){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var w=m;m=q;try{return z()}finally{m=w}},e.unstable_requestPaint=function(){h=!0},e.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var w=m;m=z;try{return q()}finally{m=w}},e.unstable_scheduleCallback=function(z,q,w){var N=e.unstable_now();switch(typeof w=="object"&&w!==null?(w=w.delay,w=typeof w=="number"&&0<w?N+w:N):w=N,z){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=w+R,z={id:d++,callback:q,priorityLevel:z,startTime:w,expirationTime:R,sortIndex:-1},w>N?(z.sortIndex=w,a(u,z),r(c)===null&&z===r(u)&&(S?(g(A),A=-1):S=!0,_(C,w-N))):(z.sortIndex=R,a(c,z),v||b||(v=!0,E||(E=!0,k()))),z},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(z){var q=m;return function(){var w=m;m=q;try{return z.apply(this,arguments)}finally{m=w}}}})(Jx);Zx.exports=Jx;var ib=Zx.exports,Kx={exports:{}},gt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb=p;function em(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function La(){}var xt={d:{f:La,r:function(){throw Error(em(522))},D:La,C:La,L:La,m:La,X:La,S:La,M:La},p:0,findDOMNode:null},db=Symbol.for("react.portal");function ub(e,a,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:db,key:s==null?null:""+s,children:e,containerInfo:a,implementation:r}}var mn=cb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Io(e,a){if(e==="font")return"";if(typeof a=="string")return a==="use-credentials"?a:""}gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=xt;gt.createPortal=function(e,a){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)throw Error(em(299));return ub(e,a,null,r)};gt.flushSync=function(e){var a=mn.T,r=xt.p;try{if(mn.T=null,xt.p=2,e)return e()}finally{mn.T=a,xt.p=r,xt.d.f()}};gt.preconnect=function(e,a){typeof e=="string"&&(a?(a=a.crossOrigin,a=typeof a=="string"?a==="use-credentials"?a:"":void 0):a=null,xt.d.C(e,a))};gt.prefetchDNS=function(e){typeof e=="string"&&xt.d.D(e)};gt.preinit=function(e,a){if(typeof e=="string"&&a&&typeof a.as=="string"){var r=a.as,s=Io(r,a.crossOrigin),n=typeof a.integrity=="string"?a.integrity:void 0,l=typeof a.fetchPriority=="string"?a.fetchPriority:void 0;r==="style"?xt.d.S(e,typeof a.precedence=="string"?a.precedence:void 0,{crossOrigin:s,integrity:n,fetchPriority:l}):r==="script"&&xt.d.X(e,{crossOrigin:s,integrity:n,fetchPriority:l,nonce:typeof a.nonce=="string"?a.nonce:void 0})}};gt.preinitModule=function(e,a){if(typeof e=="string")if(typeof a=="object"&&a!==null){if(a.as==null||a.as==="script"){var r=Io(a.as,a.crossOrigin);xt.d.M(e,{crossOrigin:r,integrity:typeof a.integrity=="string"?a.integrity:void 0,nonce:typeof a.nonce=="string"?a.nonce:void 0})}}else a==null&&xt.d.M(e)};gt.preload=function(e,a){if(typeof e=="string"&&typeof a=="object"&&a!==null&&typeof a.as=="string"){var r=a.as,s=Io(r,a.crossOrigin);xt.d.L(e,r,{crossOrigin:s,integrity:typeof a.integrity=="string"?a.integrity:void 0,nonce:typeof a.nonce=="string"?a.nonce:void 0,type:typeof a.type=="string"?a.type:void 0,fetchPriority:typeof a.fetchPriority=="string"?a.fetchPriority:void 0,referrerPolicy:typeof a.referrerPolicy=="string"?a.referrerPolicy:void 0,imageSrcSet:typeof a.imageSrcSet=="string"?a.imageSrcSet:void 0,imageSizes:typeof a.imageSizes=="string"?a.imageSizes:void 0,media:typeof a.media=="string"?a.media:void 0})}};gt.preloadModule=function(e,a){if(typeof e=="string")if(a){var r=Io(a.as,a.crossOrigin);xt.d.m(e,{as:typeof a.as=="string"&&a.as!=="script"?a.as:void 0,crossOrigin:r,integrity:typeof a.integrity=="string"?a.integrity:void 0})}else xt.d.m(e)};gt.requestFormReset=function(e){xt.d.r(e)};gt.unstable_batchedUpdates=function(e,a){return e(a)};gt.useFormState=function(e,a,r){return mn.H.useFormState(e,a,r)};gt.useFormStatus=function(){return mn.H.useHostTransitionStatus()};gt.version="19.2.3";function tm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tm)}catch(e){console.error(e)}}tm(),Kx.exports=gt;var pb=Kx.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ze=ib,am=p,xb=pb;function ee(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function rm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gn(e){var a=e,r=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,a.flags&4098&&(r=a.return),e=a.return;while(e)}return a.tag===3?r:null}function sm(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function nm(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function Mu(e){if(Gn(e)!==e)throw Error(ee(188))}function mb(e){var a=e.alternate;if(!a){if(a=Gn(e),a===null)throw Error(ee(188));return a!==e?null:e}for(var r=e,s=a;;){var n=r.return;if(n===null)break;var l=n.alternate;if(l===null){if(s=n.return,s!==null){r=s;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===r)return Mu(n),e;if(l===s)return Mu(n),a;l=l.sibling}throw Error(ee(188))}if(r.return!==s.return)r=n,s=l;else{for(var o=!1,i=n.child;i;){if(i===r){o=!0,r=n,s=l;break}if(i===s){o=!0,s=n,r=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===r){o=!0,r=l,s=n;break}if(i===s){o=!0,s=l,r=n;break}i=i.sibling}if(!o)throw Error(ee(189))}}if(r.alternate!==s)throw Error(ee(190))}if(r.tag!==3)throw Error(ee(188));return r.stateNode.current===r?e:a}function lm(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=lm(e),a!==null)return a;e=e.sibling}return null}var Me=Object.assign,fb=Symbol.for("react.element"),xl=Symbol.for("react.transitional.element"),cn=Symbol.for("react.portal"),ls=Symbol.for("react.fragment"),om=Symbol.for("react.strict_mode"),nc=Symbol.for("react.profiler"),im=Symbol.for("react.consumer"),Ca=Symbol.for("react.context"),Sd=Symbol.for("react.forward_ref"),lc=Symbol.for("react.suspense"),oc=Symbol.for("react.suspense_list"),wd=Symbol.for("react.memo"),Oa=Symbol.for("react.lazy"),ic=Symbol.for("react.activity"),gb=Symbol.for("react.memo_cache_sentinel"),Iu=Symbol.iterator;function Js(e){return e===null||typeof e!="object"?null:(e=Iu&&e[Iu]||e["@@iterator"],typeof e=="function"?e:null)}var hb=Symbol.for("react.client.reference");function cc(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===hb?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ls:return"Fragment";case nc:return"Profiler";case om:return"StrictMode";case lc:return"Suspense";case oc:return"SuspenseList";case ic:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case cn:return"Portal";case Ca:return e.displayName||"Context";case im:return(e._context.displayName||"Context")+".Consumer";case Sd:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wd:return a=e.displayName||null,a!==null?a:cc(e.type)||"Memo";case Oa:a=e._payload,e=e._init;try{return cc(e(a))}catch{}}return null}var dn=Array.isArray,ie=am.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se=xb.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ar={pending:!1,data:null,method:null,action:null},dc=[],os=-1;function ma(e){return{current:e}}function at(e){0>os||(e.current=dc[os],dc[os]=null,os--)}function Re(e,a){os++,dc[os]=e.current,e.current=a}var ua=ma(null),En=ma(null),Ja=ma(null),to=ma(null);function ao(e,a){switch(Re(Ja,a),Re(En,e),Re(ua,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?Hp(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=Hp(a),e=Eg(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}at(ua),Re(ua,e)}function Cs(){at(ua),at(En),at(Ja)}function uc(e){e.memoizedState!==null&&Re(to,e);var a=ua.current,r=Eg(a,e.type);a!==r&&(Re(En,e),Re(ua,r))}function ro(e){En.current===e&&(at(ua),at(En)),to.current===e&&(at(to),On._currentValue=Ar)}var ui,Lu;function Cr(e){if(ui===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);ui=a&&a[1]||"",Lu=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ui+e+Lu}var pi=!1;function xi(e,a){if(!e||pi)return"";pi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(a){var x=function(){throw Error()};if(Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(b){var m=b}Reflect.construct(e,[],x)}else{try{x.call()}catch(b){m=b}e.call(x.prototype)}}else{try{throw Error()}catch(b){m=b}(x=e())&&typeof x.catch=="function"&&x.catch(function(){})}}catch(b){if(b&&m&&typeof b.stack=="string")return[b.stack,m.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=s.DetermineComponentFrameRoot(),o=l[0],i=l[1];if(o&&i){var c=o.split(`
`),u=i.split(`
`);for(n=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;n<u.length&&!u[n].includes("DetermineComponentFrameRoot");)n++;if(s===c.length||n===u.length)for(s=c.length-1,n=u.length-1;1<=s&&0<=n&&c[s]!==u[n];)n--;for(;1<=s&&0<=n;s--,n--)if(c[s]!==u[n]){if(s!==1||n!==1)do if(s--,n--,0>n||c[s]!==u[n]){var d=`
`+c[s].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=s&&0<=n);break}}}finally{pi=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Cr(r):""}function bb(e,a){switch(e.tag){case 26:case 27:case 5:return Cr(e.type);case 16:return Cr("Lazy");case 13:return e.child!==a&&a!==null?Cr("Suspense Fallback"):Cr("Suspense");case 19:return Cr("SuspenseList");case 0:case 15:return xi(e.type,!1);case 11:return xi(e.type.render,!1);case 1:return xi(e.type,!0);case 31:return Cr("Activity");default:return""}}function Uu(e){try{var a="",r=null;do a+=bb(e,r),r=e,e=e.return;while(e);return a}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var pc=Object.prototype.hasOwnProperty,Cd=Ze.unstable_scheduleCallback,mi=Ze.unstable_cancelCallback,yb=Ze.unstable_shouldYield,vb=Ze.unstable_requestPaint,Dt=Ze.unstable_now,jb=Ze.unstable_getCurrentPriorityLevel,cm=Ze.unstable_ImmediatePriority,dm=Ze.unstable_UserBlockingPriority,so=Ze.unstable_NormalPriority,Nb=Ze.unstable_LowPriority,um=Ze.unstable_IdlePriority,Sb=Ze.log,wb=Ze.unstable_setDisableYieldValue,Vn=null,_t=null;function Ya(e){if(typeof Sb=="function"&&wb(e),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(Vn,e)}catch{}}var Mt=Math.clz32?Math.clz32:Fb,Cb=Math.log,kb=Math.LN2;function Fb(e){return e>>>=0,e===0?32:31-(Cb(e)/kb|0)|0}var ml=256,fl=262144,gl=4194304;function kr(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Lo(e,a,r){var s=e.pendingLanes;if(s===0)return 0;var n=0,l=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var i=s&134217727;return i!==0?(s=i&~l,s!==0?n=kr(s):(o&=i,o!==0?n=kr(o):r||(r=i&~e,r!==0&&(n=kr(r))))):(i=s&~l,i!==0?n=kr(i):o!==0?n=kr(o):r||(r=s&~e,r!==0&&(n=kr(r)))),n===0?0:a!==0&&a!==n&&!(a&l)&&(l=n&-n,r=a&-a,l>=r||l===32&&(r&4194048)!==0)?a:n}function Xn(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function Tb(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pm(){var e=gl;return gl<<=1,!(gl&62914560)&&(gl=4194304),e}function fi(e){for(var a=[],r=0;31>r;r++)a.push(e);return a}function Qn(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Eb(e,a,r,s,n,l){var o=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var i=e.entanglements,c=e.expirationTimes,u=e.hiddenUpdates;for(r=o&~r;0<r;){var d=31-Mt(r),x=1<<d;i[d]=0,c[d]=-1;var m=u[d];if(m!==null)for(u[d]=null,d=0;d<m.length;d++){var b=m[d];b!==null&&(b.lane&=-536870913)}r&=~x}s!==0&&xm(e,s,0),l!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=l&~(o&~a))}function xm(e,a,r){e.pendingLanes|=a,e.suspendedLanes&=~a;var s=31-Mt(a);e.entangledLanes|=a,e.entanglements[s]=e.entanglements[s]|1073741824|r&261930}function mm(e,a){var r=e.entangledLanes|=a;for(e=e.entanglements;r;){var s=31-Mt(r),n=1<<s;n&a|e[s]&a&&(e[s]|=a),r&=~n}}function fm(e,a){var r=a&-a;return r=r&42?1:kd(r),r&(e.suspendedLanes|a)?0:r}function kd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function gm(){var e=Se.p;return e!==0?e:(e=window.event,e===void 0?32:Og(e.type))}function Ou(e,a){var r=Se.p;try{return Se.p=e,a()}finally{Se.p=r}}var pr=Math.random().toString(36).slice(2),nt="__reactFiber$"+pr,Ct="__reactProps$"+pr,$s="__reactContainer$"+pr,xc="__reactEvents$"+pr,Ab="__reactListeners$"+pr,Rb="__reactHandles$"+pr,$u="__reactResources$"+pr,Zn="__reactMarker$"+pr;function Td(e){delete e[nt],delete e[Ct],delete e[xc],delete e[Ab],delete e[Rb]}function is(e){var a=e[nt];if(a)return a;for(var r=e.parentNode;r;){if(a=r[$s]||r[nt]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(e=Vp(e);e!==null;){if(r=e[nt])return r;e=Vp(e)}return a}e=r,r=e.parentNode}return null}function Ps(e){if(e=e[nt]||e[$s]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function un(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(ee(33))}function bs(e){var a=e[$u];return a||(a=e[$u]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function tt(e){e[Zn]=!0}var hm=new Set,bm={};function Wr(e,a){ks(e,a),ks(e+"Capture",a)}function ks(e,a){for(bm[e]=a,e=0;e<a.length;e++)hm.add(a[e])}var zb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pu={},Hu={};function Bb(e){return pc.call(Hu,e)?!0:pc.call(Pu,e)?!1:zb.test(e)?Hu[e]=!0:(Pu[e]=!0,!1)}function Dl(e,a,r){if(Bb(a))if(r===null)e.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var s=a.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+r)}}function hl(e,a,r){if(r===null)e.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+r)}}function ha(e,a,r,s){if(s===null)e.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(a,r,""+s)}}function Wt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ym(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Db(e,a,r){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,l=s.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return n.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,a,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function mc(e){if(!e._valueTracker){var a=ym(e)?"checked":"value";e._valueTracker=Db(e,a,""+e[a])}}function vm(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var r=a.getValue(),s="";return e&&(s=ym(e)?e.checked?"true":"false":e.value),e=s,e!==r?(a.setValue(e),!0):!1}function no(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var _b=/[\n"\\]/g;function Gt(e){return e.replace(_b,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function fc(e,a,r,s,n,l,o,i){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),a!=null?o==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+Wt(a)):e.value!==""+Wt(a)&&(e.value=""+Wt(a)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),a!=null?gc(e,o,Wt(a)):r!=null?gc(e,o,Wt(r)):s!=null&&e.removeAttribute("value"),n==null&&l!=null&&(e.defaultChecked=!!l),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.name=""+Wt(i):e.removeAttribute("name")}function jm(e,a,r,s,n,l,o,i){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),a!=null||r!=null){if(!(l!=="submit"&&l!=="reset"||a!=null)){mc(e);return}r=r!=null?""+Wt(r):"",a=a!=null?""+Wt(a):r,i||a===e.value||(e.value=a),e.defaultValue=a}s=s??n,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=i?e.checked:!!s,e.defaultChecked=!!s,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o),mc(e)}function gc(e,a,r){a==="number"&&no(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function ys(e,a,r,s){if(e=e.options,a){a={};for(var n=0;n<r.length;n++)a["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=a.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Wt(r),a=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}a!==null||e[n].disabled||(a=e[n])}a!==null&&(a.selected=!0)}}function Nm(e,a,r){if(a!=null&&(a=""+Wt(a),a!==e.value&&(e.value=a),r==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=r!=null?""+Wt(r):""}function Sm(e,a,r,s){if(a==null){if(s!=null){if(r!=null)throw Error(ee(92));if(dn(s)){if(1<s.length)throw Error(ee(93));s=s[0]}r=s}r==null&&(r=""),a=r}r=Wt(a),e.defaultValue=r,s=e.textContent,s===r&&s!==""&&s!==null&&(e.value=s),mc(e)}function Fs(e,a){if(a){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=a;return}}e.textContent=a}var Mb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wu(e,a,r){var s=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?s?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":s?e.setProperty(a,r):typeof r!="number"||r===0||Mb.has(a)?a==="float"?e.cssFloat=r:e[a]=(""+r).trim():e[a]=r+"px"}function wm(e,a,r){if(a!=null&&typeof a!="object")throw Error(ee(62));if(e=e.style,r!=null){for(var s in r)!r.hasOwnProperty(s)||a!=null&&a.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var n in a)s=a[n],a.hasOwnProperty(n)&&r[n]!==s&&Wu(e,n,s)}else for(var l in a)a.hasOwnProperty(l)&&Wu(e,l,a[l])}function Ed(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ib=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _l(e){return Lb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ka(){}var hc=null;function Ad(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cs=null,vs=null;function qu(e){var a=Ps(e);if(a&&(e=a.stateNode)){var r=e[Ct]||null;e:switch(e=a.stateNode,a.type){case"input":if(fc(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Gt(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var s=r[a];if(s!==e&&s.form===e.form){var n=s[Ct]||null;if(!n)throw Error(ee(90));fc(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(a=0;a<r.length;a++)s=r[a],s.form===e.form&&vm(s)}break e;case"textarea":Nm(e,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&ys(e,!!r.multiple,a,!1)}}}var gi=!1;function Cm(e,a,r){if(gi)return e(a,r);gi=!0;try{var s=e(a);return s}finally{if(gi=!1,(cs!==null||vs!==null)&&(Qo(),cs&&(a=cs,e=vs,vs=cs=null,qu(a),e)))for(a=0;a<e.length;a++)qu(e[a])}}function An(e,a){var r=e.stateNode;if(r===null)return null;var s=r[Ct]||null;if(s===null)return null;r=s[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ee(231,a,typeof r));return r}var Ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bc=!1;if(Ra)try{var Ks={};Object.defineProperty(Ks,"passive",{get:function(){bc=!0}}),window.addEventListener("test",Ks,Ks),window.removeEventListener("test",Ks,Ks)}catch{bc=!1}var Ga=null,Rd=null,Ml=null;function km(){if(Ml)return Ml;var e,a=Rd,r=a.length,s,n="value"in Ga?Ga.value:Ga.textContent,l=n.length;for(e=0;e<r&&a[e]===n[e];e++);var o=r-e;for(s=1;s<=o&&a[r-s]===n[l-s];s++);return Ml=n.slice(e,1<s?1-s:void 0)}function Il(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function bl(){return!0}function Yu(){return!1}function kt(e){function a(r,s,n,l,o){this._reactName=r,this._targetInst=n,this.type=s,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?bl:Yu,this.isPropagationStopped=Yu,this}return Me(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),a}var qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uo=kt(qr),Jn=Me({},qr,{view:0,detail:0}),Ub=kt(Jn),hi,bi,en,Oo=Me({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&e.type==="mousemove"?(hi=e.screenX-en.screenX,bi=e.screenY-en.screenY):bi=hi=0,en=e),hi)},movementY:function(e){return"movementY"in e?e.movementY:bi}}),Gu=kt(Oo),Ob=Me({},Oo,{dataTransfer:0}),$b=kt(Ob),Pb=Me({},Jn,{relatedTarget:0}),yi=kt(Pb),Hb=Me({},qr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wb=kt(Hb),qb=Me({},qr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yb=kt(qb),Gb=Me({},qr,{data:0}),Vu=kt(Gb),Vb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zb(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=Qb[e])?!!a[e]:!1}function zd(){return Zb}var Jb=Me({},Jn,{key:function(e){if(e.key){var a=Vb[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=Il(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?Il(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Il(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Kb=kt(Jb),ey=Me({},Oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xu=kt(ey),ty=Me({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),ay=kt(ty),ry=Me({},qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),sy=kt(ry),ny=Me({},Oo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ly=kt(ny),oy=Me({},qr,{newState:0,oldState:0}),iy=kt(oy),cy=[9,13,27,32],Bd=Ra&&"CompositionEvent"in window,fn=null;Ra&&"documentMode"in document&&(fn=document.documentMode);var dy=Ra&&"TextEvent"in window&&!fn,Fm=Ra&&(!Bd||fn&&8<fn&&11>=fn),Qu=" ",Zu=!1;function Tm(e,a){switch(e){case"keyup":return cy.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Em(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ds=!1;function uy(e,a){switch(e){case"compositionend":return Em(a);case"keypress":return a.which!==32?null:(Zu=!0,Qu);case"textInput":return e=a.data,e===Qu&&Zu?null:e;default:return null}}function py(e,a){if(ds)return e==="compositionend"||!Bd&&Tm(e,a)?(e=km(),Ml=Rd=Ga=null,ds=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Fm&&a.locale!=="ko"?null:a.data;default:return null}}var xy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ju(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!xy[e.type]:a==="textarea"}function Am(e,a,r,s){cs?vs?vs.push(s):vs=[s]:cs=s,a=wo(a,"onChange"),0<a.length&&(r=new Uo("onChange","change",null,r,s),e.push({event:r,listeners:a}))}var gn=null,Rn=null;function my(e){kg(e,0)}function $o(e){var a=un(e);if(vm(a))return e}function Ku(e,a){if(e==="change")return a}var Rm=!1;if(Ra){var vi;if(Ra){var ji="oninput"in document;if(!ji){var ep=document.createElement("div");ep.setAttribute("oninput","return;"),ji=typeof ep.oninput=="function"}vi=ji}else vi=!1;Rm=vi&&(!document.documentMode||9<document.documentMode)}function tp(){gn&&(gn.detachEvent("onpropertychange",zm),Rn=gn=null)}function zm(e){if(e.propertyName==="value"&&$o(Rn)){var a=[];Am(a,Rn,e,Ad(e)),Cm(my,a)}}function fy(e,a,r){e==="focusin"?(tp(),gn=a,Rn=r,gn.attachEvent("onpropertychange",zm)):e==="focusout"&&tp()}function gy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $o(Rn)}function hy(e,a){if(e==="click")return $o(a)}function by(e,a){if(e==="input"||e==="change")return $o(a)}function yy(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var Lt=typeof Object.is=="function"?Object.is:yy;function zn(e,a){if(Lt(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var r=Object.keys(e),s=Object.keys(a);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!pc.call(a,n)||!Lt(e[n],a[n]))return!1}return!0}function ap(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rp(e,a){var r=ap(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=a&&s>=a)return{node:r,offset:a-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ap(r)}}function Bm(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Bm(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Dm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=no(e.document);a instanceof e.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)e=a.contentWindow;else break;a=no(e.document)}return a}function Dd(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var vy=Ra&&"documentMode"in document&&11>=document.documentMode,us=null,yc=null,hn=null,vc=!1;function sp(e,a,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;vc||us==null||us!==no(s)||(s=us,"selectionStart"in s&&Dd(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),hn&&zn(hn,s)||(hn=s,s=wo(yc,"onSelect"),0<s.length&&(a=new Uo("onSelect","select",null,a,r),e.push({event:a,listeners:s}),a.target=us)))}function vr(e,a){var r={};return r[e.toLowerCase()]=a.toLowerCase(),r["Webkit"+e]="webkit"+a,r["Moz"+e]="moz"+a,r}var ps={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionrun:vr("Transition","TransitionRun"),transitionstart:vr("Transition","TransitionStart"),transitioncancel:vr("Transition","TransitionCancel"),transitionend:vr("Transition","TransitionEnd")},Ni={},_m={};Ra&&(_m=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function Yr(e){if(Ni[e])return Ni[e];if(!ps[e])return e;var a=ps[e],r;for(r in a)if(a.hasOwnProperty(r)&&r in _m)return Ni[e]=a[r];return e}var Mm=Yr("animationend"),Im=Yr("animationiteration"),Lm=Yr("animationstart"),jy=Yr("transitionrun"),Ny=Yr("transitionstart"),Sy=Yr("transitioncancel"),Um=Yr("transitionend"),Om=new Map,jc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jc.push("scrollEnd");function sa(e,a){Om.set(e,a),Wr(a,[e])}var lo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ht=[],xs=0,_d=0;function Po(){for(var e=xs,a=_d=xs=0;a<e;){var r=Ht[a];Ht[a++]=null;var s=Ht[a];Ht[a++]=null;var n=Ht[a];Ht[a++]=null;var l=Ht[a];if(Ht[a++]=null,s!==null&&n!==null){var o=s.pending;o===null?n.next=n:(n.next=o.next,o.next=n),s.pending=n}l!==0&&$m(r,n,l)}}function Ho(e,a,r,s){Ht[xs++]=e,Ht[xs++]=a,Ht[xs++]=r,Ht[xs++]=s,_d|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Md(e,a,r,s){return Ho(e,a,r,s),oo(e)}function Gr(e,a){return Ho(e,null,null,a),oo(e)}function $m(e,a,r){e.lanes|=r;var s=e.alternate;s!==null&&(s.lanes|=r);for(var n=!1,l=e.return;l!==null;)l.childLanes|=r,s=l.alternate,s!==null&&(s.childLanes|=r),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(n=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,n&&a!==null&&(n=31-Mt(r),e=l.hiddenUpdates,s=e[n],s===null?e[n]=[a]:s.push(a),a.lane=r|536870912),l):null}function oo(e){if(50<kn)throw kn=0,Pc=null,Error(ee(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var ms={};function wy(e,a,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,a,r,s){return new wy(e,a,r,s)}function Id(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ta(e,a){var r=e.alternate;return r===null?(r=zt(e.tag,a,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=a,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,a=e.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Pm(e,a){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,a=r.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function Ll(e,a,r,s,n,l){var o=0;if(s=e,typeof e=="function")Id(e)&&(o=1);else if(typeof e=="string")o=E0(e,r,ua.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ic:return e=zt(31,r,a,n),e.elementType=ic,e.lanes=l,e;case ls:return Rr(r.children,n,l,a);case om:o=8,n|=24;break;case nc:return e=zt(12,r,a,n|2),e.elementType=nc,e.lanes=l,e;case lc:return e=zt(13,r,a,n),e.elementType=lc,e.lanes=l,e;case oc:return e=zt(19,r,a,n),e.elementType=oc,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ca:o=10;break e;case im:o=9;break e;case Sd:o=11;break e;case wd:o=14;break e;case Oa:o=16,s=null;break e}o=29,r=Error(ee(130,e===null?"null":typeof e,"")),s=null}return a=zt(o,r,a,n),a.elementType=e,a.type=s,a.lanes=l,a}function Rr(e,a,r,s){return e=zt(7,e,s,a),e.lanes=r,e}function Si(e,a,r){return e=zt(6,e,null,a),e.lanes=r,e}function Hm(e){var a=zt(18,null,null,0);return a.stateNode=e,a}function wi(e,a,r){return a=zt(4,e.children!==null?e.children:[],e.key,a),a.lanes=r,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var np=new WeakMap;function Vt(e,a){if(typeof e=="object"&&e!==null){var r=np.get(e);return r!==void 0?r:(a={value:e,source:a,stack:Uu(a)},np.set(e,a),a)}return{value:e,source:a,stack:Uu(a)}}var fs=[],gs=0,io=null,Bn=0,qt=[],Yt=0,ir=null,ia=1,ca="";function Sa(e,a){fs[gs++]=Bn,fs[gs++]=io,io=e,Bn=a}function Wm(e,a,r){qt[Yt++]=ia,qt[Yt++]=ca,qt[Yt++]=ir,ir=e;var s=ia;e=ca;var n=32-Mt(s)-1;s&=~(1<<n),r+=1;var l=32-Mt(a)+n;if(30<l){var o=n-n%5;l=(s&(1<<o)-1).toString(32),s>>=o,n-=o,ia=1<<32-Mt(a)+n|r<<n|s,ca=l+e}else ia=1<<l|r<<n|s,ca=e}function Ld(e){e.return!==null&&(Sa(e,1),Wm(e,1,0))}function Ud(e){for(;e===io;)io=fs[--gs],fs[gs]=null,Bn=fs[--gs],fs[gs]=null;for(;e===ir;)ir=qt[--Yt],qt[Yt]=null,ca=qt[--Yt],qt[Yt]=null,ia=qt[--Yt],qt[Yt]=null}function qm(e,a){qt[Yt++]=ia,qt[Yt++]=ca,qt[Yt++]=ir,ia=a.id,ca=a.overflow,ir=e}var lt=null,De=null,ye=!1,Ka=null,Xt=!1,Nc=Error(ee(519));function cr(e){var a=Error(ee(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dn(Vt(a,e)),Nc}function lp(e){var a=e.stateNode,r=e.type,s=e.memoizedProps;switch(a[nt]=e,a[Ct]=s,r){case"dialog":fe("cancel",a),fe("close",a);break;case"iframe":case"object":case"embed":fe("load",a);break;case"video":case"audio":for(r=0;r<Ln.length;r++)fe(Ln[r],a);break;case"source":fe("error",a);break;case"img":case"image":case"link":fe("error",a),fe("load",a);break;case"details":fe("toggle",a);break;case"input":fe("invalid",a),jm(a,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":fe("invalid",a);break;case"textarea":fe("invalid",a),Sm(a,s.value,s.defaultValue,s.children)}r=s.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||s.suppressHydrationWarning===!0||Tg(a.textContent,r)?(s.popover!=null&&(fe("beforetoggle",a),fe("toggle",a)),s.onScroll!=null&&fe("scroll",a),s.onScrollEnd!=null&&fe("scrollend",a),s.onClick!=null&&(a.onclick=ka),a=!0):a=!1,a||cr(e,!0)}function op(e){for(lt=e.return;lt;)switch(lt.tag){case 5:case 31:case 13:Xt=!1;return;case 27:case 3:Xt=!0;return;default:lt=lt.return}}function Kr(e){if(e!==lt)return!1;if(!ye)return op(e),ye=!0,!1;var a=e.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Gc(e.type,e.memoizedProps)),r=!r),r&&De&&cr(e),op(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));De=Gp(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));De=Gp(e)}else a===27?(a=De,xr(e.type)?(e=Zc,Zc=null,De=e):De=a):De=lt?Zt(e.stateNode.nextSibling):null;return!0}function Ir(){De=lt=null,ye=!1}function Ci(){var e=Ka;return e!==null&&(jt===null?jt=e:jt.push.apply(jt,e),Ka=null),e}function Dn(e){Ka===null?Ka=[e]:Ka.push(e)}var Sc=ma(null),Vr=null,Fa=null;function Pa(e,a,r){Re(Sc,a._currentValue),a._currentValue=r}function Ea(e){e._currentValue=Sc.current,at(Sc)}function wc(e,a,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,s!==null&&(s.childLanes|=a)):s!==null&&(s.childLanes&a)!==a&&(s.childLanes|=a),e===r)break;e=e.return}}function Cc(e,a,r,s){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var l=n.dependencies;if(l!==null){var o=n.child;l=l.firstContext;e:for(;l!==null;){var i=l;l=n;for(var c=0;c<a.length;c++)if(i.context===a[c]){l.lanes|=r,i=l.alternate,i!==null&&(i.lanes|=r),wc(l.return,r,e),s||(o=null);break e}l=i.next}}else if(n.tag===18){if(o=n.return,o===null)throw Error(ee(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),wc(o,r,e),o=null}else o=n.child;if(o!==null)o.return=n;else for(o=n;o!==null;){if(o===e){o=null;break}if(n=o.sibling,n!==null){n.return=o.return,o=n;break}o=o.return}n=o}}function Hs(e,a,r,s){e=null;for(var n=a,l=!1;n!==null;){if(!l){if(n.flags&524288)l=!0;else if(n.flags&262144)break}if(n.tag===10){var o=n.alternate;if(o===null)throw Error(ee(387));if(o=o.memoizedProps,o!==null){var i=n.type;Lt(n.pendingProps.value,o.value)||(e!==null?e.push(i):e=[i])}}else if(n===to.current){if(o=n.alternate,o===null)throw Error(ee(387));o.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(On):e=[On])}n=n.return}e!==null&&Cc(a,e,r,s),a.flags|=262144}function co(e){for(e=e.firstContext;e!==null;){if(!Lt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Lr(e){Vr=e,Fa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ot(e){return Ym(Vr,e)}function yl(e,a){return Vr===null&&Lr(e),Ym(e,a)}function Ym(e,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},Fa===null){if(e===null)throw Error(ee(308));Fa=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else Fa=Fa.next=a;return r}var Cy=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(r,s){e.push(s)}};this.abort=function(){a.aborted=!0,e.forEach(function(r){return r()})}},ky=Ze.unstable_scheduleCallback,Fy=Ze.unstable_NormalPriority,Ge={$$typeof:Ca,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Od(){return{controller:new Cy,data:new Map,refCount:0}}function Kn(e){e.refCount--,e.refCount===0&&ky(Fy,function(){e.controller.abort()})}var bn=null,kc=0,Ts=0,js=null;function Ty(e,a){if(bn===null){var r=bn=[];kc=0,Ts=uu(),js={status:"pending",value:void 0,then:function(s){r.push(s)}}}return kc++,a.then(ip,ip),a}function ip(){if(--kc===0&&bn!==null){js!==null&&(js.status="fulfilled");var e=bn;bn=null,Ts=0,js=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function Ey(e,a){var r=[],s={status:"pending",value:null,reason:null,then:function(n){r.push(n)}};return e.then(function(){s.status="fulfilled",s.value=a;for(var n=0;n<r.length;n++)(0,r[n])(a)},function(n){for(s.status="rejected",s.reason=n,n=0;n<r.length;n++)(0,r[n])(void 0)}),s}var cp=ie.S;ie.S=function(e,a){og=Dt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Ty(e,a),cp!==null&&cp(e,a)};var zr=ma(null);function $d(){var e=zr.current;return e!==null?e:Ae.pooledCache}function Ul(e,a){a===null?Re(zr,zr.current):Re(zr,a.pool)}function Gm(){var e=$d();return e===null?null:{parent:Ge._currentValue,pool:e}}var Ws=Error(ee(460)),Pd=Error(ee(474)),Wo=Error(ee(542)),uo={then:function(){}};function dp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Vm(e,a,r){switch(r=e[r],r===void 0?e.push(a):r!==a&&(a.then(ka,ka),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,pp(e),e;default:if(typeof a.status=="string")a.then(ka,ka);else{if(e=Ae,e!==null&&100<e.shellSuspendCounter)throw Error(ee(482));e=a,e.status="pending",e.then(function(s){if(a.status==="pending"){var n=a;n.status="fulfilled",n.value=s}},function(s){if(a.status==="pending"){var n=a;n.status="rejected",n.reason=s}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,pp(e),e}throw Br=a,Ws}}function Fr(e){try{var a=e._init;return a(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Br=r,Ws):r}}var Br=null;function up(){if(Br===null)throw Error(ee(459));var e=Br;return Br=null,e}function pp(e){if(e===Ws||e===Wo)throw Error(ee(483))}var Ns=null,_n=0;function vl(e){var a=_n;return _n+=1,Ns===null&&(Ns=[]),Vm(Ns,e,a)}function tn(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function jl(e,a){throw a.$$typeof===fb?Error(ee(525)):(e=Object.prototype.toString.call(a),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function Xm(e){function a(y,g){if(e){var f=y.deletions;f===null?(y.deletions=[g],y.flags|=16):f.push(g)}}function r(y,g){if(!e)return null;for(;g!==null;)a(y,g),g=g.sibling;return null}function s(y){for(var g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function n(y,g){return y=Ta(y,g),y.index=0,y.sibling=null,y}function l(y,g,f){return y.index=f,e?(f=y.alternate,f!==null?(f=f.index,f<g?(y.flags|=67108866,g):f):(y.flags|=67108866,g)):(y.flags|=1048576,g)}function o(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function i(y,g,f,j){return g===null||g.tag!==6?(g=Si(f,y.mode,j),g.return=y,g):(g=n(g,f),g.return=y,g)}function c(y,g,f,j){var C=f.type;return C===ls?d(y,g,f.props.children,j,f.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Oa&&Fr(C)===g.type)?(g=n(g,f.props),tn(g,f),g.return=y,g):(g=Ll(f.type,f.key,f.props,null,y.mode,j),tn(g,f),g.return=y,g)}function u(y,g,f,j){return g===null||g.tag!==4||g.stateNode.containerInfo!==f.containerInfo||g.stateNode.implementation!==f.implementation?(g=wi(f,y.mode,j),g.return=y,g):(g=n(g,f.children||[]),g.return=y,g)}function d(y,g,f,j,C){return g===null||g.tag!==7?(g=Rr(f,y.mode,j,C),g.return=y,g):(g=n(g,f),g.return=y,g)}function x(y,g,f){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=Si(""+g,y.mode,f),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case xl:return f=Ll(g.type,g.key,g.props,null,y.mode,f),tn(f,g),f.return=y,f;case cn:return g=wi(g,y.mode,f),g.return=y,g;case Oa:return g=Fr(g),x(y,g,f)}if(dn(g)||Js(g))return g=Rr(g,y.mode,f,null),g.return=y,g;if(typeof g.then=="function")return x(y,vl(g),f);if(g.$$typeof===Ca)return x(y,yl(y,g),f);jl(y,g)}return null}function m(y,g,f,j){var C=g!==null?g.key:null;if(typeof f=="string"&&f!==""||typeof f=="number"||typeof f=="bigint")return C!==null?null:i(y,g,""+f,j);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case xl:return f.key===C?c(y,g,f,j):null;case cn:return f.key===C?u(y,g,f,j):null;case Oa:return f=Fr(f),m(y,g,f,j)}if(dn(f)||Js(f))return C!==null?null:d(y,g,f,j,null);if(typeof f.then=="function")return m(y,g,vl(f),j);if(f.$$typeof===Ca)return m(y,g,yl(y,f),j);jl(y,f)}return null}function b(y,g,f,j,C){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return y=y.get(f)||null,i(g,y,""+j,C);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case xl:return y=y.get(j.key===null?f:j.key)||null,c(g,y,j,C);case cn:return y=y.get(j.key===null?f:j.key)||null,u(g,y,j,C);case Oa:return j=Fr(j),b(y,g,f,j,C)}if(dn(j)||Js(j))return y=y.get(f)||null,d(g,y,j,C,null);if(typeof j.then=="function")return b(y,g,f,vl(j),C);if(j.$$typeof===Ca)return b(y,g,f,yl(g,j),C);jl(g,j)}return null}function v(y,g,f,j){for(var C=null,E=null,A=g,M=g=0,B=null;A!==null&&M<f.length;M++){A.index>M?(B=A,A=null):B=A.sibling;var F=m(y,A,f[M],j);if(F===null){A===null&&(A=B);break}e&&A&&F.alternate===null&&a(y,A),g=l(F,g,M),E===null?C=F:E.sibling=F,E=F,A=B}if(M===f.length)return r(y,A),ye&&Sa(y,M),C;if(A===null){for(;M<f.length;M++)A=x(y,f[M],j),A!==null&&(g=l(A,g,M),E===null?C=A:E.sibling=A,E=A);return ye&&Sa(y,M),C}for(A=s(A);M<f.length;M++)B=b(A,y,M,f[M],j),B!==null&&(e&&B.alternate!==null&&A.delete(B.key===null?M:B.key),g=l(B,g,M),E===null?C=B:E.sibling=B,E=B);return e&&A.forEach(function(L){return a(y,L)}),ye&&Sa(y,M),C}function S(y,g,f,j){if(f==null)throw Error(ee(151));for(var C=null,E=null,A=g,M=g=0,B=null,F=f.next();A!==null&&!F.done;M++,F=f.next()){A.index>M?(B=A,A=null):B=A.sibling;var L=m(y,A,F.value,j);if(L===null){A===null&&(A=B);break}e&&A&&L.alternate===null&&a(y,A),g=l(L,g,M),E===null?C=L:E.sibling=L,E=L,A=B}if(F.done)return r(y,A),ye&&Sa(y,M),C;if(A===null){for(;!F.done;M++,F=f.next())F=x(y,F.value,j),F!==null&&(g=l(F,g,M),E===null?C=F:E.sibling=F,E=F);return ye&&Sa(y,M),C}for(A=s(A);!F.done;M++,F=f.next())F=b(A,y,M,F.value,j),F!==null&&(e&&F.alternate!==null&&A.delete(F.key===null?M:F.key),g=l(F,g,M),E===null?C=F:E.sibling=F,E=F);return e&&A.forEach(function(k){return a(y,k)}),ye&&Sa(y,M),C}function h(y,g,f,j){if(typeof f=="object"&&f!==null&&f.type===ls&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case xl:e:{for(var C=f.key;g!==null;){if(g.key===C){if(C=f.type,C===ls){if(g.tag===7){r(y,g.sibling),j=n(g,f.props.children),j.return=y,y=j;break e}}else if(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Oa&&Fr(C)===g.type){r(y,g.sibling),j=n(g,f.props),tn(j,f),j.return=y,y=j;break e}r(y,g);break}else a(y,g);g=g.sibling}f.type===ls?(j=Rr(f.props.children,y.mode,j,f.key),j.return=y,y=j):(j=Ll(f.type,f.key,f.props,null,y.mode,j),tn(j,f),j.return=y,y=j)}return o(y);case cn:e:{for(C=f.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===f.containerInfo&&g.stateNode.implementation===f.implementation){r(y,g.sibling),j=n(g,f.children||[]),j.return=y,y=j;break e}else{r(y,g);break}else a(y,g);g=g.sibling}j=wi(f,y.mode,j),j.return=y,y=j}return o(y);case Oa:return f=Fr(f),h(y,g,f,j)}if(dn(f))return v(y,g,f,j);if(Js(f)){if(C=Js(f),typeof C!="function")throw Error(ee(150));return f=C.call(f),S(y,g,f,j)}if(typeof f.then=="function")return h(y,g,vl(f),j);if(f.$$typeof===Ca)return h(y,g,yl(y,f),j);jl(y,f)}return typeof f=="string"&&f!==""||typeof f=="number"||typeof f=="bigint"?(f=""+f,g!==null&&g.tag===6?(r(y,g.sibling),j=n(g,f),j.return=y,y=j):(r(y,g),j=Si(f,y.mode,j),j.return=y,y=j),o(y)):r(y,g)}return function(y,g,f,j){try{_n=0;var C=h(y,g,f,j);return Ns=null,C}catch(A){if(A===Ws||A===Wo)throw A;var E=zt(29,A,null,y.mode);return E.lanes=j,E.return=y,E}finally{}}}var Ur=Xm(!0),Qm=Xm(!1),$a=!1;function Hd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fc(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function er(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function tr(e,a,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ne&2){var n=s.pending;return n===null?a.next=a:(a.next=n.next,n.next=a),s.pending=a,a=oo(e),$m(e,null,r),a}return Ho(e,s,a,r),oo(e)}function yn(e,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var s=a.lanes;s&=e.pendingLanes,r|=s,a.lanes=r,mm(e,r)}}function ki(e,a){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var n=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var o={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};l===null?n=l=o:l=l.next=o,r=r.next}while(r!==null);l===null?n=l=a:l=l.next=a}else n=l=a;r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:s.shared,callbacks:s.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=a:e.next=a,r.lastBaseUpdate=a}var Tc=!1;function vn(){if(Tc){var e=js;if(e!==null)throw e}}function jn(e,a,r,s){Tc=!1;var n=e.updateQueue;$a=!1;var l=n.firstBaseUpdate,o=n.lastBaseUpdate,i=n.shared.pending;if(i!==null){n.shared.pending=null;var c=i,u=c.next;c.next=null,o===null?l=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,i=d.lastBaseUpdate,i!==o&&(i===null?d.firstBaseUpdate=u:i.next=u,d.lastBaseUpdate=c))}if(l!==null){var x=n.baseState;o=0,d=u=c=null,i=l;do{var m=i.lane&-536870913,b=m!==i.lane;if(b?(be&m)===m:(s&m)===m){m!==0&&m===Ts&&(Tc=!0),d!==null&&(d=d.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var v=e,S=i;m=a;var h=r;switch(S.tag){case 1:if(v=S.payload,typeof v=="function"){x=v.call(h,x,m);break e}x=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,m=typeof v=="function"?v.call(h,x,m):v,m==null)break e;x=Me({},x,m);break e;case 2:$a=!0}}m=i.callback,m!==null&&(e.flags|=64,b&&(e.flags|=8192),b=n.callbacks,b===null?n.callbacks=[m]:b.push(m))}else b={lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},d===null?(u=d=b,c=x):d=d.next=b,o|=m;if(i=i.next,i===null){if(i=n.shared.pending,i===null)break;b=i,i=b.next,b.next=null,n.lastBaseUpdate=b,n.shared.pending=null}}while(!0);d===null&&(c=x),n.baseState=c,n.firstBaseUpdate=u,n.lastBaseUpdate=d,l===null&&(n.shared.lanes=0),ur|=o,e.lanes=o,e.memoizedState=x}}function Zm(e,a){if(typeof e!="function")throw Error(ee(191,e));e.call(a)}function Jm(e,a){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Zm(r[e],a)}var Es=ma(null),po=ma(0);function xp(e,a){e=_a,Re(po,e),Re(Es,a),_a=e|a.baseLanes}function Ec(){Re(po,_a),Re(Es,Es.current)}function Wd(){_a=po.current,at(Es),at(po)}var Ut=ma(null),Qt=null;function Ha(e){var a=e.alternate;Re($e,$e.current&1),Re(Ut,e),Qt===null&&(a===null||Es.current!==null||a.memoizedState!==null)&&(Qt=e)}function Ac(e){Re($e,$e.current),Re(Ut,e),Qt===null&&(Qt=e)}function Km(e){e.tag===22?(Re($e,$e.current),Re(Ut,e),Qt===null&&(Qt=e)):Wa()}function Wa(){Re($e,$e.current),Re(Ut,Ut.current)}function Rt(e){at(Ut),Qt===e&&(Qt=null),at($e)}var $e=ma(0);function xo(e){for(var a=e;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Xc(r)||Qc(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var za=0,xe=null,Te=null,qe=null,mo=!1,Ss=!1,Or=!1,fo=0,Mn=0,ws=null,Ay=0;function Le(){throw Error(ee(321))}function qd(e,a){if(a===null)return!1;for(var r=0;r<a.length&&r<e.length;r++)if(!Lt(e[r],a[r]))return!1;return!0}function Yd(e,a,r,s,n,l){return za=l,xe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ie.H=e===null||e.memoizedState===null?Rf:ru,Or=!1,l=r(s,n),Or=!1,Ss&&(l=tf(a,r,s,n)),ef(e),l}function ef(e){ie.H=In;var a=Te!==null&&Te.next!==null;if(za=0,qe=Te=xe=null,mo=!1,Mn=0,ws=null,a)throw Error(ee(300));e===null||Ve||(e=e.dependencies,e!==null&&co(e)&&(Ve=!0))}function tf(e,a,r,s){xe=e;var n=0;do{if(Ss&&(ws=null),Mn=0,Ss=!1,25<=n)throw Error(ee(301));if(n+=1,qe=Te=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}ie.H=zf,l=a(r,s)}while(Ss);return l}function Ry(){var e=ie.H,a=e.useState()[0];return a=typeof a.then=="function"?el(a):a,e=e.useState()[0],(Te!==null?Te.memoizedState:null)!==e&&(xe.flags|=1024),a}function Gd(){var e=fo!==0;return fo=0,e}function Vd(e,a,r){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~r}function Xd(e){if(mo){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}mo=!1}za=0,qe=Te=xe=null,Ss=!1,Mn=fo=0,ws=null}function pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?xe.memoizedState=qe=e:qe=qe.next=e,qe}function Pe(){if(Te===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Te.next;var a=qe===null?xe.memoizedState:qe.next;if(a!==null)qe=a,Te=e;else{if(e===null)throw xe.alternate===null?Error(ee(467)):Error(ee(310));Te=e,e={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},qe===null?xe.memoizedState=qe=e:qe=qe.next=e}return qe}function qo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function el(e){var a=Mn;return Mn+=1,ws===null&&(ws=[]),e=Vm(ws,e,a),a=xe,(qe===null?a.memoizedState:qe.next)===null&&(a=a.alternate,ie.H=a===null||a.memoizedState===null?Rf:ru),e}function Yo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return el(e);if(e.$$typeof===Ca)return ot(e)}throw Error(ee(438,String(e)))}function Qd(e){var a=null,r=xe.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var s=xe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(a={data:s.data.map(function(n){return n.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=qo(),xe.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(e),s=0;s<e;s++)r[s]=gb;return a.index++,r}function Ba(e,a){return typeof a=="function"?a(e):a}function Ol(e){var a=Pe();return Zd(a,Te,e)}function Zd(e,a,r){var s=e.queue;if(s===null)throw Error(ee(311));s.lastRenderedReducer=r;var n=e.baseQueue,l=s.pending;if(l!==null){if(n!==null){var o=n.next;n.next=l.next,l.next=o}a.baseQueue=n=l,s.pending=null}if(l=e.baseState,n===null)e.memoizedState=l;else{a=n.next;var i=o=null,c=null,u=a,d=!1;do{var x=u.lane&-536870913;if(x!==u.lane?(be&x)===x:(za&x)===x){var m=u.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),x===Ts&&(d=!0);else if((za&m)===m){u=u.next,m===Ts&&(d=!0);continue}else x={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(i=c=x,o=l):c=c.next=x,xe.lanes|=m,ur|=m;x=u.action,Or&&r(l,x),l=u.hasEagerState?u.eagerState:r(l,x)}else m={lane:x,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(i=c=m,o=l):c=c.next=m,xe.lanes|=x,ur|=x;u=u.next}while(u!==null&&u!==a);if(c===null?o=l:c.next=i,!Lt(l,e.memoizedState)&&(Ve=!0,d&&(r=js,r!==null)))throw r;e.memoizedState=l,e.baseState=o,e.baseQueue=c,s.lastRenderedState=l}return n===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Fi(e){var a=Pe(),r=a.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=e;var s=r.dispatch,n=r.pending,l=a.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do l=e(l,o.action),o=o.next;while(o!==n);Lt(l,a.memoizedState)||(Ve=!0),a.memoizedState=l,a.baseQueue===null&&(a.baseState=l),r.lastRenderedState=l}return[l,s]}function af(e,a,r){var s=xe,n=Pe(),l=ye;if(l){if(r===void 0)throw Error(ee(407));r=r()}else r=a();var o=!Lt((Te||n).memoizedState,r);if(o&&(n.memoizedState=r,Ve=!0),n=n.queue,Jd(nf.bind(null,s,n,e),[e]),n.getSnapshot!==a||o||qe!==null&&qe.memoizedState.tag&1){if(s.flags|=2048,As(9,{destroy:void 0},sf.bind(null,s,n,r,a),null),Ae===null)throw Error(ee(349));l||za&127||rf(s,a,r)}return r}function rf(e,a,r){e.flags|=16384,e={getSnapshot:a,value:r},a=xe.updateQueue,a===null?(a=qo(),xe.updateQueue=a,a.stores=[e]):(r=a.stores,r===null?a.stores=[e]:r.push(e))}function sf(e,a,r,s){a.value=r,a.getSnapshot=s,lf(a)&&of(e)}function nf(e,a,r){return r(function(){lf(a)&&of(e)})}function lf(e){var a=e.getSnapshot;e=e.value;try{var r=a();return!Lt(e,r)}catch{return!0}}function of(e){var a=Gr(e,2);a!==null&&Nt(a,e,2)}function Rc(e){var a=pt();if(typeof e=="function"){var r=e;if(e=r(),Or){Ya(!0);try{r()}finally{Ya(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:e},a}function cf(e,a,r,s){return e.baseState=r,Zd(e,Te,typeof s=="function"?s:Ba)}function zy(e,a,r,s,n){if(Vo(e))throw Error(ee(485));if(e=a.action,e!==null){var l={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){l.listeners.push(o)}};ie.T!==null?r(!0):l.isTransition=!1,s(l),r=a.pending,r===null?(l.next=a.pending=l,df(a,l)):(l.next=r.next,a.pending=r.next=l)}}function df(e,a){var r=a.action,s=a.payload,n=e.state;if(a.isTransition){var l=ie.T,o={};ie.T=o;try{var i=r(n,s),c=ie.S;c!==null&&c(o,i),mp(e,a,i)}catch(u){zc(e,a,u)}finally{l!==null&&o.types!==null&&(l.types=o.types),ie.T=l}}else try{l=r(n,s),mp(e,a,l)}catch(u){zc(e,a,u)}}function mp(e,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(s){fp(e,a,s)},function(s){return zc(e,a,s)}):fp(e,a,r)}function fp(e,a,r){a.status="fulfilled",a.value=r,uf(a),e.state=r,a=e.pending,a!==null&&(r=a.next,r===a?e.pending=null:(r=r.next,a.next=r,df(e,r)))}function zc(e,a,r){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do a.status="rejected",a.reason=r,uf(a),a=a.next;while(a!==s)}e.action=null}function uf(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function pf(e,a){return a}function gp(e,a){if(ye){var r=Ae.formState;if(r!==null){e:{var s=xe;if(ye){if(De){t:{for(var n=De,l=Xt;n.nodeType!==8;){if(!l){n=null;break t}if(n=Zt(n.nextSibling),n===null){n=null;break t}}l=n.data,n=l==="F!"||l==="F"?n:null}if(n){De=Zt(n.nextSibling),s=n.data==="F!";break e}}cr(s)}s=!1}s&&(a=r[0])}}return r=pt(),r.memoizedState=r.baseState=a,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pf,lastRenderedState:a},r.queue=s,r=Tf.bind(null,xe,s),s.dispatch=r,s=Rc(!1),l=au.bind(null,xe,!1,s.queue),s=pt(),n={state:a,dispatch:null,action:e,pending:null},s.queue=n,r=zy.bind(null,xe,n,l,r),n.dispatch=r,s.memoizedState=e,[a,r,!1]}function hp(e){var a=Pe();return xf(a,Te,e)}function xf(e,a,r){if(a=Zd(e,a,pf)[0],e=Ol(Ba)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var s=el(a)}catch(o){throw o===Ws?Wo:o}else s=a;a=Pe();var n=a.queue,l=n.dispatch;return r!==a.memoizedState&&(xe.flags|=2048,As(9,{destroy:void 0},By.bind(null,n,r),null)),[s,l,e]}function By(e,a){e.action=a}function bp(e){var a=Pe(),r=Te;if(r!==null)return xf(a,r,e);Pe(),a=a.memoizedState,r=Pe();var s=r.queue.dispatch;return r.memoizedState=e,[a,s,!1]}function As(e,a,r,s){return e={tag:e,create:r,deps:s,inst:a,next:null},a=xe.updateQueue,a===null&&(a=qo(),xe.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,a.lastEffect=e),e}function mf(){return Pe().memoizedState}function $l(e,a,r,s){var n=pt();xe.flags|=e,n.memoizedState=As(1|a,{destroy:void 0},r,s===void 0?null:s)}function Go(e,a,r,s){var n=Pe();s=s===void 0?null:s;var l=n.memoizedState.inst;Te!==null&&s!==null&&qd(s,Te.memoizedState.deps)?n.memoizedState=As(a,l,r,s):(xe.flags|=e,n.memoizedState=As(1|a,l,r,s))}function yp(e,a){$l(8390656,8,e,a)}function Jd(e,a){Go(2048,8,e,a)}function Dy(e){xe.flags|=4;var a=xe.updateQueue;if(a===null)a=qo(),xe.updateQueue=a,a.events=[e];else{var r=a.events;r===null?a.events=[e]:r.push(e)}}function ff(e){var a=Pe().memoizedState;return Dy({ref:a,nextImpl:e}),function(){if(Ne&2)throw Error(ee(440));return a.impl.apply(void 0,arguments)}}function gf(e,a){return Go(4,2,e,a)}function hf(e,a){return Go(4,4,e,a)}function bf(e,a){if(typeof a=="function"){e=e();var r=a(e);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function yf(e,a,r){r=r!=null?r.concat([e]):null,Go(4,4,bf.bind(null,a,e),r)}function Kd(){}function vf(e,a){var r=Pe();a=a===void 0?null:a;var s=r.memoizedState;return a!==null&&qd(a,s[1])?s[0]:(r.memoizedState=[e,a],e)}function jf(e,a){var r=Pe();a=a===void 0?null:a;var s=r.memoizedState;if(a!==null&&qd(a,s[1]))return s[0];if(s=e(),Or){Ya(!0);try{e()}finally{Ya(!1)}}return r.memoizedState=[s,a],s}function eu(e,a,r){return r===void 0||za&1073741824&&!(be&261930)?e.memoizedState=a:(e.memoizedState=r,e=cg(),xe.lanes|=e,ur|=e,r)}function Nf(e,a,r,s){return Lt(r,a)?r:Es.current!==null?(e=eu(e,r,s),Lt(e,a)||(Ve=!0),e):!(za&42)||za&1073741824&&!(be&261930)?(Ve=!0,e.memoizedState=r):(e=cg(),xe.lanes|=e,ur|=e,a)}function Sf(e,a,r,s,n){var l=Se.p;Se.p=l!==0&&8>l?l:8;var o=ie.T,i={};ie.T=i,au(e,!1,a,r);try{var c=n(),u=ie.S;if(u!==null&&u(i,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=Ey(c,s);Nn(e,a,d,It(e))}else Nn(e,a,s,It(e))}catch(x){Nn(e,a,{then:function(){},status:"rejected",reason:x},It())}finally{Se.p=l,o!==null&&i.types!==null&&(o.types=i.types),ie.T=o}}function _y(){}function Bc(e,a,r,s){if(e.tag!==5)throw Error(ee(476));var n=wf(e).queue;Sf(e,n,a,Ar,r===null?_y:function(){return Cf(e),r(s)})}function wf(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:Ar,baseState:Ar,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:Ar},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:r},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Cf(e){var a=wf(e);a.next===null&&(a=e.alternate.memoizedState),Nn(e,a.next.queue,{},It())}function tu(){return ot(On)}function kf(){return Pe().memoizedState}function Ff(){return Pe().memoizedState}function My(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var r=It();e=er(r);var s=tr(a,e,r);s!==null&&(Nt(s,a,r),yn(s,a,r)),a={cache:Od()},e.payload=a;return}a=a.return}}function Iy(e,a,r){var s=It();r={lane:s,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Vo(e)?Ef(a,r):(r=Md(e,a,r,s),r!==null&&(Nt(r,e,s),Af(r,a,s)))}function Tf(e,a,r){var s=It();Nn(e,a,r,s)}function Nn(e,a,r,s){var n={lane:s,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Vo(e))Ef(a,n);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=a.lastRenderedReducer,l!==null))try{var o=a.lastRenderedState,i=l(o,r);if(n.hasEagerState=!0,n.eagerState=i,Lt(i,o))return Ho(e,a,n,0),Ae===null&&Po(),!1}catch{}finally{}if(r=Md(e,a,n,s),r!==null)return Nt(r,e,s),Af(r,a,s),!0}return!1}function au(e,a,r,s){if(s={lane:2,revertLane:uu(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Vo(e)){if(a)throw Error(ee(479))}else a=Md(e,r,s,2),a!==null&&Nt(a,e,2)}function Vo(e){var a=e.alternate;return e===xe||a!==null&&a===xe}function Ef(e,a){Ss=mo=!0;var r=e.pending;r===null?a.next=a:(a.next=r.next,r.next=a),e.pending=a}function Af(e,a,r){if(r&4194048){var s=a.lanes;s&=e.pendingLanes,r|=s,a.lanes=r,mm(e,r)}}var In={readContext:ot,use:Yo,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useLayoutEffect:Le,useInsertionEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useSyncExternalStore:Le,useId:Le,useHostTransitionStatus:Le,useFormState:Le,useActionState:Le,useOptimistic:Le,useMemoCache:Le,useCacheRefresh:Le};In.useEffectEvent=Le;var Rf={readContext:ot,use:Yo,useCallback:function(e,a){return pt().memoizedState=[e,a===void 0?null:a],e},useContext:ot,useEffect:yp,useImperativeHandle:function(e,a,r){r=r!=null?r.concat([e]):null,$l(4194308,4,bf.bind(null,a,e),r)},useLayoutEffect:function(e,a){return $l(4194308,4,e,a)},useInsertionEffect:function(e,a){$l(4,2,e,a)},useMemo:function(e,a){var r=pt();a=a===void 0?null:a;var s=e();if(Or){Ya(!0);try{e()}finally{Ya(!1)}}return r.memoizedState=[s,a],s},useReducer:function(e,a,r){var s=pt();if(r!==void 0){var n=r(a);if(Or){Ya(!0);try{r(a)}finally{Ya(!1)}}}else n=a;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=Iy.bind(null,xe,e),[s.memoizedState,e]},useRef:function(e){var a=pt();return e={current:e},a.memoizedState=e},useState:function(e){e=Rc(e);var a=e.queue,r=Tf.bind(null,xe,a);return a.dispatch=r,[e.memoizedState,r]},useDebugValue:Kd,useDeferredValue:function(e,a){var r=pt();return eu(r,e,a)},useTransition:function(){var e=Rc(!1);return e=Sf.bind(null,xe,e.queue,!0,!1),pt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,r){var s=xe,n=pt();if(ye){if(r===void 0)throw Error(ee(407));r=r()}else{if(r=a(),Ae===null)throw Error(ee(349));be&127||rf(s,a,r)}n.memoizedState=r;var l={value:r,getSnapshot:a};return n.queue=l,yp(nf.bind(null,s,l,e),[e]),s.flags|=2048,As(9,{destroy:void 0},sf.bind(null,s,l,r,a),null),r},useId:function(){var e=pt(),a=Ae.identifierPrefix;if(ye){var r=ca,s=ia;r=(s&~(1<<32-Mt(s)-1)).toString(32)+r,a="_"+a+"R_"+r,r=fo++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=Ay++,a="_"+a+"r_"+r.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:tu,useFormState:gp,useActionState:gp,useOptimistic:function(e){var a=pt();a.memoizedState=a.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=au.bind(null,xe,!0,r),r.dispatch=a,[e,a]},useMemoCache:Qd,useCacheRefresh:function(){return pt().memoizedState=My.bind(null,xe)},useEffectEvent:function(e){var a=pt(),r={impl:e};return a.memoizedState=r,function(){if(Ne&2)throw Error(ee(440));return r.impl.apply(void 0,arguments)}}},ru={readContext:ot,use:Yo,useCallback:vf,useContext:ot,useEffect:Jd,useImperativeHandle:yf,useInsertionEffect:gf,useLayoutEffect:hf,useMemo:jf,useReducer:Ol,useRef:mf,useState:function(){return Ol(Ba)},useDebugValue:Kd,useDeferredValue:function(e,a){var r=Pe();return Nf(r,Te.memoizedState,e,a)},useTransition:function(){var e=Ol(Ba)[0],a=Pe().memoizedState;return[typeof e=="boolean"?e:el(e),a]},useSyncExternalStore:af,useId:kf,useHostTransitionStatus:tu,useFormState:hp,useActionState:hp,useOptimistic:function(e,a){var r=Pe();return cf(r,Te,e,a)},useMemoCache:Qd,useCacheRefresh:Ff};ru.useEffectEvent=ff;var zf={readContext:ot,use:Yo,useCallback:vf,useContext:ot,useEffect:Jd,useImperativeHandle:yf,useInsertionEffect:gf,useLayoutEffect:hf,useMemo:jf,useReducer:Fi,useRef:mf,useState:function(){return Fi(Ba)},useDebugValue:Kd,useDeferredValue:function(e,a){var r=Pe();return Te===null?eu(r,e,a):Nf(r,Te.memoizedState,e,a)},useTransition:function(){var e=Fi(Ba)[0],a=Pe().memoizedState;return[typeof e=="boolean"?e:el(e),a]},useSyncExternalStore:af,useId:kf,useHostTransitionStatus:tu,useFormState:bp,useActionState:bp,useOptimistic:function(e,a){var r=Pe();return Te!==null?cf(r,Te,e,a):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Qd,useCacheRefresh:Ff};zf.useEffectEvent=ff;function Ti(e,a,r,s){a=e.memoizedState,r=r(s,a),r=r==null?a:Me({},a,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Dc={enqueueSetState:function(e,a,r){e=e._reactInternals;var s=It(),n=er(s);n.payload=a,r!=null&&(n.callback=r),a=tr(e,n,s),a!==null&&(Nt(a,e,s),yn(a,e,s))},enqueueReplaceState:function(e,a,r){e=e._reactInternals;var s=It(),n=er(s);n.tag=1,n.payload=a,r!=null&&(n.callback=r),a=tr(e,n,s),a!==null&&(Nt(a,e,s),yn(a,e,s))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var r=It(),s=er(r);s.tag=2,a!=null&&(s.callback=a),a=tr(e,s,r),a!==null&&(Nt(a,e,r),yn(a,e,r))}};function vp(e,a,r,s,n,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,l,o):a.prototype&&a.prototype.isPureReactComponent?!zn(r,s)||!zn(n,l):!0}function jp(e,a,r,s){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,s),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,s),a.state!==e&&Dc.enqueueReplaceState(a,a.state,null)}function $r(e,a){var r=a;if("ref"in a){r={};for(var s in a)s!=="ref"&&(r[s]=a[s])}if(e=e.defaultProps){r===a&&(r=Me({},r));for(var n in e)r[n]===void 0&&(r[n]=e[n])}return r}function Bf(e){lo(e)}function Df(e){console.error(e)}function _f(e){lo(e)}function go(e,a){try{var r=e.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(s){setTimeout(function(){throw s})}}function Np(e,a,r){try{var s=e.onCaughtError;s(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function _c(e,a,r){return r=er(r),r.tag=3,r.payload={element:null},r.callback=function(){go(e,a)},r}function Mf(e){return e=er(e),e.tag=3,e}function If(e,a,r,s){var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var l=s.value;e.payload=function(){return n(l)},e.callback=function(){Np(a,r,s)}}var o=r.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){Np(a,r,s),typeof n!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})})}function Ly(e,a,r,s,n){if(r.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(a=r.alternate,a!==null&&Hs(a,r,n,!0),r=Ut.current,r!==null){switch(r.tag){case 31:case 13:return Qt===null?jo():r.alternate===null&&Ue===0&&(Ue=3),r.flags&=-257,r.flags|=65536,r.lanes=n,s===uo?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([s]):a.add(s),Ui(e,s,n)),!1;case 22:return r.flags|=65536,s===uo?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([s])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([s]):r.add(s)),Ui(e,s,n)),!1}throw Error(ee(435,r.tag))}return Ui(e,s,n),jo(),!1}if(ye)return a=Ut.current,a!==null?(!(a.flags&65536)&&(a.flags|=256),a.flags|=65536,a.lanes=n,s!==Nc&&(e=Error(ee(422),{cause:s}),Dn(Vt(e,r)))):(s!==Nc&&(a=Error(ee(423),{cause:s}),Dn(Vt(a,r))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,s=Vt(s,r),n=_c(e.stateNode,s,n),ki(e,n),Ue!==4&&(Ue=2)),!1;var l=Error(ee(520),{cause:s});if(l=Vt(l,r),Cn===null?Cn=[l]:Cn.push(l),Ue!==4&&(Ue=2),a===null)return!0;s=Vt(s,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,e=n&-n,r.lanes|=e,e=_c(r.stateNode,s,e),ki(r,e),!1;case 1:if(a=r.type,l=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(ar===null||!ar.has(l))))return r.flags|=65536,n&=-n,r.lanes|=n,n=Mf(n),If(n,e,r,s),ki(r,n),!1}r=r.return}while(r!==null);return!1}var su=Error(ee(461)),Ve=!1;function st(e,a,r,s){a.child=e===null?Qm(a,null,r,s):Ur(a,e.child,r,s)}function Sp(e,a,r,s,n){r=r.render;var l=a.ref;if("ref"in s){var o={};for(var i in s)i!=="ref"&&(o[i]=s[i])}else o=s;return Lr(a),s=Yd(e,a,r,o,l,n),i=Gd(),e!==null&&!Ve?(Vd(e,a,n),Da(e,a,n)):(ye&&i&&Ld(a),a.flags|=1,st(e,a,s,n),a.child)}function wp(e,a,r,s,n){if(e===null){var l=r.type;return typeof l=="function"&&!Id(l)&&l.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=l,Lf(e,a,l,s,n)):(e=Ll(r.type,null,s,a,a.mode,n),e.ref=a.ref,e.return=a,a.child=e)}if(l=e.child,!nu(e,n)){var o=l.memoizedProps;if(r=r.compare,r=r!==null?r:zn,r(o,s)&&e.ref===a.ref)return Da(e,a,n)}return a.flags|=1,e=Ta(l,s),e.ref=a.ref,e.return=a,a.child=e}function Lf(e,a,r,s,n){if(e!==null){var l=e.memoizedProps;if(zn(l,s)&&e.ref===a.ref)if(Ve=!1,a.pendingProps=s=l,nu(e,n))e.flags&131072&&(Ve=!0);else return a.lanes=e.lanes,Da(e,a,n)}return Mc(e,a,r,s,n)}function Uf(e,a,r,s){var n=s.children,l=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(a.flags&128){if(l=l!==null?l.baseLanes|r:r,e!==null){for(s=a.child=e.child,n=0;s!==null;)n=n|s.lanes|s.childLanes,s=s.sibling;s=n&~l}else s=0,a.child=null;return Cp(e,a,l,r,s)}if(r&536870912)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ul(a,l!==null?l.cachePool:null),l!==null?xp(a,l):Ec(),Km(a);else return s=a.lanes=536870912,Cp(e,a,l!==null?l.baseLanes|r:r,r,s)}else l!==null?(Ul(a,l.cachePool),xp(a,l),Wa(),a.memoizedState=null):(e!==null&&Ul(a,null),Ec(),Wa());return st(e,a,n,r),a.child}function pn(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Cp(e,a,r,s,n){var l=$d();return l=l===null?null:{parent:Ge._currentValue,pool:l},a.memoizedState={baseLanes:r,cachePool:l},e!==null&&Ul(a,null),Ec(),Km(a),e!==null&&Hs(e,a,s,!0),a.childLanes=n,null}function Pl(e,a){return a=ho({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function kp(e,a,r){return Ur(a,e.child,null,r),e=Pl(a,a.pendingProps),e.flags|=2,Rt(a),a.memoizedState=null,e}function Uy(e,a,r){var s=a.pendingProps,n=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(ye){if(s.mode==="hidden")return e=Pl(a,s),a.lanes=536870912,pn(null,e);if(Ac(a),(e=De)?(e=Rg(e,Xt),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:ir!==null?{id:ia,overflow:ca}:null,retryLane:536870912,hydrationErrors:null},r=Hm(e),r.return=a,a.child=r,lt=a,De=null)):e=null,e===null)throw cr(a);return a.lanes=536870912,null}return Pl(a,s)}var l=e.memoizedState;if(l!==null){var o=l.dehydrated;if(Ac(a),n)if(a.flags&256)a.flags&=-257,a=kp(e,a,r);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(ee(558));else if(Ve||Hs(e,a,r,!1),n=(r&e.childLanes)!==0,Ve||n){if(s=Ae,s!==null&&(o=fm(s,r),o!==0&&o!==l.retryLane))throw l.retryLane=o,Gr(e,o),Nt(s,e,o),su;jo(),a=kp(e,a,r)}else e=l.treeContext,De=Zt(o.nextSibling),lt=a,ye=!0,Ka=null,Xt=!1,e!==null&&qm(a,e),a=Pl(a,s),a.flags|=4096;return a}return e=Ta(e.child,{mode:s.mode,children:s.children}),e.ref=a.ref,a.child=e,e.return=a,e}function Hl(e,a){var r=a.ref;if(r===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(ee(284));(e===null||e.ref!==r)&&(a.flags|=4194816)}}function Mc(e,a,r,s,n){return Lr(a),r=Yd(e,a,r,s,void 0,n),s=Gd(),e!==null&&!Ve?(Vd(e,a,n),Da(e,a,n)):(ye&&s&&Ld(a),a.flags|=1,st(e,a,r,n),a.child)}function Fp(e,a,r,s,n,l){return Lr(a),a.updateQueue=null,r=tf(a,s,r,n),ef(e),s=Gd(),e!==null&&!Ve?(Vd(e,a,l),Da(e,a,l)):(ye&&s&&Ld(a),a.flags|=1,st(e,a,r,l),a.child)}function Tp(e,a,r,s,n){if(Lr(a),a.stateNode===null){var l=ms,o=r.contextType;typeof o=="object"&&o!==null&&(l=ot(o)),l=new r(s,l),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Dc,a.stateNode=l,l._reactInternals=a,l=a.stateNode,l.props=s,l.state=a.memoizedState,l.refs={},Hd(a),o=r.contextType,l.context=typeof o=="object"&&o!==null?ot(o):ms,l.state=a.memoizedState,o=r.getDerivedStateFromProps,typeof o=="function"&&(Ti(a,r,o,s),l.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(o=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),o!==l.state&&Dc.enqueueReplaceState(l,l.state,null),jn(a,s,l,n),vn(),l.state=a.memoizedState),typeof l.componentDidMount=="function"&&(a.flags|=4194308),s=!0}else if(e===null){l=a.stateNode;var i=a.memoizedProps,c=$r(r,i);l.props=c;var u=l.context,d=r.contextType;o=ms,typeof d=="object"&&d!==null&&(o=ot(d));var x=r.getDerivedStateFromProps;d=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function",i=a.pendingProps!==i,d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(i||u!==o)&&jp(a,l,s,o),$a=!1;var m=a.memoizedState;l.state=m,jn(a,s,l,n),vn(),u=a.memoizedState,i||m!==u||$a?(typeof x=="function"&&(Ti(a,r,x,s),u=a.memoizedState),(c=$a||vp(a,r,c,s,m,u,o))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(a.flags|=4194308)):(typeof l.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=s,a.memoizedState=u),l.props=s,l.state=u,l.context=o,s=c):(typeof l.componentDidMount=="function"&&(a.flags|=4194308),s=!1)}else{l=a.stateNode,Fc(e,a),o=a.memoizedProps,d=$r(r,o),l.props=d,x=a.pendingProps,m=l.context,u=r.contextType,c=ms,typeof u=="object"&&u!==null&&(c=ot(u)),i=r.getDerivedStateFromProps,(u=typeof i=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==x||m!==c)&&jp(a,l,s,c),$a=!1,m=a.memoizedState,l.state=m,jn(a,s,l,n),vn();var b=a.memoizedState;o!==x||m!==b||$a||e!==null&&e.dependencies!==null&&co(e.dependencies)?(typeof i=="function"&&(Ti(a,r,i,s),b=a.memoizedState),(d=$a||vp(a,r,d,s,m,b,c)||e!==null&&e.dependencies!==null&&co(e.dependencies))?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,b,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,b,c)),typeof l.componentDidUpdate=="function"&&(a.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(a.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(a.flags|=1024),a.memoizedProps=s,a.memoizedState=b),l.props=s,l.state=b,l.context=c,s=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(a.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(a.flags|=1024),s=!1)}return l=s,Hl(e,a),s=(a.flags&128)!==0,l||s?(l=a.stateNode,r=s&&typeof r.getDerivedStateFromError!="function"?null:l.render(),a.flags|=1,e!==null&&s?(a.child=Ur(a,e.child,null,n),a.child=Ur(a,null,r,n)):st(e,a,r,n),a.memoizedState=l.state,e=a.child):e=Da(e,a,n),e}function Ep(e,a,r,s){return Ir(),a.flags|=256,st(e,a,r,s),a.child}var Ei={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ai(e){return{baseLanes:e,cachePool:Gm()}}function Ri(e,a,r){return e=e!==null?e.childLanes&~r:0,a&&(e|=Bt),e}function Of(e,a,r){var s=a.pendingProps,n=!1,l=(a.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:($e.current&2)!==0),o&&(n=!0,a.flags&=-129),o=(a.flags&32)!==0,a.flags&=-33,e===null){if(ye){if(n?Ha(a):Wa(),(e=De)?(e=Rg(e,Xt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:ir!==null?{id:ia,overflow:ca}:null,retryLane:536870912,hydrationErrors:null},r=Hm(e),r.return=a,a.child=r,lt=a,De=null)):e=null,e===null)throw cr(a);return Qc(e)?a.lanes=32:a.lanes=536870912,null}var i=s.children;return s=s.fallback,n?(Wa(),n=a.mode,i=ho({mode:"hidden",children:i},n),s=Rr(s,n,r,null),i.return=a,s.return=a,i.sibling=s,a.child=i,s=a.child,s.memoizedState=Ai(r),s.childLanes=Ri(e,o,r),a.memoizedState=Ei,pn(null,s)):(Ha(a),Ic(a,i))}var c=e.memoizedState;if(c!==null&&(i=c.dehydrated,i!==null)){if(l)a.flags&256?(Ha(a),a.flags&=-257,a=zi(e,a,r)):a.memoizedState!==null?(Wa(),a.child=e.child,a.flags|=128,a=null):(Wa(),i=s.fallback,n=a.mode,s=ho({mode:"visible",children:s.children},n),i=Rr(i,n,r,null),i.flags|=2,s.return=a,i.return=a,s.sibling=i,a.child=s,Ur(a,e.child,null,r),s=a.child,s.memoizedState=Ai(r),s.childLanes=Ri(e,o,r),a.memoizedState=Ei,a=pn(null,s));else if(Ha(a),Qc(i)){if(o=i.nextSibling&&i.nextSibling.dataset,o)var u=o.dgst;o=u,s=Error(ee(419)),s.stack="",s.digest=o,Dn({value:s,source:null,stack:null}),a=zi(e,a,r)}else if(Ve||Hs(e,a,r,!1),o=(r&e.childLanes)!==0,Ve||o){if(o=Ae,o!==null&&(s=fm(o,r),s!==0&&s!==c.retryLane))throw c.retryLane=s,Gr(e,s),Nt(o,e,s),su;Xc(i)||jo(),a=zi(e,a,r)}else Xc(i)?(a.flags|=192,a.child=e.child,a=null):(e=c.treeContext,De=Zt(i.nextSibling),lt=a,ye=!0,Ka=null,Xt=!1,e!==null&&qm(a,e),a=Ic(a,s.children),a.flags|=4096);return a}return n?(Wa(),i=s.fallback,n=a.mode,c=e.child,u=c.sibling,s=Ta(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,u!==null?i=Ta(u,i):(i=Rr(i,n,r,null),i.flags|=2),i.return=a,s.return=a,s.sibling=i,a.child=s,pn(null,s),s=a.child,i=e.child.memoizedState,i===null?i=Ai(r):(n=i.cachePool,n!==null?(c=Ge._currentValue,n=n.parent!==c?{parent:c,pool:c}:n):n=Gm(),i={baseLanes:i.baseLanes|r,cachePool:n}),s.memoizedState=i,s.childLanes=Ri(e,o,r),a.memoizedState=Ei,pn(e.child,s)):(Ha(a),r=e.child,e=r.sibling,r=Ta(r,{mode:"visible",children:s.children}),r.return=a,r.sibling=null,e!==null&&(o=a.deletions,o===null?(a.deletions=[e],a.flags|=16):o.push(e)),a.child=r,a.memoizedState=null,r)}function Ic(e,a){return a=ho({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function ho(e,a){return e=zt(22,e,null,a),e.lanes=0,e}function zi(e,a,r){return Ur(a,e.child,null,r),e=Ic(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function Ap(e,a,r){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a),wc(e.return,a,r)}function Bi(e,a,r,s,n,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n,treeForkCount:l}:(o.isBackwards=a,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=r,o.tailMode=n,o.treeForkCount=l)}function $f(e,a,r){var s=a.pendingProps,n=s.revealOrder,l=s.tail;s=s.children;var o=$e.current,i=(o&2)!==0;if(i?(o=o&1|2,a.flags|=128):o&=1,Re($e,o),st(e,a,s,r),s=ye?Bn:0,!i&&e!==null&&e.flags&128)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ap(e,r,a);else if(e.tag===19)Ap(e,r,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(r=a.child,n=null;r!==null;)e=r.alternate,e!==null&&xo(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=a.child,a.child=null):(n=r.sibling,r.sibling=null),Bi(a,!1,n,r,l,s);break;case"backwards":case"unstable_legacy-backwards":for(r=null,n=a.child,a.child=null;n!==null;){if(e=n.alternate,e!==null&&xo(e)===null){a.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Bi(a,!0,r,null,l,s);break;case"together":Bi(a,!1,null,null,void 0,s);break;default:a.memoizedState=null}return a.child}function Da(e,a,r){if(e!==null&&(a.dependencies=e.dependencies),ur|=a.lanes,!(r&a.childLanes))if(e!==null){if(Hs(e,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(ee(153));if(a.child!==null){for(e=a.child,r=Ta(e,e.pendingProps),a.child=r,r.return=a;e.sibling!==null;)e=e.sibling,r=r.sibling=Ta(e,e.pendingProps),r.return=a;r.sibling=null}return a.child}function nu(e,a){return e.lanes&a?!0:(e=e.dependencies,!!(e!==null&&co(e)))}function Oy(e,a,r){switch(a.tag){case 3:ao(a,a.stateNode.containerInfo),Pa(a,Ge,e.memoizedState.cache),Ir();break;case 27:case 5:uc(a);break;case 4:ao(a,a.stateNode.containerInfo);break;case 10:Pa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Ac(a),null;break;case 13:var s=a.memoizedState;if(s!==null)return s.dehydrated!==null?(Ha(a),a.flags|=128,null):r&a.child.childLanes?Of(e,a,r):(Ha(a),e=Da(e,a,r),e!==null?e.sibling:null);Ha(a);break;case 19:var n=(e.flags&128)!==0;if(s=(r&a.childLanes)!==0,s||(Hs(e,a,r,!1),s=(r&a.childLanes)!==0),n){if(s)return $f(e,a,r);a.flags|=128}if(n=a.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Re($e,$e.current),s)break;return null;case 22:return a.lanes=0,Uf(e,a,r,a.pendingProps);case 24:Pa(a,Ge,e.memoizedState.cache)}return Da(e,a,r)}function Pf(e,a,r){if(e!==null)if(e.memoizedProps!==a.pendingProps)Ve=!0;else{if(!nu(e,r)&&!(a.flags&128))return Ve=!1,Oy(e,a,r);Ve=!!(e.flags&131072)}else Ve=!1,ye&&a.flags&1048576&&Wm(a,Bn,a.index);switch(a.lanes=0,a.tag){case 16:e:{var s=a.pendingProps;if(e=Fr(a.elementType),a.type=e,typeof e=="function")Id(e)?(s=$r(e,s),a.tag=1,a=Tp(null,a,e,s,r)):(a.tag=0,a=Mc(null,a,e,s,r));else{if(e!=null){var n=e.$$typeof;if(n===Sd){a.tag=11,a=Sp(null,a,e,s,r);break e}else if(n===wd){a.tag=14,a=wp(null,a,e,s,r);break e}}throw a=cc(e)||e,Error(ee(306,a,""))}}return a;case 0:return Mc(e,a,a.type,a.pendingProps,r);case 1:return s=a.type,n=$r(s,a.pendingProps),Tp(e,a,s,n,r);case 3:e:{if(ao(a,a.stateNode.containerInfo),e===null)throw Error(ee(387));s=a.pendingProps;var l=a.memoizedState;n=l.element,Fc(e,a),jn(a,s,null,r);var o=a.memoizedState;if(s=o.cache,Pa(a,Ge,s),s!==l.cache&&Cc(a,[Ge],r,!0),vn(),s=o.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:o.cache},a.updateQueue.baseState=l,a.memoizedState=l,a.flags&256){a=Ep(e,a,s,r);break e}else if(s!==n){n=Vt(Error(ee(424)),a),Dn(n),a=Ep(e,a,s,r);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(De=Zt(e.firstChild),lt=a,ye=!0,Ka=null,Xt=!0,r=Qm(a,null,s,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Ir(),s===n){a=Da(e,a,r);break e}st(e,a,s,r)}a=a.child}return a;case 26:return Hl(e,a),e===null?(r=Qp(a.type,null,a.pendingProps,null))?a.memoizedState=r:ye||(r=a.type,e=a.pendingProps,s=Co(Ja.current).createElement(r),s[nt]=a,s[Ct]=e,it(s,r,e),tt(s),a.stateNode=s):a.memoizedState=Qp(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return uc(a),e===null&&ye&&(s=a.stateNode=zg(a.type,a.pendingProps,Ja.current),lt=a,Xt=!0,n=De,xr(a.type)?(Zc=n,De=Zt(s.firstChild)):De=n),st(e,a,a.pendingProps.children,r),Hl(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&ye&&((n=s=De)&&(s=g0(s,a.type,a.pendingProps,Xt),s!==null?(a.stateNode=s,lt=a,De=Zt(s.firstChild),Xt=!1,n=!0):n=!1),n||cr(a)),uc(a),n=a.type,l=a.pendingProps,o=e!==null?e.memoizedProps:null,s=l.children,Gc(n,l)?s=null:o!==null&&Gc(n,o)&&(a.flags|=32),a.memoizedState!==null&&(n=Yd(e,a,Ry,null,null,r),On._currentValue=n),Hl(e,a),st(e,a,s,r),a.child;case 6:return e===null&&ye&&((e=r=De)&&(r=h0(r,a.pendingProps,Xt),r!==null?(a.stateNode=r,lt=a,De=null,e=!0):e=!1),e||cr(a)),null;case 13:return Of(e,a,r);case 4:return ao(a,a.stateNode.containerInfo),s=a.pendingProps,e===null?a.child=Ur(a,null,s,r):st(e,a,s,r),a.child;case 11:return Sp(e,a,a.type,a.pendingProps,r);case 7:return st(e,a,a.pendingProps,r),a.child;case 8:return st(e,a,a.pendingProps.children,r),a.child;case 12:return st(e,a,a.pendingProps.children,r),a.child;case 10:return s=a.pendingProps,Pa(a,a.type,s.value),st(e,a,s.children,r),a.child;case 9:return n=a.type._context,s=a.pendingProps.children,Lr(a),n=ot(n),s=s(n),a.flags|=1,st(e,a,s,r),a.child;case 14:return wp(e,a,a.type,a.pendingProps,r);case 15:return Lf(e,a,a.type,a.pendingProps,r);case 19:return $f(e,a,r);case 31:return Uy(e,a,r);case 22:return Uf(e,a,r,a.pendingProps);case 24:return Lr(a),s=ot(Ge),e===null?(n=$d(),n===null&&(n=Ae,l=Od(),n.pooledCache=l,l.refCount++,l!==null&&(n.pooledCacheLanes|=r),n=l),a.memoizedState={parent:s,cache:n},Hd(a),Pa(a,Ge,n)):(e.lanes&r&&(Fc(e,a),jn(a,null,null,r),vn()),n=e.memoizedState,l=a.memoizedState,n.parent!==s?(n={parent:s,cache:s},a.memoizedState=n,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=n),Pa(a,Ge,s)):(s=l.cache,Pa(a,Ge,s),s!==n.cache&&Cc(a,[Ge],r,!0))),st(e,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(ee(156,a.tag))}function ba(e){e.flags|=4}function Di(e,a,r,s,n){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(n&335544128)===n)if(e.stateNode.complete)e.flags|=8192;else if(pg())e.flags|=8192;else throw Br=uo,Pd}else e.flags&=-16777217}function Rp(e,a){if(a.type!=="stylesheet"||a.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!_g(a))if(pg())e.flags|=8192;else throw Br=uo,Pd}function Nl(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?pm():536870912,e.lanes|=a,Rs|=a)}function an(e,a){if(!ye)switch(e.tailMode){case"hidden":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Be(e){var a=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(a)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags&65011712,s|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=r,a}function $y(e,a,r){var s=a.pendingProps;switch(Ud(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(a),null;case 1:return Be(a),null;case 3:return r=a.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),Ea(Ge),Cs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Kr(a)?ba(a):e===null||e.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,Ci())),Be(a),null;case 26:var n=a.type,l=a.memoizedState;return e===null?(ba(a),l!==null?(Be(a),Rp(a,l)):(Be(a),Di(a,n,null,s,r))):l?l!==e.memoizedState?(ba(a),Be(a),Rp(a,l)):(Be(a),a.flags&=-16777217):(e=e.memoizedProps,e!==s&&ba(a),Be(a),Di(a,n,e,s,r)),null;case 27:if(ro(a),r=Ja.current,n=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==s&&ba(a);else{if(!s){if(a.stateNode===null)throw Error(ee(166));return Be(a),null}e=ua.current,Kr(a)?lp(a):(e=zg(n,s,r),a.stateNode=e,ba(a))}return Be(a),null;case 5:if(ro(a),n=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==s&&ba(a);else{if(!s){if(a.stateNode===null)throw Error(ee(166));return Be(a),null}if(l=ua.current,Kr(a))lp(a);else{var o=Co(Ja.current);switch(l){case 1:l=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:l=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":l=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":l=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":l=o.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof s.is=="string"?o.createElement("select",{is:s.is}):o.createElement("select"),s.multiple?l.multiple=!0:s.size&&(l.size=s.size);break;default:l=typeof s.is=="string"?o.createElement(n,{is:s.is}):o.createElement(n)}}l[nt]=a,l[Ct]=s;e:for(o=a.child;o!==null;){if(o.tag===5||o.tag===6)l.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}a.stateNode=l;e:switch(it(l,n,s),n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ba(a)}}return Be(a),Di(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,r),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==s&&ba(a);else{if(typeof s!="string"&&a.stateNode===null)throw Error(ee(166));if(e=Ja.current,Kr(a)){if(e=a.stateNode,r=a.memoizedProps,s=null,n=lt,n!==null)switch(n.tag){case 27:case 5:s=n.memoizedProps}e[nt]=a,e=!!(e.nodeValue===r||s!==null&&s.suppressHydrationWarning===!0||Tg(e.nodeValue,r)),e||cr(a,!0)}else e=Co(e).createTextNode(s),e[nt]=a,a.stateNode=e}return Be(a),null;case 31:if(r=a.memoizedState,e===null||e.memoizedState!==null){if(s=Kr(a),r!==null){if(e===null){if(!s)throw Error(ee(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(557));e[nt]=a}else Ir(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;Be(a),e=!1}else r=Ci(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return a.flags&256?(Rt(a),a):(Rt(a),null);if(a.flags&128)throw Error(ee(558))}return Be(a),null;case 13:if(s=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=Kr(a),s!==null&&s.dehydrated!==null){if(e===null){if(!n)throw Error(ee(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ee(317));n[nt]=a}else Ir(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;Be(a),n=!1}else n=Ci(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return a.flags&256?(Rt(a),a):(Rt(a),null)}return Rt(a),a.flags&128?(a.lanes=r,a):(r=s!==null,e=e!==null&&e.memoizedState!==null,r&&(s=a.child,n=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(n=s.alternate.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==n&&(s.flags|=2048)),r!==e&&r&&(a.child.flags|=8192),Nl(a,a.updateQueue),Be(a),null);case 4:return Cs(),e===null&&pu(a.stateNode.containerInfo),Be(a),null;case 10:return Ea(a.type),Be(a),null;case 19:if(at($e),s=a.memoizedState,s===null)return Be(a),null;if(n=(a.flags&128)!==0,l=s.rendering,l===null)if(n)an(s,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=a.child;e!==null;){if(l=xo(e),l!==null){for(a.flags|=128,an(s,!1),e=l.updateQueue,a.updateQueue=e,Nl(a,e),a.subtreeFlags=0,e=r,r=a.child;r!==null;)Pm(r,e),r=r.sibling;return Re($e,$e.current&1|2),ye&&Sa(a,s.treeForkCount),a.child}e=e.sibling}s.tail!==null&&Dt()>yo&&(a.flags|=128,n=!0,an(s,!1),a.lanes=4194304)}else{if(!n)if(e=xo(l),e!==null){if(a.flags|=128,n=!0,e=e.updateQueue,a.updateQueue=e,Nl(a,e),an(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!ye)return Be(a),null}else 2*Dt()-s.renderingStartTime>yo&&r!==536870912&&(a.flags|=128,n=!0,an(s,!1),a.lanes=4194304);s.isBackwards?(l.sibling=a.child,a.child=l):(e=s.last,e!==null?e.sibling=l:a.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Dt(),e.sibling=null,r=$e.current,Re($e,n?r&1|2:r&1),ye&&Sa(a,s.treeForkCount),e):(Be(a),null);case 22:case 23:return Rt(a),Wd(),s=a.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(a.flags|=8192):s&&(a.flags|=8192),s?r&536870912&&!(a.flags&128)&&(Be(a),a.subtreeFlags&6&&(a.flags|=8192)):Be(a),r=a.updateQueue,r!==null&&Nl(a,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==r&&(a.flags|=2048),e!==null&&at(zr),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Ea(Ge),Be(a),null;case 25:return null;case 30:return null}throw Error(ee(156,a.tag))}function Py(e,a){switch(Ud(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return Ea(Ge),Cs(),e=a.flags,e&65536&&!(e&128)?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return ro(a),null;case 31:if(a.memoizedState!==null){if(Rt(a),a.alternate===null)throw Error(ee(340));Ir()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(Rt(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(ee(340));Ir()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return at($e),null;case 4:return Cs(),null;case 10:return Ea(a.type),null;case 22:case 23:return Rt(a),Wd(),e!==null&&at(zr),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return Ea(Ge),null;case 25:return null;default:return null}}function Hf(e,a){switch(Ud(a),a.tag){case 3:Ea(Ge),Cs();break;case 26:case 27:case 5:ro(a);break;case 4:Cs();break;case 31:a.memoizedState!==null&&Rt(a);break;case 13:Rt(a);break;case 19:at($e);break;case 10:Ea(a.type);break;case 22:case 23:Rt(a),Wd(),e!==null&&at(zr);break;case 24:Ea(Ge)}}function tl(e,a){try{var r=a.updateQueue,s=r!==null?r.lastEffect:null;if(s!==null){var n=s.next;r=n;do{if((r.tag&e)===e){s=void 0;var l=r.create,o=r.inst;s=l(),o.destroy=s}r=r.next}while(r!==n)}}catch(i){ke(a,a.return,i)}}function dr(e,a,r){try{var s=a.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var l=n.next;s=l;do{if((s.tag&e)===e){var o=s.inst,i=o.destroy;if(i!==void 0){o.destroy=void 0,n=a;var c=r,u=i;try{u()}catch(d){ke(n,c,d)}}}s=s.next}while(s!==l)}}catch(d){ke(a,a.return,d)}}function Wf(e){var a=e.updateQueue;if(a!==null){var r=e.stateNode;try{Jm(a,r)}catch(s){ke(e,e.return,s)}}}function qf(e,a,r){r.props=$r(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(s){ke(e,a,s)}}function Sn(e,a){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof r=="function"?e.refCleanup=r(s):r.current=s}}catch(n){ke(e,a,n)}}function da(e,a){var r=e.ref,s=e.refCleanup;if(r!==null)if(typeof s=="function")try{s()}catch(n){ke(e,a,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(n){ke(e,a,n)}else r.current=null}function Yf(e){var a=e.type,r=e.memoizedProps,s=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&s.focus();break e;case"img":r.src?s.src=r.src:r.srcSet&&(s.srcset=r.srcSet)}}catch(n){ke(e,e.return,n)}}function _i(e,a,r){try{var s=e.stateNode;d0(s,e.type,r,a),s[Ct]=a}catch(n){ke(e,e.return,n)}}function Gf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&xr(e.type)||e.tag===4}function Mi(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&xr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lc(e,a,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(e),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=ka));else if(s!==4&&(s===27&&xr(e.type)&&(r=e.stateNode,a=null),e=e.child,e!==null))for(Lc(e,a,r),e=e.sibling;e!==null;)Lc(e,a,r),e=e.sibling}function bo(e,a,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,a?r.insertBefore(e,a):r.appendChild(e);else if(s!==4&&(s===27&&xr(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(bo(e,a,r),e=e.sibling;e!==null;)bo(e,a,r),e=e.sibling}function Vf(e){var a=e.stateNode,r=e.memoizedProps;try{for(var s=e.type,n=a.attributes;n.length;)a.removeAttributeNode(n[0]);it(a,s,r),a[nt]=e,a[Ct]=r}catch(l){ke(e,e.return,l)}}var wa=!1,Ye=!1,Ii=!1,zp=typeof WeakSet=="function"?WeakSet:Set,et=null;function Hy(e,a){if(e=e.containerInfo,qc=Eo,e=Dm(e),Dd(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var n=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var o=0,i=-1,c=-1,u=0,d=0,x=e,m=null;t:for(;;){for(var b;x!==r||n!==0&&x.nodeType!==3||(i=o+n),x!==l||s!==0&&x.nodeType!==3||(c=o+s),x.nodeType===3&&(o+=x.nodeValue.length),(b=x.firstChild)!==null;)m=x,x=b;for(;;){if(x===e)break t;if(m===r&&++u===n&&(i=o),m===l&&++d===s&&(c=o),(b=x.nextSibling)!==null)break;x=m,m=x.parentNode}x=b}r=i===-1||c===-1?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Yc={focusedElem:e,selectionRange:r},Eo=!1,et=a;et!==null;)if(a=et,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,et=e;else for(;et!==null;){switch(a=et,l=a.alternate,e=a.flags,a.tag){case 0:if(e&4&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)n=e[r],n.ref.impl=n.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&l!==null){e=void 0,r=a,n=l.memoizedProps,l=l.memoizedState,s=r.stateNode;try{var v=$r(r.type,n);e=s.getSnapshotBeforeUpdate(v,l),s.__reactInternalSnapshotBeforeUpdate=e}catch(S){ke(r,r.return,S)}}break;case 3:if(e&1024){if(e=a.stateNode.containerInfo,r=e.nodeType,r===9)Vc(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Vc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(ee(163))}if(e=a.sibling,e!==null){e.return=a.return,et=e;break}et=a.return}}function Xf(e,a,r){var s=r.flags;switch(r.tag){case 0:case 11:case 15:va(e,r),s&4&&tl(5,r);break;case 1:if(va(e,r),s&4)if(e=r.stateNode,a===null)try{e.componentDidMount()}catch(o){ke(r,r.return,o)}else{var n=$r(r.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(n,a,e.__reactInternalSnapshotBeforeUpdate)}catch(o){ke(r,r.return,o)}}s&64&&Wf(r),s&512&&Sn(r,r.return);break;case 3:if(va(e,r),s&64&&(e=r.updateQueue,e!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{Jm(e,a)}catch(o){ke(r,r.return,o)}}break;case 27:a===null&&s&4&&Vf(r);case 26:case 5:va(e,r),a===null&&s&4&&Yf(r),s&512&&Sn(r,r.return);break;case 12:va(e,r);break;case 31:va(e,r),s&4&&Jf(e,r);break;case 13:va(e,r),s&4&&Kf(e,r),s&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=Jy.bind(null,r),b0(e,r))));break;case 22:if(s=r.memoizedState!==null||wa,!s){a=a!==null&&a.memoizedState!==null||Ye,n=wa;var l=Ye;wa=s,(Ye=a)&&!l?Na(e,r,(r.subtreeFlags&8772)!==0):va(e,r),wa=n,Ye=l}break;case 30:break;default:va(e,r)}}function Qf(e){var a=e.alternate;a!==null&&(e.alternate=null,Qf(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&Td(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ie=null,vt=!1;function ya(e,a,r){for(r=r.child;r!==null;)Zf(e,a,r),r=r.sibling}function Zf(e,a,r){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Vn,r)}catch{}switch(r.tag){case 26:Ye||da(r,a),ya(e,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Ye||da(r,a);var s=Ie,n=vt;xr(r.type)&&(Ie=r.stateNode,vt=!1),ya(e,a,r),Fn(r.stateNode),Ie=s,vt=n;break;case 5:Ye||da(r,a);case 6:if(s=Ie,n=vt,Ie=null,ya(e,a,r),Ie=s,vt=n,Ie!==null)if(vt)try{(Ie.nodeType===9?Ie.body:Ie.nodeName==="HTML"?Ie.ownerDocument.body:Ie).removeChild(r.stateNode)}catch(l){ke(r,a,l)}else try{Ie.removeChild(r.stateNode)}catch(l){ke(r,a,l)}break;case 18:Ie!==null&&(vt?(e=Ie,qp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),_s(e)):qp(Ie,r.stateNode));break;case 4:s=Ie,n=vt,Ie=r.stateNode.containerInfo,vt=!0,ya(e,a,r),Ie=s,vt=n;break;case 0:case 11:case 14:case 15:dr(2,r,a),Ye||dr(4,r,a),ya(e,a,r);break;case 1:Ye||(da(r,a),s=r.stateNode,typeof s.componentWillUnmount=="function"&&qf(r,a,s)),ya(e,a,r);break;case 21:ya(e,a,r);break;case 22:Ye=(s=Ye)||r.memoizedState!==null,ya(e,a,r),Ye=s;break;default:ya(e,a,r)}}function Jf(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{_s(e)}catch(r){ke(a,a.return,r)}}}function Kf(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{_s(e)}catch(r){ke(a,a.return,r)}}function Wy(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new zp),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new zp),a;default:throw Error(ee(435,e.tag))}}function Sl(e,a){var r=Wy(e);a.forEach(function(s){if(!r.has(s)){r.add(s);var n=Ky.bind(null,e,s);s.then(n,n)}})}function bt(e,a){var r=a.deletions;if(r!==null)for(var s=0;s<r.length;s++){var n=r[s],l=e,o=a,i=o;e:for(;i!==null;){switch(i.tag){case 27:if(xr(i.type)){Ie=i.stateNode,vt=!1;break e}break;case 5:Ie=i.stateNode,vt=!1;break e;case 3:case 4:Ie=i.stateNode.containerInfo,vt=!0;break e}i=i.return}if(Ie===null)throw Error(ee(160));Zf(l,o,n),Ie=null,vt=!1,l=n.alternate,l!==null&&(l.return=null),n.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)eg(a,e),a=a.sibling}var ta=null;function eg(e,a){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:bt(a,e),yt(e),s&4&&(dr(3,e,e.return),tl(3,e),dr(5,e,e.return));break;case 1:bt(a,e),yt(e),s&512&&(Ye||r===null||da(r,r.return)),s&64&&wa&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?s:r.concat(s))));break;case 26:var n=ta;if(bt(a,e),yt(e),s&512&&(Ye||r===null||da(r,r.return)),s&4){var l=r!==null?r.memoizedState:null;if(s=e.memoizedState,r===null)if(s===null)if(e.stateNode===null){e:{s=e.type,r=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":l=n.getElementsByTagName("title")[0],(!l||l[Zn]||l[nt]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=n.createElement(s),n.head.insertBefore(l,n.querySelector("head > title"))),it(l,s,r),l[nt]=e,tt(l),s=l;break e;case"link":var o=Jp("link","href",n).get(s+(r.href||""));if(o){for(var i=0;i<o.length;i++)if(l=o[i],l.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&l.getAttribute("rel")===(r.rel==null?null:r.rel)&&l.getAttribute("title")===(r.title==null?null:r.title)&&l.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){o.splice(i,1);break t}}l=n.createElement(s),it(l,s,r),n.head.appendChild(l);break;case"meta":if(o=Jp("meta","content",n).get(s+(r.content||""))){for(i=0;i<o.length;i++)if(l=o[i],l.getAttribute("content")===(r.content==null?null:""+r.content)&&l.getAttribute("name")===(r.name==null?null:r.name)&&l.getAttribute("property")===(r.property==null?null:r.property)&&l.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&l.getAttribute("charset")===(r.charSet==null?null:r.charSet)){o.splice(i,1);break t}}l=n.createElement(s),it(l,s,r),n.head.appendChild(l);break;default:throw Error(ee(468,s))}l[nt]=e,tt(l),s=l}e.stateNode=s}else Kp(n,e.type,e.stateNode);else e.stateNode=Zp(n,s,e.memoizedProps);else l!==s?(l===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):l.count--,s===null?Kp(n,e.type,e.stateNode):Zp(n,s,e.memoizedProps)):s===null&&e.stateNode!==null&&_i(e,e.memoizedProps,r.memoizedProps)}break;case 27:bt(a,e),yt(e),s&512&&(Ye||r===null||da(r,r.return)),r!==null&&s&4&&_i(e,e.memoizedProps,r.memoizedProps);break;case 5:if(bt(a,e),yt(e),s&512&&(Ye||r===null||da(r,r.return)),e.flags&32){n=e.stateNode;try{Fs(n,"")}catch(v){ke(e,e.return,v)}}s&4&&e.stateNode!=null&&(n=e.memoizedProps,_i(e,n,r!==null?r.memoizedProps:n)),s&1024&&(Ii=!0);break;case 6:if(bt(a,e),yt(e),s&4){if(e.stateNode===null)throw Error(ee(162));s=e.memoizedProps,r=e.stateNode;try{r.nodeValue=s}catch(v){ke(e,e.return,v)}}break;case 3:if(Yl=null,n=ta,ta=ko(a.containerInfo),bt(a,e),ta=n,yt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{_s(a.containerInfo)}catch(v){ke(e,e.return,v)}Ii&&(Ii=!1,tg(e));break;case 4:s=ta,ta=ko(e.stateNode.containerInfo),bt(a,e),yt(e),ta=s;break;case 12:bt(a,e),yt(e);break;case 31:bt(a,e),yt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Sl(e,s)));break;case 13:bt(a,e),yt(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Xo=Dt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Sl(e,s)));break;case 22:n=e.memoizedState!==null;var c=r!==null&&r.memoizedState!==null,u=wa,d=Ye;if(wa=u||n,Ye=d||c,bt(a,e),Ye=d,wa=u,yt(e),s&8192)e:for(a=e.stateNode,a._visibility=n?a._visibility&-2:a._visibility|1,n&&(r===null||c||wa||Ye||Tr(e)),r=null,a=e;;){if(a.tag===5||a.tag===26){if(r===null){c=r=a;try{if(l=c.stateNode,n)o=l.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{i=c.stateNode;var x=c.memoizedProps.style,m=x!=null&&x.hasOwnProperty("display")?x.display:null;i.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(v){ke(c,c.return,v)}}}else if(a.tag===6){if(r===null){c=a;try{c.stateNode.nodeValue=n?"":c.memoizedProps}catch(v){ke(c,c.return,v)}}}else if(a.tag===18){if(r===null){c=a;try{var b=c.stateNode;n?Yp(b,!0):Yp(c.stateNode,!1)}catch(v){ke(c,c.return,v)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}s&4&&(s=e.updateQueue,s!==null&&(r=s.retryQueue,r!==null&&(s.retryQueue=null,Sl(e,r))));break;case 19:bt(a,e),yt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Sl(e,s)));break;case 30:break;case 21:break;default:bt(a,e),yt(e)}}function yt(e){var a=e.flags;if(a&2){try{for(var r,s=e.return;s!==null;){if(Gf(s)){r=s;break}s=s.return}if(r==null)throw Error(ee(160));switch(r.tag){case 27:var n=r.stateNode,l=Mi(e);bo(e,l,n);break;case 5:var o=r.stateNode;r.flags&32&&(Fs(o,""),r.flags&=-33);var i=Mi(e);bo(e,i,o);break;case 3:case 4:var c=r.stateNode.containerInfo,u=Mi(e);Lc(e,u,c);break;default:throw Error(ee(161))}}catch(d){ke(e,e.return,d)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function tg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;tg(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function va(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Xf(e,a.alternate,a),a=a.sibling}function Tr(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:dr(4,a,a.return),Tr(a);break;case 1:da(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&qf(a,a.return,r),Tr(a);break;case 27:Fn(a.stateNode);case 26:case 5:da(a,a.return),Tr(a);break;case 22:a.memoizedState===null&&Tr(a);break;case 30:Tr(a);break;default:Tr(a)}e=e.sibling}}function Na(e,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var s=a.alternate,n=e,l=a,o=l.flags;switch(l.tag){case 0:case 11:case 15:Na(n,l,r),tl(4,l);break;case 1:if(Na(n,l,r),s=l,n=s.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(u){ke(s,s.return,u)}if(s=l,n=s.updateQueue,n!==null){var i=s.stateNode;try{var c=n.shared.hiddenCallbacks;if(c!==null)for(n.shared.hiddenCallbacks=null,n=0;n<c.length;n++)Zm(c[n],i)}catch(u){ke(s,s.return,u)}}r&&o&64&&Wf(l),Sn(l,l.return);break;case 27:Vf(l);case 26:case 5:Na(n,l,r),r&&s===null&&o&4&&Yf(l),Sn(l,l.return);break;case 12:Na(n,l,r);break;case 31:Na(n,l,r),r&&o&4&&Jf(n,l);break;case 13:Na(n,l,r),r&&o&4&&Kf(n,l);break;case 22:l.memoizedState===null&&Na(n,l,r),Sn(l,l.return);break;case 30:break;default:Na(n,l,r)}a=a.sibling}}function lu(e,a){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Kn(r))}function ou(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Kn(e))}function ea(e,a,r,s){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ag(e,a,r,s),a=a.sibling}function ag(e,a,r,s){var n=a.flags;switch(a.tag){case 0:case 11:case 15:ea(e,a,r,s),n&2048&&tl(9,a);break;case 1:ea(e,a,r,s);break;case 3:ea(e,a,r,s),n&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Kn(e)));break;case 12:if(n&2048){ea(e,a,r,s),e=a.stateNode;try{var l=a.memoizedProps,o=l.id,i=l.onPostCommit;typeof i=="function"&&i(o,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){ke(a,a.return,c)}}else ea(e,a,r,s);break;case 31:ea(e,a,r,s);break;case 13:ea(e,a,r,s);break;case 23:break;case 22:l=a.stateNode,o=a.alternate,a.memoizedState!==null?l._visibility&2?ea(e,a,r,s):wn(e,a):l._visibility&2?ea(e,a,r,s):(l._visibility|=2,ss(e,a,r,s,(a.subtreeFlags&10256)!==0||!1)),n&2048&&lu(o,a);break;case 24:ea(e,a,r,s),n&2048&&ou(a.alternate,a);break;default:ea(e,a,r,s)}}function ss(e,a,r,s,n){for(n=n&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var l=e,o=a,i=r,c=s,u=o.flags;switch(o.tag){case 0:case 11:case 15:ss(l,o,i,c,n),tl(8,o);break;case 23:break;case 22:var d=o.stateNode;o.memoizedState!==null?d._visibility&2?ss(l,o,i,c,n):wn(l,o):(d._visibility|=2,ss(l,o,i,c,n)),n&&u&2048&&lu(o.alternate,o);break;case 24:ss(l,o,i,c,n),n&&u&2048&&ou(o.alternate,o);break;default:ss(l,o,i,c,n)}a=a.sibling}}function wn(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=e,s=a,n=s.flags;switch(s.tag){case 22:wn(r,s),n&2048&&lu(s.alternate,s);break;case 24:wn(r,s),n&2048&&ou(s.alternate,s);break;default:wn(r,s)}a=a.sibling}}var xn=8192;function es(e,a,r){if(e.subtreeFlags&xn)for(e=e.child;e!==null;)rg(e,a,r),e=e.sibling}function rg(e,a,r){switch(e.tag){case 26:es(e,a,r),e.flags&xn&&e.memoizedState!==null&&A0(r,ta,e.memoizedState,e.memoizedProps);break;case 5:es(e,a,r);break;case 3:case 4:var s=ta;ta=ko(e.stateNode.containerInfo),es(e,a,r),ta=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=xn,xn=16777216,es(e,a,r),xn=s):es(e,a,r));break;default:es(e,a,r)}}function sg(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function rn(e){var a=e.deletions;if(e.flags&16){if(a!==null)for(var r=0;r<a.length;r++){var s=a[r];et=s,lg(s,e)}sg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ng(e),e=e.sibling}function ng(e){switch(e.tag){case 0:case 11:case 15:rn(e),e.flags&2048&&dr(9,e,e.return);break;case 3:rn(e);break;case 12:rn(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,Wl(e)):rn(e);break;default:rn(e)}}function Wl(e){var a=e.deletions;if(e.flags&16){if(a!==null)for(var r=0;r<a.length;r++){var s=a[r];et=s,lg(s,e)}sg(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:dr(8,a,a.return),Wl(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,Wl(a));break;default:Wl(a)}e=e.sibling}}function lg(e,a){for(;et!==null;){var r=et;switch(r.tag){case 0:case 11:case 15:dr(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var s=r.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Kn(r.memoizedState.cache)}if(s=r.child,s!==null)s.return=r,et=s;else e:for(r=e;et!==null;){s=et;var n=s.sibling,l=s.return;if(Qf(s),s===r){et=null;break e}if(n!==null){n.return=l,et=n;break e}et=l}}}var qy={getCacheForType:function(e){var a=ot(Ge),r=a.data.get(e);return r===void 0&&(r=e(),a.data.set(e,r)),r},cacheSignal:function(){return ot(Ge).controller.signal}},Yy=typeof WeakMap=="function"?WeakMap:Map,Ne=0,Ae=null,ge=null,be=0,Ce=0,Et=null,Va=!1,qs=!1,iu=!1,_a=0,Ue=0,ur=0,Dr=0,cu=0,Bt=0,Rs=0,Cn=null,jt=null,Uc=!1,Xo=0,og=0,yo=1/0,vo=null,ar=null,Qe=0,rr=null,zs=null,Aa=0,Oc=0,$c=null,ig=null,kn=0,Pc=null;function It(){return Ne&2&&be!==0?be&-be:ie.T!==null?uu():gm()}function cg(){if(Bt===0)if(!(be&536870912)||ye){var e=fl;fl<<=1,!(fl&3932160)&&(fl=262144),Bt=e}else Bt=536870912;return e=Ut.current,e!==null&&(e.flags|=32),Bt}function Nt(e,a,r){(e===Ae&&(Ce===2||Ce===9)||e.cancelPendingCommit!==null)&&(Bs(e,0),Xa(e,be,Bt,!1)),Qn(e,r),(!(Ne&2)||e!==Ae)&&(e===Ae&&(!(Ne&2)&&(Dr|=r),Ue===4&&Xa(e,be,Bt,!1)),fa(e))}function dg(e,a,r){if(Ne&6)throw Error(ee(327));var s=!r&&(a&127)===0&&(a&e.expiredLanes)===0||Xn(e,a),n=s?Xy(e,a):Li(e,a,!0),l=s;do{if(n===0){qs&&!s&&Xa(e,a,0,!1);break}else{if(r=e.current.alternate,l&&!Gy(r)){n=Li(e,a,!1),l=!1;continue}if(n===2){if(l=a,e.errorRecoveryDisabledLanes&l)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){a=o;e:{var i=e;n=Cn;var c=i.current.memoizedState.isDehydrated;if(c&&(Bs(i,o).flags|=256),o=Li(i,o,!1),o!==2){if(iu&&!c){i.errorRecoveryDisabledLanes|=l,Dr|=l,n=4;break e}l=jt,jt=n,l!==null&&(jt===null?jt=l:jt.push.apply(jt,l))}n=o}if(l=!1,n!==2)continue}}if(n===1){Bs(e,0),Xa(e,a,0,!0);break}e:{switch(s=e,l=n,l){case 0:case 1:throw Error(ee(345));case 4:if((a&4194048)!==a)break;case 6:Xa(s,a,Bt,!Va);break e;case 2:jt=null;break;case 3:case 5:break;default:throw Error(ee(329))}if((a&62914560)===a&&(n=Xo+300-Dt(),10<n)){if(Xa(s,a,Bt,!Va),Lo(s,0,!0)!==0)break e;Aa=a,s.timeoutHandle=Ag(Bp.bind(null,s,r,jt,vo,Uc,a,Bt,Dr,Rs,Va,l,"Throttled",-0,0),n);break e}Bp(s,r,jt,vo,Uc,a,Bt,Dr,Rs,Va,l,null,-0,0)}}break}while(!0);fa(e)}function Bp(e,a,r,s,n,l,o,i,c,u,d,x,m,b){if(e.timeoutHandle=-1,x=a.subtreeFlags,x&8192||(x&16785408)===16785408){x={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ka},rg(a,l,x);var v=(l&62914560)===l?Xo-Dt():(l&4194048)===l?og-Dt():0;if(v=R0(x,v),v!==null){Aa=l,e.cancelPendingCommit=v(_p.bind(null,e,a,l,r,s,n,o,i,c,d,x,null,m,b)),Xa(e,l,o,!u);return}}_p(e,a,l,r,s,n,o,i,c)}function Gy(e){for(var a=e;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var s=0;s<r.length;s++){var n=r[s],l=n.getSnapshot;n=n.value;try{if(!Lt(l(),n))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Xa(e,a,r,s){a&=~cu,a&=~Dr,e.suspendedLanes|=a,e.pingedLanes&=~a,s&&(e.warmLanes|=a),s=e.expirationTimes;for(var n=a;0<n;){var l=31-Mt(n),o=1<<l;s[l]=-1,n&=~o}r!==0&&xm(e,r,a)}function Qo(){return Ne&6?!0:(al(0),!1)}function du(){if(ge!==null){if(Ce===0)var e=ge.return;else e=ge,Fa=Vr=null,Xd(e),Ns=null,_n=0,e=ge;for(;e!==null;)Hf(e.alternate,e),e=e.return;ge=null}}function Bs(e,a){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,x0(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Aa=0,du(),Ae=e,ge=r=Ta(e.current,null),be=a,Ce=0,Et=null,Va=!1,qs=Xn(e,a),iu=!1,Rs=Bt=cu=Dr=ur=Ue=0,jt=Cn=null,Uc=!1,a&8&&(a|=a&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=a;0<s;){var n=31-Mt(s),l=1<<n;a|=e[n],s&=~l}return _a=a,Po(),r}function ug(e,a){xe=null,ie.H=In,a===Ws||a===Wo?(a=up(),Ce=3):a===Pd?(a=up(),Ce=4):Ce=a===su?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Et=a,ge===null&&(Ue=1,go(e,Vt(a,e.current)))}function pg(){var e=Ut.current;return e===null?!0:(be&4194048)===be?Qt===null:(be&62914560)===be||be&536870912?e===Qt:!1}function xg(){var e=ie.H;return ie.H=In,e===null?In:e}function mg(){var e=ie.A;return ie.A=qy,e}function jo(){Ue=4,Va||(be&4194048)!==be&&Ut.current!==null||(qs=!0),!(ur&134217727)&&!(Dr&134217727)||Ae===null||Xa(Ae,be,Bt,!1)}function Li(e,a,r){var s=Ne;Ne|=2;var n=xg(),l=mg();(Ae!==e||be!==a)&&(vo=null,Bs(e,a)),a=!1;var o=Ue;e:do try{if(Ce!==0&&ge!==null){var i=ge,c=Et;switch(Ce){case 8:du(),o=6;break e;case 3:case 2:case 9:case 6:Ut.current===null&&(a=!0);var u=Ce;if(Ce=0,Et=null,hs(e,i,c,u),r&&qs){o=0;break e}break;default:u=Ce,Ce=0,Et=null,hs(e,i,c,u)}}Vy(),o=Ue;break}catch(d){ug(e,d)}while(!0);return a&&e.shellSuspendCounter++,Fa=Vr=null,Ne=s,ie.H=n,ie.A=l,ge===null&&(Ae=null,be=0,Po()),o}function Vy(){for(;ge!==null;)fg(ge)}function Xy(e,a){var r=Ne;Ne|=2;var s=xg(),n=mg();Ae!==e||be!==a?(vo=null,yo=Dt()+500,Bs(e,a)):qs=Xn(e,a);e:do try{if(Ce!==0&&ge!==null){a=ge;var l=Et;t:switch(Ce){case 1:Ce=0,Et=null,hs(e,a,l,1);break;case 2:case 9:if(dp(l)){Ce=0,Et=null,Dp(a);break}a=function(){Ce!==2&&Ce!==9||Ae!==e||(Ce=7),fa(e)},l.then(a,a);break e;case 3:Ce=7;break e;case 4:Ce=5;break e;case 7:dp(l)?(Ce=0,Et=null,Dp(a)):(Ce=0,Et=null,hs(e,a,l,7));break;case 5:var o=null;switch(ge.tag){case 26:o=ge.memoizedState;case 5:case 27:var i=ge;if(o?_g(o):i.stateNode.complete){Ce=0,Et=null;var c=i.sibling;if(c!==null)ge=c;else{var u=i.return;u!==null?(ge=u,Zo(u)):ge=null}break t}}Ce=0,Et=null,hs(e,a,l,5);break;case 6:Ce=0,Et=null,hs(e,a,l,6);break;case 8:du(),Ue=6;break e;default:throw Error(ee(462))}}Qy();break}catch(d){ug(e,d)}while(!0);return Fa=Vr=null,ie.H=s,ie.A=n,Ne=r,ge!==null?0:(Ae=null,be=0,Po(),Ue)}function Qy(){for(;ge!==null&&!yb();)fg(ge)}function fg(e){var a=Pf(e.alternate,e,_a);e.memoizedProps=e.pendingProps,a===null?Zo(e):ge=a}function Dp(e){var a=e,r=a.alternate;switch(a.tag){case 15:case 0:a=Fp(r,a,a.pendingProps,a.type,void 0,be);break;case 11:a=Fp(r,a,a.pendingProps,a.type.render,a.ref,be);break;case 5:Xd(a);default:Hf(r,a),a=ge=Pm(a,_a),a=Pf(r,a,_a)}e.memoizedProps=e.pendingProps,a===null?Zo(e):ge=a}function hs(e,a,r,s){Fa=Vr=null,Xd(a),Ns=null,_n=0;var n=a.return;try{if(Ly(e,n,a,r,be)){Ue=1,go(e,Vt(r,e.current)),ge=null;return}}catch(l){if(n!==null)throw ge=n,l;Ue=1,go(e,Vt(r,e.current)),ge=null;return}a.flags&32768?(ye||s===1?e=!0:qs||be&536870912?e=!1:(Va=e=!0,(s===2||s===9||s===3||s===6)&&(s=Ut.current,s!==null&&s.tag===13&&(s.flags|=16384))),gg(a,e)):Zo(a)}function Zo(e){var a=e;do{if(a.flags&32768){gg(a,Va);return}e=a.return;var r=$y(a.alternate,a,_a);if(r!==null){ge=r;return}if(a=a.sibling,a!==null){ge=a;return}ge=a=e}while(a!==null);Ue===0&&(Ue=5)}function gg(e,a){do{var r=Py(e.alternate,e);if(r!==null){r.flags&=32767,ge=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(e=e.sibling,e!==null)){ge=e;return}ge=e=r}while(e!==null);Ue=6,ge=null}function _p(e,a,r,s,n,l,o,i,c){e.cancelPendingCommit=null;do Jo();while(Qe!==0);if(Ne&6)throw Error(ee(327));if(a!==null){if(a===e.current)throw Error(ee(177));if(l=a.lanes|a.childLanes,l|=_d,Eb(e,r,l,o,i,c),e===Ae&&(ge=Ae=null,be=0),zs=a,rr=e,Aa=r,Oc=l,$c=n,ig=s,a.subtreeFlags&10256||a.flags&10256?(e.callbackNode=null,e.callbackPriority=0,e0(so,function(){return jg(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(a.flags&13878)!==0,a.subtreeFlags&13878||s){s=ie.T,ie.T=null,n=Se.p,Se.p=2,o=Ne,Ne|=4;try{Hy(e,a,r)}finally{Ne=o,Se.p=n,ie.T=s}}Qe=1,hg(),bg(),yg()}}function hg(){if(Qe===1){Qe=0;var e=rr,a=zs,r=(a.flags&13878)!==0;if(a.subtreeFlags&13878||r){r=ie.T,ie.T=null;var s=Se.p;Se.p=2;var n=Ne;Ne|=4;try{eg(a,e);var l=Yc,o=Dm(e.containerInfo),i=l.focusedElem,c=l.selectionRange;if(o!==i&&i&&i.ownerDocument&&Bm(i.ownerDocument.documentElement,i)){if(c!==null&&Dd(i)){var u=c.start,d=c.end;if(d===void 0&&(d=u),"selectionStart"in i)i.selectionStart=u,i.selectionEnd=Math.min(d,i.value.length);else{var x=i.ownerDocument||document,m=x&&x.defaultView||window;if(m.getSelection){var b=m.getSelection(),v=i.textContent.length,S=Math.min(c.start,v),h=c.end===void 0?S:Math.min(c.end,v);!b.extend&&S>h&&(o=h,h=S,S=o);var y=rp(i,S),g=rp(i,h);if(y&&g&&(b.rangeCount!==1||b.anchorNode!==y.node||b.anchorOffset!==y.offset||b.focusNode!==g.node||b.focusOffset!==g.offset)){var f=x.createRange();f.setStart(y.node,y.offset),b.removeAllRanges(),S>h?(b.addRange(f),b.extend(g.node,g.offset)):(f.setEnd(g.node,g.offset),b.addRange(f))}}}}for(x=[],b=i;b=b.parentNode;)b.nodeType===1&&x.push({element:b,left:b.scrollLeft,top:b.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<x.length;i++){var j=x[i];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}Eo=!!qc,Yc=qc=null}finally{Ne=n,Se.p=s,ie.T=r}}e.current=a,Qe=2}}function bg(){if(Qe===2){Qe=0;var e=rr,a=zs,r=(a.flags&8772)!==0;if(a.subtreeFlags&8772||r){r=ie.T,ie.T=null;var s=Se.p;Se.p=2;var n=Ne;Ne|=4;try{Xf(e,a.alternate,a)}finally{Ne=n,Se.p=s,ie.T=r}}Qe=3}}function yg(){if(Qe===4||Qe===3){Qe=0,vb();var e=rr,a=zs,r=Aa,s=ig;a.subtreeFlags&10256||a.flags&10256?Qe=5:(Qe=0,zs=rr=null,vg(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(ar=null),Fd(r),a=a.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Vn,a,void 0,(a.current.flags&128)===128)}catch{}if(s!==null){a=ie.T,n=Se.p,Se.p=2,ie.T=null;try{for(var l=e.onRecoverableError,o=0;o<s.length;o++){var i=s[o];l(i.value,{componentStack:i.stack})}}finally{ie.T=a,Se.p=n}}Aa&3&&Jo(),fa(e),n=e.pendingLanes,r&261930&&n&42?e===Pc?kn++:(kn=0,Pc=e):kn=0,al(0)}}function vg(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Kn(a)))}function Jo(){return hg(),bg(),yg(),jg()}function jg(){if(Qe!==5)return!1;var e=rr,a=Oc;Oc=0;var r=Fd(Aa),s=ie.T,n=Se.p;try{Se.p=32>r?32:r,ie.T=null,r=$c,$c=null;var l=rr,o=Aa;if(Qe=0,zs=rr=null,Aa=0,Ne&6)throw Error(ee(331));var i=Ne;if(Ne|=4,ng(l.current),ag(l,l.current,o,r),Ne=i,al(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Vn,l)}catch{}return!0}finally{Se.p=n,ie.T=s,vg(e,a)}}function Mp(e,a,r){a=Vt(r,a),a=_c(e.stateNode,a,2),e=tr(e,a,2),e!==null&&(Qn(e,2),fa(e))}function ke(e,a,r){if(e.tag===3)Mp(e,e,r);else for(;a!==null;){if(a.tag===3){Mp(a,e,r);break}else if(a.tag===1){var s=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ar===null||!ar.has(s))){e=Vt(r,e),r=Mf(2),s=tr(a,r,2),s!==null&&(If(r,s,a,e),Qn(s,2),fa(s));break}}a=a.return}}function Ui(e,a,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Yy;var n=new Set;s.set(a,n)}else n=s.get(a),n===void 0&&(n=new Set,s.set(a,n));n.has(r)||(iu=!0,n.add(r),e=Zy.bind(null,e,a,r),a.then(e,e))}function Zy(e,a,r){var s=e.pingCache;s!==null&&s.delete(a),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Ae===e&&(be&r)===r&&(Ue===4||Ue===3&&(be&62914560)===be&&300>Dt()-Xo?!(Ne&2)&&Bs(e,0):cu|=r,Rs===be&&(Rs=0)),fa(e)}function Ng(e,a){a===0&&(a=pm()),e=Gr(e,a),e!==null&&(Qn(e,a),fa(e))}function Jy(e){var a=e.memoizedState,r=0;a!==null&&(r=a.retryLane),Ng(e,r)}function Ky(e,a){var r=0;switch(e.tag){case 31:case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(ee(314))}s!==null&&s.delete(a),Ng(e,r)}function e0(e,a){return Cd(e,a)}var No=null,ns=null,Hc=!1,So=!1,Oi=!1,Qa=0;function fa(e){e!==ns&&e.next===null&&(ns===null?No=ns=e:ns=ns.next=e),So=!0,Hc||(Hc=!0,a0())}function al(e,a){if(!Oi&&So){Oi=!0;do for(var r=!1,s=No;s!==null;){if(e!==0){var n=s.pendingLanes;if(n===0)var l=0;else{var o=s.suspendedLanes,i=s.pingedLanes;l=(1<<31-Mt(42|e)+1)-1,l&=n&~(o&~i),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(r=!0,Ip(s,l))}else l=be,l=Lo(s,s===Ae?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(l&3)||Xn(s,l)||(r=!0,Ip(s,l));s=s.next}while(r);Oi=!1}}function t0(){Sg()}function Sg(){So=Hc=!1;var e=0;Qa!==0&&p0()&&(e=Qa);for(var a=Dt(),r=null,s=No;s!==null;){var n=s.next,l=wg(s,a);l===0?(s.next=null,r===null?No=n:r.next=n,n===null&&(ns=r)):(r=s,(e!==0||l&3)&&(So=!0)),s=n}Qe!==0&&Qe!==5||al(e),Qa!==0&&(Qa=0)}function wg(e,a){for(var r=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var o=31-Mt(l),i=1<<o,c=n[o];c===-1?(!(i&r)||i&s)&&(n[o]=Tb(i,a)):c<=a&&(e.expiredLanes|=i),l&=~i}if(a=Ae,r=be,r=Lo(e,e===a?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,r===0||e===a&&(Ce===2||Ce===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&mi(s),e.callbackNode=null,e.callbackPriority=0;if(!(r&3)||Xn(e,r)){if(a=r&-r,a===e.callbackPriority)return a;switch(s!==null&&mi(s),Fd(r)){case 2:case 8:r=dm;break;case 32:r=so;break;case 268435456:r=um;break;default:r=so}return s=Cg.bind(null,e),r=Cd(r,s),e.callbackPriority=a,e.callbackNode=r,a}return s!==null&&s!==null&&mi(s),e.callbackPriority=2,e.callbackNode=null,2}function Cg(e,a){if(Qe!==0&&Qe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Jo()&&e.callbackNode!==r)return null;var s=be;return s=Lo(e,e===Ae?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(dg(e,s,a),wg(e,Dt()),e.callbackNode!=null&&e.callbackNode===r?Cg.bind(null,e):null)}function Ip(e,a){if(Jo())return null;dg(e,a,!0)}function a0(){m0(function(){Ne&6?Cd(cm,t0):Sg()})}function uu(){if(Qa===0){var e=Ts;e===0&&(e=ml,ml<<=1,!(ml&261888)&&(ml=256)),Qa=e}return Qa}function Lp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:_l(""+e)}function Up(e,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,e.id&&r.setAttribute("form",e.id),a.parentNode.insertBefore(r,a),e=new FormData(e),r.parentNode.removeChild(r),e}function r0(e,a,r,s,n){if(a==="submit"&&r&&r.stateNode===n){var l=Lp((n[Ct]||null).action),o=s.submitter;o&&(a=(a=o[Ct]||null)?Lp(a.formAction):o.getAttribute("formAction"),a!==null&&(l=a,o=null));var i=new Uo("action","action",null,s,n);e.push({event:i,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Qa!==0){var c=o?Up(n,o):new FormData(n);Bc(r,{pending:!0,data:c,method:n.method,action:l},null,c)}}else typeof l=="function"&&(i.preventDefault(),c=o?Up(n,o):new FormData(n),Bc(r,{pending:!0,data:c,method:n.method,action:l},l,c))},currentTarget:n}]})}}for(var $i=0;$i<jc.length;$i++){var Pi=jc[$i],s0=Pi.toLowerCase(),n0=Pi[0].toUpperCase()+Pi.slice(1);sa(s0,"on"+n0)}sa(Mm,"onAnimationEnd");sa(Im,"onAnimationIteration");sa(Lm,"onAnimationStart");sa("dblclick","onDoubleClick");sa("focusin","onFocus");sa("focusout","onBlur");sa(jy,"onTransitionRun");sa(Ny,"onTransitionStart");sa(Sy,"onTransitionCancel");sa(Um,"onTransitionEnd");ks("onMouseEnter",["mouseout","mouseover"]);ks("onMouseLeave",["mouseout","mouseover"]);ks("onPointerEnter",["pointerout","pointerover"]);ks("onPointerLeave",["pointerout","pointerover"]);Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ln));function kg(e,a){a=(a&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],n=s.event;s=s.listeners;e:{var l=void 0;if(a)for(var o=s.length-1;0<=o;o--){var i=s[o],c=i.instance,u=i.currentTarget;if(i=i.listener,c!==l&&n.isPropagationStopped())break e;l=i,n.currentTarget=u;try{l(n)}catch(d){lo(d)}n.currentTarget=null,l=c}else for(o=0;o<s.length;o++){if(i=s[o],c=i.instance,u=i.currentTarget,i=i.listener,c!==l&&n.isPropagationStopped())break e;l=i,n.currentTarget=u;try{l(n)}catch(d){lo(d)}n.currentTarget=null,l=c}}}}function fe(e,a){var r=a[xc];r===void 0&&(r=a[xc]=new Set);var s=e+"__bubble";r.has(s)||(Fg(a,e,2,!1),r.add(s))}function Hi(e,a,r){var s=0;a&&(s|=4),Fg(r,e,s,a)}var wl="_reactListening"+Math.random().toString(36).slice(2);function pu(e){if(!e[wl]){e[wl]=!0,hm.forEach(function(r){r!=="selectionchange"&&(l0.has(r)||Hi(r,!1,e),Hi(r,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[wl]||(a[wl]=!0,Hi("selectionchange",!1,a))}}function Fg(e,a,r,s){switch(Og(a)){case 2:var n=D0;break;case 8:n=_0;break;default:n=gu}r=n.bind(null,a,r,e),n=void 0,!bc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(a,r,{capture:!0,passive:n}):e.addEventListener(a,r,!0):n!==void 0?e.addEventListener(a,r,{passive:n}):e.addEventListener(a,r,!1)}function Wi(e,a,r,s,n){var l=s;if(!(a&1)&&!(a&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var i=s.stateNode.containerInfo;if(i===n)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===n)return;o=o.return}for(;i!==null;){if(o=is(i),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){s=l=o;continue e}i=i.parentNode}}s=s.return}Cm(function(){var u=l,d=Ad(r),x=[];e:{var m=Om.get(e);if(m!==void 0){var b=Uo,v=e;switch(e){case"keypress":if(Il(r)===0)break e;case"keydown":case"keyup":b=Kb;break;case"focusin":v="focus",b=yi;break;case"focusout":v="blur",b=yi;break;case"beforeblur":case"afterblur":b=yi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Gu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=$b;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=ay;break;case Mm:case Im:case Lm:b=Wb;break;case Um:b=sy;break;case"scroll":case"scrollend":b=Ub;break;case"wheel":b=ly;break;case"copy":case"cut":case"paste":b=Yb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Xu;break;case"toggle":case"beforetoggle":b=iy}var S=(a&4)!==0,h=!S&&(e==="scroll"||e==="scrollend"),y=S?m!==null?m+"Capture":null:m;S=[];for(var g=u,f;g!==null;){var j=g;if(f=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||f===null||y===null||(j=An(g,y),j!=null&&S.push(Un(g,j,f))),h)break;g=g.return}0<S.length&&(m=new b(m,v,null,r,d),x.push({event:m,listeners:S}))}}if(!(a&7)){e:{if(m=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",m&&r!==hc&&(v=r.relatedTarget||r.fromElement)&&(is(v)||v[$s]))break e;if((b||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,b?(v=r.relatedTarget||r.toElement,b=u,v=v?is(v):null,v!==null&&(h=Gn(v),S=v.tag,v!==h||S!==5&&S!==27&&S!==6)&&(v=null)):(b=null,v=u),b!==v)){if(S=Gu,j="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(S=Xu,j="onPointerLeave",y="onPointerEnter",g="pointer"),h=b==null?m:un(b),f=v==null?m:un(v),m=new S(j,g+"leave",b,r,d),m.target=h,m.relatedTarget=f,j=null,is(d)===u&&(S=new S(y,g+"enter",v,r,d),S.target=f,S.relatedTarget=h,j=S),h=j,b&&v)t:{for(S=o0,y=b,g=v,f=0,j=y;j;j=S(j))f++;j=0;for(var C=g;C;C=S(C))j++;for(;0<f-j;)y=S(y),f--;for(;0<j-f;)g=S(g),j--;for(;f--;){if(y===g||g!==null&&y===g.alternate){S=y;break t}y=S(y),g=S(g)}S=null}else S=null;b!==null&&Op(x,m,b,S,!1),v!==null&&h!==null&&Op(x,h,v,S,!0)}}e:{if(m=u?un(u):window,b=m.nodeName&&m.nodeName.toLowerCase(),b==="select"||b==="input"&&m.type==="file")var E=Ku;else if(Ju(m))if(Rm)E=by;else{E=gy;var A=fy}else b=m.nodeName,!b||b.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&Ed(u.elementType)&&(E=Ku):E=hy;if(E&&(E=E(e,u))){Am(x,E,r,d);break e}A&&A(e,m,u),e==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&gc(m,"number",m.value)}switch(A=u?un(u):window,e){case"focusin":(Ju(A)||A.contentEditable==="true")&&(us=A,yc=u,hn=null);break;case"focusout":hn=yc=us=null;break;case"mousedown":vc=!0;break;case"contextmenu":case"mouseup":case"dragend":vc=!1,sp(x,r,d);break;case"selectionchange":if(vy)break;case"keydown":case"keyup":sp(x,r,d)}var M;if(Bd)e:{switch(e){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else ds?Tm(e,r)&&(B="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(B="onCompositionStart");B&&(Fm&&r.locale!=="ko"&&(ds||B!=="onCompositionStart"?B==="onCompositionEnd"&&ds&&(M=km()):(Ga=d,Rd="value"in Ga?Ga.value:Ga.textContent,ds=!0)),A=wo(u,B),0<A.length&&(B=new Vu(B,e,null,r,d),x.push({event:B,listeners:A}),M?B.data=M:(M=Em(r),M!==null&&(B.data=M)))),(M=dy?uy(e,r):py(e,r))&&(B=wo(u,"onBeforeInput"),0<B.length&&(A=new Vu("onBeforeInput","beforeinput",null,r,d),x.push({event:A,listeners:B}),A.data=M)),r0(x,e,u,r,d)}kg(x,a)})}function Un(e,a,r){return{instance:e,listener:a,currentTarget:r}}function wo(e,a){for(var r=a+"Capture",s=[];e!==null;){var n=e,l=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||l===null||(n=An(e,r),n!=null&&s.unshift(Un(e,n,l)),n=An(e,a),n!=null&&s.push(Un(e,n,l))),e.tag===3)return s;e=e.return}return[]}function o0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Op(e,a,r,s,n){for(var l=a._reactName,o=[];r!==null&&r!==s;){var i=r,c=i.alternate,u=i.stateNode;if(i=i.tag,c!==null&&c===s)break;i!==5&&i!==26&&i!==27||u===null||(c=u,n?(u=An(r,l),u!=null&&o.unshift(Un(r,u,c))):n||(u=An(r,l),u!=null&&o.push(Un(r,u,c)))),r=r.return}o.length!==0&&e.push({event:a,listeners:o})}var i0=/\r\n?/g,c0=/\u0000|\uFFFD/g;function $p(e){return(typeof e=="string"?e:""+e).replace(i0,`
`).replace(c0,"")}function Tg(e,a){return a=$p(a),$p(e)===a}function Fe(e,a,r,s,n,l){switch(r){case"children":typeof s=="string"?a==="body"||a==="textarea"&&s===""||Fs(e,s):(typeof s=="number"||typeof s=="bigint")&&a!=="body"&&Fs(e,""+s);break;case"className":hl(e,"class",s);break;case"tabIndex":hl(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":hl(e,r,s);break;case"style":wm(e,s,l);break;case"data":if(a!=="object"){hl(e,"data",s);break}case"src":case"href":if(s===""&&(a!=="a"||r!=="href")){e.removeAttribute(r);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(r);break}s=_l(""+s),e.setAttribute(r,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(r==="formAction"?(a!=="input"&&Fe(e,a,"name",n.name,n,null),Fe(e,a,"formEncType",n.formEncType,n,null),Fe(e,a,"formMethod",n.formMethod,n,null),Fe(e,a,"formTarget",n.formTarget,n,null)):(Fe(e,a,"encType",n.encType,n,null),Fe(e,a,"method",n.method,n,null),Fe(e,a,"target",n.target,n,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(r);break}s=_l(""+s),e.setAttribute(r,s);break;case"onClick":s!=null&&(e.onclick=ka);break;case"onScroll":s!=null&&fe("scroll",e);break;case"onScrollEnd":s!=null&&fe("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(ee(61));if(r=s.__html,r!=null){if(n.children!=null)throw Error(ee(60));e.innerHTML=r}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}r=_l(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(r,""+s):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":s===!0?e.setAttribute(r,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(r,s):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(r,s):e.removeAttribute(r);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(r):e.setAttribute(r,s);break;case"popover":fe("beforetoggle",e),fe("toggle",e),Dl(e,"popover",s);break;case"xlinkActuate":ha(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":ha(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":ha(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":ha(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":ha(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":ha(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":ha(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":ha(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":ha(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Dl(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Ib.get(r)||r,Dl(e,r,s))}}function Wc(e,a,r,s,n,l){switch(r){case"style":wm(e,s,l);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(ee(61));if(r=s.__html,r!=null){if(n.children!=null)throw Error(ee(60));e.innerHTML=r}}break;case"children":typeof s=="string"?Fs(e,s):(typeof s=="number"||typeof s=="bigint")&&Fs(e,""+s);break;case"onScroll":s!=null&&fe("scroll",e);break;case"onScrollEnd":s!=null&&fe("scrollend",e);break;case"onClick":s!=null&&(e.onclick=ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bm.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(n=r.endsWith("Capture"),a=r.slice(2,n?r.length-7:void 0),l=e[Ct]||null,l=l!=null?l[r]:null,typeof l=="function"&&e.removeEventListener(a,l,n),typeof s=="function")){typeof l!="function"&&l!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(a,s,n);break e}r in e?e[r]=s:s===!0?e.setAttribute(r,""):Dl(e,r,s)}}}function it(e,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fe("error",e),fe("load",e);var s=!1,n=!1,l;for(l in r)if(r.hasOwnProperty(l)){var o=r[l];if(o!=null)switch(l){case"src":s=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ee(137,a));default:Fe(e,a,l,o,r,null)}}n&&Fe(e,a,"srcSet",r.srcSet,r,null),s&&Fe(e,a,"src",r.src,r,null);return;case"input":fe("invalid",e);var i=l=o=n=null,c=null,u=null;for(s in r)if(r.hasOwnProperty(s)){var d=r[s];if(d!=null)switch(s){case"name":n=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":l=d;break;case"defaultValue":i=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(ee(137,a));break;default:Fe(e,a,s,d,r,null)}}jm(e,l,i,c,u,o,n,!1);return;case"select":fe("invalid",e),s=o=l=null;for(n in r)if(r.hasOwnProperty(n)&&(i=r[n],i!=null))switch(n){case"value":l=i;break;case"defaultValue":o=i;break;case"multiple":s=i;default:Fe(e,a,n,i,r,null)}a=l,r=o,e.multiple=!!s,a!=null?ys(e,!!s,a,!1):r!=null&&ys(e,!!s,r,!0);return;case"textarea":fe("invalid",e),l=n=s=null;for(o in r)if(r.hasOwnProperty(o)&&(i=r[o],i!=null))switch(o){case"value":s=i;break;case"defaultValue":n=i;break;case"children":l=i;break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(ee(91));break;default:Fe(e,a,o,i,r,null)}Sm(e,s,n,l);return;case"option":for(c in r)if(r.hasOwnProperty(c)&&(s=r[c],s!=null))switch(c){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Fe(e,a,c,s,r,null)}return;case"dialog":fe("beforetoggle",e),fe("toggle",e),fe("cancel",e),fe("close",e);break;case"iframe":case"object":fe("load",e);break;case"video":case"audio":for(s=0;s<Ln.length;s++)fe(Ln[s],e);break;case"image":fe("error",e),fe("load",e);break;case"details":fe("toggle",e);break;case"embed":case"source":case"link":fe("error",e),fe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in r)if(r.hasOwnProperty(u)&&(s=r[u],s!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(ee(137,a));default:Fe(e,a,u,s,r,null)}return;default:if(Ed(a)){for(d in r)r.hasOwnProperty(d)&&(s=r[d],s!==void 0&&Wc(e,a,d,s,r,void 0));return}}for(i in r)r.hasOwnProperty(i)&&(s=r[i],s!=null&&Fe(e,a,i,s,r,null))}function d0(e,a,r,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,l=null,o=null,i=null,c=null,u=null,d=null;for(b in r){var x=r[b];if(r.hasOwnProperty(b)&&x!=null)switch(b){case"checked":break;case"value":break;case"defaultValue":c=x;default:s.hasOwnProperty(b)||Fe(e,a,b,null,s,x)}}for(var m in s){var b=s[m];if(x=r[m],s.hasOwnProperty(m)&&(b!=null||x!=null))switch(m){case"type":l=b;break;case"name":n=b;break;case"checked":u=b;break;case"defaultChecked":d=b;break;case"value":o=b;break;case"defaultValue":i=b;break;case"children":case"dangerouslySetInnerHTML":if(b!=null)throw Error(ee(137,a));break;default:b!==x&&Fe(e,a,m,b,s,x)}}fc(e,o,i,c,u,d,l,n);return;case"select":b=o=i=m=null;for(l in r)if(c=r[l],r.hasOwnProperty(l)&&c!=null)switch(l){case"value":break;case"multiple":b=c;default:s.hasOwnProperty(l)||Fe(e,a,l,null,s,c)}for(n in s)if(l=s[n],c=r[n],s.hasOwnProperty(n)&&(l!=null||c!=null))switch(n){case"value":m=l;break;case"defaultValue":i=l;break;case"multiple":o=l;default:l!==c&&Fe(e,a,n,l,s,c)}a=i,r=o,s=b,m!=null?ys(e,!!r,m,!1):!!s!=!!r&&(a!=null?ys(e,!!r,a,!0):ys(e,!!r,r?[]:"",!1));return;case"textarea":b=m=null;for(i in r)if(n=r[i],r.hasOwnProperty(i)&&n!=null&&!s.hasOwnProperty(i))switch(i){case"value":break;case"children":break;default:Fe(e,a,i,null,s,n)}for(o in s)if(n=s[o],l=r[o],s.hasOwnProperty(o)&&(n!=null||l!=null))switch(o){case"value":m=n;break;case"defaultValue":b=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(ee(91));break;default:n!==l&&Fe(e,a,o,n,s,l)}Nm(e,m,b);return;case"option":for(var v in r)if(m=r[v],r.hasOwnProperty(v)&&m!=null&&!s.hasOwnProperty(v))switch(v){case"selected":e.selected=!1;break;default:Fe(e,a,v,null,s,m)}for(c in s)if(m=s[c],b=r[c],s.hasOwnProperty(c)&&m!==b&&(m!=null||b!=null))switch(c){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Fe(e,a,c,m,s,b)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var S in r)m=r[S],r.hasOwnProperty(S)&&m!=null&&!s.hasOwnProperty(S)&&Fe(e,a,S,null,s,m);for(u in s)if(m=s[u],b=r[u],s.hasOwnProperty(u)&&m!==b&&(m!=null||b!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(ee(137,a));break;default:Fe(e,a,u,m,s,b)}return;default:if(Ed(a)){for(var h in r)m=r[h],r.hasOwnProperty(h)&&m!==void 0&&!s.hasOwnProperty(h)&&Wc(e,a,h,void 0,s,m);for(d in s)m=s[d],b=r[d],!s.hasOwnProperty(d)||m===b||m===void 0&&b===void 0||Wc(e,a,d,m,s,b);return}}for(var y in r)m=r[y],r.hasOwnProperty(y)&&m!=null&&!s.hasOwnProperty(y)&&Fe(e,a,y,null,s,m);for(x in s)m=s[x],b=r[x],!s.hasOwnProperty(x)||m===b||m==null&&b==null||Fe(e,a,x,m,s,b)}function Pp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function u0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,r=performance.getEntriesByType("resource"),s=0;s<r.length;s++){var n=r[s],l=n.transferSize,o=n.initiatorType,i=n.duration;if(l&&i&&Pp(o)){for(o=0,i=n.responseEnd,s+=1;s<r.length;s++){var c=r[s],u=c.startTime;if(u>i)break;var d=c.transferSize,x=c.initiatorType;d&&Pp(x)&&(c=c.responseEnd,o+=d*(c<i?1:(i-u)/(c-u)))}if(--s,a+=8*(l+o)/(n.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var qc=null,Yc=null;function Co(e){return e.nodeType===9?e:e.ownerDocument}function Hp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Eg(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function Gc(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var qi=null;function p0(){var e=window.event;return e&&e.type==="popstate"?e===qi?!1:(qi=e,!0):(qi=null,!1)}var Ag=typeof setTimeout=="function"?setTimeout:void 0,x0=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,m0=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(e){return Wp.resolve(null).then(e).catch(f0)}:Ag;function f0(e){setTimeout(function(){throw e})}function xr(e){return e==="head"}function qp(e,a){var r=a,s=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"||r==="/&"){if(s===0){e.removeChild(n),_s(a);return}s--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")s++;else if(r==="html")Fn(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Fn(r);for(var l=r.firstChild;l;){var o=l.nextSibling,i=l.nodeName;l[Zn]||i==="SCRIPT"||i==="STYLE"||i==="LINK"&&l.rel.toLowerCase()==="stylesheet"||r.removeChild(l),l=o}}else r==="body"&&Fn(e.ownerDocument.body);r=n}while(r);_s(a)}function Yp(e,a){var r=e;e=0;do{var s=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=s}while(r)}function Vc(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Vc(r),Td(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function g0(e,a,r,s){for(;e.nodeType===1;){var n=r;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Zn])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var l=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=Zt(e.nextSibling),e===null)break}return null}function h0(e,a,r){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Zt(e.nextSibling),e===null))return null;return e}function Rg(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Zt(e.nextSibling),e===null))return null;return e}function Xc(e){return e.data==="$?"||e.data==="$~"}function Qc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function b0(e,a){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||r.readyState!=="loading")a();else{var s=function(){a(),r.removeEventListener("DOMContentLoaded",s)};r.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Zt(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var Zc=null;function Gp(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(a===0)return Zt(e.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}e=e.nextSibling}return null}function Vp(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return e;a--}else r!=="/$"&&r!=="/&"||a++}e=e.previousSibling}return null}function zg(e,a,r){switch(a=Co(r),e){case"html":if(e=a.documentElement,!e)throw Error(ee(452));return e;case"head":if(e=a.head,!e)throw Error(ee(453));return e;case"body":if(e=a.body,!e)throw Error(ee(454));return e;default:throw Error(ee(451))}}function Fn(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Td(e)}var Kt=new Map,Xp=new Set;function ko(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ia=Se.d;Se.d={f:y0,r:v0,D:j0,C:N0,L:S0,m:w0,X:k0,S:C0,M:F0};function y0(){var e=Ia.f(),a=Qo();return e||a}function v0(e){var a=Ps(e);a!==null&&a.tag===5&&a.type==="form"?Cf(a):Ia.r(e)}var Ys=typeof document>"u"?null:document;function Bg(e,a,r){var s=Ys;if(s&&typeof a=="string"&&a){var n=Gt(a);n='link[rel="'+e+'"][href="'+n+'"]',typeof r=="string"&&(n+='[crossorigin="'+r+'"]'),Xp.has(n)||(Xp.add(n),e={rel:e,crossOrigin:r,href:a},s.querySelector(n)===null&&(a=s.createElement("link"),it(a,"link",e),tt(a),s.head.appendChild(a)))}}function j0(e){Ia.D(e),Bg("dns-prefetch",e,null)}function N0(e,a){Ia.C(e,a),Bg("preconnect",e,a)}function S0(e,a,r){Ia.L(e,a,r);var s=Ys;if(s&&e&&a){var n='link[rel="preload"][as="'+Gt(a)+'"]';a==="image"&&r&&r.imageSrcSet?(n+='[imagesrcset="'+Gt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(n+='[imagesizes="'+Gt(r.imageSizes)+'"]')):n+='[href="'+Gt(e)+'"]';var l=n;switch(a){case"style":l=Ds(e);break;case"script":l=Gs(e)}Kt.has(l)||(e=Me({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:e,as:a},r),Kt.set(l,e),s.querySelector(n)!==null||a==="style"&&s.querySelector(rl(l))||a==="script"&&s.querySelector(sl(l))||(a=s.createElement("link"),it(a,"link",e),tt(a),s.head.appendChild(a)))}}function w0(e,a){Ia.m(e,a);var r=Ys;if(r&&e){var s=a&&typeof a.as=="string"?a.as:"script",n='link[rel="modulepreload"][as="'+Gt(s)+'"][href="'+Gt(e)+'"]',l=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=Gs(e)}if(!Kt.has(l)&&(e=Me({rel:"modulepreload",href:e},a),Kt.set(l,e),r.querySelector(n)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(sl(l)))return}s=r.createElement("link"),it(s,"link",e),tt(s),r.head.appendChild(s)}}}function C0(e,a,r){Ia.S(e,a,r);var s=Ys;if(s&&e){var n=bs(s).hoistableStyles,l=Ds(e);a=a||"default";var o=n.get(l);if(!o){var i={loading:0,preload:null};if(o=s.querySelector(rl(l)))i.loading=5;else{e=Me({rel:"stylesheet",href:e,"data-precedence":a},r),(r=Kt.get(l))&&xu(e,r);var c=o=s.createElement("link");tt(c),it(c,"link",e),c._p=new Promise(function(u,d){c.onload=u,c.onerror=d}),c.addEventListener("load",function(){i.loading|=1}),c.addEventListener("error",function(){i.loading|=2}),i.loading|=4,ql(o,a,s)}o={type:"stylesheet",instance:o,count:1,state:i},n.set(l,o)}}}function k0(e,a){Ia.X(e,a);var r=Ys;if(r&&e){var s=bs(r).hoistableScripts,n=Gs(e),l=s.get(n);l||(l=r.querySelector(sl(n)),l||(e=Me({src:e,async:!0},a),(a=Kt.get(n))&&mu(e,a),l=r.createElement("script"),tt(l),it(l,"link",e),r.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},s.set(n,l))}}function F0(e,a){Ia.M(e,a);var r=Ys;if(r&&e){var s=bs(r).hoistableScripts,n=Gs(e),l=s.get(n);l||(l=r.querySelector(sl(n)),l||(e=Me({src:e,async:!0,type:"module"},a),(a=Kt.get(n))&&mu(e,a),l=r.createElement("script"),tt(l),it(l,"link",e),r.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},s.set(n,l))}}function Qp(e,a,r,s){var n=(n=Ja.current)?ko(n):null;if(!n)throw Error(ee(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=Ds(r.href),r=bs(n).hoistableStyles,s=r.get(a),s||(s={type:"style",instance:null,count:0,state:null},r.set(a,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Ds(r.href);var l=bs(n).hoistableStyles,o=l.get(e);if(o||(n=n.ownerDocument||n,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,o),(l=n.querySelector(rl(e)))&&!l._p&&(o.instance=l,o.state.loading=5),Kt.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Kt.set(e,r),l||T0(n,e,r,o.state))),a&&s===null)throw Error(ee(528,""));return o}if(a&&s!==null)throw Error(ee(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Gs(r),r=bs(n).hoistableScripts,s=r.get(a),s||(s={type:"script",instance:null,count:0,state:null},r.set(a,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(ee(444,e))}}function Ds(e){return'href="'+Gt(e)+'"'}function rl(e){return'link[rel="stylesheet"]['+e+"]"}function Dg(e){return Me({},e,{"data-precedence":e.precedence,precedence:null})}function T0(e,a,r,s){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?s.loading=1:(a=e.createElement("link"),s.preload=a,a.addEventListener("load",function(){return s.loading|=1}),a.addEventListener("error",function(){return s.loading|=2}),it(a,"link",r),tt(a),e.head.appendChild(a))}function Gs(e){return'[src="'+Gt(e)+'"]'}function sl(e){return"script[async]"+e}function Zp(e,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var s=e.querySelector('style[data-href~="'+Gt(r.href)+'"]');if(s)return a.instance=s,tt(s),s;var n=Me({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),tt(s),it(s,"style",n),ql(s,r.precedence,e),a.instance=s;case"stylesheet":n=Ds(r.href);var l=e.querySelector(rl(n));if(l)return a.state.loading|=4,a.instance=l,tt(l),l;s=Dg(r),(n=Kt.get(n))&&xu(s,n),l=(e.ownerDocument||e).createElement("link"),tt(l);var o=l;return o._p=new Promise(function(i,c){o.onload=i,o.onerror=c}),it(l,"link",s),a.state.loading|=4,ql(l,r.precedence,e),a.instance=l;case"script":return l=Gs(r.src),(n=e.querySelector(sl(l)))?(a.instance=n,tt(n),n):(s=r,(n=Kt.get(l))&&(s=Me({},r),mu(s,n)),e=e.ownerDocument||e,n=e.createElement("script"),tt(n),it(n,"link",s),e.head.appendChild(n),a.instance=n);case"void":return null;default:throw Error(ee(443,a.type))}else a.type==="stylesheet"&&!(a.state.loading&4)&&(s=a.instance,a.state.loading|=4,ql(s,r.precedence,e));return a.instance}function ql(e,a,r){for(var s=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,l=n,o=0;o<s.length;o++){var i=s[o];if(i.dataset.precedence===a)l=i;else if(l!==n)break}l?l.parentNode.insertBefore(e,l.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(e,a.firstChild))}function xu(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function mu(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var Yl=null;function Jp(e,a,r){if(Yl===null){var s=new Map,n=Yl=new Map;n.set(r,s)}else n=Yl,s=n.get(r),s||(s=new Map,n.set(r,s));if(s.has(e))return s;for(s.set(e,null),r=r.getElementsByTagName(e),n=0;n<r.length;n++){var l=r[n];if(!(l[Zn]||l[nt]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var o=l.getAttribute(a)||"";o=e+o;var i=s.get(o);i?i.push(l):s.set(o,[l])}}return s}function Kp(e,a,r){e=e.ownerDocument||e,e.head.insertBefore(r,a==="title"?e.querySelector("head > title"):null)}function E0(e,a,r){if(r===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function _g(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function A0(e,a,r,s){if(r.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(r.state.loading&4)){if(r.instance===null){var n=Ds(s.href),l=a.querySelector(rl(n));if(l){a=l._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=Fo.bind(e),a.then(e,e)),r.state.loading|=4,r.instance=l,tt(l);return}l=a.ownerDocument||a,s=Dg(s),(n=Kt.get(n))&&xu(s,n),l=l.createElement("link"),tt(l);var o=l;o._p=new Promise(function(i,c){o.onload=i,o.onerror=c}),it(l,"link",s),r.instance=l}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,a),(a=r.state.preload)&&!(r.state.loading&3)&&(e.count++,r=Fo.bind(e),a.addEventListener("load",r),a.addEventListener("error",r))}}var Yi=0;function R0(e,a){return e.stylesheets&&e.count===0&&Gl(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var s=setTimeout(function(){if(e.stylesheets&&Gl(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4+a);0<e.imgBytes&&Yi===0&&(Yi=62500*u0());var n=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Gl(e,e.stylesheets),e.unsuspend)){var l=e.unsuspend;e.unsuspend=null,l()}},(e.imgBytes>Yi?50:800)+a);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(n)}}:null}function Fo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var To=null;function Gl(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,To=new Map,a.forEach(z0,e),To=null,Fo.call(e))}function z0(e,a){if(!(a.state.loading&4)){var r=To.get(e);if(r)var s=r.get(null);else{r=new Map,To.set(e,r);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<n.length;l++){var o=n[l];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(r.set(o.dataset.precedence,o),s=o)}s&&r.set(null,s)}n=a.instance,o=n.getAttribute("data-precedence"),l=r.get(o)||s,l===s&&r.set(null,n),r.set(o,n),this.count++,s=Fo.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),l?l.parentNode.insertBefore(n,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),a.state.loading|=4}}var On={$$typeof:Ca,Provider:null,Consumer:null,_currentValue:Ar,_currentValue2:Ar,_threadCount:0};function B0(e,a,r,s,n,l,o,i,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=l,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function Mg(e,a,r,s,n,l,o,i,c,u,d,x){return e=new B0(e,a,r,o,c,u,d,x,i),a=1,l===!0&&(a|=24),l=zt(3,null,null,a),e.current=l,l.stateNode=e,a=Od(),a.refCount++,e.pooledCache=a,a.refCount++,l.memoizedState={element:s,isDehydrated:r,cache:a},Hd(l),e}function Ig(e){return e?(e=ms,e):ms}function Lg(e,a,r,s,n,l){n=Ig(n),s.context===null?s.context=n:s.pendingContext=n,s=er(a),s.payload={element:r},l=l===void 0?null:l,l!==null&&(s.callback=l),r=tr(e,s,a),r!==null&&(Nt(r,e,a),yn(r,e,a))}function ex(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<a?r:a}}function fu(e,a){ex(e,a),(e=e.alternate)&&ex(e,a)}function Ug(e){if(e.tag===13||e.tag===31){var a=Gr(e,67108864);a!==null&&Nt(a,e,67108864),fu(e,67108864)}}function tx(e){if(e.tag===13||e.tag===31){var a=It();a=kd(a);var r=Gr(e,a);r!==null&&Nt(r,e,a),fu(e,a)}}var Eo=!0;function D0(e,a,r,s){var n=ie.T;ie.T=null;var l=Se.p;try{Se.p=2,gu(e,a,r,s)}finally{Se.p=l,ie.T=n}}function _0(e,a,r,s){var n=ie.T;ie.T=null;var l=Se.p;try{Se.p=8,gu(e,a,r,s)}finally{Se.p=l,ie.T=n}}function gu(e,a,r,s){if(Eo){var n=Jc(s);if(n===null)Wi(e,a,s,Ao,r),ax(e,s);else if(I0(n,e,a,r,s))s.stopPropagation();else if(ax(e,s),a&4&&-1<M0.indexOf(e)){for(;n!==null;){var l=Ps(n);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var o=kr(l.pendingLanes);if(o!==0){var i=l;for(i.pendingLanes|=2,i.entangledLanes|=2;o;){var c=1<<31-Mt(o);i.entanglements[1]|=c,o&=~c}fa(l),!(Ne&6)&&(yo=Dt()+500,al(0))}}break;case 31:case 13:i=Gr(l,2),i!==null&&Nt(i,l,2),Qo(),fu(l,2)}if(l=Jc(s),l===null&&Wi(e,a,s,Ao,r),l===n)break;n=l}n!==null&&s.stopPropagation()}else Wi(e,a,s,null,r)}}function Jc(e){return e=Ad(e),hu(e)}var Ao=null;function hu(e){if(Ao=null,e=is(e),e!==null){var a=Gn(e);if(a===null)e=null;else{var r=a.tag;if(r===13){if(e=sm(a),e!==null)return e;e=null}else if(r===31){if(e=nm(a),e!==null)return e;e=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return Ao=e,null}function Og(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jb()){case cm:return 2;case dm:return 8;case so:case Nb:return 32;case um:return 268435456;default:return 32}default:return 32}}var Kc=!1,sr=null,nr=null,lr=null,$n=new Map,Pn=new Map,qa=[],M0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ax(e,a){switch(e){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":$n.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(a.pointerId)}}function sn(e,a,r,s,n,l){return e===null||e.nativeEvent!==l?(e={blockedOn:a,domEventName:r,eventSystemFlags:s,nativeEvent:l,targetContainers:[n]},a!==null&&(a=Ps(a),a!==null&&Ug(a)),e):(e.eventSystemFlags|=s,a=e.targetContainers,n!==null&&a.indexOf(n)===-1&&a.push(n),e)}function I0(e,a,r,s,n){switch(a){case"focusin":return sr=sn(sr,e,a,r,s,n),!0;case"dragenter":return nr=sn(nr,e,a,r,s,n),!0;case"mouseover":return lr=sn(lr,e,a,r,s,n),!0;case"pointerover":var l=n.pointerId;return $n.set(l,sn($n.get(l)||null,e,a,r,s,n)),!0;case"gotpointercapture":return l=n.pointerId,Pn.set(l,sn(Pn.get(l)||null,e,a,r,s,n)),!0}return!1}function $g(e){var a=is(e.target);if(a!==null){var r=Gn(a);if(r!==null){if(a=r.tag,a===13){if(a=sm(r),a!==null){e.blockedOn=a,Ou(e.priority,function(){tx(r)});return}}else if(a===31){if(a=nm(r),a!==null){e.blockedOn=a,Ou(e.priority,function(){tx(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vl(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var r=Jc(e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);hc=s,r.target.dispatchEvent(s),hc=null}else return a=Ps(r),a!==null&&Ug(a),e.blockedOn=r,!1;a.shift()}return!0}function rx(e,a,r){Vl(e)&&r.delete(a)}function L0(){Kc=!1,sr!==null&&Vl(sr)&&(sr=null),nr!==null&&Vl(nr)&&(nr=null),lr!==null&&Vl(lr)&&(lr=null),$n.forEach(rx),Pn.forEach(rx)}function Cl(e,a){e.blockedOn===a&&(e.blockedOn=null,Kc||(Kc=!0,Ze.unstable_scheduleCallback(Ze.unstable_NormalPriority,L0)))}var kl=null;function sx(e){kl!==e&&(kl=e,Ze.unstable_scheduleCallback(Ze.unstable_NormalPriority,function(){kl===e&&(kl=null);for(var a=0;a<e.length;a+=3){var r=e[a],s=e[a+1],n=e[a+2];if(typeof s!="function"){if(hu(s||r)===null)continue;break}var l=Ps(r);l!==null&&(e.splice(a,3),a-=3,Bc(l,{pending:!0,data:n,method:r.method,action:s},s,n))}}))}function _s(e){function a(c){return Cl(c,e)}sr!==null&&Cl(sr,e),nr!==null&&Cl(nr,e),lr!==null&&Cl(lr,e),$n.forEach(a),Pn.forEach(a);for(var r=0;r<qa.length;r++){var s=qa[r];s.blockedOn===e&&(s.blockedOn=null)}for(;0<qa.length&&(r=qa[0],r.blockedOn===null);)$g(r),r.blockedOn===null&&qa.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(s=0;s<r.length;s+=3){var n=r[s],l=r[s+1],o=n[Ct]||null;if(typeof l=="function")o||sx(r);else if(o){var i=null;if(l&&l.hasAttribute("formAction")){if(n=l,o=l[Ct]||null)i=o.formAction;else if(hu(n)!==null)continue}else i=o.action;typeof i=="function"?r[s+1]=i:(r.splice(s,3),s-=3),sx(r)}}}function Pg(){function e(l){l.canIntercept&&l.info==="react-transition"&&l.intercept({handler:function(){return new Promise(function(o){return n=o})},focusReset:"manual",scroll:"manual"})}function a(){n!==null&&(n(),n=null),s||setTimeout(r,20)}function r(){if(!s&&!navigation.transition){var l=navigation.currentEntry;l&&l.url!=null&&navigation.navigate(l.url,{state:l.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),n!==null&&(n(),n=null)}}}function bu(e){this._internalRoot=e}Ko.prototype.render=bu.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(ee(409));var r=a.current,s=It();Lg(r,s,e,a,null,null)};Ko.prototype.unmount=bu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;Lg(e.current,2,null,e,null,null),Qo(),a[$s]=null}};function Ko(e){this._internalRoot=e}Ko.prototype.unstable_scheduleHydration=function(e){if(e){var a=gm();e={blockedOn:null,target:e,priority:a};for(var r=0;r<qa.length&&a!==0&&a<qa[r].priority;r++);qa.splice(r,0,e),r===0&&$g(e)}};var nx=am.version;if(nx!=="19.2.3")throw Error(ee(527,nx,"19.2.3"));Se.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=mb(a),e=e!==null?lm(e):null,e=e===null?null:e.stateNode,e};var U0={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fl.isDisabled&&Fl.supportsFiber)try{Vn=Fl.inject(U0),_t=Fl}catch{}}Mo.createRoot=function(e,a){if(!rm(e))throw Error(ee(299));var r=!1,s="",n=Bf,l=Df,o=_f;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(s=a.identifierPrefix),a.onUncaughtError!==void 0&&(n=a.onUncaughtError),a.onCaughtError!==void 0&&(l=a.onCaughtError),a.onRecoverableError!==void 0&&(o=a.onRecoverableError)),a=Mg(e,1,!1,null,null,r,s,null,n,l,o,Pg),e[$s]=a.current,pu(e),new bu(a)};Mo.hydrateRoot=function(e,a,r){if(!rm(e))throw Error(ee(299));var s=!1,n="",l=Bf,o=Df,i=_f,c=null;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(n=r.identifierPrefix),r.onUncaughtError!==void 0&&(l=r.onUncaughtError),r.onCaughtError!==void 0&&(o=r.onCaughtError),r.onRecoverableError!==void 0&&(i=r.onRecoverableError),r.formState!==void 0&&(c=r.formState)),a=Mg(e,1,!0,a,r??null,s,n,c,l,o,i,Pg),a.context=Ig(null),r=a.current,s=It(),s=kd(s),n=er(s),n.callback=null,tr(r,n,s),r=s,a.current.lanes=r,Qn(a,r),fa(a),e[$s]=a.current,pu(e),new Ko(a)};Mo.version="19.2.3";function Hg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hg)}catch(e){console.error(e)}}Hg(),Qx.exports=Mo;var O0=Qx.exports;const $0=Ox(O0);/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hn(){return Hn=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Hn.apply(this,arguments)}var Za;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Za||(Za={}));const lx="popstate";function P0(e){e===void 0&&(e={});function a(s,n){let{pathname:l,search:o,hash:i}=s.location;return ed("",{pathname:l,search:o,hash:i},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:Ro(n)}return W0(a,r,null,e)}function He(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function yu(e,a){if(!e){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function H0(){return Math.random().toString(36).substr(2,8)}function ox(e,a){return{usr:e.state,key:e.key,idx:a}}function ed(e,a,r,s){return r===void 0&&(r=null),Hn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof a=="string"?Vs(a):a,{state:r,key:a&&a.key||s||H0()})}function Ro(e){let{pathname:a="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(a+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(a+=s.charAt(0)==="#"?s:"#"+s),a}function Vs(e){let a={};if(e){let r=e.indexOf("#");r>=0&&(a.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(a.search=e.substr(s),e=e.substr(0,s)),e&&(a.pathname=e)}return a}function W0(e,a,r,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:l=!1}=s,o=n.history,i=Za.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Hn({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function x(){i=Za.Pop;let h=d(),y=h==null?null:h-u;u=h,c&&c({action:i,location:S.location,delta:y})}function m(h,y){i=Za.Push;let g=ed(S.location,h,y);u=d()+1;let f=ox(g,u),j=S.createHref(g);try{o.pushState(f,"",j)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;n.location.assign(j)}l&&c&&c({action:i,location:S.location,delta:1})}function b(h,y){i=Za.Replace;let g=ed(S.location,h,y);u=d();let f=ox(g,u),j=S.createHref(g);o.replaceState(f,"",j),l&&c&&c({action:i,location:S.location,delta:0})}function v(h){let y=n.location.origin!=="null"?n.location.origin:n.location.href,g=typeof h=="string"?h:Ro(h);return g=g.replace(/ $/,"%20"),He(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let S={get action(){return i},get location(){return e(n,o)},listen(h){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(lx,x),c=h,()=>{n.removeEventListener(lx,x),c=null}},createHref(h){return a(n,h)},createURL:v,encodeLocation(h){let y=v(h);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:b,go(h){return o.go(h)}};return S}var ix;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ix||(ix={}));function q0(e,a,r){return r===void 0&&(r="/"),Y0(e,a,r)}function Y0(e,a,r,s){let n=typeof a=="string"?Vs(a):a,l=vu(n.pathname||"/",r);if(l==null)return null;let o=Wg(e);G0(o);let i=null;for(let c=0;i==null&&c<o.length;++c){let u=n1(l);i=a1(o[c],u)}return i}function Wg(e,a,r,s){a===void 0&&(a=[]),r===void 0&&(r=[]),s===void 0&&(s="");let n=(l,o,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};c.relativePath.startsWith("/")&&(He(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=or([s,c.relativePath]),d=r.concat(c);l.children&&l.children.length>0&&(He(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Wg(l.children,a,d,u)),!(l.path==null&&!l.index)&&a.push({path:u,score:e1(u,l.index),routesMeta:d})};return e.forEach((l,o)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))n(l,o);else for(let c of qg(l.path))n(l,o,c)}),a}function qg(e){let a=e.split("/");if(a.length===0)return[];let[r,...s]=a,n=r.endsWith("?"),l=r.replace(/\?$/,"");if(s.length===0)return n?[l,""]:[l];let o=qg(s.join("/")),i=[];return i.push(...o.map(c=>c===""?l:[l,c].join("/"))),n&&i.push(...o),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function G0(e){e.sort((a,r)=>a.score!==r.score?r.score-a.score:t1(a.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const V0=/^:[\w-]+$/,X0=3,Q0=2,Z0=1,J0=10,K0=-2,cx=e=>e==="*";function e1(e,a){let r=e.split("/"),s=r.length;return r.some(cx)&&(s+=K0),a&&(s+=Q0),r.filter(n=>!cx(n)).reduce((n,l)=>n+(V0.test(l)?X0:l===""?Z0:J0),s)}function t1(e,a){return e.length===a.length&&e.slice(0,-1).every((s,n)=>s===a[n])?e[e.length-1]-a[a.length-1]:0}function a1(e,a,r){let{routesMeta:s}=e,n={},l="/",o=[];for(let i=0;i<s.length;++i){let c=s[i],u=i===s.length-1,d=l==="/"?a:a.slice(l.length)||"/",x=r1({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!x)return null;Object.assign(n,x.params),o.push({params:n,pathname:or([l,x.pathname]),pathnameBase:d1(or([l,x.pathnameBase])),route:m}),x.pathnameBase!=="/"&&(l=or([l,x.pathnameBase]))}return o}function r1(e,a){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=s1(e.path,e.caseSensitive,e.end),n=a.match(r);if(!n)return null;let l=n[0],o=l.replace(/(.)\/+$/,"$1"),i=n.slice(1);return{params:s.reduce((u,d,x)=>{let{paramName:m,isOptional:b}=d;if(m==="*"){let S=i[x]||"";o=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const v=i[x];return b&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:o,pattern:e}}function s1(e,a,r){a===void 0&&(a=!1),r===void 0&&(r=!0),yu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,c)=>(s.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,a?void 0:"i"),s]}function n1(e){try{return e.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return yu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+a+").")),e}}function vu(e,a){if(a==="/")return e;if(!e.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}const l1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,o1=e=>l1.test(e);function i1(e,a){a===void 0&&(a="/");let{pathname:r,search:s="",hash:n=""}=typeof e=="string"?Vs(e):e,l;if(r)if(o1(r))l=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),yu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?l=dx(r.substring(1),"/"):l=dx(r,a)}else l=a;return{pathname:l,search:u1(s),hash:p1(n)}}function dx(e,a){let r=a.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Gi(e,a,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+a+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function c1(e){return e.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function ju(e,a){let r=c1(e);return a?r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function Nu(e,a,r,s){s===void 0&&(s=!1);let n;typeof e=="string"?n=Vs(e):(n=Hn({},e),He(!n.pathname||!n.pathname.includes("?"),Gi("?","pathname","search",n)),He(!n.pathname||!n.pathname.includes("#"),Gi("#","pathname","hash",n)),He(!n.search||!n.search.includes("#"),Gi("#","search","hash",n)));let l=e===""||n.pathname==="",o=l?"/":n.pathname,i;if(o==null)i=r;else{let x=a.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),x-=1;n.pathname=m.join("/")}i=x>=0?a[x]:"/"}let c=i1(n,i),u=o&&o!=="/"&&o.endsWith("/"),d=(l||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const or=e=>e.join("/").replace(/\/\/+/g,"/"),d1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),u1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,p1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function x1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Yg=["post","put","patch","delete"];new Set(Yg);const m1=["get",...Yg];new Set(m1);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wn(){return Wn=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Wn.apply(this,arguments)}const Su=p.createContext(null),f1=p.createContext(null),mr=p.createContext(null),ei=p.createContext(null),fr=p.createContext({outlet:null,matches:[],isDataRoute:!1}),Gg=p.createContext(null);function g1(e,a){let{relative:r}=a===void 0?{}:a;Xs()||He(!1);let{basename:s,navigator:n}=p.useContext(mr),{hash:l,pathname:o,search:i}=Xg(e,{relative:r}),c=o;return s!=="/"&&(c=o==="/"?s:or([s,o])),n.createHref({pathname:c,search:i,hash:l})}function Xs(){return p.useContext(ei)!=null}function ht(){return Xs()||He(!1),p.useContext(ei).location}function Vg(e){p.useContext(mr).static||p.useLayoutEffect(e)}function Je(){let{isDataRoute:e}=p.useContext(fr);return e?E1():h1()}function h1(){Xs()||He(!1);let e=p.useContext(Su),{basename:a,future:r,navigator:s}=p.useContext(mr),{matches:n}=p.useContext(fr),{pathname:l}=ht(),o=JSON.stringify(ju(n,r.v7_relativeSplatPath)),i=p.useRef(!1);return Vg(()=>{i.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!i.current)return;if(typeof u=="number"){s.go(u);return}let x=Nu(u,JSON.parse(o),l,d.relative==="path");e==null&&a!=="/"&&(x.pathname=x.pathname==="/"?a:or([a,x.pathname])),(d.replace?s.replace:s.push)(x,d.state,d)},[a,s,o,l,e])}function Xg(e,a){let{relative:r}=a===void 0?{}:a,{future:s}=p.useContext(mr),{matches:n}=p.useContext(fr),{pathname:l}=ht(),o=JSON.stringify(ju(n,s.v7_relativeSplatPath));return p.useMemo(()=>Nu(e,JSON.parse(o),l,r==="path"),[e,o,l,r])}function b1(e,a){return y1(e,a)}function y1(e,a,r,s){Xs()||He(!1);let{navigator:n}=p.useContext(mr),{matches:l}=p.useContext(fr),o=l[l.length-1],i=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ht(),d;if(a){var x;let h=typeof a=="string"?Vs(a):a;c==="/"||(x=h.pathname)!=null&&x.startsWith(c)||He(!1),d=h}else d=u;let m=d.pathname||"/",b=m;if(c!=="/"){let h=c.replace(/^\//,"").split("/");b="/"+m.replace(/^\//,"").split("/").slice(h.length).join("/")}let v=q0(e,{pathname:b}),S=w1(v&&v.map(h=>Object.assign({},h,{params:Object.assign({},i,h.params),pathname:or([c,n.encodeLocation?n.encodeLocation(h.pathname).pathname:h.pathname]),pathnameBase:h.pathnameBase==="/"?c:or([c,n.encodeLocation?n.encodeLocation(h.pathnameBase).pathname:h.pathnameBase])})),l,r,s);return a&&S?p.createElement(ei.Provider,{value:{location:Wn({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Za.Pop}},S):S}function v1(){let e=T1(),a=x1(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},a),r?p.createElement("pre",{style:n},r):null,null)}const j1=p.createElement(v1,null);class N1 extends p.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,r){return r.location!==a.location||r.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:r.error,location:r.location,revalidation:a.revalidation||r.revalidation}}componentDidCatch(a,r){console.error("React Router caught the following error during render",a,r)}render(){return this.state.error!==void 0?p.createElement(fr.Provider,{value:this.props.routeContext},p.createElement(Gg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function S1(e){let{routeContext:a,match:r,children:s}=e,n=p.useContext(Su);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(fr.Provider,{value:a},s)}function w1(e,a,r,s){var n;if(a===void 0&&(a=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var l;if(!r)return null;if(r.errors)e=r.matches;else if((l=s)!=null&&l.v7_partialHydration&&a.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,i=(n=r)==null?void 0:n.errors;if(i!=null){let d=o.findIndex(x=>x.route.id&&(i==null?void 0:i[x.route.id])!==void 0);d>=0||He(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let d=0;d<o.length;d++){let x=o[d];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(u=d),x.route.id){let{loaderData:m,errors:b}=r,v=x.route.loader&&m[x.route.id]===void 0&&(!b||b[x.route.id]===void 0);if(x.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,x,m)=>{let b,v=!1,S=null,h=null;r&&(b=i&&x.route.id?i[x.route.id]:void 0,S=x.route.errorElement||j1,c&&(u<0&&m===0?(A1("route-fallback"),v=!0,h=null):u===m&&(v=!0,h=x.route.hydrateFallbackElement||null)));let y=a.concat(o.slice(0,m+1)),g=()=>{let f;return b?f=S:v?f=h:x.route.Component?f=p.createElement(x.route.Component,null):x.route.element?f=x.route.element:f=d,p.createElement(S1,{match:x,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:f})};return r&&(x.route.ErrorBoundary||x.route.errorElement||m===0)?p.createElement(N1,{location:r.location,revalidation:r.revalidation,component:S,error:b,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}var Qg=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Qg||{}),Zg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Zg||{});function C1(e){let a=p.useContext(Su);return a||He(!1),a}function k1(e){let a=p.useContext(f1);return a||He(!1),a}function F1(e){let a=p.useContext(fr);return a||He(!1),a}function Jg(e){let a=F1(),r=a.matches[a.matches.length-1];return r.route.id||He(!1),r.route.id}function T1(){var e;let a=p.useContext(Gg),r=k1(),s=Jg();return a!==void 0?a:(e=r.errors)==null?void 0:e[s]}function E1(){let{router:e}=C1(Qg.UseNavigateStable),a=Jg(Zg.UseNavigateStable),r=p.useRef(!1);return Vg(()=>{r.current=!0}),p.useCallback(function(n,l){l===void 0&&(l={}),r.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,Wn({fromRouteId:a},l)))},[e,a])}const ux={};function A1(e,a,r){ux[e]||(ux[e]=!0)}function R1(e,a){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function At(e){let{to:a,replace:r,state:s,relative:n}=e;Xs()||He(!1);let{future:l,static:o}=p.useContext(mr),{matches:i}=p.useContext(fr),{pathname:c}=ht(),u=Je(),d=Nu(a,ju(i,l.v7_relativeSplatPath),c,n==="path"),x=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(x),{replace:r,state:s,relative:n}),[u,x,n,r,s]),null}function le(e){He(!1)}function z1(e){let{basename:a="/",children:r=null,location:s,navigationType:n=Za.Pop,navigator:l,static:o=!1,future:i}=e;Xs()&&He(!1);let c=a.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:l,static:o,future:Wn({v7_relativeSplatPath:!1},i)}),[c,i,l,o]);typeof s=="string"&&(s=Vs(s));let{pathname:d="/",search:x="",hash:m="",state:b=null,key:v="default"}=s,S=p.useMemo(()=>{let h=vu(d,c);return h==null?null:{location:{pathname:h,search:x,hash:m,state:b,key:v},navigationType:n}},[c,d,x,m,b,v,n]);return S==null?null:p.createElement(mr.Provider,{value:u},p.createElement(ei.Provider,{children:r,value:S}))}function B1(e){let{children:a,location:r}=e;return b1(td(a),r)}new Promise(()=>{});function td(e,a){a===void 0&&(a=[]);let r=[];return p.Children.forEach(e,(s,n)=>{if(!p.isValidElement(s))return;let l=[...a,n];if(s.type===p.Fragment){r.push.apply(r,td(s.props.children,l));return}s.type!==le&&He(!1),!s.props.index||!s.props.children||He(!1);let o={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=td(s.props.children,l)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ad(){return ad=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ad.apply(this,arguments)}function D1(e,a){if(e==null)return{};var r={},s=Object.keys(e),n,l;for(l=0;l<s.length;l++)n=s[l],!(a.indexOf(n)>=0)&&(r[n]=e[n]);return r}function _1(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function M1(e,a){return e.button===0&&(!a||a==="_self")&&!_1(e)}function rd(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((a,r)=>{let s=e[r];return a.concat(Array.isArray(s)?s.map(n=>[r,n]):[[r,s]])},[]))}function I1(e,a){let r=rd(e);return a&&a.forEach((s,n)=>{r.has(n)||a.getAll(n).forEach(l=>{r.append(n,l)})}),r}const L1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],U1="6";try{window.__reactRouterVersion=U1}catch{}const O1="startTransition",px=ob[O1];function $1(e){let{basename:a,children:r,future:s,window:n}=e,l=p.useRef();l.current==null&&(l.current=P0({window:n,v5Compat:!0}));let o=l.current,[i,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},d=p.useCallback(x=>{u&&px?px(()=>c(x)):c(x)},[c,u]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>R1(s),[s]),p.createElement(z1,{basename:a,children:r,location:i.location,navigationType:i.action,navigator:o,future:s})}const P1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",H1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zo=p.forwardRef(function(a,r){let{onClick:s,relative:n,reloadDocument:l,replace:o,state:i,target:c,to:u,preventScrollReset:d,viewTransition:x}=a,m=D1(a,L1),{basename:b}=p.useContext(mr),v,S=!1;if(typeof u=="string"&&H1.test(u)&&(v=u,P1))try{let f=new URL(window.location.href),j=u.startsWith("//")?new URL(f.protocol+u):new URL(u),C=vu(j.pathname,b);j.origin===f.origin&&C!=null?u=C+j.search+j.hash:S=!0}catch{}let h=g1(u,{relative:n}),y=W1(u,{replace:o,state:i,target:c,preventScrollReset:d,relative:n,viewTransition:x});function g(f){s&&s(f),f.defaultPrevented||y(f)}return p.createElement("a",ad({},m,{href:v||h,onClick:S||l?s:g,ref:r,target:c}))});var xx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(xx||(xx={}));var mx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(mx||(mx={}));function W1(e,a){let{target:r,replace:s,state:n,preventScrollReset:l,relative:o,viewTransition:i}=a===void 0?{}:a,c=Je(),u=ht(),d=Xg(e,{relative:o});return p.useCallback(x=>{if(M1(x,r)){x.preventDefault();let m=s!==void 0?s:Ro(u)===Ro(d);c(e,{replace:m,state:n,preventScrollReset:l,relative:o,viewTransition:i})}},[u,c,d,s,n,r,e,l,o,i])}function q1(e){let a=p.useRef(rd(e)),r=p.useRef(!1),s=ht(),n=p.useMemo(()=>I1(s.search,r.current?null:a.current),[s.search]),l=Je(),o=p.useCallback((i,c)=>{const u=rd(typeof i=="function"?i(n):i);r.current=!0,l("?"+u,c)},[l,n]);return[n,o]}const Kg=p.createContext(),ne=()=>{const e=p.useContext(Kg);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},Y1=({children:e})=>{const[a,r]=p.useState(()=>{const l=localStorage.getItem("nucash-theme");return l==="dark"||l===null});p.useEffect(()=>{localStorage.setItem("nucash-theme",a?"dark":"light")},[a]);const s=()=>{r(l=>!l)},n=a?{mode:"dark",bg:{primary:"linear-gradient(135deg, #0F1227 0%, #181D40 100%)",secondary:"rgba(30,35,71,0.5)",tertiary:"rgba(255,255,255,0.05)",card:"rgba(255,255,255,0.03)",hover:"rgba(255,255,255,0.06)"},text:{primary:"rgba(251,251,251,0.95)",secondary:"rgba(251,251,251,0.6)",tertiary:"rgba(251,251,251,0.5)",muted:"rgba(251,251,251,0.4)"},border:{primary:"rgba(255,212,28,0.2)",secondary:"rgba(255,212,28,0.15)",hover:"rgba(255,212,28,0.3)"},accent:{primary:"#FFD41C",secondary:"#181D40"},scrollbar:{track:"rgba(255,212,28,0.05)",thumb:"rgba(255,212,28,0.3)",thumbHover:"rgba(255,212,28,0.5)"}}:{mode:"light",bg:{primary:"linear-gradient(135deg, #E8F1FF 0%, #F0F7FF 100%)",secondary:"#FFFFFF",tertiary:"rgba(59,130,246,0.05)",card:"#FFFFFF",hover:"rgba(59,130,246,0.15)"},text:{primary:"rgba(24,29,64,0.95)",secondary:"rgba(24,29,64,0.75)",tertiary:"rgba(24,29,64,0.65)",muted:"rgba(24,29,64,0.5)"},border:{primary:"rgba(59,130,246,0.3)",secondary:"rgba(59,130,246,0.15)",hover:"rgba(59,130,246,0.5)"},accent:{primary:"#3B82F6",secondary:"#FFFFFF"},scrollbar:{track:"rgba(59,130,246,0.08)",thumb:"rgba(59,130,246,0.3)",thumbHover:"rgba(59,130,246,0.5)"}};return t.jsx(Kg.Provider,{value:{isDarkMode:a,toggleTheme:s,theme:n},children:e})},wu=p.createContext();function G1({children:e}){const[a,r]=p.useState(null),[s,n]=p.useState(!1),[l,o]=p.useState(!0),i="http://18.166.29.239:3000";p.useEffect(()=>{c()},[]);const c=()=>{try{const m=localStorage.getItem("adminToken"),b=localStorage.getItem("adminData");if(m&&b&&b!=="undefined"&&b!=="null")try{const h=JSON.parse(b);r({...h,accountType:"admin"}),n(!0),o(!1);return}catch(h){console.error("Failed to parse admin data, clearing invalid data:",h),localStorage.removeItem("adminToken"),localStorage.removeItem("adminData")}const v=localStorage.getItem("userToken"),S=localStorage.getItem("userData");if(v&&S&&S!=="undefined"&&S!=="null")try{const h=JSON.parse(S);r({...h,accountType:"user"}),n(!0),o(!1);return}catch(h){console.error("Failed to parse user data, clearing invalid data:",h),localStorage.removeItem("userToken"),localStorage.removeItem("userData")}n(!1),r(null),o(!1)}catch(m){console.error("Error checking auth status:",m),n(!1),r(null),o(!1)}},u=(m,b,v=!1)=>{v?(localStorage.setItem("adminToken",b),localStorage.setItem("adminData",JSON.stringify(m)),r({...m,accountType:"admin"})):(localStorage.setItem("userToken",b),localStorage.setItem("userData",JSON.stringify(m)),r({...m,accountType:"user"})),n(!0)},d=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminData"),localStorage.removeItem("userToken"),localStorage.removeItem("userData"),r(null),n(!1)},x=m=>{const b=(a==null?void 0:a.accountType)||"user";b==="admin"?localStorage.setItem("adminData",JSON.stringify(m)):localStorage.setItem("userData",JSON.stringify(m)),r({...m,accountType:b})};return t.jsx(wu.Provider,{value:{backendUrl:i,userData:a,isLoggedin:s,loadingUserData:l,loginUser:u,logoutUser:d,updateUserData:x,checkAuthStatus:c},children:e})}function eh(e){var a,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(a=0;a<n;a++)e[a]&&(r=eh(e[a]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function _r(){for(var e,a,r=0,s="",n=arguments.length;r<n;r++)(e=arguments[r])&&(a=eh(e))&&(s&&(s+=" "),s+=a);return s}function V1(e){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}V1(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var nl=e=>typeof e=="number"&&!isNaN(e),Pr=e=>typeof e=="string",Ma=e=>typeof e=="function",X1=e=>Pr(e)||nl(e),sd=e=>Pr(e)||Ma(e)?e:null,Q1=(e,a)=>e===!1||nl(e)&&e>0?e:a,nd=e=>p.isValidElement(e)||Pr(e)||Ma(e)||nl(e);function Z1(e,a,r=300){let{scrollHeight:s,style:n}=e;requestAnimationFrame(()=>{n.minHeight="initial",n.height=s+"px",n.transition=`all ${r}ms`,requestAnimationFrame(()=>{n.height="0",n.padding="0",n.margin="0",setTimeout(a,r)})})}function J1({enter:e,exit:a,appendPosition:r=!1,collapse:s=!0,collapseDuration:n=300}){return function({children:l,position:o,preventExitTransition:i,done:c,nodeRef:u,isIn:d,playToast:x}){let m=r?`${e}--${o}`:e,b=r?`${a}--${o}`:a,v=p.useRef(0);return p.useLayoutEffect(()=>{let S=u.current,h=m.split(" "),y=g=>{g.target===u.current&&(x(),S.removeEventListener("animationend",y),S.removeEventListener("animationcancel",y),v.current===0&&g.type!=="animationcancel"&&S.classList.remove(...h))};S.classList.add(...h),S.addEventListener("animationend",y),S.addEventListener("animationcancel",y)},[]),p.useEffect(()=>{let S=u.current,h=()=>{S.removeEventListener("animationend",h),s?Z1(S,c,n):c()};d||(i?h():(v.current=1,S.className+=` ${b}`,S.addEventListener("animationend",h)))},[d]),je.createElement(je.Fragment,null,l)}}function fx(e,a){return{content:th(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:a}}function th(e,a,r=!1){return p.isValidElement(e)&&!Pr(e.type)?p.cloneElement(e,{closeToast:a.closeToast,toastProps:a,data:a.data,isPaused:r}):Ma(e)?e({closeToast:a.closeToast,toastProps:a,data:a.data,isPaused:r}):e}function K1({closeToast:e,theme:a,ariaLabel:r="close"}){return je.createElement("button",{className:`Toastify__close-button Toastify__close-button--${a}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":r},je.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},je.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function e2({delay:e,isRunning:a,closeToast:r,type:s="default",hide:n,className:l,controlledProgress:o,progress:i,rtl:c,isIn:u,theme:d}){let x=n||o&&i===0,m={animationDuration:`${e}ms`,animationPlayState:a?"running":"paused"};o&&(m.transform=`scaleX(${i})`);let b=_r("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":c}),v=Ma(l)?l({rtl:c,type:s,defaultClassName:b}):_r(b,l),S={[o&&i>=1?"onTransitionEnd":"onAnimationEnd"]:o&&i<1?null:()=>{u&&r()}};return je.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":x},je.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${s}`}),je.createElement("div",{role:"progressbar","aria-hidden":x?"true":"false","aria-label":"notification timer",className:v,style:m,...S}))}var t2=1,ah=()=>`${t2++}`;function a2(e,a,r){let s=1,n=0,l=[],o=[],i=a,c=new Map,u=new Set,d=g=>(u.add(g),()=>u.delete(g)),x=()=>{o=Array.from(c.values()),u.forEach(g=>g())},m=({containerId:g,toastId:f,updateId:j})=>{let C=g?g!==e:e!==1,E=c.has(f)&&j==null;return C||E},b=(g,f)=>{c.forEach(j=>{var C;(f==null||f===j.props.toastId)&&((C=j.toggle)==null||C.call(j,g))})},v=g=>{var f,j;(j=(f=g.props)==null?void 0:f.onClose)==null||j.call(f,g.removalReason),g.isActive=!1},S=g=>{if(g==null)c.forEach(v);else{let f=c.get(g);f&&v(f)}x()},h=()=>{n-=l.length,l=[]},y=g=>{var f,j;let{toastId:C,updateId:E}=g.props,A=E==null;g.staleId&&c.delete(g.staleId),g.isActive=!0,c.set(C,g),x(),r(fx(g,A?"added":"updated")),A&&((j=(f=g.props).onOpen)==null||j.call(f))};return{id:e,props:i,observe:d,toggle:b,removeToast:S,toasts:c,clearQueue:h,buildToast:(g,f)=>{if(m(f))return;let{toastId:j,updateId:C,data:E,staleId:A,delay:M}=f,B=C==null;B&&n++;let F={...i,style:i.toastStyle,key:s++,...Object.fromEntries(Object.entries(f).filter(([k,U])=>U!=null)),toastId:j,updateId:C,data:E,isIn:!1,className:sd(f.className||i.toastClassName),progressClassName:sd(f.progressClassName||i.progressClassName),autoClose:f.isLoading?!1:Q1(f.autoClose,i.autoClose),closeToast(k){c.get(j).removalReason=k,S(j)},deleteToast(){let k=c.get(j);if(k!=null){if(r(fx(k,"removed")),c.delete(j),n--,n<0&&(n=0),l.length>0){y(l.shift());return}x()}}};F.closeButton=i.closeButton,f.closeButton===!1||nd(f.closeButton)?F.closeButton=f.closeButton:f.closeButton===!0&&(F.closeButton=nd(i.closeButton)?i.closeButton:!0);let L={content:g,props:F,staleId:A};i.limit&&i.limit>0&&n>i.limit&&B?l.push(L):nl(M)?setTimeout(()=>{y(L)},M):y(L)},setProps(g){i=g},setToggle:(g,f)=>{let j=c.get(g);j&&(j.toggle=f)},isToastActive:g=>{var f;return(f=c.get(g))==null?void 0:f.isActive},getSnapshot:()=>o}}var mt=new Map,qn=[],ld=new Set,r2=e=>ld.forEach(a=>a(e)),rh=()=>mt.size>0;function s2(){qn.forEach(e=>nh(e.content,e.options)),qn=[]}var n2=(e,{containerId:a})=>{var r;return(r=mt.get(a||1))==null?void 0:r.toasts.get(e)};function sh(e,a){var r;if(a)return!!((r=mt.get(a))!=null&&r.isToastActive(e));let s=!1;return mt.forEach(n=>{n.isToastActive(e)&&(s=!0)}),s}function l2(e){if(!rh()){qn=qn.filter(a=>e!=null&&a.options.toastId!==e);return}if(e==null||X1(e))mt.forEach(a=>{a.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let a=mt.get(e.containerId);a?a.removeToast(e.id):mt.forEach(r=>{r.removeToast(e.id)})}}var o2=(e={})=>{mt.forEach(a=>{a.props.limit&&(!e.containerId||a.id===e.containerId)&&a.clearQueue()})};function nh(e,a){nd(e)&&(rh()||qn.push({content:e,options:a}),mt.forEach(r=>{r.buildToast(e,a)}))}function i2(e){var a;(a=mt.get(e.containerId||1))==null||a.setToggle(e.id,e.fn)}function lh(e,a){mt.forEach(r=>{(a==null||!(a!=null&&a.containerId)||(a==null?void 0:a.containerId)===r.id)&&r.toggle(e,a==null?void 0:a.id)})}function c2(e){let a=e.containerId||1;return{subscribe(r){let s=a2(a,e,r2);mt.set(a,s);let n=s.observe(r);return s2(),()=>{n(),mt.delete(a)}},setProps(r){var s;(s=mt.get(a))==null||s.setProps(r)},getSnapshot(){var r;return(r=mt.get(a))==null?void 0:r.getSnapshot()}}}function d2(e){return ld.add(e),()=>{ld.delete(e)}}function u2(e){return e&&(Pr(e.toastId)||nl(e.toastId))?e.toastId:ah()}function ll(e,a){return nh(e,a),a.toastId}function ti(e,a){return{...a,type:a&&a.type||e,toastId:u2(a)}}function ai(e){return(a,r)=>ll(a,ti(e,r))}function $(e,a){return ll(e,ti("default",a))}$.loading=(e,a)=>ll(e,ti("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...a}));function p2(e,{pending:a,error:r,success:s},n){let l;a&&(l=Pr(a)?$.loading(a,n):$.loading(a.render,{...n,...a}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},i=(u,d,x)=>{if(d==null){$.dismiss(l);return}let m={type:u,...o,...n,data:x},b=Pr(d)?{render:d}:d;return l?$.update(l,{...m,...b}):$(b.render,{...m,...b}),x},c=Ma(e)?e():e;return c.then(u=>i("success",s,u)).catch(u=>i("error",r,u)),c}$.promise=p2;$.success=ai("success");$.info=ai("info");$.error=ai("error");$.warning=ai("warning");$.warn=$.warning;$.dark=(e,a)=>ll(e,ti("default",{theme:"dark",...a}));function x2(e){l2(e)}$.dismiss=x2;$.clearWaitingQueue=o2;$.isActive=sh;$.update=(e,a={})=>{let r=n2(e,a);if(r){let{props:s,content:n}=r,l={delay:100,...s,...a,toastId:a.toastId||e,updateId:ah()};l.toastId!==e&&(l.staleId=e);let o=l.render||n;delete l.render,ll(o,l)}};$.done=e=>{$.update(e,{progress:1})};$.onChange=d2;$.play=e=>lh(!0,e);$.pause=e=>lh(!1,e);function m2(e){var a;let{subscribe:r,getSnapshot:s,setProps:n}=p.useRef(c2(e)).current;n(e);let l=(a=p.useSyncExternalStore(r,s,s))==null?void 0:a.slice();function o(i){if(!l)return[];let c=new Map;return e.newestOnTop&&l.reverse(),l.forEach(u=>{let{position:d}=u.props;c.has(d)||c.set(d,[]),c.get(d).push(u)}),Array.from(c,u=>i(u[0],u[1]))}return{getToastToRender:o,isToastActive:sh,count:l==null?void 0:l.length}}function f2(e){let[a,r]=p.useState(!1),[s,n]=p.useState(!1),l=p.useRef(null),o=p.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:i,pauseOnHover:c,closeToast:u,onClick:d,closeOnClick:x}=e;i2({id:e.toastId,containerId:e.containerId,fn:r}),p.useEffect(()=>{if(e.pauseOnFocusLoss)return m(),()=>{b()}},[e.pauseOnFocusLoss]);function m(){document.hasFocus()||y(),window.addEventListener("focus",h),window.addEventListener("blur",y)}function b(){window.removeEventListener("focus",h),window.removeEventListener("blur",y)}function v(A){if(e.draggable===!0||e.draggable===A.pointerType){g();let M=l.current;o.canCloseOnClick=!0,o.canDrag=!0,M.style.transition="none",e.draggableDirection==="x"?(o.start=A.clientX,o.removalDistance=M.offsetWidth*(e.draggablePercent/100)):(o.start=A.clientY,o.removalDistance=M.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function S(A){let{top:M,bottom:B,left:F,right:L}=l.current.getBoundingClientRect();A.nativeEvent.type!=="touchend"&&e.pauseOnHover&&A.clientX>=F&&A.clientX<=L&&A.clientY>=M&&A.clientY<=B?y():h()}function h(){r(!0)}function y(){r(!1)}function g(){o.didMove=!1,document.addEventListener("pointermove",j),document.addEventListener("pointerup",C)}function f(){document.removeEventListener("pointermove",j),document.removeEventListener("pointerup",C)}function j(A){let M=l.current;if(o.canDrag&&M){o.didMove=!0,a&&y(),e.draggableDirection==="x"?o.delta=A.clientX-o.start:o.delta=A.clientY-o.start,o.start!==A.clientX&&(o.canCloseOnClick=!1);let B=e.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;M.style.transform=`translate3d(${B},0)`,M.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function C(){f();let A=l.current;if(o.canDrag&&o.didMove&&A){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){n(!0),e.closeToast(!0),e.collapseAll();return}A.style.transition="transform 0.2s, opacity 0.2s",A.style.removeProperty("transform"),A.style.removeProperty("opacity")}}let E={onPointerDown:v,onPointerUp:S};return i&&c&&(E.onMouseEnter=y,e.stacked||(E.onMouseLeave=h)),x&&(E.onClick=A=>{d&&d(A),o.canCloseOnClick&&u(!0)}),{playToast:h,pauseToast:y,isRunning:a,preventExitTransition:s,toastRef:l,eventHandlers:E}}var g2=typeof window<"u"?p.useLayoutEffect:p.useEffect,ri=({theme:e,type:a,isLoading:r,...s})=>je.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${a})`,...s});function h2(e){return je.createElement(ri,{...e},je.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function b2(e){return je.createElement(ri,{...e},je.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function y2(e){return je.createElement(ri,{...e},je.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function v2(e){return je.createElement(ri,{...e},je.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function j2(){return je.createElement("div",{className:"Toastify__spinner"})}var od={info:b2,warning:h2,success:y2,error:v2,spinner:j2},N2=e=>e in od;function S2({theme:e,type:a,isLoading:r,icon:s}){let n=null,l={theme:e,type:a};return s===!1||(Ma(s)?n=s({...l,isLoading:r}):p.isValidElement(s)?n=p.cloneElement(s,l):r?n=od.spinner():N2(a)&&(n=od[a](l))),n}var w2=e=>{let{isRunning:a,preventExitTransition:r,toastRef:s,eventHandlers:n,playToast:l}=f2(e),{closeButton:o,children:i,autoClose:c,onClick:u,type:d,hideProgressBar:x,closeToast:m,transition:b,position:v,className:S,style:h,progressClassName:y,updateId:g,role:f,progress:j,rtl:C,toastId:E,deleteToast:A,isIn:M,isLoading:B,closeOnClick:F,theme:L,ariaLabel:k}=e,U=_r("Toastify__toast",`Toastify__toast-theme--${L}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":C},{"Toastify__toast--close-on-click":F}),D=Ma(S)?S({rtl:C,position:v,type:d,defaultClassName:U}):_r(U,S),_=S2(e),z=!!j||!c,q={closeToast:m,type:d,theme:L},w=null;return o===!1||(Ma(o)?w=o(q):p.isValidElement(o)?w=p.cloneElement(o,q):w=K1(q)),je.createElement(b,{isIn:M,done:A,position:v,preventExitTransition:r,nodeRef:s,playToast:l},je.createElement("div",{id:E,tabIndex:0,onClick:u,"data-in":M,className:D,...n,style:h,ref:s,...M&&{role:f,"aria-label":k}},_!=null&&je.createElement("div",{className:_r("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!B})},_),th(i,e,!a),w,!e.customProgressBar&&je.createElement(e2,{...g&&!z?{key:`p-${g}`}:{},rtl:C,theme:L,delay:c,isRunning:a,isIn:M,closeToast:m,hide:x,type:d,className:y,controlledProgress:z,progress:j||0})))},C2=(e,a=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:a}),k2=J1(C2("bounce",!0)),F2={position:"top-right",transition:k2,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function T2(e){let a={...F2,...e},r=e.stacked,[s,n]=p.useState(!0),l=p.useRef(null),{getToastToRender:o,isToastActive:i,count:c}=m2(a),{className:u,style:d,rtl:x,containerId:m,hotKeys:b}=a;function v(h){let y=_r("Toastify__toast-container",`Toastify__toast-container--${h}`,{"Toastify__toast-container--rtl":x});return Ma(u)?u({position:h,rtl:x,defaultClassName:y}):_r(y,sd(u))}function S(){r&&(n(!0),$.play())}return g2(()=>{var h;if(r){let y=l.current.querySelectorAll('[data-in="true"]'),g=12,f=(h=a.position)==null?void 0:h.includes("top"),j=0,C=0;Array.from(y).reverse().forEach((E,A)=>{let M=E;M.classList.add("Toastify__toast--stacked"),A>0&&(M.dataset.collapsed=`${s}`),M.dataset.pos||(M.dataset.pos=f?"top":"bot");let B=j*(s?.2:1)+(s?0:g*A);M.style.setProperty("--y",`${f?B:B*-1}px`),M.style.setProperty("--g",`${g}`),M.style.setProperty("--s",`${1-(s?C:0)}`),j+=M.offsetHeight,C+=.025})}},[s,c,r]),p.useEffect(()=>{function h(y){var g;let f=l.current;b(y)&&((g=f.querySelector('[tabIndex="0"]'))==null||g.focus(),n(!1),$.pause()),y.key==="Escape"&&(document.activeElement===f||f!=null&&f.contains(document.activeElement))&&(n(!0),$.play())}return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[b]),je.createElement("section",{ref:l,className:"Toastify",id:m,onMouseEnter:()=>{r&&(n(!1),$.pause())},onMouseLeave:S,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":a["aria-label"]},o((h,y)=>{let g=y.length?{...d}:{...d,pointerEvents:"none"};return je.createElement("div",{tabIndex:-1,className:v(h),"data-stacked":r,style:g,key:`c-${h}`},y.map(({content:f,props:j})=>je.createElement(w2,{...j,stacked:r,collapseAll:S,isIn:i(j.toastId,j.containerId),key:`t-${j.key}`},f)))}))}function E2(){const[e,a]=p.useState(!1),[r,s]=p.useState("");Je();const n="http://18.166.29.239:3000",l=p.useCallback(()=>{try{const c=localStorage.getItem("adminData");return c?JSON.parse(c).role==="sysad":!1}catch(c){return console.error("Error checking sysadmin status:",c),!1}},[]),o=p.useCallback(async()=>{console.log(" Maintenance check temporarily disabled")},[n,l]),i=p.useCallback(()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminData"),localStorage.removeItem("userToken"),localStorage.removeItem("userData"),window.location.href="/force-logout"},[]);return p.useEffect(()=>{if(window.location.pathname==="/force-logout"||window.location.pathname==="/login")return;o();const c=setInterval(o,3e4);return()=>clearInterval(c)},[o]),p.useEffect(()=>{const c=u=>{u.key==="maintenanceMode"&&o()};return window.addEventListener("storage",c),()=>window.removeEventListener("storage",c)},[o]),{isMaintenanceMode:e,maintenanceMessage:r,isSysadmin:l(),checkMaintenanceStatus:o,forceLogout:i}}function A2(){const e=Je(),{loginUser:a,isLoggedin:r}=p.useContext(wu),[s,n]=p.useState("email"),[l,o]=p.useState(""),[i,c]=p.useState(""),[u,d]=p.useState(!1),[x,m]=p.useState(""),[b,v]=p.useState(null),[S,h]=p.useState(null),y=p.useRef(!1),[g,f]=p.useState(""),[j,C]=p.useState(""),[E,A]=p.useState(""),[M,B]=p.useState(""),[F,L]=p.useState(!1);p.useEffect(()=>{(async()=>{var O;try{const P=await(await fetch("http://18.166.29.239:3000/api/admin/sysad/config")).json();(O=P==null?void 0:P.config)!=null&&O.maintenanceMode&&L(!0)}catch(V){console.log("Could not check maintenance status:",V.message)}})()},[]),p.useEffect(()=>{const T=localStorage.getItem("adminToken"),O=localStorage.getItem("userToken"),V=localStorage.getItem("adminData");if(T&&V)try{const W=JSON.parse(V).role;W==="motorpool"?e("/admin/motorpool",{replace:!0}):W==="merchant"?e("/admin/merchant",{replace:!0}):W==="treasury"?e("/admin/treasury/dashboard",{replace:!0}):W==="accounting"?e("/admin/accounting/home",{replace:!0}):W==="sysad"?e("/admin/sysad/dashboard",{replace:!0}):e("/admin/motorpool",{replace:!0})}catch(P){console.error("Error parsing adminData:",P)}else O&&e("/user/dashboard",{replace:!0})},[e]),p.useEffect(()=>{r&&S&&y.current&&(console.log(" Authentication state confirmed, navigating to:",S),e(S,{replace:!0}),h(null),y.current=!1)},[r,S,e]);const k=T=>{const O=T.toLowerCase();return O.includes("motorpool")||O.includes("treasury")||O.includes("accounting")||O.includes("admin")||O.includes("sysad")||O.includes("merchant")||O.includes("cafeteria")||O.includes("bookstore")||O.includes("printshop")?"admin":"user"},U=T=>({admin:{endpoint:"http://18.166.29.239:3000/api/login",checkEndpoint:"http://18.166.29.239:3000/api/login/check-email",tokenKey:"adminToken",dataKey:"adminData",title:"Admin Portal",redirectPath:"/admin/motorpool",color:"#FFD41C",icon:""},merchant:{endpoint:"http://18.166.29.239:3000/api/merchant/auth/login",checkEndpoint:"http://18.166.29.239:3000/api/merchant/auth/check-email",tokenKey:"merchantToken",dataKey:"merchantData",title:"Merchant Portal",redirectPath:"/admin/merchant",color:"#22C55E",icon:""},user:{endpoint:"http://18.166.29.239:3000/api/login",checkEndpoint:"http://18.166.29.239:3000/api/login/check-email",tokenKey:"userToken",dataKey:"userData",title:"Student Portal",redirectPath:"/user/dashboard",color:"#3B82F6",icon:""}})[T],D=async T=>{if(T.preventDefault(),!l.trim()){m("Please enter your email address");return}m("");const O=k(l);v(O),n("pin")},_=async T=>{if(T.preventDefault(),!i){m("Please enter your PIN");return}d(!0),m("");try{const O=U(b);console.log(" Attempting login:",{email:l,role:b,endpoint:O.endpoint});const V=await fetch(O.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailOrUsername:l,password:i})}),P=await V.json();if(console.log(" Server response data:",P),V.status===403&&P.requiresActivation){if(console.log("  Account requires activation, redirecting..."),!P.accountId)throw console.error(" Missing accountId in activation response:",P),new Error("Server error: Missing account ID for activation");const ce=`/activate?accountId=${P.accountId}&accountType=${P.accountType||b}&email=${encodeURIComponent(P.email||l)}&fullName=${encodeURIComponent(P.fullName||"")}`;console.log(" Activation URL:",ce),e(ce);return}if(!V.ok)throw new Error(P.error||"Login failed");if(console.log(" Login successful:",P),!P.token)throw new Error("Server error: Missing authentication token");const W=P.role&&["motorpool","merchant","treasury","accounting","sysad","cafeteria","bookstore","printshop"].includes(P.role),Z=W?"admin":b;if(F&&P.role!=="sysad")throw new Error("System is under maintenance. Only system administrators can access the system at this time.");const te=Z==="admin"?U("admin"):O;console.log(" Role detection:",{detectedRole:b,serverRole:P.role,isAdminResponse:W,actualRole:Z,willUseConfig:te.tokenKey});const{token:I,...Y}=P,G=Y;if(!G||typeof G!="object"||Object.keys(G).length===0)throw console.error(" Invalid user data received from server:",P),new Error("Server error: Invalid user data received");console.log(" Storing user data via AppContext:",{tokenKey:te.tokenKey,dataKey:te.dataKey,userData:G});const K=Z==="admin";a(G,P.token,K),console.log(" Authentication state updated via AppContext"),y.current=!0;let se;if(Z==="admin"){if(!P.role)throw console.error(" Missing role in admin response:",P),new Error("Server error: Admin role not provided");P.role==="treasury"?se="/admin/treasury/dashboard":P.role==="accounting"?se="/admin/accounting/home":P.role==="sysad"?se="/admin/sysad/dashboard":se=`/admin/${P.role}`}else se=te.redirectPath;console.log(" Setting pending redirect to:",se),h(se)}catch(O){console.error(" Login error:",O),m(O.message||"Invalid PIN. Please try again.")}finally{d(!1)}},z=()=>{n("email"),c(""),m(""),v(null)},q=async T=>{T.preventDefault(),d(!0),m("");try{const O=await fetch("http://18.166.29.239:3000/api/login/forgot-pin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g})}),V=await O.json();if(!O.ok)throw new Error(V.error||"Failed to send OTP");console.log(" OTP sent to email"),n("forgot-otp")}catch(O){console.error(" Forgot password error:",O),m(O.message||"Failed to send OTP")}finally{d(!1)}},w=async T=>{T.preventDefault(),d(!0),m("");try{const O=await fetch("http://18.166.29.239:3000/api/login/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g,otp:j})}),V=await O.json();if(!O.ok)throw new Error(V.error||"Invalid OTP");console.log(" OTP verified"),n("forgot-newpin")}catch(O){console.error(" OTP verification error:",O),m(O.message||"Invalid OTP")}finally{d(!1)}},N=async T=>{if(T.preventDefault(),E!==M){m("PINs do not match");return}if(!/^\d{6}$/.test(E)){m("PIN must be exactly 6 digits");return}d(!0),m("");try{const O=await fetch("http://18.166.29.239:3000/api/login/reset-pin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g,newPin:E})}),V=await O.json();if(!O.ok)throw new Error(V.error||"Failed to reset PIN");console.log(" PIN reset successful"),n("forgot-confirm"),o(""),c(""),C(""),A(""),B(""),m("")}catch(O){console.error(" Reset PIN error:",O),m(O.message||"Failed to reset PIN")}finally{d(!1)}},R=T=>{T.key==="Enter"&&(s==="email"?D(T):s==="pin"?_(T):s==="forgot-email"?q(T):s==="forgot-otp"?w(T):s==="forgot-newpin"&&N(T))};return t.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#0F1227] to-[#181D40] relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-1/4 -left-20 w-96 h-96 bg-[#FFD41C] opacity-5 rounded-full blur-3xl animate-float"}),t.jsx("div",{className:"absolute bottom-1/4 -right-20 w-96 h-96 bg-[#FFD41C] opacity-5 rounded-full blur-3xl animate-float-delayed"}),t.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-[#FFD41C] opacity-3 rounded-full blur-3xl animate-pulse-slow"}),t.jsx("div",{className:"absolute top-20 left-1/4 w-2 h-2 bg-[#FFD41C] opacity-30 rounded-full animate-particle-1"}),t.jsx("div",{className:"absolute top-40 right-1/3 w-3 h-3 bg-[#FFD41C] opacity-20 rounded-full animate-particle-2"}),t.jsx("div",{className:"absolute bottom-32 left-1/3 w-2 h-2 bg-[#FFD41C] opacity-25 rounded-full animate-particle-3"}),t.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 bg-[#FFD41C] opacity-40 rounded-full animate-particle-4"}),t.jsx("div",{className:"absolute top-0 left-1/4 w-px h-full bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.1)] to-transparent animate-shimmer-slow"}),t.jsx("div",{className:"absolute top-0 right-1/3 w-px h-full bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.1)] to-transparent animate-shimmer-slow",style:{animationDelay:"2s"}})]}),t.jsxs("div",{className:"relative z-10 bg-[rgba(30,35,71,0.95)] rounded-[20px] p-12 w-full max-w-[450px] border-2 border-[rgba(255,212,28,0.3)] backdrop-blur-sm shadow-2xl animate-slideUp",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-[#FFD41C] rounded-full mb-6 shadow-lg shadow-[rgba(255,212,28,0.4)]",children:t.jsx("span",{className:"text-5xl font-extrabold text-[#181D40]",children:"NU"})}),t.jsx("h1",{className:"text-3xl font-extrabold text-[#FBFBFB] mb-2 tracking-tight",children:"Welcome Back"}),t.jsx("p",{className:"text-[rgba(251,251,251,0.6)] text-sm",children:"Sign in to access your account"})]}),F&&t.jsxs("div",{className:"mb-6 p-4 bg-[rgba(255,212,28,0.15)] border-2 border-[rgba(255,212,28,0.4)] rounded-xl text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsx("span",{className:"text-[#FFD41C] font-bold",children:"Maintenance Mode"})]}),t.jsx("p",{className:"text-[rgba(251,251,251,0.7)] text-xs",children:"System is under maintenance. Only system administrators can log in."})]}),x&&t.jsxs("div",{className:"mb-6 p-4 bg-[rgba(239,68,68,0.15)] border-l-4 border-[#EF4444] rounded text-[#EF4444] text-sm flex items-start gap-3",children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{children:x})]}),s==="email"&&t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Email Address"}),t.jsx("input",{type:"email",value:l,onChange:T=>o(T.target.value),onKeyPress:R,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-lg placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"you@nu.edu.ph",autoFocus:!0})]}),t.jsx("button",{onClick:D,disabled:u,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:u?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Verifying..."]}):"Continue "})]}),s==="pin"&&t.jsxs("div",{children:[t.jsx("button",{onClick:z,className:"mb-6 text-sm text-[#FFD41C] hover:text-[#FFC700] flex items-center gap-2 font-semibold transition-colors",children:" Change Email"}),t.jsxs("div",{className:"mb-6 p-4 bg-[rgba(255,212,28,0.1)] border border-[rgba(255,212,28,0.3)] rounded-xl",children:[t.jsx("p",{className:"text-xs text-[rgba(251,251,251,0.6)] uppercase tracking-wide mb-1",children:"Signing in as"}),t.jsx("p",{className:"text-base text-[#FBFBFB] font-semibold",children:l})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Enter PIN"}),t.jsx("input",{type:"password",value:i,onChange:T=>{const O=T.target.value;(O===""||/^\d+$/.test(O))&&c(O)},onKeyPress:R,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-2xl tracking-widest text-center placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"     ",autoFocus:!0,maxLength:6,inputMode:"numeric"})]}),t.jsx("button",{onClick:_,disabled:u,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:u?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Signing In..."]}):"Sign In"}),t.jsx("button",{onClick:()=>{f(l),n("forgot-email")},className:"w-full mt-6 text-sm text-[rgba(251,251,251,0.6)] hover:text-[#FFD41C] transition-colors font-medium",children:"Forgot your PIN?"})]}),s==="forgot-email"&&t.jsxs("div",{children:[t.jsx("button",{onClick:()=>{n("pin"),f("")},className:"mb-6 text-sm text-[#FFD41C] hover:text-[#FFC700] flex items-center gap-2 font-semibold transition-colors",children:" Back to Login"}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-[#FBFBFB] mb-2",children:"Forgot Your PIN?"}),t.jsx("p",{className:"text-sm text-[rgba(251,251,251,0.6)]",children:"We'll send a verification code to your email"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Email Address"}),t.jsx("input",{type:"email",value:g,onChange:T=>f(T.target.value),onKeyPress:R,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-lg placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"you@nu.edu.ph",autoFocus:!0})]}),t.jsx("button",{onClick:q,disabled:u,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:u?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Sending..."]}):"Send Verification Code"})]}),s==="forgot-otp"&&t.jsxs("div",{children:[t.jsx("button",{onClick:()=>n("forgot-email"),className:"mb-6 text-sm text-[#FFD41C] hover:text-[#FFC700] flex items-center gap-2 font-semibold transition-colors",children:" Back"}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-[#FBFBFB] mb-2",children:"Enter Verification Code"}),t.jsx("p",{className:"text-sm text-[rgba(251,251,251,0.6)]",children:"Check your email for the 6-digit code"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Verification Code"}),t.jsx("input",{type:"text",value:j,onChange:T=>C(T.target.value),onKeyPress:R,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-2xl tracking-widest text-center placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"     ",autoFocus:!0,maxLength:6,inputMode:"numeric"})]}),t.jsx("button",{onClick:w,disabled:u,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:u?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Verifying..."]}):"Verify Code"})]}),s==="forgot-newpin"&&t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-[#FBFBFB] mb-2",children:"Create New PIN"}),t.jsx("p",{className:"text-sm text-[rgba(251,251,251,0.6)]",children:"Enter a new 6-digit PIN"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"New PIN"}),t.jsx("input",{type:"password",value:E,onChange:T=>{const O=T.target.value;(O===""||/^\d+$/.test(O))&&A(O)},onKeyPress:R,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-2xl tracking-widest text-center placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"     ",autoFocus:!0,maxLength:6,inputMode:"numeric"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-bold text-[rgba(251,251,251,0.9)] mb-3 uppercase tracking-wide",children:"Confirm PIN"}),t.jsx("input",{type:"password",value:M,onChange:T=>{const O=T.target.value;(O===""||/^\d+$/.test(O))&&B(O)},onKeyPress:R,className:"w-full px-5 py-4 bg-[rgba(251,251,251,0.08)] border-2 border-[rgba(255,212,28,0.3)] rounded-xl text-[#FBFBFB] text-2xl tracking-widest text-center placeholder-[rgba(251,251,251,0.4)] focus:outline-none focus:border-[#FFD41C] focus:bg-[rgba(251,251,251,0.12)] transition-all",placeholder:"     ",maxLength:6,inputMode:"numeric"})]}),t.jsx("button",{onClick:N,disabled:u,className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:u?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Resetting..."]}):"Reset PIN"})]}),s==="forgot-confirm"&&t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-[rgba(34,197,94,0.15)] flex items-center justify-center border-2 border-[#22C55E]",children:t.jsx("svg",{className:"w-12 h-12 text-[#22C55E]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),t.jsx("h2",{className:"text-2xl font-bold text-[#22C55E] mb-3",children:"PIN Reset Successful!"}),t.jsxs("p",{className:"text-[rgba(251,251,251,0.7)] mb-8 text-sm leading-relaxed",children:["Your PIN has been successfully reset.",t.jsx("br",{}),"You can now login with your new 6-digit PIN."]}),t.jsx("button",{onClick:()=>{n("email"),f("")},className:"w-full bg-[#FFD41C] text-[#181D40] py-4 rounded-xl font-bold text-base uppercase tracking-wider hover:bg-[#FFC700] transition-all duration-200 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-[rgba(255,212,28,0.3)]",children:"Back to Login"})]}),t.jsx("div",{className:"mt-8 pt-6 border-t border-[rgba(255,212,28,0.2)] text-center",children:t.jsx("p",{className:"text-xs text-[rgba(251,251,251,0.4)]",children:" 2026 National University Laguna"})})]}),t.jsx("style",{children:`
        /* Floating orb animations */
        @keyframes float {
          0%, 100% {
            transform: translateY(0px) translateX(0px) scale(1);
          }
          33% {
            transform: translateY(-30px) translateX(20px) scale(1.1);
          }
          66% {
            transform: translateY(-15px) translateX(-15px) scale(0.9);
          }
        }

        @keyframes float-delayed {
          0%, 100% {
            transform: translateY(0px) translateX(0px) scale(1);
          }
          33% {
            transform: translateY(25px) translateX(-25px) scale(0.9);
          }
          66% {
            transform: translateY(-20px) translateX(15px) scale(1.1);
          }
        }

        .animate-float {
          animation: float 20s ease-in-out infinite;
        }

        .animate-float-delayed {
          animation: float-delayed 25s ease-in-out infinite;
        }

        /* Slow pulse for background */
        @keyframes pulse-slow {
          0%, 100% {
            opacity: 0.03;
            transform: translate(-50%, -50%) scale(1);
          }
          50% {
            opacity: 0.05;
            transform: translate(-50%, -50%) scale(1.1);
          }
        }

        .animate-pulse-slow {
          animation: pulse-slow 8s ease-in-out infinite;
        }

        /* Particle animations */
        @keyframes particle-1 {
          0%, 100% {
            transform: translateY(0) translateX(0);
            opacity: 0.3;
          }
          50% {
            transform: translateY(-100px) translateX(50px);
            opacity: 0.6;
          }
        }

        @keyframes particle-2 {
          0%, 100% {
            transform: translateY(0) translateX(0) scale(1);
            opacity: 0.2;
          }
          50% {
            transform: translateY(80px) translateX(-60px) scale(1.5);
            opacity: 0.5;
          }
        }

        @keyframes particle-3 {
          0%, 100% {
            transform: translateY(0) translateX(0);
            opacity: 0.25;
          }
          50% {
            transform: translateY(-120px) translateX(-40px);
            opacity: 0.5;
          }
        }

        @keyframes particle-4 {
          0%, 100% {
            transform: translateY(0) translateX(0) scale(1);
            opacity: 0.4;
          }
          50% {
            transform: translateY(60px) translateX(80px) scale(2);
            opacity: 0.7;
          }
        }

        .animate-particle-1 {
          animation: particle-1 15s ease-in-out infinite;
        }

        .animate-particle-2 {
          animation: particle-2 12s ease-in-out infinite;
        }

        .animate-particle-3 {
          animation: particle-3 18s ease-in-out infinite;
        }

        .animate-particle-4 {
          animation: particle-4 10s ease-in-out infinite;
        }

        /* Shimmer effect for gradient lines */
        @keyframes shimmer-slow {
          0% {
            opacity: 0.05;
          }
          50% {
            opacity: 0.15;
          }
          100% {
            opacity: 0.05;
          }
        }

        .animate-shimmer-slow {
          animation: shimmer-slow 6s ease-in-out infinite;
        }

        /* Slide up animation for login card */
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(30px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }

        .animate-slideUp {
          animation: slideUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Enhanced input focus glow */
        input:focus {
          box-shadow: 0 0 0 3px rgba(255, 212, 28, 0.1),
                      0 0 20px rgba(255, 212, 28, 0.15);
        }

        /* Button hover glow */
        button:hover:not(:disabled) {
          box-shadow: 0 8px 30px rgba(255, 212, 28, 0.4),
                      0 0 40px rgba(255, 212, 28, 0.2);
        }

        /* Smooth step transitions */
        .step-transition {
          animation: fadeInStep 0.4s ease-out;
        }

        @keyframes fadeInStep {
          from {
            opacity: 0;
            transform: translateX(-20px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
      `})]})}const Tl="http://18.166.29.239:3000/api",R2={admin:{title:"Administrator Terms and Conditions",sections:[{title:"1. Administrative Responsibilities",content:"As an administrator of the NUCash system, you are entrusted with managing financial transactions, user accounts, and system configurations. You agree to perform your duties with utmost integrity and professionalism."},{title:"2. Data Privacy and Confidentiality",content:"You acknowledge that you will have access to sensitive user information including personal data and financial records. You agree to maintain strict confidentiality and comply with the Data Privacy Act of 2012 (Republic Act No. 10173)."},{title:"3. Security Protocols",content:"You agree to follow all security protocols including: keeping your PIN confidential, logging out after each session, reporting any suspicious activities immediately, and never sharing your credentials with others."},{title:"4. Transaction Handling",content:"All financial transactions must be processed accurately and recorded properly. Any discrepancies must be reported immediately to your supervisor. Unauthorized transactions or fund manipulation is strictly prohibited and may result in disciplinary action."},{title:"5. System Usage",content:"The NUCash administrative system is to be used solely for authorized purposes. Personal use, unauthorized access to other accounts, or any form of system abuse is prohibited."},{title:"6. Liability",content:"You understand that any violation of these terms may result in suspension of access, disciplinary action, and potential legal consequences. National University reserves the right to audit all administrative activities."}]},user:{title:"NUCash User Agreement",sections:[{title:"1. Account Registration",content:"By activating your NUCash account, you confirm that all information provided during registration is accurate and complete. You agree to keep your account information up to date."},{title:"2. PIN Security",content:"Your 6-digit PIN is your primary authentication method. You are responsible for keeping your PIN confidential. Never share your PIN with anyone, including NUCash staff. We will never ask for your PIN."},{title:"3. RFID Card Usage",content:"Your NUCash account is linked to your RFID card. Report any lost or stolen cards immediately to the Treasury Office. You are responsible for all transactions made with your card until it is reported lost."},{title:"4. Transaction Terms",content:"All transactions are final once processed. Your NUCash balance can be used for shuttle fare payments, merchant purchases, and other campus services. Negative balances up to the allowed limit may be permitted."},{title:"5. Privacy Policy",content:"National University collects and processes your personal data in accordance with the Data Privacy Act of 2012. Your transaction history and account information are kept confidential and used only for system operations."},{title:"6. Account Deactivation",content:"You may request to deactivate your account at any time. Any remaining balance will be refunded according to university policy. Inactive accounts may be automatically suspended after extended periods of non-use."}]}};function z2(){const[e]=q1(),a=Je(),r=e.get("accountId"),s=e.get("accountType")||"user",n=e.get("email")||"",l=e.get("fullName")||"",o=["admin","motorpool","treasury","accounting","merchant"].includes(s),i=o?"admin":"user",[c,u]=p.useState("terms"),[d,x]=p.useState(!1),[m,b]=p.useState(""),[v,S]=p.useState(!1),[h,y]=p.useState(!1),g=p.useRef(null),[f,j]=p.useState(""),[C,E]=p.useState(""),[A,M]=p.useState(!1),[B,F]=p.useState(["","","","","",""]),L=p.useRef([]),[k,U]=p.useState(0);p.useEffect(()=>{r||($.error("Invalid activation link. Please try logging in again."),a("/login"))},[r,a]);const D=W=>{const{scrollTop:Z,scrollHeight:te,clientHeight:I}=W.target;Z+I>=te-10&&y(!0)},_=async()=>{if(!v){$.warning("Please read and accept the terms and conditions");return}x(!0),b("");try{const W=await fetch(`${Tl}/activation/accept-terms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:r,accountType:o?"admin":"user"})}),Z=await W.json();if(!W.ok)throw new Error(Z.error||"Failed to accept terms");$.success("Terms accepted!"),u("pin")}catch(W){b(W.message),$.error(W.message)}finally{x(!1)}},z=async()=>{if(f.length!==6){b("PIN must be exactly 6 digits");return}if(!/^\d{6}$/.test(f)){b("PIN must contain only numbers");return}if(f!==C){b("PINs do not match");return}if(["123456","654321","111111","222222","333333","444444","555555","666666","777777","888888","999999","000000"].includes(f)){b("Please choose a stronger PIN");return}x(!0),b("");try{const Z=await fetch(`${Tl}/activation/set-new-pin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:r,accountType:o?"admin":"user",newPin:f})}),te=await Z.json();if(!Z.ok)throw new Error(te.error||"Failed to set PIN");$.success("PIN set! Check your email for the verification code."),u("otp"),U(60)}catch(Z){b(Z.message),$.error(Z.message)}finally{x(!1)}},q=(W,Z)=>{var I;if(!/^\d*$/.test(Z))return;const te=[...B];te[W]=Z.slice(-1),F(te),Z&&W<5&&((I=L.current[W+1])==null||I.focus())},w=(W,Z)=>{var te;Z.key==="Backspace"&&!B[W]&&W>0&&((te=L.current[W-1])==null||te.focus())},N=W=>{var te;W.preventDefault();const Z=W.clipboardData.getData("text").slice(0,6);if(/^\d+$/.test(Z)){const I=Z.split("").concat(Array(6).fill("")).slice(0,6);F(I),(te=L.current[Math.min(Z.length,5)])==null||te.focus()}},R=async()=>{const W=B.join("");if(W.length!==6){b("Please enter the complete 6-digit code");return}x(!0),b("");try{const Z=await fetch(`${Tl}/activation/verify-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:r,accountType:o?"admin":"user",otp:W})}),te=await Z.json();if(!Z.ok)throw new Error(te.error||"Invalid verification code");$.success("Account activated successfully!"),u("success")}catch(Z){b(Z.message),$.error(Z.message)}finally{x(!1)}},T=async()=>{if(!(k>0)){x(!0);try{const W=await fetch(`${Tl}/activation/resend-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:r,accountType:o?"admin":"user"})}),Z=await W.json();if(!W.ok)throw new Error(Z.error||"Failed to resend code");$.success("Verification code resent!"),U(60),F(["","","","","",""])}catch(W){$.error(W.message)}finally{x(!1)}}};p.useEffect(()=>{if(k>0){const W=setTimeout(()=>U(k-1),1e3);return()=>clearTimeout(W)}},[k]);const O=()=>{a("/login")},V=R2[i],P=["Terms","PIN","Verify","Done"];return t.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0F1227 0%, #181D40 100%)",position:"relative",overflow:"hidden",padding:"20px"},children:[t.jsxs("div",{style:{position:"absolute",inset:0,overflow:"hidden",pointerEvents:"none"},children:[t.jsx("div",{style:{position:"absolute",top:"25%",left:"-80px",width:"384px",height:"384px",background:"#FFD41C",opacity:.05,borderRadius:"50%",filter:"blur(60px)"}}),t.jsx("div",{style:{position:"absolute",bottom:"25%",right:"-80px",width:"384px",height:"384px",background:"#FFD41C",opacity:.05,borderRadius:"50%",filter:"blur(60px)"}})]}),t.jsxs("div",{style:{position:"relative",zIndex:10,width:"100%",maxWidth:"500px"},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[t.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"96px",height:"96px",background:"#FFD41C",borderRadius:"50%",marginBottom:"24px",boxShadow:"0 8px 32px rgba(255, 212, 28, 0.4)"},children:t.jsx("span",{style:{fontSize:"48px",fontWeight:800,color:"#181D40"},children:"NU"})}),t.jsx("h1",{style:{fontSize:"28px",fontWeight:800,color:"#FBFBFB",margin:"0 0 8px 0",letterSpacing:"-0.5px"},children:"Account Activation"}),t.jsxs("p",{style:{color:"rgba(251, 251, 251, 0.6)",margin:0,fontSize:"14px"},children:["Welcome, ",t.jsx("span",{style:{color:"#FFD41C",fontWeight:600},children:l||n})]})]}),t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"32px"},children:P.map((W,Z)=>{const I=["terms","pin","otp","success"].indexOf(c),Y=I>Z,G=I===Z;return t.jsxs(je.Fragment,{children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"6px"},children:[t.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"14px",transition:"all 0.3s ease",background:G?"#FFD41C":Y?"#22C55E":"rgba(255, 255, 255, 0.1)",color:G?"#181D40":Y?"#FFFFFF":"rgba(251, 251, 251, 0.4)",border:G?"3px solid rgba(255, 212, 28, 0.5)":Y?"3px solid rgba(34, 197, 94, 0.5)":"3px solid rgba(255, 255, 255, 0.1)",boxShadow:G?"0 4px 20px rgba(255, 212, 28, 0.4)":Y?"0 4px 20px rgba(34, 197, 94, 0.3)":"none"},children:Y?"":Z+1}),t.jsx("span",{style:{fontSize:"11px",fontWeight:600,color:G?"#FFD41C":Y?"#22C55E":"rgba(251, 251, 251, 0.4)",textTransform:"uppercase",letterSpacing:"0.5px"},children:W})]}),Z<3&&t.jsx("div",{style:{width:"40px",height:"3px",borderRadius:"2px",background:Y?"#22C55E":"rgba(255, 255, 255, 0.1)",marginBottom:"20px"}})]},W)})}),t.jsxs("div",{style:{background:"rgba(30, 35, 71, 0.95)",borderRadius:"20px",border:"2px solid rgba(255, 212, 28, 0.3)",overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.4)",backdropFilter:"blur(10px)"},children:[c==="terms"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(255, 212, 28, 0.15) 0%, rgba(255, 212, 28, 0.05) 100%)",borderBottom:"2px solid rgba(255, 212, 28, 0.2)",padding:"20px 24px"},children:[t.jsxs("h2",{style:{color:"#FFD41C",fontSize:"20px",fontWeight:700,margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," ",V.title]}),t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.6)",fontSize:"13px",margin:"8px 0 0 0"},children:"Please read carefully before proceeding"})]}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsx("div",{ref:g,onScroll:D,style:{height:"280px",overflowY:"auto",background:"rgba(15, 18, 39, 0.5)",borderRadius:"12px",padding:"20px",marginBottom:"16px",border:"2px solid rgba(255, 212, 28, 0.15)"},children:V.sections.map((W,Z)=>t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h3",{style:{color:"#FFD41C",fontWeight:700,fontSize:"14px",margin:"0 0 8px 0"},children:W.title}),t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.7)",fontSize:"13px",lineHeight:"1.7",margin:0},children:W.content})]},Z))}),!h&&t.jsxs("p",{style:{color:"rgba(251, 251, 251, 0.4)",fontSize:"12px",textAlign:"center",marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[t.jsx("span",{children:""})," Scroll to the bottom to enable acceptance"]}),t.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:h?"pointer":"not-allowed",marginBottom:"24px",padding:"16px",background:v?"rgba(255, 212, 28, 0.1)":"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:v?"2px solid rgba(255, 212, 28, 0.3)":"2px solid rgba(255, 255, 255, 0.1)",transition:"all 0.2s ease"},children:[t.jsx("input",{type:"checkbox",checked:v,onChange:W=>S(W.target.checked),disabled:!h,style:{width:"20px",height:"20px",marginTop:"2px",cursor:h?"pointer":"not-allowed",accentColor:"#FFD41C"}}),t.jsxs("span",{style:{fontSize:"14px",color:h?"#FBFBFB":"rgba(251, 251, 251, 0.4)",lineHeight:"1.5"},children:["I have read and agree to the ",o?"Administrator":"User"," Terms and Conditions"]})]}),m&&t.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.3)",color:"#EF4444",padding:"12px 16px",borderRadius:"10px",marginBottom:"16px",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," ",m]}),t.jsx("button",{onClick:_,disabled:!v||d,style:{width:"100%",padding:"16px",borderRadius:"12px",border:"none",background:!v||d?"rgba(255, 212, 28, 0.3)":"#FFD41C",color:"#181D40",fontSize:"16px",fontWeight:700,cursor:!v||d?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:!v||d?"none":"0 4px 20px rgba(255, 212, 28, 0.4)",textTransform:"uppercase",letterSpacing:"1px"},children:d?"Processing...":"Accept & Continue "})]})]}),c==="pin"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.05) 100%)",borderBottom:"2px solid rgba(59, 130, 246, 0.2)",padding:"20px 24px"},children:[t.jsxs("h2",{style:{color:"#3B82F6",fontSize:"20px",fontWeight:700,margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," Set Your New PIN"]}),t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.6)",fontSize:"13px",margin:"8px 0 0 0"},children:"Create a secure 6-digit PIN for your account"})]}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",color:"#FFD41C",fontWeight:700,fontSize:"12px",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"New PIN"}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:A?"text":"password",value:f,onChange:W=>j(W.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,style:{width:"100%",padding:"16px 50px 16px 20px",borderRadius:"12px",border:"2px solid rgba(255, 212, 28, 0.3)",background:"rgba(15, 18, 39, 0.5)",color:"#FBFBFB",fontSize:"28px",fontFamily:"monospace",letterSpacing:"0.5em",textAlign:"center",outline:"none",boxSizing:"border-box",transition:"all 0.2s ease"},placeholder:"",onFocus:W=>{W.target.style.borderColor="#FFD41C",W.target.style.boxShadow="0 0 0 3px rgba(255, 212, 28, 0.1)"},onBlur:W=>{W.target.style.borderColor="rgba(255, 212, 28, 0.3)",W.target.style.boxShadow="none"}}),t.jsx("button",{type:"button",onClick:()=>M(!A),style:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"rgba(251, 251, 251, 0.5)",cursor:"pointer",fontSize:"20px",padding:"4px"},children:A?"":""})]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",color:"#FFD41C",fontWeight:700,fontSize:"12px",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Confirm PIN"}),t.jsx("input",{type:A?"text":"password",value:C,onChange:W=>E(W.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,style:{width:"100%",padding:"16px 20px",borderRadius:"12px",border:"2px solid rgba(255, 212, 28, 0.3)",background:"rgba(15, 18, 39, 0.5)",color:"#FBFBFB",fontSize:"28px",fontFamily:"monospace",letterSpacing:"0.5em",textAlign:"center",outline:"none",boxSizing:"border-box",transition:"all 0.2s ease"},placeholder:"",onFocus:W=>{W.target.style.borderColor="#FFD41C",W.target.style.boxShadow="0 0 0 3px rgba(255, 212, 28, 0.1)"},onBlur:W=>{W.target.style.borderColor="rgba(255, 212, 28, 0.3)",W.target.style.boxShadow="none"}})]}),C&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px",padding:"12px 16px",borderRadius:"10px",background:f===C?"rgba(34, 197, 94, 0.15)":"rgba(239, 68, 68, 0.15)",border:`2px solid ${f===C?"rgba(34, 197, 94, 0.3)":"rgba(239, 68, 68, 0.3)"}`,color:f===C?"#22C55E":"#EF4444",fontSize:"14px",fontWeight:600},children:[t.jsx("span",{children:f===C?"":""}),f===C?"PINs match":"PINs do not match"]}),t.jsxs("div",{style:{background:"rgba(255, 212, 28, 0.08)",borderRadius:"12px",padding:"16px",marginBottom:"20px",border:"2px solid rgba(255, 212, 28, 0.15)"},children:[t.jsxs("h4",{style:{color:"#FFD41C",fontWeight:700,fontSize:"13px",margin:"0 0 12px 0",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," PIN Tips"]}),t.jsxs("ul",{style:{margin:0,paddingLeft:"20px",color:"rgba(251, 251, 251, 0.6)",fontSize:"12px",lineHeight:"1.8"},children:[t.jsx("li",{children:"Use 6 digits that are easy for you to remember"}),t.jsx("li",{children:"Avoid simple patterns like 123456 or 111111"}),t.jsx("li",{children:"Don't use your birthday or phone number"}),t.jsx("li",{children:"Never share your PIN with anyone"})]})]}),m&&t.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.3)",color:"#EF4444",padding:"12px 16px",borderRadius:"10px",marginBottom:"16px",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," ",m]}),t.jsx("button",{onClick:z,disabled:f.length!==6||f!==C||d,style:{width:"100%",padding:"16px",borderRadius:"12px",border:"none",background:f.length!==6||f!==C||d?"rgba(59, 130, 246, 0.3)":"#3B82F6",color:"#FFFFFF",fontSize:"16px",fontWeight:700,cursor:f.length!==6||f!==C||d?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:f.length!==6||f!==C||d?"none":"0 4px 20px rgba(59, 130, 246, 0.4)",textTransform:"uppercase",letterSpacing:"1px"},children:d?"Setting PIN...":"Set PIN & Continue "})]})]}),c==="otp"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(34, 197, 94, 0.05) 100%)",borderBottom:"2px solid rgba(34, 197, 94, 0.2)",padding:"20px 24px"},children:[t.jsxs("h2",{style:{color:"#22C55E",fontSize:"20px",fontWeight:700,margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," Verify Your Email"]}),t.jsxs("p",{style:{color:"rgba(251, 251, 251, 0.6)",fontSize:"13px",margin:"8px 0 0 0"},children:["Enter the 6-digit code sent to ",t.jsx("strong",{style:{color:"#FFD41C"},children:n})]})]}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginBottom:"24px"},children:B.map((W,Z)=>t.jsx("input",{ref:te=>L.current[Z]=te,type:"text",inputMode:"numeric",maxLength:1,value:W,onChange:te=>q(Z,te.target.value),onKeyDown:te=>w(Z,te),onPaste:N,style:{width:"52px",height:"64px",textAlign:"center",fontSize:"28px",fontWeight:700,borderRadius:"12px",border:W?"2px solid #22C55E":"2px solid rgba(255, 212, 28, 0.3)",background:W?"rgba(34, 197, 94, 0.1)":"rgba(15, 18, 39, 0.5)",color:"#FBFBFB",outline:"none",transition:"all 0.2s ease"},onFocus:te=>{te.target.style.borderColor="#FFD41C",te.target.style.boxShadow="0 0 0 3px rgba(255, 212, 28, 0.2)"},onBlur:te=>{te.target.style.borderColor=W?"#22C55E":"rgba(255, 212, 28, 0.3)",te.target.style.boxShadow="none"}},Z))}),t.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.5)",fontSize:"13px",marginBottom:"8px"},children:"Didn't receive the code?"}),t.jsx("button",{onClick:T,disabled:k>0||d,style:{background:"none",border:"none",color:k>0||d?"rgba(251, 251, 251, 0.3)":"#FFD41C",fontWeight:700,fontSize:"14px",cursor:k>0||d?"not-allowed":"pointer",textDecoration:"underline",padding:"8px"},children:k>0?`Resend in ${k}s`:"Resend Code"})]}),m&&t.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.3)",color:"#EF4444",padding:"12px 16px",borderRadius:"10px",marginBottom:"16px",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," ",m]}),t.jsx("button",{onClick:R,disabled:B.join("").length!==6||d,style:{width:"100%",padding:"16px",borderRadius:"12px",border:"none",background:B.join("").length!==6||d?"rgba(34, 197, 94, 0.3)":"#22C55E",color:"#FFFFFF",fontSize:"16px",fontWeight:700,cursor:B.join("").length!==6||d?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:B.join("").length!==6||d?"none":"0 4px 20px rgba(34, 197, 94, 0.4)",textTransform:"uppercase",letterSpacing:"1px"},children:d?"Verifying...":"Verify & Activate "})]})]}),c==="success"&&t.jsxs("div",{style:{padding:"40px 24px",textAlign:"center"},children:[t.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100px",height:"100px",background:"linear-gradient(135deg, #22C55E 0%, #16A34A 100%)",borderRadius:"50%",marginBottom:"24px",boxShadow:"0 8px 32px rgba(34, 197, 94, 0.4)"},children:t.jsx("span",{style:{fontSize:"50px",color:"#FFFFFF"},children:""})}),t.jsx("h2",{style:{color:"#22C55E",fontSize:"26px",fontWeight:800,margin:"0 0 8px 0"},children:"Account Activated!"}),t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.7)",fontSize:"15px",margin:"0 0 24px 0",lineHeight:"1.6"},children:"Your account is now active. You can now log in with your new PIN."}),t.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"2px solid rgba(34, 197, 94, 0.3)"},children:[t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.5)",fontSize:"12px",margin:"0 0 4px 0",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Account Details"}),t.jsx("p",{style:{color:"#FBFBFB",fontWeight:700,fontSize:"18px",margin:"0 0 4px 0"},children:l||"User"}),t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.6)",fontSize:"14px",margin:0},children:n})]}),t.jsx("button",{onClick:O,style:{width:"100%",padding:"16px",borderRadius:"12px",border:"none",background:"#FFD41C",color:"#181D40",fontSize:"16px",fontWeight:700,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 20px rgba(255, 212, 28, 0.4)",textTransform:"uppercase",letterSpacing:"1px"},onMouseEnter:W=>{W.target.style.transform="translateY(-2px)",W.target.style.boxShadow="0 6px 24px rgba(255, 212, 28, 0.5)"},onMouseLeave:W=>{W.target.style.transform="translateY(0)",W.target.style.boxShadow="0 4px 20px rgba(255, 212, 28, 0.4)"},children:"Go to Login "})]})]}),t.jsxs("p",{style:{textAlign:"center",color:"rgba(251, 251, 251, 0.3)",fontSize:"12px",marginTop:"24px",lineHeight:"1.6"},children:["National University - Laguna Campus",t.jsx("br",{})," 2026 NUCash Digital Campus Wallet"]})]})]})}function Xr(){const{isDarkMode:e,toggleTheme:a}=ne();return t.jsx("button",{onClick:a,title:e?"Switch to Light Mode":"Switch to Dark Mode",style:{width:"40px",height:"40px",borderRadius:"50%",background:e?"rgba(255, 212, 28, 0.15)":"rgba(24, 29, 64, 0.1)",border:e?"2px solid rgba(255, 212, 28, 0.3)":"2px solid rgba(24, 29, 64, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",fontSize:"18px"},onMouseEnter:r=>{r.currentTarget.style.background=e?"rgba(255, 212, 28, 0.25)":"rgba(24, 29, 64, 0.15)",r.currentTarget.style.transform="scale(1.05) rotate(15deg)"},onMouseLeave:r=>{r.currentTarget.style.background=e?"rgba(255, 212, 28, 0.15)":"rgba(24, 29, 64, 0.1)",r.currentTarget.style.transform="scale(1) rotate(0deg)"},children:e?"":""})}function B2({adminData:e,onLogout:a,onOpenProfile:r}){var d;const{theme:s,isDarkMode:n}=ne(),[l,o]=p.useState(!1),i=p.useRef(null);p.useEffect(()=>{const x=m=>{i.current&&!i.current.contains(m.target)&&o(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const c=()=>{var b,v;if(!e)return"A";const x=((b=e.firstName)==null?void 0:b[0])||"",m=((v=e.lastName)==null?void 0:v[0])||"";return(x+m).toUpperCase()||"A"},u=()=>e&&`${e.firstName||""} ${e.lastName||""}`.trim()||"Admin";return t.jsxs("header",{style:{background:n?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${s.accent.primary}`,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsx("div",{style:{width:"45px",height:"45px",background:s.accent.primary,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:n?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:s.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash Admin Dashboard"}),t.jsx("p",{style:{fontSize:"12px",color:s.accent.primary,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"Motorpool Management System"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(34, 197, 94, 0.2)",padding:"6px 14px",borderRadius:"20px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[t.jsx("div",{style:{width:"7px",height:"7px",background:"#22C55E",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#22C55E"},children:"LIVE"})]}),t.jsx(Xr,{}),t.jsxs("div",{style:{position:"relative"},ref:i,children:[t.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${s.accent.primary}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:x=>{x.currentTarget.style.background=n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",x.currentTarget.style.transform="scale(1.02)"},onMouseLeave:x=>{x.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",x.currentTarget.style.transform="scale(1)"},children:[t.jsx("div",{style:{width:"32px",height:"32px",background:s.accent.primary,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:n?"#181D40":"#FFFFFF",flexShrink:0},children:c()}),t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:s.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&t.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:n?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${s.border.primary}`,boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 212, 28, 0.2)",marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:s.text.primary,marginBottom:"4px"},children:u()}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary},children:(e==null?void 0:e.email)||"admin@nu.edu.ph"}),t.jsx("div",{style:{fontSize:"10px",color:s.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:((d=e==null?void 0:e.role)==null?void 0:d.replace("_"," "))||"Admin"})]}),t.jsxs("button",{onClick:()=>{o(!1),r()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:s.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:x=>{x.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",x.currentTarget.style.color=s.accent.primary},onMouseLeave:x=>{x.currentTarget.style.background="transparent",x.currentTarget.style.color=s.text.primary},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Manage Profile"})]}),t.jsx("div",{style:{height:"1px",background:"rgba(255, 212, 28, 0.2)",margin:"8px 0"}}),t.jsxs("button",{onClick:()=>{o(!1),a()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:x=>{x.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:x=>{x.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]}),t.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.5;
            transform: scale(0.8);
          }
        }
        
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function gr(){const{theme:e,isDarkMode:a}=ne(),r=new Date().getFullYear();return t.jsx("footer",{style:{background:e.bg.primary,borderTop:`2px solid ${e.accent.primary}`,color:e.text.secondary,boxShadow:a?"0 -4px 20px rgba(0, 0, 0, 0.2)":"0 -4px 20px rgba(59, 130, 246, 0.05)"},className:"mt-auto px-[40px] py-[20px] text-center text-[12px]",children:t.jsxs("p",{className:"m-0",children:[" ",r," NUCash System | Jose Anjelo Abued, Ashley Gwyneth Cuevas, Jhustine Brylle Logronio |"," ",t.jsx(zo,{to:"/terms",style:{color:e.accent.primary},className:"hover:opacity-80 transition font-semibold",onMouseEnter:s=>s.currentTarget.style.opacity="0.8",onMouseLeave:s=>s.currentTarget.style.opacity="1",children:"Terms and Conditions"})," ","|"," ",t.jsx(zo,{to:"/privacy",style:{color:e.accent.primary},className:"hover:opacity-80 transition font-semibold",onMouseEnter:s=>s.currentTarget.style.opacity="0.8",onMouseLeave:s=>s.currentTarget.style.opacity="1",children:"Privacy Policy"})]})})}function D2({children:e}){const a=Je(),r=ht(),{theme:s,isDarkMode:n}=ne(),[l]=p.useState(()=>{const d=localStorage.getItem("adminData");return d?JSON.parse(d):null}),o=()=>{localStorage.clear(),a("/login")},i=()=>{a("/admin/motorpool/profile")},c=[{path:"/admin/motorpool",icon:"",label:"Home"},{path:"/admin/motorpool/routes",icon:"",label:"Routes"},{path:"/admin/motorpool/drivers",icon:"",label:"Drivers"},{path:"/admin/motorpool/shuttles",icon:"",label:"Shuttles"},{path:"/admin/motorpool/trips",icon:"",label:"Trips"},{path:"/admin/motorpool/phones",icon:"",label:"Phones"}],u=[{path:"/admin/logs",icon:"",label:"Logs"},{path:"/admin/motorpool/concerns",icon:"",label:"Concerns"},{path:"/admin/motorpool/configurations",icon:"",label:"Settings"}];return t.jsxs("div",{style:{background:s.bg.primary},className:"min-h-screen flex flex-col",children:[t.jsx(B2,{adminData:l,onLogout:o,onOpenProfile:i}),t.jsx("div",{style:{background:s.bg.primary},className:"h-4"}),t.jsx("div",{style:{background:s.bg.secondary,borderColor:s.border.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-8 rounded-lg px-6 py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:d=>{d.currentTarget.style.borderColor=s.border.hover,d.currentTarget.style.boxShadow=n?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:d=>{d.currentTarget.style.borderColor=s.border.primary,d.currentTarget.style.boxShadow=n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:t.jsxs("div",{className:"flex items-center gap-2",children:[c.map(d=>{const x=r.pathname===d.path;return t.jsxs("button",{onClick:()=>a(d.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.secondary},className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-md font-semibold text-sm
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.secondary)},children:[t.jsx("span",{className:`text-base transition-transform duration-300 ${x?"scale-110":""}`,children:d.icon}),t.jsx("span",{children:d.label})]},d.path)}),t.jsx("div",{className:"h-10 w-[2px] bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.4)] to-transparent mx-4"}),u.map(d=>{const x=r.pathname===d.path;return t.jsxs("button",{onClick:()=>a(d.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.tertiary},className:`
                  flex items-center gap-2 px-4 py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.tertiary)},children:[t.jsx("span",{className:`text-sm transition-transform duration-300 ${x?"scale-110":""}`,children:d.icon}),t.jsx("span",{children:d.label})]},d.path)})]})}),t.jsx("main",{className:"flex-1 p-8 overflow-auto animate-fadeIn",children:e}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${s.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${s.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${s.scrollbar.thumbHover};
        }
      `}),t.jsx(gr,{})]})}function _2({merchantData:e,onLogout:a,onOpenProfile:r}){const{theme:s,isDarkMode:n}=ne(),[l,o]=p.useState(!1),i=p.useRef(null);p.useEffect(()=>{const d=x=>{i.current&&!i.current.contains(x.target)&&o(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const c=()=>e&&(e.businessName||"").charAt(0).toUpperCase()||"M",u=()=>e&&e.businessName||"Merchant";return t.jsxs("header",{style:{background:n?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${s.accent.primary}`,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsx("div",{style:{width:"45px",height:"45px",background:s.accent.primary,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:n?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:s.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash Admin Dashboard"}),t.jsx("p",{style:{fontSize:"12px",color:s.accent.primary,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"Merchant Management System"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(34, 197, 94, 0.2)",padding:"6px 14px",borderRadius:"20px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[t.jsx("div",{style:{width:"7px",height:"7px",background:"#22C55E",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#22C55E"},children:"LIVE"})]}),t.jsx(Xr,{}),t.jsxs("div",{style:{position:"relative"},ref:i,children:[t.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${s.accent.primary}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background=n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",d.currentTarget.style.transform="scale(1.02)"},onMouseLeave:d=>{d.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",d.currentTarget.style.transform="scale(1)"},children:[t.jsx("div",{style:{width:"32px",height:"32px",background:s.accent.primary,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:n?"#181D40":"#FFFFFF",flexShrink:0},children:c()}),t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:s.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&t.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:n?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${s.border.primary}`,boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 212, 28, 0.2)",marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:s.text.primary,marginBottom:"4px"},children:u()}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary},children:(e==null?void 0:e.email)||"merchant@nu.edu.ph"}),t.jsx("div",{style:{fontSize:"10px",color:s.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:(e==null?void 0:e.merchantId)||"Merchant"})]}),t.jsxs("button",{onClick:()=>{o(!1),r()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:s.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",d.currentTarget.style.color=s.accent.primary},onMouseLeave:d=>{d.currentTarget.style.background="transparent",d.currentTarget.style.color=s.text.primary},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Manage Profile"})]}),t.jsx("div",{style:{height:"1px",background:"rgba(255, 212, 28, 0.2)",margin:"8px 0"}}),t.jsxs("button",{onClick:()=>{o(!1),a()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:d=>{d.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]}),t.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.5;
            transform: scale(0.8);
          }
        }

        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function M2({children:e}){const a=Je(),r=ht(),{theme:s,isDarkMode:n}=ne(),[l]=p.useState(()=>{const d=localStorage.getItem("adminData");return d?JSON.parse(d):null}),o=()=>{localStorage.clear(),a("/login")},i=()=>{a("/admin/merchant/profile")},c=[{path:"/admin/merchant",icon:"",label:"Home"},{path:"/admin/merchant/merchants",icon:"",label:"Merchants"},{path:"/admin/merchant/phones",icon:"",label:"Phones"}],u=[{path:"/admin/merchant/logs",icon:"",label:"Logs"},{path:"/admin/merchant/concerns",icon:"",label:"Concerns"},{path:"/admin/merchant/configurations",icon:"",label:"Settings"}];return t.jsxs("div",{style:{background:s.bg.primary},className:"min-h-screen flex flex-col",children:[t.jsx(_2,{merchantData:l,onLogout:o,onOpenProfile:i}),t.jsx("div",{style:{background:s.bg.primary},className:"h-4"}),t.jsx("div",{style:{background:s.bg.secondary,borderColor:s.border.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-8 rounded-lg px-6 py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:d=>{d.currentTarget.style.borderColor=s.border.hover,d.currentTarget.style.boxShadow=n?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:d=>{d.currentTarget.style.borderColor=s.border.primary,d.currentTarget.style.boxShadow=n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:t.jsxs("div",{className:"flex items-center gap-2",children:[c.map(d=>{const x=r.pathname===d.path;return t.jsxs("button",{onClick:()=>a(d.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.secondary},className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-md font-semibold text-sm
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.secondary)},children:[t.jsx("span",{className:`text-base transition-transform duration-300 ${x?"scale-110":""}`,children:d.icon}),t.jsx("span",{children:d.label})]},d.path)}),t.jsx("div",{className:"h-10 w-[2px] bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.4)] to-transparent mx-4"}),u.map(d=>{const x=r.pathname===d.path;return t.jsxs("button",{onClick:()=>a(d.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.tertiary},className:`
                  flex items-center gap-2 px-4 py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.tertiary)},children:[t.jsx("span",{className:`text-sm transition-transform duration-300 ${x?"scale-110":""}`,children:d.icon}),t.jsx("span",{children:d.label})]},d.path)})]})}),t.jsx("main",{className:"flex-1 p-8 overflow-auto animate-fadeIn",children:e}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${s.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${s.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${s.scrollbar.thumbHover};
        }
      `}),t.jsx(gr,{})]})}function I2({adminData:e,onLogout:a,onOpenProfile:r}){const{theme:s,isDarkMode:n}=ne(),[l,o]=p.useState(!1),i=p.useRef(null);p.useEffect(()=>{const d=x=>{i.current&&!i.current.contains(x.target)&&o(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const c=()=>{var m,b;if(!e)return"T";const d=((m=e.firstName)==null?void 0:m[0])||"",x=((b=e.lastName)==null?void 0:b[0])||"";return(d+x).toUpperCase()||"T"},u=()=>e&&`${e.firstName||""} ${e.lastName||""}`.trim()||"Treasury Admin";return t.jsxs("header",{style:{background:n?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${s.accent.primary}`,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsx("div",{style:{width:"45px",height:"45px",background:s.accent.primary,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:n?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:s.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash Admin Dashboard"}),t.jsx("p",{style:{fontSize:"12px",color:s.accent.primary,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"Treasury Management System"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(34, 197, 94, 0.2)",padding:"6px 14px",borderRadius:"20px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[t.jsx("div",{style:{width:"7px",height:"7px",background:"#22C55E",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#22C55E"},children:"LIVE"})]}),t.jsx(Xr,{}),t.jsxs("div",{style:{position:"relative"},ref:i,children:[t.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${s.accent.primary}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background=n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",d.currentTarget.style.transform="scale(1.02)"},onMouseLeave:d=>{d.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",d.currentTarget.style.transform="scale(1)"},children:[t.jsx("div",{style:{width:"32px",height:"32px",background:s.accent.primary,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:n?"#181D40":"#FFFFFF",flexShrink:0},children:c()}),t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:s.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&t.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:n?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${s.border.primary}`,boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${s.border.primary}`,marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:s.text.primary,marginBottom:"4px"},children:u()}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary},children:(e==null?void 0:e.email)||"treasury@nu.edu.ph"}),t.jsx("div",{style:{fontSize:"10px",color:s.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:"Treasury Admin"})]}),t.jsxs("button",{onClick:()=>{o(!1),r()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:s.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",d.currentTarget.style.color=s.accent.primary},onMouseLeave:d=>{d.currentTarget.style.background="transparent",d.currentTarget.style.color=s.text.primary},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Manage Profile"})]}),t.jsx("div",{style:{height:"1px",background:s.border.primary,margin:"8px 0"}}),t.jsxs("button",{onClick:()=>{o(!1),a()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:d=>{d.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]}),t.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.5; transform: scale(0.8); }
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-10px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]})}function L2({children:e}){const a=Je(),r=ht(),{theme:s,isDarkMode:n}=ne(),[l]=p.useState(()=>{const d=localStorage.getItem("adminData");return d?JSON.parse(d):null}),o=()=>{localStorage.clear(),a("/login")},i=()=>{a("/admin/treasury/profile")},c=[{path:"/admin/treasury/dashboard",icon:"",label:"Home"},{path:"/admin/treasury/transactions",icon:"",label:"Transactions"},{path:"/admin/treasury/merchants",icon:"",label:"Merchants"}],u=[{path:"/admin/treasury/logs",icon:"",label:"Logs"},{path:"/admin/treasury/concerns",icon:"",label:"Concerns"},{path:"/admin/treasury/config",icon:"",label:"Settings"}];return t.jsxs("div",{style:{background:s.bg.primary},className:"min-h-screen flex flex-col",children:[t.jsx(I2,{adminData:l,onLogout:o,onOpenProfile:i}),t.jsx("div",{style:{background:s.bg.primary},className:"h-4"}),t.jsx("div",{style:{background:s.bg.secondary,borderColor:s.border.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-8 rounded-lg px-6 py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:d=>{d.currentTarget.style.borderColor=s.border.hover,d.currentTarget.style.boxShadow=n?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:d=>{d.currentTarget.style.borderColor=s.border.primary,d.currentTarget.style.boxShadow=n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:t.jsxs("div",{className:"flex items-center gap-2",children:[c.map(d=>{const x=r.pathname===d.path;return t.jsxs("button",{onClick:()=>a(d.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.secondary},className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-md font-semibold text-sm
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.secondary)},children:[t.jsx("span",{className:`text-base transition-transform duration-300 ${x?"scale-110":""}`,children:d.icon}),t.jsx("span",{children:d.label})]},d.path)}),t.jsx("div",{className:"h-10 w-[2px] bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.4)] to-transparent mx-4"}),u.map(d=>{const x=r.pathname===d.path;return t.jsxs("button",{onClick:()=>a(d.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.tertiary},className:`
                  flex items-center gap-2 px-4 py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.tertiary)},children:[t.jsx("span",{className:`text-sm transition-transform duration-300 ${x?"scale-110":""}`,children:d.icon}),t.jsx("span",{children:d.label})]},d.path)})]})}),t.jsx("main",{className:"flex-1 p-8 overflow-auto animate-fadeIn",children:e}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${s.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${s.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${s.scrollbar.thumbHover};
        }
      `}),t.jsx(gr,{})]})}function U2({adminData:e,onLogout:a,onOpenProfile:r}){const{theme:s,isDarkMode:n}=ne(),[l,o]=p.useState(!1),i=p.useRef(null);p.useEffect(()=>{const d=x=>{i.current&&!i.current.contains(x.target)&&o(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const c=()=>{var m,b;if(!e)return"A";const d=((m=e.firstName)==null?void 0:m[0])||"",x=((b=e.lastName)==null?void 0:b[0])||"";return(d+x).toUpperCase()||"A"},u=()=>e&&`${e.firstName||""} ${e.lastName||""}`.trim()||"Accounting Admin";return t.jsxs("header",{style:{background:n?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${s.accent.primary}`,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsx("div",{style:{width:"45px",height:"45px",background:s.accent.primary,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:n?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:s.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash Admin Dashboard"}),t.jsx("p",{style:{fontSize:"12px",color:s.accent.primary,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"Accounting Management System"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(34, 197, 94, 0.2)",padding:"6px 14px",borderRadius:"20px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[t.jsx("div",{style:{width:"7px",height:"7px",background:"#22C55E",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#22C55E"},children:"LIVE"})]}),t.jsx(Xr,{}),t.jsxs("div",{style:{position:"relative"},ref:i,children:[t.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${s.accent.primary}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background=n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",d.currentTarget.style.transform="scale(1.02)"},onMouseLeave:d=>{d.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",d.currentTarget.style.transform="scale(1)"},children:[t.jsx("div",{style:{width:"32px",height:"32px",background:s.accent.primary,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:n?"#181D40":"#FFFFFF",flexShrink:0},children:c()}),t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:s.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&t.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:n?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${s.border.primary}`,boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${s.border.primary}`,marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:s.text.primary,marginBottom:"4px"},children:u()}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary},children:(e==null?void 0:e.email)||"accounting@nu.edu.ph"}),t.jsx("div",{style:{fontSize:"10px",color:s.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:"Accounting Admin"})]}),t.jsxs("button",{onClick:()=>{o(!1),r()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:s.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",d.currentTarget.style.color=s.accent.primary},onMouseLeave:d=>{d.currentTarget.style.background="transparent",d.currentTarget.style.color=s.text.primary},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Manage Profile"})]}),t.jsx("div",{style:{height:"1px",background:s.border.primary,margin:"8px 0"}}),t.jsxs("button",{onClick:()=>{o(!1),a()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:d=>{d.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]}),t.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.5; transform: scale(0.8); }
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-10px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]})}function O2({children:e}){const a=Je(),r=ht(),{theme:s,isDarkMode:n}=ne(),[l]=p.useState(()=>{const d=localStorage.getItem("adminData");return d?JSON.parse(d):null}),o=()=>{localStorage.clear(),a("/login")},i=()=>{a("/admin/accounting/profile")},c=[{path:"/admin/accounting/home",icon:"",label:"Home"},{path:"/admin/accounting/transactions",icon:"",label:"Transactions"},{path:"/admin/accounting/merchants",icon:"",label:"Merchants"}],u=[{path:"/admin/accounting/logs",icon:"",label:"Logs"},{path:"/admin/accounting/config",icon:"",label:"Settings"}];return t.jsxs("div",{style:{background:s.bg.primary},className:"min-h-screen flex flex-col",children:[t.jsx(U2,{adminData:l,onLogout:o,onOpenProfile:i}),t.jsx("div",{style:{background:s.bg.primary},className:"h-4"}),t.jsx("div",{style:{background:s.bg.secondary,borderColor:s.border.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-8 rounded-lg px-6 py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:d=>{d.currentTarget.style.borderColor=s.border.hover,d.currentTarget.style.boxShadow=n?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:d=>{d.currentTarget.style.borderColor=s.border.primary,d.currentTarget.style.boxShadow=n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:t.jsxs("div",{className:"flex items-center gap-2",children:[c.map(d=>{const x=r.pathname===d.path;return t.jsxs("button",{onClick:()=>a(d.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.secondary},className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-md font-semibold text-sm
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.secondary)},children:[t.jsx("span",{className:`text-base transition-transform duration-300 ${x?"scale-110":""}`,children:d.icon}),t.jsx("span",{children:d.label})]},d.path)}),t.jsx("div",{className:"h-10 w-[2px] bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.4)] to-transparent mx-4"}),u.map(d=>{const x=r.pathname===d.path;return t.jsxs("button",{onClick:()=>a(d.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.tertiary},className:`
                  flex items-center gap-2 px-4 py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.tertiary)},children:[t.jsx("span",{className:`text-sm transition-transform duration-300 ${x?"scale-110":""}`,children:d.icon}),t.jsx("span",{children:d.label})]},d.path)})]})}),t.jsx("main",{className:"flex-1 p-8 overflow-auto animate-fadeIn",children:e}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${s.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${s.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${s.scrollbar.thumbHover};
        }
      `}),t.jsx(gr,{})]})}function $2({adminData:e,onLogout:a,onOpenProfile:r}){const{theme:s,isDarkMode:n}=ne(),[l,o]=p.useState(!1),i=p.useRef(null),c=s.accent.primary,u=n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",d=n?"rgba(255, 212, 28, 0.3)":"rgba(59, 130, 246, 0.3)";p.useEffect(()=>{const b=v=>{i.current&&!i.current.contains(v.target)&&o(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const x=()=>{var S,h;if(!e)return"SA";const b=((S=e.firstName)==null?void 0:S[0])||"",v=((h=e.lastName)==null?void 0:h[0])||"";return(b+v).toUpperCase()||"SA"},m=()=>e&&`${e.firstName||""} ${e.lastName||""}`.trim()||"System Admin";return t.jsxs("header",{style:{background:n?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${c}`,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsx("div",{style:{width:"45px",height:"45px",background:n?"linear-gradient(135deg, #FFD41C 0%, #FFC700 100%)":"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:n?"#181D40":"#FFFFFF",boxShadow:n?"0 0 0 3px rgba(255, 212, 28, 0.2)":"0 0 0 3px rgba(59, 130, 246, 0.2)"},children:"NU"}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:s.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash Admin Dashboard"}),t.jsx("p",{style:{fontSize:"12px",color:c,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"System Administration"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(34, 197, 94, 0.2)",padding:"6px 14px",borderRadius:"20px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[t.jsx("div",{style:{width:"7px",height:"7px",background:"#22C55E",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#22C55E"},children:"LIVE"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:u,padding:"6px 14px",borderRadius:"20px",border:`1px solid ${d}`},children:[t.jsx("span",{style:{fontSize:"12px"},children:""}),t.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:c},children:"SYSTEM ADMIN"})]}),t.jsx(Xr,{}),t.jsxs("div",{style:{position:"relative"},ref:i,children:[t.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:u,border:`2px solid ${c}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:b=>{b.currentTarget.style.background="rgba(255, 212, 28, 0.3)",b.currentTarget.style.transform="scale(1.02)"},onMouseLeave:b=>{b.currentTarget.style.background=u,b.currentTarget.style.transform="scale(1)"},children:[t.jsx("div",{style:{width:"32px",height:"32px",background:n?"linear-gradient(135deg, #FFD41C 0%, #FFC700 100%)":"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:n?"#181D40":"#FFFFFF",flexShrink:0},children:x()}),t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:c,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&t.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:n?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${s.border.primary}`,boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${s.border.primary}`,marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:s.text.primary,marginBottom:"4px"},children:m()}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary},children:(e==null?void 0:e.email)||"sysad@nu.edu.ph"}),t.jsxs("div",{style:{fontSize:"10px",color:c,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px",display:"flex",alignItems:"center",gap:"4px"},children:[t.jsx("span",{children:""})," System Administrator"]})]}),t.jsxs("button",{onClick:()=>{o(!1),r()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:s.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:b=>{b.currentTarget.style.background=u,b.currentTarget.style.color=c},onMouseLeave:b=>{b.currentTarget.style.background="transparent",b.currentTarget.style.color=s.text.primary},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Manage Profile"})]}),t.jsx("div",{style:{height:"1px",background:s.border.primary,margin:"8px 0"}}),t.jsxs("button",{onClick:()=>{o(!1),a()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:b=>{b.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:b=>{b.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]}),t.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.5; transform: scale(0.8); }
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-10px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]})}function P2({children:e}){const a=Je(),r=ht(),{theme:s,isDarkMode:n}=ne(),[l]=p.useState(()=>{const m=localStorage.getItem("adminData");return m?JSON.parse(m):null}),o=s.accent.primary,i=n?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",c=()=>{localStorage.clear(),a("/login")},u=()=>{a("/admin/sysad/profile")},d=[{path:"/admin/sysad/dashboard",icon:"",label:"Home"},{path:"/admin/sysad/users",icon:"",label:"Manage Users"},{path:"/admin/sysad/transfer-card",icon:"",label:"Transfer Card"}],x=[{path:"/admin/sysad/logs",icon:"",label:"Logs"},{path:"/admin/sysad/concerns",icon:"",label:"Concerns"},{path:"/admin/sysad/config",icon:"",label:"Settings"}];return t.jsxs("div",{style:{background:s.bg.primary},className:"min-h-screen flex flex-col",children:[t.jsx($2,{adminData:l,onLogout:c,onOpenProfile:u}),t.jsx("div",{style:{background:s.bg.primary},className:"h-4"}),t.jsx("div",{style:{background:s.bg.secondary,borderColor:s.border.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-8 rounded-lg px-6 py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:m=>{m.currentTarget.style.borderColor=s.border.hover,m.currentTarget.style.boxShadow=n?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:m=>{m.currentTarget.style.borderColor=s.border.primary,m.currentTarget.style.boxShadow=n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:t.jsxs("div",{className:"flex items-center gap-2",children:[d.map(m=>{const b=r.pathname===m.path;return t.jsxs("button",{onClick:()=>a(m.path),style:{background:b?o:"transparent",color:b?n?"#181D40":"#FFFFFF":s.text.secondary},className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-md font-semibold text-sm
                  transition-all duration-300 ease-out
                  ${b?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:v=>{b||(v.currentTarget.style.background=i,v.currentTarget.style.color=o)},onMouseLeave:v=>{b||(v.currentTarget.style.background="transparent",v.currentTarget.style.color=s.text.secondary)},children:[t.jsx("span",{className:`text-base transition-transform duration-300 ${b?"scale-110":""}`,children:m.icon}),t.jsx("span",{children:m.label})]},m.path)}),t.jsx("div",{style:{background:`linear-gradient(to bottom, transparent, ${o}66, transparent)`},className:"h-10 w-[2px] mx-4"}),x.map(m=>{const b=r.pathname===m.path;return t.jsxs("button",{onClick:()=>a(m.path),style:{background:b?o:"transparent",color:b?n?"#181D40":"#FFFFFF":s.text.tertiary},className:`
                  flex items-center gap-2 px-4 py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${b?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:v=>{b||(v.currentTarget.style.background=i,v.currentTarget.style.color=o)},onMouseLeave:v=>{b||(v.currentTarget.style.background="transparent",v.currentTarget.style.color=s.text.tertiary)},children:[t.jsx("span",{className:`text-sm transition-transform duration-300 ${b?"scale-110":""}`,children:m.icon}),t.jsx("span",{children:m.label})]},m.path)})]})}),t.jsx("main",{className:"flex-1 p-8 overflow-auto animate-fadeIn",children:e}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${s.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${s.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${s.scrollbar.thumbHover};
        }
      `}),t.jsx(gr,{})]})}function H2({userData:e,onLogout:a,onOpenProfile:r}){const{theme:s,isDarkMode:n}=ne(),[l,o]=p.useState(!1),i=p.useRef(null);p.useEffect(()=>{const d=x=>{i.current&&!i.current.contains(x.target)&&o(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const c=()=>{var m,b;if(!e)return"U";const d=((m=e.firstName)==null?void 0:m[0])||"",x=((b=e.lastName)==null?void 0:b[0])||"";return(d+x).toUpperCase()||"U"},u=()=>e&&`${e.firstName||""} ${e.lastName||""}`.trim()||"User";return t.jsxs("header",{className:"sticky top-0 z-[1000] flex justify-between items-center px-3 py-3 sm:px-4 sm:py-4 md:px-10 md:py-5",style:{background:n?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",borderBottom:`2px solid ${s.accent.primary}`,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-5",children:[t.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 md:w-[45px] md:h-[45px] rounded-lg flex items-center justify-center font-extrabold text-base sm:text-lg md:text-[22px]",style:{background:s.accent.primary,color:n?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-base sm:text-lg md:text-2xl font-bold m-0",style:{color:s.text.primary,letterSpacing:"0.5px"},children:"NUCash"}),t.jsx("p",{className:"text-[10px] sm:text-xs font-semibold uppercase m-0 mt-0.5 hidden sm:block",style:{color:s.accent.primary,letterSpacing:"1px"},children:"Student Portal"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-5",children:[t.jsx(Xr,{}),t.jsxs("div",{className:"relative",ref:i,children:[t.jsxs("button",{onClick:()=>o(!l),className:"flex items-center gap-1 sm:gap-2 rounded-full p-1 pr-2 sm:pr-3 cursor-pointer transition-all duration-200",style:{background:n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${s.accent.primary}`},onMouseEnter:d=>{d.currentTarget.style.background=n?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",d.currentTarget.style.transform="scale(1.02)"},onMouseLeave:d=>{d.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",d.currentTarget.style.transform="scale(1)"},children:[t.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center font-extrabold text-xs sm:text-sm flex-shrink-0",style:{background:s.accent.primary,color:n?"#181D40":"#FFFFFF"},children:c()}),t.jsx("svg",{className:"w-3 h-3 hidden sm:block",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:s.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&t.jsxs("div",{className:"absolute top-12 right-0 rounded-xl py-2 min-w-[180px] sm:min-w-[220px] z-50",style:{background:n?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",border:`2px solid ${s.border.primary}`,boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${s.border.primary}`,marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:s.text.primary,marginBottom:"4px"},children:u()}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary},children:(e==null?void 0:e.email)||"student@nu.edu.ph"}),t.jsx("div",{style:{fontSize:"10px",color:s.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:(e==null?void 0:e.accountType)==="employee"?"Employee":"Student"})]}),t.jsxs("button",{onClick:()=>{o(!1),r&&r()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:s.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background=n?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",d.currentTarget.style.color=s.accent.primary},onMouseLeave:d=>{d.currentTarget.style.background="transparent",d.currentTarget.style.color=s.text.primary},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Manage Profile"})]}),t.jsx("div",{style:{height:"1px",background:s.border.primary,margin:"8px 0"}}),t.jsxs("button",{onClick:()=>{o(!1),a()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:d=>{d.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]}),t.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.5; transform: scale(0.8); }
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-10px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]})}function W2({children:e}){const a=Je(),r=ht(),{theme:s,isDarkMode:n}=ne(),[l]=p.useState(()=>{try{const d=localStorage.getItem("userData");return d&&d!=="undefined"&&d!=="null"?JSON.parse(d):null}catch(d){return console.error("Error parsing userData from localStorage:",d),null}}),o=()=>{localStorage.clear(),a("/login")},i=()=>{a("/user/profile")},c=[{path:"/user/dashboard",icon:"",label:"Home"},{path:"/user/history",icon:"",label:"History"},{path:"/user/concerns",icon:"",label:"My Concerns"}],u=[{path:"/faq",icon:"",label:"FAQs"}];return t.jsxs("div",{style:{background:s.bg.primary},className:"min-h-screen flex flex-col",children:[t.jsx(H2,{userData:l,onLogout:o,onOpenProfile:i}),t.jsx("div",{style:{background:s.bg.primary},className:"h-4"}),t.jsx("div",{style:{background:s.bg.secondary,borderColor:s.border.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"mx-3 sm:mx-4 md:mx-8 rounded-lg px-2 sm:px-4 md:px-6 py-2 sm:py-3 border backdrop-blur-sm transition-all duration-300",onMouseEnter:d=>{d.currentTarget.style.borderColor=s.border.hover,d.currentTarget.style.boxShadow=n?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:d=>{d.currentTarget.style.borderColor=s.border.primary,d.currentTarget.style.boxShadow=n?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:t.jsxs("div",{className:"flex flex-wrap items-center justify-center sm:justify-start gap-1 sm:gap-2",children:[c.map(d=>{const x=r.pathname===d.path;return t.jsxs("button",{onClick:()=>a(d.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.secondary},className:`
                  flex items-center gap-1 sm:gap-2 px-3 sm:px-5 py-2 sm:py-2.5 rounded-md font-semibold text-xs sm:text-sm
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.secondary)},children:[t.jsx("span",{className:`text-sm sm:text-base transition-transform duration-300 ${x?"scale-110":""}`,children:d.icon}),t.jsx("span",{className:"hidden xs:inline sm:inline",children:d.label})]},d.path)}),t.jsx("div",{className:"hidden sm:block h-10 w-[2px] bg-gradient-to-b from-transparent via-[rgba(255,212,28,0.4)] to-transparent mx-2 md:mx-4"}),u.map(d=>{const x=r.pathname===d.path;return t.jsxs("button",{onClick:()=>a(d.path),style:{background:x?s.accent.primary:"transparent",color:x?s.accent.secondary:s.text.tertiary},className:`
                  flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-2 sm:py-2.5 rounded-md font-semibold text-xs
                  transition-all duration-300 ease-out
                  ${x?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}
                `,onMouseEnter:m=>{x||(m.currentTarget.style.background=n?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",m.currentTarget.style.color=s.accent.primary)},onMouseLeave:m=>{x||(m.currentTarget.style.background="transparent",m.currentTarget.style.color=s.text.tertiary)},children:[t.jsx("span",{className:`text-sm transition-transform duration-300 ${x?"scale-110":""}`,children:d.icon}),t.jsx("span",{className:"hidden xs:inline sm:inline",children:d.label})]},d.path)})]})}),t.jsx("main",{className:"flex-1 p-3 sm:p-4 md:p-8 overflow-auto animate-fadeIn",children:e}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out;
        }
        .scale-102 {
          transform: scale(1.02);
        }
        *::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        *::-webkit-scrollbar-track {
          background: ${s.scrollbar.track};
          border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
          background: ${s.scrollbar.thumb};
          border-radius: 10px;
          transition: background 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
          background: ${s.scrollbar.thumbHover};
        }
      `}),t.jsx(gr,{})]})}function oh(e,a){return function(){return e.apply(a,arguments)}}const{toString:q2}=Object.prototype,{getPrototypeOf:Cu}=Object,{iterator:si,toStringTag:ih}=Symbol,ni=(e=>a=>{const r=q2.call(a);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),na=e=>(e=e.toLowerCase(),a=>ni(a)===e),li=e=>a=>typeof a===e,{isArray:Qs}=Array,Ms=li("undefined");function ol(e){return e!==null&&!Ms(e)&&e.constructor!==null&&!Ms(e.constructor)&&St(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ch=na("ArrayBuffer");function Y2(e){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(e):a=e&&e.buffer&&ch(e.buffer),a}const G2=li("string"),St=li("function"),dh=li("number"),il=e=>e!==null&&typeof e=="object",V2=e=>e===!0||e===!1,Xl=e=>{if(ni(e)!=="object")return!1;const a=Cu(e);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(ih in e)&&!(si in e)},X2=e=>{if(!il(e)||ol(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Q2=na("Date"),Z2=na("File"),J2=na("Blob"),K2=na("FileList"),ev=e=>il(e)&&St(e.pipe),tv=e=>{let a;return e&&(typeof FormData=="function"&&e instanceof FormData||St(e.append)&&((a=ni(e))==="formdata"||a==="object"&&St(e.toString)&&e.toString()==="[object FormData]"))},av=na("URLSearchParams"),[rv,sv,nv,lv]=["ReadableStream","Request","Response","Headers"].map(na),ov=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function cl(e,a,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,n;if(typeof e!="object"&&(e=[e]),Qs(e))for(s=0,n=e.length;s<n;s++)a.call(null,e[s],s,e);else{if(ol(e))return;const l=r?Object.getOwnPropertyNames(e):Object.keys(e),o=l.length;let i;for(s=0;s<o;s++)i=l[s],a.call(null,e[i],i,e)}}function uh(e,a){if(ol(e))return null;a=a.toLowerCase();const r=Object.keys(e);let s=r.length,n;for(;s-- >0;)if(n=r[s],a===n.toLowerCase())return n;return null}const Er=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ph=e=>!Ms(e)&&e!==Er;function id(){const{caseless:e,skipUndefined:a}=ph(this)&&this||{},r={},s=(n,l)=>{const o=e&&uh(r,l)||l;Xl(r[o])&&Xl(n)?r[o]=id(r[o],n):Xl(n)?r[o]=id({},n):Qs(n)?r[o]=n.slice():(!a||!Ms(n))&&(r[o]=n)};for(let n=0,l=arguments.length;n<l;n++)arguments[n]&&cl(arguments[n],s);return r}const iv=(e,a,r,{allOwnKeys:s}={})=>(cl(a,(n,l)=>{r&&St(n)?e[l]=oh(n,r):e[l]=n},{allOwnKeys:s}),e),cv=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),dv=(e,a,r,s)=>{e.prototype=Object.create(a.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:a.prototype}),r&&Object.assign(e.prototype,r)},uv=(e,a,r,s)=>{let n,l,o;const i={};if(a=a||{},e==null)return a;do{for(n=Object.getOwnPropertyNames(e),l=n.length;l-- >0;)o=n[l],(!s||s(o,e,a))&&!i[o]&&(a[o]=e[o],i[o]=!0);e=r!==!1&&Cu(e)}while(e&&(!r||r(e,a))&&e!==Object.prototype);return a},pv=(e,a,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=a.length;const s=e.indexOf(a,r);return s!==-1&&s===r},xv=e=>{if(!e)return null;if(Qs(e))return e;let a=e.length;if(!dh(a))return null;const r=new Array(a);for(;a-- >0;)r[a]=e[a];return r},mv=(e=>a=>e&&a instanceof e)(typeof Uint8Array<"u"&&Cu(Uint8Array)),fv=(e,a)=>{const s=(e&&e[si]).call(e);let n;for(;(n=s.next())&&!n.done;){const l=n.value;a.call(e,l[0],l[1])}},gv=(e,a)=>{let r;const s=[];for(;(r=e.exec(a))!==null;)s.push(r);return s},hv=na("HTMLFormElement"),bv=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,n){return s.toUpperCase()+n}),gx=(({hasOwnProperty:e})=>(a,r)=>e.call(a,r))(Object.prototype),yv=na("RegExp"),xh=(e,a)=>{const r=Object.getOwnPropertyDescriptors(e),s={};cl(r,(n,l)=>{let o;(o=a(n,l,e))!==!1&&(s[l]=o||n)}),Object.defineProperties(e,s)},vv=e=>{xh(e,(a,r)=>{if(St(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(St(s)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},jv=(e,a)=>{const r={},s=n=>{n.forEach(l=>{r[l]=!0})};return Qs(e)?s(e):s(String(e).split(a)),r},Nv=()=>{},Sv=(e,a)=>e!=null&&Number.isFinite(e=+e)?e:a;function wv(e){return!!(e&&St(e.append)&&e[ih]==="FormData"&&e[si])}const Cv=e=>{const a=new Array(10),r=(s,n)=>{if(il(s)){if(a.indexOf(s)>=0)return;if(ol(s))return s;if(!("toJSON"in s)){a[n]=s;const l=Qs(s)?[]:{};return cl(s,(o,i)=>{const c=r(o,n+1);!Ms(c)&&(l[i]=c)}),a[n]=void 0,l}}return s};return r(e,0)},kv=na("AsyncFunction"),Fv=e=>e&&(il(e)||St(e))&&St(e.then)&&St(e.catch),mh=((e,a)=>e?setImmediate:a?((r,s)=>(Er.addEventListener("message",({source:n,data:l})=>{n===Er&&l===r&&s.length&&s.shift()()},!1),n=>{s.push(n),Er.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",St(Er.postMessage)),Tv=typeof queueMicrotask<"u"?queueMicrotask.bind(Er):typeof process<"u"&&process.nextTick||mh,Ev=e=>e!=null&&St(e[si]),Q={isArray:Qs,isArrayBuffer:ch,isBuffer:ol,isFormData:tv,isArrayBufferView:Y2,isString:G2,isNumber:dh,isBoolean:V2,isObject:il,isPlainObject:Xl,isEmptyObject:X2,isReadableStream:rv,isRequest:sv,isResponse:nv,isHeaders:lv,isUndefined:Ms,isDate:Q2,isFile:Z2,isBlob:J2,isRegExp:yv,isFunction:St,isStream:ev,isURLSearchParams:av,isTypedArray:mv,isFileList:K2,forEach:cl,merge:id,extend:iv,trim:ov,stripBOM:cv,inherits:dv,toFlatObject:uv,kindOf:ni,kindOfTest:na,endsWith:pv,toArray:xv,forEachEntry:fv,matchAll:gv,isHTMLForm:hv,hasOwnProperty:gx,hasOwnProp:gx,reduceDescriptors:xh,freezeMethods:vv,toObjectSet:jv,toCamelCase:bv,noop:Nv,toFiniteNumber:Sv,findKey:uh,global:Er,isContextDefined:ph,isSpecCompliantForm:wv,toJSONObject:Cv,isAsyncFn:kv,isThenable:Fv,setImmediate:mh,asap:Tv,isIterable:Ev};function pe(e,a,r,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",a&&(this.code=a),r&&(this.config=r),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}Q.inherits(pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const fh=pe.prototype,gh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{gh[e]={value:e}});Object.defineProperties(pe,gh);Object.defineProperty(fh,"isAxiosError",{value:!0});pe.from=(e,a,r,s,n,l)=>{const o=Object.create(fh);Q.toFlatObject(e,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const i=e&&e.message?e.message:"Error",c=a==null&&e?e.code:a;return pe.call(o,i,c,r,s,n),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",l&&Object.assign(o,l),o};const Av=null;function cd(e){return Q.isPlainObject(e)||Q.isArray(e)}function hh(e){return Q.endsWith(e,"[]")?e.slice(0,-2):e}function hx(e,a,r){return e?e.concat(a).map(function(n,l){return n=hh(n),!r&&l?"["+n+"]":n}).join(r?".":""):a}function Rv(e){return Q.isArray(e)&&!e.some(cd)}const zv=Q.toFlatObject(Q,{},null,function(a){return/^is[A-Z]/.test(a)});function oi(e,a,r){if(!Q.isObject(e))throw new TypeError("target must be an object");a=a||new FormData,r=Q.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,h){return!Q.isUndefined(h[S])});const s=r.metaTokens,n=r.visitor||d,l=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Q.isSpecCompliantForm(a);if(!Q.isFunction(n))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(Q.isDate(v))return v.toISOString();if(Q.isBoolean(v))return v.toString();if(!c&&Q.isBlob(v))throw new pe("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(v)||Q.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,S,h){let y=v;if(v&&!h&&typeof v=="object"){if(Q.endsWith(S,"{}"))S=s?S:S.slice(0,-2),v=JSON.stringify(v);else if(Q.isArray(v)&&Rv(v)||(Q.isFileList(v)||Q.endsWith(S,"[]"))&&(y=Q.toArray(v)))return S=hh(S),y.forEach(function(f,j){!(Q.isUndefined(f)||f===null)&&a.append(o===!0?hx([S],j,l):o===null?S:S+"[]",u(f))}),!1}return cd(v)?!0:(a.append(hx(h,S,l),u(v)),!1)}const x=[],m=Object.assign(zv,{defaultVisitor:d,convertValue:u,isVisitable:cd});function b(v,S){if(!Q.isUndefined(v)){if(x.indexOf(v)!==-1)throw Error("Circular reference detected in "+S.join("."));x.push(v),Q.forEach(v,function(y,g){(!(Q.isUndefined(y)||y===null)&&n.call(a,y,Q.isString(g)?g.trim():g,S,m))===!0&&b(y,S?S.concat(g):[g])}),x.pop()}}if(!Q.isObject(e))throw new TypeError("data must be an object");return b(e),a}function bx(e){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return a[s]})}function ku(e,a){this._pairs=[],e&&oi(e,this,a)}const bh=ku.prototype;bh.append=function(a,r){this._pairs.push([a,r])};bh.toString=function(a){const r=a?function(s){return a.call(this,s,bx)}:bx;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function Bv(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function yh(e,a,r){if(!a)return e;const s=r&&r.encode||Bv;Q.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let l;if(n?l=n(a,r):l=Q.isURLSearchParams(a)?a.toString():new ku(a,r).toString(s),l){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class yx{constructor(){this.handlers=[]}use(a,r,s){return this.handlers.push({fulfilled:a,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){Q.forEach(this.handlers,function(s){s!==null&&a(s)})}}const vh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Dv=typeof URLSearchParams<"u"?URLSearchParams:ku,_v=typeof FormData<"u"?FormData:null,Mv=typeof Blob<"u"?Blob:null,Iv={isBrowser:!0,classes:{URLSearchParams:Dv,FormData:_v,Blob:Mv},protocols:["http","https","file","blob","url","data"]},Fu=typeof window<"u"&&typeof document<"u",dd=typeof navigator=="object"&&navigator||void 0,Lv=Fu&&(!dd||["ReactNative","NativeScript","NS"].indexOf(dd.product)<0),Uv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ov=Fu&&window.location.href||"http://localhost",$v=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fu,hasStandardBrowserEnv:Lv,hasStandardBrowserWebWorkerEnv:Uv,navigator:dd,origin:Ov},Symbol.toStringTag,{value:"Module"})),ut={...$v,...Iv};function Pv(e,a){return oi(e,new ut.classes.URLSearchParams,{visitor:function(r,s,n,l){return ut.isNode&&Q.isBuffer(r)?(this.append(s,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...a})}function Hv(e){return Q.matchAll(/\w+|\[(\w*)]/g,e).map(a=>a[0]==="[]"?"":a[1]||a[0])}function Wv(e){const a={},r=Object.keys(e);let s;const n=r.length;let l;for(s=0;s<n;s++)l=r[s],a[l]=e[l];return a}function jh(e){function a(r,s,n,l){let o=r[l++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),c=l>=r.length;return o=!o&&Q.isArray(n)?n.length:o,c?(Q.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!i):((!n[o]||!Q.isObject(n[o]))&&(n[o]=[]),a(r,s,n[o],l)&&Q.isArray(n[o])&&(n[o]=Wv(n[o])),!i)}if(Q.isFormData(e)&&Q.isFunction(e.entries)){const r={};return Q.forEachEntry(e,(s,n)=>{a(Hv(s),n,r,0)}),r}return null}function qv(e,a,r){if(Q.isString(e))try{return(a||JSON.parse)(e),Q.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const dl={transitional:vh,adapter:["xhr","http","fetch"],transformRequest:[function(a,r){const s=r.getContentType()||"",n=s.indexOf("application/json")>-1,l=Q.isObject(a);if(l&&Q.isHTMLForm(a)&&(a=new FormData(a)),Q.isFormData(a))return n?JSON.stringify(jh(a)):a;if(Q.isArrayBuffer(a)||Q.isBuffer(a)||Q.isStream(a)||Q.isFile(a)||Q.isBlob(a)||Q.isReadableStream(a))return a;if(Q.isArrayBufferView(a))return a.buffer;if(Q.isURLSearchParams(a))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let i;if(l){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Pv(a,this.formSerializer).toString();if((i=Q.isFileList(a))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return oi(i?{"files[]":a}:a,c&&new c,this.formSerializer)}}return l||n?(r.setContentType("application/json",!1),qv(a)):a}],transformResponse:[function(a){const r=this.transitional||dl.transitional,s=r&&r.forcedJSONParsing,n=this.responseType==="json";if(Q.isResponse(a)||Q.isReadableStream(a))return a;if(a&&Q.isString(a)&&(s&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(a,this.parseReviver)}catch(i){if(o)throw i.name==="SyntaxError"?pe.from(i,pe.ERR_BAD_RESPONSE,this,null,this.response):i}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ut.classes.FormData,Blob:ut.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],e=>{dl.headers[e]={}});const Yv=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gv=e=>{const a={};let r,s,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!r||a[r]&&Yv[r])&&(r==="set-cookie"?a[r]?a[r].push(s):a[r]=[s]:a[r]=a[r]?a[r]+", "+s:s)}),a},vx=Symbol("internals");function nn(e){return e&&String(e).trim().toLowerCase()}function Ql(e){return e===!1||e==null?e:Q.isArray(e)?e.map(Ql):String(e)}function Vv(e){const a=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)a[s[1]]=s[2];return a}const Xv=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Vi(e,a,r,s,n){if(Q.isFunction(s))return s.call(this,a,r);if(n&&(a=r),!!Q.isString(a)){if(Q.isString(s))return a.indexOf(s)!==-1;if(Q.isRegExp(s))return s.test(a)}}function Qv(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,r,s)=>r.toUpperCase()+s)}function Zv(e,a){const r=Q.toCamelCase(" "+a);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(n,l,o){return this[s].call(this,a,n,l,o)},configurable:!0})})}let wt=class{constructor(a){a&&this.set(a)}set(a,r,s){const n=this;function l(i,c,u){const d=nn(c);if(!d)throw new Error("header name must be a non-empty string");const x=Q.findKey(n,d);(!x||n[x]===void 0||u===!0||u===void 0&&n[x]!==!1)&&(n[x||c]=Ql(i))}const o=(i,c)=>Q.forEach(i,(u,d)=>l(u,d,c));if(Q.isPlainObject(a)||a instanceof this.constructor)o(a,r);else if(Q.isString(a)&&(a=a.trim())&&!Xv(a))o(Gv(a),r);else if(Q.isObject(a)&&Q.isIterable(a)){let i={},c,u;for(const d of a){if(!Q.isArray(d))throw TypeError("Object iterator must return a key-value pair");i[u=d[0]]=(c=i[u])?Q.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(i,r)}else a!=null&&l(r,a,s);return this}get(a,r){if(a=nn(a),a){const s=Q.findKey(this,a);if(s){const n=this[s];if(!r)return n;if(r===!0)return Vv(n);if(Q.isFunction(r))return r.call(this,n,s);if(Q.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,r){if(a=nn(a),a){const s=Q.findKey(this,a);return!!(s&&this[s]!==void 0&&(!r||Vi(this,this[s],s,r)))}return!1}delete(a,r){const s=this;let n=!1;function l(o){if(o=nn(o),o){const i=Q.findKey(s,o);i&&(!r||Vi(s,s[i],i,r))&&(delete s[i],n=!0)}}return Q.isArray(a)?a.forEach(l):l(a),n}clear(a){const r=Object.keys(this);let s=r.length,n=!1;for(;s--;){const l=r[s];(!a||Vi(this,this[l],l,a,!0))&&(delete this[l],n=!0)}return n}normalize(a){const r=this,s={};return Q.forEach(this,(n,l)=>{const o=Q.findKey(s,l);if(o){r[o]=Ql(n),delete r[l];return}const i=a?Qv(l):String(l).trim();i!==l&&delete r[l],r[i]=Ql(n),s[i]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const r=Object.create(null);return Q.forEach(this,(s,n)=>{s!=null&&s!==!1&&(r[n]=a&&Q.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,r])=>a+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...r){const s=new this(a);return r.forEach(n=>s.set(n)),s}static accessor(a){const s=(this[vx]=this[vx]={accessors:{}}).accessors,n=this.prototype;function l(o){const i=nn(o);s[i]||(Zv(n,o),s[i]=!0)}return Q.isArray(a)?a.forEach(l):l(a),this}};wt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Q.reduceDescriptors(wt.prototype,({value:e},a)=>{let r=a[0].toUpperCase()+a.slice(1);return{get:()=>e,set(s){this[r]=s}}});Q.freezeMethods(wt);function Xi(e,a){const r=this||dl,s=a||r,n=wt.from(s.headers);let l=s.data;return Q.forEach(e,function(i){l=i.call(r,l,n.normalize(),a?a.status:void 0)}),n.normalize(),l}function Nh(e){return!!(e&&e.__CANCEL__)}function Zs(e,a,r){pe.call(this,e??"canceled",pe.ERR_CANCELED,a,r),this.name="CanceledError"}Q.inherits(Zs,pe,{__CANCEL__:!0});function Sh(e,a,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):a(new pe("Request failed with status code "+r.status,[pe.ERR_BAD_REQUEST,pe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Jv(e){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return a&&a[1]||""}function Kv(e,a){e=e||10;const r=new Array(e),s=new Array(e);let n=0,l=0,o;return a=a!==void 0?a:1e3,function(c){const u=Date.now(),d=s[l];o||(o=u),r[n]=c,s[n]=u;let x=l,m=0;for(;x!==n;)m+=r[x++],x=x%e;if(n=(n+1)%e,n===l&&(l=(l+1)%e),u-o<a)return;const b=d&&u-d;return b?Math.round(m*1e3/b):void 0}}function e5(e,a){let r=0,s=1e3/a,n,l;const o=(u,d=Date.now())=>{r=d,n=null,l&&(clearTimeout(l),l=null),e(...u)};return[(...u)=>{const d=Date.now(),x=d-r;x>=s?o(u,d):(n=u,l||(l=setTimeout(()=>{l=null,o(n)},s-x)))},()=>n&&o(n)]}const Bo=(e,a,r=3)=>{let s=0;const n=Kv(50,250);return e5(l=>{const o=l.loaded,i=l.lengthComputable?l.total:void 0,c=o-s,u=n(c),d=o<=i;s=o;const x={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:u||void 0,estimated:u&&i&&d?(i-o)/u:void 0,event:l,lengthComputable:i!=null,[a?"download":"upload"]:!0};e(x)},r)},jx=(e,a)=>{const r=e!=null;return[s=>a[0]({lengthComputable:r,total:e,loaded:s}),a[1]]},Nx=e=>(...a)=>Q.asap(()=>e(...a)),t5=ut.hasStandardBrowserEnv?((e,a)=>r=>(r=new URL(r,ut.origin),e.protocol===r.protocol&&e.host===r.host&&(a||e.port===r.port)))(new URL(ut.origin),ut.navigator&&/(msie|trident)/i.test(ut.navigator.userAgent)):()=>!0,a5=ut.hasStandardBrowserEnv?{write(e,a,r,s,n,l,o){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(a)}`];Q.isNumber(r)&&i.push(`expires=${new Date(r).toUTCString()}`),Q.isString(s)&&i.push(`path=${s}`),Q.isString(n)&&i.push(`domain=${n}`),l===!0&&i.push("secure"),Q.isString(o)&&i.push(`SameSite=${o}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const a=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return a?decodeURIComponent(a[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function r5(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function s5(e,a){return a?e.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):e}function wh(e,a,r){let s=!r5(a);return e&&(s||r==!1)?s5(e,a):a}const Sx=e=>e instanceof wt?{...e}:e;function Hr(e,a){a=a||{};const r={};function s(u,d,x,m){return Q.isPlainObject(u)&&Q.isPlainObject(d)?Q.merge.call({caseless:m},u,d):Q.isPlainObject(d)?Q.merge({},d):Q.isArray(d)?d.slice():d}function n(u,d,x,m){if(Q.isUndefined(d)){if(!Q.isUndefined(u))return s(void 0,u,x,m)}else return s(u,d,x,m)}function l(u,d){if(!Q.isUndefined(d))return s(void 0,d)}function o(u,d){if(Q.isUndefined(d)){if(!Q.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function i(u,d,x){if(x in a)return s(u,d);if(x in e)return s(void 0,u)}const c={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(u,d,x)=>n(Sx(u),Sx(d),x,!0)};return Q.forEach(Object.keys({...e,...a}),function(d){const x=c[d]||n,m=x(e[d],a[d],d);Q.isUndefined(m)&&x!==i||(r[d]=m)}),r}const Ch=e=>{const a=Hr({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:l,headers:o,auth:i}=a;if(a.headers=o=wt.from(o),a.url=yh(wh(a.baseURL,a.url,a.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),Q.isFormData(r)){if(ut.hasStandardBrowserEnv||ut.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Q.isFunction(r.getHeaders)){const c=r.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,x])=>{u.includes(d.toLowerCase())&&o.set(d,x)})}}if(ut.hasStandardBrowserEnv&&(s&&Q.isFunction(s)&&(s=s(a)),s||s!==!1&&t5(a.url))){const c=n&&l&&a5.read(l);c&&o.set(n,c)}return a},n5=typeof XMLHttpRequest<"u",l5=n5&&function(e){return new Promise(function(r,s){const n=Ch(e);let l=n.data;const o=wt.from(n.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:u}=n,d,x,m,b,v;function S(){b&&b(),v&&v(),n.cancelToken&&n.cancelToken.unsubscribe(d),n.signal&&n.signal.removeEventListener("abort",d)}let h=new XMLHttpRequest;h.open(n.method.toUpperCase(),n.url,!0),h.timeout=n.timeout;function y(){if(!h)return;const f=wt.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),C={data:!i||i==="text"||i==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:f,config:e,request:h};Sh(function(A){r(A),S()},function(A){s(A),S()},C),h=null}"onloadend"in h?h.onloadend=y:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(y)},h.onabort=function(){h&&(s(new pe("Request aborted",pe.ECONNABORTED,e,h)),h=null)},h.onerror=function(j){const C=j&&j.message?j.message:"Network Error",E=new pe(C,pe.ERR_NETWORK,e,h);E.event=j||null,s(E),h=null},h.ontimeout=function(){let j=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const C=n.transitional||vh;n.timeoutErrorMessage&&(j=n.timeoutErrorMessage),s(new pe(j,C.clarifyTimeoutError?pe.ETIMEDOUT:pe.ECONNABORTED,e,h)),h=null},l===void 0&&o.setContentType(null),"setRequestHeader"in h&&Q.forEach(o.toJSON(),function(j,C){h.setRequestHeader(C,j)}),Q.isUndefined(n.withCredentials)||(h.withCredentials=!!n.withCredentials),i&&i!=="json"&&(h.responseType=n.responseType),u&&([m,v]=Bo(u,!0),h.addEventListener("progress",m)),c&&h.upload&&([x,b]=Bo(c),h.upload.addEventListener("progress",x),h.upload.addEventListener("loadend",b)),(n.cancelToken||n.signal)&&(d=f=>{h&&(s(!f||f.type?new Zs(null,e,h):f),h.abort(),h=null)},n.cancelToken&&n.cancelToken.subscribe(d),n.signal&&(n.signal.aborted?d():n.signal.addEventListener("abort",d)));const g=Jv(n.url);if(g&&ut.protocols.indexOf(g)===-1){s(new pe("Unsupported protocol "+g+":",pe.ERR_BAD_REQUEST,e));return}h.send(l||null)})},o5=(e,a)=>{const{length:r}=e=e?e.filter(Boolean):[];if(a||r){let s=new AbortController,n;const l=function(u){if(!n){n=!0,i();const d=u instanceof Error?u:this.reason;s.abort(d instanceof pe?d:new Zs(d instanceof Error?d.message:d))}};let o=a&&setTimeout(()=>{o=null,l(new pe(`timeout ${a} of ms exceeded`,pe.ETIMEDOUT))},a);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(l):u.removeEventListener("abort",l)}),e=null)};e.forEach(u=>u.addEventListener("abort",l));const{signal:c}=s;return c.unsubscribe=()=>Q.asap(i),c}},i5=function*(e,a){let r=e.byteLength;if(r<a){yield e;return}let s=0,n;for(;s<r;)n=s+a,yield e.slice(s,n),s=n},c5=async function*(e,a){for await(const r of d5(e))yield*i5(r,a)},d5=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const a=e.getReader();try{for(;;){const{done:r,value:s}=await a.read();if(r)break;yield s}}finally{await a.cancel()}},wx=(e,a,r,s)=>{const n=c5(e,a);let l=0,o,i=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await n.next();if(u){i(),c.close();return}let x=d.byteLength;if(r){let m=l+=x;r(m)}c.enqueue(new Uint8Array(d))}catch(u){throw i(u),u}},cancel(c){return i(c),n.return()}},{highWaterMark:2})},Cx=64*1024,{isFunction:El}=Q,u5=(({Request:e,Response:a})=>({Request:e,Response:a}))(Q.global),{ReadableStream:kx,TextEncoder:Fx}=Q.global,Tx=(e,...a)=>{try{return!!e(...a)}catch{return!1}},p5=e=>{e=Q.merge.call({skipUndefined:!0},u5,e);const{fetch:a,Request:r,Response:s}=e,n=a?El(a):typeof fetch=="function",l=El(r),o=El(s);if(!n)return!1;const i=n&&El(kx),c=n&&(typeof Fx=="function"?(v=>S=>v.encode(S))(new Fx):async v=>new Uint8Array(await new r(v).arrayBuffer())),u=l&&i&&Tx(()=>{let v=!1;const S=new r(ut.origin,{body:new kx,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!S}),d=o&&i&&Tx(()=>Q.isReadableStream(new s("").body)),x={stream:d&&(v=>v.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!x[v]&&(x[v]=(S,h)=>{let y=S&&S[v];if(y)return y.call(S);throw new pe(`Response type '${v}' is not supported`,pe.ERR_NOT_SUPPORT,h)})});const m=async v=>{if(v==null)return 0;if(Q.isBlob(v))return v.size;if(Q.isSpecCompliantForm(v))return(await new r(ut.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(Q.isArrayBufferView(v)||Q.isArrayBuffer(v))return v.byteLength;if(Q.isURLSearchParams(v)&&(v=v+""),Q.isString(v))return(await c(v)).byteLength},b=async(v,S)=>{const h=Q.toFiniteNumber(v.getContentLength());return h??m(S)};return async v=>{let{url:S,method:h,data:y,signal:g,cancelToken:f,timeout:j,onDownloadProgress:C,onUploadProgress:E,responseType:A,headers:M,withCredentials:B="same-origin",fetchOptions:F}=Ch(v),L=a||fetch;A=A?(A+"").toLowerCase():"text";let k=o5([g,f&&f.toAbortSignal()],j),U=null;const D=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let _;try{if(E&&u&&h!=="get"&&h!=="head"&&(_=await b(M,y))!==0){let T=new r(S,{method:"POST",body:y,duplex:"half"}),O;if(Q.isFormData(y)&&(O=T.headers.get("content-type"))&&M.setContentType(O),T.body){const[V,P]=jx(_,Bo(Nx(E)));y=wx(T.body,Cx,V,P)}}Q.isString(B)||(B=B?"include":"omit");const z=l&&"credentials"in r.prototype,q={...F,signal:k,method:h.toUpperCase(),headers:M.normalize().toJSON(),body:y,duplex:"half",credentials:z?B:void 0};U=l&&new r(S,q);let w=await(l?L(U,F):L(S,q));const N=d&&(A==="stream"||A==="response");if(d&&(C||N&&D)){const T={};["status","statusText","headers"].forEach(W=>{T[W]=w[W]});const O=Q.toFiniteNumber(w.headers.get("content-length")),[V,P]=C&&jx(O,Bo(Nx(C),!0))||[];w=new s(wx(w.body,Cx,V,()=>{P&&P(),D&&D()}),T)}A=A||"text";let R=await x[Q.findKey(x,A)||"text"](w,v);return!N&&D&&D(),await new Promise((T,O)=>{Sh(T,O,{data:R,headers:wt.from(w.headers),status:w.status,statusText:w.statusText,config:v,request:U})})}catch(z){throw D&&D(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new pe("Network Error",pe.ERR_NETWORK,v,U),{cause:z.cause||z}):pe.from(z,z&&z.code,v,U)}}},x5=new Map,kh=e=>{let a=e&&e.env||{};const{fetch:r,Request:s,Response:n}=a,l=[s,n,r];let o=l.length,i=o,c,u,d=x5;for(;i--;)c=l[i],u=d.get(c),u===void 0&&d.set(c,u=i?new Map:p5(a)),d=u;return u};kh();const Tu={http:Av,xhr:l5,fetch:{get:kh}};Q.forEach(Tu,(e,a)=>{if(e){try{Object.defineProperty(e,"name",{value:a})}catch{}Object.defineProperty(e,"adapterName",{value:a})}});const Ex=e=>`- ${e}`,m5=e=>Q.isFunction(e)||e===null||e===!1;function f5(e,a){e=Q.isArray(e)?e:[e];const{length:r}=e;let s,n;const l={};for(let o=0;o<r;o++){s=e[o];let i;if(n=s,!m5(s)&&(n=Tu[(i=String(s)).toLowerCase()],n===void 0))throw new pe(`Unknown adapter '${i}'`);if(n&&(Q.isFunction(n)||(n=n.get(a))))break;l[i||"#"+o]=n}if(!n){const o=Object.entries(l).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let i=r?o.length>1?`since :
`+o.map(Ex).join(`
`):" "+Ex(o[0]):"as no adapter specified";throw new pe("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n}const Fh={getAdapter:f5,adapters:Tu};function Qi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Zs(null,e)}function Ax(e){return Qi(e),e.headers=wt.from(e.headers),e.data=Xi.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Fh.getAdapter(e.adapter||dl.adapter,e)(e).then(function(s){return Qi(e),s.data=Xi.call(e,e.transformResponse,s),s.headers=wt.from(s.headers),s},function(s){return Nh(s)||(Qi(e),s&&s.response&&(s.response.data=Xi.call(e,e.transformResponse,s.response),s.response.headers=wt.from(s.response.headers))),Promise.reject(s)})}const Th="1.13.2",ii={};["object","boolean","number","function","string","symbol"].forEach((e,a)=>{ii[e]=function(s){return typeof s===e||"a"+(a<1?"n ":" ")+e}});const Rx={};ii.transitional=function(a,r,s){function n(l,o){return"[Axios v"+Th+"] Transitional option '"+l+"'"+o+(s?". "+s:"")}return(l,o,i)=>{if(a===!1)throw new pe(n(o," has been removed"+(r?" in "+r:"")),pe.ERR_DEPRECATED);return r&&!Rx[o]&&(Rx[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),a?a(l,o,i):!0}};ii.spelling=function(a){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${a}`),!0)};function g5(e,a,r){if(typeof e!="object")throw new pe("options must be an object",pe.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const l=s[n],o=a[l];if(o){const i=e[l],c=i===void 0||o(i,l,e);if(c!==!0)throw new pe("option "+l+" must be "+c,pe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new pe("Unknown option "+l,pe.ERR_BAD_OPTION)}}const Zl={assertOptions:g5,validators:ii},la=Zl.validators;let Mr=class{constructor(a){this.defaults=a||{},this.interceptors={request:new yx,response:new yx}}async request(a,r){try{return await this._request(a,r)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const l=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?l&&!String(s.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+l):s.stack=l}catch{}}throw s}}_request(a,r){typeof a=="string"?(r=r||{},r.url=a):r=a||{},r=Hr(this.defaults,r);const{transitional:s,paramsSerializer:n,headers:l}=r;s!==void 0&&Zl.assertOptions(s,{silentJSONParsing:la.transitional(la.boolean),forcedJSONParsing:la.transitional(la.boolean),clarifyTimeoutError:la.transitional(la.boolean)},!1),n!=null&&(Q.isFunction(n)?r.paramsSerializer={serialize:n}:Zl.assertOptions(n,{encode:la.function,serialize:la.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Zl.assertOptions(r,{baseUrl:la.spelling("baseURL"),withXsrfToken:la.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=l&&Q.merge(l.common,l[r.method]);l&&Q.forEach(["delete","get","head","post","put","patch","common"],v=>{delete l[v]}),r.headers=wt.concat(o,l);const i=[];let c=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(r)===!1||(c=c&&S.synchronous,i.unshift(S.fulfilled,S.rejected))});const u=[];this.interceptors.response.forEach(function(S){u.push(S.fulfilled,S.rejected)});let d,x=0,m;if(!c){const v=[Ax.bind(this),void 0];for(v.unshift(...i),v.push(...u),m=v.length,d=Promise.resolve(r);x<m;)d=d.then(v[x++],v[x++]);return d}m=i.length;let b=r;for(;x<m;){const v=i[x++],S=i[x++];try{b=v(b)}catch(h){S.call(this,h);break}}try{d=Ax.call(this,b)}catch(v){return Promise.reject(v)}for(x=0,m=u.length;x<m;)d=d.then(u[x++],u[x++]);return d}getUri(a){a=Hr(this.defaults,a);const r=wh(a.baseURL,a.url,a.allowAbsoluteUrls);return yh(r,a.params,a.paramsSerializer)}};Q.forEach(["delete","get","head","options"],function(a){Mr.prototype[a]=function(r,s){return this.request(Hr(s||{},{method:a,url:r,data:(s||{}).data}))}});Q.forEach(["post","put","patch"],function(a){function r(s){return function(l,o,i){return this.request(Hr(i||{},{method:a,headers:s?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}Mr.prototype[a]=r(),Mr.prototype[a+"Form"]=r(!0)});let h5=class Eh{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const s=this;this.promise.then(n=>{if(!s._listeners)return;let l=s._listeners.length;for(;l-- >0;)s._listeners[l](n);s._listeners=null}),this.promise.then=n=>{let l;const o=new Promise(i=>{s.subscribe(i),l=i}).then(n);return o.cancel=function(){s.unsubscribe(l)},o},a(function(l,o,i){s.reason||(s.reason=new Zs(l,o,i),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const r=this._listeners.indexOf(a);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const a=new AbortController,r=s=>{a.abort(s)};return this.subscribe(r),a.signal.unsubscribe=()=>this.unsubscribe(r),a.signal}static source(){let a;return{token:new Eh(function(n){a=n}),cancel:a}}};function b5(e){return function(r){return e.apply(null,r)}}function y5(e){return Q.isObject(e)&&e.isAxiosError===!0}const ud={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ud).forEach(([e,a])=>{ud[a]=e});function Ah(e){const a=new Mr(e),r=oh(Mr.prototype.request,a);return Q.extend(r,Mr.prototype,a,{allOwnKeys:!0}),Q.extend(r,a,null,{allOwnKeys:!0}),r.create=function(n){return Ah(Hr(e,n))},r}const We=Ah(dl);We.Axios=Mr;We.CanceledError=Zs;We.CancelToken=h5;We.isCancel=Nh;We.VERSION=Th;We.toFormData=oi;We.AxiosError=pe;We.Cancel=We.CanceledError;We.all=function(a){return Promise.all(a)};We.spread=b5;We.isAxiosError=y5;We.mergeConfig=Hr;We.AxiosHeaders=wt;We.formToJSON=e=>jh(Q.isHTMLForm(e)?new FormData(e):e);We.getAdapter=Fh.getAdapter;We.HttpStatusCode=ud;We.default=We;const{Axios:iN,AxiosError:cN,CanceledError:dN,isCancel:uN,CancelToken:pN,VERSION:xN,all:mN,Cancel:fN,isAxiosError:gN,spread:hN,toFormData:bN,AxiosHeaders:yN,HttpStatusCode:vN,formToJSON:jN,getAdapter:NN,mergeConfig:SN}=We,v5="http://18.166.29.239:3000/api",J=We.create({baseURL:v5,timeout:3e5,headers:{"Content-Type":"application/json"}});J.interceptors.request.use(e=>{const a=localStorage.getItem("adminToken")||localStorage.getItem("merchantToken")||localStorage.getItem("userToken");return a&&(e.headers.Authorization=`Bearer ${a}`),e});J.interceptors.response.use(e=>e.data,e=>{var a,r;return((a=e.response)==null?void 0:a.status)===401&&(localStorage.clear(),window.location.href="/login"),Promise.reject(((r=e.response)==null?void 0:r.data)||{message:e.message})});const j5="AIzaSyBOFPwkdS8TKEe3I2QUDBFWq_q3On5kDBI";function N5(){var y,g,f;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState({today:{rides:0,revenue:0,passengers:0},activeShuttles:0}),[n,l]=p.useState([]),[o,i]=p.useState(!0),[c,u]=p.useState(null),d=p.useRef(null),x=p.useRef(null),m=p.useRef([]);p.useRef(!1);const b=async()=>{try{const j=await J.get("/admin/analytics/dashboard");s({today:(j==null?void 0:j.today)||{rides:0,revenue:0,passengers:0},activeShuttles:(j==null?void 0:j.activeShuttles)||0})}catch(j){console.error("Error loading stats:",j)}finally{i(!1)}},v=async()=>{try{const j=await J.get("/admin/shuttle-positions");l(Array.isArray(j)?j:[]),h(j||[])}catch(j){console.error("Error loading shuttle positions:",j)}},S=p.useCallback(j=>{if(j&&window.google&&window.google.maps&&!x.current)try{const C={lat:14.17815,lng:121.1359};console.log(" Initializing map...");const E=a?[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]}]:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#e0e0e0"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9d9f1"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]}];x.current=new window.google.maps.Map(j,{center:C,zoom:15,styles:E,disableDefaultUI:!0,zoomControl:!0}),console.log(" Map initialized successfully"),u(null),v()}catch(C){console.error(" Map initialization error:",C),u(`Failed to initialize map: ${C.message}`)}d.current=j},[a]),h=j=>{!x.current||!window.google||(m.current.forEach(C=>C.setMap(null)),m.current=[],j.forEach(C=>{var E,A;if(C.latitude&&C.longitude){const M=new window.google.maps.Marker({position:{lat:C.latitude,lng:C.longitude},map:x.current,title:C.shuttleId,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:12,fillColor:a?"#FFD41C":"#3B82F6",fillOpacity:1,strokeColor:a?"#181D40":"#FFFFFF",strokeWeight:3},label:{text:"",fontSize:"16px"}});let B=null;(E=C.currentTrip)!=null&&E.endLatitude&&((A=C.currentTrip)!=null&&A.endLongitude)&&(B=new window.google.maps.Marker({position:{lat:C.currentTrip.endLatitude,lng:C.currentTrip.endLongitude},map:x.current,title:"Destination",icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#EF4444",fillOpacity:1,strokeColor:"#FBFBFB",strokeWeight:3},label:{text:"",fontSize:"14px"}}),m.current.push(B));const F=new window.google.maps.InfoWindow({content:`
            <div style="color: #181D40; padding: 12px; min-width: 250px;">
              <div style="font-weight: 700; font-size: 14px; margin-bottom: 8px; color: #FFD41C; background: #181D40; padding: 6px; border-radius: 4px;">
                ${C.shuttleId}
              </div>
              <div style="margin-bottom: 4px;">
                <strong>Driver:</strong> ${C.driverName||"No driver assigned"}
              </div>
              ${C.vehicleInfo?`<div style="margin-bottom: 4px;"><strong>Vehicle:</strong> ${C.vehicleInfo}</div>`:""}
              ${C.route?`
                <div style="margin-top: 12px; padding: 8px; background: #f0f0f0; border-radius: 4px;">
                  <div style="font-weight: 600; margin-bottom: 4px;">Route: ${C.route.routeName}</div>
                  <div style="font-size: 12px; color: #666;"> From: ${C.route.fromName}</div>
                  <div style="font-size: 12px; color: #666;"> To: ${C.route.toName}</div>
                </div>
              `:""}
              <div style="margin-top: 8px; font-size: 11px; color: #666;">
                Current location: ${C.latitude.toFixed(6)}, ${C.longitude.toFixed(6)}
              </div>
              <div style="font-size: 11px; color: #666;">
                Last update: ${new Date(C.updatedAt).toLocaleTimeString()}
              </div>
            </div>
          `});M.addListener("click",()=>{F.open(x.current,M),x.current.panTo({lat:C.latitude,lng:C.longitude}),x.current.setZoom(16)}),m.current.push(M)}}))};return p.useEffect(()=>{var C;b(),!window.googleMapsLoadingPromise&&!((C=window.google)!=null&&C.maps)&&(document.querySelector('script[src*="maps.googleapis.com"]')?console.log(" Google Maps script already in DOM"):window.googleMapsLoadingPromise=new Promise((A,M)=>{window.initGoogleMaps=()=>{console.log(" Google Maps loaded successfully (with places library)"),A()};const B=document.createElement("script");B.src=`https://maps.googleapis.com/maps/api/js?key=${j5}&libraries=places&callback=initGoogleMaps`,B.async=!0,B.defer=!0,B.onerror=F=>{console.error(" Failed to load Google Maps:",F),u("Failed to load Google Maps. Please check API key."),M(F)},document.head.appendChild(B)}));const j=setInterval(()=>{b(),v()},2e3);return()=>clearInterval(j)},[]),o?t.jsx("div",{style:{color:e.accent.primary},className:"text-center py-[60px]",children:"Loading dashboard..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-[30px] border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Home"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Real-time motorpool analytics  Auto-updates every 5 seconds"})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-5 mb-[30px]",children:[t.jsx(Al,{icon:"",label:"TODAY'S RIDES",value:((y=r.today)==null?void 0:y.rides)||0,subtitle:"trips completed",color:"#10B981",theme:e}),t.jsx(Al,{icon:"",label:"TODAY'S COLLECTIONS",value:`${(((g=r.today)==null?void 0:g.revenue)||0).toLocaleString()}`,subtitle:"fare collected",color:"#FFD41C",theme:e}),t.jsx(Al,{icon:"",label:"TODAY'S PASSENGERS",value:((f=r.today)==null?void 0:f.passengers)||0,subtitle:"total today",color:"#3B82F6",theme:e}),t.jsx(Al,{icon:"",label:"ACTIVE SHUTTLES",value:`${n.length}/${r.activeShuttles||0}`,subtitle:"in transit / total",color:"#A855F7",theme:e})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-5 border-b flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h3",{style:{color:e.accent.primary},className:"m-0 mb-1 text-lg font-bold",children:" Live Shuttle Tracking"}),t.jsxs("p",{style:{color:e.text.secondary},className:"m-0 text-xs",children:[n.length," shuttle(s) currently in transit"]})]}),t.jsxs("div",{className:"flex items-center gap-2 bg-[rgba(16,185,129,0.2)] px-3 py-1.5 rounded-[20px] border border-[rgba(16,185,129,0.3)]",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-[#10B981] animate-pulse"}),t.jsx("span",{className:"text-[#10B981] text-xs font-semibold",children:"LIVE"})]})]}),t.jsx("div",{className:"relative h-[500px]",children:c?t.jsxs("div",{style:{color:e.text.tertiary},className:"h-full flex flex-col items-center justify-center p-10",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{className:"mb-2 text-[#EF4444]",children:c}),t.jsx("div",{className:"text-xs opacity-70",children:"Check console for details"})]}):t.jsx("div",{ref:S,className:"w-full h-full"})}),n.length>0&&!c&&t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-5 border-t",children:[t.jsxs("div",{style:{color:e.accent.primary},className:"text-[11px] font-bold mb-3 uppercase tracking-wide",children:["Shuttles in Transit (",n.length,")"]}),t.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-3",children:n.map((j,C)=>{var E,A;return t.jsxs("button",{onClick:()=>{x.current&&j.latitude&&j.longitude&&(x.current.panTo({lat:j.latitude,lng:j.longitude}),x.current.setZoom(16))},style:{background:e.bg.card,borderColor:e.border.primary},className:"border rounded-xl px-4 py-3 cursor-pointer transition-all duration-200 text-left hover:-translate-y-0.5",onMouseEnter:M=>{M.currentTarget.style.background=a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",M.currentTarget.style.borderColor=e.border.hover},onMouseLeave:M=>{M.currentTarget.style.background=e.bg.card,M.currentTarget.style.borderColor=e.border.primary},children:[t.jsxs("div",{className:"flex items-center gap-[10px] mb-2",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("span",{style:{color:e.accent.primary},className:"text-sm font-bold",children:j.shuttleId}),t.jsx("span",{style:{color:e.text.tertiary},className:"text-[10px]",children:""}),t.jsx("span",{style:{color:e.text.secondary},className:"text-xs",children:j.driverName||"Unknown"})]}),j.route&&t.jsx("div",{style:{color:e.text.primary,borderColor:e.accent.primary,background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},className:"text-xs mb-1.5 px-2 py-1.5 rounded-md border-l-[3px]",children:t.jsxs("div",{className:"font-semibold mb-0.5",children:[" ",j.route.fromName,"   ",j.route.toName]})}),t.jsxs("div",{style:{color:e.text.tertiary},className:"text-[11px]",children:["Current: ",(E=j.latitude)==null?void 0:E.toFixed(5),", ",(A=j.longitude)==null?void 0:A.toFixed(5)]}),j.updatedAt&&t.jsxs("div",{style:{color:e.text.muted},className:"text-[10px] mt-1",children:["Updated ",new Date(j.updatedAt).toLocaleTimeString()]})]},C)})})]})]})})]})}function Al({icon:e,label:a,value:r,subtitle:s,color:n,theme:l}){return t.jsxs("div",{style:{background:l.bg.card,borderColor:l.border.primary},className:"p-6 rounded-2xl border relative overflow-hidden transition-all duration-300",children:[t.jsx("div",{className:"absolute right-4 top-4 text-[40px] opacity-15",children:e}),t.jsx("div",{style:{color:l.text.secondary},className:"text-[11px] font-bold uppercase tracking-wide mb-3",children:a}),t.jsx("div",{style:{color:l.text.primary},className:"text-[32px] font-extrabold mb-2",children:r}),t.jsx("div",{className:"text-xs font-semibold inline-block py-[3px] px-[10px] rounded-xl",style:{color:n,background:`${n}20`},children:s})]})}function Ot({value:e,onChange:a,placeholder:r="Search..."}){const{theme:s,isDarkMode:n}=ne();return t.jsxs("div",{className:"relative w-full max-w-[400px]",children:[t.jsx("span",{style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",fontSize:"18px",color:n?"rgba(255,212,28,0.6)":"rgba(59,130,246,0.6)"},children:""}),t.jsx("input",{type:"text",value:e,onChange:l=>a(l.target.value),placeholder:r,style:{width:"100%",padding:"12px 16px 12px 44px",border:`2px solid ${n?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"10px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",transition:"all 0.3s",outline:"none",boxSizing:"border-box"},onFocus:l=>{l.target.style.borderColor=n?"rgba(255,212,28,0.6)":"rgba(59,130,246,0.6)",l.target.style.background="rgba(251,251,251,0.08)"},onBlur:l=>{l.target.style.borderColor=n?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",l.target.style.background="rgba(251,251,251,0.05)"}})]})}function $t({onClick:e,disabled:a=!1}){const{theme:r,isDarkMode:s}=ne(),n=s?"255, 212, 28":"59, 130, 246";return t.jsxs("button",{onClick:e,disabled:a,style:{padding:"12px 20px",background:a?`rgba(${n}, 0.3)`:`rgba(${n}, 0.15)`,border:`2px solid rgba(${n}, 0.4)`,borderRadius:"10px",color:a?`rgba(${n}, 0.5)`:r.accent.primary,fontSize:"14px",fontWeight:600,cursor:a?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",whiteSpace:"nowrap"},onMouseEnter:l=>{a||(l.currentTarget.style.background=`rgba(${n}, 0.25)`,l.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:l=>{a||(l.currentTarget.style.background=`rgba(${n}, 0.15)`,l.currentTarget.style.transform="translateY(0)")},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Export CSV"})]})}function S5({variant:e="info",message:a,onClose:r,autoClose:s=4e3}){const{isDarkMode:n}=ne(),[l,o]=p.useState(!1);if(p.useEffect(()=>{if(s>0&&r){const d=setTimeout(()=>{o(!0),setTimeout(r,300)},s);return()=>clearTimeout(d)}},[s,r]),!a)return null;const i=()=>{o(!0),setTimeout(r,300)},c={success:"",error:"",warning:"!",info:"i"}[e],u={success:{bg:n?"rgba(16,185,129,0.2)":"rgba(16,185,129,0.15)",text:"#10B981",border:"#10B981",iconBg:"rgba(16,185,129,0.3)"},error:{bg:n?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.15)",text:"#EF4444",border:"#EF4444",iconBg:"rgba(239,68,68,0.3)"},warning:{bg:n?"rgba(251,191,36,0.2)":"rgba(251,191,36,0.15)",text:"#FBBF24",border:"#FBBF24",iconBg:"rgba(251,191,36,0.3)"},info:{bg:n?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.15)",text:"#3B82F6",border:"#3B82F6",iconBg:"rgba(59,130,246,0.3)"}}[e];return t.jsxs("div",{style:{background:u.bg,color:u.text,borderLeft:`4px solid ${u.border}`,padding:"14px 20px",borderRadius:"12px",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",gap:"12px",boxShadow:n?"0 8px 32px rgba(0,0,0,0.4)":"0 8px 32px rgba(0,0,0,0.1)",backdropFilter:"blur(10px)",animation:l?"slideOutRight 0.3s ease-out forwards":"slideInRight 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",maxWidth:"500px",minWidth:"300px"},children:[t.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:u.iconBg,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"16px",flexShrink:0},children:c}),t.jsx("span",{style:{flex:1},children:a}),r&&t.jsx("button",{onClick:i,style:{background:"transparent",border:"none",color:u.text,cursor:"pointer",fontSize:"24px",fontWeight:"bold",padding:"0 4px",lineHeight:1,transition:"all 0.2s",opacity:.7},onMouseEnter:d=>{d.currentTarget.style.opacity="1",d.currentTarget.style.transform="scale(1.2)"},onMouseLeave:d=>{d.currentTarget.style.opacity="0.7",d.currentTarget.style.transform="scale(1)"},children:""}),t.jsx("style",{children:`
        @keyframes slideInRight {
          from {
            transform: translateX(400px);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }

        @keyframes slideOutRight {
          from {
            transform: translateX(0);
            opacity: 1;
          }
          to {
            transform: translateX(400px);
            opacity: 0;
          }
        }
      `})]})}function Ft(e,a){if(!e||e.length===0){alert("No data to export");return}const r=Object.keys(e[0]),s=[r.join(","),...e.map(i=>r.map(c=>{const u=i[c];if(u==null)return"";const d=String(u);return d.includes(",")||d.includes('"')||d.includes(`
`)?`"${d.replace(/"/g,'""')}"`:d}).join(","))].join(`
`),n=new Blob([s],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),o=URL.createObjectURL(n);l.setAttribute("href",o),l.setAttribute("download",`${a}_${new Date().toISOString().split("T")[0]}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}function Qr(e,a=["_id","__v","password","pin"]){return e.map(r=>{const s={};return Object.keys(r).forEach(n=>{a.includes(n)||(r[n]instanceof Date||typeof r[n]=="string"&&/^\d{4}-\d{2}-\d{2}T/.test(r[n])?s[n]=new Date(r[n]).toLocaleString():s[n]=r[n])}),s})}function zx({location:e,onLocationChange:a,onConfirm:r,pointLabel:s,pointColor:n,apiKey:l}){var f,j;const{theme:o,isDarkMode:i}=ne(),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),x=p.useRef(null),m=p.useRef(null),[b,v]=p.useState(!1),[S,h]=p.useState(e),[y,g]=p.useState(e.displayName||"");return p.useEffect(()=>{var A;if(!c.current||!((A=window.google)!=null&&A.maps))return;const C=new window.google.maps.Map(c.current,{center:e.latitude&&e.longitude?{lat:e.latitude,lng:e.longitude}:{lat:14.5995,lng:120.9842},zoom:15,mapTypeControl:!0,streetViewControl:!1,fullscreenControl:!0});u.current=C,v(!0);const E=n==="green"?"green-dot":"red-dot";return d.current=new window.google.maps.Marker({map:C,draggable:!0,label:s,title:`Point ${s}`,icon:{url:`http://maps.google.com/mapfiles/ms/icons/${E}.png`},position:e.latitude&&e.longitude?{lat:e.latitude,lng:e.longitude}:C.getCenter()}),d.current.addListener("dragend",async M=>{const B=M.latLng.lat(),F=M.latLng.lng(),L=new window.google.maps.Geocoder;try{const k=await L.geocode({location:{lat:B,lng:F}});k.results[0]&&h({name:k.results[0].formatted_address,latitude:B,longitude:F})}catch(k){console.error("Geocoding error:",k),h({name:`${B.toFixed(6)}, ${F.toFixed(6)}`,latitude:B,longitude:F})}}),()=>{d.current&&d.current.setMap(null)}},[]),p.useEffect(()=>{if(d.current&&S.latitude&&S.longitude){const C={lat:S.latitude,lng:S.longitude};d.current.setPosition(C),u.current&&u.current.panTo(C)}},[S]),p.useEffect(()=>{var A,M,B,F;if(!b||!((M=(A=window.google)==null?void 0:A.maps)!=null&&M.places)||!m.current){console.log("Autocomplete not ready:",{isMapReady:b,hasGoogle:!!((F=(B=window.google)==null?void 0:B.maps)!=null&&F.places),hasInput:!!m.current});return}console.log("Initializing Autocomplete...");const C=new window.google.maps.places.Autocomplete(m.current,{componentRestrictions:{country:"ph"},fields:["formatted_address","geometry","name"],types:["establishment","geocode"]});x.current=C,C.bindTo("bounds",u.current),m.current.addEventListener("focus",()=>{console.log("Search input focused - autocomplete should show suggestions when typing")});const E=C.addListener("place_changed",()=>{console.log("Place changed triggered");const L=C.getPlace();if(console.log("Selected place:",L),!L.geometry){console.warn("No geometry for place");return}const k=L.geometry.location.lat(),U=L.geometry.location.lng();console.log("Coordinates:",k,U),h({name:L.formatted_address,latitude:k,longitude:U}),g(L.name||"")});return()=>{E&&window.google.maps.event.removeListener(E)}},[b]),t.jsxs("div",{children:[t.jsx("style",{children:`
        .pac-container {
          background-color: #1E2347 !important;
          border: 2px solid #FFD41C !important;
          border-radius: 8px !important;
          margin-top: 4px !important;
          box-shadow: 0 4px 12px rgba(0,0,0,0.3) !important;
          z-index: 10000 !important;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
        }
        .pac-item {
          padding: 10px 12px !important;
          cursor: pointer !important;
          border-top: 1px solid rgba(255,212,28,0.2) !important;
          color: rgba(251,251,251,0.9) !important;
          font-size: 14px !important;
        }
        .pac-item:first-child {
          border-top: none !important;
        }
        .pac-item:hover {
          background-color: rgba(255,212,28,0.1) !important;
        }
        .pac-item-selected {
          background-color: rgba(255,212,28,0.15) !important;
        }
        .pac-item-query {
          color: #FFD41C !important;
          font-size: 14px !important;
        }
        .pac-matched {
          font-weight: 700 !important;
          color: #FFD41C !important;
        }
        .pac-icon {
          display: none !important;
        }
      `}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block mb-2 font-semibold text-sm",style:{color:o.accent.primary},children:s==="A"?" Search Starting Location":" Search Destination"}),t.jsx("input",{ref:m,type:"text",placeholder:"Type location name or address...",className:"w-full p-3 border-2 rounded-lg text-sm box-border",style:{borderColor:n==="green"?"rgba(34,197,94,0.3)":"rgba(239,68,68,0.3)",background:"rgba(251,251,251,0.05)",color:o.text.primary}}),t.jsx("div",{className:"text-[11px] mt-1",style:{color:o.text.secondary},children:"Start typing and select from dropdown suggestions"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block mb-2 font-semibold text-sm",style:{color:o.accent.primary},children:"Display Name (shown in app)"}),t.jsx("input",{type:"text",value:y,onChange:C=>g(C.target.value),placeholder:"e.g., National University, Manila",className:"w-full p-3 border-2 rounded-lg text-sm box-border",style:{borderColor:n==="green"?"rgba(34,197,94,0.3)":"rgba(239,68,68,0.3)",background:"rgba(251,251,251,0.05)",color:o.text.primary}}),t.jsx("div",{className:"text-[11px] mt-1",style:{color:o.text.secondary},children:"Short, readable name for users (instead of full address)"})]}),t.jsx("div",{ref:c,className:"w-full h-[400px] rounded-xl border-2 border-[rgba(255,212,28,0.3)] overflow-hidden mb-4"}),S.name&&t.jsxs("div",{className:`p-3 rounded-lg mb-4 ${n==="green"?"border border-[rgba(34,197,94,0.3)]":"border border-[rgba(239,68,68,0.3)]"}`,style:{background:n==="green"?"rgba(34,197,94,0.1)":"rgba(239,68,68,0.1)"},children:[t.jsx("div",{className:"text-xs mb-1",style:{color:o.text.secondary},children:"Selected Location:"}),t.jsxs("div",{className:`text-sm font-semibold ${n==="green"?"text-[#22C55E]":"text-[#EF4444]"}`,children:[" ",y||S.name]}),t.jsxs("div",{className:"text-[11px] mt-1",style:{color:o.text.secondary},children:["Full address: ",S.name]}),t.jsxs("div",{className:"text-[11px] mt-0.5",style:{color:o.text.secondary},children:["Coordinates: ",(f=S.latitude)==null?void 0:f.toFixed(6),", ",(j=S.longitude)==null?void 0:j.toFixed(6)]})]}),t.jsxs("div",{className:"p-3 border rounded-lg text-xs mb-6",style:{background:i?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",borderColor:i?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:o.text.primary},children:[" ",t.jsx("strong",{children:"Tip:"})," Search for a location above or drag the ",s==="A"?" green":" red"," marker on the map to adjust position precisely."]}),t.jsx("button",{onClick:()=>r({...S,displayName:y||S.name}),disabled:!S.name||!S.latitude||!y,className:"w-full py-3.5 px-4 border-none rounded-lg text-[15px] font-bold transition-all duration-200",style:!S.name||!S.latitude||!y?{background:"rgba(100,100,100,0.2)",color:"rgba(251,251,251,0.3)",cursor:"not-allowed"}:{background:o.accent.primary,color:o.accent.secondary,cursor:"pointer",boxShadow:i?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},children:s==="A"?"Set Point A & Continue ":"Set Point B & Continue "})]})}function w5(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(!1),[c,u]=p.useState(1),[d,x]=p.useState(null),[m,b]=p.useState(null),[v,S]=p.useState(""),[h,y]=p.useState(1),g=20,[f,j]=p.useState({name:"",displayName:"",latitude:null,longitude:null}),[C,E]=p.useState({name:"",displayName:"",latitude:null,longitude:null}),[A,M]=p.useState(15),[B,F]=p.useState(!0),[L,k]=p.useState(!0),U="AIzaSyBOFPwkdS8TKEe3I2QUDBFWq_q3On5kDBI",[D,_]=p.useState(!1);p.useEffect(()=>{if(window.google&&window.google.maps&&window.google.maps.places){console.log(" Google Maps already loaded and ready"),_(!0);return}window.initGoogleMaps=()=>{console.log(" Google Maps API loaded via callback"),_(!0)};const I=document.querySelector('script[src*="maps.googleapis.com"]');if(I){console.log(" Google Maps script already in DOM, waiting for load..."),console.log("Script src:",I.src);let G=0;const K=100,se=setInterval(()=>{G++,window.google&&window.google.maps&&window.google.maps.places?(console.log(" Google Maps API ready after",G*100,"ms"),_(!0),clearInterval(se)):G>=K&&(console.error(" Timeout waiting for Google Maps API to load"),console.error("Check browser console for Google Maps errors"),clearInterval(se))},100);return()=>clearInterval(se)}console.log(" Loading Google Maps script with key:",U.substring(0,20)+"...");const Y=document.createElement("script");return Y.src=`https://maps.googleapis.com/maps/api/js?key=${U}&libraries=places&callback=initGoogleMaps`,Y.async=!0,Y.defer=!0,Y.onload=()=>{console.log("Script loaded, waiting for callback...")},Y.onerror=G=>{console.error(" Failed to load Google Maps script:",G),console.error("Possible causes: Invalid API key, network issue, or API restrictions")},document.head.appendChild(Y),()=>{}},[U]);const z=async()=>{try{const I=await J.get("/admin/routes");s(Array.isArray(I)?I:[]),l(!1)}catch(I){console.error("Error loading routes:",I),l(!1)}};p.useEffect(()=>{z();const I=setInterval(z,5e3);return()=>clearInterval(I)},[]),p.useEffect(()=>{y(1)},[v]);const q=()=>{if(r.length===0)return"ROUTE_001";let I=0;for(const Y of r)if(Y.routeId){const G=Y.routeId.match(/ROUTE_(\d+)/i);if(G){const K=parseInt(G[1],10);K>I&&(I=K)}}return`ROUTE_${String(I+1).padStart(3,"0")}`},w=async()=>{try{const Y={routeName:`${f.displayName||f.name}  ${C.displayName||C.name}`,fromName:f.displayName||f.name,fromLatitude:f.latitude,fromLongitude:f.longitude,toName:C.displayName||C.name,toLatitude:C.latitude,toLongitude:C.longitude,fare:parseFloat(A),isActive:B};if(d)await J.put(`/admin/routes/${d._id}`,Y),b({type:"success",message:"Route updated successfully!"});else{const G=q();if(await J.post("/admin/routes",{...Y,routeId:G}),L){const se={routeId:`ROUTE_${String(parseInt(G.split("_")[1])+1).padStart(3,"0")}`,routeName:`${C.displayName||C.name}  ${f.displayName||f.name}`,fromName:C.displayName||C.name,fromLatitude:C.latitude,fromLongitude:C.longitude,toName:f.displayName||f.name,toLatitude:f.latitude,toLongitude:f.longitude,fare:parseFloat(A),isActive:B};await J.post("/admin/routes",se),b({type:"success",message:"Route and reverse route created successfully! "})}else b({type:"success",message:"Route created successfully! "})}N(),i(!1),z()}catch(I){b({type:"error",message:I.message||"Failed to save route"})}},N=()=>{j({name:"",displayName:"",latitude:null,longitude:null}),E({name:"",displayName:"",latitude:null,longitude:null}),M(15),F(!0),x(null),k(!0),u(1)},R=I=>{x(I),j({name:I.fromName,displayName:I.fromName,latitude:I.fromLatitude,longitude:I.fromLongitude}),E({name:I.toName,displayName:I.toName,latitude:I.toLatitude,longitude:I.toLongitude}),M(I.fare),F(I.isActive),u(3),i(!0)},T=async I=>{if(window.confirm("Are you sure you want to delete this route?"))try{await J.delete(`/admin/routes/${I}`),b({type:"success",message:"Route deleted successfully!"}),z()}catch{b({type:"error",message:"Failed to delete route"})}},O=()=>{const I=Qr(r,["routeId","routeName","fromName","toName","fare","isActive"]);Ft(I,`routes_${new Date().toISOString().split("T")[0]}.csv`)},V=r.filter(I=>{var Y,G,K,se;return((Y=I.routeName)==null?void 0:Y.toLowerCase().includes(v.toLowerCase()))||((G=I.fromName)==null?void 0:G.toLowerCase().includes(v.toLowerCase()))||((K=I.toName)==null?void 0:K.toLowerCase().includes(v.toLowerCase()))||((se=I.routeId)==null?void 0:se.toLowerCase().includes(v.toLowerCase()))}),P=Math.ceil(V.length/g),W=(h-1)*g,Z=W+g,te=V.slice(W,Z);return t.jsxs("div",{className:"p-6 h-full flex flex-col",children:[m&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e4},children:t.jsx(S5,{variant:m.type,message:m.message,onClose:()=>b(null)})}),t.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("div",{className:"flex justify-between items-center mb-5",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[t.jsx("span",{children:""})," Route Management"]}),t.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:"Manage shuttle routes with interactive map"})]}),t.jsx("button",{onClick:()=>{N(),i(!0)},style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.3s"},children:"+ Add Route"})]}),t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsx(Ot,{value:v,onChange:S,placeholder:"Search routes..."}),t.jsx($t,{onClick:O,disabled:V.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:V.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{children:"No routes found"})]}):t.jsxs("div",{className:"overflow-x-auto rounded-xl border border-[rgba(255,212,28,0.2)]",children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{color:e.accent.primary,borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Route ID"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Route Name"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"From"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"To"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Fare"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:n?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"text-center py-10 text-[rgba(251,251,251,0.5)]",children:"Loading routes..."})}):te.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"text-center py-10 text-[rgba(251,251,251,0.5)]",children:"No routes found"})}):te.map(I=>t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[t.jsx("td",{className:"p-4",style:{color:e.text.primary},children:t.jsx("strong",{children:I.routeId})}),t.jsx("td",{className:"p-4",style:{color:e.text.primary},children:I.routeName}),t.jsx("td",{className:"p-4",style:{color:e.text.primary},children:I.fromName}),t.jsx("td",{className:"p-4",style:{color:e.text.primary},children:I.toName}),t.jsxs("td",{className:"p-4",style:{color:e.text.primary},children:["",I.fare]}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`inline-block px-3 py-1.5 rounded-md text-[11px] font-bold uppercase ${I.isActive?"bg-[rgba(34,197,94,0.2)] text-[#22C55E]":"bg-[rgba(239,68,68,0.2)] text-[#EF4444]"}`,children:I.isActive?"Active":"Inactive"})}),t.jsxs("td",{className:"p-4",children:[t.jsx("button",{onClick:()=>R(I),className:"px-3 py-1.5 bg-[rgba(59,130,246,0.2)] text-[#3B82F6] border border-[rgba(59,130,246,0.3)] rounded-md cursor-pointer text-xs font-semibold mr-2 hover:bg-[rgba(59,130,246,0.3)] transition-colors",children:"Edit"}),t.jsx("button",{onClick:()=>T(I._id),className:"px-3 py-1.5 bg-[rgba(239,68,68,0.2)] text-[#EF4444] border border-[rgba(239,68,68,0.3)] rounded-md cursor-pointer text-xs font-semibold hover:bg-[rgba(239,68,68,0.3)] transition-colors",children:"Delete"})]})]},I._id))})]}),P>1&&t.jsxs("div",{className:"flex justify-center items-center gap-2.5 mt-5",children:[t.jsx("button",{onClick:()=>y(I=>Math.max(1,I-1)),disabled:h===1,style:{padding:"8px 16px",background:h===1?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:h===1?e.text.muted:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:h===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:e.text.secondary,fontSize:"13px",fontWeight:600},children:["Page ",h," of ",P]}),t.jsx("button",{onClick:()=>y(I=>Math.min(P,I+1)),disabled:h===P,style:{padding:"8px 16px",background:h===P?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:h===P?e.text.muted:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:h===P?"not-allowed":"pointer"},children:"Next "})]})]})}),o&&t.jsx("div",{onClick:()=>{i(!1),N()},style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:t.jsxs("div",{onClick:I=>I.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,width:"90%",maxWidth:"700px",maxHeight:"85vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:e.accent.primary,margin:0},children:d?"Edit Route":"Add New Route"}),t.jsx("button",{onClick:()=>{i(!1),N()},style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),t.jsx("div",{style:{padding:"24px",paddingBottom:"16px"},children:t.jsxs("div",{style:{marginBottom:"8px"},children:[!d&&t.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3,4].map(I=>t.jsx("div",{style:{background:I<=c?e.accent.primary:a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"},className:"flex-1 h-1 rounded-sm transition-all duration-300"},I))}),t.jsx("div",{style:{color:e.text.secondary},className:"text-[13px]",children:!d&&t.jsxs(t.Fragment,{children:[c===1&&"Step 1 of 4: Set Starting Point",c===2&&"Step 2 of 4: Set Destination",c===3&&"Step 3 of 4: Route Details",c===4&&"Step 4 of 4: Review & Confirm"]})})]})}),c===1&&!d&&t.jsx("div",{style:{padding:"0 24px 24px 24px"},children:D?t.jsx(zx,{location:f,onLocationChange:j,onConfirm:I=>{j(I),u(2)},pointLabel:"A",pointColor:"green",apiKey:U}):t.jsx("div",{className:"text-center py-8",style:{color:e.text.secondary},children:"Loading Google Maps..."})}),c===2&&!d&&t.jsx("div",{style:{padding:"0 24px 24px 24px"},children:D?t.jsxs(t.Fragment,{children:[t.jsx(zx,{location:C,onLocationChange:E,onConfirm:I=>{E(I),u(3)},pointLabel:"B",pointColor:"red",apiKey:U}),t.jsx("button",{onClick:()=>u(1),style:{width:"100%",padding:"12px 16px",background:"transparent",color:e.text.primary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",cursor:"pointer",fontWeight:600,marginTop:"12px",transition:"all 0.2s"},children:" Back to Point A"})]}):t.jsx("div",{className:"text-center py-8",style:{color:e.text.secondary},children:"Loading Google Maps..."})}),c===3&&t.jsxs("div",{style:{padding:"0 24px 24px 24px"},children:[t.jsxs("div",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",border:`1px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"12px",padding:"16px",marginBottom:"24px"},children:[t.jsx("div",{style:{fontSize:"13px",color:e.text.secondary,marginBottom:"12px"},children:"Selected Route:"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-[11px] text-[#22C55E] mb-1",children:" FROM"}),t.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:f.displayName||f.name})]}),t.jsx("div",{style:{fontSize:"20px",color:e.accent.primary},children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-[11px] text-[#EF4444] mb-1",children:" TO"}),t.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:C.displayName||C.name})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Fare () *"}),t.jsx("input",{type:"number",value:A,onChange:I=>M(I.target.value),min:"0",step:"0.01",style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:a?"rgba(251,251,251,0.05)":"#FFFFFF",color:e.text.primary,fontSize:"14px",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Status"}),t.jsxs("select",{value:B?"true":"false",onChange:I=>F(I.target.value==="true"),style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:a?"rgba(251,251,251,0.05)":"#FFFFFF",color:e.text.primary,fontSize:"14px",boxSizing:"border-box"},children:[t.jsx("option",{value:"true",children:"Active"}),t.jsx("option",{value:"false",children:"Inactive"})]})]})]}),!d&&t.jsx("div",{style:{marginBottom:"24px"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",padding:"14px",background:a?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.08)",border:`1px solid ${a?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)"}`,borderRadius:"8px"},children:[t.jsx("input",{type:"checkbox",checked:L,onChange:I=>k(I.target.checked),style:{width:"20px",height:"20px",cursor:"pointer"}}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{color:e.text.primary,fontSize:"14px",fontWeight:600,marginBottom:"4px"},children:" Create Reverse Route"}),t.jsxs("div",{style:{fontSize:"12px",color:e.text.secondary},children:["Automatically create: ",C.displayName||C.name||"Point B","  ",f.displayName||f.name||"Point A"]})]})]})}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[!d&&t.jsx("button",{onClick:()=>u(2),style:{flex:1,padding:"12px",background:"transparent",color:e.text.primary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",cursor:"pointer",fontWeight:600,transition:"all 0.2s"},children:" Back"}),t.jsx("button",{onClick:()=>{d?w():u(4)},style:{flex:1,padding:"12px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,boxShadow:a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.2s"},children:d?"Update Route":"Review "})]})]}),c===4&&!d&&t.jsxs("div",{style:{padding:"0 24px 24px 24px"},children:[t.jsxs("div",{style:{background:a?"rgba(255,212,28,0.05)":"rgba(59,130,246,0.05)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[t.jsx("h4",{style:{margin:"0 0 20px 0",color:e.accent.primary,fontSize:"18px"},children:" Route Summary"}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("div",{style:{fontSize:"12px",color:e.text.secondary,marginBottom:"8px"},children:"Main Route:"}),t.jsxs("div",{style:{background:a?"rgba(251,251,251,0.05)":"rgba(0,0,0,0.03)",padding:"16px",borderRadius:"8px",marginBottom:"12px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:"11px",color:"#22C55E",marginBottom:"4px"},children:" FROM"}),t.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:f.displayName||f.name})]}),t.jsx("div",{style:{fontSize:"20px",color:e.accent.primary},children:""}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:"11px",color:"#EF4444",marginBottom:"4px"},children:" TO"}),t.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:C.displayName||C.name})]})]}),t.jsxs("div",{style:{paddingTop:"12px",borderTop:`1px solid ${e.border.secondary}`,display:"flex",justifyContent:"space-between",fontSize:"13px"},children:[t.jsxs("div",{style:{color:e.text.secondary},children:["Fare: ",t.jsxs("span",{style:{color:e.accent.primary,fontWeight:600},children:["",A]})]}),t.jsxs("div",{style:{color:e.text.secondary},children:["Status: ",t.jsx("span",{style:{color:B?"#22C55E":e.text.muted,fontWeight:600},children:B?"Active":"Inactive"})]})]})]})]}),L&&t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"12px",color:e.text.secondary,marginBottom:"8px"},children:"Reverse Route (Auto-created):"}),t.jsxs("div",{style:{background:a?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.08)",padding:"16px",borderRadius:"8px",border:`1px solid ${a?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:"11px",color:"#EF4444",marginBottom:"4px"},children:" FROM"}),t.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:C.displayName||C.name})]}),t.jsx("div",{style:{fontSize:"20px",color:"#3B82F6"},children:""}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:"11px",color:"#22C55E",marginBottom:"4px"},children:" TO"}),t.jsx("div",{style:{fontSize:"14px",color:e.text.primary,fontWeight:600},children:f.displayName||f.name})]})]}),t.jsxs("div",{style:{paddingTop:"12px",borderTop:"1px solid rgba(59,130,246,0.2)",display:"flex",justifyContent:"space-between",fontSize:"13px"},children:[t.jsxs("div",{style:{color:e.text.secondary},children:["Fare: ",t.jsxs("span",{style:{color:"#3B82F6",fontWeight:600},children:["",A]})]}),t.jsxs("div",{style:{color:e.text.secondary},children:["Status: ",t.jsx("span",{style:{color:B?"#22C55E":e.text.muted,fontWeight:600},children:B?"Active":"Inactive"})]})]})]})]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:()=>u(3),style:{flex:1,padding:"12px",background:"transparent",color:e.text.primary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",cursor:"pointer",fontWeight:600,transition:"all 0.2s"},children:" Back to Edit"}),t.jsx("button",{onClick:w,style:{flex:1,padding:"12px",background:"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"15px",boxShadow:"0 4px 12px rgba(34,197,94,0.4)",transition:"all 0.2s"},children:L?" Create Both Routes":" Create Route"})]})]})]})}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function C5(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(!1),[c,u]=p.useState(null),[d,x]=p.useState(null),[m,b]=p.useState(""),[v,S]=p.useState(!1),[h,y]=p.useState(1),g=20,[f,j]=p.useState({driverId:"",firstName:"",lastName:"",middleInitial:"",email:"",password:"",shuttleId:"",licenseNumber:"",licenseExpiry:""}),C=async()=>{try{const N=await J.get("/admin/drivers");s(N),l(!1)}catch(N){console.error("Error loading drivers:",N),x({type:"error",message:"Failed to load drivers"}),l(!1)}};p.useEffect(()=>{C();const N=setInterval(C,5e3);return()=>clearInterval(N)},[]);const E=()=>{if(r.length===0)return"DRV001";let N=0;for(const R of r)if(R.driverId){const T=R.driverId.match(/DRV(\d+)/i);if(T){const O=parseInt(T[1],10);O>N&&(N=O)}}return`DRV${String(N+1).padStart(3,"0")}`},A=()=>{u(null),j({driverId:E(),firstName:"",lastName:"",middleInitial:"",email:"",password:"",shuttleId:"",licenseNumber:"",licenseExpiry:""}),i(!0)},M=N=>{u(N),j({driverId:N.driverId,firstName:N.firstName,lastName:N.lastName,middleInitial:N.middleInitial||"",email:N.email,password:"",shuttleId:N.shuttleId||"",licenseNumber:N.licenseNumber||"",licenseExpiry:N.licenseExpiry?N.licenseExpiry.split("T")[0]:""}),i(!0)},B=async N=>{var T,O,V,P,W,Z;if(N.preventDefault(),!f.firstName||f.firstName.trim().length===0){x({type:"error",message:"First name is required"});return}if(!f.lastName||f.lastName.trim().length===0){x({type:"error",message:"Last name is required"});return}const R=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!f.email||!R.test(f.email.trim())){x({type:"error",message:"Please enter a valid email address"});return}if(f.password&&!/^\d{6}$/.test(f.password)){x({type:"error",message:"PIN must be exactly 6 digits"});return}if(!c&&(!f.licenseNumber||f.licenseNumber.trim().length===0)){x({type:"error",message:"License number is required"});return}if(!c&&(!f.licenseExpiry||f.licenseExpiry.trim().length===0)){x({type:"error",message:"License expiry date is required"});return}if(f.licenseExpiry){const te=new Date(f.licenseExpiry),I=new Date;if(I.setHours(0,0,0,0),te<I){x({type:"error",message:"License expiry date cannot be in the past"});return}}S(!0);try{if(c){const te={...f};te.password||delete te.password,await J.put(`/admin/drivers/${c._id}`,te),x({type:"success",message:"Driver updated successfully!"})}else{if(!f.password){x({type:"error",message:"PIN is required for new drivers"}),S(!1);return}await J.post("/admin/drivers",f),x({type:"success",message:"Driver created successfully!"})}i(!1),C(),setTimeout(()=>x(null),3e3)}catch(te){console.error("Error saving driver:",te);let I="Failed to save driver";((T=te.response)==null?void 0:T.status)===409?I="Email already exists. Please use a different email.":((O=te.response)==null?void 0:O.status)===400?I=((P=(V=te.response)==null?void 0:V.data)==null?void 0:P.error)||"Invalid driver data. Please check all fields.":((W=te.response)==null?void 0:W.status)===500?I="Server error. Please try again later.":(Z=te.message)!=null&&Z.includes("Network")&&(I="Network error. Please check your connection."),x({type:"error",message:I})}finally{S(!1)}},F=async N=>{if(window.confirm(`Delete driver ${N.fullName}? This cannot be undone.`))try{await J.delete(`/admin/drivers/${N._id}`),x({type:"success",message:"Driver deleted successfully!"}),C(),setTimeout(()=>x(null),3e3)}catch(R){console.error("Error deleting driver:",R),x({type:"error",message:"Failed to delete driver"})}},L=async(N,R)=>{try{await J.put(`/admin/drivers/${N._id}`,{isActive:R==="active"}),x({type:"success",message:"Status updated!"}),C(),setTimeout(()=>x(null),2e3)}catch(T){console.error("Error updating status:",T),x({type:"error",message:"Failed to update status"})}},k=N=>{const{name:R,value:T}=N.target;if(R==="password"){const O=T.replace(/\D/g,"").slice(0,6);j(V=>({...V,[R]:O}))}else j(O=>({...O,[R]:T}))},U=()=>{const N=Qr(D);Ft(N,"drivers")},D=r.filter(N=>{var O,V,P,W,Z;if(!m)return!0;const R=m.toLowerCase(),T=`${N.firstName} ${N.lastName}`.toLowerCase();return((O=N.driverId)==null?void 0:O.toLowerCase().includes(R))||((V=N.firstName)==null?void 0:V.toLowerCase().includes(R))||((P=N.lastName)==null?void 0:P.toLowerCase().includes(R))||T.includes(R)||((W=N.email)==null?void 0:W.toLowerCase().includes(R))||((Z=N.shuttleId)==null?void 0:Z.toLowerCase().includes(R))}),_=Math.ceil(D.length/g),z=(h-1)*g,q=z+g,w=D.slice(z,q);return p.useEffect(()=>{y(1)},[m]),n?t.jsx("div",{className:"text-center py-[60px]",style:{color:e.accent.primary},children:"Loading drivers..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[d&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:d.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:d.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${d.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4,animation:"fadeIn 0.3s ease"},children:d.message}),t.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("div",{className:"flex justify-between items-center mb-5",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[t.jsx("span",{children:""})," Driver Management"]}),t.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:D.length>0?`Showing ${z+1}-${Math.min(q,D.length)} of ${D.length}  Page ${h} of ${_}`:`Total: ${r.length} drivers`})]}),t.jsx("button",{onClick:A,style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.3s"},children:"+ Add Driver"})]}),t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsx(Ot,{value:m,onChange:b,placeholder:"Search by name, ID, email, or shuttle..."}),t.jsx($t,{onClick:U,disabled:D.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:D.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{children:m?"No drivers match your search":"No drivers found"}),m&&t.jsx("button",{onClick:()=>b(""),style:{marginTop:"16px",padding:"8px 16px",background:a?"rgba(255, 212, 28, 0.15)":"rgba(59, 130, 246, 0.15)",border:`2px solid ${a?"rgba(255, 212, 28, 0.4)":"rgba(59, 130, 246, 0.4)"}`,borderRadius:"8px",color:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):t.jsxs("div",{className:"overflow-x-auto rounded-xl",style:{border:`1px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Driver ID"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Name"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Email"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Shuttle"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Status"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Actions"})]})}),t.jsx("tbody",{children:w.map(N=>t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:t.jsx("strong",{children:N.driverId})}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:N.fullName||`${N.firstName} ${N.lastName}`}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:N.email}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:N.shuttleId||"None"}),t.jsx("td",{style:{padding:"16px"},children:t.jsxs("select",{value:N.isActive?"active":"inactive",onChange:R=>L(N,R.target.value),style:{padding:"6px 12px",borderRadius:"6px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",border:"none",cursor:"pointer",background:N.isActive?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:N.isActive?"#22C55E":"#EF4444"},children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]})}),t.jsxs("td",{style:{padding:"16px"},children:[t.jsx("button",{onClick:()=>M(N),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",marginRight:"8px"},children:"Edit"}),t.jsx("button",{onClick:()=>F(N),style:{padding:"6px 12px",background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Delete"})]})]},N._id))})]}),_>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[t.jsx("button",{onClick:()=>y(N=>Math.max(1,N-1)),disabled:h===1,style:{padding:"8px 16px",background:h===1?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:h===1?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:h===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",h," of ",_]}),t.jsx("button",{onClick:()=>y(N=>Math.min(_,N+1)),disabled:h===_,style:{padding:"8px 16px",background:h===_?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:h===_?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:h===_?"not-allowed":"pointer"},children:"Next "})]})]})}),o&&t.jsx("div",{onClick:()=>i(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:t.jsxs("div",{onClick:N=>N.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:e.accent.primary,margin:0},children:c?"Edit Driver":"Add New Driver"}),t.jsx("button",{onClick:()=>i(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),t.jsxs("form",{onSubmit:B,style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["Driver ID ",!c&&t.jsx("span",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontWeight:400},children:"(Auto-generated)"})]}),t.jsx("input",{type:"text",name:"driverId",value:f.driverId,disabled:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"8px",background:"rgba(100,100,100,0.2)",color:"rgba(251,251,251,0.5)",fontSize:"14px",boxSizing:"border-box",cursor:"not-allowed"}})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 80px",gap:"20px",marginBottom:"20px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"First Name *"}),t.jsx("input",{type:"text",name:"firstName",value:f.firstName,onChange:k,required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Last Name *"}),t.jsx("input",{type:"text",name:"lastName",value:f.lastName,onChange:k,required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"M.I."}),t.jsx("input",{type:"text",name:"middleInitial",value:f.middleInitial,onChange:k,maxLength:"1",style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",textAlign:"center",textTransform:"uppercase"}})]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Email *"}),t.jsx("input",{type:"email",name:"email",value:f.email,onChange:k,required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["6-Digit PIN ",c&&t.jsx("span",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontWeight:400},children:"(leave blank to keep current)"})]}),t.jsx("input",{type:"text",name:"password",value:f.password,onChange:k,required:!c,maxLength:"6",placeholder:"123456",pattern:"\\d{6}",style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"18px",boxSizing:"border-box",letterSpacing:"8px",textAlign:"center",fontWeight:700}}),t.jsx("p",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginTop:"8px",marginBottom:0},children:"Numbers only, exactly 6 digits"})]}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["Driver's License Number ",t.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),t.jsx("input",{type:"text",name:"licenseNumber",value:f.licenseNumber,onChange:k,placeholder:"e.g., N12-34-567890",required:!c,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["License Expiry Date ",t.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),t.jsx("input",{type:"date",name:"licenseExpiry",value:f.licenseExpiry,onChange:k,required:!c,min:new Date().toISOString().split("T")[0],style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",colorScheme:"dark"}})]}),t.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",paddingTop:"20px",borderTop:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsx("button",{type:"button",onClick:()=>i(!1),style:{padding:"12px 24px",background:"rgba(251,251,251,0.1)",color:"rgba(251,251,251,0.7)",border:"1px solid rgba(251,251,251,0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:v,style:{padding:"12px 24px",background:v?"#CCCCCC":e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:v?"not-allowed":"pointer",boxShadow:v?"none":a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",opacity:v?.6:1},children:v?"Saving...":c?"Update Driver":"Create Driver"})]})]})]})}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from { 
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to { 
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}function Jt({value:e,onChange:a,options:r,label:s="Status"}){return t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",minWidth:"150px"},children:[t.jsx("label",{style:{fontSize:"11px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:s}),t.jsxs("select",{value:e,onChange:n=>a(n.target.value),style:{padding:"10px 12px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease",outline:"none"},children:[t.jsx("option",{value:"",children:"All"}),r.map(n=>t.jsx("option",{value:n.value,children:n.label},n.value))]})]})}function k5(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(!1),[c,u]=p.useState(null),[d,x]=p.useState(null),[m,b]=p.useState(""),[v,S]=p.useState(""),[h,y]=p.useState(1),g=20,[f,j]=p.useState({shuttleId:"",vehicleType:"",vehicleModel:"",plateNumber:"",capacity:15}),C=async()=>{try{const w=await J.get("/admin/shuttles");s(Array.isArray(w)?w:[]),l(!1)}catch(w){console.error("Error loading shuttles:",w),l(!1)}};p.useEffect(()=>{C();const w=setInterval(C,2e3);return()=>clearInterval(w)},[]);const E=()=>{if(r.length===0)return"SHUTTLE_001";let w=0;for(const N of r)if(N.shuttleId){const R=N.shuttleId.match(/SHUTTLE_(\d+)/i);if(R){const T=parseInt(R[1],10);T>w&&(w=T)}}return`SHUTTLE_${String(w+1).padStart(3,"0")}`},A=async w=>{var N,R;w.preventDefault();try{if(c)await J.put(`/admin/shuttles/${c._id}`,f),x({type:"success",message:"Shuttle updated successfully!"});else{const T=E();await J.post("/admin/shuttles",{...f,shuttleId:T}),x({type:"success",message:"Shuttle created successfully!"})}i(!1),u(null),L(),C(),setTimeout(()=>x(null),3e3)}catch(T){x({type:"error",message:((R=(N=T.response)==null?void 0:N.data)==null?void 0:R.error)||"Failed to save shuttle"})}},M=w=>{u(w),j({shuttleId:w.shuttleId,vehicleType:w.vehicleType,vehicleModel:w.vehicleModel,plateNumber:w.plateNumber||"",capacity:w.capacity||15}),i(!0)},B=async w=>{var N,R;if(window.confirm("Are you sure you want to delete this shuttle?"))try{await J.delete(`/admin/shuttles/${w}`),x({type:"success",message:"Shuttle deleted successfully!"}),C(),setTimeout(()=>x(null),3e3)}catch(T){x({type:"error",message:((R=(N=T.response)==null?void 0:N.data)==null?void 0:R.error)||"Failed to delete shuttle"})}},F=async(w,N)=>{try{await J.put(`/admin/shuttles/${w._id}`,{...w,status:N}),x({type:"success",message:"Status updated!"}),C(),setTimeout(()=>x(null),2e3)}catch{x({type:"error",message:"Failed to update status"})}},L=()=>{j({shuttleId:"",vehicleType:"",vehicleModel:"",plateNumber:"",capacity:15})},k=()=>{const w=Qr(U);Ft(w,"shuttles")},U=r.filter(w=>{var N,R,T,O,V,P;if(m){const W=m.toLowerCase();if(!(((N=w.shuttleId)==null?void 0:N.toLowerCase().includes(W))||((R=w.vehicleType)==null?void 0:R.toLowerCase().includes(W))||((T=w.vehicleModel)==null?void 0:T.toLowerCase().includes(W))||((O=w.plateNumber)==null?void 0:O.toLowerCase().includes(W))||((V=w.status)==null?void 0:V.toLowerCase().includes(W))||((P=w.currentDriver)==null?void 0:P.toLowerCase().includes(W))))return!1}return!(v&&w.status!==v)}),D=Math.ceil(U.length/g),_=(h-1)*g,z=_+g,q=U.slice(_,z);return p.useEffect(()=>{y(1)},[m,v]),n?t.jsx("div",{className:"text-center py-[60px]",style:{color:e.accent.primary},children:"Loading shuttles..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[d&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:d.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:d.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${d.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4,animation:"fadeIn 0.3s ease"},children:d.message}),t.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[t.jsx("span",{children:""})," Fleet Management"]}),t.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:U.length>0?`Showing ${_+1}-${Math.min(z,U.length)} of ${U.length}  Page ${h} of ${D}`:`Total shuttles: ${r.length}`})]}),t.jsx("button",{onClick:()=>{L(),u(null),i(!0)},style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.3s"},children:"+ Add Shuttle"})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[t.jsx(Ot,{value:m,onChange:b,placeholder:"Search by ID, vehicle, plate, status, or driver..."}),t.jsx(Jt,{value:v,onChange:S,label:"Status",options:[{value:"available",label:"Available"},{value:"reserved",label:"Reserved"},{value:"taken",label:"Taken"},{value:"unavailable",label:"Unavailable"}]}),t.jsx($t,{onClick:k,disabled:U.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:r.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{children:"No shuttles found"})]}):U.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{style:{marginBottom:"12px"},children:"No shuttles match your search"}),t.jsx("button",{onClick:()=>b(""),style:{padding:"8px 16px",background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):t.jsxs("div",{className:"overflow-x-auto rounded-xl",style:{border:`1px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Shuttle ID"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Vehicle"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Plate"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Capacity"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Status"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Current Driver"}),t.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:e.accent.primary,textTransform:"uppercase",borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Actions"})]})}),t.jsx("tbody",{children:q.map(w=>t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:t.jsx("strong",{children:w.shuttleId})}),t.jsxs("td",{style:{padding:"16px",color:e.text.primary},children:[w.vehicleType," ",w.vehicleModel]}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:w.plateNumber||"N/A"}),t.jsxs("td",{style:{padding:"16px",color:e.text.primary},children:[w.capacity," pax"]}),t.jsx("td",{style:{padding:"16px"},children:t.jsxs("select",{value:w.status,onChange:N=>F(w,N.target.value),style:{padding:"6px 12px",borderRadius:"6px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",border:"none",cursor:"pointer",background:w.status==="available"?"rgba(34,197,94,0.2)":w.status==="reserved"?"rgba(59,130,246,0.2)":w.status==="taken"?"rgba(251,191,36,0.2)":"rgba(239,68,68,0.2)",color:w.status==="available"?"#22C55E":w.status==="reserved"?"#3B82F6":w.status==="taken"?a?"#FBBF24":"#F59E0B":"#EF4444"},children:[t.jsx("option",{value:"available",children:"Available"}),t.jsx("option",{value:"reserved",children:"Reserved"}),t.jsx("option",{value:"taken",children:"Taken"}),t.jsx("option",{value:"unavailable",children:"Unavailable"})]})}),t.jsx("td",{style:{padding:"16px",color:e.text.secondary,fontSize:"12px"},children:w.currentDriver||""}),t.jsxs("td",{style:{padding:"16px",textAlign:"right"},children:[t.jsx("button",{onClick:()=>M(w),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",marginRight:"8px"},children:"Edit"}),t.jsx("button",{onClick:()=>B(w._id),style:{padding:"6px 12px",background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Delete"})]})]},w._id))})]}),D>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[t.jsx("button",{onClick:()=>y(w=>Math.max(1,w-1)),disabled:h===1,style:{padding:"8px 16px",background:h===1?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:h===1?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:h===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",h," of ",D]}),t.jsx("button",{onClick:()=>y(w=>Math.min(D,w+1)),disabled:h===D,style:{padding:"8px 16px",background:h===D?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:h===D?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:h===D?"not-allowed":"pointer"},children:"Next "})]})]})}),o&&t.jsx("div",{onClick:()=>i(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:t.jsxs("div",{onClick:w=>w.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:e.accent.primary,margin:0},children:c?"Edit Shuttle":"Add New Shuttle"}),t.jsx("button",{onClick:()=>i(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),t.jsxs("form",{onSubmit:A,style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["Shuttle ID ",!c&&t.jsx("span",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontWeight:400},children:"(Auto-generated)"})]}),t.jsx("input",{type:"text",value:c?f.shuttleId:E(),disabled:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"8px",background:"rgba(100,100,100,0.2)",color:"rgba(251,251,251,0.5)",fontSize:"14px",boxSizing:"border-box",cursor:"not-allowed"}})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Vehicle Type *"}),t.jsx("input",{type:"text",value:f.vehicleType,onChange:w=>j({...f,vehicleType:w.target.value}),required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"},placeholder:"e.g., Isuzu, Toyota"})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Vehicle Model *"}),t.jsx("input",{type:"text",value:f.vehicleModel,onChange:w=>j({...f,vehicleModel:w.target.value}),required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"},placeholder:"e.g., Traviz, Hiace"})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Plate Number"}),t.jsx("input",{type:"text",value:f.plateNumber,onChange:w=>j({...f,plateNumber:w.target.value}),style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"},placeholder:"e.g., ABC 1234"})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Capacity *"}),t.jsx("input",{type:"number",value:f.capacity,onChange:w=>j({...f,capacity:parseInt(w.target.value)}),required:!0,min:"1",style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",paddingTop:"20px",borderTop:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsx("button",{type:"button",onClick:()=>i(!1),style:{padding:"12px 24px",background:"rgba(251,251,251,0.1)",color:"rgba(251,251,251,0.7)",border:"1px solid rgba(251,251,251,0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},children:c?"Update Shuttle":"Create Shuttle"})]})]})]})}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from { 
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to { 
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}function hr({startDate:e,endDate:a,onStartChange:r,onEndChange:s}){return t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t.jsx("label",{style:{fontSize:"11px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"From"}),t.jsx("input",{type:"date",value:e,onChange:n=>r(n.target.value),style:{padding:"10px 12px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease",outline:"none"}})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t.jsx("label",{style:{fontSize:"11px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"To"}),t.jsx("input",{type:"date",value:a,onChange:n=>s(n.target.value),style:{padding:"10px 12px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease",outline:"none"}})]}),(e||a)&&t.jsx("button",{onClick:()=>{r(""),s("")},style:{padding:"10px 16px",background:"rgba(239, 68, 68, 0.2)",border:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"10px",color:"#EF4444",fontSize:"13px",fontWeight:600,cursor:"pointer",whiteSpace:"nowrap"},children:"Clear Dates"})]})}function F5({trip:e,onClose:a,onUpdate:r}){const s=p.useRef(null),n=p.useRef(null),[l,o]=p.useState(""),[i,c]=p.useState(!1),[u,d]=p.useState(e);p.useEffect(()=>{d(e)},[e]),p.useEffect(()=>{if(!u||!s.current||n.current)return;const S=()=>{window.google&&window.google.maps?h():window.googleMapsLoadingPromise?window.googleMapsLoadingPromise.then(()=>{window.google&&window.google.maps&&h()}).catch(y=>{console.error("Failed to load Google Maps:",y)}):console.warn("Google Maps is not available. Please ensure Dashboard loaded first.")},h=()=>{if(!s.current||n.current)return;const y=new window.google.maps.LatLngBounds,g={lat:u.startLatitude,lng:u.startLongitude},f={lat:u.endLatitude,lng:u.endLongitude};y.extend(g),y.extend(f),n.current=new window.google.maps.Map(s.current,{center:y.getCenter(),zoom:14,styles:[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]}],disableDefaultUI:!0,zoomControl:!0}),new window.google.maps.Marker({position:g,map:n.current,title:u.startLocationName||"Start Location",icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#22C55E",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2},label:{text:"",fontSize:"16px"}}),new window.google.maps.Marker({position:f,map:n.current,title:u.endLocationName||"End Location",icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#EF4444",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2},label:{text:"",fontSize:"16px"}}),new window.google.maps.Polyline({path:[g,f],geodesic:!0,strokeColor:"#FFD41C",strokeOpacity:.8,strokeWeight:4,map:n.current}),n.current.fitBounds(y)};return S(),()=>{n.current&&(n.current=null)}},[u]);const x=async()=>{if(l.trim()){c(!0);try{const S=JSON.parse(localStorage.getItem("adminData")||"{}"),h=await J.post(`/admin/trips/${u._id}/notes`,{content:l,adminId:S._id||"unknown",adminName:S.name||"Admin"});h.trip&&(d(h.trip),o(""),r&&r(h.trip))}catch(S){console.error("Error adding note:",S),alert("Failed to add note. Please try again.")}finally{c(!1)}}};if(!u)return null;const b=(S=>{switch(S){case"completed":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"in_progress":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"cancelled":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};default:return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"}}})(u.status),v=S=>{if(!S)return"N/A";const h=Math.floor(S/60),y=S%60;return h>0?`${h}h ${y}m`:`${y}m`};return t.jsxs("div",{onClick:a,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{onClick:S=>S.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"800px",width:"90%",maxHeight:"85vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#FFD41C",margin:0},children:"Trip Details"}),t.jsx("span",{style:{fontSize:"16px",color:"#FFD41C",fontWeight:700,fontFamily:"monospace",background:"rgba(255,212,28,0.15)",padding:"4px 12px",borderRadius:"6px"},children:u.tripId||`#${u._id.slice(-8)}`})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[t.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:b.bg,color:b.color},children:u.status}),u.status==="in_progress"&&t.jsxs("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:"rgba(251,191,36,0.2)",color:"#FBBF24",display:"flex",alignItems:"center",gap:"4px"},children:[t.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#FBBF24",animation:"pulse 2s infinite"}}),"ACTIVE"]})]})]}),t.jsx("button",{onClick:a,style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",border:"1px solid rgba(255,212,28,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"Trip Information"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Shuttle ID"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:u.shuttleId})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Driver"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:u.driverName||u.driverId})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Route ID"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:u.routeId})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Distance Traveled"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:u.distanceTraveledKm?`${u.distanceTraveledKm} km`:"N/A"})]})]})]}),t.jsxs("div",{style:{background:"rgba(59,130,246,0.05)",border:"1px solid rgba(59,130,246,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#3B82F6",textTransform:"uppercase",marginBottom:"12px"},children:"Timing"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Departure Time"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:new Date(u.departureTime).toLocaleString()})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Arrival Time"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:u.arrivalTime?new Date(u.arrivalTime).toLocaleString():"In Progress"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Duration"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:v(u.durationMinutes)})]})]})]}),t.jsxs("div",{style:{background:"rgba(168,85,247,0.05)",border:"1px solid rgba(168,85,247,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#A855F7",textTransform:"uppercase",marginBottom:"12px"},children:"Route Details"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"12px",color:"#A855F7",marginBottom:"8px",fontWeight:600},children:" Start Location"}),t.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.9)",marginBottom:"4px",fontWeight:600},children:u.startLocationName||"Unknown Location"}),t.jsxs("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontFamily:"monospace"},children:[u.startLatitude.toFixed(6),", ",u.startLongitude.toFixed(6)]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"12px",color:"#A855F7",marginBottom:"8px",fontWeight:600},children:" End Location"}),t.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.9)",marginBottom:"4px",fontWeight:600},children:u.endLocationName||"Unknown Location"}),t.jsxs("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontFamily:"monospace"},children:[u.endLatitude.toFixed(6),", ",u.endLongitude.toFixed(6)]})]})]}),t.jsxs("div",{style:{marginTop:"16px"},children:[t.jsx("div",{style:{fontSize:"12px",color:"#A855F7",marginBottom:"8px",fontWeight:600},children:" Route Map"}),t.jsx("div",{ref:s,style:{width:"100%",height:"300px",borderRadius:"8px",border:"2px solid rgba(168,85,247,0.3)",overflow:"hidden"}})]})]}),t.jsxs("div",{style:{background:"rgba(34,197,94,0.05)",border:"1px solid rgba(34,197,94,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#22C55E",textTransform:"uppercase",marginBottom:"12px"},children:"Trip Statistics"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Total Passengers"}),t.jsx("div",{style:{fontSize:"24px",color:"#22C55E",fontWeight:700},children:u.passengerCount||0})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Total Collections"}),t.jsxs("div",{style:{fontSize:"24px",color:"#22C55E",fontWeight:700},children:["",(u.totalCollections||0).toLocaleString()]})]})]})]}),t.jsxs("div",{style:{background:"rgba(251,191,36,0.05)",border:"1px solid rgba(251,191,36,0.2)",borderRadius:"12px",padding:"16px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FBBF24",textTransform:"uppercase",marginBottom:"12px"},children:" Admin Notes"}),u.notes&&u.notes.length>0?t.jsx("div",{style:{marginBottom:"16px",maxHeight:"200px",overflowY:"auto"},children:u.notes.sort((S,h)=>new Date(h.timestamp)-new Date(S.timestamp)).map((S,h)=>t.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"8px",padding:"12px",marginBottom:"8px",border:"1px solid rgba(251,191,36,0.1)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[t.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"#FBBF24"},children:S.adminName||"Admin"}),t.jsx("div",{style:{fontSize:"10px",color:"rgba(251,251,251,0.5)"},children:new Date(S.timestamp).toLocaleString()})]}),t.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.8)",lineHeight:"1.5"},children:S.content})]},h))}):t.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.5)",marginBottom:"16px",textAlign:"center",padding:"20px"},children:"No notes yet. Add the first note below."}),t.jsxs("div",{children:[t.jsx("textarea",{value:l,onChange:S=>o(S.target.value),placeholder:"Add a note about this trip...",style:{width:"100%",minHeight:"80px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(251,191,36,0.3)",borderRadius:"8px",padding:"12px",color:"#FBFBFB",fontSize:"13px",fontFamily:"inherit",resize:"vertical",marginBottom:"12px"}}),t.jsx("button",{onClick:x,disabled:!l.trim()||i,style:{padding:"10px 20px",background:l.trim()&&!i?"#FBBF24":"rgba(251,191,36,0.3)",color:l.trim()&&!i?"#181D40":"rgba(251,251,251,0.5)",border:"none",borderRadius:"8px",fontSize:"13px",fontWeight:700,cursor:l.trim()&&!i?"pointer":"not-allowed",width:"100%"},children:i?"Adding Note...":"Add Note"})]})]})]}),t.jsx("div",{style:{padding:"20px 24px",borderTop:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{onClick:a,style:{padding:"12px 24px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:"0 4px 12px rgba(255,212,28,0.4)"},children:"Close"})})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
        @keyframes pulse {
          0% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.5; transform: scale(1.2); }
          100% { opacity: 1; transform: scale(1); }
        }
      `})]})}function T5(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(""),[c,u]=p.useState(""),[d,x]=p.useState(""),[m,b]=p.useState(""),[v,S]=p.useState(null),[h,y]=p.useState(1),g=20,f=async()=>{try{const k=await J.get("/admin/trips");s(k||[]),l(!1)}catch(k){console.error("Error loading trips:",k),l(!1)}};p.useEffect(()=>{f();const k=setInterval(f,5e3);return()=>clearInterval(k)},[]);const j=()=>{const k=Qr(C);Ft(k,"trips")},C=r.filter(k=>{var U,D,_,z,q,w,N;if(o){const R=o.toLowerCase();if(!(((U=k._id)==null?void 0:U.toLowerCase().includes(R))||((D=k.shuttleId)==null?void 0:D.toLowerCase().includes(R))||((_=k.driverId)==null?void 0:_.toLowerCase().includes(R))||((z=k.routeId)==null?void 0:z.toLowerCase().includes(R))||((q=k.startLocationName)==null?void 0:q.toLowerCase().includes(R))||((w=k.endLocationName)==null?void 0:w.toLowerCase().includes(R))||((N=k.status)==null?void 0:N.toLowerCase().includes(R))))return!1}if(c&&k.status!==c)return!1;if(d||m){const R=new Date(k.departureTime);if(d&&R<new Date(d)||m&&R>new Date(m+"T23:59:59"))return!1}return!0}),E=Math.ceil(C.length/g),A=(h-1)*g,M=A+g,B=C.slice(A,M);p.useEffect(()=>{y(1)},[o,c,d,m]);const F=k=>{switch(k){case"completed":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"in_progress":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"cancelled":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};default:return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"}}},L=k=>{if(!k)return"N/A";const U=Math.floor(k/60),D=k%60;return U>0?`${U}h ${D}m`:`${D}m`};return n?t.jsx("div",{className:"text-center py-[60px]",style:{color:e.accent.primary},children:"Loading trips..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[t.jsx("span",{children:""})," Trip Management"]}),t.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:C.length>0?`Showing ${A+1}-${Math.min(M,C.length)} of ${C.length}  Page ${h} of ${E}`:`Track all shuttle trips  Total: ${r.length}`})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[t.jsx(Ot,{value:o,onChange:i,placeholder:"Search by shuttle, driver, route, or location..."}),t.jsx(Jt,{value:c,onChange:u,label:"Status",options:[{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]}),t.jsx(hr,{startDate:d,endDate:m,onStartChange:x,onEndChange:b}),t.jsx($t,{onClick:j,disabled:C.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:r.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{children:"No trips found"})]}):C.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{style:{marginBottom:"12px"},children:"No trips match your search"}),t.jsx("button",{onClick:()=>i(""),style:{padding:"8px 16px",background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):t.jsxs("div",{className:"overflow-x-auto rounded-xl",style:{border:`1px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Trip ID"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Shuttle"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Driver"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Route"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Departure"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Duration"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Passengers"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Revenue"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Status"}),t.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:e.accent.primary,textTransform:"uppercase",borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Actions"})]})}),t.jsx("tbody",{children:B.map(k=>{const U=F(k.status);return t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[t.jsx("td",{style:{padding:"16px",color:e.text.primary,fontFamily:"monospace",fontSize:"11px",fontWeight:700},children:k.tripId||k._id.slice(-8)}),t.jsx("td",{style:{padding:"16px",color:e.text.primary,fontWeight:600},children:k.shuttleId}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:k.driverName||k.driverId}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:k.routeId}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:new Date(k.departureTime).toLocaleString()}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:L(k.durationMinutes)}),t.jsx("td",{style:{padding:"16px",color:e.text.primary,textAlign:"center"},children:k.passengerCount||0}),t.jsxs("td",{style:{padding:"16px",color:e.text.primary,fontWeight:600},children:["",(k.totalCollections||0).toLocaleString()]}),t.jsx("td",{style:{padding:"16px"},children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:U.bg,color:U.color,border:`1px solid ${U.color}40`},children:k.status})}),t.jsx("td",{style:{padding:"16px",textAlign:"right"},children:t.jsx("button",{onClick:()=>S(k),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"})})]},k._id)})})]}),E>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[t.jsx("button",{onClick:()=>y(k=>Math.max(1,k-1)),disabled:h===1,style:{padding:"8px 16px",background:h===1?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:h===1?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:h===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",h," of ",E]}),t.jsx("button",{onClick:()=>y(k=>Math.min(E,k+1)),disabled:h===E,style:{padding:"8px 16px",background:h===E?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:h===E?"rgba(251,251,251,0.3)":e.accent.primary,fontSize:"13px",fontWeight:600,cursor:h===E?"not-allowed":"pointer"},children:"Next "})]})]})}),v&&t.jsx(F5,{trip:v,onClose:()=>S(null),onUpdate:k=>{s(r.map(U=>U._id===k._id?k:U)),S(k)}})]})}function E5(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState([]),[o,i]=p.useState(!0),[c,u]=p.useState(!1),[d,x]=p.useState(null),[m,b]=p.useState(null),[v,S]=p.useState(""),[h,y]=p.useState(1),g=20,[f,j]=p.useState({phoneId:"",phoneModel:"",phoneType:"Android",assignedDriverId:"",assignedDriverName:"",status:"available",notes:""}),C=async()=>{try{const T=await J.get("/admin/phones");s(Array.isArray(T)?T:[]),i(!1)}catch(T){console.error("Error loading phones:",T),i(!1)}},E=async()=>{try{const T=await J.get("/admin/drivers");l(Array.isArray(T)?T:[])}catch(T){console.error("Error loading drivers:",T)}};p.useEffect(()=>{C(),E();const T=setInterval(C,5e3);return()=>clearInterval(T)},[]);const A=()=>{if(r.length===0)return"PHONE_001";let T=0;for(const O of r)if(O.phoneId){const V=O.phoneId.match(/PHONE_(\d+)/i);if(V){const P=parseInt(V[1],10);P>T&&(T=P)}}return`PHONE_${String(T+1).padStart(3,"0")}`},M=T=>{if(!T)j({...f,assignedDriverId:"",assignedDriverName:"",status:"available",assignedDate:null});else{const O=n.find(V=>V.driverId===T);j({...f,assignedDriverId:T,assignedDriverName:(O==null?void 0:O.name)||"",status:"assigned",assignedDate:new Date})}},B=async T=>{var O,V;T.preventDefault();try{if(d)await J.put(`/admin/phones/${d._id}`,f),b({type:"success",message:"Phone updated successfully!"});else{const P=A();await J.post("/admin/phones",{...f,phoneId:P}),b({type:"success",message:"Phone created successfully!"})}u(!1),x(null),U(),C(),setTimeout(()=>b(null),3e3)}catch(P){b({type:"error",message:((V=(O=P.response)==null?void 0:O.data)==null?void 0:V.error)||"Failed to save phone"})}},F=T=>{x(T),j({phoneId:T.phoneId,phoneModel:T.phoneModel,phoneType:T.phoneType,assignedDriverId:T.assignedDriverId||"",assignedDriverName:T.assignedDriverName||"",status:T.status,notes:T.notes||""}),u(!0)},L=async T=>{var O,V;if(window.confirm("Are you sure you want to delete this phone?"))try{await J.delete(`/admin/phones/${T}`),b({type:"success",message:"Phone deleted successfully!"}),C(),setTimeout(()=>b(null),3e3)}catch(P){b({type:"error",message:((V=(O=P.response)==null?void 0:O.data)==null?void 0:V.error)||"Failed to delete phone"})}},k=async(T,O)=>{try{const V=n.find(W=>W.driverId===O),P={...T,assignedDriverId:O||null,assignedDriverName:(V==null?void 0:V.name)||null,assignedDate:O?new Date:null,status:O?"assigned":"available"};await J.put(`/admin/phones/${T._id}`,P),b({type:"success",message:"Driver assignment updated!"}),C(),setTimeout(()=>b(null),2e3)}catch{b({type:"error",message:"Failed to update assignment"})}},U=()=>{j({phoneId:"",phoneModel:"",phoneType:"Android",assignedDriverId:"",assignedDriverName:"",status:"available",notes:""})},D=T=>{switch(T){case"available":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"assigned":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"maintenance":return{bg:"rgba(251,191,36,0.2)",color:a?"#FBBF24":"#F59E0B"};case"retired":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};default:return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"}}},_=()=>{const T=Qr(z);Ft(T,"phones")},z=r.filter(T=>{var V,P,W,Z,te,I;if(!v)return!0;const O=v.toLowerCase();return((V=T.phoneId)==null?void 0:V.toLowerCase().includes(O))||((P=T.phoneModel)==null?void 0:P.toLowerCase().includes(O))||((W=T.phoneType)==null?void 0:W.toLowerCase().includes(O))||((Z=T.assignedDriverName)==null?void 0:Z.toLowerCase().includes(O))||((te=T.assignedDriverId)==null?void 0:te.toLowerCase().includes(O))||((I=T.status)==null?void 0:I.toLowerCase().includes(O))}),q=Math.ceil(z.length/g),w=(h-1)*g,N=w+g,R=z.slice(w,N);return p.useEffect(()=>{y(1)},[v]),o?t.jsx("div",{className:"text-center py-[60px]",style:{color:e.accent.primary},children:"Loading phones..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[m&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:m.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:m.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${m.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4,animation:"fadeIn 0.3s ease"},children:m.message}),t.jsxs("div",{className:"mb-[30px] pb-5",style:{borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",style:{color:e.accent.primary},children:[t.jsx("span",{children:""})," Phone Inventory"]}),t.jsx("p",{className:"text-[13px] m-0",style:{color:e.text.secondary},children:v?`Showing: ${z.length} of ${r.length} (Page ${h} of ${q||1})`:`Total devices: ${r.length}  Available: ${r.filter(T=>T.status==="available").length}  Assigned: ${r.filter(T=>T.status==="assigned").length} (Page ${h} of ${q||1})`})]}),t.jsx("button",{onClick:()=>{U(),x(null),u(!0)},style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)",transition:"all 0.3s"},children:"+ Add Phone"})]}),t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsx(Ot,{value:v,onChange:S,placeholder:"Search by phone ID, model, serial, or driver..."}),t.jsx($t,{onClick:_,disabled:z.length===0})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[r.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{children:"No phones found"})]}):z.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{style:{marginBottom:"12px"},children:"No phones match your search"}),t.jsx("button",{onClick:()=>S(""),style:{padding:"8px 16px",background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:e.accent.primary,fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):t.jsx("div",{className:"overflow-x-auto rounded-xl",style:{border:`1px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Phone ID"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Device"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Type"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Assigned Driver"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold uppercase",style:{color:e.accent.primary,borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Status"}),t.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:e.accent.primary,textTransform:"uppercase",borderBottom:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:"Actions"})]})}),t.jsx("tbody",{children:R.map(T=>{const O=D(T.status);return t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},children:[t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:t.jsx("strong",{children:T.phoneId})}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:T.phoneModel}),t.jsx("td",{style:{padding:"16px",color:e.text.primary},children:T.phoneType}),t.jsx("td",{style:{padding:"16px"},children:t.jsxs("select",{value:T.assignedDriverId||"",onChange:V=>k(T,V.target.value),style:{padding:"8px 12px",background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",color:e.accent.primary,border:`1px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",minWidth:"180px"},children:[t.jsx("option",{value:"",children:"Unassigned"}),n.map(V=>t.jsxs("option",{value:V.driverId,children:[V.name," (",V.driverId,")"]},V.driverId))]})}),t.jsx("td",{style:{padding:"16px"},children:t.jsx("span",{style:{padding:"6px 12px",background:O.bg,color:O.color,borderRadius:"6px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",display:"inline-block"},children:T.status})}),t.jsxs("td",{style:{padding:"16px",textAlign:"right"},children:[t.jsx("button",{onClick:()=>F(T),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",marginRight:"8px"},children:"Edit"}),t.jsx("button",{onClick:()=>L(T._id),style:{padding:"6px 12px",background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Delete"})]})]},T._id)})})]})}),q>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"12px",marginTop:"24px",paddingTop:"24px",borderTop:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsx("button",{onClick:()=>y(T=>Math.max(1,T-1)),disabled:h===1,style:{padding:"10px 20px",background:h===1?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:h===1?a?"rgba(255,212,28,0.5)":"rgba(59,130,246,0.5)":e.accent.primary,fontSize:"14px",fontWeight:600,cursor:h===1?"not-allowed":"pointer",transition:"all 0.2s"},children:" Previous"}),t.jsxs("span",{style:{color:"rgba(251,251,251,0.8)",fontSize:"14px",fontWeight:600,minWidth:"120px",textAlign:"center"},children:["Page ",h," of ",q]}),t.jsx("button",{onClick:()=>y(T=>Math.min(q,T+1)),disabled:h===q,style:{padding:"10px 20px",background:h===q?a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:h===q?a?"rgba(255,212,28,0.5)":"rgba(59,130,246,0.5)":e.accent.primary,fontSize:"14px",fontWeight:600,cursor:h===q?"not-allowed":"pointer",transition:"all 0.2s"},children:"Next "})]})]}),c&&t.jsx("div",{onClick:()=>u(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:t.jsxs("div",{onClick:T=>T.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:e.accent.primary,margin:0},children:d?"Edit Phone":"Add New Phone"}),t.jsx("button",{onClick:()=>u(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),t.jsxs("form",{onSubmit:B,style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:["Phone ID ",!d&&t.jsx("span",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontWeight:400},children:"(Auto-generated)"})]}),t.jsx("input",{type:"text",value:d?f.phoneId:A(),disabled:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"8px",background:"rgba(100,100,100,0.2)",color:"rgba(251,251,251,0.5)",fontSize:"14px",boxSizing:"border-box",cursor:"not-allowed"}})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Phone Model *"}),t.jsx("input",{type:"text",value:f.phoneModel,onChange:T=>j({...f,phoneModel:T.target.value}),required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"},placeholder:"e.g., Samsung Galaxy A14"})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Phone Type *"}),t.jsxs("select",{value:f.phoneType,onChange:T=>j({...f,phoneType:T.target.value}),required:!0,style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",cursor:"pointer"},children:[t.jsx("option",{value:"Android",children:"Android"}),t.jsx("option",{value:"iOS",children:"iOS"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Assign to Driver"}),t.jsxs("select",{value:f.assignedDriverId,onChange:T=>M(T.target.value),style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",cursor:"pointer"},children:[t.jsx("option",{value:"",children:"Unassigned"}),n.map(T=>t.jsxs("option",{value:T.driverId,children:[T.name," (",T.driverId,")"]},T.driverId))]})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:e.accent.primary,textTransform:"uppercase"},children:"Notes"}),t.jsx("textarea",{value:f.notes,onChange:T=>j({...f,notes:T.target.value}),rows:"3",style:{width:"100%",padding:"12px",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",fontFamily:"inherit",resize:"vertical"},placeholder:"Any additional notes about this device"})]}),t.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",paddingTop:"20px",borderTop:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsx("button",{type:"button",onClick:()=>u(!1),style:{padding:"12px 24px",background:"rgba(251,251,251,0.1)",color:"rgba(251,251,251,0.7)",border:"1px solid rgba(251,251,251,0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",style:{padding:"12px 24px",background:e.accent.primary,color:e.accent.secondary,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:a?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)"},children:d?"Update Phone":"Create Phone"})]})]})]})}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from { 
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to { 
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}function A5(){var W,Z,te,I;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState("all"),[c,u]=p.useState(""),[d,x]=p.useState(""),[m,b]=p.useState(""),[v,S]=p.useState(""),[h,y]=p.useState(null),[g,f]=p.useState(!1),[j,C]=p.useState(!1),[E,A]=p.useState(""),[M,B]=p.useState(!1),[F,L]=p.useState(1),k=15,U=p.useRef(null),D=async(Y=!1)=>{try{Y||l(!0);const G=new URLSearchParams;d&&G.append("status",d),c&&G.append("search",c);const K=await J.get(`/admin/user-concerns?${G}`);if(K!=null&&K.concerns||Array.isArray(K)){const ce=(K.concerns||K).filter(ae=>{var oe,he;return ae.reportTo==="NU Shuttle Service"||((oe=ae.reportTo)==null?void 0:oe.toLowerCase().includes("motorpool"))||((he=ae.reportTo)==null?void 0:he.toLowerCase().includes("shuttle"))});s(ce)}}catch{Y||$.error("Failed to load concerns")}finally{Y||l(!1)}};p.useEffect(()=>(D(),U.current=setInterval(()=>D(!0),3e4),()=>{U.current&&clearInterval(U.current)}),[d,c]),p.useEffect(()=>{L(1)},[c,d,o,m,v]);const _=Y=>{y(Y),f(!0)},z=Y=>{y(Y),A(""),f(!1),C(!0)},q=async(Y,G)=>{try{const K=JSON.parse(localStorage.getItem("adminData")||"{}"),se=await J.patch(`/admin/user-concerns/${Y.concernId||Y._id}/status`,{status:G,adminName:K.firstName?`${K.firstName} ${K.lastName||""}`.trim():"Motorpool Admin"});se!=null&&se.success&&($.success("Status updated! User has been notified."),D(!0))}catch(K){$.error(K.message||"Failed to update status")}},w=async()=>{if(!E.trim()){$.error("Please provide a resolution message");return}B(!0);try{const Y=JSON.parse(localStorage.getItem("adminData")||"{}"),G=await J.patch(`/admin/user-concerns/${h.concernId||h._id}/status`,{status:"resolved",resolution:E.trim(),adminName:Y.firstName?`${Y.firstName} ${Y.lastName||""}`.trim():"Motorpool Admin"});G!=null&&G.success&&($.success("Concern resolved! User has been notified via email."),C(!1),D(!0))}catch(Y){$.error(Y.message||"Failed to resolve concern")}finally{B(!1)}},N=()=>{const Y=R.map(G=>{var K;return{ID:G.concernId||((K=G._id)==null?void 0:K.slice(-8))||"",Type:G.submissionType||"assistance",User:G.userName||"",Subject:G.subject||"",Status:G.status||"pending",Priority:G.priority||"medium",Rating:G.rating||"",Date:G.submittedAt||G.createdAt?new Date(G.submittedAt||G.createdAt).toLocaleDateString():""}});Ft(Y,"motorpool_concerns")},R=r.filter(Y=>{var G,K,se,ce,ae;if(o==="assistance"&&Y.submissionType!=="assistance"||o==="feedback"&&Y.submissionType!=="feedback")return!1;if(c){const oe=c.toLowerCase();if(!(((G=Y._id)==null?void 0:G.toLowerCase().includes(oe))||((K=Y.concernId)==null?void 0:K.toLowerCase().includes(oe))||((se=Y.subject)==null?void 0:se.toLowerCase().includes(oe))||((ce=Y.feedbackText)==null?void 0:ce.toLowerCase().includes(oe))||((ae=Y.userName)==null?void 0:ae.toLowerCase().includes(oe))))return!1}if(d&&Y.status!==d)return!1;if(m||v){const oe=new Date(Y.submittedAt||Y.createdAt);if(m&&oe<new Date(m)||v&&oe>new Date(v+"T23:59:59"))return!1}return!0}),T=Math.ceil(R.length/k),O=(F-1)*k,V=R.slice(O,O+k),P=Y=>{switch(Y){case"pending":return"#FBBF24";case"in_progress":return"#3B82F6";case"resolved":return"#10B981";default:return e.text.secondary}};return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading concerns..."]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("div",{className:"mb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Concerns & Feedback"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:R.length>0?`Showing ${O+1}-${Math.min(O+k,R.length)} of ${R.length}  Page ${F} of ${T}`:`Manage motorpool concerns and feedback  Total: ${r.length}`})]}),t.jsxs("div",{className:"flex gap-2 mb-5",children:[t.jsxs("button",{onClick:()=>i("all"),style:{padding:"10px 20px",background:o==="all"?"rgba(255,212,28,0.2)":"transparent",border:`2px solid ${o==="all"?e.accent.primary:"rgba(255,212,28,0.3)"}`,borderRadius:"8px",color:o==="all"?e.accent.primary:e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["All (",r.length,")"]}),t.jsxs("button",{onClick:()=>i("assistance"),style:{padding:"10px 20px",background:o==="assistance"?"rgba(59,130,246,0.2)":"transparent",border:`2px solid ${o==="assistance"?"#3B82F6":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:o==="assistance"?"#3B82F6":e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Assistance (",r.filter(Y=>Y.submissionType==="assistance"||!Y.submissionType).length,")"]}),t.jsxs("button",{onClick:()=>i("feedback"),style:{padding:"10px 20px",background:o==="feedback"?"rgba(34,197,94,0.2)":"transparent",border:`2px solid ${o==="feedback"?"#22C55E":"rgba(34,197,94,0.3)"}`,borderRadius:"8px",color:o==="feedback"?"#22C55E":e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Feedback (",r.filter(Y=>Y.submissionType==="feedback").length,")"]})]}),t.jsxs("div",{className:"flex gap-3 items-end flex-wrap",children:[t.jsx(Ot,{value:c,onChange:u,placeholder:"Search by ID, user, subject..."}),o!=="feedback"&&t.jsx(Jt,{value:d,onChange:x,label:"Status",options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"}]}),t.jsx(hr,{startDate:m,endDate:v,onStartChange:b,onEndChange:S}),t.jsx($t,{onClick:N,disabled:R.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:R.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{children:"No concerns found"})]}):t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"ID"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"User"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Subject"}),o==="all"&&t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Type"}),o==="feedback"?t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Rating"}):t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Date"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-right p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:V.map(Y=>{var G,K,se;return t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},className:"hover:bg-white/5 transition",children:[t.jsx("td",{style:{color:e.text.primary},className:"p-4 font-mono text-xs",children:Y.concernId||((G=Y._id)==null?void 0:G.slice(-8))}),t.jsx("td",{style:{color:e.text.primary},className:"p-4",children:Y.userName||"N/A"}),t.jsx("td",{style:{color:e.text.primary},className:"p-4 max-w-[200px] truncate",children:Y.subject||(((K=Y.selectedConcerns)==null?void 0:K.length)>0?Y.selectedConcerns.join(", "):"No subject")}),o==="all"&&t.jsx("td",{className:"p-4",children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:Y.submissionType==="feedback"?"rgba(34,197,94,0.2)":"rgba(59,130,246,0.2)",color:Y.submissionType==="feedback"?"#22C55E":"#3B82F6",border:`1px solid ${Y.submissionType==="feedback"?"rgba(34,197,94,0.3)":"rgba(59,130,246,0.3)"}`},children:Y.submissionType==="feedback"?" Feedback":" Assistance"})}),o==="feedback"?t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((ce,ae)=>t.jsx("span",{style:{fontSize:"14px",color:ae<(Y.rating||0)?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},ae)),t.jsxs("span",{style:{color:e.text.muted,marginLeft:"8px",fontSize:"11px"},children:["(",Y.rating||0,"/5)"]})]})}):t.jsx("td",{className:"p-4",children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:`${P(Y.status)}20`,color:P(Y.status)},children:((se=Y.status)==null?void 0:se.replace("_"," "))||"Pending"})}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4 text-sm",children:Y.submittedAt||Y.createdAt?new Date(Y.submittedAt||Y.createdAt).toLocaleDateString():""}),t.jsx("td",{className:"p-4 text-right",children:t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{onClick:()=>_(Y),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"}),o!=="feedback"&&Y.status!=="resolved"&&t.jsxs(t.Fragment,{children:[Y.status!=="in_progress"&&t.jsx("button",{onClick:()=>q(Y,"in_progress"),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"2px solid #3B82F6",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:700},children:"In Progress"}),t.jsx("button",{onClick:()=>z(Y),style:{padding:"6px 12px",background:"#10B981",color:"#FFFFFF",border:"2px solid #10B981",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:700},children:"Resolve"})]})]})})]},Y._id)})})]}),T>1&&t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-4 border-t flex items-center justify-center gap-3",children:[t.jsx("button",{onClick:()=>L(Y=>Math.max(1,Y-1)),disabled:F===1,style:{padding:"8px 16px",background:F===1?"rgba(100,100,100,0.2)":e.bg.tertiary,color:F===1?e.text.muted:e.accent.primary,border:`2px solid ${F===1?"transparent":e.accent.primary}`,borderRadius:"8px",fontSize:"13px",fontWeight:600,cursor:F===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:e.text.secondary,fontSize:"13px",fontWeight:600},children:["Page ",F," of ",T]}),t.jsx("button",{onClick:()=>L(Y=>Math.min(T,Y+1)),disabled:F===T,style:{padding:"8px 16px",background:F===T?"rgba(100,100,100,0.2)":e.bg.tertiary,color:F===T?e.text.muted:e.accent.primary,border:`2px solid ${F===T?"transparent":e.accent.primary}`,borderRadius:"8px",fontSize:"13px",fontWeight:600,cursor:F===T?"not-allowed":"pointer"},children:"Next "})]})]})}),g&&h&&t.jsx("div",{onClick:()=>f(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:Y=>Y.stopPropagation(),style:{background:a?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:`2px solid ${e.border.primary}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${e.border.primary}`,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t.jsxs("div",{children:[t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:`${P(h.status)}20`,color:P(h.status),marginBottom:"8px"},children:((W=h.status)==null?void 0:W.replace("_"," "))||"Pending"}),t.jsx("h2",{style:{fontSize:"20px",fontWeight:700,color:e.text.primary,margin:0},children:h.subject||(((Z=h.selectedConcerns)==null?void 0:Z.length)>0?h.selectedConcerns.join(", "):"No Subject")})]}),t.jsx("button",{onClick:()=>f(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px"},children:""})]}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[t.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:e.accent.primary,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"18px",color:e.accent.secondary},children:((te=h.userName)==null?void 0:te[0])||"?"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.primary,fontWeight:600,margin:0},children:h.userName||"Unknown User"}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",margin:0},children:h.userEmail||"No email provided"})]}),t.jsx("div",{style:{marginLeft:"auto",textAlign:"right"},children:t.jsx("p",{style:{color:e.text.muted,fontSize:"12px",margin:0},children:h.submittedAt||h.createdAt?new Date(h.submittedAt||h.createdAt).toLocaleString():""})})]}),t.jsx("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",marginBottom:"20px",border:`1px solid ${e.border.primary}`},children:t.jsx("p",{style:{color:e.text.primary,whiteSpace:"pre-wrap",margin:0,lineHeight:"1.6"},children:h.feedbackText||h.description||"No message provided"})}),h.submissionType==="feedback"&&h.rating&&t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("p",{style:{color:e.text.secondary,fontSize:"12px",marginBottom:"8px",fontWeight:600},children:"Rating"}),t.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((Y,G)=>t.jsx("span",{style:{fontSize:"24px",color:G<h.rating?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},G)),t.jsxs("span",{style:{color:e.text.secondary,marginLeft:"8px"},children:["(",h.rating,"/5)"]})]})]}),(h.resolution||h.adminResponse)&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(16,185,129,0.3)"},children:[t.jsx("p",{style:{color:"#10B981",fontSize:"12px",marginBottom:"8px",fontWeight:700},children:"Admin Response"}),t.jsx("p",{style:{color:e.text.primary,margin:0},children:h.resolution||h.adminResponse})]})]}),h.status!=="resolved"&&h.submissionType!=="feedback"&&t.jsxs("div",{style:{padding:"20px 24px",borderTop:`2px solid ${e.border.primary}`,display:"flex",gap:"12px",justifyContent:"flex-end"},children:[h.status!=="in_progress"&&t.jsx("button",{onClick:()=>{q(h,"in_progress"),f(!1)},style:{padding:"12px 24px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"2px solid #3B82F6",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:700},children:"Mark In Progress"}),t.jsx("button",{onClick:()=>{f(!1),z(h)},style:{padding:"12px 24px",background:"#10B981",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:700,boxShadow:"0 4px 12px rgba(16,185,129,0.4)"},children:" Resolve Concern"})]})]})}),j&&h&&t.jsx("div",{onClick:()=>C(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:Y=>Y.stopPropagation(),style:{background:a?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",maxWidth:"500px",width:"90%",border:`2px solid ${e.border.primary}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("div",{style:{padding:"24px",borderBottom:"2px solid rgba(16,185,129,0.3)",background:"rgba(16,185,129,0.1)",borderRadius:"16px 16px 0 0"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#10B981",margin:0,marginBottom:"8px"},children:"Resolve Concern"}),t.jsx("p",{style:{fontSize:"13px",color:e.text.secondary,margin:0},children:"Mark this concern as resolved and notify the user"})]}),t.jsx("button",{onClick:()=>C(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px"},children:""})]})}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",marginBottom:"20px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:e.text.secondary,fontSize:"12px"},children:"From"}),t.jsx("span",{style:{color:e.text.primary,fontSize:"14px",fontWeight:600},children:h.userName||"Unknown User"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:e.text.secondary,fontSize:"12px"},children:"Subject"}),t.jsx("span",{style:{color:e.text.primary,fontSize:"14px",fontWeight:600,maxWidth:"60%",textAlign:"right"},children:h.subject||(((I=h.selectedConcerns)==null?void 0:I.length)>0?h.selectedConcerns.join(", "):"No Subject")})]})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:e.text.primary,fontWeight:600,display:"block",marginBottom:"8px"},children:["Resolution Message ",t.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",marginBottom:"12px"},children:"This message will be sent to the user via email."}),t.jsx("textarea",{value:E,onChange:Y=>A(Y.target.value),placeholder:"Enter your resolution response...",rows:5,style:{width:"100%",padding:"12px",borderRadius:"8px",border:`2px solid ${e.border.primary}`,background:e.bg.tertiary,color:e.text.primary,fontSize:"14px",resize:"vertical",outline:"none",boxSizing:"border-box"},autoFocus:!0})]})]}),t.jsxs("div",{style:{padding:"20px 24px",borderTop:`2px solid ${e.border.primary}`,display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:()=>C(!1),disabled:M,style:{flex:1,padding:"14px",background:e.bg.tertiary,color:e.text.primary,border:`1px solid ${e.border.primary}`,borderRadius:"8px",cursor:M?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:M?.5:1},children:"Cancel"}),t.jsx("button",{onClick:w,disabled:M||!E.trim(),style:{flex:1,padding:"14px",background:M||!E.trim()?"rgba(16,185,129,0.3)":"#10B981",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:M||!E.trim()?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:M||!E.trim()?.6:1,boxShadow:M||!E.trim()?"none":"0 4px 12px rgba(16,185,129,0.4)"},children:M?" Resolving...":" Resolve & Notify User"})]})]})})]})}function R5(){var _,z,q;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState({autoExport:{frequency:"daily",exportTypes:[],time:"00:00",emailRecipients:[]}}),[n,l]=p.useState(!1),[o,i]=p.useState(!1),[c,u]=p.useState(!1),[d,x]=p.useState([]),[m,b]=p.useState("all"),[v,S]=p.useState(""),[h,y]=p.useState({start:"",end:""}),[g,f]=p.useState("all"),[j,C]=p.useState(""),[E,A]=p.useState(""),M=[{value:"Drivers",icon:"",label:"Drivers"},{value:"Routes",icon:"",label:"Routes"},{value:"Trips",icon:"",label:"Trips"},{value:"Shuttles",icon:"",label:"Shuttles"},{value:"Phones",icon:"",label:"Driver Phones"},{value:"Logs",icon:"",label:"Motorpool Logs"},{value:"Concerns",icon:"",label:"Motorpool Concerns"}];p.useEffect(()=>{B(),F()},[]);const B=async()=>{try{const w=await J.get("/admin/configurations?adminRole=motorpool");w&&s(w)}catch(w){console.error("Error loading configurations:",w)}},F=async()=>{try{const[w,N]=await Promise.all([J.get("/admin/configurations/scheduled-exports?adminRole=motorpool").catch(()=>[]),J.get("/admin/configurations/export-history?adminRole=motorpool").catch(()=>[])]),R=(Array.isArray(w)?w:[]).map(V=>({...V,exportSource:"auto"})),T=(Array.isArray(N)?N:[]).map(V=>({...V,exportSource:"manual"})),O=[...R,...T].sort((V,P)=>{const W=new Date(V.exportedAt||V.timestamp||V.createdAt);return new Date(P.exportedAt||P.timestamp||P.createdAt)-W});x(O)}catch(w){console.error("Error loading export archive:",w)}},L=async()=>{var w,N;l(!0);try{await J.put("/admin/configurations/auto-export",{...r.autoExport,adminRole:"motorpool"}),$.success("Auto-export settings saved successfully!"),i(!1),B()}catch(R){$.error(((N=(w=R.response)==null?void 0:w.data)==null?void 0:N.error)||"Failed to save settings")}finally{l(!1)}},k=async()=>{var w,N;l(!0);try{if(!r.autoExport.exportTypes||r.autoExport.exportTypes.length===0){$.error("Please select at least one export type in the configuration settings"),l(!1);return}const R=await J.post("/admin/configurations/manual-export-motorpool",{exportTypes:r.autoExport.exportTypes,dateRange:g,customStartDate:j,customEndDate:E});if($.success(`Motorpool data exported successfully! (${R.totalRecords||R.recordCount||0} total records)`),R.downloadUrl){const T=document.createElement("a");T.href=R.downloadUrl,T.download=R.fileName||`motorpool_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(T),T.click(),document.body.removeChild(T)}u(!1),f("all"),C(""),A(""),F()}catch(R){$.error(((N=(w=R.response)==null?void 0:w.data)==null?void 0:N.error)||"Export failed")}finally{l(!1)}},U=async w=>{try{const N=await J.get(`/admin/configurations/download-export/${w}`);if(N.downloadUrl){const R=document.createElement("a");R.href=N.downloadUrl,R.download=N.fileName,document.body.appendChild(R),R.click(),document.body.removeChild(R)}}catch{$.error("Failed to download export")}},D=d.filter(w=>{var N,R;if(m!=="all"&&w.exportSource!==m)return!1;if(v){const T=v.toLowerCase();if(!(((N=w.exportType)==null?void 0:N.toLowerCase().includes(T))||((R=w.fileName)==null?void 0:R.toLowerCase().includes(T))))return!1}if(h.start||h.end){const T=new Date(w.exportedAt||w.timestamp||w.createdAt);if(h.start&&T<new Date(h.start)||h.end&&T>new Date(h.end+"T23:59:59"))return!1}return!0});return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{marginBottom:"24px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,paddingBottom:"16px"},children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Motorpool Settings"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Configure automated motorpool data exports and system settings"})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[t.jsxs("div",{style:{background:e.bg.card,borderRadius:"16px",border:`1px solid ${e.border.primary}`,padding:"28px",marginBottom:"24px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{color:e.accent.primary,fontSize:"20px",fontWeight:700,margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," Automated Motorpool Export"]}),t.jsxs("p",{style:{color:e.text.secondary,fontSize:"14px",margin:0,lineHeight:"1.5"},children:["System automatically exports motorpool data as ZIP files for backup and compliance.",t.jsx("br",{}),"Configure the schedule and download reports manually anytime."]})]}),t.jsxs("button",{onClick:()=>i(!0),style:{padding:"12px 20px",background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"10px",color:e.accent.primary,fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Configure Schedule"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[t.jsx(Zi,{icon:"",label:"Frequency",value:((_=r.autoExport.frequency)==null?void 0:_.charAt(0).toUpperCase())+((z=r.autoExport.frequency)==null?void 0:z.slice(1))||"Not set",theme:e}),t.jsx(Zi,{icon:"",label:"Export Time",value:r.autoExport.time||"Not set",theme:e}),t.jsx(Zi,{icon:"",label:"Data Types",value:`${((q=r.autoExport.exportTypes)==null?void 0:q.length)||0} selected`,theme:e})]}),t.jsxs("div",{style:{padding:"24px",background:"rgba(34,197,94,0.1)",border:"2px dashed rgba(34,197,94,0.3)",borderRadius:"12px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),t.jsx("h4",{style:{color:e.text.primary,fontSize:"16px",fontWeight:700,marginBottom:"8px"},children:"Export Motorpool Data Now"}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",marginBottom:"16px"},children:"Download a complete ZIP file with all motorpool data: drivers, routes, trips, shuttles, phones, logs, and concerns."}),t.jsx("button",{onClick:()=>u(!0),disabled:n,style:{padding:"14px 32px",background:n?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:n?"not-allowed":"pointer",boxShadow:n?"none":"0 4px 12px rgba(34,197,94,0.4)",transition:"all 0.2s ease",opacity:n?.6:1},children:n?" Exporting...":" Download Motorpool Data (ZIP)"})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderRadius:"16px",border:`1px solid ${e.border.primary}`,padding:"28px",marginBottom:"24px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{color:e.accent.primary,fontSize:"18px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," Export Archive"]}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"12px",margin:0},children:"All exports - auto-scheduled and manual"})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("div",{style:{display:"flex",borderRadius:"8px",overflow:"hidden",border:`1px solid ${e.border.primary}`},children:[{key:"all",label:"All"},{key:"auto",label:" Auto"},{key:"manual",label:" Manual"}].map(w=>t.jsx("button",{onClick:()=>b(w.key),style:{padding:"8px 16px",background:m===w.key?e.accent.primary:"transparent",color:m===w.key?a?"#181D40":"#FFFFFF":e.text.secondary,border:"none",fontSize:"12px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:w.label},w.key))}),t.jsx("input",{type:"text",placeholder:"Search exports...",value:v,onChange:w=>S(w.target.value),style:{padding:"8px 16px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"13px",outline:"none",width:"180px"}}),t.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t.jsx("input",{type:"date",value:h.start,onChange:w=>y({...h,start:w.target.value}),style:{padding:"8px 12px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"12px",outline:"none"}}),t.jsx("span",{style:{color:e.text.tertiary},children:""}),t.jsx("input",{type:"date",value:h.end,onChange:w=>y({...h,end:w.target.value}),style:{padding:"8px 12px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"12px",outline:"none"}}),(h.start||h.end||v)&&t.jsx("button",{onClick:()=>{S(""),y({start:"",end:""})},style:{padding:"8px 12px",background:"rgba(239,68,68,0.2)",border:"2px solid rgba(239,68,68,0.3)",borderRadius:"8px",color:"#EF4444",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Clear"})]})]})]}),D.length===0?t.jsxs("div",{style:{padding:"40px",textAlign:"center",color:e.text.tertiary,fontSize:"14px"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",opacity:.3},children:""}),t.jsx("p",{style:{margin:0},children:"No exports found"}),t.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"12px"},children:[m!=="all"?"Try changing the filter or ":"","Configure auto-export or run a manual export to start"]})]}):t.jsx("div",{style:{maxHeight:"500px",overflowY:"auto",paddingRight:"8px"},children:t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:D.map((w,N)=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 18px",background:e.bg.tertiary,borderRadius:"10px",border:`1px solid ${e.border.primary}`,fontSize:"14px",transition:"all 0.2s ease"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},children:[t.jsx("span",{style:{fontSize:"20px"},children:w.exportSource==="auto"?"":""}),t.jsx("span",{style:{color:e.accent.primary,fontWeight:700,fontSize:"15px"},children:w.exportType||"Motorpool Export"}),t.jsx("span",{style:{padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:700,background:w.exportSource==="auto"?"rgba(59,130,246,0.2)":"rgba(34,197,94,0.2)",color:w.exportSource==="auto"?"#3B82F6":"#22C55E",border:`1px solid ${w.exportSource==="auto"?"rgba(59,130,246,0.3)":"rgba(34,197,94,0.3)"}`},children:w.exportSource==="auto"?"AUTO":"MANUAL"})]}),t.jsxs("div",{style:{display:"flex",gap:"20px",fontSize:"13px",color:e.text.secondary},children:[t.jsxs("span",{children:[" ",new Date(w.exportedAt||w.timestamp||w.createdAt).toLocaleDateString()]}),t.jsxs("span",{children:[" ",new Date(w.exportedAt||w.timestamp||w.createdAt).toLocaleTimeString()]}),w.fileName&&t.jsxs("span",{children:[" ",w.fileName]}),w.recordCount&&t.jsxs("span",{children:[" ",w.recordCount," records"]})]})]}),w.status==="success"||!w.status?t.jsx("button",{onClick:()=>U(w._id),style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(34,197,94,0.2)",color:"#22C55E",border:"2px solid rgba(34,197,94,0.3)",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},children:" Download"}):t.jsx("span",{style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"2px solid rgba(239,68,68,0.3)"},children:" Failed"})]},w._id||N))})})]})]}),c&&t.jsx(z5,{dateRange:g,setDateRange:f,customStartDate:j,setCustomStartDate:C,customEndDate:E,setCustomEndDate:A,loading:n,onExport:k,onCancel:()=>{u(!1),f("all"),C(""),A("")},theme:e,isDarkMode:a}),o&&t.jsx(B5,{configurations:r,setConfigurations:s,exportTypes:M,loading:n,onSave:L,onCancel:()=>i(!1),theme:e,isDarkMode:a})]})}function Zi({icon:e,label:a,value:r,theme:s}){return t.jsxs("div",{style:{padding:"20px",background:s.bg.tertiary,borderRadius:"12px",border:`1px solid ${s.border.primary}`},children:[t.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:e}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary,marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:700},children:a}),t.jsx("div",{style:{fontSize:"16px",color:s.text.primary,fontWeight:700},children:r})]})}function z5({dateRange:e,setDateRange:a,customStartDate:r,setCustomStartDate:s,customEndDate:n,setCustomEndDate:l,loading:o,onExport:i,onCancel:c,theme:u,isDarkMode:d}){return t.jsx("div",{onClick:c,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:x=>x.stopPropagation(),style:{background:d?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",border:`1px solid ${u.border.primary}`,padding:"32px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("h3",{style:{color:u.accent.primary,fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Select Date Range"}),t.jsx("p",{style:{color:u.text.secondary,fontSize:"13px",margin:"0 0 24px 0"},children:"Choose which records to include in the export"}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:[{value:"all",label:" All Time",desc:"Export all records"},{value:"24hr",label:" Last 24 Hours",desc:"Records from the past day"},{value:"week",label:" This Week",desc:"Records from the past 7 days"},{value:"month",label:" This Month",desc:"Records from current month"},{value:"custom",label:" Custom Range",desc:"Choose specific dates"}].map(x=>t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px",background:e===x.value?`${u.accent.primary}20`:u.bg.tertiary,border:`2px solid ${e===x.value?u.accent.primary:u.border.primary}`,borderRadius:"10px",cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsx("input",{type:"radio",name:"dateRange",value:x.value,checked:e===x.value,onChange:m=>a(m.target.value),style:{cursor:"pointer",width:"18px",height:"18px"}}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{color:u.text.primary,fontSize:"14px",fontWeight:700,marginBottom:"4px"},children:x.label}),t.jsx("div",{style:{color:u.text.secondary,fontSize:"12px"},children:x.desc})]})]},x.value))}),e==="custom"&&t.jsx("div",{style:{marginBottom:"24px",padding:"16px",background:u.bg.tertiary,borderRadius:"10px"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:u.accent.primary},children:"Start Date"}),t.jsx("input",{type:"date",value:r,onChange:x=>s(x.target.value),style:{width:"100%",padding:"10px",background:u.bg.secondary,border:`2px solid ${u.border.primary}`,borderRadius:"8px",color:u.text.primary,fontSize:"13px",outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:u.accent.primary},children:"End Date"}),t.jsx("input",{type:"date",value:n,onChange:x=>l(x.target.value),style:{width:"100%",padding:"10px",background:u.bg.secondary,border:`2px solid ${u.border.primary}`,borderRadius:"8px",color:u.text.primary,fontSize:"13px",outline:"none",boxSizing:"border-box"}})]})]})}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:i,disabled:o,style:{flex:1,padding:"14px 24px",background:o?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:o?"not-allowed":"pointer",boxShadow:o?"none":"0 4px 12px rgba(34,197,94,0.4)",opacity:o?.6:1},children:o?" Exporting...":" Export Now"}),t.jsx("button",{onClick:c,disabled:o,style:{flex:1,padding:"14px 24px",background:u.bg.tertiary,color:u.text.primary,border:`2px solid ${u.border.primary}`,borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:o?"not-allowed":"pointer"},children:"Cancel"})]})]})})}function B5({configurations:e,setConfigurations:a,exportTypes:r,loading:s,onSave:n,onCancel:l,theme:o,isDarkMode:i}){var c,u,d,x,m;return t.jsx("div",{onClick:l,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:b=>b.stopPropagation(),style:{background:i?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",border:`1px solid ${o.border.primary}`,padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("h3",{style:{color:o.accent.primary,fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Configure Export Schedule"}),t.jsx("p",{style:{color:o.text.secondary,fontSize:"13px",margin:"0 0 24px 0"},children:"Set up when and how often the system should automatically export data."}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",borderRadius:"12px",background:(c=e.autoExport)!=null&&c.enabled?"rgba(16,185,129,0.1)":"rgba(239,68,68,0.1)",border:`2px solid ${(u=e.autoExport)!=null&&u.enabled?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"}`},children:[t.jsxs("div",{children:[t.jsx("div",{style:{color:o.text.primary,fontWeight:700,fontSize:"14px"},children:"Enable Automatic Export"}),t.jsx("div",{style:{color:o.text.secondary,fontSize:"12px",marginTop:"4px"},children:(d=e.autoExport)!=null&&d.enabled?" Auto-export is active":" Auto-export is disabled"})]}),t.jsx("button",{onClick:()=>{var b;return a({...e,autoExport:{...e.autoExport,enabled:!((b=e.autoExport)!=null&&b.enabled)}})},style:{background:(x=e.autoExport)!=null&&x.enabled?"#10B981":"#6B7280",width:"52px",height:"28px",borderRadius:"14px",position:"relative",border:"none",cursor:"pointer",transition:"all 0.2s ease"},children:t.jsx("div",{style:{position:"absolute",top:"2px",left:(m=e.autoExport)!=null&&m.enabled?"26px":"2px",width:"24px",height:"24px",borderRadius:"12px",background:"#FFFFFF",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Frequency"}),t.jsxs("select",{value:e.autoExport.frequency,onChange:b=>a({...e,autoExport:{...e.autoExport,frequency:b.target.value}}),style:{width:"100%",padding:"12px 16px",background:o.bg.tertiary,border:`2px solid ${o.border.primary}`,borderRadius:"8px",color:o.text.primary,fontSize:"14px",fontWeight:600,cursor:"pointer",outline:"none"},children:[t.jsx("option",{value:"daily",style:{background:i?"#1E2347":"#FFFFFF"},children:" Daily"}),t.jsx("option",{value:"weekly",style:{background:i?"#1E2347":"#FFFFFF"},children:" Weekly"}),t.jsx("option",{value:"monthly",style:{background:i?"#1E2347":"#FFFFFF"},children:" Monthly"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Export Time (24-hour)"}),t.jsx("input",{type:"time",value:e.autoExport.time,onChange:b=>a({...e,autoExport:{...e.autoExport,time:b.target.value}}),style:{width:"100%",padding:"12px 16px",background:o.bg.tertiary,border:`2px solid ${o.border.primary}`,borderRadius:"8px",color:o.text.primary,fontSize:"14px",fontWeight:600,outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"12px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Data Types to Export"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:r.map(b=>{var v,S,h;return t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px",background:(v=e.autoExport.exportTypes)!=null&&v.includes(b.value)?`${o.accent.primary}20`:o.bg.tertiary,border:`2px solid ${(S=e.autoExport.exportTypes)!=null&&S.includes(b.value)?o.accent.primary:o.border.primary}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsx("input",{type:"checkbox",checked:((h=e.autoExport.exportTypes)==null?void 0:h.includes(b.value))||!1,onChange:y=>{const g=e.autoExport.exportTypes||[],f=y.target.checked?[...g,b.value]:g.filter(j=>j!==b.value);a({...e,autoExport:{...e.autoExport,exportTypes:f}})},style:{cursor:"pointer",width:"16px",height:"16px"}}),t.jsx("span",{style:{fontSize:"16px"},children:b.icon}),t.jsx("span",{style:{color:o.text.primary,fontSize:"14px",fontWeight:600},children:b.label})]},b.value)})})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[t.jsx("button",{onClick:n,disabled:s,style:{flex:1,padding:"14px 24px",background:s?"#9CA3AF":o.accent.primary,color:i?"#181D40":"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:s?"not-allowed":"pointer",boxShadow:s?"none":"0 4px 12px rgba(255,212,28,0.4)",opacity:s?.6:1},children:s?" Saving...":" Save Settings"}),t.jsx("button",{onClick:l,disabled:s,style:{flex:1,padding:"14px 24px",background:o.bg.tertiary,color:o.text.primary,border:`2px solid ${o.border.primary}`,borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:s?"not-allowed":"pointer"},children:"Cancel"})]})]})]})})}function D5(){const e=Je(),[a,r]=p.useState(null),[s,n]=p.useState(!0),[l]=p.useState(()=>{const i=localStorage.getItem("adminData");return i?JSON.parse(i):null});p.useEffect(()=>{o()},[]);const o=async()=>{try{const i=localStorage.getItem("adminToken"),c=await fetch("http://18.166.29.239:3000/api/merchant/stats",{headers:{Authorization:`Bearer ${i}`}});if(!c.ok)throw new Error("Failed to load stats");const u=await c.json();r(u)}catch(i){console.error("Error loading merchant stats:",i),r({totalMerchants:0,activeMerchants:0,inactiveMerchants:0,recentMerchants:[]})}finally{n(!1)}};return s?t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px",color:"#FFD41C"},children:t.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid rgba(255, 212, 28, 0.3)",borderTopColor:"#FFD41C",borderRadius:"50%",animation:"spin 0.8s linear infinite"}})}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px",marginBottom:"32px"},children:[t.jsx(Ji,{icon:"",label:"Total Merchants",value:(a==null?void 0:a.totalMerchants)||0,color:"#FFD41C"}),t.jsx(Ji,{icon:"",label:"Active Merchants",value:(a==null?void 0:a.activeMerchants)||0,color:"#22C55E"}),t.jsx(Ji,{icon:"",label:"Inactive Merchants",value:(a==null?void 0:a.inactiveMerchants)||0,color:"#EF4444"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:t.jsxs("div",{style:{background:"linear-gradient(135deg, #1E2347 0%, #181D40 100%)",borderRadius:"16px",border:"2px solid rgba(255, 212, 28, 0.3)",padding:"24px"},children:[t.jsxs("h3",{style:{fontSize:"18px",fontWeight:700,color:"#FBFBFB",margin:"0 0 20px 0",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""}),"Recently Added Merchants"]}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:a!=null&&a.recentMerchants&&a.recentMerchants.length>0?a.recentMerchants.slice(0,5).map((i,c)=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",background:"rgba(255, 212, 28, 0.05)",border:"1px solid rgba(255, 212, 28, 0.2)",borderRadius:"10px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[t.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #FFD41C 0%, #F59E0B 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:700,color:"#181D40"},children:""}),t.jsxs("div",{children:[t.jsx("div",{style:{color:"#FBFBFB",fontWeight:600,fontSize:"15px",marginBottom:"4px"},children:i.businessName||"Merchant"}),t.jsx("div",{style:{color:"rgba(251, 251, 251, 0.6)",fontSize:"12px"},children:i.email})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("span",{style:{padding:"4px 12px",background:i.isActive?"rgba(34, 197, 94, 0.15)":"rgba(239, 68, 68, 0.15)",border:`1px solid ${i.isActive?"rgba(34, 197, 94, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:"20px",color:i.isActive?"#22C55E":"#EF4444",fontSize:"11px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.5px"},children:i.isActive?"Active":"Inactive"}),t.jsx("span",{style:{fontSize:"11px",color:"rgba(251, 251, 251, 0.5)",whiteSpace:"nowrap"},children:i.createdAt?new Date(i.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Recently"})]})]},i._id||c)):t.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"rgba(251, 251, 251, 0.5)",fontSize:"14px"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),t.jsx("div",{children:"No merchants added yet"}),t.jsx("div",{style:{fontSize:"12px",marginTop:"8px"},children:"Navigate to the Merchants tab to add new merchants"})]})})]})}),t.jsxs("div",{style:{marginTop:"24px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[t.jsx(Rl,{icon:"",title:"Manage Merchants",description:"View and manage all merchants",onClick:()=>e("/admin/merchant/merchants")}),t.jsx(Rl,{icon:"",title:"Manage Phones",description:"View and manage phone assignments",onClick:()=>e("/admin/merchant/phones")}),t.jsx(Rl,{icon:"",title:"View Logs",description:"Check system activity logs",onClick:()=>e("/admin/logs")}),t.jsx(Rl,{icon:"",title:"Configurations",description:"Adjust system settings",onClick:()=>e("/admin/configurations")})]}),t.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}function Ji({icon:e,label:a,value:r,color:s}){return t.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"24px",borderRadius:"16px",border:"1px solid rgba(255, 212, 28, 0.2)",position:"relative",overflow:"hidden",transition:"all 0.3s ease"},children:[t.jsx("div",{style:{position:"absolute",right:"16px",top:"16px",fontSize:"40px",opacity:.15},children:e}),t.jsx("div",{style:{fontSize:"11px",color:"rgba(251, 251, 251, 0.6)",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px"},children:a}),t.jsx("div",{style:{fontSize:"32px",fontWeight:800,color:"#FBFBFB",marginBottom:"8px"},children:r}),t.jsx("div",{style:{fontSize:"12px",color:s,fontWeight:600,display:"inline-block",padding:"3px 10px",borderRadius:"12px",background:`${s}20`},children:r>0?"merchants":"none"})]})}function Rl({icon:e,title:a,description:r,onClick:s}){const[n,l]=je.useState(!1);return t.jsxs("div",{onClick:s,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{background:n?"linear-gradient(135deg, #1E2347 0%, #181D40 100%)":"rgba(30, 35, 71, 0.4)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"12px",padding:"20px",cursor:"pointer",transition:"all 0.3s ease",transform:n?"translateY(-4px)":"translateY(0)",boxShadow:n?"0 8px 24px rgba(255, 212, 28, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[t.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:e}),t.jsx("div",{style:{fontSize:"15px",fontWeight:700,color:"#FFD41C",marginBottom:"6px"},children:a}),t.jsx("div",{style:{fontSize:"12px",color:"rgba(251, 251, 251, 0.6)",lineHeight:"1.5"},children:r})]})}function _5({isOpen:e,title:a,message:r,confirmText:s="Confirm",cancelText:n="Cancel",confirmColor:l="danger",onConfirm:o,onCancel:i}){if(!e)return null;const c=l==="danger"?{background:"linear-gradient(135deg, #EF4444 0%, #DC2626 100%)",color:"#FFFFFF"}:{background:"linear-gradient(135deg, #22C55E 0%, #16A34A 100%)",color:"#FFFFFF"};return t.jsxs("div",{onClick:i,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15, 18, 39, 0.9)",backdropFilter:"blur(8px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{onClick:u=>u.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",border:"1px solid rgba(255, 212, 28, 0.2)",padding:"32px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",animation:"slideUp 0.3s ease"},children:[t.jsx("h3",{style:{fontSize:"20px",fontWeight:700,color:"#FBFBFB",margin:"0 0 16px 0"},children:a}),t.jsx("p",{style:{fontSize:"14px",color:"rgba(251, 251, 251, 0.8)",margin:"0 0 24px 0",lineHeight:"1.6"},children:r}),t.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[t.jsx("button",{onClick:i,style:{padding:"12px 24px",background:"rgba(255, 212, 28, 0.1)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(255, 212, 28, 0.2)"},onMouseLeave:u=>{u.currentTarget.style.background="rgba(255, 212, 28, 0.1)"},children:n}),t.jsx("button",{onClick:o,style:{padding:"12px 24px",...c,border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.opacity="0.9"},onMouseLeave:u=>{u.currentTarget.style.opacity="1"},children:s})]})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function M5(){const[e,a]=p.useState([]),[r,s]=p.useState(!0),[n]=p.useState(()=>{const w=localStorage.getItem("adminData");return w?JSON.parse(w):null}),[l,o]=p.useState(!1),[i,c]=p.useState(null),[u,d]=p.useState(null),[x,m]=p.useState(""),[b,v]=p.useState(!1),[S,h]=p.useState(1),y=20,[g,f]=p.useState({isOpen:!1,merchantId:null}),[j,C]=p.useState({businessName:"",firstName:"",lastName:"",email:"",password:""});p.useEffect(()=>{E()},[]);const E=async()=>{try{const w=localStorage.getItem("adminToken"),N=await fetch("http://18.166.29.239:3000/api/merchant/merchants",{headers:{Authorization:`Bearer ${w}`}});if(!N.ok)throw new Error("Failed to load merchants");const R=await N.json();a(R.merchants||[])}catch(w){console.error("Error loading merchants:",w),d({type:"error",message:"Failed to load merchants"})}finally{s(!1)}},A=()=>{c(null),C({businessName:"",firstName:"",lastName:"",email:"",password:""}),o(!0)},M=w=>{c(w),C({businessName:w.businessName||"",firstName:w.firstName||"",lastName:w.lastName||"",email:w.email||"",password:""}),o(!0)},B=async w=>{if(w.preventDefault(),!j.businessName||j.businessName.trim().length===0){d({type:"error",message:"Business name is required"});return}if(!j.firstName||j.firstName.trim().length===0){d({type:"error",message:"First name is required"});return}if(!j.lastName||j.lastName.trim().length===0){d({type:"error",message:"Last name is required"});return}const N=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!j.email||!N.test(j.email.trim())){d({type:"error",message:"Please enter a valid email address"});return}if(j.password&&!/^\d{6}$/.test(j.password)){d({type:"error",message:"PIN must be exactly 6 digits"});return}v(!0);try{const R=localStorage.getItem("adminToken");if(i){const T={...j};T.password||delete T.password;const O=await fetch(`http://18.166.29.239:3000/api/merchant/merchants/${i._id}`,{method:"PUT",headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"},body:JSON.stringify(T)});if(!O.ok){const V=await O.json();throw new Error(V.error||"Failed to update merchant")}d({type:"success",message:"Merchant updated successfully!"})}else{if(!j.password){d({type:"error",message:"PIN is required for new merchants"}),v(!1);return}console.log(" Sending merchant data:",j);const T=await fetch("http://18.166.29.239:3000/api/merchant/merchants",{method:"POST",headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"},body:JSON.stringify(j)});if(!T.ok){const O=await T.json();throw new Error(O.error||"Failed to create merchant")}d({type:"success",message:"Merchant created successfully!"})}o(!1),E(),setTimeout(()=>d(null),3e3)}catch(R){console.error("Error saving merchant:",R);let T="Failed to save merchant";R.message.includes("Email already exists")||R.message.includes("409")?T="Email already exists. Please use a different email.":T=R.message,d({type:"error",message:T})}finally{v(!1)}},F=async w=>{const N=!w.isActive,R=N?"activate":"deactivate";try{const T=localStorage.getItem("adminToken");if(!(await fetch(`http://18.166.29.239:3000/api/merchant/merchants/${w._id}`,{method:"PUT",headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"},body:JSON.stringify({isActive:N})})).ok)throw new Error(`Failed to ${R} merchant`);d({type:"success",message:`Merchant ${R}d successfully!`}),E(),setTimeout(()=>d(null),3e3)}catch(T){console.error(`Error ${R}ing merchant:`,T),d({type:"error",message:`Failed to ${R} merchant`})}},L=w=>{f({isOpen:!0,merchantId:w})},k=async()=>{const w=g.merchantId;f({isOpen:!1,merchantId:null});try{const N=localStorage.getItem("adminToken");if(!(await fetch(`http://18.166.29.239:3000/api/merchant/merchants/${w}`,{method:"DELETE",headers:{Authorization:`Bearer ${N}`}})).ok)throw new Error("Failed to delete merchant");d({type:"success",message:"Merchant deleted permanently!"}),o(!1),E(),setTimeout(()=>d(null),3e3)}catch(N){console.error("Error deleting merchant:",N),d({type:"error",message:"Failed to delete merchant"})}},U=e.filter(w=>{var N,R,T,O,V;return((N=w.businessName)==null?void 0:N.toLowerCase().includes(x.toLowerCase()))||((R=w.firstName)==null?void 0:R.toLowerCase().includes(x.toLowerCase()))||((T=w.lastName)==null?void 0:T.toLowerCase().includes(x.toLowerCase()))||((O=w.email)==null?void 0:O.toLowerCase().includes(x.toLowerCase()))||((V=w.merchantId)==null?void 0:V.toLowerCase().includes(x.toLowerCase()))}).sort((w,N)=>w.isActive!==N.isActive?N.isActive?1:-1:(w.businessName||"").localeCompare(N.businessName||"")),D=Math.ceil(U.length/y),_=(S-1)*y,z=_+y,q=U.slice(_,z);return p.useEffect(()=>{h(1)},[x]),r?t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px",color:"#FFD41C"},children:t.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid rgba(255, 212, 28, 0.3)",borderTopColor:"#FFD41C",borderRadius:"50%",animation:"spin 0.8s linear infinite"}})}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{fontSize:"24px",fontWeight:700,color:"#FBFBFB",margin:"0 0 8px 0"},children:"Merchant Accounts"}),t.jsxs("p",{style:{fontSize:"14px",color:"rgba(251, 251, 251, 0.6)",margin:0},children:[U.length," merchant",U.length!==1?"s":""," registered (Page ",S," of ",D||1,")"]})]}),t.jsxs("button",{onClick:A,style:{padding:"12px 24px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(255, 212, 28, 0.4)"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Add Merchant"})]})]}),u&&t.jsxs("div",{style:{padding:"14px 20px",background:u.type==="success"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",border:`2px solid ${u.type==="success"?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:"12px",color:u.type==="success"?"#10B981":"#EF4444",fontSize:"14px",fontWeight:600,marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:u.type==="success"?"":""}),t.jsx("span",{children:u.message})]}),t.jsx("div",{style:{marginBottom:"20px"},children:t.jsx("input",{type:"text",placeholder:" Search merchants by name, contact, email, or ID...",value:x,onChange:w=>m(w.target.value),style:{width:"100%",padding:"12px 16px",background:"rgba(30, 35, 71, 0.5)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",color:"#FBFBFB",fontSize:"14px",outline:"none"}})}),t.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[U.length>0?t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px"},children:q.map(w=>t.jsx(I5,{merchant:w,onEdit:M,onToggleActive:F},w._id))}):t.jsxs("div",{style:{background:"linear-gradient(135deg, #1E2347 0%, #181D40 100%)",borderRadius:"16px",border:"2px solid rgba(255, 212, 28, 0.3)",padding:"60px",textAlign:"center",color:"rgba(251, 251, 251, 0.5)"},children:[t.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:""}),t.jsx("p",{style:{margin:0,fontSize:"16px"},children:x?"No merchants found matching your search":"No merchants yet. Add your first merchant!"})]}),D>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"12px",marginTop:"24px",paddingTop:"24px",borderTop:"2px solid rgba(255,212,28,0.2)"},children:[t.jsx("button",{onClick:()=>h(w=>Math.max(1,w-1)),disabled:S===1,style:{padding:"10px 20px",background:S===1?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:S===1?"rgba(255,212,28,0.5)":"#FFD41C",fontSize:"14px",fontWeight:600,cursor:S===1?"not-allowed":"pointer",transition:"all 0.2s"},children:" Previous"}),t.jsxs("span",{style:{color:"rgba(251,251,251,0.8)",fontSize:"14px",fontWeight:600,minWidth:"120px",textAlign:"center"},children:["Page ",S," of ",D]}),t.jsx("button",{onClick:()=>h(w=>Math.min(D,w+1)),disabled:S===D,style:{padding:"10px 20px",background:S===D?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:S===D?"rgba(255,212,28,0.5)":"#FFD41C",fontSize:"14px",fontWeight:600,cursor:S===D?"not-allowed":"pointer",transition:"all 0.2s"},children:"Next "})]})]}),l&&t.jsx("div",{onClick:()=>o(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15, 18, 39, 0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:t.jsxs("div",{onClick:w=>w.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",border:"1px solid rgba(255, 212, 28, 0.2)",padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",animation:"slideUp 0.3s ease"},children:[t.jsx("h3",{style:{fontSize:"20px",fontWeight:700,color:"#FBFBFB",margin:"0 0 24px 0"},children:i?"Edit Merchant":"Add New Merchant"}),t.jsxs("form",{onSubmit:B,children:[t.jsxs("div",{style:{display:"grid",gap:"16px"},children:[i&&i.merchantId&&t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Merchant ID"}),t.jsx("div",{style:{padding:"12px 16px",background:"rgba(255, 212, 28, 0.1)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"14px",fontWeight:700},children:i.merchantId})]}),t.jsx(zl,{label:"Business Name",value:j.businessName,onChange:w=>C({...j,businessName:w}),placeholder:"e.g., Canteen 1",required:!0}),t.jsx(zl,{label:"First Name",value:j.firstName,onChange:w=>C({...j,firstName:w}),placeholder:"e.g., Juan",required:!0}),t.jsx(zl,{label:"Last Name",value:j.lastName,onChange:w=>C({...j,lastName:w}),placeholder:"e.g., Dela Cruz",required:!0}),t.jsx(zl,{label:"Email",type:"email",value:j.email,onChange:w=>C({...j,email:w}),placeholder:"merchant@nu-laguna.edu.ph",required:!0}),t.jsxs("div",{children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:[i?"6-Digit PIN (leave blank to keep current)":"6-Digit PIN"," ",!i&&t.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),t.jsx("input",{type:"text",name:"password",value:j.password,onChange:w=>{const N=w.target.value;(N===""||/^\d+$/.test(N))&&C({...j,password:N})},required:!i,maxLength:"6",placeholder:"123456",pattern:"\\d{6}",style:{width:"100%",padding:"12px",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"18px",boxSizing:"border-box",letterSpacing:"8px",textAlign:"center",fontWeight:700,outline:"none"}})]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px",justifyContent:i?"space-between":"flex-end"},children:[i&&t.jsx("button",{type:"button",onClick:()=>L(i._id),style:{padding:"12px 24px",background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.4)",borderRadius:"8px",color:"#EF4444",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:w=>{w.currentTarget.style.background="rgba(239, 68, 68, 0.25)"},onMouseLeave:w=>{w.currentTarget.style.background="rgba(239, 68, 68, 0.15)"},children:" Delete Permanently"}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{type:"button",onClick:()=>o(!1),style:{padding:"12px 24px",background:"rgba(255, 212, 28, 0.1)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:b,style:{padding:"12px 24px",background:b?"#CCCCCC":"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:b?"not-allowed":"pointer",boxShadow:b?"none":"0 4px 12px rgba(255, 212, 28, 0.4)",opacity:b?.6:1},children:b?"Saving...":i?"Update Merchant":"Create Merchant"})]})]})]})]})}),t.jsx(_5,{isOpen:g.isOpen,title:"Delete Merchant",message:"Are you sure you want to permanently delete this merchant? This action cannot be undone.",confirmText:"Delete Merchant",cancelText:"Cancel",confirmColor:"danger",onConfirm:k,onCancel:()=>f({isOpen:!1,merchantId:null})}),t.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
          }
          50% {
            opacity: 0.7;
            box-shadow: 0 0 0 6px rgba(16, 185, 129, 0.1);
          }
        }
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function I5({merchant:e,onEdit:a,onToggleActive:r}){const s=e.isActive!==!1;return t.jsxs("div",{style:{background:"linear-gradient(135deg, #1E2347 0%, #181D40 100%)",borderRadius:"16px",border:"2px solid rgba(255, 212, 28, 0.3)",padding:"24px",transition:"transform 0.2s ease, box-shadow 0.2s ease",cursor:"pointer",opacity:s?1:.7},onMouseEnter:n=>{n.currentTarget.style.transform="translateY(-4px)",n.currentTarget.style.boxShadow="0 8px 24px rgba(255, 212, 28, 0.2)"},onMouseLeave:n=>{n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow="none"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[t.jsx("div",{style:{padding:"6px 14px",background:"rgba(255, 212, 28, 0.15)",border:"1px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C"},children:e.merchantId||"N/A"}),t.jsx("div",{style:{width:"12px",height:"12px",background:s?"#10B981":"#EF4444",borderRadius:"50%",boxShadow:`0 0 0 3px ${s?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`,animation:s?"pulse 2s ease-in-out infinite":"none"}})]}),t.jsx("h3",{style:{fontSize:"20px",fontWeight:700,color:"#FBFBFB",margin:"0 0 8px 0"},children:e.businessName}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},children:[t.jsxs("div",{style:{fontSize:"13px",color:"rgba(251, 251, 251, 0.8)",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""}),t.jsxs("span",{children:[e.firstName," ",e.lastName]})]}),t.jsxs("div",{style:{fontSize:"13px",color:"rgba(251, 251, 251, 0.8)",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:e.email})]})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",paddingTop:"16px",borderTop:"1px solid rgba(255, 212, 28, 0.2)"},children:[t.jsx("button",{onClick:n=>{n.stopPropagation(),a(e)},style:{flex:1,padding:"10px 16px",background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",borderRadius:"8px",color:"#3B82F6",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:n=>{n.currentTarget.style.background="rgba(59, 130, 246, 0.3)"},onMouseLeave:n=>{n.currentTarget.style.background="rgba(59, 130, 246, 0.2)"},children:" Edit"}),t.jsx("button",{onClick:n=>{n.stopPropagation(),r(e)},style:{flex:1,padding:"10px 16px",background:s?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)",border:`1px solid ${s?"rgba(239, 68, 68, 0.4)":"rgba(16, 185, 129, 0.4)"}`,borderRadius:"8px",color:s?"#EF4444":"#10B981",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:n=>{s?n.currentTarget.style.background="rgba(239, 68, 68, 0.3)":n.currentTarget.style.background="rgba(16, 185, 129, 0.3)"},onMouseLeave:n=>{s?n.currentTarget.style.background="rgba(239, 68, 68, 0.2)":n.currentTarget.style.background="rgba(16, 185, 129, 0.2)"},children:s?" Deactivate":" Activate"})]})]})}function zl({label:e,type:a="text",value:r,onChange:s,placeholder:n,required:l,maxLength:o}){return t.jsxs("div",{children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:[e," ",l&&t.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),t.jsx("input",{type:a,value:r,onChange:i=>s(i.target.value),placeholder:n,required:l,maxLength:o,style:{width:"100%",padding:"12px 16px",background:"rgba(251, 251, 251, 0.05)",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"8px",color:"#FBFBFB",fontSize:"14px",outline:"none",boxSizing:"border-box"}})]})}function L5(){const[e,a]=p.useState([]),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(!1),[c,u]=p.useState(null),[d,x]=p.useState(null),[m,b]=p.useState(""),[v,S]=p.useState(1),h=20,[y,g]=p.useState({phoneId:"",phoneModel:"",phoneType:"Android",assignedMerchantId:"",assignedBusinessName:"",status:"available",notes:""}),f=async()=>{try{const N=await J.get("/merchant/phones");a(Array.isArray(N)?N:[]),l(!1)}catch(N){console.error("Error loading phones:",N),l(!1)}},j=async()=>{try{const N=await J.get("/merchant/merchants");s(Array.isArray(N)?N:[])}catch(N){console.error("Error loading merchants:",N)}};p.useEffect(()=>{f(),j();const N=setInterval(f,5e3);return()=>clearInterval(N)},[]);const C=()=>{if(e.length===0)return"PHONE_001";let N=0;for(const R of e)if(R.phoneId){const T=R.phoneId.match(/PHONE_(\d+)/i);if(T){const O=parseInt(T[1],10);O>N&&(N=O)}}return`PHONE_${String(N+1).padStart(3,"0")}`},E=N=>{if(!N)g({...y,assignedMerchantId:"",assignedBusinessName:"",status:"available",assignedMerchantDate:null});else{const R=r.find(T=>T.merchantId===N);g({...y,assignedMerchantId:N,assignedBusinessName:(R==null?void 0:R.businessName)||"",status:"assigned",assignedMerchantDate:new Date})}},A=async N=>{var R,T;N.preventDefault();try{c?(await J.put(`/merchant/phones/${c._id}`,y),x({type:"success",message:"Phone updated successfully!"})):(await J.post("/merchant/phones",y),x({type:"success",message:"Phone created successfully!"})),i(!1),u(null),L(),f(),setTimeout(()=>x(null),3e3)}catch(O){x({type:"error",message:((T=(R=O.response)==null?void 0:R.data)==null?void 0:T.error)||"Failed to save phone"})}},M=N=>{u(N),g({phoneId:N.phoneId,phoneModel:N.phoneModel,phoneType:N.phoneType,assignedMerchantId:N.assignedMerchantId||"",assignedBusinessName:N.assignedBusinessName||"",status:N.status,notes:N.notes||""}),i(!0)},B=async N=>{var R,T;if(window.confirm("Are you sure you want to delete this phone?"))try{await J.delete(`/merchant/phones/${N}`),x({type:"success",message:"Phone deleted successfully!"}),f(),setTimeout(()=>x(null),3e3)}catch(O){x({type:"error",message:((T=(R=O.response)==null?void 0:R.data)==null?void 0:T.error)||"Failed to delete phone"})}},F=async(N,R)=>{try{const T=r.find(V=>V.merchantId===R),O={...N,assignedMerchantId:R||null,assignedBusinessName:(T==null?void 0:T.businessName)||null,assignedMerchantDate:R?new Date:null,status:R?"assigned":"available"};await J.put(`/merchant/phones/${N._id}`,O),x({type:"success",message:"Merchant assignment updated!"}),f(),setTimeout(()=>x(null),2e3)}catch{x({type:"error",message:"Failed to update assignment"})}},L=()=>{g({phoneId:"",phoneModel:"",phoneType:"Android",assignedMerchantId:"",assignedBusinessName:"",status:"available",notes:""})},k=N=>{switch(N){case"available":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"assigned":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"maintenance":return{bg:"rgba(251,191,36,0.2)",color:"#FBBF24"};case"retired":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};default:return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"}}},U=()=>{const N=Qr(D);Ft(N,"merchant-phones")},D=e.filter(N=>{var T,O,V,P,W,Z;if(!m)return!0;const R=m.toLowerCase();return((T=N.phoneId)==null?void 0:T.toLowerCase().includes(R))||((O=N.phoneModel)==null?void 0:O.toLowerCase().includes(R))||((V=N.phoneType)==null?void 0:V.toLowerCase().includes(R))||((P=N.assignedBusinessName)==null?void 0:P.toLowerCase().includes(R))||((W=N.assignedMerchantId)==null?void 0:W.toLowerCase().includes(R))||((Z=N.status)==null?void 0:Z.toLowerCase().includes(R))}),_=Math.ceil(D.length/h),z=(v-1)*h,q=z+h,w=D.slice(z,q);return p.useEffect(()=>{S(1)},[m]),n?t.jsx("div",{className:"text-center py-[60px] text-[#FFD41C]",children:"Loading phones..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[d&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:d.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:d.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${d.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4,animation:"fadeIn 0.3s ease"},children:d.message}),t.jsxs("div",{className:"mb-[30px] border-b-2 border-[rgba(255,212,28,0.2)] pb-5",children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Merchant Phone Inventory"]}),t.jsx("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:m?`Showing: ${D.length} of ${e.length} (Page ${v} of ${_||1})`:`Total devices: ${e.length}  Available: ${e.filter(N=>N.status==="available").length}  Assigned: ${e.filter(N=>N.status==="assigned").length} (Page ${v} of ${_||1})`})]}),t.jsx("button",{onClick:()=>{L(),u(null),i(!0)},style:{padding:"12px 24px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:"0 4px 12px rgba(255,212,28,0.4)",transition:"all 0.3s"},children:"+ Add Phone"})]}),t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsx(Ot,{value:m,onChange:b,placeholder:"Search by phone ID, model, serial, or merchant..."}),t.jsx($t,{onClick:U,disabled:D.length===0})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[e.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{children:"No phones found"})]}):D.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{style:{marginBottom:"12px"},children:"No phones match your search"}),t.jsx("button",{onClick:()=>b(""),style:{padding:"8px 16px",background:"rgba(255,212,28,0.15)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):t.jsx("div",{className:"overflow-x-auto rounded-xl border border-[rgba(255,212,28,0.2)]",children:t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-[rgba(255,212,28,0.1)]",children:[t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Phone ID"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Device"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Type"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Assigned Merchant"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Status"}),t.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:"#FFD41C",textTransform:"uppercase",borderBottom:"2px solid rgba(255,212,28,0.3)"},children:"Actions"})]})}),t.jsx("tbody",{children:w.map(N=>{const R=k(N.status);return t.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,212,28,0.1)"},children:[t.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:t.jsx("strong",{children:N.phoneId})}),t.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:N.phoneModel}),t.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:N.phoneType}),t.jsx("td",{style:{padding:"16px"},children:t.jsxs("select",{value:N.assignedMerchantId||"",onChange:T=>F(N,T.target.value),style:{padding:"8px 12px",background:"rgba(255,212,28,0.1)",color:"#FFD41C",border:"1px solid rgba(255,212,28,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",minWidth:"200px"},children:[t.jsx("option",{value:"",children:"Unassigned"}),r.map(T=>t.jsxs("option",{value:T.merchantId,children:[T.businessName," (",T.merchantId,")"]},T.merchantId))]})}),t.jsx("td",{style:{padding:"16px"},children:t.jsx("span",{style:{padding:"6px 12px",background:R.bg,color:R.color,borderRadius:"6px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",display:"inline-block"},children:N.status})}),t.jsxs("td",{style:{padding:"16px",textAlign:"right"},children:[t.jsx("button",{onClick:()=>M(N),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer",marginRight:"8px"},children:"Edit"}),t.jsx("button",{onClick:()=>B(N._id),style:{padding:"6px 12px",background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Delete"})]})]},N._id)})})]})}),_>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"12px",marginTop:"24px",paddingTop:"24px",borderTop:"2px solid rgba(255,212,28,0.2)"},children:[t.jsx("button",{onClick:()=>S(N=>Math.max(1,N-1)),disabled:v===1,style:{padding:"10px 20px",background:v===1?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:v===1?"rgba(255,212,28,0.5)":"#FFD41C",fontSize:"14px",fontWeight:600,cursor:v===1?"not-allowed":"pointer",transition:"all 0.2s"},children:" Previous"}),t.jsxs("span",{style:{color:"rgba(251,251,251,0.8)",fontSize:"14px",fontWeight:600,minWidth:"120px",textAlign:"center"},children:["Page ",v," of ",_]}),t.jsx("button",{onClick:()=>S(N=>Math.min(_,N+1)),disabled:v===_,style:{padding:"10px 20px",background:v===_?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:v===_?"rgba(255,212,28,0.5)":"#FFD41C",fontSize:"14px",fontWeight:600,cursor:v===_?"not-allowed":"pointer",transition:"all 0.2s"},children:"Next "})]})]}),o&&t.jsx("div",{onClick:()=>i(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:t.jsxs("div",{onClick:N=>N.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#FFD41C",margin:0},children:c?"Edit Phone":"Add New Phone"}),t.jsx("button",{onClick:()=>i(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),t.jsxs("form",{onSubmit:A,style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase"},children:["Phone ID ",!c&&t.jsx("span",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",fontWeight:400},children:"(Auto-generated)"})]}),t.jsx("input",{type:"text",value:c?y.phoneId:C(),disabled:!0,style:{width:"100%",padding:"12px",border:"2px solid rgba(255,212,28,0.2)",borderRadius:"8px",background:"rgba(100,100,100,0.2)",color:"rgba(251,251,251,0.5)",fontSize:"14px",boxSizing:"border-box",cursor:"not-allowed"}})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase"},children:"Phone Model *"}),t.jsx("input",{type:"text",value:y.phoneModel,onChange:N=>g({...y,phoneModel:N.target.value}),required:!0,style:{width:"100%",padding:"12px",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box"},placeholder:"e.g., Samsung Galaxy A14"})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase"},children:"Phone Type *"}),t.jsxs("select",{value:y.phoneType,onChange:N=>g({...y,phoneType:N.target.value}),required:!0,style:{width:"100%",padding:"12px",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",cursor:"pointer"},children:[t.jsx("option",{value:"Android",children:"Android"}),t.jsx("option",{value:"iOS",children:"iOS"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase"},children:"Assign to Merchant"}),t.jsxs("select",{value:y.assignedMerchantId,onChange:N=>E(N.target.value),style:{width:"100%",padding:"12px",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",cursor:"pointer"},children:[t.jsx("option",{value:"",children:"Unassigned"}),r.map(N=>t.jsxs("option",{value:N.merchantId,children:[N.businessName," (",N.merchantId,")"]},N.merchantId))]})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase"},children:"Notes"}),t.jsx("textarea",{value:y.notes,onChange:N=>g({...y,notes:N.target.value}),rows:"3",style:{width:"100%",padding:"12px",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",background:"rgba(251,251,251,0.05)",color:"rgba(251,251,251,0.9)",fontSize:"14px",boxSizing:"border-box",fontFamily:"inherit",resize:"vertical"},placeholder:"Any additional notes about this device"})]}),t.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",paddingTop:"20px",borderTop:"2px solid rgba(255,212,28,0.2)"},children:[t.jsx("button",{type:"button",onClick:()=>i(!1),style:{padding:"12px 24px",background:"rgba(251,251,251,0.1)",color:"rgba(251,251,251,0.7)",border:"1px solid rgba(251,251,251,0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",style:{padding:"12px 24px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:"0 4px 12px rgba(255,212,28,0.4)"},children:c?"Update Phone":"Create Phone"})]})]})]})}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}function U5(){var se,ce;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState("all"),[c,u]=p.useState(""),[d,x]=p.useState(""),[m,b]=p.useState(""),[v,S]=p.useState(""),[h,y]=p.useState(null),[g,f]=p.useState(!1),[j,C]=p.useState(!1),[E,A]=p.useState(""),[M,B]=p.useState(!1),[F,L]=p.useState(1),[k,U]=p.useState("details"),[D,_]=p.useState(""),[z,q]=p.useState(!1),w=15,N=p.useRef(null),R=async(ae=!1)=>{try{ae||l(!0);const oe=new URLSearchParams;d&&oe.append("status",d),c&&oe.append("search",c);const he=await J.get(`/admin/user-concerns?${oe}`);if(he!=null&&he.concerns||Array.isArray(he)){const ct=(he.concerns||he).filter(dt=>dt.reportTo==="Merchant Office");s(ct)}}catch{ae||$.error("Failed to load concerns")}finally{ae||l(!1)}};p.useEffect(()=>(R(!1),N.current=setInterval(()=>R(!0),1e4),()=>{N.current&&clearInterval(N.current)}),[d,c]);const T=ae=>{y(ae),f(!0),U("details")},O=async(ae,oe)=>{try{if(oe==="resolved"){y(ae),f(!1),C(!0);return}(await J.put(`/admin/concerns/${ae._id}/status`,{status:oe})).success&&($.success("Status updated successfully"),R(!0))}catch{$.error("Failed to update status")}},V=async()=>{if(!E.trim()){$.error("Please provide a resolution message");return}B(!0);try{(await J.put(`/admin/concerns/${h._id}/status`,{status:"resolved",adminResponse:E,resolvedDate:new Date().toISOString()})).success&&($.success("Concern resolved successfully"),C(!1),A(""),y(null),R(!0))}catch{$.error("Failed to resolve concern")}finally{B(!1)}},P=async()=>{if(!D.trim()){$.error("Please enter a note");return}q(!0);try{if((await J.post(`/admin/concerns/${h._id}/notes`,{message:D,adminName:"Merchant Admin"})).success){$.success("Note added successfully"),_("");const oe={...h};oe.notes=oe.notes||[],oe.notes.push({message:D,adminName:"Merchant Admin",timestamp:new Date().toISOString()}),y(oe),R(!0)}}catch{$.error("Failed to add note")}finally{q(!1)}},W=()=>{Ft(Y||[],"merchant-concerns")},Z=ae=>{switch(ae){case"pending":return"#FBBF24";case"in_progress":return"#3B82F6";case"resolved":return"#10B981";default:return e.text.secondary}},te=ae=>{switch(ae){case"pending":return"";case"in_progress":return"";case"resolved":return"";default:return""}},I=ae=>ae?new Date(ae).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",Y=(r||[]).filter(ae=>o==="all"?!0:o==="assistance"?ae.submissionType==="assistance":o==="feedback"?ae.submissionType==="feedback":!0),G=Math.ceil((Y||[]).length/w),K=(Y||[]).slice((F-1)*w,F*w);return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading concerns..."]}):t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Merchant Concerns"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Manage concerns reported to Merchant Office"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-5",children:[t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(251, 191, 36, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(251, 191, 36, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Pending"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-500",children:(r||[]).filter(ae=>ae.status==="pending").length})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(59, 130, 246, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(59, 130, 246, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"In Progress"}),t.jsx("p",{className:"text-2xl font-bold text-blue-500",children:(r||[]).filter(ae=>ae.status==="in_progress").length})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(16, 185, 129, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(16, 185, 129, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Resolved"}),t.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:(r||[]).filter(ae=>ae.status==="resolved").length})]})]})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.8)":e.bg.card,borderColor:e.accent.primary},className:"rounded-xl border-2 p-4 mb-5 flex flex-col lg:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row gap-3",children:[t.jsx(Ot,{value:c,onChange:u,placeholder:"Search concerns...",theme:e,isDarkMode:a}),t.jsx(Jt,{value:d,onChange:x,theme:e,isDarkMode:a,options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"}]}),t.jsx(hr,{startDate:m,endDate:v,onStartChange:b,onEndChange:S,theme:e,isDarkMode:a})]}),t.jsx($t,{onClick:W,disabled:!Y||Y.length===0})]}),t.jsx("div",{className:"flex gap-2 mb-5",children:[{value:"all",label:"All Concerns"},{value:"assistance",label:"Assistance"},{value:"feedback",label:"Feedback"}].map(ae=>t.jsx("button",{onClick:()=>i(ae.value),style:{background:o===ae.value?e.accent.primary:a?"rgba(30,35,71,0.8)":"#F9FAFB",color:o===ae.value?a?"#181D40":"#FFFFFF":e.text.primary,borderColor:e.border.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm border hover:opacity-80 transition",children:ae.label},ae.value))}),t.jsx("div",{className:"mb-4",children:t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:["Showing ",t.jsx("span",{style:{color:e.accent.primary},className:"font-bold",children:(Y||[]).length})," concerns"]})}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:(Y||[]).length?t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB"},children:t.jsxs("tr",{style:{borderColor:e.border.primary},className:"border-b",children:[t.jsx("th",{style:{color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"ID"}),t.jsx("th",{style:{color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"User"}),t.jsx("th",{style:{color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Subject"}),t.jsx("th",{style:{color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Date"}),t.jsx("th",{style:{color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:(K||[]).map(ae=>{var oe;return t.jsxs("tr",{style:{borderColor:e.border.primary},className:"border-b hover:bg-white/5 transition",children:[t.jsx("td",{style:{color:e.text.primary},className:"p-4",children:t.jsx("span",{className:"font-mono text-xs",children:ae.concernId||"N/A"})}),t.jsx("td",{style:{color:e.text.primary},className:"p-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-sm",children:ae.userName||"Unknown"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs",children:ae.userEmail||"No email"})]})}),t.jsxs("td",{style:{color:e.text.primary},className:"p-4",children:[t.jsx("p",{className:"font-semibold text-sm",children:ae.subject||"No subject"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs line-clamp-2",children:ae.feedbackText||ae.otherConcern||"No details"})]}),t.jsx("td",{className:"p-4",children:t.jsxs("span",{style:{background:`${Z(ae.status)}20`,color:Z(ae.status)},className:"px-2 py-1 rounded-full text-xs font-semibold capitalize flex items-center gap-1 w-fit",children:[t.jsx("span",{children:te(ae.status)}),(oe=ae.status)==null?void 0:oe.replace("_"," ")]})}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4",children:t.jsx("p",{className:"text-xs",children:I(ae.createdAt||ae.submittedAt)})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>T(ae),style:{background:"rgba(59,130,246,0.1)",color:"#3B82F6"},className:"px-3 py-1 rounded text-xs font-semibold hover:opacity-80 transition",children:"View"}),ae.status!=="resolved"&&t.jsx("button",{onClick:()=>O(ae,"in_progress"),style:{background:"rgba(251,191,36,0.1)",color:"#F59E0B"},className:"px-3 py-1 rounded text-xs font-semibold hover:opacity-80 transition",children:"Progress"}),ae.status!=="resolved"&&t.jsx("button",{onClick:()=>O(ae,"resolved"),style:{background:"rgba(16,185,129,0.1)",color:"#10B981"},className:"px-3 py-1 rounded text-xs font-semibold hover:opacity-80 transition",children:"Resolve"})]})})]},ae._id)})})]})}):t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{className:"font-semibold",children:"No concerns found"}),t.jsx("p",{className:"text-sm mt-2",children:(r||[]).length?"Try adjusting your filters":"No concerns have been reported to Merchant Office"})]})})}),G>1&&t.jsxs("div",{className:"flex justify-center items-center gap-2 mt-5",children:[t.jsx("button",{onClick:()=>L(ae=>Math.max(1,ae-1)),disabled:F===1,style:{background:F===1?"rgba(0,0,0,0.1)":e.accent.primary,color:F===1?e.text.secondary:a?"#181D40":"#FFFFFF",cursor:F===1?"not-allowed":"pointer"},className:"px-3 py-1 rounded text-sm font-semibold transition",children:"Previous"}),t.jsxs("span",{style:{color:e.text.primary},className:"text-sm",children:["Page ",F," of ",G]}),t.jsx("button",{onClick:()=>L(ae=>Math.min(G,ae+1)),disabled:F===G,style:{background:F===G?"rgba(0,0,0,0.1)":e.accent.primary,color:F===G?e.text.secondary:a?"#181D40":"#FFFFFF",cursor:F===G?"not-allowed":"pointer"},className:"px-3 py-1 rounded text-sm font-semibold transition",children:"Next"})]}),g&&h&&t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:()=>f(!1),children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-4xl max-h-[85vh] overflow-hidden",onClick:ae=>ae.stopPropagation(),children:[t.jsxs("div",{style:{background:a?`linear-gradient(135deg, ${Z(h.status)}30 0%, ${Z(h.status)}10 100%)`:`linear-gradient(135deg, ${Z(h.status)}20 0%, ${Z(h.status)}10 100%)`,borderColor:`${Z(h.status)}50`},className:"px-6 py-4 flex items-center justify-between border-b",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:`${Z(h.status)}30`},className:"w-10 h-10 rounded-full flex items-center justify-center",children:t.jsx("span",{children:te(h.status)})}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:Z(h.status)},className:"text-xl font-bold",children:"Concern Details"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:h.concernId||"No ID"})]})]}),t.jsx("button",{onClick:()=>f(!1),style:{color:e.text.secondary},className:"hover:opacity-70 transition-colors",children:""})]}),t.jsxs("div",{style:{padding:"0 24px",borderBottom:`2px solid ${e.border.primary}`,display:"flex",gap:"8px"},children:[t.jsx("button",{onClick:()=>U("details"),style:{padding:"12px 20px",background:"transparent",border:"none",borderBottom:`3px solid ${k==="details"?e.accent.primary:"transparent"}`,color:k==="details"?e.accent.primary:e.text.secondary,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:" Details"}),t.jsxs("button",{onClick:()=>U("notes"),style:{padding:"12px 20px",background:"transparent",border:"none",borderBottom:`3px solid ${k==="notes"?e.accent.primary:"transparent"}`,color:k==="notes"?e.accent.primary:e.text.secondary,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Notes ",((se=h.notes)==null?void 0:se.length)>0&&`(${h.notes.length})`]})]}),t.jsx("div",{style:{flex:1,overflow:"auto",padding:"24px",maxHeight:"60vh"},children:k==="details"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex items-center gap-3 mb-5",children:t.jsxs("span",{style:{background:`${Z(h.status)}20`,color:Z(h.status)},className:"px-3 py-1.5 rounded-full text-sm font-bold capitalize flex items-center gap-2",children:[t.jsx("span",{children:te(h.status)}),(ce=h.status)==null?void 0:ce.replace("_"," ")]})}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"rounded-xl border p-4 space-y-3 mb-5",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Submitted By"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold text-right",children:h.userName||"Unknown"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Email"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold",children:h.userEmail||"N/A"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Subject"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold text-right max-w-[60%]",children:h.subject||"N/A"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Submitted To"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold",children:h.reportTo||"N/A"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Date"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold",children:I(h.createdAt||h.submittedAt)})]})]}),t.jsxs("div",{className:"mb-5",children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-sm font-semibold mb-2",children:"Message"}),t.jsx("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"rounded-xl border p-4",children:t.jsx("p",{style:{color:e.text.primary},className:"whitespace-pre-wrap",children:h.feedbackText||h.otherConcern||"No message provided"})})]}),h.status!=="resolved"&&t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{f(!1),O(h,"in_progress")},style:{background:"rgba(251,191,36,0.1)",color:"#F59E0B"},className:"px-4 py-2 rounded-lg font-semibold hover:opacity-80 transition",children:"Mark as In Progress"}),t.jsx("button",{onClick:()=>{f(!1),O(h,"resolved")},style:{background:"rgba(16,185,129,0.1)",color:"#10B981"},className:"px-4 py-2 rounded-lg font-semibold hover:opacity-80 transition",children:"Resolve"})]})]}):t.jsxs("div",{children:[t.jsx("div",{className:"mb-5",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:D,onChange:ae=>_(ae.target.value),placeholder:"Add a note...",style:{flex:1,background:a?"rgba(15,18,39,0.6)":"#F9FAFB",border:`2px solid ${e.border.primary}`,borderRadius:"12px",color:e.text.primary,padding:"12px 16px",outline:"none"}}),t.jsx("button",{onClick:P,disabled:z,style:{background:e.accent.primary,color:a?"#181D40":"#FFFFFF",borderRadius:"12px",padding:"12px 20px",fontWeight:600,cursor:z?"not-allowed":"pointer",opacity:z?.6:1},children:z?"Adding...":"Add Note"})]})}),!h.notes||h.notes.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:e.text.tertiary},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("p",{style:{fontSize:"14px",margin:0},children:"No notes yet"}),t.jsx("p",{style:{fontSize:"12px",color:e.text.muted,marginTop:"8px"},children:"Add notes to track progress on this concern"})]}):t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:h.notes.slice().reverse().map((ae,oe)=>t.jsxs("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsxs("span",{style:{color:e.accent.primary,fontSize:"12px",fontWeight:700},children:[" ",ae.adminName||"Admin"]}),t.jsx("span",{style:{color:e.text.muted,fontSize:"11px"},children:ae.timestamp?I(ae.timestamp):""})]}),t.jsx("p",{style:{color:e.text.primary,margin:0,lineHeight:"1.5"},children:ae.message})]},oe))})]})}),t.jsx("div",{className:"px-6 py-4 flex justify-end border-t",style:{borderColor:e.border.primary},children:t.jsx("button",{onClick:()=>f(!1),style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"px-6 py-2.5 rounded-xl font-semibold transition-all hover:opacity-80",children:"Close"})})]})]}),j&&h&&t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:()=>C(!1),children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-lg",onClick:ae=>ae.stopPropagation(),children:[t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"px-6 py-5 flex items-center justify-between border-b",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:"#10B981"},className:"text-xl font-bold",children:"Resolve Concern"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:h.concernId||"No ID"})]})]}),t.jsx("button",{onClick:()=>C(!1),style:{color:e.text.secondary},className:"hover:opacity-70 transition",children:""})]}),t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"mb-5",children:[t.jsxs("label",{style:{color:e.text.primary},className:"block font-semibold mb-2",children:["Resolution Message ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("textarea",{value:E,onChange:ae=>A(ae.target.value),placeholder:"Please provide details about how this concern was resolved...",rows:5,style:{width:"100%",background:a?"rgba(15,18,39,0.6)":"#F9FAFB",border:`2px solid ${e.border.primary}`,borderRadius:"12px",color:e.text.primary,padding:"14px 16px",outline:"none",resize:"none",fontSize:"14px"}})]})}),t.jsxs("div",{className:"px-6 py-4 flex justify-end gap-3 border-t",style:{borderColor:e.border.primary},children:[t.jsx("button",{onClick:()=>C(!1),style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"px-6 py-2.5 rounded-xl font-semibold transition-all hover:opacity-80",children:"Cancel"}),t.jsx("button",{onClick:V,disabled:M,style:{background:"#10B981",color:"#FFFFFF",cursor:M?"not-allowed":"pointer",opacity:M?.6:1},className:"px-6 py-2.5 rounded-xl font-semibold transition-all",children:M?"Resolving...":"Resolve Concern"})]})]})]})]})}function O5(){var _,z,q;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState({autoExport:{frequency:"daily",exportTypes:[],time:"00:00",emailRecipients:[]}}),[n,l]=p.useState(!1),[o,i]=p.useState(!1),[c,u]=p.useState(!1),[d,x]=p.useState([]),[m,b]=p.useState("all"),[v,S]=p.useState(""),[h,y]=p.useState({start:"",end:""}),[g,f]=p.useState("all"),[j,C]=p.useState(""),[E,A]=p.useState(""),M=[{value:"Merchants",icon:"",label:"Merchants"},{value:"Phones",icon:"",label:"Merchant Phones"},{value:"Logs",icon:"",label:"Merchant Logs"},{value:"Concerns",icon:"",label:"Merchant Concerns"}];p.useEffect(()=>{B(),F()},[]);const B=async()=>{try{const w=await J.get("/admin/configurations?adminRole=merchant");w&&s(w)}catch(w){console.error("Error loading configurations:",w)}},F=async()=>{try{const[w,N]=await Promise.all([J.get("/admin/configurations/scheduled-exports?adminRole=merchant").catch(()=>[]),J.get("/admin/configurations/export-history?adminRole=merchant").catch(()=>[])]),R=(Array.isArray(w)?w:[]).map(V=>({...V,exportSource:"auto"})),T=(Array.isArray(N)?N:[]).map(V=>({...V,exportSource:"manual"})),O=[...R,...T].sort((V,P)=>{const W=new Date(V.exportedAt||V.timestamp||V.createdAt);return new Date(P.exportedAt||P.timestamp||P.createdAt)-W});x(O)}catch(w){console.error("Error loading export archive:",w)}},L=async()=>{var w,N;l(!0);try{await J.put("/admin/configurations/auto-export",{...r.autoExport,adminRole:"merchant"}),$.success("Auto-export settings saved successfully!"),i(!1),B()}catch(R){$.error(((N=(w=R.response)==null?void 0:w.data)==null?void 0:N.error)||"Failed to save settings")}finally{l(!1)}},k=async()=>{var w,N;l(!0);try{if(!r.autoExport.exportTypes||r.autoExport.exportTypes.length===0){$.error("Please select at least one export type in the configuration settings"),l(!1);return}const R=await J.post("/admin/configurations/manual-export-merchant",{exportTypes:r.autoExport.exportTypes,dateRange:g,customStartDate:j,customEndDate:E});if($.success(`Merchant data exported successfully! (${R.totalRecords||R.recordCount||0} total records)`),R.downloadUrl){const T=document.createElement("a");T.href=R.downloadUrl,T.download=R.fileName||`merchant_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(T),T.click(),document.body.removeChild(T)}u(!1),f("all"),C(""),A(""),F()}catch(R){$.error(((N=(w=R.response)==null?void 0:w.data)==null?void 0:N.error)||"Export failed")}finally{l(!1)}},U=async w=>{try{const N=await J.get(`/admin/configurations/download-export/${w}`);if(N.downloadUrl){const R=document.createElement("a");R.href=N.downloadUrl,R.download=N.fileName,document.body.appendChild(R),R.click(),document.body.removeChild(R)}}catch{$.error("Failed to download export")}},D=d.filter(w=>{var N,R;if(m!=="all"&&w.exportSource!==m)return!1;if(v){const T=v.toLowerCase();if(!(((N=w.exportType)==null?void 0:N.toLowerCase().includes(T))||((R=w.fileName)==null?void 0:R.toLowerCase().includes(T))))return!1}if(h.start||h.end){const T=new Date(w.exportedAt||w.timestamp||w.createdAt);if(h.start&&T<new Date(h.start)||h.end&&T>new Date(h.end+"T23:59:59"))return!1}return!0});return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{marginBottom:"24px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,paddingBottom:"16px"},children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Merchant Settings"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Configure automated merchant data exports and system settings"})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[t.jsxs("div",{style:{background:e.bg.card,borderRadius:"16px",border:`1px solid ${e.border.primary}`,padding:"28px",marginBottom:"24px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{color:e.accent.primary,fontSize:"20px",fontWeight:700,margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," Automated Merchant Export"]}),t.jsxs("p",{style:{color:e.text.secondary,fontSize:"14px",margin:0,lineHeight:"1.5"},children:["System automatically exports merchant data as ZIP files for backup and compliance.",t.jsx("br",{}),"Configure the schedule and download reports manually anytime."]})]}),t.jsxs("button",{onClick:()=>i(!0),style:{padding:"12px 20px",background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"10px",color:e.accent.primary,fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Configure Schedule"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[t.jsx(Ki,{icon:"",label:"Frequency",value:((_=r.autoExport.frequency)==null?void 0:_.charAt(0).toUpperCase())+((z=r.autoExport.frequency)==null?void 0:z.slice(1))||"Not set",theme:e}),t.jsx(Ki,{icon:"",label:"Export Time",value:r.autoExport.time||"Not set",theme:e}),t.jsx(Ki,{icon:"",label:"Data Types",value:`${((q=r.autoExport.exportTypes)==null?void 0:q.length)||0} selected`,theme:e})]}),t.jsxs("div",{style:{padding:"24px",background:"rgba(34,197,94,0.1)",border:"2px dashed rgba(34,197,94,0.3)",borderRadius:"12px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),t.jsx("h4",{style:{color:e.text.primary,fontSize:"16px",fontWeight:700,marginBottom:"8px"},children:"Export Merchant Data Now"}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",marginBottom:"16px"},children:"Download a complete ZIP file with all merchant data: merchants, phones, logs, and concerns."}),t.jsx("button",{onClick:()=>u(!0),disabled:n,style:{padding:"14px 32px",background:n?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:n?"not-allowed":"pointer",boxShadow:n?"none":"0 4px 12px rgba(34,197,94,0.4)",transition:"all 0.2s ease",opacity:n?.6:1},children:n?" Exporting...":" Download Merchant Data (ZIP)"})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderRadius:"16px",border:`1px solid ${e.border.primary}`,padding:"28px",marginBottom:"24px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{color:e.accent.primary,fontSize:"18px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," Export Archive"]}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"12px",margin:0},children:"All exports - auto-scheduled and manual"})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("div",{style:{display:"flex",borderRadius:"8px",overflow:"hidden",border:`1px solid ${e.border.primary}`},children:[{key:"all",label:"All"},{key:"auto",label:" Auto"},{key:"manual",label:" Manual"}].map(w=>t.jsx("button",{onClick:()=>b(w.key),style:{padding:"8px 16px",background:m===w.key?e.accent.primary:"transparent",color:m===w.key?a?"#181D40":"#FFFFFF":e.text.secondary,border:"none",fontSize:"12px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:w.label},w.key))}),t.jsx("input",{type:"text",placeholder:"Search exports...",value:v,onChange:w=>S(w.target.value),style:{padding:"8px 16px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"13px",outline:"none",width:"180px"}}),t.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t.jsx("input",{type:"date",value:h.start,onChange:w=>y({...h,start:w.target.value}),style:{padding:"8px 12px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"12px",outline:"none"}}),t.jsx("span",{style:{color:e.text.tertiary},children:""}),t.jsx("input",{type:"date",value:h.end,onChange:w=>y({...h,end:w.target.value}),style:{padding:"8px 12px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"12px",outline:"none"}}),(h.start||h.end||v)&&t.jsx("button",{onClick:()=>{S(""),y({start:"",end:""})},style:{padding:"8px 12px",background:"rgba(239,68,68,0.2)",border:"2px solid rgba(239,68,68,0.3)",borderRadius:"8px",color:"#EF4444",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Clear"})]})]})]}),D.length===0?t.jsxs("div",{style:{padding:"40px",textAlign:"center",color:e.text.tertiary,fontSize:"14px"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",opacity:.3},children:""}),t.jsx("p",{style:{margin:0},children:"No exports found"}),t.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"12px"},children:[m!=="all"?"Try changing the filter or ":"","Configure auto-export or run a manual export to start"]})]}):t.jsx("div",{style:{maxHeight:"500px",overflowY:"auto",paddingRight:"8px"},children:t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:D.map((w,N)=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 18px",background:e.bg.tertiary,borderRadius:"10px",border:`1px solid ${e.border.primary}`,fontSize:"14px",transition:"all 0.2s ease"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},children:[t.jsx("span",{style:{fontSize:"20px"},children:w.exportSource==="auto"?"":""}),t.jsx("span",{style:{color:e.accent.primary,fontWeight:700,fontSize:"15px"},children:w.exportType||"Merchant Export"}),t.jsx("span",{style:{padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:700,background:w.exportSource==="auto"?"rgba(59,130,246,0.2)":"rgba(34,197,94,0.2)",color:w.exportSource==="auto"?"#3B82F6":"#22C55E",border:`1px solid ${w.exportSource==="auto"?"rgba(59,130,246,0.3)":"rgba(34,197,94,0.3)"}`},children:w.exportSource==="auto"?"AUTO":"MANUAL"})]}),t.jsxs("div",{style:{display:"flex",gap:"20px",fontSize:"13px",color:e.text.secondary},children:[t.jsxs("span",{children:[" ",new Date(w.exportedAt||w.timestamp||w.createdAt).toLocaleDateString()]}),t.jsxs("span",{children:[" ",new Date(w.exportedAt||w.timestamp||w.createdAt).toLocaleTimeString()]}),w.fileName&&t.jsxs("span",{children:[" ",w.fileName]}),w.recordCount&&t.jsxs("span",{children:[" ",w.recordCount," records"]})]})]}),w.status==="success"||!w.status?t.jsx("button",{onClick:()=>U(w._id),style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(34,197,94,0.2)",color:"#22C55E",border:"2px solid rgba(34,197,94,0.3)",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},children:" Download"}):t.jsx("span",{style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"2px solid rgba(239,68,68,0.3)"},children:" Failed"})]},w._id||N))})})]})]}),c&&t.jsx($5,{dateRange:g,setDateRange:f,customStartDate:j,setCustomStartDate:C,customEndDate:E,setCustomEndDate:A,loading:n,onExport:k,onCancel:()=>{u(!1),f("all"),C(""),A("")},theme:e,isDarkMode:a}),o&&t.jsx(P5,{configurations:r,setConfigurations:s,exportTypes:M,loading:n,onSave:L,onCancel:()=>i(!1),theme:e,isDarkMode:a})]})}function Ki({icon:e,label:a,value:r,theme:s}){return t.jsxs("div",{style:{padding:"20px",background:s.bg.tertiary,borderRadius:"12px",border:`1px solid ${s.border.primary}`},children:[t.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:e}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary,marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:700},children:a}),t.jsx("div",{style:{fontSize:"16px",color:s.text.primary,fontWeight:700},children:r})]})}function $5({dateRange:e,setDateRange:a,customStartDate:r,setCustomStartDate:s,customEndDate:n,setCustomEndDate:l,loading:o,onExport:i,onCancel:c,theme:u,isDarkMode:d}){return t.jsx("div",{onClick:c,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:x=>x.stopPropagation(),style:{background:d?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",border:`1px solid ${u.border.primary}`,padding:"32px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("h3",{style:{color:u.accent.primary,fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Select Date Range"}),t.jsx("p",{style:{color:u.text.secondary,fontSize:"13px",margin:"0 0 24px 0"},children:"Choose which records to include in the export"}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:[{value:"all",label:" All Time",desc:"Export all records"},{value:"24hr",label:" Last 24 Hours",desc:"Records from the past day"},{value:"week",label:" This Week",desc:"Records from the past 7 days"},{value:"month",label:" This Month",desc:"Records from current month"},{value:"custom",label:" Custom Range",desc:"Choose specific dates"}].map(x=>t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px",background:e===x.value?`${u.accent.primary}20`:u.bg.tertiary,border:`2px solid ${e===x.value?u.accent.primary:u.border.primary}`,borderRadius:"10px",cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsx("input",{type:"radio",name:"dateRange",value:x.value,checked:e===x.value,onChange:m=>a(m.target.value),style:{cursor:"pointer",width:"18px",height:"18px"}}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{color:u.text.primary,fontSize:"14px",fontWeight:700,marginBottom:"4px"},children:x.label}),t.jsx("div",{style:{color:u.text.secondary,fontSize:"12px"},children:x.desc})]})]},x.value))}),e==="custom"&&t.jsx("div",{style:{marginBottom:"24px",padding:"16px",background:u.bg.tertiary,borderRadius:"10px"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:u.accent.primary},children:"Start Date"}),t.jsx("input",{type:"date",value:r,onChange:x=>s(x.target.value),style:{width:"100%",padding:"10px",background:u.bg.secondary,border:`2px solid ${u.border.primary}`,borderRadius:"8px",color:u.text.primary,fontSize:"13px",outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:u.accent.primary},children:"End Date"}),t.jsx("input",{type:"date",value:n,onChange:x=>l(x.target.value),style:{width:"100%",padding:"10px",background:u.bg.secondary,border:`2px solid ${u.border.primary}`,borderRadius:"8px",color:u.text.primary,fontSize:"13px",outline:"none",boxSizing:"border-box"}})]})]})}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:i,disabled:o,style:{flex:1,padding:"14px 24px",background:o?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:o?"not-allowed":"pointer",boxShadow:o?"none":"0 4px 12px rgba(34,197,94,0.4)",opacity:o?.6:1},children:o?" Exporting...":" Export Now"}),t.jsx("button",{onClick:c,disabled:o,style:{flex:1,padding:"14px 24px",background:u.bg.tertiary,color:u.text.primary,border:`2px solid ${u.border.primary}`,borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:o?"not-allowed":"pointer"},children:"Cancel"})]})]})})}function P5({configurations:e,setConfigurations:a,exportTypes:r,loading:s,onSave:n,onCancel:l,theme:o,isDarkMode:i}){var c,u,d,x,m;return t.jsx("div",{onClick:l,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:b=>b.stopPropagation(),style:{background:i?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",border:`1px solid ${o.border.primary}`,padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("h3",{style:{color:o.accent.primary,fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Configure Export Schedule"}),t.jsx("p",{style:{color:o.text.secondary,fontSize:"13px",margin:"0 0 24px 0"},children:"Set up when and how often the system should automatically export data."}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",borderRadius:"12px",background:(c=e.autoExport)!=null&&c.enabled?"rgba(16,185,129,0.1)":"rgba(239,68,68,0.1)",border:`2px solid ${(u=e.autoExport)!=null&&u.enabled?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"}`},children:[t.jsxs("div",{children:[t.jsx("div",{style:{color:o.text.primary,fontWeight:700,fontSize:"14px"},children:"Enable Automatic Export"}),t.jsx("div",{style:{color:o.text.secondary,fontSize:"12px",marginTop:"4px"},children:(d=e.autoExport)!=null&&d.enabled?" Auto-export is active":" Auto-export is disabled"})]}),t.jsx("button",{onClick:()=>{var b;return a({...e,autoExport:{...e.autoExport,enabled:!((b=e.autoExport)!=null&&b.enabled)}})},style:{background:(x=e.autoExport)!=null&&x.enabled?"#10B981":"#6B7280",width:"52px",height:"28px",borderRadius:"14px",position:"relative",border:"none",cursor:"pointer",transition:"all 0.2s ease"},children:t.jsx("div",{style:{position:"absolute",top:"2px",left:(m=e.autoExport)!=null&&m.enabled?"26px":"2px",width:"24px",height:"24px",borderRadius:"12px",background:"#FFFFFF",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Frequency"}),t.jsxs("select",{value:e.autoExport.frequency,onChange:b=>a({...e,autoExport:{...e.autoExport,frequency:b.target.value}}),style:{width:"100%",padding:"12px 16px",background:o.bg.tertiary,border:`2px solid ${o.border.primary}`,borderRadius:"8px",color:o.text.primary,fontSize:"14px",fontWeight:600,cursor:"pointer",outline:"none"},children:[t.jsx("option",{value:"daily",style:{background:i?"#1E2347":"#FFFFFF"},children:" Daily"}),t.jsx("option",{value:"weekly",style:{background:i?"#1E2347":"#FFFFFF"},children:" Weekly"}),t.jsx("option",{value:"monthly",style:{background:i?"#1E2347":"#FFFFFF"},children:" Monthly"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Export Time (24-hour)"}),t.jsx("input",{type:"time",value:e.autoExport.time,onChange:b=>a({...e,autoExport:{...e.autoExport,time:b.target.value}}),style:{width:"100%",padding:"12px 16px",background:o.bg.tertiary,border:`2px solid ${o.border.primary}`,borderRadius:"8px",color:o.text.primary,fontSize:"14px",fontWeight:600,outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"12px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Data Types to Export"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:r.map(b=>{var v,S,h;return t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px",background:(v=e.autoExport.exportTypes)!=null&&v.includes(b.value)?`${o.accent.primary}20`:o.bg.tertiary,border:`2px solid ${(S=e.autoExport.exportTypes)!=null&&S.includes(b.value)?o.accent.primary:o.border.primary}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsx("input",{type:"checkbox",checked:((h=e.autoExport.exportTypes)==null?void 0:h.includes(b.value))||!1,onChange:y=>{const g=e.autoExport.exportTypes||[],f=y.target.checked?[...g,b.value]:g.filter(j=>j!==b.value);a({...e,autoExport:{...e.autoExport,exportTypes:f}})},style:{cursor:"pointer",width:"16px",height:"16px"}}),t.jsx("span",{style:{fontSize:"16px"},children:b.icon}),t.jsx("span",{style:{color:o.text.primary,fontSize:"14px",fontWeight:600},children:b.label})]},b.value)})})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[t.jsx("button",{onClick:n,disabled:s,style:{flex:1,padding:"14px 24px",background:s?"#9CA3AF":o.accent.primary,color:i?"#181D40":"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:s?"not-allowed":"pointer",boxShadow:s?"none":"0 4px 12px rgba(255,212,28,0.4)",opacity:s?.6:1},children:s?" Saving...":" Save Settings"}),t.jsx("button",{onClick:l,disabled:s,style:{flex:1,padding:"14px 24px",background:o.bg.tertiary,color:o.text.primary,border:`2px solid ${o.border.primary}`,borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:s?"not-allowed":"pointer"},children:"Cancel"})]})]})]})})}function Rh({transactions:e=[],onRowClick:a,showHeader:r=!1,showColors:s=!0,compact:n=!1}){const{theme:l,isDarkMode:o}=ne(),i=o?"255, 212, 28":"59, 130, 246",c=g=>g.date?g.date:g.createdAt?new Date(g.createdAt).toLocaleDateString("en-PH",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A",u=g=>g.time?g.time:g.createdAt?new Date(g.createdAt).toLocaleTimeString("en-PH",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"N/A",d=g=>g.transactionId||g.id||g._id||"N/A",x=g=>g.transactionType==="credit",m=g=>g.transactionType==="debit",b=g=>g.idNumber||g.schoolUId||"N/A",v=g=>{if(g.status==="Refunded"){const f=g.userName||"User";return g.shuttleId?`NU Shuttle Service Refund: ${f}`:m(g)?`${g.businessName||g.merchantName||"Merchant"} Refund: ${f}`:`Cash-In Refund: ${f}`}if(x(g))return`Cash-In: ${g.userName||"User"}`;if(m(g)){const f=g.userName||"User";return g.shuttleId?`Payment to NU Shuttle Service: ${f}`:`Payment to ${g.businessName||g.merchantName||"Merchant"}: ${f}`}return g.description||g.userName||"Transaction"},S=g=>x(g)?g.adminName?g.adminName:g.processedBy?g.processedBy:g.adminId?`Admin #${g.adminId}`:"Treasury":"",h=g=>{const f=Number(g.amount).toFixed(2);return x(g)?`+ ${f}`:m(g)?`- ${f}`:`${f}`},y=g=>s?x(g)?"#10B981":m(g)?"#EF4444":l.text.primary:l.text.primary;return t.jsx("div",{className:"flex flex-col w-full max-w-full",style:{height:n?"300px":"auto",background:l.bg.card,border:`1px solid rgba(${i}, 0.2)`,borderRadius:"12px",overflow:"hidden",boxShadow:o?"0 4px 12px rgba(0,0,0,0.2)":"0 4px 12px rgba(59,130,246,0.1)"},children:e.length===0?t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,textAlign:"center",color:l.text.secondary,padding:"64px 16px"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),t.jsx("div",{children:"No transactions found"})]}):t.jsx("div",{style:{flex:1,overflow:"auto"},children:t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsx("tr",{style:{background:`rgba(${i}, 0.1)`},children:["Date","Time","ID Number","Details","Amount","Processed By","Transaction ID"].map(g=>t.jsx("th",{style:{textAlign:"center",padding:"12px 16px",fontSize:"11px",fontWeight:800,color:l.accent.primary,textTransform:"uppercase",borderBottom:`2px solid rgba(${i}, 0.3)`},children:g},g))})}),t.jsx("tbody",{children:e.map((g,f)=>{const j=h(g),C=y(g);return t.jsxs("tr",{onClick:()=>a==null?void 0:a(g),style:{borderBottom:`1px solid ${l.border.primary}`,cursor:a?"pointer":"default",transition:"all 0.2s"},onMouseEnter:E=>{E.currentTarget.style.background=l.bg.hover},onMouseLeave:E=>{E.currentTarget.style.background="transparent"},children:[t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",color:l.text.primary},children:c(g)}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",color:l.text.primary},children:u(g)}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",color:l.text.primary,fontFamily:"monospace",fontSize:"11px",fontWeight:700},children:b(g)}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",color:l.text.secondary},children:v(g)}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",fontWeight:"bold",color:C},children:j}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",color:l.text.secondary,fontSize:"12px"},children:S(g)}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",fontFamily:"monospace",fontSize:"11px",color:l.text.secondary},children:d(g)})]},g._id||g.id||g.transactionId||f)})})]})})})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=(...e)=>e.filter((a,r,s)=>!!a&&a.trim()!==""&&s.indexOf(a)===r).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,r,s)=>s?s.toUpperCase():r.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=e=>{const a=W5(e);return a.charAt(0).toUpperCase()+a.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var q5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=e=>{for(const a in e)if(a.startsWith("aria-")||a==="role"||a==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=p.forwardRef(({color:e="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:n="",children:l,iconNode:o,...i},c)=>p.createElement("svg",{ref:c,...q5,width:a,height:a,stroke:e,strokeWidth:s?Number(r)*24/Number(a):r,className:zh("lucide",n),...!l&&!Y5(i)&&{"aria-hidden":"true"},...i},[...o.map(([u,d])=>p.createElement(u,d)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(e,a)=>{const r=p.forwardRef(({className:s,...n},l)=>p.createElement(G5,{ref:l,iconNode:a,className:zh(`lucide-${H5(Bx(e))}`,`lucide-${e}`,s),...n}));return r.displayName=Bx(e),r};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],X5=de("activity",V5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Z5=de("archive",Q5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Jl=de("arrow-right",J5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Bh=de("briefcase",K5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ci=de("calendar",ej);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],aa=de("check",tj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rj=de("chevron-down",aj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Dh=de("chevron-left",sj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Do=de("chevron-right",nj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ra=de("circle-alert",lj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ft=de("circle-check-big",oj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],cj=de("circle-x",ij);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pa=de("clock",dj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Is=de("credit-card",uj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ul=de("dollar-sign",pj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Eu=de("download",xj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Kl=de("eye-off",mj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],eo=de("eye",fj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_h=de("file-text",gj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Mh=de("graduation-cap",hj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],yj=de("id-card",bj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ih=de("info",vj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Xe=de("loader-circle",jj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Tn=de("mail",Nj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Dx=de("message-circle",Sj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Cj=de("pen-line",wj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Lh=de("plus",kj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],Tj=de("power",Fj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],pd=de("refresh-cw",Ej);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Zr=de("search",Aj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],zj=de("send",Rj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dj=de("settings",Bj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Yn=de("shield",_j);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ij=de("square-pen",Mj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Jr=de("store",Lj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ls=de("trending-up",Uj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xa=de("triangle-alert",Oj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],br=de("truck",$j);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],xd=de("user-check",Pj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],md=de("user-plus",Hj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],fd=de("user-x",Wj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gd=de("user",qj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Us=de("users",Yj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Vj=de("wallet",Gj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Tt=de("x",Xj),_x=e=>{if(!e)return"";let a=e.replace(/[\s:-]/g,"").toUpperCase();if(/^[0-9A-F]{8}$/.test(a))return a;if(/^[0-9A-F]+$/.test(a))return a.length%2!==0&&(a="0"+a),(a.match(/.{2}/g)||[]).reverse().join("");if(/^\d+$/.test(a)){let s=BigInt(a).toString(16).toUpperCase();for(s.length%2!==0&&(s="0"+s);s.length<8;)s="0"+s;return(s.match(/.{2}/g)||[]).reverse().join("")}return a},Qj=e=>{const a=e.replace(/\D/g,"");return a.length<=4?a:`${a.slice(0,4)}-${a.slice(4,10)}`},ec=e=>e.replace(/\D/g,"").slice(0,10),Mx=e=>!e||e.length<4?"***":"****"+e.slice(-4);function Zj({isOpen:e,onClose:a,onSuccess:r,prefillRfid:s=""}){const{theme:n,isDarkMode:l}=ne(),[o,i]=p.useState(1),[c,u]=p.useState(!1),[d,x]=p.useState(!1),m=p.useRef(null),[b,v]=p.useState(""),[S,h]=p.useState(""),[y,g]=p.useState({firstName:"",middleName:"",lastName:"",role:"student",schoolUId:"",email:""}),[f,j]=p.useState(null);p.useEffect(()=>{e&&s&&(h(s),v(s),i(2))},[s,e]),p.useEffect(()=>{e&&o===1&&m.current&&!s&&setTimeout(()=>{var _;return(_=m.current)==null?void 0:_.focus()},100)},[e,o,s]);const C=()=>{i(1),v(""),h(""),g({firstName:"",middleName:"",lastName:"",role:"student",schoolUId:"",email:""}),j(null),u(!1),x(!1)},E=()=>{C(),a()},A=_=>{const z=_.target.value.toUpperCase();v(z)},M=async()=>{if(!b.trim()){$.error("Please scan or enter RFID");return}x(!0);try{const _=_x(b.trim());if(!(await J.get(`/admin/treasury/users/check-rfid?rfidUId=${_}`)).available){$.error("This RFID is already registered to another user"),x(!1);return}h(_),i(2)}catch(_){console.error("RFID check error:",_),$.error(_.message||"Error checking RFID")}finally{x(!1)}},B=_=>{_.key==="Enter"&&(_.preventDefault(),M())},F=_=>{const z=Qj(_.target.value);g(q=>({...q,schoolUId:z}))},L=()=>y.firstName.trim()?y.lastName.trim()?!y.schoolUId||ec(y.schoolUId).length!==10?($.error("Please enter a valid 10-digit School ID"),!1):!y.email.trim()||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y.email)?($.error("Please enter a valid email address"),!1):!0:($.error("Last name is required"),!1):($.error("First name is required"),!1),k=async()=>{if(L()){x(!0);try{const _=ec(y.schoolUId);if(!(await J.get(`/admin/treasury/users/check-schoolid?schoolUId=${_}`)).available){$.error("This School ID is already registered"),x(!1);return}i(3)}catch(_){console.error("Validation error:",_),$.error(_.message||"Error validating user details")}finally{x(!1)}}},U=async()=>{u(!0);try{const _=Math.floor(1e5+Math.random()*9e5).toString(),z={rfidUId:S,firstName:y.firstName.trim(),middleName:y.middleName.trim(),lastName:y.lastName.trim(),role:y.role,schoolUId:ec(y.schoolUId),email:y.email.trim().toLowerCase(),pin:_},q=await J.post("/admin/treasury/users/register",z);q.success?(j({...q.user,emailSent:q.emailSent}),i(4),$.success("User registered successfully!"),q.emailSent?$.info("Temporary PIN has been sent to the user's email"):$.warning("Could not send email. Please inform the user of their temporary PIN manually.")):$.error(q.message||"Registration failed")}catch(_){console.error("Registration error:",_),$.error(_.message||"Failed to register user")}finally{u(!1)}},D=()=>{r&&r(f),E()};return e?t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:E}),t.jsxs("div",{style:{background:l?"#1E2347":"#FFFFFF",borderColor:n.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-2xl overflow-hidden animate-fadeIn",children:[t.jsxs("div",{style:{background:l?"linear-gradient(135deg, rgba(255,212,28,0.2) 0%, rgba(255,212,28,0.1) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.2) 0%, rgba(59,130,246,0.1) 100%)",borderColor:l?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"px-6 py-4 flex items-center justify-between border-b",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(md,{style:{color:n.accent.primary},className:"w-6 h-6"}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:n.accent.primary},className:"text-xl font-bold",children:"Register New User"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm",children:"Add a new student or employee to NUCash"})]})]}),t.jsx("button",{onClick:E,disabled:c,style:{color:n.text.secondary},className:"hover:opacity-70 transition-colors disabled:opacity-50",children:t.jsx(Tt,{className:"w-6 h-6"})})]}),t.jsx("div",{style:{background:l?"rgba(15,18,39,0.5)":"rgba(243,244,246,0.5)"},className:"flex items-center justify-center gap-3 py-4 px-6",children:[{num:1,label:"RFID"},{num:2,label:"Details"},{num:3,label:"Summary"},{num:4,label:"Complete"}].map((_,z)=>t.jsxs(je.Fragment,{children:[t.jsxs("div",{className:`flex items-center gap-2 ${o>=_.num?"":"opacity-40"}`,children:[t.jsx("div",{style:{background:o>=_.num?n.accent.primary:"transparent",borderColor:o>=_.num?n.accent.primary:n.border.primary,color:o>=_.num?l?"#181D40":"#FFFFFF":n.text.secondary},className:"w-8 h-8 rounded-full flex items-center justify-center font-bold border-2 text-sm",children:o>_.num?t.jsx(ft,{className:"w-4 h-4"}):_.num}),t.jsx("span",{style:{color:o>=_.num?n.accent.primary:n.text.secondary},className:"hidden sm:inline font-medium text-sm",children:_.label})]}),z<3&&t.jsx("div",{style:{background:o>_.num?n.accent.primary:n.border.primary},className:"w-8 h-0.5 rounded"})]},_.num))}),t.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[o===1&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{style:{background:l?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",borderColor:l?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"p-4 rounded-xl border flex items-start gap-3",children:[t.jsx(Is,{style:{color:n.accent.primary},className:"w-5 h-5 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:n.text.primary},className:"font-semibold",children:"Scan User's ID Card"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm mt-1",children:"Place the ID card on the RFID scanner or type the RFID manually. Format will be automatically converted to Hex (little-endian)."})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:n.text.primary},className:"font-semibold mb-2 block",children:"RFID Tag"}),t.jsx("input",{ref:m,type:"text",value:b,onChange:A,onKeyDown:B,placeholder:"Scan or enter RFID...",style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-yellow-400/50 font-mono text-lg tracking-wider",autoComplete:"off"}),b&&t.jsxs("p",{style:{color:n.text.tertiary},className:"text-xs mt-2",children:["Will be stored as: ",t.jsx("span",{className:"font-mono",children:_x(b)})]})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{onClick:E,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:"Cancel"}),t.jsx("button",{onClick:M,disabled:!b.trim()||d,style:{background:n.accent.primary,color:l?"#181D40":"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2",children:d?t.jsxs(t.Fragment,{children:[t.jsx(Xe,{className:"w-5 h-5 animate-spin"})," Checking..."]}):t.jsx(t.Fragment,{children:"Continue "})})]})]}),o===2&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"p-3 rounded-xl border flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Is,{style:{color:n.accent.primary},className:"w-5 h-5"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:n.text.secondary},className:"text-xs",children:"RFID Tag"}),t.jsx("p",{style:{color:n.text.primary},className:"font-mono font-semibold",children:Mx(S)})]})]}),t.jsx(ft,{className:"w-5 h-5 text-green-500"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsxs("label",{style:{color:n.text.primary},className:"font-semibold mb-1.5 block text-sm",children:["First Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:y.firstName,onChange:_=>g(z=>({...z,firstName:_.target.value})),placeholder:"Juan",style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full px-3 py-2.5 rounded-xl border focus:outline-none focus:ring-2 focus:ring-yellow-400/50"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:n.text.primary},className:"font-semibold mb-1.5 block text-sm",children:"Middle Name"}),t.jsx("input",{type:"text",value:y.middleName,onChange:_=>g(z=>({...z,middleName:_.target.value})),placeholder:"Dela",style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full px-3 py-2.5 rounded-xl border focus:outline-none focus:ring-2 focus:ring-yellow-400/50"})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:n.text.primary},className:"font-semibold mb-1.5 block text-sm",children:["Last Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:y.lastName,onChange:_=>g(z=>({...z,lastName:_.target.value})),placeholder:"Cruz",style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full px-3 py-2.5 rounded-xl border focus:outline-none focus:ring-2 focus:ring-yellow-400/50"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:n.text.primary},className:"font-semibold mb-1.5 block text-sm",children:["User Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:["student","employee"].map(_=>t.jsxs("button",{type:"button",onClick:()=>g(z=>({...z,role:_})),style:{background:y.role===_?n.accent.primary:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:y.role===_?l?"#181D40":"#FFFFFF":n.text.primary,borderColor:y.role===_?n.accent.primary:n.border.primary},className:"py-2.5 rounded-xl border font-semibold capitalize transition-all hover:opacity-90",children:[_==="student"?" ":" ",_]},_))})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:n.text.primary},className:"font-semibold mb-1.5 block text-sm",children:["School ID ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(yj,{style:{color:n.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),t.jsx("input",{type:"text",value:y.schoolUId,onChange:F,placeholder:"2024-123456",maxLength:11,style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full pl-10 pr-4 py-2.5 rounded-xl border focus:outline-none focus:ring-2 focus:ring-yellow-400/50 font-mono"})]}),t.jsx("p",{style:{color:n.text.tertiary},className:"text-xs mt-1",children:"Format: ####-###### (will be stored as 10 digits)"})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:n.text.primary},className:"font-semibold mb-1.5 block text-sm",children:["Email Address ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Tn,{style:{color:n.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),t.jsx("input",{type:"email",value:y.email,onChange:_=>g(z=>({...z,email:_.target.value})),placeholder:"juan.delacruz@nu.edu.ph",style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full pl-10 pr-4 py-2.5 rounded-xl border focus:outline-none focus:ring-2 focus:ring-yellow-400/50"})]}),t.jsx("p",{style:{color:n.text.tertiary},className:"text-xs mt-1",children:"Temporary PIN will be sent to this email"})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{onClick:()=>{s?E():i(1)},style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:" Back"}),t.jsx("button",{onClick:k,disabled:d,style:{background:n.accent.primary,color:l?"#181D40":"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2",children:d?t.jsxs(t.Fragment,{children:[t.jsx(Xe,{className:"w-5 h-5 animate-spin"})," Validating..."]}):t.jsx(t.Fragment,{children:"Review "})})]})]}),o===3&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{style:{background:l?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",borderColor:l?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"p-4 rounded-xl border flex items-start gap-3",children:[t.jsx(ra,{style:{color:n.accent.primary},className:"w-5 h-5 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:n.text.primary},className:"font-semibold",children:"Review User Details"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm mt-1",children:"Please verify all information before registering."})]})]}),t.jsx("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"rounded-xl border overflow-hidden",children:[{label:"RFID Tag",value:Mx(S)},{label:"Full Name",value:`${y.firstName} ${y.middleName?y.middleName+" ":""}${y.lastName}`},{label:"User Type",value:y.role,badge:!0},{label:"School ID",value:y.schoolUId},{label:"Email",value:y.email}].map((_,z)=>t.jsxs("div",{style:{borderColor:n.border.primary},className:`flex justify-between items-center px-4 py-3 ${z<4?"border-b":""}`,children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:_.label}),_.badge?t.jsxs("span",{style:{background:y.role==="student"?"rgba(59,130,246,0.2)":"rgba(168,85,247,0.2)",color:y.role==="student"?"#3B82F6":"#A855F7"},className:"px-3 py-1 rounded-full text-sm font-semibold capitalize",children:[y.role==="student"?" ":" ",_.value]}):t.jsx("span",{style:{color:n.text.primary},className:"font-semibold text-sm",children:_.value})]},_.label))}),t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{className:"font-semibold text-sm text-emerald-500",children:" What happens next?"}),t.jsxs("ul",{style:{color:n.text.secondary},className:"text-sm mt-2 space-y-1",children:[t.jsx("li",{children:" A temporary PIN will be generated and emailed to the user"}),t.jsx("li",{children:" The user must log in and change their PIN to activate"}),t.jsxs("li",{children:[" Status: ",t.jsx("span",{className:"font-semibold text-yellow-500",children:"Inactive"})," until PIN is changed"]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>i(2),disabled:c,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80 disabled:opacity-50",children:" Edit"}),t.jsx("button",{onClick:U,disabled:c,className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2 bg-emerald-500 text-white",children:c?t.jsxs(t.Fragment,{children:[t.jsx(Xe,{className:"w-5 h-5 animate-spin"})," Registering..."]}):t.jsxs(t.Fragment,{children:[t.jsx(md,{className:"w-5 h-5"})," Register User"]})})]})]}),o===4&&t.jsxs("div",{className:"text-center space-y-5",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto",children:t.jsx(ft,{className:"w-12 h-12 text-emerald-500"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-bold text-emerald-500",children:"Registration Successful!"}),t.jsx("p",{style:{color:n.text.secondary},className:"mt-2",children:f!=null&&f.emailSent?"A temporary PIN has been sent to the user's email.":"User registered but email could not be sent."})]}),f&&!f.emailSent&&t.jsxs("div",{style:{background:"rgba(251,191,36,0.15)",borderColor:"rgba(251,191,36,0.4)"},className:"p-4 rounded-xl border flex items-start gap-3 text-left",children:[t.jsx(ra,{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-yellow-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-yellow-500 text-sm",children:"Email Not Sent"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm mt-1",children:"Please inform the user of their temporary PIN manually or ask them to request a new PIN through the app."})]})]}),f&&f.emailSent&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.15)",borderColor:"rgba(16,185,129,0.4)"},className:"p-4 rounded-xl border flex items-start gap-3 text-left",children:[t.jsx(Tn,{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-emerald-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-emerald-500 text-sm",children:"Email Sent Successfully"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm mt-1",children:"The user should check their inbox (and spam folder) for the temporary PIN."})]})]}),f&&t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"rounded-xl border p-5 text-left space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"User ID"}),t.jsx("span",{style:{color:n.text.primary},className:"font-mono font-semibold",children:f.userId})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"Name"}),t.jsxs("span",{style:{color:n.text.primary},className:"font-semibold",children:[f.firstName," ",f.lastName]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"School ID"}),t.jsx("span",{style:{color:n.text.primary},className:"font-mono",children:f.schoolUId})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"Email"}),t.jsx("span",{style:{color:n.text.primary},className:"text-sm",children:f.email})]}),t.jsxs("div",{className:"flex justify-between pt-2 border-t",style:{borderColor:n.border.primary},children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"Status"}),t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-yellow-500/20 text-yellow-500",children:"Pending Activation"})]})]}),t.jsx("button",{onClick:D,style:{background:n.accent.primary,color:l?"#181D40":"#FFFFFF"},className:"w-full py-3 rounded-xl font-bold transition-all hover:opacity-90",children:"Done"})]})]}),t.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
          }
          .animate-fadeIn {
            animation: fadeIn 0.2s ease-out;
          }
        `})]})]}):null}const Ix=e=>{if(!e)return"";let a=e.replace(/[\s:-]/g,"").toUpperCase();if(/^[0-9A-F]{8}$/.test(a))return a;if(/^[0-9A-F]+$/.test(a))return a.length%2!==0&&(a="0"+a),(a.match(/.{2}/g)||[]).reverse().join("");if(/^\d+$/.test(a)){let s=BigInt(a).toString(16).toUpperCase();for(s.length%2!==0&&(s="0"+s);s.length<8;)s="0"+s;return(s.match(/.{2}/g)||[]).reverse().join("")}return a},Jj=e=>!e||e.length<4?"***":"****"+e.slice(-4),Kj=[100,200,300,500,1e3],tc="cashin_preset_amounts";function e4({isOpen:e,onClose:a,onSuccess:r,onRegisterUser:s}){var dt,ve;const{theme:n,isDarkMode:l}=ne(),[o,i]=p.useState(1),[c,u]=p.useState(!1),[d,x]=p.useState(!1),m=p.useRef(null),b=p.useRef(null),[v,S]=p.useState(""),[h,y]=p.useState(""),[g,f]=p.useState(null),[j,C]=p.useState(null),[E,A]=p.useState(""),[M,B]=p.useState(5),[F,L]=p.useState(null),[k,U]=p.useState(()=>{const H=localStorage.getItem(tc);return H?JSON.parse(H):Kj}),[D,_]=p.useState(!1),[z,q]=p.useState([]),[w,N]=p.useState(""),[R,T]=p.useState(!1);p.useEffect(()=>{const H=localStorage.getItem(tc);H&&U(JSON.parse(H))},[]),p.useEffect(()=>{e&&o===1&&m.current&&setTimeout(()=>{var H;return(H=m.current)==null?void 0:H.focus()},100)},[e,o]),p.useEffect(()=>(o===4&&M>0?b.current=setTimeout(()=>{B(H=>H-1)},1e3):o===4&&M===0&&Y(),()=>{b.current&&clearTimeout(b.current)}),[o,M]);const O=()=>{i(1),S(""),y(""),f(null),C(null),A(""),B(5),L(null),u(!1),x(!1),_(!1),q([]),N(""),T(!1)},V=()=>{b.current&&clearTimeout(b.current),O(),a()},P=async()=>{var H;if(!v.trim()){$.error("Please scan or enter RFID");return}x(!0);try{const X=Ix(v.trim());y(X);const re=await J.get(`/admin/treasury/users/search-rfid?rfidUId=${X}`);re.success&&re.user?(f(re.user),i(2)):i("not_found")}catch(X){console.error("Search user error:",X),(H=X.message)!=null&&H.includes("not found")||X.status===404?i("not_found"):$.error(X.message||"Error searching for user")}finally{x(!1)}},W=H=>{H.key==="Enter"&&(H.preventDefault(),P())},Z=()=>j==="custom"?parseFloat(E)||0:j||0,te=()=>{const H=Z();if(!H||H<=0){$.error("Please select or enter a valid amount");return}if(H<10){$.error("Minimum cash-in amount is 10");return}if(H>1e4){$.error("Maximum cash-in amount is 10,000");return}B(5),i(4)},I=()=>{b.current&&clearTimeout(b.current),B(5),i(3)},Y=async()=>{u(!0);try{const H=Z(),X=localStorage.getItem("adminData"),re=X?JSON.parse(X):null,me=await J.post("/admin/treasury/cash-in",{rfid:h,amount:H,adminId:(re==null?void 0:re._id)||(re==null?void 0:re.id)||null});me.success?(L(me.transaction),f(we=>{var Oe;return{...we,balance:((Oe=me.user)==null?void 0:Oe.balance)||we.balance+H}}),i(5),$.success("Cash-in successful!")):($.error(me.message||"Cash-in failed"),i(3))}catch(H){console.error("Cash-in error:",H),$.error(H.message||"Failed to process cash-in"),i(3)}finally{u(!1)}},G=()=>{V(),s&&s(h)},K=()=>{r&&r(F),V()},se=()=>{O(),setTimeout(()=>{var H;return(H=m.current)==null?void 0:H.focus()},100)},ce=()=>{q([...k]),_(!0),T(!1),N("")},ae=()=>{if(z.length!==5){$.error("You must have exactly 5 preset amounts");return}U(z),localStorage.setItem(tc,JSON.stringify(z)),_(!1),T(!1),N(""),$.success("Preset amounts updated!")},oe=()=>{q([]),_(!1),T(!1),N("")},he=H=>{if(z.length<=1){$.error("You must have at least 1 preset amount");return}const X=z.filter((re,me)=>me!==H);q(X)},Ke=()=>{const H=parseInt(w,10);if(!w.trim()||isNaN(H)){$.error("Please enter a valid amount");return}if(H<=0){$.error("Amount must be positive");return}if(z.length>=5){$.error("Maximum 5 preset amounts allowed");return}if(z.includes(H)){$.error("This amount already exists");return}q([...z,H].sort((X,re)=>X-re)),N(""),T(!1)};if(!e)return null;const ct=D?z:k;return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:V}),t.jsxs("div",{style:{background:l?"#1E2347":"#FFFFFF",borderColor:n.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-2xl overflow-hidden animate-fadeIn",children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(16,185,129,0.2) 0%, rgba(16,185,129,0.1) 100%)",borderColor:"rgba(16,185,129,0.3)"},className:"px-6 py-4 flex items-center justify-between border-b",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Vj,{className:"w-6 h-6 text-emerald-500"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-emerald-500",children:"Cash-In for User"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm",children:"Load balance to user's NUCash account"})]})]}),t.jsx("button",{onClick:V,disabled:c||o===4,style:{color:n.text.secondary},className:"hover:opacity-70 transition-colors disabled:opacity-50",children:t.jsx(Tt,{className:"w-6 h-6"})})]}),t.jsx("div",{style:{background:l?"rgba(15,18,39,0.5)":"rgba(243,244,246,0.5)"},className:"flex items-center justify-center gap-3 py-4 px-6",children:[{num:1,label:"Scan"},{num:2,label:"User"},{num:3,label:"Amount"},{num:4,label:"Confirm"},{num:5,label:"Done"}].map((H,X)=>{const re=o==="not_found"?1:o;return t.jsxs(je.Fragment,{children:[t.jsxs("div",{className:`flex items-center gap-2 ${re>=H.num?"":"opacity-40"}`,children:[t.jsx("div",{style:{background:re>=H.num?"#10B981":"transparent",borderColor:re>=H.num?"#10B981":n.border.primary,color:re>=H.num?"#FFFFFF":n.text.secondary},className:"w-8 h-8 rounded-full flex items-center justify-center font-bold border-2 text-sm",children:re>H.num?t.jsx(ft,{className:"w-4 h-4"}):H.num}),t.jsx("span",{style:{color:re>=H.num?"#10B981":n.text.secondary},className:"hidden sm:inline font-medium text-sm",children:H.label})]}),X<4&&t.jsx("div",{style:{background:re>H.num?"#10B981":n.border.primary},className:"w-8 h-0.5 rounded"})]},H.num)})}),t.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[o===1&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-4 rounded-xl border flex items-start gap-3",children:[t.jsx(Is,{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-emerald-500"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:n.text.primary},className:"font-semibold",children:"Scan User's ID Card"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm mt-1",children:"Place the ID card on the RFID scanner or type the RFID manually. The system will look up the user's account."})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:n.text.primary},className:"font-semibold mb-2 block",children:"RFID Tag"}),t.jsx("input",{ref:m,type:"text",value:v,onChange:H=>S(H.target.value.toUpperCase()),onKeyDown:W,placeholder:"Scan or enter RFID...",style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-emerald-400/50 font-mono text-lg tracking-wider",autoComplete:"off"}),v&&t.jsxs("p",{style:{color:n.text.tertiary},className:"text-xs mt-2",children:["Will search as: ",t.jsx("span",{className:"font-mono",children:Ix(v)})]})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{onClick:V,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:"Cancel"}),t.jsx("button",{onClick:P,disabled:!v.trim()||d,className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2 bg-emerald-500 text-white",children:d?t.jsxs(t.Fragment,{children:[t.jsx(Xe,{className:"w-5 h-5 animate-spin"})," Searching..."]}):t.jsxs(t.Fragment,{children:["Search User ",t.jsx(Jl,{className:"w-5 h-5"})]})})]})]}),o==="not_found"&&t.jsxs("div",{className:"space-y-5 text-center",children:[t.jsx("div",{style:{background:"rgba(239,68,68,0.2)"},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto",children:t.jsx(ra,{className:"w-12 h-12 text-red-500"})}),t.jsxs("div",{children:[t.jsx("h3",{style:{color:n.text.primary},className:"text-xl font-bold",children:"User Not Found"}),t.jsxs("p",{style:{color:n.text.secondary},className:"mt-2",children:["No user is registered with this RFID.",t.jsx("br",{}),"Would you like to register a new user?"]})]}),t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:n.text.secondary},className:"text-sm",children:"Scanned RFID:"}),t.jsx("p",{style:{color:n.text.primary},className:"font-mono font-semibold mt-1",children:h})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{i(1),S(""),y(""),setTimeout(()=>{var H;return(H=m.current)==null?void 0:H.focus()},100)},style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:"Try Again"}),t.jsxs("button",{onClick:G,style:{background:n.accent.primary,color:l?"#181D40":"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 flex items-center justify-center gap-2",children:[t.jsx(md,{className:"w-5 h-5"})," Register User"]})]})]}),o===2&&g&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-3 rounded-xl border flex items-center gap-3",children:[t.jsx(ft,{className:"w-5 h-5 text-emerald-500"}),t.jsx("p",{className:"font-semibold text-emerald-500",children:"User Found!"})]}),t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"rounded-xl border overflow-hidden",children:[t.jsxs("div",{className:"p-4 flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-14 h-14 rounded-full flex items-center justify-center",children:t.jsx(gd,{className:"w-7 h-7 text-emerald-500"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{style:{color:n.text.primary},className:"font-bold text-lg",children:[g.firstName," ",g.lastName]}),t.jsxs("p",{style:{color:n.text.secondary},className:"text-sm",children:[g.role==="student"?"":""," ",((dt=g.role)==null?void 0:dt.charAt(0).toUpperCase())+((ve=g.role)==null?void 0:ve.slice(1))]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{style:{color:n.text.secondary},className:"text-xs",children:"Balance"}),t.jsxs("p",{className:"text-xl font-bold text-emerald-500",children:["",parseFloat(g.balance||0).toLocaleString()]})]})]}),t.jsx("div",{style:{borderColor:n.border.primary},className:"border-t",children:[{label:"RFID",value:Jj(h)},{label:"School ID",value:g.schoolUId},{label:"Email",value:g.email}].map((H,X)=>t.jsxs("div",{style:{borderColor:n.border.primary},className:`flex justify-between items-center px-4 py-2.5 ${X<2?"border-b":""}`,children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:H.label}),t.jsx("span",{style:{color:n.text.primary},className:"font-semibold text-sm font-mono",children:H.value})]},H.label))})]}),!g.isActive&&!g.isDeactivated&&t.jsxs("div",{style:{background:"rgba(251,191,36,0.15)",borderColor:"rgba(251,191,36,0.4)"},className:"p-4 rounded-xl border flex items-start gap-3",children:[t.jsx(ra,{className:"w-6 h-6 mt-0.5 flex-shrink-0 text-yellow-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-yellow-500 text-base",children:"Account Not Yet Activated"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm mt-2",children:"This user's account has not yet been activated. Please ask them to:"}),t.jsxs("ol",{style:{color:n.text.secondary},className:"text-sm mt-2 ml-4 list-decimal space-y-1",children:[t.jsx("li",{children:"Log in to the NUCash app using their email and temporary PIN"}),t.jsx("li",{children:"Change their PIN to activate their account"})]}),t.jsx("p",{style:{color:n.text.tertiary},className:"text-xs mt-3 italic",children:"Cash-in is only allowed for activated accounts."})]})]}),g.isDeactivated&&t.jsxs("div",{style:{background:"rgba(239,68,68,0.15)",borderColor:"rgba(239,68,68,0.4)"},className:"p-4 rounded-xl border flex items-start gap-3",children:[t.jsx(ra,{className:"w-6 h-6 mt-0.5 flex-shrink-0 text-red-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-red-500 text-base",children:"Account Deactivated"}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm mt-2",children:"This user's account has been deactivated and cannot receive cash-ins. Please contact the system administrator if this is an error."})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{i(1),f(null),S(""),y(""),setTimeout(()=>{var H;return(H=m.current)==null?void 0:H.focus()},100)},style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:"Scan Different Card"}),t.jsxs("button",{onClick:()=>i(3),disabled:!g.isActive||g.isDeactivated,className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 bg-emerald-500 text-white",children:["Continue ",t.jsx(Jl,{className:"w-5 h-5"})]})]})]}),o===3&&g&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"p-3 rounded-xl border flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(gd,{style:{color:n.text.tertiary},className:"w-5 h-5"}),t.jsxs("div",{children:[t.jsxs("p",{style:{color:n.text.primary},className:"font-semibold",children:[g.firstName," ",g.lastName]}),t.jsx("p",{style:{color:n.text.secondary},className:"text-sm",children:g.schoolUId})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{style:{color:n.text.secondary},className:"text-xs",children:"Balance"}),t.jsxs("p",{className:"font-bold text-emerald-500",children:["",parseFloat(g.balance||0).toLocaleString()]})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{style:{color:n.text.primary},className:"font-semibold",children:"Select Amount"}),D?t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:oe,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary,borderColor:n.border.primary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold border hover:opacity-80 transition",children:"Cancel"}),t.jsx("button",{onClick:ae,className:"px-3 py-1.5 rounded-lg text-xs font-semibold hover:opacity-90 transition bg-emerald-500 text-white",children:"Save"})]}):t.jsxs("button",{onClick:ce,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary,borderColor:n.border.primary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold border hover:opacity-80 transition flex items-center gap-1.5",children:[t.jsx(Cj,{className:"w-3.5 h-3.5"})," Edit"]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[ct.map((H,X)=>t.jsxs("div",{className:"relative",children:[t.jsxs("button",{type:"button",onClick:()=>{D||(C(H),A(""))},disabled:D,style:{background:j===H&&!D?"#10B981":l?"rgba(15,18,39,0.5)":"#F9FAFB",color:j===H&&!D?"#FFFFFF":n.text.primary,borderColor:j===H&&!D?"#10B981":n.border.primary,opacity:D?.7:1},className:"w-full py-4 rounded-xl border font-bold text-xl transition-all hover:opacity-90 disabled:cursor-not-allowed",children:["",H]}),D&&t.jsx("button",{onClick:()=>he(X),style:{background:"#EF4444"},className:"absolute -top-2 -right-2 w-5 h-5 rounded-full text-white text-xs font-bold flex items-center justify-center hover:opacity-80 transition",children:""})]},X)),D&&ct.length<5&&!R&&t.jsx("button",{onClick:()=>T(!0),style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary,color:n.text.primary},className:"py-4 rounded-xl font-bold text-2xl border-2 border-dashed hover:opacity-80 transition",children:"+"}),!D&&t.jsx("button",{type:"button",onClick:()=>C("custom"),style:{background:j==="custom"?"#10B981":l?"rgba(15,18,39,0.5)":"#F9FAFB",color:j==="custom"?"#FFFFFF":n.text.primary,borderColor:j==="custom"?"#10B981":n.border.primary},className:"py-4 rounded-xl border font-semibold transition-all hover:opacity-90",children:"Custom"})]}),D&&R&&t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"p-3 rounded-xl border",children:[t.jsx("label",{style:{color:n.text.secondary},className:"text-xs uppercase font-bold mb-2 block",children:"Add New Amount"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",value:w,onChange:H=>N(H.target.value),onKeyDown:H=>H.key==="Enter"&&Ke(),placeholder:"Enter amount...",style:{background:l?"rgba(15,18,39,0.8)":"#FFFFFF",color:n.text.primary,borderColor:n.border.primary},className:"flex-1 px-3 py-2 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400/50",autoFocus:!0}),t.jsx("button",{onClick:Ke,className:"px-4 py-2 rounded-lg text-xs font-bold hover:opacity-90 transition bg-emerald-500 text-white",children:"Add"}),t.jsx("button",{onClick:()=>{T(!1),N("")},style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary,borderColor:n.border.primary},className:"px-3 py-2 rounded-lg border text-xs font-semibold hover:opacity-80 transition",children:"Cancel"})]})]}),j==="custom"&&!D&&t.jsxs("div",{children:[t.jsx("label",{style:{color:n.text.primary},className:"font-semibold mb-2 block",children:"Enter Custom Amount"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{style:{color:n.text.tertiary},className:"absolute left-4 top-1/2 -translate-y-1/2 text-xl font-bold",children:""}),t.jsx("input",{type:"number",value:E,onChange:H=>A(H.target.value),placeholder:"Enter amount",min:"10",max:"10000",style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",color:n.text.primary,borderColor:n.border.primary},className:"w-full pl-12 pr-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-xl font-bold",autoFocus:!0})]}),t.jsx("p",{style:{color:n.text.tertiary},className:"text-xs mt-1",children:"Min: 10 | Max: 10,000"})]}),Z()>0&&!D&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-4 rounded-xl border",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{style:{color:n.text.secondary},children:"Amount to Load"}),t.jsxs("span",{className:"text-2xl font-bold text-emerald-500",children:["",Z().toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-emerald-500/20",children:[t.jsx("span",{style:{color:n.text.secondary},children:"New Balance"}),t.jsxs("span",{style:{color:n.text.primary},className:"font-semibold",children:["",(parseFloat(g.balance||0)+Z()).toLocaleString()]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>i(2),disabled:D,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80 disabled:opacity-50 disabled:cursor-not-allowed",children:" Back"}),t.jsxs("button",{onClick:te,disabled:Z()<=0||D,className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 bg-emerald-500 text-white",children:["Proceed ",t.jsx(Jl,{className:"w-5 h-5"})]})]})]}),o===4&&g&&t.jsxs("div",{className:"space-y-5 text-center",children:[t.jsxs("div",{style:{background:"rgba(251,191,36,0.2)"},className:"w-28 h-28 rounded-full flex flex-col items-center justify-center mx-auto",children:[t.jsx(pa,{className:"w-8 h-8 text-yellow-500"}),t.jsx("span",{className:"text-4xl font-bold text-yellow-500 mt-1",children:M})]}),t.jsxs("div",{children:[t.jsx("h3",{style:{color:n.text.primary},className:"text-xl font-bold",children:"Confirm Cash-In"}),t.jsxs("p",{style:{color:n.text.secondary},className:"mt-2",children:["Transaction will be processed in ",M," second",M!==1?"s":""]})]}),t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"rounded-xl border p-4 text-left space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},children:"User"}),t.jsxs("span",{style:{color:n.text.primary},className:"font-semibold",children:[g.firstName," ",g.lastName]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},children:"School ID"}),t.jsx("span",{style:{color:n.text.primary},className:"font-mono",children:g.schoolUId})]}),t.jsxs("div",{className:"flex justify-between pt-2 border-t border-dashed",style:{borderColor:n.border.primary},children:[t.jsx("span",{style:{color:n.text.secondary},children:"Amount"}),t.jsxs("span",{className:"text-2xl font-bold text-emerald-500",children:["",Z().toLocaleString()]})]})]}),t.jsx("button",{onClick:I,className:"w-full py-3 rounded-xl font-bold transition-all hover:opacity-90 bg-red-500 text-white",children:"Cancel"})]}),o===5&&F&&t.jsxs("div",{className:"text-center space-y-5",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto",children:t.jsx(ft,{className:"w-12 h-12 text-emerald-500"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-bold text-emerald-500",children:"Cash-In Successful!"}),t.jsx("p",{style:{color:n.text.secondary},className:"mt-2",children:"The balance has been loaded to the user's account"})]}),t.jsxs("div",{style:{background:l?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:n.border.primary},className:"rounded-xl border p-5 text-left space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"Transaction ID"}),t.jsx("span",{style:{color:n.text.primary},className:"font-mono font-semibold text-sm",children:F.transactionId||F.transaction_id})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"User"}),t.jsxs("span",{style:{color:n.text.primary},className:"font-semibold text-sm",children:[g.firstName," ",g.lastName]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"Amount Loaded"}),t.jsxs("span",{className:"font-bold text-emerald-500",children:["+",parseFloat(F.amount).toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between pt-2 border-t",style:{borderColor:n.border.primary},children:[t.jsx("span",{style:{color:n.text.secondary},className:"text-sm",children:"New Balance"}),t.jsxs("span",{style:{color:n.text.primary},className:"text-lg font-bold",children:["",parseFloat(F.newBalance||g.balance).toLocaleString()]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:se,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:"Cash-In Another"}),t.jsx("button",{onClick:K,className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 bg-emerald-500 text-white",children:"Done"})]})]})]}),t.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
          }
          .animate-fadeIn {
            animation: fadeIn 0.2s ease-out;
          }
        `})]})]})}function t4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState({todayCashIn:0,todayCashOut:0,todayTransactions:0,todayRefunds:0,todayRefundsCount:0,totalUsers:0,activeUsers:0,totalMerchants:0}),[n,l]=p.useState([]),[o,i]=p.useState(!0),c=p.useRef(null),[u,d]=p.useState(!1),[x,m]=p.useState(!1),[b,v]=p.useState(""),S=async()=>{try{const f=await J.get("/admin/treasury/dashboard");f&&s({todayCashIn:f.todayCashIn||0,todayCashOut:f.todayCashOut||0,todayTransactions:f.todayTransactions||0,todayRefundsCount:f.todayRefundsCount||0,totalUsers:f.totalUsers||0,activeUsers:f.activeUsers||0,totalMerchants:f.totalMerchants||0});const j=await J.get("/admin/treasury/transactions?limit=10");j!=null&&j.transactions&&l(j.transactions)}catch(f){console.error("Error loading dashboard:",f)}finally{i(!1)}};p.useEffect(()=>(S(),c.current=setInterval(S,5e3),()=>{c.current&&clearInterval(c.current)}),[]);const h=f=>{v(f),m(!1),d(!0)},y=()=>{S()},g=()=>{S()};return o?t.jsx("div",{style:{color:e.accent.primary},className:"text-center py-[60px]",children:"Loading dashboard..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Treasury Home"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Cash-in and User Registration operations with transaction monitoring  Auto-updates every 5 seconds"})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[t.jsx(Bl,{icon:"",label:"TODAY'S CASH-IN",value:`${(r.todayCashIn||0).toLocaleString()}`,subtitle:"loaded today",color:"#10B981",theme:e}),t.jsx(Bl,{icon:"",label:"TODAY'S TRANSACTIONS",value:r.todayTransactions||0,subtitle:"cash-ins today",color:"#3B82F6",theme:e}),t.jsx(Bl,{icon:"",label:"REGISTERED USERS",value:r.totalUsers||0,subtitle:`${r.activeUsers||0} active`,color:"#A855F7",theme:e}),t.jsx(Bl,{icon:"",label:"MERCHANTS",value:r.totalMerchants||0,subtitle:"registered",color:"#F59E0B",theme:e})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[t.jsxs("button",{onClick:()=>{v(""),m(!0)},style:{background:"linear-gradient(135deg, rgba(16,185,129,0.2) 0%, rgba(16,185,129,0.1) 100%)",borderColor:"rgba(16,185,129,0.3)"},className:"col-span-2 p-5 rounded-2xl border flex items-center gap-4 transition-all hover:scale-[1.01] hover:shadow-lg cursor-pointer",children:[t.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center text-2xl flex-shrink-0",style:{background:"rgba(16,185,129,0.2)"},children:""}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{className:"text-base font-bold text-emerald-500 m-0",children:"Cash-In for User"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs m-0 mt-1",children:"Load balance to NUCash account"})]})]}),t.jsxs("button",{onClick:()=>{v(""),d(!0)},style:{background:a?"linear-gradient(135deg, rgba(255,212,28,0.2) 0%, rgba(255,212,28,0.1) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.2) 0%, rgba(59,130,246,0.1) 100%)",borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"col-span-2 p-5 rounded-2xl border flex items-center gap-4 transition-all hover:scale-[1.01] hover:shadow-lg cursor-pointer",children:[t.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center text-2xl flex-shrink-0",style:{background:a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"},children:""}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{style:{color:e.accent.primary},className:"text-base font-bold m-0",children:"Register New User"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs m-0 mt-1",children:"Add student or employee to NUCash"})]})]})]}),t.jsx("div",{className:"flex-1 overflow-hidden flex flex-col min-h-0",children:t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden flex-1 flex flex-col",children:[t.jsx("div",{style:{borderColor:e.border.primary},className:"p-4 border-b flex justify-between items-center flex-shrink-0",children:t.jsxs("div",{children:[t.jsx("h3",{style:{color:e.accent.primary},className:"m-0 mb-1 text-base font-bold",children:" Recent Transactions"}),t.jsx("p",{style:{color:e.text.secondary},className:"m-0 text-xs",children:"Latest cash-in and cash-out activities"})]})}),t.jsx("div",{className:"p-4 overflow-y-auto flex-1",children:n.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-16",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{children:"No transactions yet today"})]}):t.jsx(Rh,{transactions:n,showHeader:!1,compact:!0})})]})}),t.jsx(Zj,{isOpen:u,onClose:()=>{d(!1),v("")},onSuccess:y,prefillRfid:b}),t.jsx(e4,{isOpen:x,onClose:()=>m(!1),onSuccess:g,onRegisterUser:h})]})}function Bl({icon:e,label:a,value:r,subtitle:s,color:n,theme:l}){return t.jsxs("div",{style:{background:l.bg.card,borderColor:l.border.primary},className:"p-4 rounded-2xl border relative overflow-hidden transition-all duration-300",children:[t.jsx("div",{className:"absolute right-3 top-3 text-[32px] opacity-15",children:e}),t.jsx("div",{style:{color:l.text.secondary},className:"text-[10px] font-bold uppercase tracking-wide mb-2",children:a}),t.jsx("div",{style:{color:l.text.primary},className:"text-2xl font-extrabold mb-1",children:r}),t.jsx("div",{className:"text-[10px] font-semibold inline-block py-[2px] px-[8px] rounded-lg",style:{color:n,background:`${n}20`},children:s})]})}const a4=e=>{const a=e.trim();if(/^\d+$/.test(a)){const s=parseInt(a,10);let n=s.toString(16).toUpperCase();n.length%2!==0&&(n="0"+n),n=n.padStart(8,"0");const o=(n.match(/.{2}/g)||[]).reverse().join("");return console.log(" RFID Conversion (CashIn Search):",{input:a,decimal:s,hexBigEndian:n,hexLittleEndian:o}),o}if(/^[0-9A-Fa-f]+$/.test(a)&&a.length%2===0){const n=(a.match(/.{2}/g)||[]).reverse().join("").toUpperCase();return console.log(" RFID Conversion (CashIn Search - already hex):",{input:a,hexBigEndian:a.toUpperCase(),hexLittleEndian:n}),n}return console.warn(" Unrecognized RFID format:",a),a};function r4(){var f;const e=Je(),{theme:a}=ne(),[r,s]=p.useState(""),[n,l]=p.useState(null),[o,i]=p.useState(""),[c,u]=p.useState(!1),[d,x]=p.useState(!1),[m,b]=p.useState(null),v=p.useRef(null),S=[50,100,200,500,1e3],h=async()=>{if(!r.trim()){$.error("Please enter a School ID or RFID");return}x(!0),l(null);try{let j=r.trim();/^\d+$/.test(j)?(j=a4(j),console.log(" Searching with converted RFID:",j)):console.log(" Searching with School ID:",j);const C=await J.get(`/admin/treasury/user/search?query=${encodeURIComponent(j)}`);C!=null&&C.user?(l(C.user),$.success("User found!")):$.error("User not found")}catch(j){$.error(j.message||"Failed to find user")}finally{x(!1)}},y=async()=>{if(!n){$.error("Please search for a user first");return}const j=parseFloat(o);if(!j||j<=0){$.error("Please enter a valid amount");return}if(j<10){$.error("Minimum cash-in is 10");return}if(j>1e4){$.error("Maximum cash-in is 10,000");return}u(!0);try{const C=await J.post("/admin/treasury/cashin",{userId:n._id||n.userId,amount:j});C!=null&&C.success?(b({userName:`${n.firstName} ${n.lastName}`,amount:j,newBalance:C.newBalance,transactionId:C.transactionId,timestamp:new Date().toLocaleString()}),$.success("Cash-in successful!")):$.error((C==null?void 0:C.message)||"Cash-in failed")}catch(C){$.error(C.message||"Cash-in failed")}finally{u(!1)}},g=()=>{var j;l(null),s(""),i(""),b(null),(j=v.current)==null||j.focus()};return m?t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:a.border.primary},className:"mb-[30px] border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:a.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Cash-In Complete"]}),t.jsx("p",{style:{color:a.text.secondary},className:"text-[13px] m-0",children:"Transaction processed successfully"})]}),t.jsx("div",{className:"max-w-md mx-auto w-full",children:t.jsxs("div",{style:{background:a.bg.card,borderColor:"rgba(16,185,129,0.5)"},className:"rounded-2xl border-2 overflow-hidden",children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, #10B981 0%, #059669 100%)"},className:"p-6 text-center",children:[t.jsx("div",{className:"text-5xl mb-3",children:""}),t.jsx("h3",{className:"text-white text-xl font-bold",children:"Cash-In Successful!"})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"User"}),t.jsx("span",{style:{color:a.text.primary},className:"font-semibold",children:m.userName})]}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"Amount"}),t.jsxs("span",{style:{color:"#10B981"},className:"font-bold text-xl",children:["+",m.amount.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"New Balance"}),t.jsxs("span",{style:{color:a.text.primary},className:"font-bold",children:["",(f=m.newBalance)==null?void 0:f.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"Transaction ID"}),t.jsx("span",{style:{color:a.text.secondary,fontFamily:"monospace"},className:"text-xs",children:m.transactionId})]}),t.jsxs("div",{className:"flex justify-between items-center py-3",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"Date & Time"}),t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:m.timestamp})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:()=>e("/admin/treasury/dashboard"),style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"flex-1 py-3 rounded-xl font-semibold border hover:opacity-80 transition",children:"Back to Home"}),t.jsx("button",{onClick:g,style:{background:a.accent.primary,color:a.accent.secondary},className:"flex-1 py-3 rounded-xl font-bold hover:opacity-90 transition",children:"New Cash-In"})]})]})]})})]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:a.border.primary},className:"mb-[30px] border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:a.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Cash-In"]}),t.jsx("p",{style:{color:a.text.secondary},className:"text-[13px] m-0",children:"Load balance to user accounts"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{style:{background:a.bg.card,borderColor:a.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("h3",{style:{color:a.text.primary},className:"text-lg font-bold mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""})," Find User"]}),t.jsxs("div",{className:"flex gap-3 mb-4",children:[t.jsx("input",{ref:v,type:"password",value:r,onChange:j=>s(j.target.value),onKeyDown:j=>j.key==="Enter"&&h(),placeholder:"Enter School ID or RFID...",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"flex-1 px-4 py-3 rounded-xl border text-sm focus:outline-none",autoFocus:!0}),t.jsx("button",{onClick:h,disabled:d,style:{background:a.accent.primary,color:a.accent.secondary},className:"px-6 py-3 rounded-xl font-bold text-sm hover:opacity-90 transition disabled:opacity-50",children:d?"Searching...":"Search"})]}),n&&t.jsxs("div",{style:{background:a.bg.tertiary,borderColor:a.border.primary},className:"p-5 rounded-xl border",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase font-bold mb-1",children:"User Found"}),t.jsxs("h4",{style:{color:a.text.primary},className:"text-xl font-bold",children:[n.firstName," ",n.lastName]}),t.jsxs("p",{style:{color:a.text.secondary},className:"text-sm",children:[n.schoolUId,"  ",n.role]})]}),t.jsx("div",{style:{background:n.isActive?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:n.isActive?"#10B981":"#EF4444"},className:"px-3 py-1 rounded-full text-xs font-bold",children:n.isActive?"ACTIVE":"INACTIVE"})]}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"pt-4 border-t",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase font-bold mb-1",children:"Current Balance"}),t.jsxs("p",{style:{color:"#10B981"},className:"text-3xl font-extrabold",children:["",(n.balance||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]}),!n&&!d&&t.jsxs("div",{style:{color:a.text.tertiary},className:"text-center py-10",children:[t.jsx("div",{className:"text-4xl mb-3",children:""}),t.jsx("p",{className:"text-sm",children:"Search for a user to begin cash-in"})]})]}),t.jsxs("div",{style:{background:a.bg.card,borderColor:a.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("h3",{style:{color:a.text.primary},className:"text-lg font-bold mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""})," Enter Amount"]}),t.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:S.map(j=>t.jsxs("button",{onClick:()=>i(j.toString()),style:{background:o===j.toString()?a.accent.primary:a.bg.tertiary,color:o===j.toString()?a.accent.secondary:a.text.primary,borderColor:a.border.primary},className:"py-3 rounded-xl font-bold text-sm border hover:opacity-80 transition",children:["",j]},j))}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{style:{color:a.text.secondary},className:"text-xs uppercase font-bold mb-2 block",children:"Custom Amount"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{style:{color:a.text.secondary},className:"absolute left-4 top-1/2 -translate-y-1/2 text-xl font-bold",children:""}),t.jsx("input",{type:"number",value:o,onChange:j=>i(j.target.value),placeholder:"0.00",min:"0",step:"0.01",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full pl-10 pr-4 py-4 rounded-xl border text-2xl font-bold focus:outline-none"})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:g,style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"flex-1 py-4 rounded-xl font-bold text-sm border hover:opacity-80 transition",children:"Reset"}),t.jsx("button",{onClick:y,disabled:!n||!o||c,style:{background:"#10B981",color:"#FFFFFF"},className:"flex-1 py-4 rounded-xl font-bold text-sm hover:opacity-90 transition disabled:opacity-50",children:c?"Processing...":`Load ${o||"0.00"}`})]}),n&&o&&parseFloat(o)>0&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"mt-4 p-4 rounded-xl border",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs mb-1",children:"New Balance After Cash-In"}),t.jsxs("p",{style:{color:"#10B981"},className:"text-2xl font-extrabold",children:["",((n.balance||0)+parseFloat(o||0)).toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]})]})]})}const s4=e=>{const a=e.trim();if(/^\d+$/.test(a)){const s=parseInt(a,10);let n=s.toString(16).toUpperCase();n.length%2!==0&&(n="0"+n),n=n.padStart(8,"0");const o=(n.match(/.{2}/g)||[]).reverse().join("");return console.log(" RFID Conversion (Registration):",{input:a,decimal:s,hexBigEndian:n,hexLittleEndian:o}),o}if(/^[0-9A-Fa-f]+$/.test(a)&&a.length%2===0){const n=(a.match(/.{2}/g)||[]).reverse().join("").toUpperCase();return console.log(" RFID Conversion (Registration - already hex):",{input:a,hexBigEndian:a.toUpperCase(),hexLittleEndian:n}),n}return console.warn(" Unrecognized RFID format:",a),a};function n4(){const e=Je(),{theme:a}=ne(),r=p.useRef(null),[s,n]=p.useState({rfidUId:"",schoolUId:"",firstName:"",lastName:"",middleName:"",email:"",role:"student",pin:""}),[l,o]=p.useState(!1),[i,c]=p.useState(!1),[u,d]=p.useState(null),x=(S,h)=>{n(y=>({...y,[S]:h}))},m=()=>s.rfidUId.trim()?s.schoolUId.trim()?s.firstName.trim()?s.lastName.trim()?s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)?!s.pin||s.pin.length<4?($.error("PIN must be at least 4 digits"),!1):!0:($.error("Please enter a valid email address"),!1):($.error("Email is required"),!1):($.error("Last name is required"),!1):($.error("First name is required"),!1):($.error("School ID is required"),!1):($.error("RFID is required"),!1),b=async()=>{if(!m())return;const S=s4(s.rfidUId);console.log(" Sending registration with RFID:",S),o(!0);try{const h=await J.post("/admin/treasury/register",{rfidUId:S,schoolUId:s.schoolUId.trim(),firstName:s.firstName.trim(),lastName:s.lastName.trim(),middleName:s.middleName.trim(),email:s.email.trim().toLowerCase(),role:s.role,pin:s.pin});h!=null&&h.success?(d(h.user),c(!0),$.success("User registered successfully!")):$.error((h==null?void 0:h.message)||"Failed to register user")}catch(h){$.error(h.message||"Failed to register user")}finally{o(!1)}},v=()=>{var S;n({rfidUId:"",schoolUId:"",firstName:"",lastName:"",middleName:"",email:"",role:"student",pin:""}),c(!1),d(null),(S=r.current)==null||S.focus()};return i?t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:a.border.primary},className:"mb-[30px] border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:a.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Registration Complete"]}),t.jsx("p",{style:{color:a.text.secondary},className:"text-[13px] m-0",children:"New user has been registered successfully"})]}),t.jsx("div",{className:"max-w-md mx-auto w-full",children:t.jsxs("div",{style:{background:a.bg.card,borderColor:"rgba(16,185,129,0.5)"},className:"rounded-2xl border-2 overflow-hidden",children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, #10B981 0%, #059669 100%)"},className:"p-6 text-center",children:[t.jsx("div",{className:"text-5xl mb-3",children:""}),t.jsx("h3",{className:"text-white text-xl font-bold",children:"Registration Successful!"})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"Name"}),t.jsxs("span",{style:{color:a.text.primary},className:"font-semibold",children:[u==null?void 0:u.firstName," ",u==null?void 0:u.lastName]})]}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"School ID"}),t.jsx("span",{style:{color:a.text.primary},className:"font-semibold",children:u==null?void 0:u.schoolUId})]}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"Email"}),t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:u==null?void 0:u.email})]}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"flex justify-between items-center py-3 border-b",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"Role"}),t.jsx("span",{style:{color:a.text.primary},className:"capitalize",children:u==null?void 0:u.role})]}),t.jsxs("div",{className:"flex justify-between items-center py-3",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-sm",children:"Balance"}),t.jsx("span",{style:{color:a.accent.primary},className:"font-bold",children:"0.00"})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:v,style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"flex-1 py-3 rounded-xl font-semibold border hover:opacity-80 transition",children:"Register Another"}),t.jsx("button",{onClick:()=>e("/admin/treasury/cashin"),style:{background:a.accent.primary,color:a.accent.secondary},className:"flex-1 py-3 rounded-xl font-bold hover:opacity-90 transition",children:"Cash In Now"})]})]})]})})]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:a.border.primary},className:"mb-[30px] border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:a.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Register User"]}),t.jsx("p",{style:{color:a.text.secondary},className:"text-[13px] m-0",children:"Create a new NUCash account for a student or employee"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{style:{background:a.bg.card,borderColor:a.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("h3",{style:{color:a.text.primary},className:"text-lg font-bold mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""})," Identification"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:["RFID ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{ref:r,type:"password",value:s.rfidUId,onChange:S=>x("rfidUId",S.target.value),placeholder:"Scan or enter RFID",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border font-mono text-sm focus:outline-none",autoFocus:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:["School ID ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:s.schoolUId,onChange:S=>x("schoolUId",S.target.value),placeholder:"e.g., 2024-12345",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:["First Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:s.firstName,onChange:S=>x("firstName",S.target.value),placeholder:"Juan",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:["Last Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:s.lastName,onChange:S=>x("lastName",S.target.value),placeholder:"Dela Cruz",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:"Middle Name"}),t.jsx("input",{type:"text",value:s.middleName,onChange:S=>x("middleName",S.target.value),placeholder:"Optional",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:["Email ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"email",value:s.email,onChange:S=>x("email",S.target.value),placeholder:"juan.delacruz@nu.edu.ph",style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none"})]})]}),t.jsxs("div",{style:{background:a.bg.card,borderColor:a.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("h3",{style:{color:a.text.primary},className:"text-lg font-bold mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""})," Account Settings"]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-3",children:"User Type"}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:["student","employee"].map(S=>t.jsx("button",{onClick:()=>x("role",S),style:{background:s.role===S?a.accent.primary:a.bg.tertiary,color:s.role===S?a.accent.secondary:a.text.primary,borderColor:a.border.primary},className:"py-4 rounded-xl font-bold text-sm border capitalize hover:opacity-80 transition",children:S==="student"?" Student":" Employee"},S))})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("label",{style:{color:a.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:["PIN ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"password",value:s.pin,onChange:S=>x("pin",S.target.value),placeholder:"Enter 4-6 digit PIN",maxLength:6,style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none text-center tracking-widest"}),t.jsx("p",{style:{color:a.text.muted},className:"text-xs mt-2",children:"User will use this PIN to login"})]}),t.jsxs("div",{className:"flex gap-3 mt-8",children:[t.jsx("button",{onClick:()=>e("/admin/treasury/dashboard"),style:{background:a.bg.tertiary,color:a.text.primary,borderColor:a.border.primary},className:"flex-1 py-4 rounded-xl font-bold text-sm border hover:opacity-80 transition",children:"Cancel"}),t.jsx("button",{onClick:b,disabled:l,style:{background:a.accent.primary,color:a.accent.secondary},className:"flex-1 py-4 rounded-xl font-bold text-sm hover:opacity-90 transition disabled:opacity-50",children:l?"Registering...":"Register User"})]})]})]})]})}function Lx(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(""),[c,u]=p.useState(""),[d,x]=p.useState(""),[m,b]=p.useState(""),v=p.useRef(null),S=async(g=!1)=>{try{g||l(!0);const f=new URLSearchParams;f.append("limit","100"),c&&(c==="refunded"?f.append("status","Refunded"):f.append("transactionType",c)),o&&f.append("search",o),d&&f.append("startDate",d),m&&f.append("endDate",m);const j=await J.get(`/admin/treasury/transactions?${f}`);j!=null&&j.transactions&&s(j.transactions)}catch{g||$.error("Failed to load transactions")}finally{g||l(!1)}};p.useEffect(()=>(S(),v.current=setInterval(()=>S(!0),1e4),()=>{v.current&&clearInterval(v.current)}),[c,o,d,m]);const h=()=>{const g=y.map(f=>({Date:f.createdAt?new Date(f.createdAt).toLocaleDateString():f.date||"",Time:f.createdAt?new Date(f.createdAt).toLocaleTimeString():f.time||"","ID Number":f.idNumber||f.schoolUId||"",Name:f.userName||"",Type:f.transactionType==="credit"?"Cash-In":"Payment",Status:f.status||"Completed",Amount:f.amount,"Processed By":f.transactionType==="credit"?f.adminName||f.processedBy||"Treasury":"","Transaction ID":f.transactionId||f._id||""}));Ft(g,"transactions")},y=r.filter(g=>{var j,C,E,A,M,B,F,L;if(!o)return!0;const f=o.toLowerCase();return((j=g.transactionId)==null?void 0:j.toLowerCase().includes(f))||((C=g._id)==null?void 0:C.toLowerCase().includes(f))||((E=g.idNumber)==null?void 0:E.toLowerCase().includes(f))||((A=g.schoolUId)==null?void 0:A.toLowerCase().includes(f))||((M=g.userName)==null?void 0:M.toLowerCase().includes(f))||((B=g.businessName)==null?void 0:B.toLowerCase().includes(f))||((F=g.adminName)==null?void 0:F.toLowerCase().includes(f))||((L=g.processedBy)==null?void 0:L.toLowerCase().includes(f))});return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{className:"mb-6 border-b-2 pb-5",style:{borderColor:a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"},children:[t.jsxs("div",{className:"mb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Transactions"]}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:["Showing ",y.length," transactions  Auto-refreshes every 10s"]})]}),t.jsxs("div",{className:"flex gap-3 items-end flex-wrap",children:[t.jsx(Ot,{value:o,onChange:i,placeholder:"Search by ID, name, transaction ID..."}),t.jsx(Jt,{value:c,onChange:u,label:"Type",options:[{value:"credit",label:"Cash-In"},{value:"debit",label:"Payment"},{value:"refunded",label:"Refunded"}]}),t.jsx(hr,{startDate:d,endDate:m,onStartChange:x,onEndChange:b}),t.jsx($t,{onClick:h,disabled:y.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading transactions..."]}):y.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{children:"No transactions found"})]}):t.jsx(Rh,{transactions:y,showHeader:!1})})]})}function l4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState([]),[o,i]=p.useState(!0),[c,u]=p.useState(""),[d,x]=p.useState("all"),[m,b]=p.useState(null),v=p.useRef(null),S=async()=>{try{const E=await J.get("/admin/treasury/merchants?limit=999");E!=null&&E.merchants&&s(E.merchants)}catch{console.error("Failed to fetch stats")}},h=async(E=!1)=>{try{E||i(!0);const A=new URLSearchParams;d!=="all"&&A.append("isActive",d==="active"),c&&A.append("search",c);const M=await J.get(`/admin/treasury/merchants?${A}`);M!=null&&M.merchants&&l(M.merchants)}catch{E||$.error("Failed to load merchants")}finally{E||i(!1)}};p.useEffect(()=>(S(),h(),v.current=setInterval(()=>{S(),h(!0)},3e4),()=>{v.current&&clearInterval(v.current)}),[d,c]);const y=n,g=r.length,f=r.filter(E=>E.isActive!==!1).length,j=r.reduce((E,A)=>E+(A.totalCollections||0),0),C=r.reduce((E,A)=>E+(A.todayCollections||0),0);return t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Merchants"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"View merchant accounts and transaction metrics"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-5",children:[t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(59, 130, 246, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(59, 130, 246, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(Jr,{className:"w-6 h-6 text-blue-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Total Merchants"}),t.jsx("p",{className:"text-2xl font-bold text-blue-500",children:g})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(16, 185, 129, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(16, 185, 129, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(Ls,{className:"w-6 h-6 text-emerald-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Active"}),t.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:f})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(251, 191, 36, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(251, 191, 36, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(ul,{className:"w-6 h-6 text-yellow-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Total Collections"}),t.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:["",j.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(139, 92, 246, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(139, 92, 246, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(ci,{className:"w-6 h-6 text-violet-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Today's Collections"}),t.jsxs("p",{className:"text-2xl font-bold text-violet-500",children:["",C.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.8)":e.bg.card,borderColor:e.accent.primary},className:"rounded-xl border-2 p-3 mb-5 flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(Zr,{style:{color:e.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search merchants...",value:c,onChange:E=>u(E.target.value),style:{background:"transparent",color:e.text.primary,borderColor:"transparent"},className:"w-full pl-10 pr-4 py-2.5 rounded-lg text-sm focus:outline-none placeholder:text-gray-500"})]}),t.jsx("div",{style:{background:e.border.primary},className:"hidden sm:block w-px h-8"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","active","inactive"].map(E=>t.jsx("button",{onClick:()=>x(E),style:{background:d===E?e.accent.primary:a?"rgba(30,35,71,0.8)":"#F9FAFB",color:d===E?a?"#181D40":"#FFFFFF":e.text.primary,borderColor:e.border.primary},className:"px-3 py-2 rounded-lg font-semibold text-xs border hover:opacity-80 transition capitalize",children:E},E))})]}),t.jsx("div",{className:"mb-4",children:t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:["Showing ",t.jsx("span",{style:{color:e.accent.primary},className:"font-bold",children:y.length})," of ",r.length," merchants"]})}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:o?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading merchants..."]}):y.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{className:"font-semibold",children:"No merchants found"}),t.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your search or filters"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:y.map(E=>t.jsx(o4,{merchant:E,theme:e,isDarkMode:a,onView:()=>b(E)},E._id||E.merchantId))})})}),m&&t.jsx(i4,{merchant:m,theme:e,isDarkMode:a,onClose:()=>b(null)})]})}function o4({merchant:e,theme:a,isDarkMode:r,onView:s}){const n=e.isActive!==!1,l=e.type==="motorpool";return t.jsxs("div",{style:{background:r?"rgba(30,35,71,0.6)":a.bg.tertiary,borderColor:l?"rgba(139, 92, 246, 0.4)":a.border.primary},className:"p-5 rounded-xl border cursor-pointer hover:opacity-90 transition relative overflow-hidden",onClick:s,children:[l&&t.jsxs("div",{style:{background:"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)"},className:"absolute top-0 right-0 px-3 py-1 rounded-bl-lg text-white text-xs font-bold flex items-center gap-1",children:[t.jsx(br,{className:"w-3 h-3"})," Shuttle"]}),t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsx("div",{style:{background:l?"rgba(139,92,246,0.15)":"rgba(255,212,28,0.15)",color:l?"#8B5CF6":"#FFD41C"},className:"px-3 py-1 rounded-lg text-xs font-bold",children:e.merchantId||"N/A"}),t.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:n?"#10B981":"#EF4444"}})]}),t.jsx("h4",{style:{color:a.text.primary},className:"font-bold text-lg mb-2",children:e.businessName||e.name||"Unknown"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-xs",children:"Total Collections"}),t.jsxs("span",{style:{color:"#3B82F6"},className:"font-bold text-sm",children:["",(e.totalCollections||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-xs",children:"Transactions"}),t.jsx("span",{style:{color:a.text.primary},className:"font-bold text-sm",children:(e.totalTransactions||0).toLocaleString()})]})]}),t.jsx("button",{style:{background:l?"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)":a.accent.primary,color:l?"#FFFFFF":a.accent.secondary},className:"w-full mt-4 py-2 rounded-lg font-bold text-sm hover:opacity-90 transition",children:"View Details"})]})}function i4({merchant:e,theme:a,isDarkMode:r,onClose:s}){const[n,l]=p.useState("metrics"),[o,i]=p.useState(!0),[c,u]=p.useState(null),[d,x]=p.useState([]),[m,b]=p.useState(null),[v,S]=p.useState(1),[h,y]=p.useState(1),g=e.type==="motorpool";p.useEffect(()=>{f()},[e.merchantId,v]);const f=async()=>{var E;try{i(!0);const A=await J.get(`/admin/treasury/merchants/${e.merchantId}/details?page=${v}&limit=10`);A!=null&&A.success&&(u(A.merchant),b(A.metrics),x(A.transactions||[]),y(((E=A.pagination)==null?void 0:E.pages)||1))}catch{$.error("Failed to load merchant details")}finally{i(!1)}},j=E=>E?new Date(E).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",C=[{id:"metrics",label:"Metrics & Info",icon:Ls},{id:"transactions",label:"Recent Transactions",icon:pa}];return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:s,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:r?"#1E2347":"#FFFFFF",borderColor:a.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-5xl max-h-[85vh] overflow-hidden animate-fadeIn",onClick:E=>E.stopPropagation(),children:[t.jsxs("div",{style:{background:g?"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)":`linear-gradient(135deg, ${a.accent.primary} 0%, ${r?"#B8860B":"#2563EB"} 100%)`},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(255,255,255,0.2)"},className:"w-14 h-14 rounded-full flex items-center justify-center",children:g?t.jsx(br,{className:"w-7 h-7 text-white"}):t.jsx(Jr,{className:"w-7 h-7 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:e.businessName||e.name}),t.jsx("p",{className:"text-white/80 text-sm font-mono",children:e.merchantId})]})]}),t.jsx("button",{onClick:s,className:"text-white/80 hover:text-white transition-colors",children:t.jsx(Tt,{className:"w-6 h-6"})})]}),t.jsx("div",{style:{background:r?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:a.border.primary},className:"px-6 py-3 border-b flex gap-2",children:C.map(E=>{const A=E.icon;return t.jsxs("button",{onClick:()=>l(E.id),style:{background:n===E.id?g?"#8B5CF6":a.accent.primary:"transparent",color:n===E.id?g||!r?"#FFFFFF":"#181D40":a.text.secondary,borderColor:n===E.id?"transparent":a.border.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm border flex items-center gap-2 transition-all hover:opacity-80",children:[t.jsx(A,{className:"w-4 h-4"}),E.label]},E.id)})}),t.jsx("div",{className:"p-6 max-h-[55vh] overflow-y-auto",children:o?t.jsxs("div",{style:{color:a.accent.primary},className:"text-center py-10",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${a.accent.primary} transparent transparent transparent`}}),"Loading details..."]}):n==="metrics"?t.jsx(c4,{merchant:c||e,metrics:m,theme:a,isDarkMode:r,isMotorpool:g}):t.jsx(d4,{transactions:d,theme:a,isDarkMode:r,isMotorpool:g,formatDate:j,currentPage:v,totalPages:h,onPageChange:S})})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
      `})]})}function c4({merchant:e,metrics:a,theme:r,isDarkMode:s,isMotorpool:n}){const l=n?"#8B5CF6":r.accent.primary;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"Today's Collections"}),t.jsxs("p",{className:"text-2xl font-bold text-emerald-500",children:["",((a==null?void 0:a.todayCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.todayTransactions)||0," transactions"]})]}),t.jsxs("div",{style:{background:"rgba(59,130,246,0.1)",borderColor:"rgba(59,130,246,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"This Week"}),t.jsxs("p",{className:"text-2xl font-bold text-blue-500",children:["",((a==null?void 0:a.weekCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.weekTransactions)||0," transactions"]})]}),t.jsxs("div",{style:{background:"rgba(251,191,36,0.1)",borderColor:"rgba(251,191,36,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"This Month"}),t.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:["",((a==null?void 0:a.monthCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.monthTransactions)||0," transactions"]})]}),t.jsxs("div",{style:{background:n?"rgba(139,92,246,0.1)":s?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",borderColor:n?"rgba(139,92,246,0.3)":s?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"All Time"}),t.jsxs("p",{className:"text-2xl font-bold",style:{color:l},children:["",((a==null?void 0:a.totalCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.totalTransactions)||0," transactions"]})]})]}),t.jsxs("div",{children:[t.jsxs("h4",{style:{color:r.text.primary},className:"font-bold mb-3 flex items-center gap-2",children:[n?t.jsx(br,{className:"w-4 h-4"}):t.jsx(Jr,{className:"w-4 h-4"}),n?"Motorpool Info":"Merchant Info"]}),t.jsxs("div",{style:{background:s?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:r.border.primary},className:"rounded-xl border p-4 space-y-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Status"}),t.jsx("span",{style:{background:e.isActive!==!1?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:e.isActive!==!1?"#10B981":"#EF4444"},className:"px-2 py-0.5 rounded text-xs font-bold",children:e.isActive!==!1?"Active":"Inactive"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Type"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold capitalize",children:e.type||"Merchant"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Email"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm",children:e.email||"N/A"})]}),!n&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Contact Person"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm",children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:"N/A"})]}),e.licenseNumber&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"License #"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-mono",children:e.licenseNumber})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Registered"}),t.jsx("span",{style:{color:r.text.muted},className:"text-sm",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})]})]})]})]})}function d4({transactions:e,theme:a,isDarkMode:r,isMotorpool:s,formatDate:n,currentPage:l,totalPages:o,onPageChange:i}){return e.length===0?t.jsxs("div",{style:{color:a.text.tertiary},className:"text-center py-10",children:[t.jsx(pa,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{className:"font-semibold",children:"No transactions yet"}),t.jsx("p",{className:"text-sm mt-1",children:"Transactions will appear here once made"})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{style:{background:r?"rgba(15,18,39,0.3)":"#FFFFFF",borderColor:a.border.primary},className:"rounded-xl border overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{style:{background:r?"rgba(15,18,39,0.8)":"#F9FAFB",borderColor:a.border.primary},children:t.jsxs("tr",{className:"border-b",children:[t.jsx("th",{style:{color:a.text.secondary},className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"User"}),t.jsx("th",{style:{color:a.text.secondary},className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"Description"}),t.jsx("th",{style:{color:a.text.secondary},className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"Date & Time"}),t.jsx("th",{style:{color:a.text.secondary},className:"px-4 py-3 text-right text-xs font-bold uppercase tracking-wider",children:"Amount"}),t.jsx("th",{style:{color:a.text.secondary},className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider",children:"Status"})]})}),t.jsx("tbody",{children:e.map((c,u)=>{const d=c.status==="Refunded",x=c.status==="Completed";return t.jsxs("tr",{style:{borderColor:a.border.primary,background:r?u%2===0?"rgba(30,35,71,0.3)":"rgba(15,18,39,0.3)":u%2===0?"#FFFFFF":"#F9FAFB"},className:"border-b hover:opacity-80 transition-opacity",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("p",{style:{color:a.text.primary},className:"font-semibold text-sm",children:c.userName||"Unknown User"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("div",{style:{background:d?"rgba(239,68,68,0.2)":s?"rgba(139,92,246,0.2)":"rgba(16,185,129,0.2)"},className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5",children:d?t.jsx(pd,{className:"w-4 h-4 text-red-500"}):s?t.jsx(br,{className:"w-4 h-4 text-violet-500"}):t.jsx(ul,{className:"w-4 h-4 text-emerald-500"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{style:{color:d?"#EF4444":a.text.primary},className:"text-sm font-medium break-words",children:c.itemDescription||"Payment"}),s&&c.transactionId&&t.jsxs("p",{style:{color:a.text.muted},className:"text-xs font-mono mt-1",children:["TXN: ",c.transactionId]})]})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.primary},className:"text-sm font-semibold whitespace-nowrap",children:new Date(c.timestamp||c.createdAt).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"})}),t.jsx("p",{style:{color:a.text.muted},className:"text-xs whitespace-nowrap mt-0.5",children:new Date(c.timestamp||c.createdAt).toLocaleTimeString("en-PH",{hour:"2-digit",minute:"2-digit"})})]})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsxs("p",{className:`font-bold text-base ${d?"text-red-500":"text-emerald-500"}`,children:[d?"-":"+","",(c.amount||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("div",{className:"flex justify-center",children:t.jsx("span",{style:{background:d?"rgba(239,68,68,0.2)":x?"rgba(16,185,129,0.2)":"rgba(251,191,36,0.2)",color:d?"#EF4444":x?"#10B981":"#F59E0B"},className:"px-2.5 py-1 rounded-md text-xs font-bold whitespace-nowrap",children:c.status||"Completed"})})})]},c._id||u)})})]})})}),o>1&&t.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[t.jsx("button",{onClick:()=>i(Math.max(1,l-1)),disabled:l===1,style:{background:r?"rgba(71,85,105,0.5)":"#E5E7EB",color:a.text.primary,borderColor:a.border.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm border disabled:opacity-50 transition hover:opacity-80",children:"Previous"}),t.jsxs("span",{style:{color:a.text.secondary,background:r?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:a.border.primary},className:"px-4 py-2 text-sm border rounded-lg flex items-center",children:["Page ",l," of ",o]}),t.jsx("button",{onClick:()=>i(Math.min(o,l+1)),disabled:l===o,style:{background:r?"rgba(71,85,105,0.5)":"#E5E7EB",color:a.text.primary,borderColor:a.border.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm border disabled:opacity-50 transition hover:opacity-80",children:"Next"})]})]})}function u4(){var se,ce,ae,oe,he,Ke,ct,dt,ve,H;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState("all"),[c,u]=p.useState(""),[d,x]=p.useState(""),[m,b]=p.useState(""),[v,S]=p.useState(""),[h,y]=p.useState(null),[g,f]=p.useState(!1),[j,C]=p.useState(!1),[E,A]=p.useState(""),[M,B]=p.useState(!1),[F,L]=p.useState(1),[k,U]=p.useState("details"),[D,_]=p.useState(""),[z,q]=p.useState(!1),w=15,N=p.useRef(null),R=async(X=!1)=>{try{X||l(!0);const re=new URLSearchParams;d&&re.append("status",d),c&&re.append("search",c);const me=await J.get(`/admin/treasury/concerns?${re}`);me!=null&&me.concerns&&s(me.concerns)}catch{X||$.error("Failed to load concerns")}finally{X||l(!1)}};p.useEffect(()=>(R(),N.current=setInterval(()=>R(!0),3e4),()=>{N.current&&clearInterval(N.current)}),[d,c]),p.useEffect(()=>{L(1)},[c,d,o,m,v]);const T=async X=>{var re;if(console.log(" Opening concern:",{id:X._id,hasNotes:!!X.notes,notesCount:((re=X.notes)==null?void 0:re.length)||0,notes:X.notes}),X.status==="pending"&&X.submissionType!=="feedback")try{const me=JSON.parse(localStorage.getItem("adminData")||"{}");await J.patch(`/admin/treasury/concerns/${X._id}/status`,{status:"in_progress",adminName:me.firstName?`${me.firstName} ${me.lastName||""}`.trim():"Treasury Admin"}),X.status="in_progress"}catch(me){console.error("Failed to update status:",me)}y(X),U("details"),_(""),f(!0),console.log(" selectedConcern set:",{hasNotes:!!X.notes,notesArray:X.notes})},O=X=>{A(""),f(!1),C(!0)},V=async()=>{var X,re,me,we,Oe;if(!D.trim()){$.error("Please enter a note message");return}q(!0);try{const Ee=JSON.parse(localStorage.getItem("adminData")||"{}"),yr=Ee.firstName?`${Ee.firstName} ${Ee.lastName||""}`.trim():"Treasury Admin";console.log(" Sending note to:",h._id);const rt=await J.post(`/admin/treasury/concerns/${h._id}/note`,{note:D.trim(),adminName:yr}),ze=(rt==null?void 0:rt.data)||rt;console.log(" Response received:",{success:ze==null?void 0:ze.success,notesCount:((re=(X=ze==null?void 0:ze.concern)==null?void 0:X.notes)==null?void 0:re.length)||0}),ze!=null&&ze.success?($.success("Note sent successfully!"),_(""),ze.concern&&(console.log(" Updating with",(me=ze.concern.notes)==null?void 0:me.length,"notes"),y(ze.concern),U("notes")),R(!0)):$.error((ze==null?void 0:ze.message)||"Failed to send note")}catch(Ee){console.error(" Send note error:",Ee),$.error(((Oe=(we=Ee==null?void 0:Ee.response)==null?void 0:we.data)==null?void 0:Oe.message)||(Ee==null?void 0:Ee.message)||"Failed to send note")}finally{q(!1)}},P=async()=>{if(!E.trim()){$.error("Please provide a resolution message");return}B(!0);try{const X=JSON.parse(localStorage.getItem("adminData")||"{}"),re=await J.patch(`/admin/treasury/concerns/${h._id}/status`,{status:"resolved",reply:E.trim(),adminName:X.firstName?`${X.firstName} ${X.lastName||""}`.trim():"Treasury Admin"});re!=null&&re.success&&($.success("Concern resolved! User has been notified via email."),C(!1),f(!1),R(!0))}catch(X){$.error(X.message||"Failed to resolve concern")}finally{B(!1)}},W=()=>{const X=Z.map(re=>{var me,we;return{ID:((me=re._id)==null?void 0:me.slice(-8))||"",Type:re.submissionType||"assistance",User:(we=re.user)!=null&&we.firstName?`${re.user.firstName} ${re.user.lastName||""}`:re.userName||"",Subject:re.subject||"",Status:re.status||"pending",Priority:re.priority||"medium",Rating:re.rating||"",Date:re.createdAt?new Date(re.createdAt).toLocaleDateString():""}});Ft(X,"treasury_concerns")},Z=r.filter(X=>{var re,me,we,Oe,Ee,yr,rt,ze;if(o==="assistance"&&X.submissionType!=="assistance"||o==="feedback"&&X.submissionType!=="feedback")return!1;if(c){const ga=c.toLowerCase();if(!(((re=X._id)==null?void 0:re.toLowerCase().includes(ga))||((me=X.subject)==null?void 0:me.toLowerCase().includes(ga))||((we=X.message)==null?void 0:we.toLowerCase().includes(ga))||((Ee=(Oe=X.user)==null?void 0:Oe.firstName)==null?void 0:Ee.toLowerCase().includes(ga))||((rt=(yr=X.user)==null?void 0:yr.lastName)==null?void 0:rt.toLowerCase().includes(ga))||((ze=X.userName)==null?void 0:ze.toLowerCase().includes(ga))))return!1}if(d&&X.status!==d)return!1;if(m||v){const ga=new Date(X.createdAt);if(m&&ga<new Date(m)||v&&ga>new Date(v+"T23:59:59"))return!1}return!0}),te=Math.ceil(Z.length/w),I=(F-1)*w,Y=Z.slice(I,I+w),G=X=>{switch(X){case"pending":return"#FBBF24";case"in_progress":return"#3B82F6";case"resolved":return"#10B981";default:return e.text.secondary}},K=X=>{if(X.submissionType!=="assistance"||X.status==="resolved")return null;const re=new Date,me=new Date(X.createdAt),we=Math.floor((re-me)/(1e3*60*60*24));let Oe=0,Ee="transparent",yr=e.text.primary,rt="",ze="";return we<1?(Oe=0,Ee="transparent",rt="New",ze="#10B981"):we>=1&&we<3?(Oe=1,Ee="rgba(251, 191, 36, 0.1)",rt=`${we}d old`,ze="#FBBF24"):we>=3&&we<5?(Oe=2,Ee="rgba(249, 115, 22, 0.15)",rt=`${we}d old`,ze="#F97316"):we>=5&&we<7?(Oe=3,Ee="rgba(234, 88, 12, 0.2)",rt=`${we}d old`,ze="#EA580C"):(Oe=4,Ee="rgba(239, 68, 68, 0.25)",rt=`${we}d old`,ze="#EF4444"),{ageInDays:we,level:Oe,backgroundColor:Ee,textColor:yr,badgeText:rt,badgeColor:ze}};return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading concerns..."]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("div",{className:"mb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Concerns & Feedback"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:Z.length>0?`Showing ${I+1}-${Math.min(I+w,Z.length)} of ${Z.length}  Page ${F} of ${te}`:`Manage user concerns and feedback  Total: ${r.length}`})]}),t.jsxs("div",{className:"flex gap-2 mb-5",children:[t.jsxs("button",{onClick:()=>i("all"),style:{padding:"10px 20px",background:o==="all"?"rgba(255,212,28,0.2)":"transparent",border:`2px solid ${o==="all"?e.accent.primary:"rgba(255,212,28,0.3)"}`,borderRadius:"8px",color:o==="all"?e.accent.primary:e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["All (",r.length,")"]}),t.jsxs("button",{onClick:()=>i("assistance"),style:{padding:"10px 20px",background:o==="assistance"?"rgba(59,130,246,0.2)":"transparent",border:`2px solid ${o==="assistance"?"#3B82F6":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:o==="assistance"?"#3B82F6":e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Assistance (",r.filter(X=>X.submissionType==="assistance"||!X.submissionType).length,")"]}),t.jsxs("button",{onClick:()=>i("feedback"),style:{padding:"10px 20px",background:o==="feedback"?"rgba(34,197,94,0.2)":"transparent",border:`2px solid ${o==="feedback"?"#22C55E":"rgba(34,197,94,0.3)"}`,borderRadius:"8px",color:o==="feedback"?"#22C55E":e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Feedback (",r.filter(X=>X.submissionType==="feedback").length,")"]})]}),t.jsxs("div",{className:"flex gap-3 items-end flex-wrap",children:[t.jsx(Ot,{value:c,onChange:u,placeholder:"Search by ID, user, subject..."}),o!=="feedback"&&t.jsx(Jt,{value:d,onChange:x,label:"Status",options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"}]}),t.jsx(hr,{startDate:m,endDate:v,onStartChange:b,onEndChange:S}),t.jsx($t,{onClick:W,disabled:Z.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:Z.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{children:"No concerns found"})]}):t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},children:"ID"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"User"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Subject"}),o==="all"&&t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Type"}),o==="feedback"?t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Rating"}):t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Date"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-right p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:Y.map(X=>{var me,we,Oe,Ee;const re=K(X);return t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`,background:re?re.backgroundColor:"transparent"},className:"hover:bg-white/5 transition",children:[t.jsxs("td",{style:{color:e.text.primary},className:"p-4 font-mono text-xs",children:[(me=X._id)==null?void 0:me.slice(-8),re&&re.badgeText&&t.jsx("span",{style:{background:re.badgeColor,color:"#FFFFFF",fontSize:"9px",fontWeight:700,padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase",whiteSpace:"nowrap",marginLeft:"8px"},children:re.badgeText})]}),t.jsxs("td",{style:{color:e.text.primary},className:"p-4",children:[(we=X.user)==null?void 0:we.firstName," ",(Oe=X.user)==null?void 0:Oe.lastName]}),t.jsx("td",{style:{color:e.text.primary},className:"p-4 max-w-[200px] truncate",children:X.subject||"No subject"}),o==="all"&&t.jsx("td",{className:"p-4",children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:X.submissionType==="feedback"?"rgba(34,197,94,0.2)":"rgba(59,130,246,0.2)",color:X.submissionType==="feedback"?"#22C55E":"#3B82F6",border:`1px solid ${X.submissionType==="feedback"?"rgba(34,197,94,0.3)":"rgba(59,130,246,0.3)"}`},children:X.submissionType==="feedback"?" Feedback":" Assistance"})}),o==="feedback"?t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((yr,rt)=>t.jsx("span",{style:{fontSize:"14px",color:rt<(X.rating||0)?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},rt)),t.jsxs("span",{style:{color:e.text.muted,marginLeft:"8px",fontSize:"11px"},children:["(",X.rating||0,"/5)"]})]})}):t.jsx("td",{className:"p-4",children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:`${G(X.status)}20`,color:G(X.status)},children:((Ee=X.status)==null?void 0:Ee.replace("_"," "))||"Pending"})}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4 text-sm",children:X.createdAt?new Date(X.createdAt).toLocaleDateString():""}),t.jsx("td",{className:"p-4 text-right",children:t.jsx("button",{onClick:()=>T(X),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"})})]},X._id)})})]}),te>1&&t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-4 border-t flex items-center justify-center gap-3",children:[t.jsx("button",{onClick:()=>L(X=>Math.max(1,X-1)),disabled:F===1,style:{padding:"8px 16px",background:F===1?"rgba(100,100,100,0.2)":e.bg.tertiary,color:F===1?e.text.muted:e.accent.primary,border:`2px solid ${F===1?"transparent":e.accent.primary}`,borderRadius:"8px",fontSize:"13px",fontWeight:600,cursor:F===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:e.text.secondary,fontSize:"13px",fontWeight:600},children:["Page ",F," of ",te]}),t.jsx("button",{onClick:()=>L(X=>Math.min(te,X+1)),disabled:F===te,style:{padding:"8px 16px",background:F===te?"rgba(100,100,100,0.2)":e.bg.tertiary,color:F===te?e.text.muted:e.accent.primary,border:`2px solid ${F===te?"transparent":e.accent.primary}`,borderRadius:"8px",fontSize:"13px",fontWeight:600,cursor:F===te?"not-allowed":"pointer"},children:"Next "})]})]})}),g&&h&&t.jsx("div",{onClick:()=>f(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:X=>X.stopPropagation(),style:{background:a?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",maxWidth:"700px",width:"90%",maxHeight:"90vh",display:"flex",flexDirection:"column",border:`2px solid ${e.border.primary}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:`2px solid ${e.border.primary}`,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t.jsxs("div",{children:[t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:`${G(h.status)}20`,color:G(h.status),marginBottom:"8px"},children:((se=h.status)==null?void 0:se.replace("_"," "))||"Pending"}),t.jsx("h2",{style:{fontSize:"20px",fontWeight:700,color:e.text.primary,margin:0},children:h.subject||"No Subject"})]}),t.jsx("button",{onClick:()=>f(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px"},children:""})]}),t.jsxs("div",{style:{padding:"0 24px",borderBottom:`2px solid ${e.border.primary}`,display:"flex",gap:"8px"},children:[t.jsx("button",{onClick:()=>U("details"),style:{padding:"12px 20px",background:"transparent",border:"none",borderBottom:`3px solid ${k==="details"?e.accent.primary:"transparent"}`,color:k==="details"?e.accent.primary:e.text.secondary,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:" Details"}),t.jsxs("button",{onClick:()=>U("notes"),style:{padding:"12px 20px",background:"transparent",border:"none",borderBottom:`3px solid ${k==="notes"?e.accent.primary:"transparent"}`,color:k==="notes"?e.accent.primary:e.text.secondary,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Notes History ",((ce=h.notes)==null?void 0:ce.length)>0&&`(${h.notes.length})`]})]}),t.jsx("div",{style:{flex:1,overflow:"auto",padding:"24px"},children:k==="details"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[t.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:e.accent.primary,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"18px",color:e.accent.secondary},children:((oe=(ae=h.user)==null?void 0:ae.firstName)==null?void 0:oe[0])||"?"}),t.jsxs("div",{children:[t.jsxs("p",{style:{color:e.text.primary,fontWeight:600,margin:0},children:[(he=h.user)==null?void 0:he.firstName," ",(Ke=h.user)==null?void 0:Ke.lastName]}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",margin:0},children:(ct=h.user)==null?void 0:ct.email})]}),t.jsx("div",{style:{marginLeft:"auto",textAlign:"right"},children:t.jsx("p",{style:{color:e.text.muted,fontSize:"12px",margin:0},children:h.createdAt?new Date(h.createdAt).toLocaleString():""})})]}),t.jsx("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",marginBottom:"20px",border:`1px solid ${e.border.primary}`},children:t.jsx("p",{style:{color:e.text.primary,whiteSpace:"pre-wrap",margin:0,lineHeight:"1.6"},children:h.message||h.description||"No message provided"})}),h.submissionType==="feedback"&&h.rating&&t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("p",{style:{color:e.text.secondary,fontSize:"12px",marginBottom:"8px",fontWeight:600},children:"Rating"}),t.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((X,re)=>t.jsx("span",{style:{fontSize:"24px",color:re<h.rating?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},re)),t.jsxs("span",{style:{color:e.text.secondary,marginLeft:"8px"},children:["(",h.rating,"/5)"]})]})]}),h.status==="resolved"&&h.adminResponse&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(16,185,129,0.3)"},children:[t.jsx("p",{style:{color:"#10B981",fontSize:"12px",marginBottom:"8px",fontWeight:700},children:" Resolution"}),t.jsx("p",{style:{color:e.text.primary,margin:0},children:h.adminResponse})]})]}):t.jsx("div",{children:(!h.notes||h.notes.length===0)&&h.status!=="resolved"?t.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:e.text.tertiary},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("p",{style:{fontSize:"14px",margin:0},children:"No notes sent yet"}),t.jsx("p",{style:{fontSize:"12px",color:e.text.muted,marginTop:"8px"},children:"Use the note field below to send updates to the user"})]}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(dt=h.notes)==null?void 0:dt.slice().reverse().map((X,re)=>t.jsxs("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsxs("span",{style:{color:e.accent.primary,fontSize:"12px",fontWeight:700},children:[" ",X.adminName||"Treasury Admin"]}),t.jsx("span",{style:{color:e.text.muted,fontSize:"11px"},children:X.timestamp?new Date(X.timestamp).toLocaleString():""})]}),t.jsx("p",{style:{color:e.text.primary,margin:0,lineHeight:"1.5"},children:X.message})]},re)),h.status==="resolved"&&h.adminResponse&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderRadius:"12px",padding:"16px",border:"2px solid rgba(16,185,129,0.3)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsxs("span",{style:{color:"#10B981",fontSize:"12px",fontWeight:700},children:[" RESOLVED by ",h.resolvedBy||"Treasury Admin"]}),t.jsx("span",{style:{color:"#10B981",fontSize:"11px",fontWeight:600},children:h.resolvedAt?new Date(h.resolvedAt).toLocaleString():""})]}),t.jsx("p",{style:{color:e.text.primary,margin:0,lineHeight:"1.5",fontWeight:500},children:h.adminResponse})]})]})})}),h.status==="in_progress"&&h.submissionType!=="feedback"&&t.jsxs("div",{style:{borderTop:`2px solid ${e.border.primary}`,padding:"20px 24px"},children:[t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("label",{style:{color:e.text.primary,fontWeight:600,fontSize:"13px",display:"block",marginBottom:"8px"},children:" Send Note to User"}),t.jsx("textarea",{value:D,onChange:X=>_(X.target.value),placeholder:"Type your message here... The user will receive this via email.",rows:3,style:{width:"100%",padding:"12px",borderRadius:"8px",border:`2px solid ${e.border.primary}`,background:e.bg.tertiary,color:e.text.primary,fontSize:"14px",resize:"vertical",outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:V,disabled:z||!D.trim(),style:{flex:1,padding:"12px 24px",background:z||!D.trim()?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)",color:z||!D.trim()?"rgba(59,130,246,0.5)":"#3B82F6",border:`2px solid ${z||!D.trim()?"rgba(59,130,246,0.3)":"#3B82F6"}`,borderRadius:"8px",cursor:z||!D.trim()?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:z||!D.trim()?.6:1},children:z?" Sending...":" Send Note"}),t.jsx("button",{onClick:()=>O(),style:{flex:1,padding:"12px 24px",background:"#10B981",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:700,boxShadow:"0 4px 12px rgba(16,185,129,0.4)"},children:" Resolve Concern"})]})]}),h.status==="pending"&&h.submissionType!=="feedback"&&t.jsx("div",{style:{borderTop:`2px solid ${e.border.primary}`,padding:"20px 24px",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{onClick:()=>O(),style:{padding:"12px 24px",background:"#10B981",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:700,boxShadow:"0 4px 12px rgba(16,185,129,0.4)"},children:" Resolve Concern"})})]})}),j&&h&&t.jsx("div",{onClick:()=>C(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:X=>X.stopPropagation(),style:{background:a?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",maxWidth:"500px",width:"90%",border:`2px solid ${e.border.primary}`,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("div",{style:{padding:"24px",borderBottom:"2px solid rgba(16,185,129,0.3)",background:"rgba(16,185,129,0.1)",borderRadius:"16px 16px 0 0"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#10B981",margin:0,marginBottom:"8px"},children:"Resolve Concern"}),t.jsx("p",{style:{fontSize:"13px",color:e.text.secondary,margin:0},children:"Mark this concern as resolved and notify the user"})]}),t.jsx("button",{onClick:()=>C(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px"},children:""})]})}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",marginBottom:"20px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:e.text.secondary,fontSize:"12px"},children:"From"}),t.jsxs("span",{style:{color:e.text.primary,fontSize:"14px",fontWeight:600},children:[(ve=h.user)==null?void 0:ve.firstName," ",(H=h.user)==null?void 0:H.lastName]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:e.text.secondary,fontSize:"12px"},children:"Subject"}),t.jsx("span",{style:{color:e.text.primary,fontSize:"14px",fontWeight:600,maxWidth:"60%",textAlign:"right"},children:h.subject})]})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:e.text.primary,fontWeight:600,display:"block",marginBottom:"8px"},children:["Resolution Message ",t.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",marginBottom:"12px"},children:"This final message will be sent to the user via email and mark the concern as resolved."}),t.jsx("textarea",{value:E,onChange:X=>A(X.target.value),placeholder:"Enter your resolution response...",rows:5,style:{width:"100%",padding:"12px",borderRadius:"8px",border:`2px solid ${e.border.primary}`,background:e.bg.tertiary,color:e.text.primary,fontSize:"14px",resize:"vertical",outline:"none",boxSizing:"border-box"},autoFocus:!0})]})]}),t.jsxs("div",{style:{padding:"20px 24px",borderTop:`2px solid ${e.border.primary}`,display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:()=>C(!1),disabled:M,style:{flex:1,padding:"14px",background:e.bg.tertiary,color:e.text.primary,border:`1px solid ${e.border.primary}`,borderRadius:"8px",cursor:M?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:M?.5:1},children:"Cancel"}),t.jsx("button",{onClick:P,disabled:M||!E.trim(),style:{flex:1,padding:"14px",background:M||!E.trim()?"rgba(16,185,129,0.3)":"#10B981",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:M||!E.trim()?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:M||!E.trim()?.6:1,boxShadow:M||!E.trim()?"none":"0 4px 12px rgba(16,185,129,0.4)"},children:M?" Resolving...":" Resolve & Notify User"})]})]})})]})}function p4(){var _,z,q;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState({autoExport:{frequency:"daily",exportTypes:[],time:"00:00",emailRecipients:[]}}),[n,l]=p.useState(!1),[o,i]=p.useState(!1),[c,u]=p.useState(!1),[d,x]=p.useState([]),[m,b]=p.useState("all"),[v,S]=p.useState(""),[h,y]=p.useState({start:"",end:""}),[g,f]=p.useState("all"),[j,C]=p.useState(""),[E,A]=p.useState(""),M=[{value:"Transactions",icon:"",label:"Transactions"},{value:"Cash-Ins",icon:"",label:"Cash-Ins"},{value:"Users",icon:"",label:"Users"},{value:"Balances",icon:"",label:"Balance Summary"},{value:"Logs",icon:"",label:"Treasury Logs"},{value:"Concerns",icon:"",label:"Treasury Concerns"}];p.useEffect(()=>{B(),F()},[]);const B=async()=>{try{const w=await J.get("/admin/configurations?adminRole=treasury");w&&s(w)}catch(w){console.error("Error loading configurations:",w)}},F=async()=>{try{const[w,N]=await Promise.all([J.get("/admin/configurations/scheduled-exports?adminRole=treasury").catch(()=>[]),J.get("/admin/configurations/export-history?adminRole=treasury").catch(()=>[])]),R=(Array.isArray(w)?w:[]).map(V=>({...V,exportSource:"auto"})),T=(Array.isArray(N)?N:[]).map(V=>({...V,exportSource:"manual"})),O=[...R,...T].sort((V,P)=>{const W=new Date(V.exportedAt||V.timestamp||V.createdAt);return new Date(P.exportedAt||P.timestamp||P.createdAt)-W});x(O)}catch(w){console.error("Error loading export archive:",w)}},L=async()=>{var w,N;l(!0);try{await J.put("/admin/configurations/auto-export",{...r.autoExport,adminRole:"treasury"}),$.success("Auto-export settings saved successfully!"),i(!1),B()}catch(R){$.error(((N=(w=R.response)==null?void 0:w.data)==null?void 0:N.error)||"Failed to save settings")}finally{l(!1)}},k=async()=>{var w,N;l(!0);try{if(!r.autoExport.exportTypes||r.autoExport.exportTypes.length===0){$.error("Please select at least one export type in the configuration settings"),l(!1);return}const R=await J.post("/admin/configurations/manual-export-treasury",{exportTypes:r.autoExport.exportTypes,dateRange:g,customStartDate:j,customEndDate:E});if($.success(`Treasury data exported successfully! (${R.totalRecords||0} total records)`),R.downloadUrl){const T=document.createElement("a");T.href=R.downloadUrl,T.download=R.fileName||`treasury_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(T),T.click(),document.body.removeChild(T)}u(!1),f("all"),C(""),A(""),F()}catch(R){$.error(((N=(w=R.response)==null?void 0:w.data)==null?void 0:N.error)||"Export failed")}finally{l(!1)}},U=async w=>{try{const N=await J.get(`/admin/configurations/download-export/${w}`);if(N.downloadUrl){const R=document.createElement("a");R.href=N.downloadUrl,R.download=N.fileName,document.body.appendChild(R),R.click(),document.body.removeChild(R)}}catch{$.error("Failed to download export")}},D=d.filter(w=>{var N,R;if(m!=="all"&&w.exportSource!==m)return!1;if(v){const T=v.toLowerCase();if(!(((N=w.exportType)==null?void 0:N.toLowerCase().includes(T))||((R=w.fileName)==null?void 0:R.toLowerCase().includes(T))))return!1}if(h.start||h.end){const T=new Date(w.exportedAt||w.timestamp||w.createdAt);if(h.start&&T<new Date(h.start)||h.end&&T>new Date(h.end+"T23:59:59"))return!1}return!0});return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{marginBottom:"24px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,paddingBottom:"16px"},children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Treasury Settings"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Configure automated treasury data exports and system settings"})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[t.jsxs("div",{style:{background:e.bg.card,borderRadius:"16px",border:`1px solid ${e.border.primary}`,padding:"28px",marginBottom:"24px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{color:e.accent.primary,fontSize:"20px",fontWeight:700,margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," Automated Treasury Export"]}),t.jsxs("p",{style:{color:e.text.secondary,fontSize:"14px",margin:0,lineHeight:"1.5"},children:["System automatically exports treasury data as ZIP files for backup and compliance.",t.jsx("br",{}),"Configure the schedule and download reports manually anytime."]})]}),t.jsxs("button",{onClick:()=>i(!0),style:{padding:"12px 20px",background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"10px",color:e.accent.primary,fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Configure Schedule"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[t.jsx(ac,{icon:"",label:"Frequency",value:((_=r.autoExport.frequency)==null?void 0:_.charAt(0).toUpperCase())+((z=r.autoExport.frequency)==null?void 0:z.slice(1))||"Not set",theme:e}),t.jsx(ac,{icon:"",label:"Export Time",value:r.autoExport.time||"Not set",theme:e}),t.jsx(ac,{icon:"",label:"Data Types",value:`${((q=r.autoExport.exportTypes)==null?void 0:q.length)||0} selected`,theme:e})]}),t.jsxs("div",{style:{padding:"24px",background:"rgba(34,197,94,0.1)",border:"2px dashed rgba(34,197,94,0.3)",borderRadius:"12px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),t.jsx("h4",{style:{color:e.text.primary,fontSize:"16px",fontWeight:700,marginBottom:"8px"},children:"Export Treasury Data Now"}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"13px",marginBottom:"16px"},children:"Download a complete ZIP file with all treasury data: transactions, cash-ins, users, balances, logs, and concerns."}),t.jsx("button",{onClick:()=>u(!0),disabled:n,style:{padding:"14px 32px",background:n?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:n?"not-allowed":"pointer",boxShadow:n?"none":"0 4px 12px rgba(34,197,94,0.4)",transition:"all 0.2s ease",opacity:n?.6:1},children:n?" Exporting...":" Download Treasury Data (ZIP)"})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderRadius:"16px",border:`1px solid ${e.border.primary}`,padding:"28px",marginBottom:"24px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{color:e.accent.primary,fontSize:"18px",fontWeight:700,margin:"0 0 4px 0",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""})," Export Archive"]}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"12px",margin:0},children:"All exports - auto-scheduled and manual"})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("div",{style:{display:"flex",borderRadius:"8px",overflow:"hidden",border:`1px solid ${e.border.primary}`},children:[{key:"all",label:"All"},{key:"auto",label:" Auto"},{key:"manual",label:" Manual"}].map(w=>t.jsx("button",{onClick:()=>b(w.key),style:{padding:"8px 16px",background:m===w.key?e.accent.primary:"transparent",color:m===w.key?a?"#181D40":"#FFFFFF":e.text.secondary,border:"none",fontSize:"12px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:w.label},w.key))}),t.jsx("input",{type:"text",placeholder:"Search exports...",value:v,onChange:w=>S(w.target.value),style:{padding:"8px 16px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"13px",outline:"none",width:"180px"}}),t.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t.jsx("input",{type:"date",value:h.start,onChange:w=>y({...h,start:w.target.value}),style:{padding:"8px 12px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"12px",outline:"none"}}),t.jsx("span",{style:{color:e.text.tertiary},children:""}),t.jsx("input",{type:"date",value:h.end,onChange:w=>y({...h,end:w.target.value}),style:{padding:"8px 12px",background:e.bg.tertiary,border:`2px solid ${e.border.primary}`,borderRadius:"8px",color:e.text.primary,fontSize:"12px",outline:"none"}}),(h.start||h.end||v)&&t.jsx("button",{onClick:()=>{S(""),y({start:"",end:""})},style:{padding:"8px 12px",background:"rgba(239,68,68,0.2)",border:"2px solid rgba(239,68,68,0.3)",borderRadius:"8px",color:"#EF4444",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Clear"})]})]})]}),D.length===0?t.jsxs("div",{style:{padding:"40px",textAlign:"center",color:e.text.tertiary,fontSize:"14px"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",opacity:.3},children:""}),t.jsx("p",{style:{margin:0},children:"No exports found"}),t.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"12px"},children:[m!=="all"?"Try changing the filter or ":"","Configure auto-export or run a manual export to start"]})]}):t.jsx("div",{style:{maxHeight:"500px",overflowY:"auto",paddingRight:"8px"},children:t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:D.map((w,N)=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 18px",background:e.bg.tertiary,borderRadius:"10px",border:`1px solid ${e.border.primary}`,fontSize:"14px",transition:"all 0.2s ease"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},children:[t.jsx("span",{style:{fontSize:"20px"},children:w.exportSource==="auto"?"":""}),t.jsx("span",{style:{color:e.accent.primary,fontWeight:700,fontSize:"15px"},children:w.exportType||"Treasury Export"}),t.jsx("span",{style:{padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:700,background:w.exportSource==="auto"?"rgba(59,130,246,0.2)":"rgba(34,197,94,0.2)",color:w.exportSource==="auto"?"#3B82F6":"#22C55E",border:`1px solid ${w.exportSource==="auto"?"rgba(59,130,246,0.3)":"rgba(34,197,94,0.3)"}`},children:w.exportSource==="auto"?"AUTO":"MANUAL"})]}),t.jsxs("div",{style:{display:"flex",gap:"20px",fontSize:"13px",color:e.text.secondary},children:[t.jsxs("span",{children:[" ",new Date(w.exportedAt||w.timestamp||w.createdAt).toLocaleDateString()]}),t.jsxs("span",{children:[" ",new Date(w.exportedAt||w.timestamp||w.createdAt).toLocaleTimeString()]}),w.fileName&&t.jsxs("span",{children:[" ",w.fileName]}),w.recordCount&&t.jsxs("span",{children:[" ",w.recordCount," records"]})]})]}),w.status==="success"||!w.status?t.jsx("button",{onClick:()=>U(w._id),style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(34,197,94,0.2)",color:"#22C55E",border:"2px solid rgba(34,197,94,0.3)",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},children:" Download"}):t.jsx("span",{style:{padding:"10px 18px",borderRadius:"8px",fontSize:"13px",fontWeight:700,background:"rgba(239,68,68,0.2)",color:"#EF4444",border:"2px solid rgba(239,68,68,0.3)"},children:" Failed"})]},w._id||N))})})]})]}),c&&t.jsx(x4,{dateRange:g,setDateRange:f,customStartDate:j,setCustomStartDate:C,customEndDate:E,setCustomEndDate:A,loading:n,onExport:k,onCancel:()=>{u(!1),f("all"),C(""),A("")},theme:e,isDarkMode:a}),o&&t.jsx(m4,{configurations:r,setConfigurations:s,exportTypes:M,loading:n,onSave:L,onCancel:()=>i(!1),theme:e,isDarkMode:a})]})}function ac({icon:e,label:a,value:r,theme:s}){return t.jsxs("div",{style:{padding:"20px",background:s.bg.tertiary,borderRadius:"12px",border:`1px solid ${s.border.primary}`},children:[t.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:e}),t.jsx("div",{style:{fontSize:"12px",color:s.text.secondary,marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:700},children:a}),t.jsx("div",{style:{fontSize:"16px",color:s.text.primary,fontWeight:700},children:r})]})}function x4({dateRange:e,setDateRange:a,customStartDate:r,setCustomStartDate:s,customEndDate:n,setCustomEndDate:l,loading:o,onExport:i,onCancel:c,theme:u,isDarkMode:d}){return t.jsx("div",{onClick:c,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:x=>x.stopPropagation(),style:{background:d?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",border:`1px solid ${u.border.primary}`,padding:"32px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("h3",{style:{color:u.accent.primary,fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Select Date Range"}),t.jsx("p",{style:{color:u.text.secondary,fontSize:"13px",margin:"0 0 24px 0"},children:"Choose which records to include in the export"}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:[{value:"all",label:" All Time",desc:"Export all records"},{value:"24hr",label:" Last 24 Hours",desc:"Records from the past day"},{value:"week",label:" This Week",desc:"Records from the past 7 days"},{value:"month",label:" This Month",desc:"Records from current month"},{value:"custom",label:" Custom Range",desc:"Choose specific dates"}].map(x=>t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px",background:e===x.value?`${u.accent.primary}20`:u.bg.tertiary,border:`2px solid ${e===x.value?u.accent.primary:u.border.primary}`,borderRadius:"10px",cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsx("input",{type:"radio",name:"dateRange",value:x.value,checked:e===x.value,onChange:m=>a(m.target.value),style:{cursor:"pointer",width:"18px",height:"18px"}}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{color:u.text.primary,fontSize:"14px",fontWeight:700,marginBottom:"4px"},children:x.label}),t.jsx("div",{style:{color:u.text.secondary,fontSize:"12px"},children:x.desc})]})]},x.value))}),e==="custom"&&t.jsx("div",{style:{marginBottom:"24px",padding:"16px",background:u.bg.tertiary,borderRadius:"10px"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:u.accent.primary},children:"Start Date"}),t.jsx("input",{type:"date",value:r,onChange:x=>s(x.target.value),style:{width:"100%",padding:"10px",background:u.bg.secondary,border:`2px solid ${u.border.primary}`,borderRadius:"8px",color:u.text.primary,fontSize:"13px",outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:700,color:u.accent.primary},children:"End Date"}),t.jsx("input",{type:"date",value:n,onChange:x=>l(x.target.value),style:{width:"100%",padding:"10px",background:u.bg.secondary,border:`2px solid ${u.border.primary}`,borderRadius:"8px",color:u.text.primary,fontSize:"13px",outline:"none",boxSizing:"border-box"}})]})]})}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:i,disabled:o,style:{flex:1,padding:"14px 24px",background:o?"#9CA3AF":"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:o?"not-allowed":"pointer",boxShadow:o?"none":"0 4px 12px rgba(34,197,94,0.4)",opacity:o?.6:1},children:o?" Exporting...":" Export Now"}),t.jsx("button",{onClick:c,disabled:o,style:{flex:1,padding:"14px 24px",background:u.bg.tertiary,color:u.text.primary,border:`2px solid ${u.border.primary}`,borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:o?"not-allowed":"pointer"},children:"Cancel"})]})]})})}function m4({configurations:e,setConfigurations:a,exportTypes:r,loading:s,onSave:n,onCancel:l,theme:o,isDarkMode:i}){var c,u,d,x,m;return t.jsx("div",{onClick:l,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:b=>b.stopPropagation(),style:{background:i?"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)":"#FFFFFF",borderRadius:"16px",border:`1px solid ${o.border.primary}`,padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[t.jsx("h3",{style:{color:o.accent.primary,fontSize:"22px",fontWeight:700,margin:"0 0 8px 0"},children:"Configure Export Schedule"}),t.jsx("p",{style:{color:o.text.secondary,fontSize:"13px",margin:"0 0 24px 0"},children:"Set up when and how often the system should automatically export data."}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",borderRadius:"12px",background:(c=e.autoExport)!=null&&c.enabled?"rgba(16,185,129,0.1)":"rgba(239,68,68,0.1)",border:`2px solid ${(u=e.autoExport)!=null&&u.enabled?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"}`},children:[t.jsxs("div",{children:[t.jsx("div",{style:{color:o.text.primary,fontWeight:700,fontSize:"14px"},children:"Enable Automatic Export"}),t.jsx("div",{style:{color:o.text.secondary,fontSize:"12px",marginTop:"4px"},children:(d=e.autoExport)!=null&&d.enabled?" Auto-export is active":" Auto-export is disabled"})]}),t.jsx("button",{onClick:()=>{var b;return a({...e,autoExport:{...e.autoExport,enabled:!((b=e.autoExport)!=null&&b.enabled)}})},style:{background:(x=e.autoExport)!=null&&x.enabled?"#10B981":"#6B7280",width:"52px",height:"28px",borderRadius:"14px",position:"relative",border:"none",cursor:"pointer",transition:"all 0.2s ease"},children:t.jsx("div",{style:{position:"absolute",top:"2px",left:(m=e.autoExport)!=null&&m.enabled?"26px":"2px",width:"24px",height:"24px",borderRadius:"12px",background:"#FFFFFF",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Frequency"}),t.jsxs("select",{value:e.autoExport.frequency,onChange:b=>a({...e,autoExport:{...e.autoExport,frequency:b.target.value}}),style:{width:"100%",padding:"12px 16px",background:o.bg.tertiary,border:`2px solid ${o.border.primary}`,borderRadius:"8px",color:o.text.primary,fontSize:"14px",fontWeight:600,cursor:"pointer",outline:"none"},children:[t.jsx("option",{value:"daily",style:{background:i?"#1E2347":"#FFFFFF"},children:" Daily"}),t.jsx("option",{value:"weekly",style:{background:i?"#1E2347":"#FFFFFF"},children:" Weekly"}),t.jsx("option",{value:"monthly",style:{background:i?"#1E2347":"#FFFFFF"},children:" Monthly"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Export Time (24-hour)"}),t.jsx("input",{type:"time",value:e.autoExport.time,onChange:b=>a({...e,autoExport:{...e.autoExport,time:b.target.value}}),style:{width:"100%",padding:"12px 16px",background:o.bg.tertiary,border:`2px solid ${o.border.primary}`,borderRadius:"8px",color:o.text.primary,fontSize:"14px",fontWeight:600,outline:"none",boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"12px",fontSize:"13px",fontWeight:700,color:o.accent.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Data Types to Export"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:r.map(b=>{var v,S,h;return t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px",background:(v=e.autoExport.exportTypes)!=null&&v.includes(b.value)?`${o.accent.primary}20`:o.bg.tertiary,border:`2px solid ${(S=e.autoExport.exportTypes)!=null&&S.includes(b.value)?o.accent.primary:o.border.primary}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsx("input",{type:"checkbox",checked:((h=e.autoExport.exportTypes)==null?void 0:h.includes(b.value))||!1,onChange:y=>{const g=e.autoExport.exportTypes||[],f=y.target.checked?[...g,b.value]:g.filter(j=>j!==b.value);a({...e,autoExport:{...e.autoExport,exportTypes:f}})},style:{cursor:"pointer",width:"16px",height:"16px"}}),t.jsx("span",{style:{fontSize:"16px"},children:b.icon}),t.jsx("span",{style:{color:o.text.primary,fontSize:"14px",fontWeight:600},children:b.label})]},b.value)})})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[t.jsx("button",{onClick:n,disabled:s,style:{flex:1,padding:"14px 24px",background:s?"#9CA3AF":o.accent.primary,color:i?"#181D40":"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:s?"not-allowed":"pointer",boxShadow:s?"none":"0 4px 12px rgba(255,212,28,0.4)",opacity:s?.6:1},children:s?" Saving...":" Save Settings"}),t.jsx("button",{onClick:l,disabled:s,style:{flex:1,padding:"14px 24px",background:o.bg.tertiary,color:o.text.primary,border:`2px solid ${o.border.primary}`,borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:s?"not-allowed":"pointer"},children:"Cancel"})]})]})]})})}function f4(){const{theme:e,isDarkMode:a}=ne();Je();const[r,s]=p.useState({todayCashIn:0,todayCashOut:0,todayTransactions:0,totalUsers:0,totalMerchants:0,totalBalance:0}),[n,l]=p.useState(!0),[o,i]=p.useState("today"),c=p.useRef(null),u=async(x=!1)=>{try{x||l(!0);const m=await J.get(`/admin/accounting/analytics?range=${o}`);m&&s({todayCashIn:m.todayCashIn||0,todayCashOut:m.todayCashOut||0,todayTransactions:m.todayTransactions||0,totalUsers:m.totalUsers||0,totalMerchants:m.totalMerchants||0,totalBalance:m.totalBalance||0})}catch{x||console.error("Failed to load analytics")}finally{x||l(!1)}};p.useEffect(()=>(u(),c.current=setInterval(()=>u(!0),6e4),()=>{c.current&&clearInterval(c.current)}),[o]);const d=r.todayCashIn-r.todayCashOut;return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading analytics..."]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-[30px] border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Accounting Dashboard"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Financial reports and transaction analytics  Auto-updates every minute"})]}),t.jsx("div",{className:"flex gap-2 mb-5",children:[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"}].map(({value:x,label:m})=>t.jsx("button",{onClick:()=>i(x),style:{background:o===x?e.accent.primary:e.bg.card,color:o===x?e.accent.secondary:e.text.primary,borderColor:e.border.primary},className:"px-4 py-2 rounded-xl font-bold text-sm border hover:opacity-80 transition",children:m},x))}),t.jsxs("div",{className:"grid grid-cols-4 gap-5 mb-5",children:[t.jsx(jr,{icon:"",label:"CASH-IN",value:`${r.todayCashIn.toLocaleString()}`,subtitle:"loaded",color:"#10B981",theme:e}),t.jsx(jr,{icon:"",label:"CASH-OUT",value:`${r.todayCashOut.toLocaleString()}`,subtitle:"withdrawn",color:"#EF4444",theme:e}),t.jsx(jr,{icon:"",label:"NET FLOW",value:`${d.toLocaleString()}`,subtitle:d>=0?"positive":"negative",color:d>=0?"#10B981":"#EF4444",theme:e}),t.jsx(jr,{icon:"",label:"TRANSACTIONS",value:r.todayTransactions,subtitle:"total",color:"#3B82F6",theme:e})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-5 mb-5",children:[t.jsx(jr,{icon:"",label:"TOTAL USERS",value:r.totalUsers.toLocaleString(),subtitle:"registered",color:"#A855F7",theme:e}),t.jsx(jr,{icon:"",label:"MERCHANTS",value:r.totalMerchants.toLocaleString(),subtitle:"active",color:"#F59E0B",theme:e}),t.jsx(jr,{icon:"",label:"SYSTEM BALANCE",value:`${r.totalBalance.toLocaleString()}`,subtitle:"in circulation",color:"#06B6D4",theme:e})]})]})}function jr({icon:e,label:a,value:r,subtitle:s,color:n,theme:l}){return t.jsxs("div",{style:{background:l.bg.card,borderColor:l.border.primary},className:"p-6 rounded-2xl border relative overflow-hidden",children:[t.jsx("div",{className:"absolute right-4 top-4 text-[40px] opacity-15",children:e}),t.jsx("div",{style:{color:l.text.secondary},className:"text-[11px] font-bold uppercase tracking-wide mb-3",children:a}),t.jsx("div",{style:{color:l.text.primary},className:"text-[28px] font-extrabold mb-2",children:r}),t.jsx("div",{className:"text-xs font-semibold inline-block py-[3px] px-[10px] rounded-xl",style:{color:n,background:`${n}20`},children:s})]})}function g4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(""),[c,u]=p.useState("all"),[d,x]=p.useState(null),m=p.useRef(null),b=async(f=!1)=>{try{f||l(!0);const j=new URLSearchParams;c!=="all"&&j.append("isActive",c==="active"),o&&j.append("search",o);const C=await J.get(`/admin/accounting/merchants?${j}`);C!=null&&C.merchants&&s(C.merchants)}catch{f||$.error("Failed to load merchants")}finally{f||l(!1)}};p.useEffect(()=>(b(),m.current=setInterval(()=>b(!0),3e4),()=>{m.current&&clearInterval(m.current)}),[c,o]);const v=r.filter(f=>{var E,A,M;const j=!o||((E=f.businessName)==null?void 0:E.toLowerCase().includes(o.toLowerCase()))||((A=f.merchantId)==null?void 0:A.toLowerCase().includes(o.toLowerCase()))||((M=f.email)==null?void 0:M.toLowerCase().includes(o.toLowerCase())),C=c==="all"||c==="active"&&f.isActive!==!1||c==="inactive"&&f.isActive===!1;return j&&C}),S=r.length,h=r.filter(f=>f.isActive!==!1).length,y=r.reduce((f,j)=>f+(j.totalCollections||0),0),g=r.reduce((f,j)=>f+(j.todayCollections||0),0);return t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Merchants"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"View merchant accounts and transaction metrics"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-5",children:[t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(59, 130, 246, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(59, 130, 246, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(Jr,{className:"w-6 h-6 text-blue-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Total Merchants"}),t.jsx("p",{className:"text-2xl font-bold text-blue-500",children:S})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(16, 185, 129, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(16, 185, 129, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(Ls,{className:"w-6 h-6 text-emerald-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Active"}),t.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:h})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(251, 191, 36, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(251, 191, 36, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(ul,{className:"w-6 h-6 text-yellow-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Total Collections"}),t.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:["",y.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(139, 92, 246, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(139, 92, 246, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(ci,{className:"w-6 h-6 text-violet-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Today's Collections"}),t.jsxs("p",{className:"text-2xl font-bold text-violet-500",children:["",g.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.8)":e.bg.card,borderColor:e.accent.primary},className:"rounded-xl border-2 p-3 mb-5 flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(Zr,{style:{color:e.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search merchants...",value:o,onChange:f=>i(f.target.value),style:{background:"transparent",color:e.text.primary,borderColor:"transparent"},className:"w-full pl-10 pr-4 py-2.5 rounded-lg text-sm focus:outline-none placeholder:text-gray-500"})]}),t.jsx("div",{style:{background:e.border.primary},className:"hidden sm:block w-px h-8"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","active","inactive"].map(f=>t.jsx("button",{onClick:()=>u(f),style:{background:c===f?e.accent.primary:a?"rgba(30,35,71,0.8)":"#F9FAFB",color:c===f?a?"#181D40":"#FFFFFF":e.text.primary,borderColor:e.border.primary},className:"px-3 py-2 rounded-lg font-semibold text-xs border hover:opacity-80 transition capitalize",children:f},f))})]}),t.jsx("div",{className:"mb-4",children:t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:["Showing ",t.jsx("span",{style:{color:e.accent.primary},className:"font-bold",children:v.length})," of ",r.length," merchants"]})}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading merchants..."]}):v.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{className:"font-semibold",children:"No merchants found"}),t.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your search or filters"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:v.map(f=>t.jsx(h4,{merchant:f,theme:e,isDarkMode:a,onView:()=>x(f)},f._id||f.merchantId))})})}),d&&t.jsx(b4,{merchant:d,theme:e,isDarkMode:a,onClose:()=>x(null)})]})}function h4({merchant:e,theme:a,isDarkMode:r,onView:s}){const n=e.isActive!==!1,l=e.type==="motorpool";return t.jsxs("div",{style:{background:r?"rgba(30,35,71,0.6)":a.bg.tertiary,borderColor:l?"rgba(139, 92, 246, 0.4)":a.border.primary},className:"p-5 rounded-xl border cursor-pointer hover:opacity-90 transition relative overflow-hidden",onClick:s,children:[l&&t.jsxs("div",{style:{background:"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)"},className:"absolute top-0 right-0 px-3 py-1 rounded-bl-lg text-white text-xs font-bold flex items-center gap-1",children:[t.jsx(br,{className:"w-3 h-3"})," Shuttle"]}),t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsx("div",{style:{background:l?"rgba(139,92,246,0.15)":"rgba(255,212,28,0.15)",color:l?"#8B5CF6":"#FFD41C"},className:"px-3 py-1 rounded-lg text-xs font-bold",children:e.merchantId||"N/A"}),t.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:n?"#10B981":"#EF4444"}})]}),t.jsx("h4",{style:{color:a.text.primary},className:"font-bold text-lg mb-2",children:e.businessName||e.name||"Unknown"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-xs",children:"Today's Sales"}),t.jsxs("span",{style:{color:"#10B981"},className:"font-bold text-sm",children:["",(e.todayCollections||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-xs",children:"Total Collections"}),t.jsxs("span",{style:{color:"#3B82F6"},className:"font-bold text-sm",children:["",(e.totalCollections||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:a.text.secondary},className:"text-xs",children:"Transactions"}),t.jsx("span",{style:{color:a.text.primary},className:"font-bold text-sm",children:(e.totalTransactions||0).toLocaleString()})]})]}),t.jsx("button",{style:{background:l?"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)":a.accent.primary,color:l?"#FFFFFF":a.accent.secondary},className:"w-full mt-4 py-2 rounded-lg font-bold text-sm hover:opacity-90 transition",children:"View Details"})]})}function b4({merchant:e,theme:a,isDarkMode:r,onClose:s}){const[n,l]=p.useState("metrics"),[o,i]=p.useState(!0),[c,u]=p.useState(null),[d,x]=p.useState([]),[m,b]=p.useState(null),[v,S]=p.useState(1),[h,y]=p.useState(1),g=e.type==="motorpool";p.useEffect(()=>{f()},[e.merchantId,v]);const f=async()=>{var E;try{i(!0);const A=await J.get(`/admin/accounting/merchants/${e.merchantId}/details?page=${v}&limit=10`);A!=null&&A.success&&(u(A.merchant),b(A.metrics),x(A.transactions||[]),y(((E=A.pagination)==null?void 0:E.pages)||1))}catch{$.error("Failed to load merchant details")}finally{i(!1)}},j=E=>E?new Date(E).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",C=[{id:"metrics",label:"Metrics & Info",icon:Ls},{id:"transactions",label:"Recent Transactions",icon:pa}];return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:s,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:r?"#1E2347":"#FFFFFF",borderColor:a.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-3xl max-h-[85vh] overflow-hidden animate-fadeIn",onClick:E=>E.stopPropagation(),children:[t.jsxs("div",{style:{background:g?"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)":`linear-gradient(135deg, ${a.accent.primary} 0%, ${r?"#B8860B":"#2563EB"} 100%)`},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(255,255,255,0.2)"},className:"w-14 h-14 rounded-full flex items-center justify-center",children:g?t.jsx(br,{className:"w-7 h-7 text-white"}):t.jsx(Jr,{className:"w-7 h-7 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:e.businessName||e.name}),t.jsx("p",{className:"text-white/80 text-sm font-mono",children:e.merchantId})]})]}),t.jsx("button",{onClick:s,className:"text-white/80 hover:text-white transition-colors",children:t.jsx(Tt,{className:"w-6 h-6"})})]}),t.jsx("div",{style:{background:r?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:a.border.primary},className:"px-6 py-3 border-b flex gap-2",children:C.map(E=>{const A=E.icon;return t.jsxs("button",{onClick:()=>l(E.id),style:{background:n===E.id?g?"#8B5CF6":a.accent.primary:"transparent",color:n===E.id?g||!r?"#FFFFFF":"#181D40":a.text.secondary,borderColor:n===E.id?"transparent":a.border.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm border flex items-center gap-2 transition-all hover:opacity-80",children:[t.jsx(A,{className:"w-4 h-4"}),E.label]},E.id)})}),t.jsx("div",{className:"p-6 max-h-[55vh] overflow-y-auto",children:o?t.jsxs("div",{style:{color:a.accent.primary},className:"text-center py-10",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${a.accent.primary} transparent transparent transparent`}}),"Loading details..."]}):n==="metrics"?t.jsx(y4,{merchant:c||e,metrics:m,theme:a,isDarkMode:r,isMotorpool:g}):t.jsx(v4,{transactions:d,theme:a,isDarkMode:r,isMotorpool:g,formatDate:j,currentPage:v,totalPages:h,onPageChange:S})}),t.jsx("div",{style:{borderColor:a.border.primary},className:"px-6 py-4 border-t flex justify-end",children:t.jsx("button",{onClick:s,style:{background:r?"rgba(71,85,105,0.5)":"#E5E7EB",color:a.text.primary},className:"px-6 py-2.5 rounded-xl font-semibold transition-all hover:opacity-80",children:"Close"})})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
      `})]})}function y4({merchant:e,metrics:a,theme:r,isDarkMode:s,isMotorpool:n}){const l=n?"#8B5CF6":r.accent.primary;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"Today's Collections"}),t.jsxs("p",{className:"text-2xl font-bold text-emerald-500",children:["",((a==null?void 0:a.todayCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.todayTransactions)||0," transactions"]})]}),t.jsxs("div",{style:{background:"rgba(59,130,246,0.1)",borderColor:"rgba(59,130,246,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"This Week"}),t.jsxs("p",{className:"text-2xl font-bold text-blue-500",children:["",((a==null?void 0:a.weekCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.weekTransactions)||0," transactions"]})]}),t.jsxs("div",{style:{background:"rgba(251,191,36,0.1)",borderColor:"rgba(251,191,36,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"This Month"}),t.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:["",((a==null?void 0:a.monthCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.monthTransactions)||0," transactions"]})]}),t.jsxs("div",{style:{background:n?"rgba(139,92,246,0.1)":s?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",borderColor:n?"rgba(139,92,246,0.3)":s?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:r.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"All Time"}),t.jsxs("p",{className:"text-2xl font-bold",style:{color:l},children:["",((a==null?void 0:a.totalCollections)||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsxs("p",{style:{color:r.text.muted},className:"text-xs mt-1",children:[(a==null?void 0:a.totalTransactions)||0," transactions"]})]})]}),t.jsxs("div",{children:[t.jsxs("h4",{style:{color:r.text.primary},className:"font-bold mb-3 flex items-center gap-2",children:[n?t.jsx(br,{className:"w-4 h-4"}):t.jsx(Jr,{className:"w-4 h-4"}),n?"Motorpool Info":"Merchant Info"]}),t.jsxs("div",{style:{background:s?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:r.border.primary},className:"rounded-xl border p-4 space-y-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Status"}),t.jsx("span",{style:{background:e.isActive!==!1?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:e.isActive!==!1?"#10B981":"#EF4444"},className:"px-2 py-0.5 rounded text-xs font-bold",children:e.isActive!==!1?"Active":"Inactive"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Type"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold capitalize",children:e.type||"Merchant"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Email"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm",children:e.email||"N/A"})]}),!n&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Contact Person"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm",children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:"N/A"})]}),e.licenseNumber&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"License #"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-mono",children:e.licenseNumber})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Registered"}),t.jsx("span",{style:{color:r.text.muted},className:"text-sm",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})]})]})]})]})}function v4({transactions:e,theme:a,isDarkMode:r,isMotorpool:s,formatDate:n,currentPage:l,totalPages:o,onPageChange:i}){return e.length===0?t.jsxs("div",{style:{color:a.text.tertiary},className:"text-center py-10",children:[t.jsx(pa,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{className:"font-semibold",children:"No transactions yet"}),t.jsx("p",{className:"text-sm mt-1",children:"Transactions will appear here once made"})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"space-y-3",children:e.map((c,u)=>t.jsxs("div",{style:{background:r?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:a.border.primary},className:"rounded-xl border p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:s?"rgba(139,92,246,0.2)":"rgba(16,185,129,0.2)"},className:"w-10 h-10 rounded-full flex items-center justify-center",children:s?t.jsx(br,{className:"w-5 h-5 text-violet-500"}):t.jsx(ul,{className:"w-5 h-5 text-emerald-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.primary},className:"font-semibold text-sm",children:c.userName||"User"}),t.jsx("p",{style:{color:a.text.muted},className:"text-xs",children:c.userEmail||c.cardUid||"N/A"})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"font-bold text-emerald-500",children:["+",(c.amount||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),t.jsx("p",{style:{color:a.text.muted},className:"text-xs",children:n(c.timestamp||c.createdAt)})]})]}),c.itemDescription&&t.jsx("div",{style:{background:r?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)"},className:"mt-2 px-3 py-2 rounded-lg",children:t.jsx("p",{style:{color:a.text.secondary},className:"text-xs",children:c.itemDescription})})]},c._id||u))}),o>1&&t.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[t.jsx("button",{onClick:()=>i(Math.max(1,l-1)),disabled:l===1,style:{background:r?"rgba(71,85,105,0.5)":"#E5E7EB",color:a.text.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm disabled:opacity-50 transition hover:opacity-80",children:"Previous"}),t.jsxs("span",{style:{color:a.text.secondary},className:"px-4 py-2 text-sm",children:["Page ",l," of ",o]}),t.jsx("button",{onClick:()=>i(Math.min(o,l+1)),disabled:l===o,style:{background:r?"rgba(71,85,105,0.5)":"#E5E7EB",color:a.text.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm disabled:opacity-50 transition hover:opacity-80",children:"Next"})]})]})}function j4({log:e,onClose:a}){const{theme:r,isDarkMode:s}=ne();if(!e)return null;const n=c=>{switch(c){case"login":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E",border:"rgba(34,197,94,0.3)"};case"logout":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444",border:"rgba(239,68,68,0.3)"};case"cash_in":return{bg:"rgba(16,185,129,0.2)",color:"#10B981",border:"rgba(16,185,129,0.3)"};case"registration":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"rgba(59,130,246,0.3)"};case"admin_action":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"rgba(59,130,246,0.3)"};case"user_action":return{bg:"rgba(168,85,247,0.2)",color:"#A855F7",border:"rgba(168,85,247,0.3)"};default:return{bg:"rgba(255,212,28,0.2)",color:"#FFD41C",border:"rgba(255,212,28,0.3)"}}},l=c=>c==="success"||!c?{bg:"rgba(34,197,94,0.2)",color:"#22C55E",border:"rgba(34,197,94,0.3)"}:c==="failed"||c==="error"?{bg:"rgba(239,68,68,0.2)",color:"#EF4444",border:"rgba(239,68,68,0.3)"}:{bg:"rgba(251,191,36,0.2)",color:"#FBBF24",border:"rgba(251,191,36,0.3)"},o=n(e.eventType||e.type),i=l(e.status);return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:a,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:s?"#1E2347":"#FFFFFF",borderColor:r.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-2xl max-h-[85vh] overflow-hidden animate-fadeIn",onClick:c=>c.stopPropagation(),children:[t.jsxs("div",{style:{background:`linear-gradient(135deg, ${r.accent.primary} 0%, ${s?"#B8860B":"#2563EB"} 100%)`},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:" Log Details"}),t.jsx("p",{className:"text-white/70 text-sm mt-1 font-mono",children:e.eventId||e._id})]}),t.jsx("button",{onClick:a,className:"text-white/80 hover:text-white transition-colors",children:t.jsx(Tt,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto space-y-5",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsx("span",{style:{background:o.bg,color:o.color,border:`1px solid ${o.border}`},className:"px-3 py-1.5 rounded-full text-xs font-bold uppercase",children:e.eventType||e.type||"action"}),t.jsx("span",{style:{background:i.bg,color:i.color,border:`1px solid ${i.border}`},className:"px-3 py-1.5 rounded-full text-xs font-bold uppercase",children:e.status||"success"}),t.jsxs("span",{style:{color:r.text.secondary},className:"text-sm",children:[" ",new Date(e.timestamp).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})]})]}),e.title&&t.jsxs("div",{children:[t.jsx("div",{style:{color:r.accent.primary},className:"text-xs font-bold uppercase tracking-wide mb-2",children:"Action"}),t.jsx("div",{style:{color:r.text.primary},className:"text-lg font-semibold",children:e.title})]}),(e.description||e.message)&&t.jsxs("div",{children:[t.jsx("div",{style:{color:r.accent.primary},className:"text-xs font-bold uppercase tracking-wide mb-2",children:"Description"}),t.jsx("div",{style:{background:s?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:r.border.primary},className:"p-4 rounded-xl border",children:t.jsx("p",{style:{color:r.text.primary},className:"whitespace-pre-wrap leading-relaxed",children:e.description||e.message})})]}),t.jsxs("div",{children:[t.jsx("div",{style:{color:r.accent.primary},className:"text-xs font-bold uppercase tracking-wide mb-2",children:"Entity Information"}),t.jsxs("div",{style:{background:s?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:r.border.primary},className:"rounded-xl border p-4 space-y-3",children:[(e.adminName||e.driverName)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"User"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold",children:e.adminName||e.driverName||"System"})]}),(e.adminId||e.driverId||e.userId)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"ID Number"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-mono font-semibold",children:e.adminId||e.driverId||e.userId})]}),e.targetEntity&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Target Entity"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold capitalize",children:e.targetEntity})]}),e.targetId&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm",children:"Target ID"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-mono font-semibold",children:e.targetId})]})]})]}),e.metadata&&Object.keys(e.metadata).length>0&&t.jsxs("div",{children:[t.jsx("div",{style:{color:r.accent.primary},className:"text-xs font-bold uppercase tracking-wide mb-2",children:"Additional Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(e.metadata.userName||e.metadata.schoolUId||e.metadata.email||e.metadata.role)&&t.jsxs("div",{style:{background:s?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderColor:s?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)"},className:"p-4 rounded-xl border space-y-3",children:[t.jsx("h4",{style:{color:r.text.primary},className:"font-bold text-sm mb-3",children:"User Information"}),e.metadata.userName&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"Name"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold text-right capitalize",children:e.metadata.userName})]}),e.metadata.schoolUId&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"School ID"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-mono font-semibold",children:e.metadata.schoolUId})]}),e.metadata.email&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"Email"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold text-right break-all",children:e.metadata.email})]}),e.metadata.role&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"Role"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold capitalize",children:e.metadata.role})]})]}),(e.metadata.adminName||e.metadata.adminEmail||e.metadata.adminSchoolUId||e.metadata.registeredAt)&&t.jsxs("div",{style:{background:s?"rgba(16,185,129,0.1)":"rgba(16,185,129,0.05)",borderColor:s?"rgba(16,185,129,0.3)":"rgba(16,185,129,0.2)"},className:"p-4 rounded-xl border space-y-3",children:[t.jsx("h4",{style:{color:r.text.primary},className:"font-bold text-sm mb-3",children:"Processed By"}),e.metadata.adminName&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"Admin"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold text-right",children:e.metadata.adminName})]}),e.metadata.adminEmail&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"Email"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold text-right break-all",children:e.metadata.adminEmail})]}),e.metadata.adminSchoolUId&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"Admin ID"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-mono font-semibold",children:e.metadata.adminSchoolUId})]}),e.metadata.registeredAt&&t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{style:{color:r.text.secondary},className:"text-sm flex-shrink-0",children:"Processed At"}),t.jsx("span",{style:{color:r.text.primary},className:"text-sm font-semibold text-right",children:new Date(e.metadata.registeredAt).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]})]}),t.jsx("div",{style:{borderColor:r.border.primary},className:"px-6 py-4 border-t flex justify-end",children:t.jsx("button",{onClick:a,style:{background:s?"rgba(71,85,105,0.5)":"#E5E7EB",color:r.text.primary},className:"px-6 py-2.5 rounded-xl font-semibold transition-all hover:opacity-80",children:"Close"})})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
      `})]})}function ln(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(""),[c,u]=p.useState(""),[d,x]=p.useState(""),[m,b]=p.useState(""),[v,S]=p.useState(""),[h,y]=p.useState(null),[g,f]=p.useState(1),[j,C]=p.useState("timestamp"),E=20,[A]=p.useState(()=>{const N=localStorage.getItem("adminData");return N?JSON.parse(N):null}),M=async()=>{try{const N=(A==null?void 0:A.role)||"sysad",R=await J.get(`/admin/event-logs?department=${N}`);s(R||[]),l(!1)}catch(N){console.error("Error loading logs:",N),l(!1)}};p.useEffect(()=>{M();const N=setInterval(M,1e4);return()=>clearInterval(N)},[]);const B=()=>{const N=L.map(R=>({Timestamp:new Date(R.timestamp).toLocaleString(),Action:R.title||R.eventType||"N/A",User:R.adminName||R.driverName||R.userId||"System","ID Number":R.adminId||R.driverId||R.userId||"-",Description:R.description||R.message||"-",Status:R.status||"success"}));Ft(N,`${(A==null?void 0:A.role)||"system"}-logs`)},F=N=>{var T,O,V,P,W,Z,te,I;const R=A==null?void 0:A.role;if(R==="sysad")return!0;if(R==="motorpool"){const Y=(N.eventType==="login"||N.eventType==="logout")&&((T=N.metadata)==null?void 0:T.adminRole)==="motorpool",G=N.driverId||N.shuttleId||N.routeId||N.tripId||N.eventType==="route_start"||N.eventType==="route_end"||N.eventType==="driver_assignment"||N.eventType==="shuttle_assignment"||N.eventType==="trip_start"||N.eventType==="trip_end"||N.eventType==="trip_created"||N.eventType==="trip_completed"||N.eventType==="trip_cancelled"||N.eventType==="driver_created"||N.eventType==="driver_updated"||N.eventType==="driver_deleted"||N.eventType==="shuttle_created"||N.eventType==="shuttle_updated"||N.eventType==="shuttle_deleted"||N.eventType==="route_created"||N.eventType==="route_updated"||N.eventType==="route_deleted"||N.eventType==="phone_assigned"||N.eventType==="phone_unassigned"||N.eventType==="payment"||N.eventType==="passenger_boarding"||N.eventType==="passenger_alighting"||((O=N.metadata)==null?void 0:O.department)==="motorpool"||N.targetEntity==="driver"||N.targetEntity==="shuttle"||N.targetEntity==="route"||N.targetEntity==="trip"||N.targetEntity==="phone";return Y||G}if(R==="merchant"){const Y=(N.eventType==="login"||N.eventType==="logout")&&((V=N.metadata)==null?void 0:V.adminRole)==="merchant",G=N.eventType==="merchant_payment"||N.eventType==="merchant_transaction"||((P=N.metadata)==null?void 0:P.department)==="merchant"||N.targetEntity==="merchant";return Y||G}if(R==="treasury"){const Y=(N.eventType==="login"||N.eventType==="logout")&&((W=N.metadata)==null?void 0:W.adminRole)==="treasury",G=N.eventType==="cash_in"||N.eventType==="registration"||N.eventType==="user_created"||N.eventType==="user_activated"||N.eventType==="balance_update"||((Z=N.metadata)==null?void 0:Z.department)==="treasury"||N.targetEntity==="user"||N.targetEntity==="transaction";return Y||G}if(R==="accounting"){const Y=(N.eventType==="login"||N.eventType==="logout")&&((te=N.metadata)==null?void 0:te.adminRole)==="accounting",G=N.eventType==="report_generated"||N.eventType==="export_downloaded"||((I=N.metadata)==null?void 0:I.department)==="accounting";return Y||G}return!1},L=r.filter(N=>{var R,T,O,V,P,W,Z;if(!F(N))return!1;if(o){const te=o.toLowerCase();if(!(((R=N.eventType)==null?void 0:R.toLowerCase().includes(te))||((T=N.type)==null?void 0:T.toLowerCase().includes(te))||((O=N.title)==null?void 0:O.toLowerCase().includes(te))||((V=N.description)==null?void 0:V.toLowerCase().includes(te))||((P=N.message)==null?void 0:P.toLowerCase().includes(te))||((W=N.adminName)==null?void 0:W.toLowerCase().includes(te))||((Z=N.adminId)==null?void 0:Z.toLowerCase().includes(te))||new Date(N.timestamp).toLocaleString().toLowerCase().includes(te)))return!1}if(c&&(N.eventType||N.type)!==c||d&&N.status!==d)return!1;if(m||v){const te=new Date(N.timestamp);if(m&&te<new Date(m)||v&&te>new Date(v+"T23:59:59"))return!1}return!0}),k=[...L].sort((N,R)=>j==="timestamp"?new Date(R.timestamp)-new Date(N.timestamp):j==="type"?(N.eventType||N.type||"").localeCompare(R.eventType||R.type||""):j==="user"?(N.adminName||N.driverName||"").localeCompare(R.adminName||R.driverName||""):0),U=Math.ceil(k.length/E),D=(g-1)*E,_=D+E,z=k.slice(D,_);p.useEffect(()=>{f(1)},[o,c,d,m,v]);const q=()=>{const N=A==null?void 0:A.role;return N==="motorpool"?[{value:"login",label:"Login"},{value:"logout",label:"Logout"},{value:"driver_created",label:"Driver Created"},{value:"driver_updated",label:"Driver Updated"},{value:"shuttle_created",label:"Shuttle Created"},{value:"route_start",label:"Route Start"},{value:"route_end",label:"Route End"},{value:"trip_created",label:"Trip Created"},{value:"payment",label:"Payment"}]:N==="treasury"?[{value:"login",label:"Login"},{value:"logout",label:"Logout"},{value:"cash_in",label:"Cash-In"},{value:"registration",label:"Registration"},{value:"user_created",label:"User Created"},{value:"user_activated",label:"User Activated"}]:N==="merchant"?[{value:"login",label:"Login"},{value:"logout",label:"Logout"},{value:"merchant_payment",label:"Payment"},{value:"merchant_transaction",label:"Transaction"}]:[{value:"login",label:"Login"},{value:"logout",label:"Logout"},{value:"admin_action",label:"Admin Action"},{value:"user_action",label:"User Action"},{value:"system_event",label:"System Event"}]},w=N=>N==="success"||!N?{bg:"rgba(34,197,94,0.2)",color:"#22C55E",label:"Success"}:N==="failed"||N==="error"?{bg:"rgba(239,68,68,0.2)",color:"#EF4444",label:"Failed"}:{bg:"rgba(251,191,36,0.2)",color:"#FBBF24",label:N};return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading logs..."]}):t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Activity Logs"]}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:["Showing ",L.length," logs  Page ",g," of ",Math.max(1,U)]})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.8)":e.bg.card,borderColor:e.accent.primary},className:"rounded-xl border-2 p-4 mb-5 flex flex-wrap gap-3 items-end",children:[t.jsx(Ot,{value:o,onChange:i,placeholder:"Search logs..."}),t.jsx(Jt,{value:c,onChange:u,label:"Type",options:q()}),t.jsx(Jt,{value:d,onChange:x,label:"Status",options:[{value:"success",label:"Success"},{value:"failed",label:"Failed"}]}),t.jsx(hr,{startDate:m,endDate:v,onStartChange:b,onEndChange:S}),t.jsx("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:a?"rgba(30,35,71,0.8)":"#F3F4F6"},children:[{value:"timestamp",label:"Date"},{value:"type",label:"Type"},{value:"user",label:"User"}].map(N=>t.jsx("button",{onClick:()=>{C(N.value),f(1)},style:{background:j===N.value?e.accent.primary:"transparent",color:j===N.value?a?"#181D40":"#FFFFFF":e.text.secondary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all hover:opacity-80",children:N.label},N.value))}),t.jsx($t,{onClick:B,disabled:k.length===0})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:k.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{className:"font-semibold",children:"No logs found"}),t.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your filters"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"overflow-x-auto rounded-xl border mb-5",children:t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Timestamp"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Action"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"User"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"ID Number"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Description"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-center p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:z.map((N,R)=>{const T=N.adminName||N.driverName||"System",O=N.adminId||N.driverId||N.userId||"-",V=w(N.status);return t.jsxs("tr",{style:{borderColor:e.border.primary},className:"border-b hover:bg-white/5 transition",children:[t.jsxs("td",{style:{color:e.text.secondary},className:"p-4 text-xs",children:[t.jsx("div",{children:new Date(N.timestamp).toLocaleDateString()}),t.jsx("div",{style:{color:e.text.muted},className:"text-[11px]",children:new Date(N.timestamp).toLocaleTimeString()})]}),t.jsxs("td",{className:"p-4",children:[t.jsx("div",{style:{color:e.text.primary},className:"font-semibold mb-1",children:N.title||"N/A"}),t.jsx("span",{style:{background:N.eventType==="login"?"rgba(34,197,94,0.2)":N.eventType==="logout"?"rgba(239,68,68,0.2)":"rgba(59,130,246,0.2)",color:N.eventType==="login"?"#22C55E":N.eventType==="logout"?"#EF4444":"#3B82F6"},className:"inline-block px-2.5 py-0.5 rounded-full text-[10px] font-bold uppercase",children:N.eventType||N.type||"action"})]}),t.jsx("td",{style:{color:e.text.primary},className:"p-4 font-semibold",children:T}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4 font-mono text-xs",children:O}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4 max-w-[300px] overflow-hidden text-ellipsis whitespace-nowrap",children:N.description||N.message||"-"}),t.jsx("td",{className:"p-4",children:t.jsx("span",{style:{background:V.bg,color:V.color},className:"inline-block px-3 py-1 rounded-full text-[10px] font-bold uppercase",children:V.label})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("button",{onClick:()=>y(N),style:{background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"px-3.5 py-1.5 border-2 rounded-lg text-[11px] font-semibold cursor-pointer hover:opacity-80 transition-colors",children:"View"})})]},N._id||R)})})]})}),U>1&&t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"flex justify-between items-center p-4 rounded-xl border",children:[t.jsxs("div",{style:{color:e.text.secondary},className:"text-sm",children:["Showing ",D+1,"-",Math.min(_,k.length)," of ",k.length]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>f(Math.max(1,g-1)),disabled:g===1,style:{background:g===1?"rgba(255,255,255,0.05)":a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",borderColor:e.border.primary,color:g===1?e.text.muted:e.accent.primary},className:"px-4 py-2 border-2 rounded-lg text-xs font-semibold transition-colors disabled:cursor-not-allowed",children:"Previous"}),t.jsx("button",{onClick:()=>f(Math.min(U,g+1)),disabled:g===U,style:{background:g===U?"rgba(255,255,255,0.05)":a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",borderColor:e.border.primary,color:g===U?e.text.muted:e.accent.primary},className:"px-4 py-2 border-2 rounded-lg text-xs font-semibold transition-colors disabled:cursor-not-allowed",children:"Next"})]})]})]})}),h&&t.jsx(j4,{log:h,onClose:()=>y(null)})]})}function ts(){const[e,a]=p.useState(()=>{const F=localStorage.getItem("adminData");return F?JSON.parse(F):null}),[r,s]=p.useState(!0),[n,l]=p.useState("personal"),[o,i]=p.useState(1),[c,u]=p.useState({oldPin:"",newPin:"",otp:""}),[d,x]=p.useState(!1),[m,b]=p.useState(""),[v,S]=p.useState(!1),[h,y]=p.useState(!1);p.useEffect(()=>{(async()=>{try{const L=localStorage.getItem("adminToken");if(!L){s(!1);return}const k=await fetch("http://18.166.29.239:3000/api/admin/auth/me",{headers:{Authorization:`Bearer ${L}`}});if(k.ok){const U=await k.json();a(U),localStorage.setItem("adminData",JSON.stringify(U))}}catch(L){console.error("Failed to fetch profile:",L)}finally{s(!1)}})()},[]);const g=(F,L)=>{F!=="otp"&&!/^\d*$/.test(L)||(F==="oldPin"||F==="newPin")&&L.length>6||F==="otp"&&L.length>6||(u({...c,[F]:L}),b(""))},f=async()=>{if(!c.oldPin||c.oldPin.length!==6){b("Old PIN must be exactly 6 digits");return}if(!c.newPin||c.newPin.length!==6){b("New PIN must be exactly 6 digits");return}if(c.oldPin===c.newPin){b("New PIN must be different from old PIN");return}x(!0),b("");try{const F=await fetch("http://18.166.29.239:3000/api/admin/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify({email:e.email,purpose:"password_change"})}),L=await F.json();if(!F.ok)throw new Error(L.error||"Failed to send OTP");S(!0),i(2),b("")}catch(F){console.error("Send OTP error:",F),b(F.message||"Failed to send OTP. Please try again.")}finally{x(!1)}},j=async()=>{if(!c.otp||c.otp.length!==6){b("OTP must be exactly 6 digits");return}x(!0),b("");try{const F=await fetch("http://18.166.29.239:3000/api/admin/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify({oldPin:c.oldPin,newPin:c.newPin,otp:c.otp})}),L=await F.json();if(!F.ok)throw new Error(L.error||"Failed to change password");i(3),b("")}catch(F){console.error("Change password error:",F),b(F.message||"Failed to change password. Please try again.")}finally{x(!1)}},C=()=>{i(1),u({oldPin:"",newPin:"",otp:""}),b(""),S(!1),y(!1)},E=()=>{var k,U;if(!e)return"?";const F=((k=e.firstName)==null?void 0:k[0])||"",L=((U=e.lastName)==null?void 0:U[0])||"";return(F+L).toUpperCase()},A=F=>({motorpool:"Motorpool Admin",merchant:"Merchant Admin",treasury:"Treasury Admin",accounting:"Accounting Admin",sysad:"System Administrator"})[F]||F,M=()=>t.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",overflow:"hidden"},children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(255,212,28,0.2) 0%, rgba(255,212,28,0.05) 100%)",padding:"40px",display:"flex",alignItems:"center",gap:"24px",borderBottom:"1px solid rgba(255,212,28,0.2)"},children:[t.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"linear-gradient(135deg, #FFD41C 0%, #F59E0B 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"40px",fontWeight:800,color:"#181D40",boxShadow:"0 0 0 6px rgba(255,212,28,0.2)"},children:E()}),t.jsxs("div",{children:[t.jsxs("h2",{style:{fontSize:"28px",fontWeight:700,color:"#FBFBFB",margin:"0 0 8px 0"},children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),t.jsx("div",{style:{display:"inline-block",padding:"6px 16px",background:"rgba(255,212,28,0.2)",border:"1px solid rgba(255,212,28,0.4)",borderRadius:"20px",color:"#FFD41C",fontSize:"13px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.5px"},children:A(e==null?void 0:e.role)})]})]}),t.jsx("div",{style:{padding:"32px"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"24px"},children:[t.jsx(Ua,{label:"Admin ID",value:(e==null?void 0:e.adminId)||"N/A"}),t.jsx(Ua,{label:"Role",value:A(e==null?void 0:e.role)}),t.jsx(Ua,{label:"First Name",value:(e==null?void 0:e.firstName)||"N/A"}),t.jsx(Ua,{label:"Last Name",value:(e==null?void 0:e.lastName)||"N/A"}),t.jsx(Ua,{label:"Middle Name",value:(e==null?void 0:e.middleName)||"N/A"}),t.jsx(Ua,{label:"Email Address",value:(e==null?void 0:e.email)||"N/A"}),t.jsx(Ua,{label:"Account Status",value:e!=null&&e.isActive?"Active":"Inactive",highlight:e!=null&&e.isActive?"success":"error"}),t.jsx(Ua,{label:"Created By",value:(e==null?void 0:e.createdBy)||"System"})]})})]}),B=()=>t.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"16px",border:"1px solid rgba(255,212,28,0.2)",overflow:"hidden"},children:[t.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",padding:"24px 32px",borderBottom:"1px solid rgba(255,212,28,0.2)"},children:[t.jsxs("h3",{style:{fontSize:"18px",fontWeight:700,color:"#FFD41C",margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""})," Security Settings"]}),t.jsx("p",{style:{fontSize:"14px",color:"rgba(251,251,251,0.6)",margin:0},children:"Update your 6-digit PIN for enhanced security"})]}),t.jsxs("div",{style:{padding:"32px"},children:[m&&t.jsxs("div",{style:{padding:"14px 20px",background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",color:"#EF4444",fontSize:"13px",fontWeight:600,marginBottom:"24px",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:m})]}),o===1&&t.jsxs("div",{style:{maxWidth:"500px"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Enter Old PIN (6 digits) *"}),t.jsx("input",{type:"password",value:c.oldPin,onChange:F=>g("oldPin",F.target.value),disabled:d,placeholder:"",maxLength:"6",style:{width:"100%",padding:"14px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"24px",fontWeight:700,letterSpacing:"12px",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Enter New PIN (6 digits) *"}),t.jsx("input",{type:"password",value:c.newPin,onChange:F=>g("newPin",F.target.value),disabled:d,placeholder:"",maxLength:"6",style:{width:"100%",padding:"14px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"24px",fontWeight:700,letterSpacing:"12px",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}}),t.jsx("p",{style:{fontSize:"11px",color:"rgba(251, 251, 251, 0.5)",marginTop:"8px",marginBottom:0},children:"Must be different from old PIN"})]}),t.jsx("button",{onClick:f,disabled:d||c.oldPin.length!==6||c.newPin.length!==6,style:{width:"100%",padding:"14px",background:d||c.oldPin.length!==6||c.newPin.length!==6?"rgba(255, 212, 28, 0.3)":"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:d||c.oldPin.length!==6||c.newPin.length!==6?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.3s ease"},children:d?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid rgba(24, 29, 64, 0.3)",borderTopColor:"#181D40",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),t.jsx("span",{children:"Sending OTP..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Send OTP to Email"})]})})]}),o===2&&t.jsxs("div",{style:{maxWidth:"500px"},children:[t.jsxs("div",{style:{padding:"16px",background:"rgba(59, 130, 246, 0.15)",border:"2px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",marginBottom:"24px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:""}),t.jsx("div",{style:{fontSize:"14px",color:"#3B82F6",fontWeight:600,marginBottom:"4px"},children:"OTP Sent Successfully!"}),t.jsxs("div",{style:{fontSize:"12px",color:"rgba(251, 251, 251, 0.7)"},children:["Check your email: ",e==null?void 0:e.email]})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Enter OTP (6 digits) *"}),t.jsx("input",{type:"text",value:c.otp,onChange:F=>g("otp",F.target.value),disabled:d,placeholder:"______",maxLength:"6",style:{width:"100%",padding:"14px",border:"2px solid rgba(255, 212, 28, 0.3)",borderRadius:"10px",background:"rgba(251, 251, 251, 0.05)",color:"rgba(251, 251, 251, 0.9)",fontSize:"24px",fontWeight:700,letterSpacing:"12px",textAlign:"center",boxSizing:"border-box",fontFamily:"monospace"}}),t.jsx("p",{style:{fontSize:"11px",color:"rgba(251, 251, 251, 0.5)",marginTop:"8px",marginBottom:0},children:"OTP expires in 10 minutes"})]}),t.jsxs("button",{onClick:()=>y(!0),disabled:d||c.otp.length!==6,style:{width:"100%",padding:"14px",background:d||c.otp.length!==6?"rgba(255, 212, 28, 0.3)":"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:d||c.otp.length!==6?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.3s ease"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Change Password"})]})]}),o===3&&t.jsxs("div",{style:{textAlign:"center",padding:"40px 0",maxWidth:"500px",margin:"0 auto"},children:[t.jsx("div",{style:{fontSize:"80px",marginBottom:"24px"},children:""}),t.jsx("h3",{style:{fontSize:"24px",fontWeight:700,color:"#22C55E",marginBottom:"12px"},children:"Password Changed Successfully!"}),t.jsx("p",{style:{fontSize:"14px",color:"rgba(251, 251, 251, 0.7)",marginBottom:"32px"},children:"Your password has been updated. Please use your new PIN for future logins."}),t.jsx("button",{onClick:C,style:{padding:"14px 32px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:700,cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px"},children:"Done"})]}),h&&t.jsx("div",{onClick:()=>y(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.7)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{onClick:F=>F.stopPropagation(),style:{background:"#1a1f3a",borderRadius:"16px",padding:"32px",maxWidth:"400px",width:"90%",border:"2px solid rgba(255, 212, 28, 0.3)",textAlign:"center"},children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("h3",{style:{fontSize:"18px",fontWeight:700,color:"#FBFBFB",marginBottom:"12px"},children:"Confirm Password Change"}),t.jsx("p",{style:{fontSize:"14px",color:"rgba(251, 251, 251, 0.7)",marginBottom:"24px"},children:"Are you sure you want to change your password? You will need to use the new PIN for future logins."}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:()=>y(!1),style:{flex:1,padding:"12px",background:"rgba(251, 251, 251, 0.1)",color:"rgba(251, 251, 251, 0.7)",border:"1px solid rgba(251, 251, 251, 0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),t.jsx("button",{onClick:()=>{y(!1),j()},style:{flex:1,padding:"12px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer"},children:"Confirm"})]})]})}),t.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})]});return t.jsxs("div",{children:[t.jsxs("div",{className:"mb-[30px] border-b-2 border-[rgba(255,212,28,0.2)] pb-5",children:[t.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," My Profile"]}),t.jsx("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:"Manage your account information and security settings"})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"30px"},children:[t.jsxs("button",{onClick:()=>l("personal"),style:{padding:"12px 24px",background:n==="personal"?"rgba(255, 212, 28, 0.15)":"rgba(30, 35, 71, 0.4)",border:n==="personal"?"2px solid rgba(255, 212, 28, 0.4)":"2px solid rgba(255, 212, 28, 0.1)",borderRadius:"12px",color:n==="personal"?"#FFD41C":"rgba(251, 251, 251, 0.7)",fontSize:"14px",fontWeight:n==="personal"?700:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Personal Information"})]}),t.jsxs("button",{onClick:()=>l("security"),style:{padding:"12px 24px",background:n==="security"?"rgba(255, 212, 28, 0.15)":"rgba(30, 35, 71, 0.4)",border:n==="security"?"2px solid rgba(255, 212, 28, 0.4)":"2px solid rgba(255, 212, 28, 0.1)",borderRadius:"12px",color:n==="security"?"#FFD41C":"rgba(251, 251, 251, 0.7)",fontSize:"14px",fontWeight:n==="security"?700:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Security Settings"})]})]}),r?t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"80px 20px",color:"rgba(251, 251, 251, 0.6)"},children:t.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid rgba(255, 212, 28, 0.2)",borderTopColor:"#FFD41C",borderRadius:"50%",animation:"spin 0.8s linear infinite"}})}):t.jsxs(t.Fragment,{children:[n==="personal"&&M(),n==="security"&&B()]})]})}function Ua({label:e,value:a,highlight:r,fullWidth:s}){const l=r==="success"?{bg:"rgba(34, 197, 94, 0.15)",border:"rgba(34, 197, 94, 0.3)",color:"#22C55E"}:r==="error"?{bg:"rgba(239, 68, 68, 0.15)",border:"rgba(239, 68, 68, 0.3)",color:"#EF4444"}:r==="warning"?{bg:"rgba(245, 158, 11, 0.15)",border:"rgba(245, 158, 11, 0.3)",color:"#F59E0B"}:null;return t.jsxs("div",{style:{gridColumn:s?"1 / -1":"span 1"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"11px",fontWeight:700,color:"rgba(255,212,28,0.8)",textTransform:"uppercase",letterSpacing:"0.5px"},children:e}),t.jsx("div",{style:{padding:"12px 16px",background:l?l.bg:"rgba(251,251,251,0.05)",border:`1px solid ${l?l.border:"rgba(255,212,28,0.1)"}`,borderRadius:"8px",color:l?l.color:"rgba(251,251,251,0.9)",fontSize:"15px",fontWeight:r?700:500},children:a||"N/A"})]})}const Au="http://18.166.29.239:3000/api/admin",Ru=()=>({Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}),Uh=async(e={})=>{try{const a=new URLSearchParams({page:e.page||1,limit:e.limit||1e3,...e.status&&{status:e.status},...e.priority&&{priority:e.priority},...e.submissionType&&{submissionType:e.submissionType},...e.startDate&&{startDate:e.startDate},...e.endDate&&{endDate:e.endDate},...e.search&&{search:e.search}}),r=await fetch(`${Au}/user-concerns?${a}`,{headers:Ru()}),s=await r.json();if(!r.ok)throw new Error(s.message||s.error||"Failed to fetch concerns");return Array.isArray(s)?{success:!0,concerns:s}:s}catch(a){throw a}},N4=async e=>{try{const a=await fetch(`${Au}/user-concerns/${e}`,{headers:Ru()}),r=await a.json();if(!a.ok)throw new Error(r.message||"Failed to fetch concern details");return r}catch(a){throw a}},hd=async(e,a)=>{try{const r=await fetch(`${Au}/user-concerns/${e}/status`,{method:"PATCH",headers:Ru(),body:JSON.stringify(a)}),s=await r.json();if(!r.ok)throw new Error(s.message||"Failed to update concern status");return s}catch(r){throw r}};function S4({concern:e,onClose:a}){if(!e)return null;const r=o=>{switch(o){case"high":return{bg:"rgba(239,68,68,0.2)",color:"#EF4444"};case"medium":return{bg:"rgba(251,191,36,0.2)",color:"#FBBF24"};default:return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"}}},s=o=>{switch(o){case"resolved":return{bg:"rgba(34,197,94,0.2)",color:"#22C55E"};case"in_progress":return{bg:"rgba(59,130,246,0.2)",color:"#3B82F6"};case"closed":return{bg:"rgba(107,114,128,0.2)",color:"#6B7280"};default:return{bg:"rgba(251,191,36,0.2)",color:"#FBBF24"}}},n=r(e.priority),l=s(e.status);return t.jsxs("div",{onClick:a,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{onClick:o=>o.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"700px",width:"90%",maxHeight:"85vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#FFD41C",margin:0},children:"Concern Details"}),t.jsxs("span",{style:{fontSize:"14px",color:"rgba(251,251,251,0.5)",fontWeight:600},children:["#",e.concernId||e._id.slice(-6)]})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[t.jsxs("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:n.bg,color:n.color},children:[e.priority||"low"," priority"]}),t.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:l.bg,color:l.color},children:e.status||"pending"}),t.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",background:"rgba(59,130,246,0.2)",color:"#3B82F6"},children:e.category||"general"})]})]}),t.jsx("button",{onClick:a,style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",border:"1px solid rgba(255,212,28,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"User Information"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"User Name"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:e.userName||"N/A"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"User ID"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontFamily:"monospace"},children:e.userId||"N/A"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Submitted At"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:new Date(e.submittedAt||e.createdAt).toLocaleString()})]}),e.email&&t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Email"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:e.email})]})]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"8px"},children:"Subject"}),t.jsx("div",{style:{fontSize:"16px",color:"rgba(251,251,251,0.95)",fontWeight:600,padding:"12px 16px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",border:"1px solid rgba(255,212,28,0.1)"},children:e.title||e.subject||"No title provided"})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"8px"},children:"Description"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.85)",lineHeight:"1.6",padding:"16px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",border:"1px solid rgba(255,212,28,0.1)",whiteSpace:"pre-wrap"},children:e.description||e.message||"No description provided"})]}),(e.attachments||e.metadata)&&t.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,212,28,0.1)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"Additional Information"}),e.attachments&&t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Attachments"}),t.jsxs("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.7)"},children:[e.attachments.length||0," file(s)"]})]}),e.metadata&&t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Metadata"}),t.jsx("div",{style:{fontSize:"13px",color:"rgba(251,251,251,0.6)",fontFamily:"monospace"},children:JSON.stringify(e.metadata,null,2)})]})]}),e.response&&t.jsxs("div",{style:{background:"rgba(34,197,94,0.05)",border:"1px solid rgba(34,197,94,0.2)",borderRadius:"12px",padding:"16px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#22C55E",textTransform:"uppercase",marginBottom:"8px"},children:"Admin Response"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.85)",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:e.response}),e.respondedAt&&t.jsxs("div",{style:{fontSize:"12px",color:"rgba(251,251,251,0.5)",marginTop:"8px"},children:["Responded at: ",new Date(e.respondedAt).toLocaleString()]})]})]}),t.jsx("div",{style:{padding:"20px 24px",borderTop:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{onClick:a,style:{padding:"12px 24px",background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",boxShadow:"0 4px 12px rgba(255,212,28,0.4)"},children:"Close"})})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}function w4(){const[e,a]=p.useState([]),[r,s]=p.useState(!0),[n,l]=p.useState(null),[o,i]=p.useState("all"),[c,u]=p.useState(""),[d,x]=p.useState(""),[m,b]=p.useState(""),[v,S]=p.useState(""),[h,y]=p.useState(""),[g,f]=p.useState(""),[j,C]=p.useState(null),[E,A]=p.useState(!1),[M,B]=p.useState(!1),[F,L]=p.useState(""),[k,U]=p.useState(!1),[D,_]=p.useState(1),z=20,q=async(I=!1)=>{try{I||s(!0);const Y=await Uh({page:1,limit:1e3});Y.success&&a(Y.concerns||[])}catch(Y){console.error("Error loading concerns:",Y)}finally{I||s(!1)}};p.useEffect(()=>{q(!1);const I=setInterval(()=>q(!0),5e3);return()=>clearInterval(I)},[]);const w=async I=>{try{const Y=await N4(I);Y.success&&(C(Y.concern),A(!0))}catch{l({type:"error",message:"Failed to load concern details"}),setTimeout(()=>l(null),3e3)}},N=I=>{C(I),L(""),A(!1),B(!0)},R=async(I,Y)=>{try{if(Y==="resolved"){C(I),B(!0);return}(await hd(I.concernId,{status:Y})).success&&(l({type:"success",message:"Status updated!"}),q(!0),setTimeout(()=>l(null),2e3))}catch(G){console.error("Error updating status:",G),l({type:"error",message:G.message||"Failed to update status"}),setTimeout(()=>l(null),3e3)}},T=async()=>{U(!0);try{(await hd(j.concernId,{status:"resolved",resolution:F.trim()||"No resolution details provided."})).success&&(l({type:"success",message:"Concern resolved and email sent"}),B(!1),q(!0),setTimeout(()=>l(null),2e3))}catch(I){l({type:"error",message:I.message||"Failed to resolve concern"}),setTimeout(()=>l(null),3e3)}finally{U(!1)}},O=()=>{const I=Qr(V);Ft(I,"concerns")},V=e.filter(I=>{var Y,G,K,se,ce,ae,oe,he,Ke,ct,dt;if(o==="assistance"&&I.submissionType!=="assistance"||o==="feedback"&&I.submissionType!=="feedback")return!1;if(c){const ve=c.toLowerCase();if(!(((Y=I.concernId)==null?void 0:Y.toLowerCase().includes(ve))||((G=I._id)==null?void 0:G.toLowerCase().includes(ve))||((K=I.userName)==null?void 0:K.toLowerCase().includes(ve))||((se=I.userId)==null?void 0:se.toLowerCase().includes(ve))||((ce=I.title)==null?void 0:ce.toLowerCase().includes(ve))||((ae=I.description)==null?void 0:ae.toLowerCase().includes(ve))||((oe=I.category)==null?void 0:oe.toLowerCase().includes(ve))||((he=I.subject)==null?void 0:he.toLowerCase().includes(ve))||((Ke=I.feedbackText)==null?void 0:Ke.toLowerCase().includes(ve))||((ct=I.priority)==null?void 0:ct.toLowerCase().includes(ve))||((dt=I.status)==null?void 0:dt.toLowerCase().includes(ve))))return!1}if(d&&I.status!==d||m&&I.priority!==m||v&&I.category!==v)return!1;if(h||g){const ve=new Date(I.submittedAt||I.createdAt);if(h&&ve<new Date(h)||g&&ve>new Date(g+"T23:59:59"))return!1}return!0}),P=Math.ceil(V.length/z),W=(D-1)*z,Z=W+z,te=V.slice(W,Z);return p.useEffect(()=>{_(1)},[c,d,m,v,h,g,o]),r?t.jsx("div",{className:"text-center py-[60px] text-[#FFD41C]",children:"Loading concerns..."}):t.jsxs("div",{className:"h-full flex flex-col",children:[n&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",background:n.type==="success"?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",color:n.type==="success"?"#22C55E":"#EF4444",border:`2px solid ${n.type==="success"?"#22C55E":"#EF4444"}`,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e4},children:n.message}),t.jsxs("div",{className:"mb-[30px] border-b-2 border-[rgba(255,212,28,0.2)] pb-5",children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("h2",{className:"text-2xl font-bold text-[#FFD41C] m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," User Concerns"]}),t.jsx("p",{className:"text-[13px] text-[rgba(251,251,251,0.6)] m-0",children:V.length>0?`Showing ${W+1}-${Math.min(Z,V.length)} of ${V.length}  Page ${D} of ${P}`:`Support tickets and feedback  Total: ${e.length}`})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px"},children:[t.jsxs("button",{onClick:()=>i("all"),style:{padding:"10px 20px",background:o==="all"?"rgba(255,212,28,0.2)":"transparent",border:`2px solid ${o==="all"?"#FFD41C":"rgba(255,212,28,0.3)"}`,borderRadius:"8px",color:o==="all"?"#FFD41C":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["All (",e.length,")"]}),t.jsxs("button",{onClick:()=>i("assistance"),style:{padding:"10px 20px",background:o==="assistance"?"rgba(59,130,246,0.2)":"transparent",border:`2px solid ${o==="assistance"?"#3B82F6":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:o==="assistance"?"#3B82F6":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Assistance (",e.filter(I=>I.submissionType==="assistance").length,")"]}),t.jsxs("button",{onClick:()=>i("feedback"),style:{padding:"10px 20px",background:o==="feedback"?"rgba(34,197,94,0.2)":"transparent",border:`2px solid ${o==="feedback"?"#22C55E":"rgba(34,197,94,0.3)"}`,borderRadius:"8px",color:o==="feedback"?"#22C55E":"rgba(251,251,251,0.6)",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Feedback (",e.filter(I=>I.submissionType==="feedback").length,")"]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[t.jsx(Ot,{value:c,onChange:u,placeholder:"Search by ID, user, title, category, or status..."}),t.jsx(Jt,{value:d,onChange:x,label:"Status",options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]}),t.jsx(Jt,{value:m,onChange:b,label:"Priority",options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}]}),t.jsx(Jt,{value:v,onChange:S,label:"Category",options:[{value:"payment_issue",label:"Payment Issue"},{value:"driver_complaint",label:"Driver Complaint"},{value:"shuttle_issue",label:"Shuttle Issue"},{value:"technical_problem",label:"Technical Problem"},{value:"safety_concern",label:"Safety Concern"},{value:"route_suggestion",label:"Route Suggestion"},{value:"billing_dispute",label:"Billing Dispute"},{value:"lost_item",label:"Lost Item"},{value:"other",label:"Other"}]}),t.jsx(hr,{startDate:h,endDate:g,onStartChange:y,onEndChange:f}),t.jsx($t,{onClick:O,disabled:V.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:e.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{children:"No concerns found"})]}):V.length===0?t.jsxs("div",{className:"text-center py-[60px] text-[rgba(251,251,251,0.5)]",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("div",{style:{marginBottom:"12px"},children:"No concerns match your search"}),t.jsx("button",{onClick:()=>u(""),style:{padding:"8px 16px",background:"rgba(255,212,28,0.15)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:"#FFD41C",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Clear Search"})]}):t.jsxs("div",{className:"overflow-x-auto rounded-xl border border-[rgba(255,212,28,0.2)]",children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-[rgba(255,212,28,0.1)]",children:[t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"ID"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"User"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Subject"}),o==="all"&&t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Type"}),o==="feedback"&&t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Rating"}),o!=="feedback"&&t.jsxs(t.Fragment,{children:[t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Priority"}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Status"})]}),t.jsx("th",{className:"text-left p-4 text-[11px] font-extrabold text-[#FFD41C] uppercase border-b-2 border-[rgba(255,212,28,0.3)]",children:"Date"}),t.jsx("th",{style:{textAlign:"right",padding:"16px",fontSize:"11px",fontWeight:800,color:"#FFD41C",textTransform:"uppercase",borderBottom:"2px solid rgba(255,212,28,0.3)"},children:"Actions"})]})}),t.jsx("tbody",{children:te.map(I=>t.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,212,28,0.1)"},children:[t.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:t.jsx("strong",{children:I.concernId||I._id.slice(-6)})}),t.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:I.userName||"N/A"}),t.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:I.subject||(I.selectedConcerns&&I.selectedConcerns.length>0?`${I.selectedConcerns[0]}${I.selectedConcerns.length>1?` +${I.selectedConcerns.length-1}`:""}`:"N/A")}),o==="all"&&t.jsx("td",{style:{padding:"16px"},children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:I.submissionType==="assistance"?"rgba(59,130,246,0.2)":"rgba(34,197,94,0.2)",color:I.submissionType==="assistance"?"#3B82F6":"#22C55E",border:`1px solid ${I.submissionType==="assistance"?"rgba(59,130,246,0.3)":"rgba(34,197,94,0.3)"}`},children:I.submissionType==="assistance"?" Assistance":" Feedback"})}),o==="feedback"&&t.jsx("td",{style:{padding:"16px"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[[...Array(5)].map((Y,G)=>t.jsx("span",{style:{fontSize:"16px",color:G<(I.rating||0)?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},G)),t.jsxs("span",{style:{marginLeft:"8px",color:"rgba(251,251,251,0.7)",fontSize:"12px"},children:["(",I.rating||0,"/5)"]})]})}),o!=="feedback"&&t.jsxs(t.Fragment,{children:[t.jsx("td",{style:{padding:"16px"},children:I.submissionType==="assistance"?t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:I.priority==="urgent"?"rgba(239,68,68,0.2)":I.priority==="high"?"rgba(251,146,60,0.2)":I.priority==="medium"?"rgba(251,191,36,0.2)":"rgba(34,197,94,0.2)",color:I.priority==="urgent"?"#EF4444":I.priority==="high"?"#FB923C":I.priority==="medium"?"#FBBF24":"#22C55E"},children:I.priority||"low"}):t.jsx("span",{style:{color:"rgba(251,251,251,0.4)",fontSize:"11px"},children:""})}),t.jsx("td",{style:{padding:"16px"},children:I.submissionType==="assistance"?t.jsxs("select",{value:I.status||"pending",onChange:Y=>R(I,Y.target.value),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid rgba(255,212,28,0.3)",background:"rgba(255,255,255,0.05)",color:I.status==="resolved"?"#22C55E":I.status==="in_progress"?"#3B82F6":I.status==="closed"?"#6B7280":"#FBBF24",fontSize:"11px",fontWeight:600,cursor:"pointer"},children:[t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"in_progress",children:"In Progress"}),t.jsx("option",{value:"resolved",children:"Resolved"}),t.jsx("option",{value:"closed",children:"Closed"})]}):t.jsx("span",{style:{color:"rgba(251,251,251,0.4)",fontSize:"11px"},children:""})})]}),t.jsx("td",{style:{padding:"16px",color:"rgba(251,251,251,0.9)"},children:new Date(I.submittedAt||I.createdAt).toLocaleDateString()}),t.jsx("td",{style:{padding:"16px",textAlign:"right"},children:t.jsx("button",{onClick:()=>w(I.concernId),style:{padding:"6px 12px",background:"rgba(59,130,246,0.2)",color:"#3B82F6",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"})})]},I._id))})]}),P>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px"},children:[t.jsx("button",{onClick:()=>_(I=>Math.max(1,I-1)),disabled:D===1,style:{padding:"8px 16px",background:D===1?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:D===1?"rgba(251,251,251,0.3)":"#FFD41C",fontSize:"13px",fontWeight:600,cursor:D===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:"rgba(251,251,251,0.7)",fontSize:"13px",fontWeight:600},children:["Page ",D," of ",P]}),t.jsx("button",{onClick:()=>_(I=>Math.min(P,I+1)),disabled:D===P,style:{padding:"8px 16px",background:D===P?"rgba(255,212,28,0.1)":"rgba(255,212,28,0.2)",border:"2px solid rgba(255,212,28,0.3)",borderRadius:"8px",color:D===P?"rgba(251,251,251,0.3)":"#FFD41C",fontSize:"13px",fontWeight:600,cursor:D===P?"not-allowed":"pointer"},children:"Next "})]})]})}),E&&j&&t.jsx(S4,{concern:j,onClose:()=>A(!1),onResolve:()=>N(j)}),M&&j&&t.jsxs("div",{onClick:()=>B(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(15,18,39,0.9)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{onClick:I=>I.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0f1227 100%)",borderRadius:"16px",maxWidth:"600px",width:"90%",maxHeight:"85vh",overflow:"auto",border:"2px solid rgba(255,212,28,0.3)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease"},children:[t.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#FFD41C",margin:0,marginBottom:"8px"},children:"Resolve Concern"}),t.jsx("p",{style:{fontSize:"13px",color:"rgba(251,251,251,0.6)",margin:0},children:"Mark this concern as resolved and notify the user"})]}),t.jsx("button",{onClick:()=>B(!1),style:{background:"rgba(239,68,68,0.2)",border:"none",color:"#EF4444",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]}),t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{background:"rgba(251,191,36,0.1)",border:"1px solid rgba(251,191,36,0.3)",borderLeft:"4px solid #FBBF24",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[t.jsx("span",{style:{fontSize:"20px"},children:""}),t.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#FBBF24"},children:"Confirm Resolution"})]}),t.jsx("p",{style:{fontSize:"13px",color:"rgba(251,251,251,0.7)",margin:0,lineHeight:"1.5"},children:"This will mark the concern as resolved and send an email notification to the user."})]}),t.jsxs("div",{style:{background:"rgba(255,212,28,0.05)",border:"1px solid rgba(255,212,28,0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"12px"},children:"Concern Information"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"10px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Concern ID"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontFamily:"monospace",fontWeight:600},children:j.concernId})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"User"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)",fontWeight:600},children:j.userName})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginBottom:"4px"},children:"Subject"}),t.jsx("div",{style:{fontSize:"14px",color:"rgba(251,251,251,0.9)"},children:j.subject})]})]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#FFD41C",textTransform:"uppercase",marginBottom:"8px"},children:"Resolution Details (Optional)"}),t.jsx("textarea",{value:F,onChange:I=>L(I.target.value),placeholder:"Describe how this concern was resolved (optional)...",rows:6,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid rgba(255,212,28,0.2)",background:"rgba(255,255,255,0.05)",color:"#FBFBFB",fontSize:"13px",lineHeight:"1.5",resize:"vertical",outline:"none",fontFamily:"inherit",boxSizing:"border-box"}}),t.jsx("p",{style:{fontSize:"11px",color:"rgba(251,251,251,0.5)",marginTop:"8px",margin:"8px 0 0 0"},children:"This message will be included in the email notification to the user."})]})]}),t.jsxs("div",{style:{padding:"20px 24px",borderTop:"2px solid rgba(255,212,28,0.2)",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[t.jsx("button",{onClick:()=>B(!1),disabled:k,style:{padding:"12px 24px",background:"rgba(255,255,255,0.1)",color:"#FBFBFB",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",cursor:k?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:k?.5:1},children:"Cancel"}),t.jsx("button",{onClick:T,disabled:k,style:{padding:"12px 24px",background:k?"rgba(34,197,94,0.3)":"#22C55E",color:k?"#22C55E":"#0f1227",border:"none",borderRadius:"8px",cursor:k?"not-allowed":"pointer",fontSize:"14px",fontWeight:700,opacity:k?.5:1,boxShadow:k?"none":"0 4px 12px rgba(34,197,94,0.4)"},children:k?"Resolving...":" Mark as Resolved"})]})]}),t.jsx("style",{children:`
            @keyframes fadeIn {
              from { opacity: 0; }
              to { opacity: 1; }
            }
            @keyframes slideIn {
              from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
              }
              to {
                opacity: 1;
                transform: translateY(0) scale(1);
              }
            }
          `})]})]})}function Oh(){const{theme:e,isDarkMode:a}=ne(),{userData:r,loadingUserData:s,logoutUser:n}=p.useContext(wu),[l,o]=p.useState(!1),[i,c]=p.useState(navigator.onLine),u=p.useRef(null),d=Je();p.useEffect(()=>{const S=h=>{u.current&&!u.current.contains(h.target)&&o(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]),p.useEffect(()=>{const S=()=>c(!0),h=()=>c(!1);return window.addEventListener("online",S),window.addEventListener("offline",h),()=>{window.removeEventListener("online",S),window.removeEventListener("offline",h)}},[]);const x=()=>r&&((r==null?void 0:r.name)||(r==null?void 0:r.firstName))||"User",m=()=>x().charAt(0).toUpperCase(),b=(r==null?void 0:r.email)||"user@nu.edu.ph",v=async()=>{await n(),d("/login")};return s?t.jsx("header",{style:{background:a?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",borderBottom:`2px solid ${e.accent.primary}`,boxShadow:a?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},className:"px-[40px] py-[20px]",children:t.jsx("p",{style:{color:e.text.primary},className:"text-sm",children:"Loading user info..."})}):t.jsxs("header",{style:{background:a?"linear-gradient(135deg, #181D40 0%, #0f1227 100%)":"linear-gradient(135deg, #FFFFFF 0%, #FFFFFF 100%)",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${e.accent.primary}`,boxShadow:a?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",position:"sticky",top:0,zIndex:1e3},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsx("div",{style:{width:"45px",height:"45px",background:e.accent.primary,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"22px",color:a?"#181D40":"#FFFFFF",boxShadow:`0 0 0 3px ${a?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`},children:"NU"}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:e.text.primary,letterSpacing:"0.5px",margin:0},children:"NUCash System"}),t.jsx("p",{style:{fontSize:"12px",color:e.accent.primary,fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",margin:"2px 0 0 0"},children:"Digital Wallet System"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:i?"rgba(34, 197, 94, 0.2)":"rgba(107, 114, 128, 0.2)",padding:"6px 14px",borderRadius:"20px",border:i?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(107, 114, 128, 0.3)"},children:[t.jsx("div",{style:{width:"7px",height:"7px",background:i?"#22C55E":"#6B7280",borderRadius:"50%",animation:i?"pulse 2s ease-in-out infinite":"none"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:i?"#22C55E":"#6B7280"},children:i?"LIVE":"INACTIVE"})]}),t.jsx(Xr,{}),t.jsxs("div",{style:{position:"relative"},ref:u,children:[t.jsxs("button",{onClick:()=>o(!l),style:{display:"flex",alignItems:"center",gap:"8px",background:a?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",border:`2px solid ${e.accent.primary}`,borderRadius:"25px",padding:"4px 12px 4px 4px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:S=>{S.currentTarget.style.background=a?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",S.currentTarget.style.transform="scale(1.02)"},onMouseLeave:S=>{S.currentTarget.style.background=a?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",S.currentTarget.style.transform="scale(1)"},children:[t.jsx("div",{style:{width:"32px",height:"32px",background:e.accent.primary,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"14px",color:a?"#181D40":"#FFFFFF",flexShrink:0},children:m()}),t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:e.accent.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),l&&t.jsxs("div",{style:{position:"absolute",top:"52px",right:0,background:a?"rgba(30, 35, 71, 0.98)":"rgba(255, 255, 255, 0.98)",borderRadius:"12px",padding:"8px 0",minWidth:"220px",border:`2px solid ${e.border.primary}`,boxShadow:a?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.15)",animation:"fadeIn 0.2s ease"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${a?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)"}`,marginBottom:"8px"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:700,color:e.text.primary,marginBottom:"4px"},children:x()}),t.jsx("div",{style:{fontSize:"12px",color:e.text.secondary},children:b}),t.jsx("div",{style:{fontSize:"10px",color:e.accent.primary,textTransform:"uppercase",fontWeight:600,marginTop:"6px",letterSpacing:"0.5px"},children:"User"})]}),t.jsxs("button",{onClick:()=>{o(!1),d("/user/settings")},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:e.text.primary,fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:S=>{S.currentTarget.style.background=a?"rgba(255, 212, 28, 0.1)":"rgba(59, 130, 246, 0.1)",S.currentTarget.style.color=e.accent.primary},onMouseLeave:S=>{S.currentTarget.style.background="transparent",S.currentTarget.style.color=e.text.primary},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Manage Account"})]}),t.jsx("div",{style:{height:"1px",background:a?"rgba(255, 212, 28, 0.2)":"rgba(59, 130, 246, 0.2)",margin:"8px 0"}}),t.jsxs("button",{onClick:()=>{o(!1),v()},style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",color:"#EF4444",fontSize:"14px",fontWeight:600,textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:S=>{S.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:S=>{S.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:"16px"},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]}),t.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.5;
            transform: scale(0.8);
          }
        }

        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function $h(){const e=Je(),a=ht(),{theme:r,isDarkMode:s}=ne(),i=a.pathname.startsWith("/admin/treasury")?[{id:"dashboard",label:"Dashboard",icon:"",route:"/admin/treasury/dashboard"},{id:"transactions",label:"Transaction History",icon:"",route:"/admin/treasury/transactions"},{id:"merchants",label:"Merchants",icon:"",route:"/admin/treasury/merchants"},{id:"logs",label:"Logs",icon:"",route:"/admin/treasury/logs"},{id:"concerns",label:"Concerns",icon:"",route:"/admin/treasury/concerns"},{id:"config",label:"Configuration",icon:"",route:"/admin/treasury/config"}]:[{id:"home",label:"Home",icon:"",route:"/admin/accounting/home"},{id:"transactions",label:"Transaction History",icon:"",route:"/admin/accounting/transactions"},{id:"merchants",label:"Merchants",icon:"",route:"/admin/accounting/merchants"},{id:"logs",label:"Logs",icon:"",route:"/admin/accounting/logs"},{id:"concerns",label:"Concerns",icon:"",route:"/admin/accounting/concerns"},{id:"config",label:"Configuration",icon:"",route:"/admin/accounting/config"}];return t.jsx("nav",{style:{background:r.bg.secondary,borderColor:r.border.primary,boxShadow:s?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)",borderRadius:"12px",padding:"12px 24px",marginBottom:"20px",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},className:"flex gap-2 border",onMouseEnter:c=>{c.currentTarget.style.borderColor=r.border.hover,c.currentTarget.style.boxShadow=s?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(59, 130, 246, 0.15)"},onMouseLeave:c=>{c.currentTarget.style.borderColor=r.border.primary,c.currentTarget.style.boxShadow=s?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(59, 130, 246, 0.08)"},children:i.map(c=>{const u=a.pathname.startsWith(c.route);return t.jsxs("button",{onClick:()=>e(c.route),style:{background:u?r.accent.primary:"transparent",color:u?r.accent.secondary:r.text.secondary,padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",transition:"all 0.3s ease",transform:u?"scale(1.05)":"scale(1)",boxShadow:u?s?"0 4px 12px rgba(255,212,28,0.4)":"0 4px 12px rgba(59,130,246,0.4)":"none"},className:"flex items-center gap-2 font-semibold text-sm",onMouseEnter:d=>{u||(d.currentTarget.style.background=s?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",d.currentTarget.style.color=r.accent.primary,d.currentTarget.style.transform="scale(1.02)",d.currentTarget.style.boxShadow=s?"0 2px 8px rgba(255,212,28,0.2)":"0 2px 8px rgba(59,130,246,0.2)")},onMouseLeave:d=>{u||(d.currentTarget.style.background="transparent",d.currentTarget.style.color=r.text.secondary,d.currentTarget.style.transform="scale(1)",d.currentTarget.style.boxShadow="none")},children:[t.jsx("span",{className:`text-base transition-transform duration-300 ${u?"scale-110":""}`,children:c.icon}),t.jsx("span",{children:c.label})]},c.id)})})}function C4(){const{theme:e,isDarkMode:a}=ne();ht();const[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(""),[c,u]=p.useState(""),[d,x]=p.useState("");p.useEffect(()=>{m()},[]);const m=async()=>{l(!0);try{const y={search:o,...c&&{status:c},...d&&{priority:d}},g=await Uh(y);s(g.concerns||g.data||[])}catch(y){console.error("Failed to fetch concerns:",y),$.error("Failed to load concerns")}finally{l(!1)}},b=async(y,g)=>{try{await hd(y,{status:g}),$.success("Concern status updated"),m()}catch(f){console.error("Failed to update concern status:",f),$.error("Failed to update concern status")}},v=y=>{switch(y){case"high":return"#EF4444";case"medium":return"#F59E0B";case"low":return"#10B981";default:return e.text.secondary}},S=y=>{switch(y){case"resolved":return"#10B981";case"in_progress":return"#F59E0B";case"pending":return"#6B7280";default:return e.text.secondary}},h=a?"255, 212, 28":"59, 130, 246";return t.jsxs("div",{style:{minHeight:"100vh",background:e.bg.primary,display:"flex",flexDirection:"column"},children:[t.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3},children:t.jsx(Oh,{})}),t.jsxs("div",{style:{flex:1,padding:"40px"},children:[t.jsx($h,{}),t.jsx("div",{className:"mb-5 p-3 rounded-lg",style:{background:`rgba(${h}, 0.1)`,borderBottom:`2px solid ${e.accent.primary}`},children:t.jsx("h1",{className:"text-2xl font-bold",style:{color:e.accent.primary},children:" Concerns Management"})}),t.jsx("div",{className:"mb-4 p-4 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${h}, 0.2)`},children:t.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[t.jsx("input",{type:"text",placeholder:"Search concerns...",value:o,onChange:y=>i(y.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${h}, 0.3)`},className:"px-3 py-2 rounded-md outline-none"}),t.jsxs("select",{value:c,onChange:y=>u(y.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${h}, 0.3)`},className:"px-3 py-2 rounded-md outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"in_progress",children:"In Progress"}),t.jsx("option",{value:"resolved",children:"Resolved"})]}),t.jsxs("select",{value:d,onChange:y=>x(y.target.value),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${h}, 0.3)`},className:"px-3 py-2 rounded-md outline-none",children:[t.jsx("option",{value:"",children:"All Priority"}),t.jsx("option",{value:"high",children:"High"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"low",children:"Low"})]}),t.jsx("button",{onClick:m,style:{background:e.accent.primary,color:e.bg.primary},className:"px-4 py-2 rounded-md font-semibold hover:opacity-80 transition",children:" Search"})]})}),n?t.jsx("div",{className:"p-8 text-center",style:{color:e.text.secondary},children:"Loading concerns..."}):r.length===0?t.jsx("div",{className:"p-8 text-center",style:{color:e.text.secondary},children:"No concerns found"}):t.jsx("div",{className:"space-y-3",children:r.map(y=>{var g;return t.jsxs("div",{className:"p-4 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${h}, 0.2)`},children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-bold mb-1",style:{color:e.text.primary},children:y.title||y.subject||"Untitled Concern"}),t.jsx("p",{className:"text-sm mb-2",style:{color:e.text.secondary},children:y.description||y.message||"No description"}),t.jsxs("div",{className:"flex gap-3 text-xs",style:{color:e.text.muted},children:[t.jsxs("span",{children:["From: ",y.userName||((g=y.user)==null?void 0:g.fullName)||"Unknown"]}),t.jsx("span",{children:""}),t.jsx("span",{children:new Date(y.createdAt).toLocaleString()}),t.jsx("span",{children:""}),t.jsxs("span",{children:["Type: ",y.submissionType||"general"]})]})]}),t.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold text-center",style:{background:v(y.priority),color:"#fff"},children:y.priority||"medium"}),t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold text-center",style:{background:S(y.status),color:"#fff"},children:y.status||"pending"})]})]}),t.jsx("div",{className:"flex gap-2 mt-3",children:y.status!=="resolved"&&t.jsxs(t.Fragment,{children:[y.status==="pending"&&t.jsx("button",{onClick:()=>b(y._id,"in_progress"),style:{background:"#F59E0B",color:"#fff"},className:"px-3 py-1 rounded-md text-xs font-semibold hover:opacity-80 transition",children:"Start Progress"}),t.jsx("button",{onClick:()=>b(y._id,"resolved"),style:{background:"#10B981",color:"#fff"},className:"px-3 py-1 rounded-md text-xs font-semibold hover:opacity-80 transition",children:"Mark Resolved"})]})})]},y._id)})})]}),t.jsx(gr,{})]})}function k4(){const{theme:e,isDarkMode:a}=ne();ht().pathname.startsWith("/treasury");const[s,n]=p.useState({maxTransactionAmount:1e4,minCashInAmount:50,enableNotifications:!0,enableEmailAlerts:!1,autoApproveTransactions:!1,sessionTimeout:30}),l=(u,d)=>{n(x=>({...x,[u]:d}))},o=()=>{$.success("Settings saved successfully")},i=()=>{n({maxTransactionAmount:1e4,minCashInAmount:50,enableNotifications:!0,enableEmailAlerts:!1,autoApproveTransactions:!1,sessionTimeout:30}),$.info("Settings reset to defaults")},c=a?"255, 212, 28":"59, 130, 246";return t.jsxs("div",{style:{minHeight:"100vh",background:e.bg.primary,display:"flex",flexDirection:"column"},children:[t.jsx("div",{style:{position:"sticky",top:0,zIndex:1e3},children:t.jsx(Oh,{})}),t.jsxs("div",{style:{flex:1,padding:"40px"},children:[t.jsx($h,{}),t.jsx("div",{className:"mb-5 p-3 rounded-lg",style:{background:`rgba(${c}, 0.1)`,borderBottom:`2px solid ${e.accent.primary}`},children:t.jsx("h1",{className:"text-2xl font-bold",style:{color:e.accent.primary},children:" Configuration"})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-5 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${c}, 0.2)`},children:[t.jsx("h2",{className:"text-lg font-bold mb-4",style:{color:e.text.primary},children:" Transaction Settings"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:e.text.secondary},children:"Maximum Transaction Amount ()"}),t.jsx("input",{type:"number",value:s.maxTransactionAmount,onChange:u=>l("maxTransactionAmount",parseInt(u.target.value)),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${c}, 0.3)`},className:"w-full px-3 py-2 rounded-md outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:e.text.secondary},children:"Minimum Cash-In Amount ()"}),t.jsx("input",{type:"number",value:s.minCashInAmount,onChange:u=>l("minCashInAmount",parseInt(u.target.value)),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${c}, 0.3)`},className:"w-full px-3 py-2 rounded-md outline-none"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"checkbox",id:"autoApprove",checked:s.autoApproveTransactions,onChange:u=>l("autoApproveTransactions",u.target.checked),style:{accentColor:e.accent.primary}}),t.jsx("label",{htmlFor:"autoApprove",className:"text-sm",style:{color:e.text.primary},children:"Auto-approve transactions under 500"})]})]})]}),t.jsxs("div",{className:"p-5 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${c}, 0.2)`},children:[t.jsx("h2",{className:"text-lg font-bold mb-4",style:{color:e.text.primary},children:" Notification Settings"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"checkbox",id:"enableNotifications",checked:s.enableNotifications,onChange:u=>l("enableNotifications",u.target.checked),style:{accentColor:e.accent.primary}}),t.jsx("label",{htmlFor:"enableNotifications",className:"text-sm",style:{color:e.text.primary},children:"Enable push notifications"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"checkbox",id:"enableEmailAlerts",checked:s.enableEmailAlerts,onChange:u=>l("enableEmailAlerts",u.target.checked),style:{accentColor:e.accent.primary}}),t.jsx("label",{htmlFor:"enableEmailAlerts",className:"text-sm",style:{color:e.text.primary},children:"Enable email alerts for large transactions"})]})]})]}),t.jsxs("div",{className:"p-5 rounded-lg",style:{background:e.bg.card,border:`1px solid rgba(${c}, 0.2)`},children:[t.jsx("h2",{className:"text-lg font-bold mb-4",style:{color:e.text.primary},children:" Security Settings"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:e.text.secondary},children:"Session Timeout (minutes)"}),t.jsxs("select",{value:s.sessionTimeout,onChange:u=>l("sessionTimeout",parseInt(u.target.value)),style:{background:e.bg.secondary,color:e.text.primary,border:`1px solid rgba(${c}, 0.3)`},className:"w-full px-3 py-2 rounded-md outline-none",children:[t.jsx("option",{value:15,children:"15 minutes"}),t.jsx("option",{value:30,children:"30 minutes"}),t.jsx("option",{value:60,children:"1 hour"}),t.jsx("option",{value:120,children:"2 hours"})]})]})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:o,style:{background:e.accent.primary,color:e.bg.primary},className:"flex-1 py-3 rounded-md font-semibold hover:opacity-80 transition",children:" Save Changes"}),t.jsx("button",{onClick:i,style:{background:e.bg.secondary,color:e.accent.primary,border:`1px solid ${e.accent.primary}`},className:"px-6 py-3 rounded-md font-semibold hover:opacity-80 transition",children:" Reset to Defaults"})]})]}),t.jsx(gr,{})]})}function F4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState(null),[n,l]=p.useState(0),[o,i]=p.useState(!1),[c,u]=p.useState([]),[d,x]=p.useState([]),[m,b]=p.useState(!0),[v,S]=p.useState("today"),h=p.useRef(null),[y,g]=p.useState(!1),[f,j]=p.useState(!1),C=B=>{var k,U;const F=B.transactionType||B.type;if(B.status==="Refunded"){if(B.shuttleId){const D=B.plateNumber||((k=B.shuttle)==null?void 0:k.plateNumber);return D?`Refund from NU Shuttle Service (${D})`:"Refund from NU Shuttle Service"}return B.merchantName||B.businessName?`Refund from ${B.businessName||B.merchantName||"Merchant"}`:"Refund from Treasury Office"}if(F==="debit"){if(B.shuttleId){const _=B.plateNumber||((U=B.shuttle)==null?void 0:U.plateNumber);return _?`Payment to NU Shuttle Service (${_})`:"Payment to NU Shuttle Service"}return`Payment to ${B.businessName||B.merchantName||B.description||"Merchant"}`}return F==="credit"?"Cash-In":B.description||"Transaction"},E=async(B=!1)=>{try{B||b(!0);const F=await J.get("/user/balance");(F==null?void 0:F.balance)!==void 0&&l(F.balance),(F!=null&&F.user||(F==null?void 0:F.isActive)!==void 0)&&s(k=>{var U;return{...k,isActive:((U=F.user)==null?void 0:U.isActive)??F.isActive??(k==null?void 0:k.isActive)}});const L=await J.get("/user/transactions?limit=100");L!=null&&L.transactions&&(x(L.transactions),A(L.transactions,v))}catch{console.error("Failed to load data")}finally{B||b(!1)}},A=(B,F)=>{const L=new Date,k=new Date(L.getFullYear(),L.getMonth(),L.getDate()),U=new Date(k);U.setDate(U.getDate()-U.getDay());const D=new Date(L.getFullYear(),L.getMonth(),1);let _=B;F==="today"?_=B.filter(z=>new Date(z.createdAt||z.date)>=k):F==="week"?_=B.filter(z=>new Date(z.createdAt||z.date)>=U):F==="month"&&(_=B.filter(z=>new Date(z.createdAt||z.date)>=D)),u(_)};p.useEffect(()=>{const B=localStorage.getItem("userData");if(B&&B!=="undefined"&&B!=="null")try{s(JSON.parse(B))}catch{console.error("Error parsing userData")}return E(),h.current=setInterval(()=>E(!0),1e4),()=>{h.current&&clearInterval(h.current)}},[]),p.useEffect(()=>{A(d,v)},[v,d]);const M=()=>{const B=window.open("","_blank"),L=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>NUCash Transaction History</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 40px; max-width: 800px; margin: 0 auto; }
          .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #FFD41C; padding-bottom: 20px; }
          .header h1 { color: #181D40; margin: 0 0 10px 0; }
          .header p { color: #666; margin: 0; }
          .user-info { background: #f5f5f5; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
          .user-info p { margin: 5px 0; }
          .summary { display: flex; justify-content: space-between; margin-bottom: 20px; }
          .summary-item { text-align: center; padding: 15px; background: #f9f9f9; border-radius: 8px; flex: 1; margin: 0 5px; }
          .summary-item .label { font-size: 12px; color: #666; }
          .summary-item .value { font-size: 24px; font-weight: bold; color: #181D40; }
          .summary-item .value.green { color: #10B981; }
          .summary-item .value.red { color: #EF4444; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
          th { background: #181D40; color: #FFD41C; font-size: 12px; text-transform: uppercase; }
          .credit { color: #10B981; font-weight: bold; }
          .debit { color: #EF4444; font-weight: bold; }
          .footer { margin-top: 30px; text-align: center; font-size: 12px; color: #999; border-top: 1px solid #eee; padding-top: 20px; }
          @media print { body { padding: 20px; } }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>NUCash Transaction History</h1>
          <p>Period: ${v==="today"?"Today":v==="week"?"This Week":"This Month"} | Generated: ${new Date().toLocaleString()}</p>
        </div>
        <div class="user-info">
          <p><strong>Name:</strong> ${(r==null?void 0:r.firstName)||""} ${(r==null?void 0:r.lastName)||""}</p>
          <p><strong>School ID:</strong> ${(r==null?void 0:r.schoolUId)||"N/A"}</p>
          <p><strong>Email:</strong> ${(r==null?void 0:r.email)||"N/A"}</p>
        </div>
        <div class="summary">
          <div class="summary-item">
            <div class="label">Current Balance</div>
            <div class="value green">${n.toLocaleString("en-PH",{minimumFractionDigits:2})}</div>
          </div>
          <div class="summary-item">
            <div class="label">Total Cash-In</div>
            <div class="value green">+${c.filter(k=>(k.transactionType||k.type)==="credit").reduce((k,U)=>k+(U.amount||0),0).toLocaleString("en-PH",{minimumFractionDigits:2})}</div>
          </div>
          <div class="summary-item">
            <div class="label">Total Spent</div>
            <div class="value red">-${c.filter(k=>(k.transactionType||k.type)==="debit").reduce((k,U)=>k+(U.amount||0),0).toLocaleString("en-PH",{minimumFractionDigits:2})}</div>
          </div>
        </div>
        <table>
          <thead>
            <tr>
              <th>Date & Time</th>
              <th>Description</th>
              <th>Amount</th>
            </tr>
          </thead>
          <tbody>
            ${c.length===0?`
              <tr><td colspan="3" style="text-align: center; padding: 40px; color: #999;">No transactions found for this period</td></tr>
            `:c.map(k=>{const U=k.transactionType||k.type;return`
              <tr>
                <td>${k.date||new Date(k.createdAt).toLocaleDateString()} ${k.time||new Date(k.createdAt).toLocaleTimeString()}</td>
                <td>${C(k)}</td>
                <td class="${U==="credit"?"credit":"debit"}">
                  ${U==="credit"?"+":"-"}${Math.abs(k.amount||0).toLocaleString("en-PH",{minimumFractionDigits:2})}
                </td>
              </tr>
            `}).join("")}
          </tbody>
        </table>
        <div class="footer">
          <p>This is an official transaction record from NUCash.</p>
          <p>For concerns, please contact the Treasury Office.</p>
        </div>
      </body>
      </html>
    `;B.document.write(L),B.document.close(),B.focus(),setTimeout(()=>B.print(),250)};return m?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading..."]}):t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col lg:flex-row gap-5",children:[t.jsxs("div",{className:"w-full lg:w-[500px] flex flex-col gap-5 flex-shrink-0",children:[t.jsxs("div",{style:{background:a?"linear-gradient(135deg, rgba(255,212,28,0.08) 0%, rgba(24,29,64,1) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.08) 0%, rgba(255,255,255,1) 100%)",borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",boxShadow:a?"0 8px 32px rgba(255,212,28,0.15)":"0 8px 32px rgba(59,130,246,0.15)"},className:"p-6 rounded-2xl border-2 relative overflow-hidden",children:[t.jsx("div",{style:{position:"absolute",top:"-20px",right:"-20px",width:"120px",height:"120px",background:a?"radial-gradient(circle, rgba(255,212,28,0.15) 0%, transparent 70%)":"radial-gradient(circle, rgba(59,130,246,0.1) 0%, transparent 70%)",borderRadius:"50%"}}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{style:{color:e.accent.primary},className:"text-xs font-bold uppercase tracking-wider flex items-center gap-2",children:[t.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:(r==null?void 0:r.isActive)!==!1?"#10B981":"#EF4444",boxShadow:(r==null?void 0:r.isActive)!==!1?"0 0 8px rgba(16,185,129,0.6)":"0 0 8px rgba(239,68,68,0.6)"}}),"NUCash Balance"]}),t.jsx("button",{onClick:()=>i(!o),style:{color:e.text.secondary,background:a?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",border:`1px solid ${a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`,position:"relative",zIndex:20},className:"p-2.5 rounded-xl hover:opacity-80 transition",children:o?t.jsx(Kl,{className:"w-5 h-5"}):t.jsx(eo,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{style:{color:o?"#10B981":e.text.tertiary,fontFamily:"system-ui, -apple-system, sans-serif"},className:"text-4xl font-extrabold mb-4 tracking-tight",children:o?`${n.toLocaleString("en-PH",{minimumFractionDigits:2})}`:" ."}),t.jsx("div",{className:"flex items-center justify-between"})]})]}),t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("button",{onClick:()=>g(!0),style:{background:"linear-gradient(135deg, rgba(245,158,11,0.15) 0%, rgba(245,158,11,0.05) 100%)",borderColor:"rgba(245,158,11,0.3)"},className:"p-4 rounded-xl border flex items-center gap-3 transition-all hover:scale-[1.02] hover:shadow-md text-left",children:[t.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-xl",style:{background:"rgba(245,158,11,0.2)"},children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{style:{color:"#F59E0B"},className:"font-bold text-sm",children:"Report a Concern"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs",children:"Get help with issues"})]}),t.jsx(Do,{style:{color:e.text.tertiary},className:"w-5 h-5"})]}),t.jsxs("button",{onClick:()=>j(!0),style:{background:"linear-gradient(135deg, rgba(59,130,246,0.15) 0%, rgba(59,130,246,0.05) 100%)",borderColor:"rgba(59,130,246,0.3)"},className:"p-4 rounded-xl border flex items-center gap-3 transition-all hover:scale-[1.02] hover:shadow-md text-left",children:[t.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-xl",style:{background:"rgba(59,130,246,0.2)"},children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{style:{color:"#3B82F6"},className:"font-bold text-sm",children:"Share Feedback"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs",children:"Rate your experience"})]}),t.jsx(Do,{style:{color:e.text.tertiary},className:"w-5 h-5"})]})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"flex-1 lg:max-w-[1000px] rounded-2xl border overflow-hidden flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-4 border-b flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{color:e.accent.primary},className:"text-base font-bold flex items-center gap-2",children:[t.jsx(_h,{className:"w-4 h-4"})," Recent Transactions"]}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-xs mt-1",children:[c.length," transaction",c.length!==1?"s":""," found"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex rounded-lg overflow-hidden border",style:{borderColor:e.border.primary},children:[{key:"today",label:"Today"},{key:"week",label:"Week"},{key:"month",label:"Month"}].map(B=>t.jsx("button",{onClick:()=>S(B.key),style:{background:v===B.key?e.accent.primary:"transparent",color:v===B.key?a?"#181D40":"#FFFFFF":e.text.secondary},className:"px-3 py-1.5 text-xs font-semibold transition-all",children:B.label},B.key))}),t.jsxs("button",{onClick:M,style:{background:a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",color:e.text.primary},className:"p-2 rounded-lg hover:opacity-80 transition flex items-center gap-1",title:"Export to PDF",children:[t.jsx(Eu,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline text-xs",children:"Export"})]})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:c.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-16",children:[t.jsx(ci,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{className:"text-sm",children:"No transactions for this period"}),t.jsx("p",{className:"text-xs mt-1",children:"Try selecting a different time range"})]}):t.jsx("div",{className:"divide-y",style:{borderColor:e.border.primary},children:c.map((B,F)=>{const L=B.transactionType||B.type;return t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-white/5 transition",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:L==="credit"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)"},className:"w-10 h-10 rounded-full flex items-center justify-center text-lg",children:L==="credit"?"":B.shuttleId?"":""}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.primary},className:"font-semibold text-sm",children:C(B)}),t.jsxs("p",{style:{color:e.text.muted},className:"text-xs",children:[B.date||new Date(B.createdAt).toLocaleDateString()," ",B.time||""]})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("p",{style:{color:L==="credit"?"#10B981":"#EF4444"},className:"font-bold text-sm",children:[L==="credit"?"+":"-","",Math.abs(B.amount||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})})]},B._id||B.id||F)})})})]}),y&&t.jsx(T4,{onClose:()=>g(!1),theme:e,isDarkMode:a}),f&&t.jsx(E4,{onClose:()=>j(!1),theme:e,isDarkMode:a})]})}function T4({onClose:e,theme:a,isDarkMode:r}){const[s,n]=p.useState(1),[l,o]=p.useState(""),[i,c]=p.useState(""),[u,d]=p.useState([]),[x,m]=p.useState(""),[b,v]=p.useState(""),[S,h]=p.useState(!1),[y,g]=p.useState(!1),f=[{value:"sysad",label:"NUCash System",icon:"",desc:"Technical issues, app problems"},{value:"treasury",label:"Finance",icon:"",desc:"Balance, cash-in, payments"},{value:"merchants",label:"Merchants",icon:"",desc:"Store-related concerns"},{value:"motorpool",label:"Shuttle Service",icon:"",desc:"Transportation concerns"}];p.useEffect(()=>{l==="merchants"&&j()},[l]);const j=async()=>{g(!0);try{console.log("Fetching merchants...");const F=await J.get("/user/merchants");console.log("Merchants response:",F),F.success?(console.log("Merchants data:",F.merchants),d(F.merchants)):(console.error("API returned success=false:",F),d([]))}catch(F){console.error("Failed to fetch merchants:",F),d([])}finally{g(!1)}},C=()=>{s===1&&l?n(l==="merchants"?2:3):s===2&&i?(m(i),n(3)):s===3&&x&&b&&n(4)},E=()=>{s===2?(n(1),c(""),m("")):s===3?l==="merchants"?(n(2),m("")):n(1):s===4&&n(3)},A=async()=>{h(!0);try{(await J.post("/user/concerns",{department:l,merchant:l==="merchants"?i:void 0,subject:x,details:b})).success&&n(5)}catch{console.error("Failed to submit concern")}finally{h(!1)}},M=()=>{const F=f.find(L=>L.value===l);return F?F.label:""},B={width:"100%",padding:"14px 16px",background:r?"rgba(15,18,39,0.6)":"#F9FAFB",border:`2px solid ${r?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"12px",color:a.text.primary,fontSize:"14px",outline:"none",transition:"all 0.2s ease"};return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),t.jsxs("div",{style:{background:r?"linear-gradient(135deg, #1E2347 0%, #181D40 100%)":"linear-gradient(135deg, #FFFFFF 0%, #F8FAFC 100%)",border:`2px solid ${r?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,boxShadow:r?"0 25px 50px rgba(0,0,0,0.5)":"0 25px 50px rgba(0,0,0,0.15)"},className:"relative rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden",children:[t.jsxs("div",{style:{background:r?"linear-gradient(135deg, rgba(245,158,11,0.2) 0%, rgba(245,158,11,0.05) 100%)":"linear-gradient(135deg, rgba(245,158,11,0.15) 0%, rgba(245,158,11,0.05) 100%)",borderBottom:`2px solid ${r?"rgba(245,158,11,0.3)":"rgba(245,158,11,0.2)"}`},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:"rgba(245,158,11,0.2)"},className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:"#F59E0B"},className:"text-xl font-bold",children:"Report a Concern"}),t.jsx("p",{style:{color:a.text.secondary},className:"text-sm",children:s<5?`Step ${s} of 4`:"Complete"})]})]}),t.jsx("button",{onClick:e,style:{color:a.text.secondary},className:"p-2 hover:opacity-70 transition",children:t.jsx(Tt,{className:"w-6 h-6"})})]}),s<5&&t.jsx("div",{style:{background:r?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)"},className:"h-1",children:t.jsx("div",{style:{width:`${s/4*100}%`,background:"#F59E0B",transition:"width 0.3s ease"},className:"h-full"})}),t.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[s===1&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-sm mb-4",children:"Select the department you want to report to:"}),f.map(F=>t.jsxs("button",{onClick:()=>o(F.value),style:{background:l===F.value?r?"rgba(245,158,11,0.2)":"rgba(245,158,11,0.15)":r?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`2px solid ${l===F.value?"#F59E0B":r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"w-full p-4 rounded-xl flex items-center gap-4 transition-all hover:scale-[1.02] text-left",children:[t.jsx("div",{style:{background:"rgba(245,158,11,0.15)"},className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl flex-shrink-0",children:F.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{style:{color:a.text.primary},className:"font-bold",children:F.label}),t.jsx("p",{style:{color:a.text.secondary},className:"text-sm",children:F.desc})]}),l===F.value&&t.jsx("div",{style:{background:"#F59E0B"},className:"w-6 h-6 rounded-full flex items-center justify-center",children:t.jsx(aa,{className:"w-4 h-4 text-white"})})]},F.value))]}),s===2&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-sm mb-4",children:"Select the merchant you want to report:"}),y?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-3",style:{borderColor:"#F59E0B transparent transparent transparent"}}),t.jsx("p",{style:{color:a.text.secondary},children:"Loading merchants..."})]}):u.length===0?t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{style:{color:a.text.secondary},children:"No merchants available"})}):t.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto",children:u.map((F,L)=>t.jsxs("button",{onClick:()=>c(F.value),style:{background:i===F.value?r?"rgba(245,158,11,0.2)":"rgba(245,158,11,0.15)":r?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`2px solid ${i===F.value?"#F59E0B":r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"w-full p-4 rounded-xl flex items-center gap-4 transition-all hover:scale-[1.01] text-left",children:[t.jsx("div",{style:{background:"rgba(245,158,11,0.15)"},className:"w-10 h-10 rounded-lg flex items-center justify-center text-xl",children:""}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold flex-1",children:F.label}),i===F.value&&t.jsx("div",{style:{background:"#F59E0B"},className:"w-6 h-6 rounded-full flex items-center justify-center",children:t.jsx(aa,{className:"w-4 h-4 text-white"})})]},L))})]}),s===3&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.primary},className:"block font-semibold mb-2",children:["Subject ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"text",value:x,onChange:F=>m(F.target.value),placeholder:"Brief description of your concern",style:{...B,backgroundColor:l==="merchants"?r?"rgba(15,18,39,0.3)":"#F3F4F6":B.backgroundColor,cursor:l==="merchants"?"not-allowed":"text"},onFocus:F=>{l!=="merchants"&&(F.target.style.borderColor="#F59E0B")},onBlur:F=>{l!=="merchants"&&(F.target.style.borderColor=r?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)")},readOnly:l==="merchants",disabled:l==="merchants"}),l==="merchants"&&t.jsx("p",{style:{color:a.text.secondary,fontSize:"12px",marginTop:"4px"},children:"Subject is automatically set to the selected merchant name"})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.primary},className:"block font-semibold mb-2",children:["Details ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("textarea",{value:b,onChange:F=>v(F.target.value),placeholder:"Please provide more details about your concern...",rows:5,style:{...B,resize:"none"},onFocus:F=>F.target.style.borderColor="#F59E0B",onBlur:F=>F.target.style.borderColor=r?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"})]})]}),s===4&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-sm mb-4",children:"Please review your concern before submitting:"}),t.jsxs("div",{style:{background:r?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.03)",border:`1px solid ${r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"rounded-xl p-5 space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Department"}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold",children:M()})]}),l==="merchants"&&i&&t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Merchant"}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold",children:i})]}),t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Subject"}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold",children:x})]}),t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Details"}),t.jsx("p",{style:{color:a.text.primary},className:"text-sm whitespace-pre-wrap",children:b})]})]})]}),s===5&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-5",children:t.jsx(aa,{className:"w-10 h-10 text-emerald-500"})}),t.jsx("h3",{style:{color:"#10B981"},className:"text-2xl font-bold mb-2",children:"Concern Submitted!"}),t.jsx("p",{style:{color:a.text.secondary},className:"mb-4",children:"Your concern has been received. You can track it in your Concerns tab."}),t.jsx("button",{onClick:e,style:{background:"#F59E0B",color:"#FFFFFF"},className:"px-8 py-3 rounded-xl font-bold text-sm transition-all hover:opacity-90",children:"Done"})]})]}),s<5&&t.jsxs("div",{style:{borderTop:`1px solid ${r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"px-6 py-4 flex gap-3",children:[s>1&&t.jsxs("button",{onClick:E,style:{background:r?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)",color:a.text.primary},className:"flex-1 py-3 rounded-xl font-semibold flex items-center justify-center gap-2 transition-all hover:opacity-80",children:[t.jsx(Dh,{className:"w-5 h-5"})," Back"]}),s<4?t.jsxs("button",{onClick:C,disabled:s===1&&!l||s===2&&!i||s===3&&(!x||!b),style:{background:"#F59E0B",color:"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:["Next ",t.jsx(Do,{className:"w-5 h-5"})]}):t.jsx("button",{onClick:A,disabled:S,style:{background:"#10B981",color:"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50",children:S?"Submitting...":"Submit Concern"})]})]})]})}function E4({onClose:e,theme:a,isDarkMode:r}){const[s,n]=p.useState(1),[l,o]=p.useState(""),[i,c]=p.useState(""),[u,d]=p.useState([]),[x,m]=p.useState(""),[b,v]=p.useState(""),[S,h]=p.useState(0),[y,g]=p.useState(0),[f,j]=p.useState(!1),[C,E]=p.useState(!1),A=[{value:"sysad",label:"NUCash System",icon:"",desc:"App experience feedback"},{value:"treasury",label:"Finance",icon:"",desc:"Service experience"},{value:"merchants",label:"Merchants",icon:"",desc:"Store experience"},{value:"motorpool",label:"Shuttle Service",icon:"",desc:"Transport experience"}];p.useEffect(()=>{l==="merchants"&&M()},[l]);const M=async()=>{E(!0);try{const _=await J.get("/user/merchants");_.success&&d(_.merchants)}catch{d([])}finally{E(!1)}},B=()=>{s===1&&l?n(l==="merchants"?2:3):s===2&&i?n(3):s===3&&S>0&&n(4)},F=()=>{s===2?(n(1),c("")):s===3?n(l==="merchants"?2:1):s===4&&n(3)},L=async()=>{j(!0);try{(await J.post("/user/feedback",{department:l,merchant:l==="merchants"?i:void 0,subject:x||void 0,feedback:b||void 0,rating:S})).success&&n(5)}catch{console.error("Failed to submit feedback")}finally{j(!1)}},k=()=>{const _=A.find(z=>z.value===l);return _?_.label:""},U=()=>["","Poor","Fair","Good","Very Good","Excellent"][S]||"",D={width:"100%",padding:"14px 16px",background:r?"rgba(15,18,39,0.6)":"#F9FAFB",border:"2px solid rgba(59,130,246,0.2)",borderRadius:"12px",color:a.text.primary,fontSize:"14px",outline:"none",transition:"all 0.2s ease"};return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),t.jsxs("div",{style:{background:r?"linear-gradient(135deg, #1E2347 0%, #181D40 100%)":"linear-gradient(135deg, #FFFFFF 0%, #F8FAFC 100%)",border:"2px solid rgba(59,130,246,0.3)",boxShadow:r?"0 25px 50px rgba(0,0,0,0.5)":"0 25px 50px rgba(0,0,0,0.15)"},className:"relative rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden",children:[t.jsxs("div",{style:{background:r?"linear-gradient(135deg, rgba(59,130,246,0.2) 0%, rgba(59,130,246,0.05) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.15) 0%, rgba(59,130,246,0.05) 100%)",borderBottom:`2px solid ${r?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)"}`},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:"rgba(59,130,246,0.2)"},className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:"#3B82F6"},className:"text-xl font-bold",children:"Share Feedback"}),t.jsx("p",{style:{color:a.text.secondary},className:"text-sm",children:s<5?`Step ${s} of 4`:"Complete"})]})]}),t.jsx("button",{onClick:e,style:{color:a.text.secondary},className:"p-2 hover:opacity-70 transition",children:t.jsx(Tt,{className:"w-6 h-6"})})]}),s<5&&t.jsx("div",{style:{background:r?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)"},className:"h-1",children:t.jsx("div",{style:{width:`${s/4*100}%`,background:"#3B82F6",transition:"width 0.3s ease"},className:"h-full"})}),t.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[s===1&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-sm mb-4",children:"Select what you want to give feedback about:"}),A.map(_=>t.jsxs("button",{onClick:()=>o(_.value),style:{background:l===_.value?r?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.15)":r?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`2px solid ${l===_.value?"#3B82F6":r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"w-full p-4 rounded-xl flex items-center gap-4 transition-all hover:scale-[1.02] text-left",children:[t.jsx("div",{style:{background:"rgba(59,130,246,0.15)"},className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl flex-shrink-0",children:_.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{style:{color:a.text.primary},className:"font-bold",children:_.label}),t.jsx("p",{style:{color:a.text.secondary},className:"text-sm",children:_.desc})]}),l===_.value&&t.jsx("div",{style:{background:"#3B82F6"},className:"w-6 h-6 rounded-full flex items-center justify-center",children:t.jsx(aa,{className:"w-4 h-4 text-white"})})]},_.value))]}),s===2&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-sm mb-4",children:"Select the merchant:"}),C?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-3",style:{borderColor:"#3B82F6 transparent transparent transparent"}}),t.jsx("p",{style:{color:a.text.secondary},children:"Loading merchants..."})]}):u.length===0?t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{style:{color:a.text.secondary},children:"No merchants available"})}):t.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto",children:u.map((_,z)=>t.jsxs("button",{onClick:()=>c(_.value),style:{background:i===_.value?r?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.15)":r?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`2px solid ${i===_.value?"#3B82F6":r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"w-full p-4 rounded-xl flex items-center gap-4 transition-all hover:scale-[1.01] text-left",children:[t.jsx("div",{style:{background:"rgba(59,130,246,0.15)"},className:"w-10 h-10 rounded-lg flex items-center justify-center text-xl",children:""}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold flex-1",children:_.label}),i===_.value&&t.jsx("div",{style:{background:"#3B82F6"},className:"w-6 h-6 rounded-full flex items-center justify-center",children:t.jsx(aa,{className:"w-4 h-4 text-white"})})]},z))})]}),s===3&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.primary},className:"block font-semibold mb-3",children:["Your Rating ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("div",{className:"flex justify-center gap-2 mb-2",children:[1,2,3,4,5].map(_=>t.jsx("button",{type:"button",onClick:()=>h(_),onMouseEnter:()=>g(_),onMouseLeave:()=>g(0),className:"transition-transform hover:scale-110",children:t.jsx("svg",{className:"w-12 h-12",fill:_<=(y||S)?"#FFD41C":"none",stroke:"#FFD41C",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},_))}),S>0&&t.jsx("p",{style:{color:"#FFD41C"},className:"text-center font-semibold",children:U()})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.primary},className:"block font-semibold mb-2",children:["Subject ",t.jsx("span",{style:{color:a.text.tertiary},className:"font-normal text-sm",children:"(Optional)"})]}),t.jsx("input",{type:"text",value:x,onChange:_=>m(_.target.value),placeholder:"What's this about?",style:D,onFocus:_=>_.target.style.borderColor="#3B82F6",onBlur:_=>_.target.style.borderColor="rgba(59,130,246,0.2)"})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:a.text.primary},className:"block font-semibold mb-2",children:["Feedback ",t.jsx("span",{style:{color:a.text.tertiary},className:"font-normal text-sm",children:"(Optional)"})]}),t.jsx("textarea",{value:b,onChange:_=>v(_.target.value),placeholder:"Share your thoughts...",rows:4,style:{...D,resize:"none"},onFocus:_=>_.target.style.borderColor="#3B82F6",onBlur:_=>_.target.style.borderColor="rgba(59,130,246,0.2)"})]})]}),s===4&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-sm mb-4",children:"Please review your feedback before submitting:"}),t.jsxs("div",{style:{background:r?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.03)",border:`1px solid ${r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"rounded-xl p-5 space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Department"}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold",children:k()})]}),l==="merchants"&&i&&t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Merchant"}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold",children:i})]}),t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Rating"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex",children:[1,2,3,4,5].map(_=>t.jsx("svg",{className:"w-5 h-5",fill:_<=S?"#FFD41C":"none",stroke:"#FFD41C",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})},_))}),t.jsx("span",{style:{color:"#FFD41C"},className:"font-semibold",children:U()})]})]}),x&&t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Subject"}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold",children:x})]}),b&&t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase tracking-wide mb-1",children:"Feedback"}),t.jsx("p",{style:{color:a.text.primary},className:"text-sm whitespace-pre-wrap",children:b})]})]})]}),s===5&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-5",children:t.jsx(aa,{className:"w-10 h-10 text-emerald-500"})}),t.jsx("h3",{style:{color:"#10B981"},className:"text-2xl font-bold mb-2",children:"Feedback Submitted!"}),t.jsx("p",{style:{color:a.text.secondary},className:"mb-4",children:"Thank you for your feedback! You can track it in your Concerns tab."}),t.jsx("button",{onClick:e,style:{background:"#3B82F6",color:"#FFFFFF"},className:"px-8 py-3 rounded-xl font-bold text-sm transition-all hover:opacity-90",children:"Done"})]})]}),s<5&&t.jsxs("div",{style:{borderTop:`1px solid ${r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"px-6 py-4 flex gap-3",children:[s>1&&t.jsxs("button",{onClick:F,style:{background:r?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)",color:a.text.primary},className:"flex-1 py-3 rounded-xl font-semibold flex items-center justify-center gap-2 transition-all hover:opacity-80",children:[t.jsx(Dh,{className:"w-5 h-5"})," Back"]}),s<4?t.jsxs("button",{onClick:B,disabled:s===1&&!l||s===2&&!i||s===3&&S===0,style:{background:"#3B82F6",color:"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:["Next ",t.jsx(Do,{className:"w-5 h-5"})]}):t.jsx("button",{onClick:L,disabled:f,style:{background:"#10B981",color:"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 disabled:opacity-50",children:f?"Submitting...":"Submit Feedback"})]})]})]})}function A4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState("all"),[c,u]=p.useState(""),[d,x]=p.useState(""),[m,b]=p.useState(""),[v,S]=p.useState({page:1,limit:20,total:0,totalPages:1}),[h,y]=p.useState(!1),[g,f]=p.useState(!1),[j,C]=p.useState(!1),E=p.useRef(null),A=k=>{var _,z;const U=k.transactionType||k.type,D=k.status;if(k.shuttleId&&console.log(" Shuttle Transaction Debug:",{shuttleId:k.shuttleId,plateNumber:k.plateNumber,fullTx:k}),D==="Refunded"){if(k.shuttleId){const q=k.plateNumber||((_=k.shuttle)==null?void 0:_.plateNumber);return q?`Refund from NU Shuttle Service (${q})`:"Refund from NU Shuttle Service"}return k.merchantName||k.businessName?`Refund from ${k.businessName||k.merchantName||"Merchant"}`:"Refund from Treasury Office"}if(U==="debit"){if(k.shuttleId){const w=k.plateNumber||((z=k.shuttle)==null?void 0:z.plateNumber);return w?`Payment to NU Shuttle Service (${w})`:"Payment to NU Shuttle Service"}return`Payment to ${k.businessName||k.merchantName||k.description||"Merchant"}`}return U==="credit"?"Cash-In":k.description||"Transaction"},M=async(k=!1)=>{try{k||l(!0);const U=new URLSearchParams;U.append("page",v.page),U.append("limit",v.limit),o!=="all"&&U.append("type",o),c&&U.append("search",c),d&&U.append("startDate",d),m&&U.append("endDate",m);const D=await J.get(`/user/transactions?${U}`);D!=null&&D.transactions&&(s(D.transactions),D.pagination&&S(_=>({..._,total:D.pagination.total||0,totalPages:D.pagination.totalPages||1})))}catch{k||$.error("Failed to load transactions")}finally{k||l(!1)}};p.useEffect(()=>(M(),E.current=setInterval(()=>M(!0),3e4),()=>{E.current&&clearInterval(E.current)}),[o,c,d,m,v.page]);const B=k=>{k>=1&&k<=v.totalPages&&S(U=>({...U,page:k}))},F=async()=>{f(!0);try{await J.post("/user/request-transaction-history",{startDate:d||void 0,endDate:m||void 0,type:o!=="all"?o:void 0}),C(!0),setTimeout(()=>{y(!1),C(!1)},2e3)}catch{$.error("Failed to request transaction history. Please try again.")}finally{f(!1)}},L=r.filter(k=>{var D,_,z,q,w,N,R;if(!c)return!0;const U=c.toLowerCase();return((D=k.transactionId)==null?void 0:D.toLowerCase().includes(U))||((_=k._id)==null?void 0:_.toLowerCase().includes(U))||((z=k.description)==null?void 0:z.toLowerCase().includes(U))||((w=(q=k.merchant)==null?void 0:q.name)==null?void 0:w.toLowerCase().includes(U))||((N=k.merchantName)==null?void 0:N.toLowerCase().includes(U))||((R=k.businessName)==null?void 0:R.toLowerCase().includes(U))});return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading transactions..."]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("div",{className:"mb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Transaction History"]}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:["Showing ",L.length," of ",v.total||r.length," transactions  Auto-refreshes every 30s"]})]}),t.jsxs("div",{className:"flex gap-3 items-end flex-wrap",children:[t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-[11px] font-bold uppercase tracking-wide mb-2",children:"Search"}),t.jsxs("div",{className:"relative",children:[t.jsx(Zr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",style:{color:e.text.muted}}),t.jsx("input",{type:"text",placeholder:"Search transactions...",value:c,onChange:k=>{u(k.target.value),S(U=>({...U,page:1}))},style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"w-full pl-10 pr-4 py-2.5 rounded-xl border text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/30"})]})]}),t.jsxs("div",{className:"min-w-[140px]",children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-[11px] font-bold uppercase tracking-wide mb-2",children:"Type"}),t.jsxs("select",{value:o,onChange:k=>{i(k.target.value),S(U=>({...U,page:1}))},style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/30 cursor-pointer",children:[t.jsx("option",{value:"all",children:"All Types"}),t.jsx("option",{value:"credit",children:"Cash-In"}),t.jsx("option",{value:"debit",children:"Purchases"})]})]}),t.jsxs("div",{className:"flex gap-2 items-end",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-[11px] font-bold uppercase tracking-wide mb-2",children:"From"}),t.jsx("input",{type:"date",value:d,onChange:k=>x(k.target.value),style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"px-3 py-2.5 rounded-xl border text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/30"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-[11px] font-bold uppercase tracking-wide mb-2",children:"To"}),t.jsx("input",{type:"date",value:m,onChange:k=>b(k.target.value),style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"px-3 py-2.5 rounded-xl border text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/30"})]})]}),t.jsxs("button",{onClick:()=>y(!0),style:{background:a?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.15)",color:"#3B82F6",borderColor:"rgba(59,130,246,0.3)"},className:"flex items-center gap-2 px-5 py-2.5 rounded-xl border-2 font-semibold text-sm hover:opacity-80 transition whitespace-nowrap",children:[t.jsx(Tn,{className:"w-4 h-4"}),"Request History"]})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:L.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{children:"No transactions found"}),t.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your filters"})]}):t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left pl-20 pr-4 py-4 text-[11px] font-extrabold uppercase border-b-2 w-[25%]",children:"Date & Time"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2 w-[25%]",children:"Description"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2 w-[25%]",children:"Amount"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2 w-[25%]",children:"Transaction ID"})]})}),t.jsx("tbody",{children:L.map((k,U)=>{const D=k.transactionType||k.type;return t.jsxs("tr",{className:"hover:bg-white/5 transition",style:{borderBottom:`1px solid ${e.border.primary}`},children:[t.jsxs("td",{style:{color:e.text.primary},className:"pl-20 pr-4 py-4 w-[15%]",children:[t.jsx("div",{className:"font-semibold",children:k.date||new Date(k.createdAt).toLocaleDateString()}),t.jsx("div",{style:{color:e.text.muted},className:"text-xs",children:k.time||new Date(k.createdAt).toLocaleTimeString()})]}),t.jsx("td",{style:{color:e.text.primary},className:"p-4 w-[35%]",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:D==="credit"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)"},className:"w-8 h-8 rounded-full flex items-center justify-center text-sm flex-shrink-0",children:D==="credit"?"":k.shuttleId?"":""}),t.jsx("div",{children:t.jsx("div",{className:"font-semibold",children:A(k)})})]})}),t.jsx("td",{className:"p-4 w-[20%]",children:t.jsxs("span",{style:{color:D==="credit"?"#10B981":"#EF4444"},className:"font-bold text-base",children:[D==="credit"?"+":"-","",Math.abs(k.amount||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})}),t.jsx("td",{style:{color:e.text.primary},className:"p-4 w-[25%]",children:t.jsx("code",{style:{background:a?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)",padding:"4px 8px",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace"},children:k.transactionId||k.id||"N/A"})})]},k._id||k.id||U)})})]}),v.totalPages>1&&t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-4 border-t flex items-center justify-between",children:[t.jsxs("p",{style:{color:e.text.muted},className:"text-sm",children:["Page ",v.page," of ",v.totalPages," (",v.total," total)"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>B(v.page-1),disabled:v.page===1,style:{background:v.page===1?"rgba(100,100,100,0.2)":e.bg.tertiary,color:v.page===1?e.text.muted:e.accent.primary,borderColor:v.page===1?"transparent":e.accent.primary},className:"px-4 py-2 rounded-lg text-sm border-2 font-semibold disabled:cursor-not-allowed transition hover:opacity-80",children:" Previous"}),t.jsx("button",{onClick:()=>B(v.page+1),disabled:v.page===v.totalPages,style:{background:v.page===v.totalPages?"rgba(100,100,100,0.2)":e.bg.tertiary,color:v.page===v.totalPages?e.text.muted:e.accent.primary,borderColor:v.page===v.totalPages?"transparent":e.accent.primary},className:"px-4 py-2 rounded-lg text-sm border-2 font-semibold disabled:cursor-not-allowed transition hover:opacity-80",children:"Next "})]})]})]})}),h&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0,0,0,0.8)",backdropFilter:"blur(8px)"},onClick:()=>!g&&y(!1),children:t.jsx("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"w-full max-w-md rounded-2xl border overflow-hidden",onClick:k=>k.stopPropagation(),children:j?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.2)"},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(ft,{className:"w-12 h-12 text-emerald-500"})}),t.jsx("h3",{className:"text-2xl font-bold text-emerald-500 mb-2",children:"Request Sent!"}),t.jsx("p",{style:{color:e.text.secondary},children:"Your transaction history will be sent to your email shortly."})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{background:"rgba(59,130,246,0.15)",borderColor:"rgba(59,130,246,0.3)"},className:"p-5 border-b",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Tn,{className:"w-6 h-6 text-blue-500"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-blue-500",children:"Request Transaction History"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:"Get a formatted copy via email"})]})]}),t.jsx("button",{onClick:()=>y(!1),disabled:g,style:{color:e.text.secondary},className:"hover:opacity-70 disabled:opacity-50",children:t.jsx(Tt,{className:"w-5 h-5"})})]})}),t.jsxs("div",{className:"p-6 space-y-5",children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:"We'll send a formatted PDF of your transaction history to your registered email address."}),t.jsxs("div",{style:{background:e.bg.tertiary,borderColor:e.border.primary},className:"p-4 rounded-xl border",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx(ci,{className:"w-5 h-5",style:{color:e.accent.primary}}),t.jsx("span",{style:{color:e.text.primary},className:"font-semibold",children:"Date Range (Optional)"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-bold uppercase mb-1",children:"From"}),t.jsx("input",{type:"date",value:d,onChange:k=>x(k.target.value),style:{background:e.bg.secondary,color:e.text.primary,borderColor:e.border.primary},className:"w-full px-3 py-2 rounded-lg border text-sm focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-bold uppercase mb-1",children:"To"}),t.jsx("input",{type:"date",value:m,onChange:k=>b(k.target.value),style:{background:e.bg.secondary,color:e.text.primary,borderColor:e.border.primary},className:"w-full px-3 py-2 rounded-lg border text-sm focus:outline-none"})]})]}),t.jsx("p",{style:{color:e.text.muted},className:"text-xs mt-2",children:"Leave empty to get all transactions"})]}),t.jsx("div",{style:{background:"rgba(59,130,246,0.1)",borderColor:"rgba(59,130,246,0.2)"},className:"p-4 rounded-xl border",children:t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:[t.jsx("strong",{style:{color:"#3B82F6"},children:"Note:"})," The email will be sent to your registered email address and may take a few minutes to arrive. Check your spam folder if you don't see it."]})})]}),t.jsxs("div",{className:"flex gap-3 p-4 border-t",style:{borderColor:e.border.primary},children:[t.jsx("button",{onClick:()=>y(!1),disabled:g,style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"flex-1 py-3 rounded-xl font-semibold border hover:opacity-80 transition disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:F,disabled:g,className:"flex-1 py-3 rounded-xl font-bold bg-blue-500 text-white hover:opacity-90 transition disabled:opacity-50 flex items-center justify-center gap-2",children:g?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Tn,{className:"w-4 h-4"}),"Send to Email"]})})]})]})})})]})}function R4(){var M,B,F,L;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState("all"),[c,u]=p.useState(""),[d,x]=p.useState(null),[m,b]=p.useState("details"),v=p.useRef(null),S=async(k=!1)=>{try{k||l(!0);const U=await J.get("/user/concerns/my-concerns");U!=null&&U.concerns&&s(U.concerns)}catch{k||$.error("Failed to load concerns")}finally{k||l(!1)}};p.useEffect(()=>(S(),v.current=setInterval(()=>S(!0),6e4),()=>{v.current&&clearInterval(v.current)}),[]);const h=r.filter(k=>{var _,z,q;const U=o==="all"||k.status===o,D=!c||((_=k.subject)==null?void 0:_.toLowerCase().includes(c.toLowerCase()))||((z=k.concernId)==null?void 0:z.toLowerCase().includes(c.toLowerCase()))||((q=k.feedbackText)==null?void 0:q.toLowerCase().includes(c.toLowerCase()));return U&&D}),y=r.filter(k=>k.status==="pending").length,g=r.filter(k=>k.status==="in_progress").length,f=r.filter(k=>k.status==="resolved").length,j=k=>{switch(k){case"pending":return"#FBBF24";case"in_progress":return"#3B82F6";case"resolved":return"#10B981";default:return e.text.secondary}},C=k=>{switch(k){case"pending":return t.jsx(pa,{className:"w-4 h-4"});case"in_progress":return t.jsx(Xe,{className:"w-4 h-4 animate-spin"});case"resolved":return t.jsx(ft,{className:"w-4 h-4"});default:return t.jsx(ra,{className:"w-4 h-4"})}},E=k=>k?new Date(k).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",A=k=>{x(k),b("details")};return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading your concerns..."]}):t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," My Concerns"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Track the status of your submitted concerns and feedback"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-5",children:[t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(251, 191, 36, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(251, 191, 36, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(pa,{className:"w-6 h-6 text-yellow-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Pending"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-500",children:y})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(59, 130, 246, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(59, 130, 246, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(Xe,{className:"w-6 h-6 text-blue-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"In Progress"}),t.jsx("p",{className:"text-2xl font-bold text-blue-500",children:g})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:"rgba(16, 185, 129, 0.3)"},className:"p-4 rounded-xl border flex items-center gap-4",children:[t.jsx("div",{style:{background:"rgba(16, 185, 129, 0.2)"},className:"w-12 h-12 rounded-full flex items-center justify-center",children:t.jsx(ft,{className:"w-6 h-6 text-emerald-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase",children:"Resolved"}),t.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:f})]})]})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.8)":e.bg.card,borderColor:e.accent.primary},className:"rounded-xl border-2 p-3 mb-5 flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(Zr,{style:{color:e.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search concerns...",value:c,onChange:k=>u(k.target.value),style:{background:"transparent",color:e.text.primary,borderColor:"transparent"},className:"w-full pl-10 pr-4 py-2.5 rounded-lg text-sm focus:outline-none placeholder:text-gray-500"})]}),t.jsx("div",{style:{background:e.border.primary},className:"hidden sm:block w-px h-8"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","pending","in_progress","resolved"].map(k=>t.jsx("button",{onClick:()=>i(k),style:{background:o===k?e.accent.primary:a?"rgba(30,35,71,0.8)":"#F9FAFB",color:o===k?a?"#181D40":"#FFFFFF":e.text.primary,borderColor:e.border.primary},className:"px-3 py-2 rounded-lg font-semibold text-xs border hover:opacity-80 transition",children:k==="in_progress"?"In Progress":k.charAt(0).toUpperCase()+k.slice(1)},k))})]}),t.jsx("div",{className:"mb-4",children:t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:["Showing ",t.jsx("span",{style:{color:e.accent.primary},className:"font-bold",children:h.length})," of ",r.length," concerns"]})}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:h.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{className:"font-semibold",children:"No concerns found"}),t.jsx("p",{className:"text-sm mt-2",children:r.length===0?"You haven't submitted any concerns yet":"Try adjusting your filters"})]}):t.jsx("div",{className:"divide-y",style:{borderColor:e.border.primary},children:h.map(k=>{var U,D;return t.jsxs("div",{className:"p-4 flex items-center justify-between cursor-pointer transition hover:bg-white/5",onClick:()=>A(k),children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[t.jsxs("span",{style:{background:`${j(k.status)}20`,color:j(k.status)},className:"px-2 py-1 rounded text-xs font-semibold capitalize flex items-center gap-1",children:[C(k.status),(U=k.status)==null?void 0:U.replace("_"," ")]}),t.jsx("span",{style:{color:e.text.primary},className:"font-semibold",children:k.subject||((D=k.selectedConcerns)==null?void 0:D.join(", "))||"No subject"})]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm line-clamp-1",children:k.feedbackText||k.otherConcern||"No details"}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 flex-wrap",children:[t.jsxs("span",{style:{color:e.text.muted},className:"text-xs",children:["To: ",k.reportTo]}),t.jsx("span",{style:{color:e.text.muted},className:"text-xs",children:E(k.submittedAt||k.createdAt)}),k.concernId&&t.jsxs("span",{style:{color:e.text.muted},className:"text-xs font-mono",children:["#",k.concernId]})]})]}),t.jsx("span",{style:{color:e.text.secondary},className:"text-xl ml-4",children:""})]},k._id)})})})}),d&&t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:()=>x(null),children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-2xl max-h-[85vh] overflow-hidden animate-fadeIn",onClick:k=>k.stopPropagation(),children:[t.jsxs("div",{style:{background:a?`linear-gradient(135deg, ${j(d.status)}30 0%, ${j(d.status)}10 100%)`:`linear-gradient(135deg, ${j(d.status)}20 0%, ${j(d.status)}10 100%)`,borderColor:`${j(d.status)}50`},className:"px-6 py-4 flex items-center justify-between border-b",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:`${j(d.status)}30`},className:"w-10 h-10 rounded-full flex items-center justify-center",children:C(d.status)}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:j(d.status)},className:"text-xl font-bold",children:"Concern Details"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:d.concernId||"No ID"})]})]}),t.jsx("button",{onClick:()=>x(null),style:{color:e.text.secondary},className:"hover:opacity-70 transition-colors",children:t.jsx(Tt,{className:"w-6 h-6"})})]}),t.jsxs("div",{style:{padding:"0 24px",borderBottom:`2px solid ${e.border.primary}`,display:"flex",gap:"8px"},children:[t.jsx("button",{onClick:()=>b("details"),style:{padding:"12px 20px",background:"transparent",border:"none",borderBottom:`3px solid ${m==="details"?e.accent.primary:"transparent"}`,color:m==="details"?e.accent.primary:e.text.secondary,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:" Details"}),t.jsxs("button",{onClick:()=>b("notes"),style:{padding:"12px 20px",background:"transparent",border:"none",borderBottom:`3px solid ${m==="notes"?e.accent.primary:"transparent"}`,color:m==="notes"?e.accent.primary:e.text.secondary,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[" Notes History ",((M=d.notes)==null?void 0:M.length)>0&&`(${d.notes.length})`]})]}),t.jsx("div",{style:{flex:1,overflow:"auto",padding:"24px",maxHeight:"60vh"},children:m==="details"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex items-center gap-3 mb-5",children:t.jsxs("span",{style:{background:`${j(d.status)}20`,color:j(d.status)},className:"px-3 py-1.5 rounded-full text-sm font-bold capitalize flex items-center gap-2",children:[C(d.status),(B=d.status)==null?void 0:B.replace("_"," ")]})}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"rounded-xl border p-4 space-y-3 mb-5",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Submitted"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold",children:E(d.submittedAt||d.createdAt)})]}),d.status==="in_progress"&&d.inProgressDate&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"In Progress Since"}),t.jsx("span",{style:{color:"#3B82F6"},className:"text-sm font-semibold",children:E(d.inProgressDate)})]}),d.resolvedDate&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Resolved Date"}),t.jsx("span",{style:{color:"#10B981"},className:"text-sm font-semibold",children:E(d.resolvedDate)})]})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"rounded-xl border p-4 space-y-3 mb-5",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Subject"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold text-right max-w-[60%]",children:d.subject||((F=d.selectedConcerns)==null?void 0:F.join(", "))||"N/A"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Submitted To"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold",children:d.reportTo||"N/A"})]}),d.plateNumber&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{style:{color:e.text.secondary},className:"text-sm",children:"Plate Number"}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-mono font-semibold",children:d.plateNumber})]})]}),t.jsxs("div",{className:"mb-5",children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-sm font-semibold mb-2",children:"Your Message"}),t.jsx("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"rounded-xl border p-4",children:t.jsx("p",{style:{color:e.text.primary},className:"whitespace-pre-wrap",children:d.feedbackText||d.otherConcern||"No message provided"})})]}),d.status==="pending"&&t.jsxs("div",{style:{background:"rgba(251,191,36,0.1)",borderColor:"rgba(251,191,36,0.3)"},className:"rounded-xl border p-4 flex items-start gap-3 mt-5",children:[t.jsx(pa,{className:"w-5 h-5 text-yellow-500 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:"#FBBF24"},className:"font-semibold",children:"Awaiting Review"}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm mt-1",children:["Your concern has been received and is waiting to be reviewed by the ",d.reportTo||"support team","."]})]})]}),d.status==="in_progress"&&t.jsxs("div",{style:{background:"rgba(59,130,246,0.1)",borderColor:"rgba(59,130,246,0.3)"},className:"rounded-xl border p-4 flex items-start gap-3 mt-5",children:[t.jsx(Xe,{className:"w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0 animate-spin"}),t.jsxs("div",{children:[t.jsx("p",{style:{color:"#3B82F6"},className:"font-semibold",children:"Being Reviewed"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm mt-1",children:"Our team is currently looking into your concern. We'll get back to you with a resolution soon."})]})]})]}):t.jsx("div",{children:(!d.notes||d.notes.length===0)&&d.status!=="resolved"?t.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:e.text.tertiary},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("p",{style:{fontSize:"14px",margin:0},children:"No updates yet"}),t.jsx("p",{style:{fontSize:"12px",color:e.text.muted,marginTop:"8px"},children:"Admin updates will appear here as they work on your concern"})]}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(L=d.notes)==null?void 0:L.slice().reverse().map((k,U)=>t.jsxs("div",{style:{background:e.bg.tertiary,borderRadius:"12px",padding:"16px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsxs("span",{style:{color:e.accent.primary,fontSize:"12px",fontWeight:700},children:[" ",k.adminName||"Admin"]}),t.jsx("span",{style:{color:e.text.muted,fontSize:"11px"},children:k.timestamp?E(k.timestamp):""})]}),t.jsx("p",{style:{color:e.text.primary,margin:0,lineHeight:"1.5"},children:k.message})]},U)),d.status==="resolved"&&d.adminResponse&&t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderRadius:"12px",padding:"16px",border:"2px solid rgba(16,185,129,0.3)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#10B981",fontSize:"12px",fontWeight:700},children:" RESOLVED"}),t.jsx("span",{style:{color:"#10B981",fontSize:"11px",fontWeight:600},children:d.resolvedDate?E(d.resolvedDate):""})]}),t.jsx("p",{style:{color:e.text.primary,margin:0,lineHeight:"1.5",fontWeight:500},children:d.adminResponse})]})]})})}),t.jsx("div",{className:"px-6 py-4 flex justify-end border-t",style:{borderColor:e.border.primary},children:t.jsx("button",{onClick:()=>x(null),style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"px-6 py-2.5 rounded-xl font-semibold transition-all hover:opacity-80",children:"Close"})})]})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
      `})]})}function z4(){var Z,te,I,Y;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState("profile"),[n,l]=p.useState(null),[o,i]=p.useState(!0),[c,u]=p.useState({firstName:"",lastName:"",email:"",phone:""}),[d,x]=p.useState(!1),[m,b]=p.useState({currentPin:"",newPin:"",confirmPin:""}),[v,S]=p.useState(!1),[h,y]=p.useState(!1),[g,f]=p.useState(!1),[j,C]=p.useState(!1),[E,A]=p.useState(!1),[M,B]=p.useState(""),[F,L]=p.useState(!1),[k,U]=p.useState(1),[D,_]=p.useState(""),[z,q]=p.useState(!1),[w,N]=p.useState(!1);p.useEffect(()=>{R()},[]);const R=async()=>{try{i(!0);const G=localStorage.getItem("userData");if(G&&G!=="undefined"&&G!=="null"){const se=JSON.parse(G);l(se),u({firstName:se.firstName||"",lastName:se.lastName||"",email:se.email||"",phone:se.phone||""})}const K=await J.get("/user/profile");K&&(l(K),u({firstName:K.firstName||"",lastName:K.lastName||"",email:K.email||"",phone:K.phone||""}))}catch(G){console.error("Error fetching user data:",G)}finally{i(!1)}},T=async()=>{x(!0);try{const G=await J.put("/user/profile",c);if(G!=null&&G.success){$.success("Profile updated successfully!");const K={...n,...c};localStorage.setItem("userData",JSON.stringify(K)),l(K)}}catch(G){$.error(G.message||"Failed to update profile")}finally{x(!1)}},O=async()=>{if(!m.currentPin||!m.newPin||!m.confirmPin){$.error("Please fill in all PIN fields");return}if(m.newPin.length!==6||!/^\d+$/.test(m.newPin)){$.error("PIN must be exactly 6 digits");return}if(m.newPin!==m.confirmPin){$.error("New PINs do not match");return}C(!0);try{const G=await J.post("/user/change-pin",{currentPin:m.currentPin,newPin:m.newPin});G!=null&&G.success&&($.success("PIN changed successfully!"),b({currentPin:"",newPin:"",confirmPin:""}))}catch(G){$.error(G.message||"Failed to change PIN")}finally{C(!1)}},V=async()=>{if(!M.trim()){$.error("Please provide a reason for deactivation");return}q(!0);try{const G=await J.post("/user/send-deactivation-otp",{reason:M.trim()});G!=null&&G.success&&($.success("Verification code sent to your email"),U(2),N(!0))}catch(G){$.error(G.message||"Failed to send verification code")}finally{q(!1)}},P=async()=>{if(!D||D.length!==6){$.error("Please enter the 6-digit verification code");return}L(!0);try{const G=await J.post("/user/request-deactivation",{reason:M.trim(),otp:D});G!=null&&G.success&&($.success("Deactivation request submitted. You will be notified via email."),A(!1),B(""),_(""),U(1),N(!1))}catch(G){$.error(G.message||"Failed to submit deactivation request")}finally{L(!1)}},W=()=>{!F&&!z&&(A(!1),B(""),_(""),U(1),N(!1))};return o?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading profile..."]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsx("div",{style:{borderColor:a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"},className:"mb-6 border-b-2 pb-5",children:t.jsxs("div",{className:"flex items-center gap-5",children:[t.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:`linear-gradient(135deg, ${e.accent.primary} 0%, ${a?"#FFB800":"#2563EB"} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"32px",fontWeight:"700",color:a?"#181D40":"#FFFFFF",border:`3px solid ${e.bg.card}`,boxShadow:`0 4px 15px ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},children:[((te=(Z=n==null?void 0:n.firstName)==null?void 0:Z.charAt(0))==null?void 0:te.toUpperCase())||"?",((Y=(I=n==null?void 0:n.lastName)==null?void 0:I.charAt(0))==null?void 0:Y.toUpperCase())||""]}),t.jsxs("div",{children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-1",children:[n==null?void 0:n.firstName," ",n==null?void 0:n.lastName]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0 mb-1",children:n==null?void 0:n.email}),t.jsx("span",{style:{display:"inline-block",padding:"3px 10px",borderRadius:"20px",fontSize:"10px",fontWeight:700,background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",color:e.accent.primary,textTransform:"uppercase"},children:(n==null?void 0:n.role)||"Student"})]})]})}),t.jsxs("div",{className:"flex gap-2 mb-6",children:[t.jsxs("button",{onClick:()=>s("profile"),style:{padding:"12px 24px",background:r==="profile"?e.accent.primary:"transparent",color:r==="profile"?a?"#181D40":"#FFFFFF":e.text.secondary,border:`2px solid ${r==="profile"?e.accent.primary:e.border.primary}`,borderRadius:"10px",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:[t.jsx(gd,{className:"w-4 h-4"}),"Profile"]}),t.jsxs("button",{onClick:()=>s("security"),style:{padding:"12px 24px",background:r==="security"?e.accent.primary:"transparent",color:r==="security"?a?"#181D40":"#FFFFFF":e.text.secondary,border:`2px solid ${r==="security"?e.accent.primary:e.border.primary}`,borderRadius:"10px",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:[t.jsx(Yn,{className:"w-4 h-4"}),"Security"]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:r==="profile"?t.jsxs("div",{className:"max-w-2xl space-y-6",children:[t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("h3",{style:{color:e.text.primary},className:"text-lg font-bold mb-5 flex items-center gap-2",children:[t.jsx("span",{children:""})," Personal Information"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:"First Name"}),t.jsx("input",{type:"text",value:c.firstName,onChange:G=>u({...c,firstName:G.target.value}),style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-blue-400/30"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:"Last Name"}),t.jsx("input",{type:"text",value:c.lastName,onChange:G=>u({...c,lastName:G.target.value}),style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-blue-400/30"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:"Email Address"}),t.jsx("input",{type:"email",value:c.email,disabled:!0,style:{background:e.bg.tertiary,color:e.text.muted,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border cursor-not-allowed opacity-60"}),t.jsx("p",{style:{color:e.text.muted},className:"text-xs mt-1",children:"Email cannot be changed"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:"Phone Number"}),t.jsx("input",{type:"tel",value:c.phone,onChange:G=>u({...c,phone:G.target.value}),placeholder:"+63 9XX XXX XXXX",style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-blue-400/30"})]})]}),t.jsx("div",{className:"mt-6 flex justify-end",children:t.jsx("button",{onClick:T,disabled:d,style:{background:d?"rgba(100,100,100,0.3)":e.accent.primary,color:d?e.text.muted:a?"#181D40":"#FFFFFF"},className:"px-6 py-3 rounded-xl font-bold transition hover:opacity-90 disabled:cursor-not-allowed flex items-center gap-2",children:d?"Saving...":" Save Changes"})})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("h3",{style:{color:e.text.primary},className:"text-lg font-bold mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""})," Account Information"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{style:{background:e.bg.tertiary,borderColor:e.border.primary},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-bold uppercase mb-1",children:"School ID"}),t.jsx("p",{style:{color:e.text.primary},className:"font-semibold",children:(n==null?void 0:n.schoolUId)||"N/A"})]}),t.jsxs("div",{style:{background:e.bg.tertiary,borderColor:e.border.primary},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-bold uppercase mb-1",children:"Account Type"}),t.jsx("p",{style:{color:e.text.primary},className:"font-semibold capitalize",children:(n==null?void 0:n.accountType)||"Student"})]}),t.jsxs("div",{style:{background:e.bg.tertiary,borderColor:e.border.primary},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-bold uppercase mb-1",children:"Status"}),t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,background:n!=null&&n.isActive?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:n!=null&&n.isActive?"#10B981":"#EF4444"},children:n!=null&&n.isActive?"ACTIVE":"INACTIVE"})]}),t.jsxs("div",{style:{background:e.bg.tertiary,borderColor:e.border.primary},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-xs font-bold uppercase mb-1",children:"Member Since"}),t.jsx("p",{style:{color:e.text.primary},className:"font-semibold",children:n!=null&&n.createdAt?new Date(n.createdAt).toLocaleDateString():"N/A"})]})]})]})]}):t.jsxs("div",{className:"max-w-2xl",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("h3",{style:{color:e.text.primary},className:"text-lg font-bold mb-5 flex items-center gap-2",children:[t.jsx("span",{children:""})," Change PIN"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:"Current PIN"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:v?"text":"password",value:m.currentPin,onChange:G=>b({...m,currentPin:G.target.value.replace(/\D/g,"").slice(0,6)}),maxLength:6,placeholder:"",style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-blue-400/30 font-mono tracking-widest"}),t.jsx("button",{type:"button",onClick:()=>S(!v),style:{color:e.text.muted},className:"absolute right-3 top-1/2 -translate-y-1/2",children:v?t.jsx(Kl,{className:"w-4 h-4"}):t.jsx(eo,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:"New PIN"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:h?"text":"password",value:m.newPin,onChange:G=>b({...m,newPin:G.target.value.replace(/\D/g,"").slice(0,6)}),maxLength:6,placeholder:"",style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-blue-400/30 font-mono tracking-widest"}),t.jsx("button",{type:"button",onClick:()=>y(!h),style:{color:e.text.muted},className:"absolute right-3 top-1/2 -translate-y-1/2",children:h?t.jsx(Kl,{className:"w-4 h-4"}):t.jsx(eo,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-bold uppercase mb-2",children:"Confirm New PIN"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:g?"text":"password",value:m.confirmPin,onChange:G=>b({...m,confirmPin:G.target.value.replace(/\D/g,"").slice(0,6)}),maxLength:6,placeholder:"",style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-blue-400/30 font-mono tracking-widest"}),t.jsx("button",{type:"button",onClick:()=>f(!g),style:{color:e.text.muted},className:"absolute right-3 top-1/2 -translate-y-1/2",children:g?t.jsx(Kl,{className:"w-4 h-4"}):t.jsx(eo,{className:"w-4 h-4"})})]})]}),t.jsx("button",{onClick:O,disabled:j,style:{background:j?"rgba(100,100,100,0.3)":e.accent.primary,color:j?e.text.muted:a?"#181D40":"#FFFFFF"},className:"w-full py-3 rounded-xl font-bold transition hover:opacity-90 disabled:cursor-not-allowed mt-2",children:j?"Changing...":"Change PIN"})]})]}),t.jsxs("div",{style:{background:"rgba(239,68,68,0.1)",borderColor:"rgba(239,68,68,0.3)"},className:"p-6 rounded-2xl border",children:[t.jsxs("h3",{style:{color:"#EF4444"},className:"text-lg font-bold mb-3 flex items-center gap-2",children:[t.jsx(xa,{className:"w-5 h-5"}),"Deactivate Account"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm mb-4",children:"Request to deactivate your NUCash account. This action will:"}),t.jsxs("ul",{style:{color:e.text.secondary},className:"text-sm space-y-2 mb-5",children:[t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-red-400 mt-0.5",children:""}),"Disable your ability to use NUCash services"]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-red-400 mt-0.5",children:""}),"Require admin approval to process"]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-red-400 mt-0.5",children:""}),"Any remaining balance must be settled first"]})]}),t.jsx("button",{onClick:()=>A(!0),className:"w-full py-3 rounded-xl font-bold transition hover:opacity-90 bg-red-500 text-white",children:"Request Deactivation"})]})]}),t.jsxs("div",{style:{background:"rgba(59,130,246,0.1)",borderColor:"rgba(59,130,246,0.3)"},className:"mt-6 p-5 rounded-2xl border",children:[t.jsxs("h4",{style:{color:"#3B82F6"},className:"font-bold mb-3 flex items-center gap-2",children:[t.jsx(Yn,{className:"w-4 h-4"}),"Security Tips"]}),t.jsxs("ul",{style:{color:e.text.secondary},className:"text-sm space-y-2",children:[t.jsx("li",{children:" Never share your PIN with anyone"}),t.jsx("li",{children:" Change your PIN regularly (every 3 months recommended)"}),t.jsx("li",{children:" Use a PIN that's hard to guess (avoid birthdays, repeating numbers)"}),t.jsx("li",{children:" Report any suspicious activity immediately"})]})]})]})}),E&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0,0,0,0.8)",backdropFilter:"blur(8px)"},onClick:W,children:t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:"rgba(239,68,68,0.3)"},className:"w-full max-w-md rounded-2xl border-2 overflow-hidden",onClick:G=>G.stopPropagation(),children:[t.jsx("div",{style:{background:"rgba(239,68,68,0.15)"},className:"p-5 border-b border-red-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(xa,{className:"w-6 h-6 text-red-500"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-red-500",children:k===1?"Request Deactivation":"Verify Your Identity"}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-xs",children:["Step ",k," of 2"]})]})]}),t.jsx("button",{onClick:W,disabled:F||z,style:{color:e.text.secondary},className:"hover:opacity-70 disabled:opacity-50",children:t.jsx(Tt,{className:"w-5 h-5"})})]})}),t.jsx("div",{style:{background:a?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)"},className:"h-1",children:t.jsx("div",{style:{width:`${k/2*100}%`,background:"#EF4444",transition:"width 0.3s ease"},className:"h-full"})}),t.jsx("div",{className:"p-6 space-y-5",children:k===1?t.jsxs(t.Fragment,{children:[t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:"Are you sure you want to request account deactivation? This request will be reviewed by an administrator."}),t.jsxs("div",{children:[t.jsxs("label",{style:{color:e.text.primary},className:"font-semibold mb-2 block",children:["Reason for deactivation ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("textarea",{value:M,onChange:G=>B(G.target.value),placeholder:"Please provide a reason...",rows:4,style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-red-400/30 resize-none"})]}),t.jsxs("div",{style:{background:"rgba(245,158,11,0.1)",borderColor:"rgba(245,158,11,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:"#F59E0B"},className:"text-sm font-semibold mb-1",children:" Important"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs",children:"If you have any remaining balance, please contact the Treasury Office to settle it before deactivation."})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[t.jsx("div",{style:{background:"rgba(59,130,246,0.15)",width:"70px",height:"70px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",fontSize:"32px"},children:""}),t.jsx("p",{style:{color:e.text.primary},className:"font-semibold",children:"Check your email"}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm mt-1",children:["We sent a 6-digit verification code to",t.jsx("br",{}),t.jsx("strong",{style:{color:e.accent.primary},children:n==null?void 0:n.email})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.primary},className:"font-semibold mb-2 block text-center",children:"Enter verification code"}),t.jsx("input",{type:"text",value:D,onChange:G=>_(G.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,placeholder:"",style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-4 rounded-xl border focus:outline-none focus:ring-2 focus:ring-red-400/30 text-center text-2xl font-mono tracking-[0.5em]"})]}),t.jsxs("p",{style:{color:e.text.tertiary},className:"text-xs text-center",children:["Didn't receive the code?"," ",t.jsx("button",{onClick:V,disabled:z,style:{color:e.accent.primary},className:"font-semibold hover:underline disabled:opacity-50",children:z?"Sending...":"Resend code"})]})]})}),t.jsx("div",{className:"flex gap-3 p-4 border-t",style:{borderColor:e.border.primary},children:k===1?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:W,disabled:z,style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"flex-1 py-3 rounded-xl font-semibold border hover:opacity-80 transition disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:V,disabled:z||!M.trim(),className:"flex-1 py-3 rounded-xl font-bold bg-red-500 text-white hover:opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed",children:z?"Sending Code...":"Continue "})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>U(1),disabled:F,style:{background:e.bg.tertiary,color:e.text.primary,borderColor:e.border.primary},className:"flex-1 py-3 rounded-xl font-semibold border hover:opacity-80 transition disabled:opacity-50",children:" Back"}),t.jsx("button",{onClick:P,disabled:F||D.length!==6,className:"flex-1 py-3 rounded-xl font-bold bg-red-500 text-white hover:opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed",children:F?"Submitting...":"Confirm Deactivation"})]})})]})})]})}function B4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState(""),[n,l]=p.useState("all"),[o,i]=p.useState({}),c=[{id:"all",label:"All FAQs",icon:""},{id:"account",label:"Account",icon:""},{id:"balance",label:"Balance & Cash-In",icon:""},{id:"transactions",label:"Transactions",icon:""},{id:"security",label:"Security",icon:""},{id:"technical",label:"Technical",icon:""}],u=[{id:1,category:"account",question:"How do I activate my NUCash account?",answer:"To activate your NUCash account, visit the Treasury Office with your valid school ID. They will verify your identity and activate your account on the spot. You will receive a confirmation via your registered email."},{id:2,category:"account",question:"What should I do if I forgot my PIN?",answer:'If you forgot your PIN, go to Manage Profile > Security tab and click "Change PIN". You will need to verify your identity through your registered email. Alternatively, visit the Treasury Office for in-person assistance.'},{id:3,category:"account",question:"Can I have multiple NUCash accounts?",answer:"No, each student or employee is only allowed one NUCash account tied to their official school ID. This ensures security and proper tracking of transactions."},{id:4,category:"account",question:"How do I update my personal information?",answer:"You can update some personal information through Manage Profile. However, changes to your name, email, or student ID must be done through the Registrar's Office, and the changes will reflect in NUCash within 24-48 hours."},{id:5,category:"balance",question:"How do I add money to my NUCash account?",answer:"You can add money (cash-in) at any Treasury Office window during operating hours. Simply present your school ID and the amount you wish to load. The balance will be updated instantly."},{id:6,category:"balance",question:"What is the minimum and maximum cash-in amount?",answer:"The minimum cash-in amount is 50.00. The maximum single cash-in is 10,000.00. Your total account balance cannot exceed 50,000.00."},{id:7,category:"balance",question:"Can I transfer my NUCash balance to another account?",answer:"Currently, peer-to-peer transfers are not available. You can only use your NUCash balance for purchases at registered merchants and shuttle services within the campus."},{id:8,category:"balance",question:"How do I check my current balance?",answer:"Your balance is displayed on the Home tab of your NUCash dashboard. For security, it's hidden by defaultclick the eye icon to reveal your balance. You can also check at any payment terminal."},{id:9,category:"transactions",question:"How can I view my transaction history?",answer:"Go to the History tab to view all your transactions. You can filter by date range (Today, Week, Month) and export your transaction history for your records."},{id:10,category:"transactions",question:"What should I do if a transaction is incorrect?",answer:'If you notice an incorrect transaction, report it immediately through the "Report a Concern" button on your dashboard. Select "Finance" as the department and provide transaction details. Our team will investigate within 24-48 hours.'},{id:11,category:"transactions",question:"Can I cancel or refund a transaction?",answer:"Transactions are final and cannot be cancelled once completed. For disputes, please file a concern through the app or visit the Treasury Office. Refunds are evaluated on a case-by-case basis."},{id:12,category:"transactions",question:"Why doesn't my transaction appear in my history?",answer:"Transactions typically appear instantly. If it's missing, wait a few minutes and refresh the page. If it still doesn't appear after 30 minutes, report the issue immediately with any receipt or reference number you may have."},{id:13,category:"security",question:"How do I keep my NUCash account secure?",answer:"Never share your PIN with anyone. Always log out after using shared devices. Enable notifications to monitor your account activity. Report any suspicious activity immediately."},{id:14,category:"security",question:"What should I do if I suspect unauthorized access?",answer:"If you suspect unauthorized access, immediately change your PIN through Manage Profile. Then report the incident to the Treasury Office and file a concern in the app. We will investigate and secure your account."},{id:15,category:"security",question:"How do I change my PIN?",answer:"Go to Manage Profile > Security tab > Change PIN. Enter your current PIN, then your new 6-digit PIN twice. For security, choose a PIN that's not easily guessable (avoid birthdays, sequential numbers)."},{id:16,category:"security",question:"What happens if I enter the wrong PIN multiple times?",answer:"After 5 consecutive incorrect PIN attempts, your account will be temporarily locked for 30 minutes. If you've forgotten your PIN, visit the Treasury Office for assistance."},{id:17,category:"technical",question:"Why is the app not loading properly?",answer:"Try clearing your browser cache and refreshing the page. Make sure you're using a supported browser (Chrome, Firefox, Safari, Edge). If issues persist, try accessing from a different device or network."},{id:18,category:"technical",question:"What browsers are supported?",answer:"NUCash works best on the latest versions of Google Chrome, Mozilla Firefox, Safari, and Microsoft Edge. For optimal experience, keep your browser updated."},{id:19,category:"technical",question:"Is there a mobile app for NUCash?",answer:"Currently, NUCash is a web application accessible through any mobile browser. A dedicated mobile app is planned for future release. Bookmark the website for quick access on your phone."},{id:20,category:"technical",question:"Who do I contact for technical support?",answer:'For technical issues, use the "Report a Concern" feature and select "NUCash System". For urgent matters, visit the IT Service Office (ITSO) or email support@nu.edu.ph.'}],d=b=>{i(v=>({...v,[b]:!v[b]}))},x=u.filter(b=>{const v=n==="all"||b.category===n,S=r===""||b.question.toLowerCase().includes(r.toLowerCase())||b.answer.toLowerCase().includes(r.toLowerCase());return v&&S}),m=b=>b==="all"?u.length:u.filter(v=>v.category===b).length;return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{marginBottom:"24px",paddingBottom:"20px",borderBottom:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`},children:[t.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[t.jsx("div",{style:{background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",border:`2px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`},className:"w-14 h-14 rounded-xl flex items-center justify-center text-3xl",children:""}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0",children:"Frequently Asked Questions"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm m-0 mt-1",children:"Find answers to common questions about NUCash"})]})]}),t.jsxs("div",{className:"relative mt-4",children:[t.jsx(Zr,{style:{color:e.text.tertiary},className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search FAQs...",value:r,onChange:b=>s(b.target.value),style:{width:"100%",padding:"14px 16px 14px 48px",background:a?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"12px",color:e.text.primary,fontSize:"15px",outline:"none",transition:"all 0.2s ease"},onFocus:b=>{b.target.style.borderColor=e.accent.primary,b.target.style.boxShadow=`0 0 0 3px ${a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"}`},onBlur:b=>{b.target.style.borderColor=a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",b.target.style.boxShadow="none"}})]})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:c.map(b=>t.jsxs("button",{onClick:()=>l(b.id),style:{background:n===b.id?e.accent.primary:a?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",color:n===b.id?a?"#181D40":"#FFFFFF":e.text.secondary,border:`2px solid ${n===b.id?e.accent.primary:a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`},className:"px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 transition-all hover:scale-105",children:[t.jsx("span",{children:b.icon}),t.jsx("span",{children:b.label}),t.jsx("span",{style:{background:n===b.id?a?"rgba(24,29,64,0.3)":"rgba(255,255,255,0.3)":a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",color:n===b.id?a?"#181D40":"#FFFFFF":e.accent.primary},className:"px-2 py-0.5 rounded-full text-xs font-bold",children:m(b.id)})]},b.id))}),t.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:x.length===0?t.jsxs("div",{className:"text-center py-16",children:[t.jsx("div",{style:{background:a?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`2px dashed ${a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}`},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-4xl opacity-50",children:""}),t.jsx("p",{style:{color:e.text.secondary},className:"text-lg font-semibold",children:"No FAQs found"}),t.jsx("p",{style:{color:e.text.tertiary},className:"text-sm mt-1",children:"Try a different search term or category"})]}):x.map(b=>{var v;return t.jsxs("div",{style:{background:a?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.01)",border:`2px solid ${o[b.id]?e.accent.primary:a?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.05)"}`},className:"rounded-xl overflow-hidden transition-all",children:[t.jsxs("button",{onClick:()=>d(b.id),className:"w-full p-5 flex items-center justify-between text-left transition-all",style:{background:o[b.id]?a?"rgba(255,212,28,0.05)":"rgba(59,130,246,0.03)":"transparent"},children:[t.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[t.jsx("div",{style:{background:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.1)",color:e.accent.primary},className:"w-10 h-10 rounded-lg flex items-center justify-center text-lg flex-shrink-0",children:((v=c.find(S=>S.id===b.category))==null?void 0:v.icon)||""}),t.jsx("span",{style:{color:e.text.primary},className:"font-semibold text-[15px]",children:b.question})]}),t.jsx(rj,{style:{color:e.accent.primary,transform:o[b.id]?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s ease"},className:"w-5 h-5 flex-shrink-0 ml-4"})]}),o[b.id]&&t.jsx("div",{style:{borderTop:`1px solid ${a?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.05)"}`},className:"px-5 py-4",children:t.jsx("p",{style:{color:e.text.secondary},className:"text-sm leading-relaxed whitespace-pre-wrap",children:b.answer})})]},b.id)})}),t.jsx("div",{style:{marginTop:"24px",padding:"20px",background:a?"linear-gradient(135deg, rgba(255,212,28,0.1) 0%, rgba(255,212,28,0.02) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.1) 0%, rgba(59,130,246,0.02) 100%)",border:`2px solid ${a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)"}`,borderRadius:"16px"},children:t.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[t.jsx("div",{style:{background:a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.15)"},className:"w-14 h-14 rounded-xl flex items-center justify-center text-3xl flex-shrink-0",children:""}),t.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[t.jsx("h4",{style:{color:e.text.primary},className:"font-bold text-lg mb-1",children:"Still have questions?"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:"Can't find what you're looking for? Report a concern from your dashboard and our team will help you."})]}),t.jsx("button",{onClick:()=>window.location.href="/user/dashboard",style:{background:e.accent.primary,color:a?"#181D40":"#FFFFFF"},className:"px-6 py-3 rounded-xl font-bold text-sm transition-all hover:opacity-90 hover:scale-105 flex-shrink-0",children:"Get Help"})]})})]})}function D4(){var c,u,d,x,m,b,v;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState(!0),[n,l]=p.useState({totalUsers:0,activeUsers:0,inactiveUsers:0,admins:0,students:0,employees:0,totalBalance:0,todayTransactions:0,todayCashIn:0,totalMerchants:0,activeMerchants:0,recentLogins:[]}),o=p.useRef(null),i=async(S=!1)=>{var h,y,g,f,j,C,E,A,M,B,F;try{S||s(!0);const L=await J.get("/admin/sysad/dashboard");if(L){const k={totalUsers:((h=L.userMetrics)==null?void 0:h.total)||L.totalUsers||0,activeUsers:((y=L.userMetrics)==null?void 0:y.active)||L.activeUsers||0,inactiveUsers:((g=L.userMetrics)==null?void 0:g.inactive)||L.inactiveUsers||0,admins:((f=L.userMetrics)==null?void 0:f.admins)||L.admins||0,students:((j=L.userMetrics)==null?void 0:j.students)||L.students||0,employees:((C=L.userMetrics)==null?void 0:C.employees)||L.employees||0,totalBalance:((E=L.financialMetrics)==null?void 0:E.totalBalance)||L.totalBalance||0,todayTransactions:((A=L.financialMetrics)==null?void 0:A.totalTransactions)||L.todayTransactions||0,todayCashIn:((M=L.financialMetrics)==null?void 0:M.todayCashIn)||L.todayCashIn||0,totalMerchants:((B=L.financialMetrics)==null?void 0:B.activeMerchants)||L.totalMerchants||0,activeMerchants:((F=L.financialMetrics)==null?void 0:F.activeMerchants)||L.activeMerchants||0,recentLogins:L.recentActivity||L.recentLogins||[]};l(k)}}catch(L){S||$.error("Failed to load dashboard metrics"),console.error("Dashboard error:",L)}finally{S||s(!1)}};return p.useEffect(()=>(i(),o.current=setInterval(()=>i(!0),3e4),()=>{o.current&&clearInterval(o.current)}),[]),r?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading dashboard..."]}):t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Home"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Comprehensive overview of the NUCash system  Auto-updates every 30 seconds"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{style:{color:e.text.primary},className:"text-lg font-bold mb-4 flex items-center gap-2",children:[t.jsx(Us,{className:"w-5 h-5",style:{color:e.accent.primary}}),"User Metrics"]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-4",children:[t.jsx(oa,{icon:t.jsx(Us,{className:"w-6 h-6"}),label:"Total Users",value:((c=n.totalUsers)==null?void 0:c.toLocaleString())||"0",color:"#3B82F6",theme:e,isDarkMode:a}),t.jsx(oa,{icon:t.jsx(xd,{className:"w-6 h-6"}),label:"Active Users",value:((u=n.activeUsers)==null?void 0:u.toLocaleString())||"0",color:"#10B981",theme:e,isDarkMode:a}),t.jsx(oa,{icon:t.jsx(fd,{className:"w-6 h-6"}),label:"Inactive Users",value:((d=n.inactiveUsers)==null?void 0:d.toLocaleString())||"0",color:"#EF4444",theme:e,isDarkMode:a}),t.jsx(oa,{icon:t.jsx(Yn,{className:"w-6 h-6"}),label:"Admins",value:((x=n.admins)==null?void 0:x.toLocaleString())||"0",color:"#8B5CF6",theme:e,isDarkMode:a}),t.jsx(oa,{icon:t.jsx(Mh,{className:"w-6 h-6"}),label:"Students",value:((m=n.students)==null?void 0:m.toLocaleString())||"0",color:"#F59E0B",theme:e,isDarkMode:a}),t.jsx(oa,{icon:t.jsx(Bh,{className:"w-6 h-6"}),label:"Employees",value:((b=n.employees)==null?void 0:b.toLocaleString())||"0",color:"#06B6D4",theme:e,isDarkMode:a})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{style:{color:e.text.primary},className:"text-lg font-bold mb-4 flex items-center gap-2",children:[t.jsx(Ls,{className:"w-5 h-5",style:{color:e.accent.primary}}),"Financial Overview"]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx(oa,{icon:t.jsx(ul,{className:"w-6 h-6"}),label:"Total Balance in System",value:`${(n.totalBalance||0).toLocaleString("en-PH",{minimumFractionDigits:2})}`,color:"#10B981",theme:e,isDarkMode:a,large:!0}),t.jsx(oa,{icon:t.jsx(X5,{className:"w-6 h-6"}),label:"Today's Transactions",value:((v=n.todayTransactions)==null?void 0:v.toLocaleString())||"0",color:"#3B82F6",theme:e,isDarkMode:a}),t.jsx(oa,{icon:t.jsx(Ls,{className:"w-6 h-6"}),label:"Today's Cash-In",value:`${(n.todayCashIn||0).toLocaleString("en-PH",{minimumFractionDigits:2})}`,color:"#F59E0B",theme:e,isDarkMode:a}),t.jsx(oa,{icon:t.jsx(Jr,{className:"w-6 h-6"}),label:"Active Merchants",value:`${n.activeMerchants||0}/${n.totalMerchants||0}`,color:"#8B5CF6",theme:e,isDarkMode:a})]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{style:{color:e.text.primary},className:"text-lg font-bold mb-4 flex items-center gap-2",children:[t.jsx(pa,{className:"w-5 h-5",style:{color:e.accent.primary}}),"Recent Admin Activity"]}),t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border p-4",children:n.recentLogins&&n.recentLogins.length>0?t.jsx("div",{className:"space-y-3",children:n.recentLogins.map((S,h)=>{var y;return t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"p-4 rounded-xl border flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{style:{background:S.eventType==="login"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)"},className:"w-10 h-10 rounded-full flex items-center justify-center",children:S.eventType==="login"?t.jsx(xd,{className:"w-5 h-5 text-emerald-500"}):t.jsx(fd,{className:"w-5 h-5 text-red-500"})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.primary},className:"font-semibold",children:S.adminName||"Admin"}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-xs",children:[((y=S.metadata)==null?void 0:y.adminRole)||"Admin","  ",S.adminId||"N/A"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{style:{background:S.eventType==="login"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:S.eventType==="login"?"#10B981":"#EF4444"},className:"px-3 py-1 rounded-full text-xs font-bold uppercase",children:S.eventType}),t.jsx("p",{style:{color:e.text.muted},className:"text-xs mt-1",children:new Date(S.timestamp).toLocaleString()})]})]},h)})}):t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-10",children:[t.jsx(pa,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{className:"font-semibold",children:"No recent admin activity"}),t.jsx("p",{className:"text-sm mt-1",children:"Admin logins and logouts will appear here"})]})})]})]})}function oa({icon:e,label:a,value:r,color:s,theme:n,isDarkMode:l,large:o}){return t.jsxs("div",{style:{background:n.bg.card,borderColor:`${s}30`},className:`p-4 rounded-xl border flex items-center gap-4 ${o?"col-span-1":""}`,children:[t.jsx("div",{style:{background:`${s}20`},className:"w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx("div",{style:{color:s},children:e})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{style:{color:n.text.secondary},className:"text-xs font-semibold uppercase truncate",children:a}),t.jsx("p",{style:{color:s},className:`font-bold truncate ${o?"text-xl":"text-lg"}`,children:r})]})]})}function _4({isOpen:e,onClose:a,type:r="success",title:s,message:n}){const{theme:l,isDarkMode:o}=ne();if(!e)return null;const i={success:{icon:ft,color:"#10B981",bg:"rgba(16,185,129,0.15)"},error:{icon:cj,color:"#EF4444",bg:"rgba(239,68,68,0.15)"},warning:{icon:xa,color:"#F59E0B",bg:"rgba(245,158,11,0.15)"},info:{icon:Ih,color:"#3B82F6",bg:"rgba(59,130,246,0.15)"}},c=i[r]||i.success,u=c.icon;return t.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),t.jsxs("div",{style:{background:o?"#1E2347":"#FFFFFF",borderColor:c.color},className:"relative rounded-2xl shadow-2xl border-2 w-full max-w-sm overflow-hidden animate-modalSlide",children:[t.jsxs("div",{style:{background:c.bg},className:"p-6 flex flex-col items-center text-center",children:[t.jsx("div",{style:{background:c.bg,color:c.color},className:"w-16 h-16 rounded-full flex items-center justify-center mb-4",children:t.jsx(u,{className:"w-8 h-8"})}),t.jsx("h3",{style:{color:c.color},className:"text-xl font-bold mb-2",children:s}),t.jsx("p",{style:{color:l.text.secondary},className:"text-sm",children:n})]}),t.jsx("div",{className:"p-4",children:t.jsx("button",{onClick:a,style:{background:c.color,color:"#FFFFFF"},className:"w-full py-3 rounded-xl font-semibold transition-all hover:opacity-90",children:"OK"})})]}),t.jsx("style",{children:`
        @keyframes modalSlide { from { opacity: 0; transform: scale(0.9) translateY(-20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .animate-modalSlide { animation: modalSlide 0.25s ease-out; }
      `})]})}function M4({isOpen:e,onClose:a,onConfirm:r,title:s,message:n,confirmText:l="Confirm",cancelText:o="Cancel",type:i="warning"}){const{theme:c,isDarkMode:u}=ne();if(!e)return null;const d={danger:{color:"#EF4444",bg:"rgba(239,68,68,0.15)",icon:xa},warning:{color:"#F59E0B",bg:"rgba(245,158,11,0.15)",icon:xa},info:{color:"#3B82F6",bg:"rgba(59,130,246,0.15)",icon:Ih}},x=d[i]||d.warning,m=x.icon;return t.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),t.jsxs("div",{style:{background:u?"#1E2347":"#FFFFFF",borderColor:c.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-sm overflow-hidden animate-modalSlide",children:[t.jsxs("div",{className:"p-6 flex flex-col items-center text-center",children:[t.jsx("div",{style:{background:x.bg,color:x.color},className:"w-16 h-16 rounded-full flex items-center justify-center mb-4",children:t.jsx(m,{className:"w-8 h-8"})}),t.jsx("h3",{style:{color:c.text.primary},className:"text-xl font-bold mb-2",children:s}),t.jsx("p",{style:{color:c.text.secondary},className:"text-sm",children:n})]}),t.jsxs("div",{className:"p-4 flex gap-3",children:[t.jsx("button",{onClick:a,style:{background:u?"rgba(71,85,105,0.5)":"#E5E7EB",color:c.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:o}),t.jsx("button",{onClick:r,style:{background:x.color,color:"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-90",children:l})]})]}),t.jsx("style",{children:`
        @keyframes modalSlide { from { opacity: 0; transform: scale(0.9) translateY(-20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .animate-modalSlide { animation: modalSlide 0.25s ease-out; }
      `})]})}function I4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState(""),[c,u]=p.useState("all"),[d,x]=p.useState("all"),[m,b]=p.useState("createdAt"),[v,S]=p.useState(1),[h,y]=p.useState(1),[g,f]=p.useState(0),[j,C]=p.useState(!1),[E,A]=p.useState(!1),[M,B]=p.useState(null),[F,L]=p.useState({total:0,active:0,inactive:0,admins:0,employees:0,students:0}),k=p.useRef(null),U=20,[D,_]=p.useState({isOpen:!1,type:"success",title:"",message:""}),[z,q]=p.useState({isOpen:!1,title:"",message:"",onConfirm:null,type:"warning"}),w=(P,W,Z)=>{_({isOpen:!0,type:P,title:W,message:Z})},N=(P,W,Z,te="warning")=>{q({isOpen:!0,title:P,message:W,onConfirm:Z,type:te})},R=async(P=!1)=>{var W,Z;try{P||l(!0);const te=new URLSearchParams({page:v,limit:U,sortBy:m});o&&te.append("search",o),c!=="all"&&te.append("role",c),d!=="all"&&te.append("status",d);const[I,Y]=await Promise.all([J.get(`/admin/sysad/users?${te}`),J.get("/admin/sysad/users/metrics")]);I&&(s(I.users||[]),y(((W=I.pagination)==null?void 0:W.pages)||1),f(((Z=I.pagination)==null?void 0:Z.total)||0)),Y!=null&&Y.metrics&&L(Y.metrics)}catch{P||w("error","Load Failed","Failed to load users. Please try again.")}finally{P||l(!1)}};p.useEffect(()=>{R()},[v,o,c,d,m]),p.useEffect(()=>(k.current=setInterval(()=>R(!0),6e4),()=>{k.current&&clearInterval(k.current)}),[]);const T=()=>{const P=r.map(W=>({"ID Number":W.schoolUId||W.adminId||"N/A",RFID:W.rfidUId||"N/A",Name:`${W.firstName||""} ${W.lastName||""}`.trim(),Email:W.email||"N/A",Role:W.role||"user",Status:W.isActive?"Active":"Inactive",Balance:W.balance||0,Created:new Date(W.createdAt).toLocaleDateString()}));Ft(P,`users-export-${m}`),w("success","Export Complete","Users have been exported to CSV successfully.")},O=async P=>{N("Delete User","Are you sure you want to delete this user? This action cannot be undone.",async()=>{q({...z,isOpen:!1});try{await J.delete(`/admin/sysad/users/${P}`),w("success","User Deleted","The user has been deleted successfully."),R(!0)}catch{w("error","Delete Failed","Failed to delete user. Please try again.")}},"danger")},V=async(P,W)=>{try{await J.patch(`/admin/sysad/users/${P}/toggle-status`),w("success","Status Updated",`User has been ${W?"deactivated":"activated"} successfully.`),R(!0)}catch{w("error","Update Failed","Failed to update user status. Please try again.")}};return t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsx("style",{children:`
        @keyframes tableRowFade { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        .animate-tableRowFade { animation: tableRowFade 0.3s ease-out both; }
      `}),t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Manage Users"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"View, add, edit, and manage all system users"})]}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 mb-5",children:[t.jsx(as,{icon:t.jsx(Us,{className:"w-5 h-5"}),label:"Total Users",value:F.total,color:"#3B82F6",theme:e}),t.jsx(as,{icon:t.jsx(xd,{className:"w-5 h-5"}),label:"Active",value:F.active,color:"#10B981",theme:e}),t.jsx(as,{icon:t.jsx(fd,{className:"w-5 h-5"}),label:"Inactive",value:F.inactive,color:"#EF4444",theme:e}),t.jsx(as,{icon:t.jsx(Yn,{className:"w-5 h-5"}),label:"Admins",value:F.admins,color:a?"#FFD41C":"#3B82F6",theme:e}),t.jsx(as,{icon:t.jsx(Bh,{className:"w-5 h-5"}),label:"Employees",value:F.employees,color:"#F59E0B",theme:e}),t.jsx(as,{icon:t.jsx(Mh,{className:"w-5 h-5"}),label:"Students",value:F.students,color:"#06B6D4",theme:e})]}),t.jsx("div",{style:{background:a?"rgba(15,18,39,0.8)":e.bg.card,borderColor:e.accent.primary},className:"rounded-xl border-2 p-4 mb-5",children:t.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between",children:[t.jsxs("div",{className:"flex flex-wrap gap-3 items-center flex-1",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-[300px]",children:[t.jsx(Zr,{style:{color:e.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search by name, ID, email...",value:o,onChange:P=>{i(P.target.value),S(1)},style:{background:a?"rgba(30,35,71,0.8)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full pl-10 pr-4 py-2 rounded-xl border text-sm focus:outline-none transition-all focus:ring-2 focus:ring-opacity-50"})]}),t.jsx("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:a?"rgba(30,35,71,0.8)":"#F3F4F6"},children:[{value:"all",label:"All"},{value:"student",label:"Students"},{value:"employee",label:"Employees"},{value:"admin",label:"Admins"}].map(P=>t.jsx("button",{onClick:()=>{u(P.value),S(1)},style:{background:c===P.value?e.accent.primary:"transparent",color:c===P.value?a?"#181D40":"#FFFFFF":e.text.secondary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all hover:opacity-80",children:P.label},P.value))}),t.jsx("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:a?"rgba(30,35,71,0.8)":"#F3F4F6"},children:[{value:"all",label:"All",color:null},{value:"active",label:"Active",color:"#10B981"},{value:"inactive",label:"Inactive",color:"#EF4444"}].map(P=>t.jsx("button",{onClick:()=>{x(P.value),S(1)},style:{background:d===P.value?P.color||e.accent.primary:"transparent",color:d===P.value?"#FFFFFF":e.text.secondary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all hover:opacity-80",children:P.label},P.value))}),t.jsx("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:a?"rgba(30,35,71,0.8)":"#F3F4F6"},children:[{value:"createdAt",label:"Date"},{value:"lastName",label:"Name"},{value:"role",label:"Role"}].map(P=>t.jsx("button",{onClick:()=>{b(P.value),S(1)},style:{background:m===P.value?e.accent.primary:"transparent",color:m===P.value?a?"#181D40":"#FFFFFF":e.text.secondary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all hover:opacity-80",children:P.label},P.value))}),t.jsxs("button",{onClick:T,style:{background:"rgba(16,185,129,0.15)",color:"#10B981",borderColor:"rgba(16,185,129,0.3)"},className:"px-4 py-2 rounded-xl font-semibold text-sm border flex items-center gap-2 hover:opacity-80 transition-all",children:[t.jsx(Eu,{className:"w-4 h-4"}),"Export"]})]}),t.jsx("div",{className:"flex gap-3",children:t.jsxs("button",{onClick:()=>C(!0),style:{background:e.accent.primary,color:a?"#181D40":"#FFFFFF"},className:"px-4 py-2 rounded-xl font-semibold text-sm flex items-center gap-2 hover:opacity-90 transition-all shadow-lg",children:[t.jsx(Lh,{className:"w-4 h-4"}),"Add User"]})})]})}),t.jsx("div",{className:"mb-4 flex justify-between items-center",children:t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:["Showing ",t.jsx("span",{style:{color:e.accent.primary},className:"font-bold",children:r.length})," of ",g," users"]})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx(Xe,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),"Loading users..."]}):r.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx(Us,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"font-semibold",children:"No users found"}),t.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your search or filters"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"ID Number"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Name"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Email"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Role"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-center p-4 text-xs font-bold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:r.map((P,W)=>t.jsxs("tr",{style:{borderColor:e.border.primary,animationDelay:`${W*30}ms`},className:"border-b hover:bg-white/5 transition-all duration-200 animate-tableRowFade",children:[t.jsx("td",{style:{color:e.text.primary},className:"p-4 font-mono font-semibold",children:P.schoolUId||P.adminId||"N/A"}),t.jsx("td",{style:{color:e.text.primary},className:"p-4 font-semibold",children:`${P.firstName||""} ${P.lastName||""}`.trim()||"N/A"}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4",children:P.email||"N/A"}),t.jsx("td",{className:"p-4",children:t.jsx(L4,{role:P.role,isDarkMode:a})}),t.jsx("td",{className:"p-4",children:t.jsx(U4,{isActive:P.isActive})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("button",{onClick:()=>{B(P),A(!0)},style:{background:"rgba(59,130,246,0.15)",color:"#3B82F6",borderColor:"rgba(59,130,246,0.3)"},className:"px-3 py-1.5 rounded-lg hover:opacity-80 transition-all text-xs font-semibold border",children:"Edit"}),t.jsx("button",{onClick:()=>V(P._id,P.isActive),style:{background:P.isActive?"rgba(239,68,68,0.15)":"rgba(16,185,129,0.15)",color:P.isActive?"#EF4444":"#10B981",borderColor:P.isActive?"rgba(239,68,68,0.3)":"rgba(16,185,129,0.3)"},className:"px-3 py-1.5 rounded-lg hover:opacity-80 transition-all text-xs font-semibold border",children:P.isActive?"Deactivate":"Activate"}),t.jsx("button",{onClick:()=>O(P._id),style:{background:"rgba(239,68,68,0.15)",color:"#EF4444",borderColor:"rgba(239,68,68,0.3)"},className:"px-3 py-1.5 rounded-lg hover:opacity-80 transition-all text-xs font-semibold border",children:"Delete"})]})})]},P._id))})]})})}),h>1&&t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"mt-4 flex justify-between items-center p-4 rounded-xl border",children:[t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:["Page ",v," of ",h]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>S(Math.max(1,v-1)),disabled:v===1,style:{background:v===1?"rgba(255,255,255,0.05)":a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",color:v===1?e.text.muted:e.accent.primary,borderColor:e.border.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm border disabled:cursor-not-allowed transition",children:"Previous"}),t.jsx("button",{onClick:()=>S(Math.min(h,v+1)),disabled:v===h,style:{background:v===h?"rgba(255,255,255,0.05)":a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",color:v===h?e.text.muted:e.accent.primary,borderColor:e.border.primary},className:"px-4 py-2 rounded-lg font-semibold text-sm border disabled:cursor-not-allowed transition",children:"Next"})]})]})]}),j&&t.jsx(O4,{theme:e,isDarkMode:a,onClose:()=>C(!1),onSuccess:()=>{C(!1),R(!0),w("success","User Created","New user has been created successfully.")},showNotification:w}),E&&M&&t.jsx($4,{theme:e,isDarkMode:a,user:M,onClose:()=>{A(!1),B(null)},onSuccess:()=>{A(!1),B(null),R(!0),w("success","User Updated","User information has been updated successfully.")}}),t.jsx(_4,{isOpen:D.isOpen,onClose:()=>_({...D,isOpen:!1}),type:D.type,title:D.title,message:D.message}),t.jsx(M4,{isOpen:z.isOpen,onClose:()=>q({...z,isOpen:!1}),onConfirm:z.onConfirm,title:z.title,message:z.message,type:z.type,confirmText:"Delete",cancelText:"Cancel"})]})}function as({icon:e,label:a,value:r,color:s,theme:n}){return t.jsxs("div",{style:{background:n.bg.card,borderColor:`${s}25`},className:"p-4 rounded-xl border flex items-center gap-3 transition-all duration-300 hover:shadow-lg hover:scale-[1.02] cursor-default",children:[t.jsx("div",{style:{background:`${s}15`,color:s},className:"w-11 h-11 rounded-xl flex items-center justify-center transition-transform duration-300",children:e}),t.jsxs("div",{children:[t.jsx("p",{style:{color:n.text.secondary},className:"text-[10px] font-semibold uppercase tracking-wide",children:a}),t.jsx("p",{style:{color:s},className:"text-xl font-bold",children:(r==null?void 0:r.toLocaleString())||0})]})]})}function L4({role:e,isDarkMode:a}){const r={admin:{bg:a?"rgba(255,212,28,0.15)":"rgba(59,130,246,0.15)",color:a?"#FFD41C":"#3B82F6",label:"Admin"},sysad:{bg:"rgba(139,92,246,0.15)",color:"#8B5CF6",label:"System Admin"},treasury:{bg:"rgba(16,185,129,0.15)",color:"#10B981",label:"Treasury"},accounting:{bg:"rgba(168,85,247,0.15)",color:"#A855F7",label:"Accounting"},motorpool:{bg:"rgba(245,158,11,0.15)",color:"#F59E0B",label:"Motorpool"},merchant:{bg:"rgba(236,72,153,0.15)",color:"#EC4899",label:"Merchant"},student:{bg:"rgba(6,182,212,0.15)",color:"#06B6D4",label:"Student"},employee:{bg:"rgba(245,158,11,0.15)",color:"#F59E0B",label:"Employee"},user:{bg:"rgba(107,114,128,0.15)",color:"#6B7280",label:"User"}},{bg:s,color:n,label:l}=r[e]||r.user;return t.jsx("span",{style:{background:s,color:n,borderColor:`${n}30`},className:"px-2.5 py-1 rounded-lg text-xs font-semibold border",children:l})}function U4({isActive:e}){return t.jsxs("span",{style:{background:e?"rgba(16,185,129,0.12)":"rgba(239,68,68,0.12)",color:e?"#10B981":"#EF4444",borderColor:e?"rgba(16,185,129,0.25)":"rgba(239,68,68,0.25)"},className:"px-2.5 py-1 rounded-lg text-xs font-semibold border inline-flex items-center gap-1",children:[t.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${e?"bg-emerald-500":"bg-red-500"}`}),e?"Active":"Inactive"]})}const rc=e=>{if(!e)return"";let a=e.replace(/[\s:-]/g,"").toUpperCase();if(/^[0-9A-F]{8}$/.test(a))return a;if(/^[0-9A-F]+$/.test(a))return a.length%2!==0&&(a="0"+a),(a.match(/.{2}/g)||[]).reverse().join("");if(/^\d+$/.test(a)){let s=BigInt(a).toString(16).toUpperCase();for(s.length%2!==0&&(s="0"+s);s.length<8;)s="0"+s;return(s.match(/.{2}/g)||[]).reverse().join("")}return a};function O4({theme:e,isDarkMode:a,onClose:r,onSuccess:s,showNotification:n}){const[l,o]=p.useState({rfidUId:"",firstName:"",middleName:"",lastName:"",email:"",schoolUId:"",role:"student",adminRole:""}),[i,c]=p.useState(!1),[u,d]=p.useState(!1),[x,m]=p.useState(!1),[b,v]=p.useState(!1),[S,h]=p.useState(null),[y,g]=p.useState(null),[f,j]=p.useState(null),[C,E]=p.useState(null),A=p.useRef(null);p.useEffect(()=>{A.current&&setTimeout(()=>{var z;return(z=A.current)==null?void 0:z.focus()},100)},[]);const M=p.useRef(null),B=p.useRef(null),F=p.useRef(null),L=async z=>{const q=z.target.value.toUpperCase();o({...l,rfidUId:q}),h(null),E(null),q.trim()&&(M.current&&clearTimeout(M.current),M.current=setTimeout(async()=>{const w=rc(q.trim());if(w.length>=8){d(!0);try{const N=await J.get(`/admin/sysad/users/check-rfid?rfidUId=${w}`);h(N.available===!0?"available":"taken")}catch(N){console.error("RFID check error:",N),h(null)}finally{d(!1)}}},300))},k=async z=>{const q=z.target.value;o({...l,email:q}),g(null),E(null),q.trim()&&(B.current&&clearTimeout(B.current),B.current=setTimeout(async()=>{if(q.includes("@")){m(!0);try{const w=await J.get(`/admin/sysad/users/check-email?email=${encodeURIComponent(q.trim())}`);g(w.available===!0?"available":"taken")}catch(w){console.error("Email check error:",w),g(null)}finally{m(!1)}}},300))},U=async z=>{const q=z.target.value;o({...l,schoolUId:q}),j(null),E(null),q.trim()&&(F.current&&clearTimeout(F.current),F.current=setTimeout(async()=>{if(q.length>=6){v(!0);try{const w=await J.get(`/admin/sysad/users/check-schoolid?schoolUId=${encodeURIComponent(q.trim())}`);j(w.available===!0?"available":"taken")}catch(w){console.error("School ID check error:",w),j(null)}finally{v(!1)}}},300))},D=()=>Math.floor(1e5+Math.random()*9e5).toString(),_=async z=>{var w,N;z.preventDefault(),E(null);const q=l.role==="admin";if(!q){if(!l.rfidUId.trim()){E("RFID is required for student/employee accounts");return}if(S==="taken"){E("This RFID is already registered to another user");return}}if(!l.firstName||!l.lastName||!l.email||!l.schoolUId){E("Please fill in all required fields");return}if(y==="taken"){E("This email is already registered");return}if(f==="taken"){E("This School ID is already registered");return}if(q&&!l.adminRole){E("Please select an admin type");return}c(!0);try{const R=D(),T={...l,rfidUId:q?void 0:rc(l.rfidUId.trim()),pin:R,role:q?l.adminRole:l.role};delete T.adminRole;const O=await J.post("/admin/sysad/users",T),V=q?"Admin":"User";O.emailSent?n==null||n("success",`${V} created! Temporary PIN sent to ${l.email}`):n==null||n("warning",`${V} created but email failed. Temporary PIN: ${R}`),s()}catch(R){E(((N=(w=R.response)==null?void 0:w.data)==null?void 0:N.message)||R.message||"Failed to create user")}finally{c(!1)}};return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:r,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-lg overflow-hidden animate-fadeIn",onClick:z=>z.stopPropagation(),children:[t.jsxs("div",{style:{background:a?"linear-gradient(135deg, rgba(255,212,28,0.3) 0%, rgba(255,212,28,0.1) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.3) 0%, rgba(59,130,246,0.1) 100%)"},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("h3",{style:{color:e.accent.primary},className:"text-xl font-bold flex items-center gap-2",children:[t.jsx(Lh,{className:"w-5 h-5"})," Add New User"]}),t.jsx("button",{onClick:r,style:{color:e.text.secondary},className:"hover:opacity-70",children:t.jsx(Tt,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:_,className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[C&&t.jsxs("div",{style:{background:"rgba(239,68,68,0.15)",borderColor:"rgba(239,68,68,0.3)"},className:"p-3 rounded-xl border flex items-center gap-2",children:[t.jsx(ra,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),t.jsx("p",{className:"text-red-500 text-sm",children:C})]}),l.role!=="admin"&&t.jsxs("div",{children:[t.jsxs("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:["RFID Tag ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Is,{style:{color:e.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),t.jsx("input",{ref:A,type:"text",value:l.rfidUId,onChange:L,placeholder:"Scan or enter RFID...",style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:S==="taken"?"#EF4444":S==="available"?"#10B981":e.border.primary},className:"w-full pl-10 pr-10 py-2.5 rounded-xl border text-sm focus:outline-none font-mono"}),u&&t.jsx(Xe,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 animate-spin text-blue-500"}),S==="available"&&!u&&t.jsx(aa,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"}),S==="taken"&&!u&&t.jsx(ra,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-red-500"})]}),S==="taken"&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:"This RFID is already registered to another user"}),S==="available"&&t.jsx("p",{className:"text-green-500 text-xs mt-1",children:"RFID is available"}),l.rfidUId&&!S&&t.jsxs("p",{style:{color:e.text.tertiary},className:"text-xs mt-1",children:["Will be stored as: ",t.jsx("span",{className:"font-mono",children:rc(l.rfidUId)})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"First Name *"}),t.jsx("input",{type:"text",value:l.firstName,onChange:z=>o({...l,firstName:z.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Middle Name"}),t.jsx("input",{type:"text",value:l.middleName,onChange:z=>o({...l,middleName:z.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Last Name *"}),t.jsx("input",{type:"text",value:l.lastName,onChange:z=>o({...l,lastName:z.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Email *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"email",value:l.email,onChange:k,style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:y==="taken"?"#EF4444":y==="available"?"#10B981":e.border.primary},className:"w-full px-4 pr-10 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0}),x&&t.jsx(Xe,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 animate-spin text-blue-500"}),y==="available"&&!x&&t.jsx(aa,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"}),y==="taken"&&!x&&t.jsx(ra,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-red-500"})]}),y==="taken"&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:"This email is already registered"}),y==="available"&&t.jsx("p",{className:"text-green-500 text-xs mt-1",children:"Email is available"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"School ID *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:l.schoolUId,onChange:U,style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:f==="taken"?"#EF4444":f==="available"?"#10B981":e.border.primary},className:"w-full px-4 pr-10 py-2.5 rounded-xl border text-sm focus:outline-none transition-all",required:!0}),b&&t.jsx(Xe,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 animate-spin text-blue-500"}),f==="available"&&!b&&t.jsx(aa,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"}),f==="taken"&&!b&&t.jsx(ra,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-red-500"})]}),f==="taken"&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:"This School ID is already registered"}),f==="available"&&t.jsx("p",{className:"text-green-500 text-xs mt-1",children:"School ID is available"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"User Role *"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"student",label:"Student",icon:""},{value:"employee",label:"Employee",icon:""},{value:"admin",label:"Admin",icon:""}].map(z=>t.jsxs("button",{type:"button",onClick:()=>o({...l,role:z.value,adminRole:""}),style:{background:l.role===z.value?e.accent.primary:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:l.role===z.value?a?"#181D40":"#FFFFFF":e.text.primary,borderColor:l.role===z.value?e.accent.primary:e.border.primary},className:"py-3 rounded-xl border font-semibold text-sm transition-all hover:opacity-90 flex items-center justify-center gap-2",children:[t.jsx("span",{children:z.icon})," ",z.label]},z.value))})]}),l.role==="admin"&&t.jsxs("div",{children:[t.jsxs("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:["Admin Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[{value:"sysad",label:"System Admin",color:"#8B5CF6"},{value:"treasury",label:"Treasury",color:"#10B981"},{value:"accounting",label:"Accounting",color:"#A855F7"},{value:"motorpool",label:"Motorpool",color:"#F59E0B"},{value:"merchant",label:"Merchant",color:"#EC4899"}].map(z=>t.jsx("button",{type:"button",onClick:()=>o({...l,adminRole:z.value}),style:{background:l.adminRole===z.value?z.color:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:l.adminRole===z.value?"#FFFFFF":e.text.primary,borderColor:l.adminRole===z.value?z.color:e.border.primary},className:"py-2.5 rounded-xl border font-semibold text-xs transition-all hover:opacity-90",children:z.label},z.value))})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:r,style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition hover:opacity-80",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:i||S==="taken",style:{background:e.accent.primary,color:a?"#181D40":"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-semibold transition hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2",children:[i?t.jsx(Xe,{className:"w-4 h-4 animate-spin"}):t.jsx(aa,{className:"w-4 h-4"}),i?"Creating...":"Create User"]})]})]})]}),t.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .animate-fadeIn { animation: fadeIn 0.2s ease-out; }
        @keyframes tableRowFade { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-tableRowFade { animation: tableRowFade 0.3s ease-out both; }
      `})]})}function $4({theme:e,isDarkMode:a,user:r,onClose:s,onSuccess:n}){const[l,o]=p.useState({firstName:r.firstName||"",middleName:r.middleName||"",lastName:r.lastName||"",email:r.email||"",schoolUId:r.schoolUId||"",isActive:r.isActive!==!1}),[i,c]=p.useState(!1),[u,d]=p.useState(null),x=async m=>{if(m.preventDefault(),d(null),!l.firstName||!l.lastName||!l.email){d("Please fill in all required fields");return}c(!0);try{await J.put(`/admin/sysad/users/${r._id}`,{firstName:l.firstName,lastName:l.lastName,email:l.email,studentId:l.schoolUId,status:l.isActive?"active":"inactive"}),n()}catch(b){d(b.message||"Failed to update user")}finally{c(!1)}};return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:s,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-lg overflow-hidden animate-fadeIn",onClick:m=>m.stopPropagation(),children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59,130,246,0.3) 0%, rgba(59,130,246,0.1) 100%)"},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("h3",{className:"text-xl font-bold text-blue-500 flex items-center gap-2",children:[t.jsx(Ij,{className:"w-5 h-5"})," Edit User"]}),t.jsx("button",{onClick:s,style:{color:e.text.secondary},className:"hover:opacity-70",children:t.jsx(Tt,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[u&&t.jsxs("div",{style:{background:"rgba(239,68,68,0.15)",borderColor:"rgba(239,68,68,0.3)"},className:"p-3 rounded-xl border flex items-center gap-2",children:[t.jsx(ra,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),t.jsx("p",{className:"text-red-500 text-sm",children:u})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"First Name *"}),t.jsx("input",{type:"text",value:l.firstName,onChange:m=>o({...l,firstName:m.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Middle Name"}),t.jsx("input",{type:"text",value:l.middleName,onChange:m=>o({...l,middleName:m.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Last Name *"}),t.jsx("input",{type:"text",value:l.lastName,onChange:m=>o({...l,lastName:m.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Email *"}),t.jsx("input",{type:"email",value:l.email,onChange:m=>o({...l,email:m.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"School ID"}),t.jsx("input",{type:"text",value:l.schoolUId,onChange:m=>o({...l,schoolUId:m.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-2.5 rounded-xl border text-sm focus:outline-none"})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"p-4 rounded-xl border flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{style:{color:e.text.primary},className:"font-semibold",children:"Account Status"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-xs",children:l.isActive?"User can access the system":"User cannot access the system"})]}),t.jsx("button",{type:"button",onClick:()=>o({...l,isActive:!l.isActive}),style:{background:l.isActive?"#10B981":"#EF4444"},className:"px-4 py-2 rounded-lg text-white font-semibold text-sm transition",children:l.isActive?"Active":"Inactive"})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:s,style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition hover:opacity-80",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:i,style:{background:"#3B82F6",color:"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-semibold transition hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2",children:[i?t.jsx(Xe,{className:"w-4 h-4 animate-spin"}):t.jsx(aa,{className:"w-4 h-4"}),i?"Saving...":"Save Changes"]})]})]})]}),t.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .animate-fadeIn { animation: fadeIn 0.2s ease-out; }
      `})]})}function P4({isOpen:e,onClose:a,type:r,title:s,message:n}){const{theme:l,isDarkMode:o}=ne();if(!e)return null;const i={success:{icon:ft,color:"#10B981",bg:"rgba(16,185,129,0.15)"},error:{icon:xa,color:"#EF4444",bg:"rgba(239,68,68,0.15)"},warning:{icon:xa,color:"#F59E0B",bg:"rgba(245,158,11,0.15)"}},c=i[r]||i.success,u=c.icon;return t.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),t.jsxs("div",{style:{background:o?"#1E2347":"#FFFFFF",borderColor:c.color},className:"relative rounded-2xl shadow-2xl border-2 w-full max-w-sm overflow-hidden animate-modalSlide",children:[t.jsxs("div",{style:{background:c.bg},className:"p-6 flex flex-col items-center text-center",children:[t.jsx("div",{style:{background:c.bg,color:c.color},className:"w-16 h-16 rounded-full flex items-center justify-center mb-4",children:t.jsx(u,{className:"w-8 h-8"})}),t.jsx("h3",{style:{color:c.color},className:"text-xl font-bold mb-2",children:s}),t.jsx("p",{style:{color:l.text.secondary},className:"text-sm",children:n})]}),t.jsx("div",{className:"p-4",children:t.jsx("button",{onClick:a,style:{background:c.color},className:"w-full py-3 rounded-xl font-semibold text-white transition-all hover:opacity-90",children:"OK"})})]}),t.jsx("style",{children:`
        @keyframes modalSlide { from { opacity: 0; transform: scale(0.9) translateY(-20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .animate-modalSlide { animation: modalSlide 0.25s ease-out; }
      `})]})}function H4({isOpen:e,onClose:a,onSubmit:r,selectedUser:s}){const{theme:n,isDarkMode:l}=ne(),[o,i]=p.useState(""),c=n.accent.primary;return e?t.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),t.jsxs("div",{style:{background:l?"#1E2347":"#FFFFFF",borderColor:n.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-md overflow-hidden animate-modalSlide",children:[t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-center mb-4",children:t.jsx("div",{style:{background:"rgba(255,212,28,0.15)"},className:"w-16 h-16 rounded-full flex items-center justify-center",children:t.jsx(Is,{className:"w-8 h-8 text-amber-500"})})}),t.jsx("h3",{style:{color:n.text.primary},className:"text-xl font-bold text-center mb-2",children:"Enter New RFID Card"}),t.jsxs("p",{style:{color:n.text.secondary},className:"text-sm text-center mb-4",children:["Enter the RFID card ID for transferring ",s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{style:{color:n.text.primary},className:"block text-sm font-medium mb-2",children:"RFID Card ID"}),t.jsx("input",{type:"text",value:o,onChange:u=>i(u.target.value),placeholder:"e.g., A1B2C3D4E5",style:{background:n.bg.input,borderColor:n.border.primary,color:n.text.primary},className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-amber-500/20",autoFocus:!0})]})}),t.jsxs("div",{className:"p-4 flex gap-3 border-t",style:{borderColor:n.border.primary},children:[t.jsx("button",{onClick:a,style:{background:l?"rgba(71,85,105,0.5)":"#E5E7EB",color:n.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:"Cancel"}),t.jsx("button",{onClick:()=>r(o),disabled:!o.trim(),style:{background:o.trim()?c:"rgba(107,114,128,0.15)",color:o.trim()?"#FFFFFF":n.text.muted},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80 disabled:cursor-not-allowed disabled:opacity-50",children:"Continue"})]})]}),t.jsx("style",{children:`
          @keyframes modalSlide { from { opacity: 0; transform: scale(0.9) translateY(-20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
          .animate-modalSlide { animation: modalSlide 0.25s ease-out; }
        `})]})]}):null}function W4({isOpen:e,onClose:a,onConfirm:r,selectedUser:s,newCardId:n}){const{theme:l,isDarkMode:o}=ne();return e?t.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),t.jsxs("div",{style:{background:o?"#1E2347":"#FFFFFF",borderColor:l.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-md overflow-hidden animate-modalSlide",children:[t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-center mb-4",children:t.jsx("div",{style:{background:"rgba(245,158,11,0.15)"},className:"w-16 h-16 rounded-full flex items-center justify-center",children:t.jsx(xa,{className:"w-8 h-8 text-amber-500"})})}),t.jsx("h3",{style:{color:l.text.primary},className:"text-xl font-bold text-center mb-2",children:"Transfer User Information"}),t.jsx("p",{style:{color:l.text.secondary},className:"text-sm text-center mb-4",children:"Are you sure you want to transfer this user's information to a new RFID card?"}),t.jsxs("div",{style:{background:o?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:l.border.primary},className:"rounded-xl border p-4 space-y-3 mb-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{style:{color:l.text.secondary},className:"text-sm",children:"User"}),t.jsx("span",{style:{color:l.text.primary},className:"font-semibold",children:`${(s==null?void 0:s.firstName)||""} ${(s==null?void 0:s.lastName)||""}`.trim()})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{style:{color:l.text.secondary},className:"text-sm",children:"Email"}),t.jsx("span",{style:{color:l.text.primary},className:"font-semibold",children:(s==null?void 0:s.email)||"N/A"})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{style:{color:l.text.secondary},className:"text-sm",children:"Role"}),t.jsx("span",{style:{color:l.text.primary},className:"font-semibold",children:(s==null?void 0:s.role)||"N/A"})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{style:{color:l.text.secondary},className:"text-sm",children:"New Card ID"}),t.jsx("span",{className:"font-mono text-emerald-500 font-semibold",children:n})]})]}),t.jsx("div",{style:{background:"rgba(59,130,246,0.1)",borderColor:"rgba(59,130,246,0.3)"},className:"rounded-xl border p-3 mb-4",children:t.jsx("p",{className:"text-blue-500 text-xs text-center",children:"This will create a new user account with the transferred information and send an OTP for activation"})})]}),t.jsxs("div",{className:"p-4 flex gap-3 border-t",style:{borderColor:l.border.primary},children:[t.jsx("button",{onClick:a,style:{background:o?"rgba(71,85,105,0.5)":"#E5E7EB",color:l.text.primary},className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-80",children:"Cancel"}),t.jsx("button",{onClick:r,className:"flex-1 py-3 rounded-xl font-semibold transition-all hover:opacity-90 bg-amber-500 text-white",children:"Transfer User"})]})]}),t.jsx("style",{children:`
        @keyframes modalSlide { from { opacity: 0; transform: scale(0.9) translateY(-20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .animate-modalSlide { animation: modalSlide 0.25s ease-out; }
      `})]}):null}function q4({role:e,isDarkMode:a}){const r={sysad:{color:"#FFD41C",bg:a?"rgba(255,212,28,0.15)":"rgba(255,212,28,0.1)",label:"SysAd"},admin:{color:"#3B82F6",bg:a?"rgba(59,130,246,0.15)":"rgba(59,130,246,0.1)",label:"Admin"},merchant:{color:"#10B981",bg:a?"rgba(16,185,129,0.15)":"rgba(16,185,129,0.1)",label:"Merchant"},user:{color:"#8B5CF6",bg:a?"rgba(139,92,246,0.15)":"rgba(139,92,246,0.1)",label:"User"}},s=r[e]||r.user;return t.jsx("span",{style:{background:s.bg,color:s.color,borderColor:`${s.color}30`},className:"px-3 py-1 rounded-full text-xs font-bold border",children:s.label})}function Y4({isActive:e}){return t.jsx("span",{style:{background:e?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)",color:e?"#10B981":"#EF4444",borderColor:e?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"},className:"px-3 py-1 rounded-full text-xs font-bold border",children:e?"Active":"Inactive"})}function G4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!1),[o,i]=p.useState(""),[c,u]=p.useState(null),[d,x]=p.useState(!1),[m,b]=p.useState(!1),[v,S]=p.useState(!1),[h,y]=p.useState(""),[g,f]=p.useState({isOpen:!1,type:"success",title:"",message:""}),[j,C]=p.useState(!1),E=e.accent.primary,A=(D,_,z)=>{f({isOpen:!0,type:D,title:_,message:z})},M=async()=>{l(!0);try{const D=await J.get("/admin/sysad/users?page=1&limit=100");s(D.users||[])}catch{A("error","Load Failed","Failed to load users. Please try again.")}finally{l(!1)}};p.useEffect(()=>{M()},[]);const B=r.filter(D=>{const _=D.firstName||"",z=D.lastName||"",q=D.email||"",w=D.schoolUId||"",N=D.adminId?D.adminId.toString():"";return _.toLowerCase().includes(o.toLowerCase())||z.toLowerCase().includes(o.toLowerCase())||q.toLowerCase().includes(o.toLowerCase())||w.includes(o)||N.includes(o)}),F=D=>{u(D),S(!0)},L=D=>{if(!D.trim()){A("warning","Input Required","Please enter the new RFID card ID.");return}y(D.trim()),S(!1),C(!0)},k=async()=>{C(!1),x(!0);try{const D=await J.post("/admin/sysad/transfer-user",{firstName:c.firstName,lastName:c.lastName,email:c.email,role:c.role,schoolUId:c.schoolUId,cardUid:h.trim(),isDeactivated:!1,isActive:!1,originalUserId:c._id});await J.post("/admin/auth/send-otp",{email:c.email,userId:D.user._id}),b(!0),A("success","Transfer Initiated",`User information transferred to new RFID card. OTP sent to ${c.email}`),await M()}catch(D){A("error","Transfer Failed",D.message||"Failed to transfer user information. Please try again.")}finally{x(!1)}},U=()=>{u(null),y(""),b(!1),S(!1)};return t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:E},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx(Is,{className:"w-7 h-7"})," Transfer Card"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Transfer user information to a new RFID card with OTP activation"})]}),m&&t.jsxs("div",{style:{background:a?"rgba(16,185,129,0.08)":"rgba(16,185,129,0.05)",borderColor:"rgba(16,185,129,0.25)"},className:"p-8 rounded-2xl border mb-6 text-center",children:[t.jsx("div",{style:{background:"rgba(16,185,129,0.15)"},className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-5",children:t.jsx(ft,{className:"w-10 h-10 text-emerald-500"})}),t.jsx("h3",{style:{color:"#10B981"},className:"text-2xl font-bold mb-2",children:"Transfer Initiated"}),t.jsx("p",{style:{color:e.text.secondary},className:"mb-6 text-sm max-w-md mx-auto",children:"User information has been transferred to the new RFID card. An activation OTP has been sent to the user's email address."}),t.jsx("div",{style:{background:"rgba(59,130,246,0.1)",borderColor:"rgba(59,130,246,0.3)"},className:"rounded-xl border p-4 mb-6",children:t.jsxs("p",{className:"text-blue-500 text-sm",children:[t.jsx("strong",{children:"Next Steps:"}),t.jsx("br",{}),"1. User will receive OTP via email",t.jsx("br",{}),"2. User activates account with OTP",t.jsx("br",{}),"3. New RFID card becomes active"]})}),t.jsxs("button",{onClick:U,style:{background:E},className:"px-8 py-3 rounded-xl font-semibold text-white hover:opacity-90 transition-all inline-flex items-center gap-2",children:[t.jsx(pd,{className:"w-4 h-4"}),"New Transfer"]})]}),!m&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{background:a?"rgba(15,18,39,0.8)":e.bg.card,borderColor:e.accent.primary},className:"rounded-xl border-2 p-4 mb-5",children:t.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between",children:[t.jsxs("div",{className:"flex flex-wrap gap-3 items-center flex-1",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-[300px]",children:[t.jsx(Zr,{style:{color:e.text.tertiary},className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search by name, ID, email...",value:o,onChange:D=>i(D.target.value),style:{background:a?"rgba(30,35,71,0.8)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full pl-10 pr-4 py-2 rounded-xl border text-sm focus:outline-none transition-all focus:ring-2 focus:ring-opacity-50"})]}),t.jsx("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:a?"rgba(30,35,71,0.8)":"#F3F4F6"},children:[{value:"all",label:"All"},{value:"student",label:"Students"},{value:"employee",label:"Employees"},{value:"admin",label:"Admins"}].map(D=>t.jsx("button",{onClick:()=>i(""),style:{background:"transparent",color:e.text.secondary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all hover:opacity-80",children:D.label},D.value))}),t.jsx("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:a?"rgba(30,35,71,0.8)":"#F3F4F6"},children:[{value:"all",label:"All",color:null},{value:"active",label:"Active",color:"#10B981"},{value:"inactive",label:"Inactive",color:"#EF4444"}].map(D=>t.jsx("button",{onClick:()=>i(""),style:{background:"transparent",color:e.text.secondary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all hover:opacity-80",children:D.label},D.value))})]}),t.jsx("button",{onClick:M,style:{background:"rgba(255,212,28,0.15)",color:E},className:"p-2 rounded-lg hover:opacity-80 transition-all",children:t.jsx(pd,{className:"w-4 h-4"})})]})}),t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:[t.jsx("div",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)",borderColor:e.border.primary},className:"px-6 py-4 border-b",children:t.jsx("h3",{style:{color:E},className:"font-bold text-sm uppercase tracking-wide",children:"Users with RFID Cards"})}),t.jsx("div",{className:"overflow-x-auto",children:n?t.jsx("div",{className:"flex justify-center items-center py-20",children:t.jsx(Xe,{className:"w-8 h-8 animate-spin",style:{color:E}})}):B.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx(Us,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"font-semibold",children:"No users found"}),t.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your search"})]}):t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"ID Number"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Name"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Email"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Role"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-left p-4 text-xs font-bold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{color:e.accent.primary,borderColor:e.border.primary},className:"text-center p-4 text-xs font-bold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:B.map((D,_)=>t.jsxs("tr",{style:{borderColor:e.border.primary,animationDelay:`${_*30}ms`},className:"border-b hover:bg-white/5 transition-all duration-200",children:[t.jsx("td",{style:{color:e.text.primary},className:"p-4 font-mono font-semibold",children:D.cardUid||D.schoolUId||D.adminId||"N/A"}),t.jsx("td",{style:{color:e.text.primary},className:"p-4 font-semibold",children:`${D.firstName||""} ${D.lastName||""}`.trim()||"N/A"}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4",children:D.email||"N/A"}),t.jsx("td",{className:"p-4",children:t.jsx(q4,{role:D.role,isDarkMode:a})}),t.jsx("td",{className:"p-4",children:t.jsx(Y4,{isActive:D.isActive})}),t.jsx("td",{className:"p-4",children:t.jsx("div",{className:"flex items-center justify-center gap-2",children:t.jsxs("button",{onClick:()=>F(D),disabled:d,style:{background:"rgba(16,185,129,0.15)",color:"#10B981",borderColor:"rgba(16,185,129,0.3)"},className:"px-3 py-1.5 rounded-lg hover:opacity-80 transition-all text-xs font-semibold border disabled:cursor-not-allowed disabled:opacity-50",children:[d?t.jsx(Xe,{className:"w-3 h-3 animate-spin"}):t.jsx(Jl,{className:"w-3 h-3"}),"Transfer"]})})})]},D._id))})]})})]})]}),t.jsx(H4,{isOpen:v,onClose:()=>S(!1),onSubmit:L,selectedUser:c}),t.jsx(W4,{isOpen:j,onClose:()=>C(!1),onConfirm:k,selectedUser:c,newCardId:h}),t.jsx(P4,{isOpen:g.isOpen,onClose:()=>f({...g,isOpen:!1}),type:g.type,title:g.title,message:g.message})]})}function V4(){const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState([]),[n,l]=p.useState(!0),[o,i]=p.useState("all"),[c,u]=p.useState(""),[d,x]=p.useState(""),[m,b]=p.useState(""),[v,S]=p.useState(""),[h,y]=p.useState(null),[g,f]=p.useState(!1),[j,C]=p.useState(!1),[E,A]=p.useState(""),[M,B]=p.useState(!1),[F,L]=p.useState(1),[k,U]=p.useState("details"),[D,_]=p.useState(""),[z,q]=p.useState(!1),w=15,N=p.useRef(null),R=async(K=!1)=>{try{K||l(!0);const se=new URLSearchParams;d&&se.append("status",d),c&&se.append("search",c);const ce=await J.get(`/admin/sysad/concerns?${se}`);ce!=null&&ce.concerns&&s(ce.concerns)}catch{K||$.error("Failed to load concerns")}finally{K||l(!1)}};p.useEffect(()=>(R(),N.current=setInterval(()=>R(!0),3e4),()=>{N.current&&clearInterval(N.current)}),[d,c]),p.useEffect(()=>{L(1)},[c,d,o,m,v]);const T=async K=>{if(K.status==="pending"&&K.submissionType!=="feedback")try{const se=JSON.parse(localStorage.getItem("adminData")||"{}");await J.patch(`/admin/sysad/concerns/${K._id}/status`,{status:"in_progress",adminName:se.firstName?`${se.firstName} ${se.lastName||""}`.trim():"System Admin"}),K.status="in_progress"}catch(se){console.error("Failed to update status:",se)}y(K),U("details"),_(""),f(!0)},O=K=>{A(""),f(!1),C(!0)},V=async()=>{var K,se;if(!D.trim()){$.error("Please enter a note message");return}q(!0);try{const ce=JSON.parse(localStorage.getItem("adminData")||"{}"),ae=ce.firstName?`${ce.firstName} ${ce.lastName||""}`.trim():"System Admin",oe=await J.post(`/admin/sysad/concerns/${h._id}/note`,{note:D.trim(),adminName:ae}),he=(oe==null?void 0:oe.data)||oe;he!=null&&he.success?($.success("Note sent successfully!"),_(""),he.concern&&(y(he.concern),U("notes")),R(!0)):$.error((he==null?void 0:he.message)||"Failed to send note")}catch(ce){$.error(((se=(K=ce==null?void 0:ce.response)==null?void 0:K.data)==null?void 0:se.message)||(ce==null?void 0:ce.message)||"Failed to send note")}finally{q(!1)}},P=async()=>{if(!E.trim()){$.error("Please provide a resolution message");return}B(!0);try{const K=JSON.parse(localStorage.getItem("adminData")||"{}"),se=await J.patch(`/admin/sysad/concerns/${h._id}/status`,{status:"resolved",reply:E.trim(),adminName:K.firstName?`${K.firstName} ${K.lastName||""}`.trim():"System Admin"});se!=null&&se.success&&($.success("Concern resolved! User has been notified via email."),C(!1),f(!1),R(!0))}catch(K){$.error(K.message||"Failed to resolve concern")}finally{B(!1)}},W=()=>{const K=Z.map(se=>{var ce,ae;return{ID:((ce=se._id)==null?void 0:ce.slice(-8))||"",Type:se.submissionType||"assistance",User:(ae=se.user)!=null&&ae.firstName?`${se.user.firstName} ${se.user.lastName||""}`:se.userName||"",Subject:se.subject||"",Status:se.status||"pending",Priority:se.priority||"medium",Rating:se.rating||"",Date:se.createdAt?new Date(se.createdAt).toLocaleDateString():""}});Ft(K,"sysad_concerns")},Z=r.filter(K=>{var se,ce,ae,oe,he,Ke,ct,dt;if(o==="assistance"&&K.submissionType!=="assistance"||o==="feedback"&&K.submissionType!=="feedback")return!1;if(c){const ve=c.toLowerCase();if(!(((se=K._id)==null?void 0:se.toLowerCase().includes(ve))||((ce=K.subject)==null?void 0:ce.toLowerCase().includes(ve))||((ae=K.message)==null?void 0:ae.toLowerCase().includes(ve))||((he=(oe=K.user)==null?void 0:oe.firstName)==null?void 0:he.toLowerCase().includes(ve))||((ct=(Ke=K.user)==null?void 0:Ke.lastName)==null?void 0:ct.toLowerCase().includes(ve))||((dt=K.userName)==null?void 0:dt.toLowerCase().includes(ve))))return!1}if(d&&K.status!==d)return!1;if(m||v){const ve=new Date(K.createdAt);if(m&&ve<new Date(m)||v&&ve>new Date(v+"T23:59:59"))return!1}return!0}),te=Math.ceil(Z.length/w),I=(F-1)*w,Y=Z.slice(I,I+w),G=K=>{switch(K){case"pending":return"#FBBF24";case"in_progress":return"#3B82F6";case"resolved":return"#10B981";default:return e.text.secondary}};return n?t.jsxs("div",{style:{color:e.accent.primary},className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-t-transparent rounded-full mx-auto mb-4",style:{borderColor:`${e.accent.primary} transparent transparent transparent`}}),"Loading concerns..."]}):t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("div",{className:"mb-5",children:[t.jsxs("h2",{style:{color:e.accent.primary},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," Concerns & Feedback"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:Z.length>0?`Showing ${I+1}-${Math.min(I+w,Z.length)} of ${Z.length}  Page ${F} of ${te}`:`All user reports and feedbacks about the NUCash system  Total: ${r.length}`})]}),t.jsxs("div",{className:"flex gap-2 mb-5",children:[t.jsxs("button",{onClick:()=>i("all"),style:{padding:"10px 20px",background:o==="all"?a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)":"transparent",border:`2px solid ${o==="all"?e.accent.primary:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:o==="all"?e.accent.primary:e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["All (",r.length,")"]}),t.jsxs("button",{onClick:()=>i("assistance"),style:{padding:"10px 20px",background:o==="assistance"?"rgba(59,130,246,0.2)":"transparent",border:`2px solid ${o==="assistance"?"#3B82F6":"rgba(59,130,246,0.3)"}`,borderRadius:"8px",color:o==="assistance"?"#3B82F6":e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["Assistance (",r.filter(K=>K.submissionType==="assistance"||!K.submissionType).length,")"]}),t.jsxs("button",{onClick:()=>i("feedback"),style:{padding:"10px 20px",background:o==="feedback"?"rgba(34,197,94,0.2)":"transparent",border:`2px solid ${o==="feedback"?"#22C55E":"rgba(34,197,94,0.3)"}`,borderRadius:"8px",color:o==="feedback"?"#22C55E":e.text.secondary,fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:["Feedback (",r.filter(K=>K.submissionType==="feedback").length,")"]})]}),t.jsxs("div",{className:"flex gap-3 items-end flex-wrap",children:[t.jsx(Ot,{value:c,onChange:u,placeholder:"Search by ID, user, subject..."}),o!=="feedback"&&t.jsx(Jt,{value:d,onChange:x,label:"Status",options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"}]}),t.jsx(hr,{startDate:m,endDate:v,onStartChange:b,onEndChange:S}),t.jsx($t,{onClick:W,disabled:Z.length===0})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:Z.length===0?t.jsxs("div",{style:{color:e.text.tertiary},className:"text-center py-20",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{children:"No concerns found"})]}):t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"rounded-2xl border overflow-hidden",children:[t.jsxs("table",{className:"w-full border-collapse text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:a?"rgba(255,212,28,0.1)":"rgba(59,130,246,0.1)"},children:[t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"ID"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"User"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Subject"}),o==="all"&&t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Type"}),o==="feedback"?t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Rating"}):t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Status"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-left p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Date"}),t.jsx("th",{style:{borderColor:a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)",color:e.accent.primary},className:"text-right p-4 text-[11px] font-extrabold uppercase border-b-2",children:"Actions"})]})}),t.jsx("tbody",{children:Y.map(K=>{var se,ce,ae,oe;return t.jsxs("tr",{style:{borderBottom:`1px solid ${e.border.primary}`},className:"hover:bg-white/5 transition",children:[t.jsx("td",{style:{color:e.text.primary},className:"p-4 font-mono text-xs",children:(se=K._id)==null?void 0:se.slice(-8)}),t.jsxs("td",{style:{color:e.text.primary},className:"p-4",children:[((ce=K.user)==null?void 0:ce.firstName)||K.userName," ",((ae=K.user)==null?void 0:ae.lastName)||""]}),t.jsx("td",{style:{color:e.text.primary},className:"p-4 max-w-[200px] truncate",children:K.subject||"No subject"}),o==="all"&&t.jsx("td",{className:"p-4",children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:K.submissionType==="feedback"?"rgba(34,197,94,0.2)":"rgba(59,130,246,0.2)",color:K.submissionType==="feedback"?"#22C55E":"#3B82F6",border:`1px solid ${K.submissionType==="feedback"?"rgba(34,197,94,0.3)":"rgba(59,130,246,0.3)"}`},children:K.submissionType==="feedback"?"Feedback":"Assistance"})}),o==="feedback"?t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((he,Ke)=>t.jsx("span",{style:{fontSize:"14px",color:Ke<(K.rating||0)?"#FFD41C":"rgba(255,212,28,0.2)"},children:""},Ke)),t.jsxs("span",{style:{color:e.text.muted,marginLeft:"8px",fontSize:"11px"},children:["(",K.rating||0,"/5)"]})]})}):t.jsx("td",{className:"p-4",children:t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",background:`${G(K.status)}20`,color:G(K.status)},children:((oe=K.status)==null?void 0:oe.replace("_"," "))||"Pending"})}),t.jsx("td",{style:{color:e.text.secondary},className:"p-4 text-sm",children:K.createdAt?new Date(K.createdAt).toLocaleDateString():""}),t.jsx("td",{className:"p-4 text-right",children:t.jsx("button",{onClick:()=>T(K),style:{padding:"6px 12px",background:a?"rgba(255,212,28,0.2)":"rgba(59,130,246,0.2)",color:e.accent.primary,border:`1px solid ${a?"rgba(255,212,28,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:600},children:"View"})})]},K._id)})})]}),te>1&&t.jsxs("div",{style:{borderColor:e.border.primary},className:"p-4 border-t flex items-center justify-center gap-3",children:[t.jsx("button",{onClick:()=>L(K=>Math.max(1,K-1)),disabled:F===1,style:{padding:"8px 16px",background:F===1?"rgba(100,100,100,0.2)":e.bg.tertiary,color:F===1?e.text.muted:e.accent.primary,border:`2px solid ${F===1?"transparent":e.accent.primary}`,borderRadius:"8px",fontSize:"13px",fontWeight:600,cursor:F===1?"not-allowed":"pointer"},children:" Previous"}),t.jsxs("span",{style:{color:e.text.secondary,fontSize:"13px",fontWeight:600},children:["Page ",F," of ",te]}),t.jsx("button",{onClick:()=>L(K=>Math.min(te,K+1)),disabled:F===te,style:{padding:"8px 16px",background:F===te?"rgba(100,100,100,0.2)":e.bg.tertiary,color:F===te?e.text.muted:e.accent.primary,border:`2px solid ${F===te?"transparent":e.accent.primary}`,borderRadius:"8px",fontSize:"13px",fontWeight:600,cursor:F===te?"not-allowed":"pointer"},children:"Next "})]})]})}),g&&h&&t.jsx(X4,{concern:h,theme:e,isDarkMode:a,modalTab:k,setModalTab:U,noteText:D,setNoteText:_,sendingNote:z,onSendNote:V,onOpenResolve:O,onClose:()=>{f(!1),y(null)},getStatusColor:G}),j&&h&&t.jsx(Q4,{concern:h,theme:e,isDarkMode:a,resolution:E,setResolution:A,resolving:M,onResolve:P,onClose:()=>C(!1)})]})}function X4({concern:e,theme:a,isDarkMode:r,modalTab:s,setModalTab:n,noteText:l,setNoteText:o,sendingNote:i,onSendNote:c,onOpenResolve:u,onClose:d,getStatusColor:x}){var b,v,S,h,y,g;const m=e.submissionType==="feedback";return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:d,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:r?"#1E2347":"#FFFFFF",borderColor:a.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-2xl max-h-[85vh] overflow-hidden",onClick:f=>f.stopPropagation(),children:[t.jsxs("div",{style:{background:r?"linear-gradient(135deg, rgba(255,212,28,0.3) 0%, rgba(255,212,28,0.1) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.3) 0%, rgba(59,130,246,0.1) 100%)"},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{style:{color:a.accent.primary},className:"text-xl font-bold",children:m?"Feedback Details":"Concern Details"}),t.jsxs("p",{style:{color:a.text.secondary},className:"text-sm mt-1",children:["ID: ",(b=e._id)==null?void 0:b.slice(-8)]})]}),t.jsx("button",{onClick:d,style:{color:a.text.secondary},className:"hover:opacity-70 transition",children:t.jsx(Tt,{className:"w-6 h-6"})})]}),!m&&t.jsxs("div",{className:"flex gap-2 px-6 pt-4",children:[t.jsxs("button",{onClick:()=>n("details"),style:{padding:"8px 16px",background:s==="details"?a.accent.primary:"transparent",color:s==="details"?r?"#181D40":"#FFFFFF":a.text.secondary,borderRadius:"8px",fontSize:"13px",fontWeight:600,border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[t.jsx(_h,{className:"w-4 h-4"}),"Details"]}),t.jsxs("button",{onClick:()=>n("notes"),style:{padding:"8px 16px",background:s==="notes"?a.accent.primary:"transparent",color:s==="notes"?r?"#181D40":"#FFFFFF":a.text.secondary,borderRadius:"8px",fontSize:"13px",fontWeight:600,border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[t.jsx(Dx,{className:"w-4 h-4"}),"Notes (",((v=e.notes)==null?void 0:v.length)||0,")"]})]}),t.jsx("div",{className:"p-6 space-y-4 max-h-[50vh] overflow-y-auto",children:s==="details"||m?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{background:r?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:a.border.primary},className:"p-4 rounded-xl border",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase font-semibold mb-1",children:"User"}),t.jsxs("p",{style:{color:a.text.primary},className:"font-semibold",children:[((S=e.user)==null?void 0:S.firstName)||e.userName," ",((h=e.user)==null?void 0:h.lastName)||""]})]}),t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase font-semibold mb-1",children:"Email"}),t.jsx("p",{style:{color:a.text.primary},children:((y=e.user)==null?void 0:y.email)||e.userEmail||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase font-semibold mb-1",children:"Date Submitted"}),t.jsx("p",{style:{color:a.text.primary},children:e.createdAt?new Date(e.createdAt).toLocaleString():"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase font-semibold mb-1",children:m?"Rating":"Status"}),m?t.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((f,j)=>t.jsx("span",{style:{color:j<(e.rating||0)?"#FFD41C":a.text.muted},children:""},j)),t.jsxs("span",{style:{color:a.text.muted,marginLeft:"4px"},children:["(",e.rating||0,"/5)"]})]}):t.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:700,background:`${x(e.status)}20`,color:x(e.status)},children:((g=e.status)==null?void 0:g.replace("_"," "))||"Pending"})]})]})}),t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase font-semibold mb-2",children:"Subject"}),t.jsx("p",{style:{color:a.text.primary},className:"font-semibold",children:e.subject||"No subject"})]}),t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase font-semibold mb-2",children:"Message"}),t.jsx("div",{style:{background:r?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:a.border.primary},className:"p-4 rounded-xl border",children:t.jsx("p",{style:{color:a.text.primary},className:"whitespace-pre-wrap",children:e.message||e.feedbackText||"No message provided"})})]}),e.status==="resolved"&&e.adminResponse&&t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase font-semibold mb-2",children:"Resolution"}),t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-4 rounded-xl border",children:[t.jsx("p",{style:{color:"#10B981"},className:"whitespace-pre-wrap font-semibold",children:e.adminResponse}),e.resolvedBy&&t.jsxs("p",{style:{color:a.text.muted},className:"text-xs mt-2",children:["Resolved by ",e.resolvedBy," on ",e.resolvedDate?new Date(e.resolvedDate).toLocaleString():"N/A"]})]})]})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"space-y-3 max-h-[200px] overflow-y-auto",children:e.notes&&e.notes.length>0?[...e.notes].reverse().map((f,j)=>t.jsxs("div",{style:{background:r?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:a.border.primary},className:"p-3 rounded-xl border",children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsx("span",{style:{color:a.accent.primary},className:"font-semibold text-sm",children:f.adminName||"Admin"}),t.jsx("span",{style:{color:a.text.muted},className:"text-xs",children:f.timestamp?new Date(f.timestamp).toLocaleString():"N/A"})]}),t.jsx("p",{style:{color:a.text.primary},className:"text-sm",children:f.message})]},j)):t.jsxs("div",{style:{color:a.text.tertiary},className:"text-center py-8",children:[t.jsx(Dx,{className:"w-10 h-10 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:"No notes yet"})]})}),e.status!=="resolved"&&t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase font-semibold mb-2",children:"Add Note"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("textarea",{value:l,onChange:f=>o(f.target.value),placeholder:"Type your note...",rows:2,style:{background:r?"rgba(15,18,39,0.5)":"#F9FAFB",color:a.text.primary,borderColor:a.border.primary},className:"flex-1 px-4 py-3 rounded-xl border text-sm focus:outline-none resize-none"}),t.jsx("button",{onClick:c,disabled:i||!l.trim(),style:{background:a.accent.primary,color:r?"#181D40":"#FFFFFF"},className:"px-4 rounded-xl font-semibold disabled:opacity-50 flex items-center justify-center",children:i?t.jsx(Xe,{className:"w-5 h-5 animate-spin"}):t.jsx(zj,{className:"w-5 h-5"})})]})]})]})}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"px-6 py-4 border-t flex gap-3 justify-end",children:[t.jsx("button",{onClick:d,style:{background:r?"rgba(71,85,105,0.5)":"#E5E7EB",color:a.text.primary},className:"px-6 py-2.5 rounded-xl font-semibold transition hover:opacity-80",children:"Close"}),!m&&e.status!=="resolved"&&t.jsxs("button",{onClick:u,style:{background:"#10B981",color:"#FFFFFF"},className:"px-6 py-2.5 rounded-xl font-semibold flex items-center gap-2 transition hover:opacity-90",children:[t.jsx(ft,{className:"w-4 h-4"}),"Resolve"]})]})]})]})}function Q4({concern:e,theme:a,isDarkMode:r,resolution:s,setResolution:n,resolving:l,onResolve:o,onClose:i}){var c;return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:i,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:r?"#1E2347":"#FFFFFF",borderColor:a.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-md overflow-hidden",onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, #10B981 0%, #059669 100%)"},className:"px-6 py-5 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Resolve Concern"}),t.jsxs("p",{className:"text-sm text-white/80 mt-1",children:["ID: ",(c=e._id)==null?void 0:c.slice(-8)]})]}),t.jsx("button",{onClick:i,className:"text-white/80 hover:text-white transition",children:t.jsx(Tt,{className:"w-6 h-6"})})]}),t.jsx("div",{className:"p-6 space-y-4",children:t.jsxs("div",{children:[t.jsx("p",{style:{color:a.text.secondary},className:"text-xs uppercase font-semibold mb-2",children:"Resolution Message *"}),t.jsx("textarea",{value:s,onChange:u=>n(u.target.value),placeholder:"Explain how this concern was resolved...",rows:5,style:{background:r?"rgba(15,18,39,0.5)":"#F9FAFB",color:a.text.primary,borderColor:a.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none resize-none"}),t.jsx("p",{style:{color:a.text.muted},className:"text-xs mt-2",children:"This message will be sent to the user via email."})]})}),t.jsxs("div",{style:{borderColor:a.border.primary},className:"px-6 py-4 border-t flex gap-3 justify-end",children:[t.jsx("button",{onClick:i,style:{background:r?"rgba(71,85,105,0.5)":"#E5E7EB",color:a.text.primary},className:"px-6 py-2.5 rounded-xl font-semibold transition hover:opacity-80",children:"Cancel"}),t.jsxs("button",{onClick:o,disabled:l||!s.trim(),style:{background:"#10B981",color:"#FFFFFF"},className:"px-6 py-2.5 rounded-xl font-semibold flex items-center gap-2 transition hover:opacity-90 disabled:opacity-50",children:[l?t.jsx(Xe,{className:"w-4 h-4 animate-spin"}):t.jsx(ft,{className:"w-4 h-4"}),l?"Resolving...":"Resolve & Notify User"]})]})]})]})}const Z4=[{value:"Transactions",icon:"",label:"Transactions"},{value:"Users",icon:"",label:"Users"},{value:"Merchants",icon:"",label:"Merchants"},{value:"Admins",icon:"",label:"Admins"},{value:"Logs",icon:"",label:"System Logs"},{value:"Concerns",icon:"",label:"All Concerns"}];function J4(){var Z,te,I,Y,G,K,se,ce,ae,oe,he,Ke,ct,dt,ve;const{theme:e,isDarkMode:a}=ne(),[r,s]=p.useState(!0),[n,l]=p.useState({maintenanceMode:!1,maintenanceMessage:"System is under maintenance. Please try again later.",deactivationScheduler:{enabled:!1,date:"",time:""}}),[o,i]=p.useState({autoExport:{frequency:"daily",exportTypes:[],time:"00:00",emailRecipients:[]}}),[c,u]=p.useState([]),[d,x]=p.useState([]),[m,b]=p.useState(!1),[v,S]=p.useState(!1),[h,y]=p.useState(!1),[g,f]=p.useState(""),[j,C]=p.useState({start:"",end:""}),[E,A]=p.useState("all"),[M,B]=p.useState(""),[F,L]=p.useState(""),[k,U]=p.useState("all"),D=e.accent.primary;p.useEffect(()=>{_(),z(),q(),w()},[]);const _=async()=>{try{s(!0);const H=await J.get("/admin/sysad/config");H!=null&&H.config&&l(X=>({...X,...H.config}))}catch(H){console.error("Failed to fetch sysad config:",H)}finally{s(!1)}},z=async()=>{try{const H=await J.get("/admin/configurations?adminRole=sysad");H&&i(H)}catch(H){console.error("Error loading configurations:",H)}},q=async()=>{try{const H=await J.get("/admin/configurations/export-history?adminRole=sysad");u(Array.isArray(H)?H:[])}catch(H){console.error("Error loading export history:",H)}},w=async()=>{try{const H=await J.get("/admin/configurations/scheduled-exports?adminRole=sysad");x(Array.isArray(H)?H:[])}catch(H){console.error("Error loading scheduled exports:",H)}},N=async()=>{const H=!n.maintenanceMode;if(H){const X=window.prompt("Enter custom maintenance message (optional):",n.maintenanceMessage);if(!window.confirm(`Are you sure you want to enable maintenance mode?

All non-sysadmin users will be immediately logged out and will see the maintenance message.`))return;y(!0);try{await J.post("/admin/sysad/maintenance-mode",{enabled:H,message:X||n.maintenanceMessage}),l(re=>({...re,maintenanceMode:H,maintenanceMessage:X||re.maintenanceMessage})),$.success("Maintenance mode enabled. All non-sysadmin users will be logged out.")}catch{$.error("Failed to enable maintenance mode")}finally{y(!1)}}else{if(!window.confirm("Are you sure you want to disable maintenance mode?"))return;y(!0);try{await J.post("/admin/sysad/maintenance-mode",{enabled:H}),l(X=>({...X,maintenanceMode:H})),$.success("Maintenance mode disabled")}catch{$.error("Failed to disable maintenance mode")}finally{y(!1)}}},R=async()=>{var H,X;y(!0);try{await J.put("/admin/configurations/auto-export",{...o.autoExport,adminRole:"sysad"}),$.success("Auto-export settings saved successfully!"),S(!1),z()}catch(re){$.error(((X=(H=re.response)==null?void 0:H.data)==null?void 0:X.error)||"Failed to save settings")}finally{y(!1)}},T=async()=>{var H,X;y(!0);try{if(!o.autoExport.exportTypes||o.autoExport.exportTypes.length===0){$.error("Please select at least one export type in the configuration settings"),y(!1);return}const re=await J.post("/admin/configurations/manual-export-sysad",{exportTypes:o.autoExport.exportTypes,dateRange:E,customStartDate:M,customEndDate:F});if($.success(`System data exported successfully! (${re.totalRecords||re.recordCount} total records)`),re.downloadUrl){const me=document.createElement("a");me.href=re.downloadUrl,me.download=re.fileName||`sysad_export_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(me),me.click(),document.body.removeChild(me)}b(!1),A("all"),B(""),L(""),q()}catch(re){$.error(((X=(H=re.response)==null?void 0:H.data)==null?void 0:X.error)||"Export failed")}finally{y(!1)}},O=async H=>{try{const X=await J.get(`/admin/configurations/download-export/${H}`);if(X.downloadUrl){const re=document.createElement("a");re.href=X.downloadUrl,re.download=X.fileName,document.body.appendChild(re),re.click(),document.body.removeChild(re)}}catch{$.error("Failed to download export")}},V=async()=>{if(!n.deactivationScheduler.date||!n.deactivationScheduler.time){$.error("Please set both date and time");return}y(!0);try{await J.post("/admin/sysad/deactivation-scheduler",n.deactivationScheduler),$.success("Deactivation schedule saved")}catch{$.error("Failed to save schedule")}finally{y(!1)}},W=[...d.map(H=>({...H,source:"auto"})),...c.map(H=>({...H,source:"manual"}))].sort((H,X)=>new Date(X.exportedAt||X.timestamp||X.createdAt)-new Date(H.exportedAt||H.timestamp||H.createdAt)).filter(H=>{var Oe,Ee;if(k!=="all"&&(k==="auto"&&H.source!=="auto"||k==="manual"&&H.source!=="manual"))return!1;const X=!g||((Oe=H.exportType)==null?void 0:Oe.toLowerCase().includes(g.toLowerCase()))||((Ee=H.fileName)==null?void 0:Ee.toLowerCase().includes(g.toLowerCase())),re=new Date(H.exportedAt||H.timestamp||H.createdAt),me=!j.start||re>=new Date(j.start),we=!j.end||re<=new Date(j.end+"T23:59:59");return X&&me&&we});return r?t.jsxs("div",{style:{color:D},className:"text-center py-20",children:[t.jsx(Xe,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),"Loading configuration..."]}):t.jsxs("div",{className:"min-h-[calc(100vh-220px)] flex flex-col",children:[t.jsxs("div",{style:{borderColor:e.border.primary},className:"mb-6 border-b-2 pb-5",children:[t.jsxs("h2",{style:{color:D},className:"text-2xl font-bold m-0 mb-2 flex items-center gap-[10px]",children:[t.jsx("span",{children:""})," System Configuration"]}),t.jsx("p",{style:{color:e.text.secondary},className:"text-[13px] m-0",children:"Manage system settings, maintenance mode, exports, and scheduled tasks"})]}),t.jsxs("div",{className:"space-y-6 flex-1 overflow-y-auto pr-2",children:[t.jsx("div",{style:{background:e.bg.card,borderColor:n.maintenanceMode?"rgba(239,68,68,0.5)":e.border.primary},className:"p-6 rounded-2xl border-2",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[t.jsx("div",{style:{background:n.maintenanceMode?"rgba(239,68,68,0.2)":`${D}20`},className:"w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx(Yn,{className:"w-6 h-6",style:{color:n.maintenanceMode?"#EF4444":D}})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{style:{color:e.text.primary},className:"font-bold text-lg mb-1",children:"Maintenance Mode"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm mb-3",children:"When enabled, only system administrators can access the system. All other users will be logged out and will see a maintenance message."}),t.jsxs("div",{className:"mb-3",children:[t.jsx("div",{style:{color:e.text.secondary},className:"text-xs font-semibold mb-1",children:"CURRENT MESSAGE:"}),t.jsx("div",{style:{background:e.bg.secondary,borderColor:e.border.primary,color:e.text.primary},className:"p-3 rounded-lg border text-sm",children:n.maintenanceMessage})]}),n.maintenanceMode&&t.jsxs("div",{style:{background:"rgba(239,68,68,0.1)",borderColor:"rgba(239,68,68,0.3)"},className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg border mb-3",children:[t.jsx(xa,{className:"w-4 h-4 text-red-500"}),t.jsx("span",{className:"text-red-500 text-sm font-semibold",children:"System is in maintenance mode - All non-sysadmin users logged out"})]}),t.jsx("button",{onClick:()=>{const H=window.prompt("Edit maintenance message:",n.maintenanceMessage);H&&H.trim()&&(l(X=>({...X,maintenanceMessage:H.trim()})),n.maintenanceMode&&J.post("/admin/sysad/maintenance-mode",{enabled:!0,message:H.trim()}).catch(()=>{$.error("Failed to update maintenance message")}))},style:{background:`${D}20`,color:D,borderColor:D},className:"px-4 py-2 rounded-lg text-sm font-medium border hover:opacity-80 transition mr-3",children:"Edit Message"})]})]}),t.jsxs("button",{onClick:N,disabled:h,style:{background:n.maintenanceMode?"#EF4444":"#10B981",color:"#FFFFFF"},className:"px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:opacity-90 transition disabled:opacity-50 flex-shrink-0 ml-4",children:[h?t.jsx(Xe,{className:"w-5 h-5 animate-spin"}):t.jsx(Tj,{className:"w-5 h-5"}),n.maintenanceMode?"Disable":"Enable"]})]})}),t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{style:{background:`${D}20`},className:"w-10 h-10 rounded-full flex items-center justify-center",children:t.jsx(Eu,{className:"w-5 h-5",style:{color:D}})}),t.jsxs("div",{children:[t.jsx("h3",{style:{color:e.text.primary},className:"font-bold text-lg",children:"Automated System Export"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:"System automatically exports data as ZIP files for backup and compliance."})]})]}),t.jsxs("button",{onClick:()=>S(!0),style:{background:`${D}20`,color:D,borderColor:`${D}40`},className:"px-5 py-2.5 rounded-lg font-semibold text-sm border hover:opacity-80 transition flex items-center gap-2",children:[t.jsx(Dj,{className:"w-4 h-4"}),"Configure Schedule"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"p-4 rounded-xl border",children:[t.jsx("div",{className:"text-2xl mb-2",children:""}),t.jsx("div",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"Frequency"}),t.jsx("div",{style:{color:e.text.primary},className:"font-bold",children:((te=(Z=o.autoExport)==null?void 0:Z.frequency)==null?void 0:te.charAt(0).toUpperCase())+((Y=(I=o.autoExport)==null?void 0:I.frequency)==null?void 0:Y.slice(1))||"Not set"})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"p-4 rounded-xl border",children:[t.jsx("div",{className:"text-2xl mb-2",children:""}),t.jsx("div",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"Export Time"}),t.jsx("div",{style:{color:e.text.primary},className:"font-bold",children:((G=o.autoExport)==null?void 0:G.time)||"Not set"})]}),t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:e.border.primary},className:"p-4 rounded-xl border",children:[t.jsx("div",{className:"text-2xl mb-2",children:""}),t.jsx("div",{style:{color:e.text.secondary},className:"text-xs font-semibold uppercase mb-1",children:"Data Types"}),t.jsxs("div",{style:{color:e.text.primary},className:"font-bold",children:[((se=(K=o.autoExport)==null?void 0:K.exportTypes)==null?void 0:se.length)||0," selected"]})]})]}),t.jsxs("div",{style:{background:"rgba(16,185,129,0.1)",borderColor:"rgba(16,185,129,0.3)"},className:"p-6 rounded-xl border-2 border-dashed text-center",children:[t.jsx("div",{className:"text-4xl mb-3",children:""}),t.jsx("h4",{style:{color:e.text.primary},className:"font-bold text-lg mb-2",children:"Export System Data Now"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm mb-4",children:"Download a complete ZIP file with all system data: transactions, users, merchants, admins, logs, and concerns."}),t.jsx("button",{onClick:()=>b(!0),disabled:h,style:{background:"#10B981",color:"#FFFFFF"},className:"px-8 py-3 rounded-xl font-bold hover:opacity-90 transition disabled:opacity-50",children:h?" Exporting...":" Download System Data (ZIP)"})]})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Z5,{className:"w-5 h-5",style:{color:D}}),t.jsx("h3",{style:{color:e.text.primary},className:"font-bold text-lg",children:"Export Archive"})]}),t.jsx("div",{className:"flex gap-2",children:["all","auto","manual"].map(H=>t.jsx("button",{onClick:()=>U(H),style:{background:k===H?`${D}20`:"transparent",color:k===H?D:e.text.secondary,borderColor:k===H?`${D}40`:e.border.primary},className:"px-3 py-1.5 rounded-lg text-xs font-semibold border transition capitalize",children:H==="all"?"All":H==="auto"?"Auto-Scheduled":"Manual"},H))})]}),t.jsxs("div",{className:"flex gap-3 mb-4 flex-wrap",children:[t.jsx("input",{type:"text",placeholder:"Search exports...",value:g,onChange:H=>f(H.target.value),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"px-4 py-2 rounded-lg border text-sm flex-1 min-w-[200px] focus:outline-none"}),t.jsx("input",{type:"date",value:j.start,onChange:H=>C({...j,start:H.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"px-3 py-2 rounded-lg border text-sm focus:outline-none"}),t.jsx("span",{style:{color:e.text.secondary},className:"self-center",children:""}),t.jsx("input",{type:"date",value:j.end,onChange:H=>C({...j,end:H.target.value}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"px-3 py-2 rounded-lg border text-sm focus:outline-none"}),(j.start||j.end||g)&&t.jsx("button",{onClick:()=>{f(""),C({start:"",end:""})},className:"px-3 py-2 rounded-lg text-xs font-semibold bg-red-500/20 text-red-500 border border-red-500/30",children:"Clear"})]}),W.length===0?t.jsxs("div",{className:"text-center py-10",style:{color:e.text.muted},children:[t.jsx("div",{className:"text-4xl mb-3 opacity-30",children:""}),t.jsx("p",{children:"No exports yet"}),t.jsx("p",{className:"text-xs mt-1",children:"Configure auto-export or trigger a manual export"})]}):t.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2",children:W.map((H,X)=>t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.3)":"#F9FAFB",borderColor:e.border.primary},className:"flex items-center justify-between p-4 rounded-xl border hover:border-opacity-50 transition",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[t.jsx("span",{className:"text-lg",children:H.source==="auto"?"":""}),t.jsx("span",{style:{color:D},className:"font-bold",children:H.exportType||"System Export"}),t.jsx("span",{style:{background:H.source==="auto"?"rgba(59,130,246,0.2)":"rgba(168,85,247,0.2)",color:H.source==="auto"?"#3B82F6":"#A855F7"},className:"px-2 py-0.5 rounded text-xs font-bold",children:H.source==="auto"?"AUTO":"MANUAL"})]}),t.jsxs("div",{style:{color:e.text.secondary},className:"text-sm flex gap-4",children:[t.jsxs("span",{children:[" ",new Date(H.exportedAt||H.timestamp||H.createdAt).toLocaleDateString()]}),t.jsxs("span",{children:[" ",new Date(H.exportedAt||H.timestamp||H.createdAt).toLocaleTimeString()]}),H.fileName&&t.jsxs("span",{children:[" ",H.fileName]}),H.recordCount&&t.jsxs("span",{children:[" ",H.recordCount," records"]})]})]}),H.status==="success"?t.jsx("button",{onClick:()=>O(H._id),className:"px-4 py-2 rounded-lg text-sm font-bold bg-green-500/20 text-green-500 border border-green-500/30 hover:bg-green-500/30 transition",children:" Download"}):t.jsx("span",{className:"px-4 py-2 rounded-lg text-sm font-bold bg-red-500/20 text-red-500 border border-red-500/30",children:" Failed"})]},X))})]}),t.jsxs("div",{style:{background:e.bg.card,borderColor:e.border.primary},className:"p-6 rounded-2xl border",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{style:{background:"rgba(239,68,68,0.2)"},className:"w-10 h-10 rounded-full flex items-center justify-center",children:t.jsx(Us,{className:"w-5 h-5 text-red-500"})}),t.jsxs("div",{children:[t.jsx("h3",{style:{color:e.text.primary},className:"font-bold text-lg",children:"Student Deactivation Scheduler"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm",children:"Schedule automatic deactivation of all STUDENT accounts (employees and admins not affected)"})]})]}),t.jsxs("div",{style:{background:"rgba(245,158,11,0.1)",borderColor:"rgba(245,158,11,0.3)"},className:"p-4 rounded-xl border mb-6 flex items-start gap-3",children:[t.jsx(xa,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),t.jsxs("p",{style:{color:e.text.secondary},className:"text-sm",children:[t.jsx("strong",{className:"text-amber-500",children:"Warning:"})," This will deactivate ALL student accounts at the scheduled time. Employees and admin accounts will not be affected."]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Enable Scheduler"}),t.jsx("button",{onClick:()=>l(H=>({...H,deactivationScheduler:{...H.deactivationScheduler,enabled:!H.deactivationScheduler.enabled}})),style:{background:(ce=n.deactivationScheduler)!=null&&ce.enabled?"#EF4444":"rgba(107,114,128,0.2)",color:(ae=n.deactivationScheduler)!=null&&ae.enabled?"#FFFFFF":e.text.secondary},className:"w-full py-3 rounded-xl font-semibold transition",children:(oe=n.deactivationScheduler)!=null&&oe.enabled?"Enabled":"Disabled"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Date"}),t.jsx("input",{type:"date",value:((he=n.deactivationScheduler)==null?void 0:he.date)||"",onChange:H=>l(X=>({...X,deactivationScheduler:{...X.deactivationScheduler,date:H.target.value}})),disabled:!((Ke=n.deactivationScheduler)!=null&&Ke.enabled),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none disabled:opacity-50"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:e.text.secondary},className:"block text-xs font-semibold uppercase mb-2",children:"Time"}),t.jsx("input",{type:"time",value:((ct=n.deactivationScheduler)==null?void 0:ct.time)||"",onChange:H=>l(X=>({...X,deactivationScheduler:{...X.deactivationScheduler,time:H.target.value}})),disabled:!((dt=n.deactivationScheduler)!=null&&dt.enabled),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none disabled:opacity-50"})]})]}),((ve=n.deactivationScheduler)==null?void 0:ve.enabled)&&t.jsx("div",{className:"mt-4 flex justify-end",children:t.jsxs("button",{onClick:V,disabled:h,style:{background:"#EF4444",color:"#FFFFFF"},className:"px-6 py-3 rounded-xl font-semibold flex items-center gap-2 hover:opacity-90 transition disabled:opacity-50",children:[h?t.jsx(Xe,{className:"w-4 h-4 animate-spin"}):t.jsx(ft,{className:"w-4 h-4"}),"Save Schedule"]})})]})]}),m&&t.jsx(K4,{theme:e,isDarkMode:a,dateRange:E,setDateRange:A,customStartDate:M,setCustomStartDate:B,customEndDate:F,setCustomEndDate:L,loading:h,onExport:T,onCancel:()=>{b(!1),A("all"),B(""),L("")}}),v&&t.jsx(eN,{theme:e,isDarkMode:a,configurations:o,setConfigurations:i,exportTypes:Z4,loading:h,onSave:R,onCancel:()=>S(!1)})]})}function K4({theme:e,isDarkMode:a,dateRange:r,setDateRange:s,customStartDate:n,setCustomStartDate:l,customEndDate:o,setCustomEndDate:i,loading:c,onExport:u,onCancel:d}){const x=e.accent.primary;return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:d,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-md overflow-hidden",onClick:m=>m.stopPropagation(),children:[t.jsxs("div",{style:{background:`linear-gradient(135deg, ${x}30 0%, ${x}10 100%)`},className:"px-6 py-5",children:[t.jsx("h3",{style:{color:x},className:"text-xl font-bold",children:"Select Date Range"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm mt-1",children:"Choose which records to include in the export"})]}),t.jsxs("div",{className:"p-6 space-y-3",children:[[{value:"all",label:" All Time",desc:"Export all records"},{value:"24hr",label:" Last 24 Hours",desc:"Records from the past day"},{value:"week",label:" This Week",desc:"Records from the past 7 days"},{value:"month",label:" This Month",desc:"Records from current month"},{value:"custom",label:" Custom Range",desc:"Choose specific dates"}].map(m=>t.jsxs("label",{style:{background:r===m.value?`${x}15`:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:r===m.value?`${x}40`:e.border.primary},className:"flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition",children:[t.jsx("input",{type:"radio",name:"dateRange",value:m.value,checked:r===m.value,onChange:b=>s(b.target.value),className:"w-4 h-4"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{style:{color:e.text.primary},className:"font-semibold text-sm",children:m.label}),t.jsx("div",{style:{color:e.text.secondary},className:"text-xs",children:m.desc})]})]},m.value)),r==="custom"&&t.jsxs("div",{style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB"},className:"p-4 rounded-xl grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{style:{color:x},className:"block text-xs font-semibold mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:n,onChange:m=>l(m.target.value),style:{background:a?"rgba(30,35,71,0.8)":"#FFFFFF",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-3 py-2 rounded-lg border text-sm focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:x},className:"block text-xs font-semibold mb-2",children:"End Date"}),t.jsx("input",{type:"date",value:o,onChange:m=>i(m.target.value),style:{background:a?"rgba(30,35,71,0.8)":"#FFFFFF",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-3 py-2 rounded-lg border text-sm focus:outline-none"})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{onClick:u,disabled:c,style:{background:"#10B981",color:"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold hover:opacity-90 transition disabled:opacity-50",children:c?" Exporting...":" Export Now"}),t.jsx("button",{onClick:d,disabled:c,style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"flex-1 py-3 rounded-xl font-semibold hover:opacity-80 transition",children:"Cancel"})]})]})]})]})}function eN({theme:e,isDarkMode:a,configurations:r,setConfigurations:s,exportTypes:n,loading:l,onSave:o,onCancel:i}){var u,d,x,m,b,v,S;const c=e.accent.primary;return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:i,children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{style:{background:a?"#1E2347":"#FFFFFF",borderColor:e.border.primary},className:"relative rounded-2xl shadow-2xl border w-full max-w-lg max-h-[90vh] overflow-hidden",onClick:h=>h.stopPropagation(),children:[t.jsxs("div",{style:{background:`linear-gradient(135deg, ${c}30 0%, ${c}10 100%)`},className:"px-6 py-5",children:[t.jsx("h3",{style:{color:c},className:"text-xl font-bold",children:"Configure Export Schedule"}),t.jsx("p",{style:{color:e.text.secondary},className:"text-sm mt-1",children:"Set up when and how often the system should automatically export data."})]}),t.jsxs("div",{className:"p-6 space-y-5 overflow-y-auto max-h-[calc(90vh-180px)]",children:[t.jsxs("div",{style:{background:(u=r.autoExport)!=null&&u.enabled?`${c}15`:a?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.05)",borderColor:(d=r.autoExport)!=null&&d.enabled?`${c}40`:"rgba(239,68,68,0.3)"},className:"flex items-center justify-between p-4 rounded-xl border",children:[t.jsxs("div",{children:[t.jsx("div",{style:{color:e.text.primary},className:"font-bold text-sm",children:"Enable Automatic Export"}),t.jsx("div",{style:{color:e.text.secondary},className:"text-xs mt-1",children:(x=r.autoExport)!=null&&x.enabled?" Auto-export is active":" Auto-export is disabled"})]}),t.jsx("button",{onClick:()=>{var h;return s({...r,autoExport:{...r.autoExport,enabled:!((h=r.autoExport)!=null&&h.enabled)}})},style:{background:(m=r.autoExport)!=null&&m.enabled?"#10B981":"#6B7280",width:"52px",height:"28px",borderRadius:"14px",position:"relative",transition:"all 0.2s ease"},children:t.jsx("div",{style:{position:"absolute",top:"2px",left:(b=r.autoExport)!=null&&b.enabled?"26px":"2px",width:"24px",height:"24px",borderRadius:"12px",background:"#FFFFFF",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:c},className:"block text-xs font-bold uppercase mb-2",children:"Frequency"}),t.jsxs("select",{value:((v=r.autoExport)==null?void 0:v.frequency)||"daily",onChange:h=>s({...r,autoExport:{...r.autoExport,frequency:h.target.value}}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none",children:[t.jsx("option",{value:"daily",children:" Daily"}),t.jsx("option",{value:"weekly",children:" Weekly"}),t.jsx("option",{value:"monthly",children:" Monthly"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:c},className:"block text-xs font-bold uppercase mb-2",children:"Export Time (24-hour)"}),t.jsx("input",{type:"time",value:((S=r.autoExport)==null?void 0:S.time)||"00:00",onChange:h=>s({...r,autoExport:{...r.autoExport,time:h.target.value}}),style:{background:a?"rgba(15,18,39,0.5)":"#F9FAFB",color:e.text.primary,borderColor:e.border.primary},className:"w-full px-4 py-3 rounded-xl border text-sm focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{color:c},className:"block text-xs font-bold uppercase mb-3",children:"Data Types to Export"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.map(h=>{var y,g,f,j,C,E;return t.jsxs("label",{style:{background:(g=(y=r.autoExport)==null?void 0:y.exportTypes)!=null&&g.includes(h.value)?`${c}15`:a?"rgba(15,18,39,0.5)":"#F9FAFB",borderColor:(j=(f=r.autoExport)==null?void 0:f.exportTypes)!=null&&j.includes(h.value)?`${c}40`:e.border.primary},className:"flex items-center gap-2 p-3 rounded-xl border cursor-pointer transition",children:[t.jsx("input",{type:"checkbox",checked:((E=(C=r.autoExport)==null?void 0:C.exportTypes)==null?void 0:E.includes(h.value))||!1,onChange:A=>{var F;const M=((F=r.autoExport)==null?void 0:F.exportTypes)||[],B=A.target.checked?[...M,h.value]:M.filter(L=>L!==h.value);s({...r,autoExport:{...r.autoExport,exportTypes:B}})},className:"w-4 h-4"}),t.jsx("span",{className:"text-lg",children:h.icon}),t.jsx("span",{style:{color:e.text.primary},className:"text-sm font-semibold",children:h.label})]},h.value)})})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{onClick:o,disabled:l,style:{background:c,color:a?"#181D40":"#FFFFFF"},className:"flex-1 py-3 rounded-xl font-bold hover:opacity-90 transition disabled:opacity-50",children:l?" Saving...":" Save Settings"}),t.jsx("button",{onClick:i,disabled:l,style:{background:a?"rgba(71,85,105,0.5)":"#E5E7EB",color:e.text.primary},className:"flex-1 py-3 rounded-xl font-semibold hover:opacity-80 transition",children:"Cancel"})]})]})]})]})}function Ux({message:e}){Je();const a=()=>{window.location.reload()};return t.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #181D40 0%, #0F1227 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",fontFamily:"Arial, sans-serif"},children:t.jsxs("div",{style:{background:"rgba(30, 35, 71, 0.95)",borderRadius:"24px",padding:"60px 40px",maxWidth:"500px",width:"100%",textAlign:"center",border:"2px solid #FFD41C",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.4)"},children:[t.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:"rgba(255, 212, 28, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 30px",border:"3px solid #FFD41C"},children:t.jsx("span",{style:{fontSize:"60px"},children:""})}),t.jsx("h1",{style:{color:"#FFD41C",fontSize:"32px",fontWeight:"700",margin:"0 0 16px 0"},children:"Under Maintenance"}),t.jsx("p",{style:{color:"#FBFBFB",fontSize:"16px",lineHeight:"1.6",margin:"0 0 30px 0",opacity:.9},children:e||"The NUCash system is currently undergoing scheduled maintenance. We apologize for any inconvenience."}),t.jsxs("div",{style:{background:"rgba(255, 212, 28, 0.1)",borderRadius:"12px",padding:"20px",marginBottom:"30px",border:"1px solid rgba(255, 212, 28, 0.3)"},children:[t.jsx("p",{style:{color:"#FFD41C",fontSize:"14px",margin:"0 0 8px 0",fontWeight:"600"},children:" Please check back later"}),t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.7)",fontSize:"13px",margin:0},children:"Our team is working to restore services as quickly as possible."})]}),t.jsx("button",{onClick:a,style:{background:"#FFD41C",color:"#181D40",border:"none",borderRadius:"12px",padding:"16px 40px",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(255, 212, 28, 0.3)"},onMouseEnter:r=>{r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.boxShadow="0 6px 20px rgba(255, 212, 28, 0.4)"},onMouseLeave:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 4px 15px rgba(255, 212, 28, 0.3)"},children:" Try Again"}),t.jsxs("p",{style:{color:"rgba(251, 251, 251, 0.5)",fontSize:"12px",marginTop:"30px"},children:["Need assistance? Contact us at"," ",t.jsx("a",{href:"mailto:nucashsystem@gmail.com",style:{color:"#FFD41C",textDecoration:"none"},children:"nucashsystem@gmail.com"})]}),t.jsx("p",{style:{color:"rgba(251, 251, 251, 0.4)",fontSize:"11px",marginTop:"20px"},children:" 2026 NUCash System | National University - Laguna"})]})})}function tN(){const{theme:e,isDarkMode:a}=ne();return t.jsx("div",{style:{minHeight:"100vh",background:e.bg.primary,color:e.text.primary,padding:"40px 20px"},children:t.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",background:e.bg.card,borderRadius:"16px",padding:"40px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"40px"},children:[t.jsx("h1",{style:{color:e.accent.primary,fontSize:"32px",marginBottom:"8px"},children:"Terms and Conditions"}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"14px"},children:"Last updated: February 2026"})]}),t.jsxs("div",{style:{lineHeight:"1.8",fontSize:"15px"},children:[t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"1. Acceptance of Terms"}),t.jsx("p",{style:{color:e.text.secondary},children:"By accessing and using the NUCash System, you accept and agree to be bound by the terms and provisions of this agreement. If you do not agree to abide by these terms, please do not use this service."})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"2. Description of Service"}),t.jsx("p",{style:{color:e.text.secondary},children:"NUCash is a digital payment and shuttle management system designed for National University - Laguna. The system provides:"}),t.jsxs("ul",{style:{color:e.text.secondary,paddingLeft:"20px",marginTop:"10px"},children:[t.jsx("li",{children:"Digital wallet services for cashless transactions"}),t.jsx("li",{children:"Shuttle service tracking and payment"}),t.jsx("li",{children:"Merchant payment processing"}),t.jsx("li",{children:"Account management features"})]})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"3. User Responsibilities"}),t.jsx("p",{style:{color:e.text.secondary},children:"Users are responsible for:"}),t.jsxs("ul",{style:{color:e.text.secondary,paddingLeft:"20px",marginTop:"10px"},children:[t.jsx("li",{children:"Maintaining the confidentiality of their PIN and account information"}),t.jsx("li",{children:"All activities that occur under their account"}),t.jsx("li",{children:"Notifying the administration immediately of any unauthorized use"}),t.jsx("li",{children:"Ensuring their RFID card is not shared with others"})]})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"4. Account Security"}),t.jsx("p",{style:{color:e.text.secondary},children:"You are responsible for safeguarding your 6-digit PIN. We recommend that you do not share your PIN with anyone. NUCash staff will never ask for your PIN."})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"5. Transactions"}),t.jsx("p",{style:{color:e.text.secondary},children:"All transactions made through the NUCash system are final. Refunds may be processed at the discretion of the Treasury Office. Users should verify transaction details before confirming any payment."})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"6. Limitation of Liability"}),t.jsx("p",{style:{color:e.text.secondary},children:"NUCash and National University shall not be liable for any indirect, incidental, special, consequential, or punitive damages resulting from your use of the service."})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"7. Modifications"}),t.jsx("p",{style:{color:e.text.secondary},children:"We reserve the right to modify these terms at any time. Users will be notified of significant changes through the system or via email."})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"8. Contact Information"}),t.jsxs("p",{style:{color:e.text.secondary},children:["For questions about these Terms and Conditions, please contact us at"," ",t.jsx("a",{href:"mailto:nucashsystem@gmail.com",style:{color:e.accent.primary},children:"nucashsystem@gmail.com"})]})]})]}),t.jsx("div",{style:{textAlign:"center",marginTop:"40px"},children:t.jsx(zo,{to:"/login",style:{color:e.accent.primary,textDecoration:"none",fontWeight:"600",fontSize:"14px"},children:" Back to Login"})}),t.jsx("div",{style:{textAlign:"center",marginTop:"30px",paddingTop:"20px",borderTop:`1px solid ${e.border.primary}`},children:t.jsx("p",{style:{color:e.text.muted,fontSize:"12px"},children:" 2026 NUCash System | Jose Anjelo Abued, Ashley Gwyneth Cuevas, Jhustine Brylle Logronio"})})]})})}function aN(){const{theme:e,isDarkMode:a}=ne();return t.jsx("div",{style:{minHeight:"100vh",background:e.bg.primary,color:e.text.primary,padding:"40px 20px"},children:t.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",background:e.bg.card,borderRadius:"16px",padding:"40px",border:`1px solid ${e.border.primary}`},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"40px"},children:[t.jsx("h1",{style:{color:e.accent.primary,fontSize:"32px",marginBottom:"8px"},children:"Privacy Policy"}),t.jsx("p",{style:{color:e.text.secondary,fontSize:"14px"},children:"Last updated: February 2026"})]}),t.jsxs("div",{style:{lineHeight:"1.8",fontSize:"15px"},children:[t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"1. Information We Collect"}),t.jsx("p",{style:{color:e.text.secondary},children:"We collect information you provide directly to us, including:"}),t.jsxs("ul",{style:{color:e.text.secondary,paddingLeft:"20px",marginTop:"10px"},children:[t.jsx("li",{children:"Personal information (name, email, student/employee ID)"}),t.jsx("li",{children:"RFID card information"}),t.jsx("li",{children:"Transaction history"}),t.jsx("li",{children:"Account activity and usage data"})]})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"2. How We Use Your Information"}),t.jsx("p",{style:{color:e.text.secondary},children:"We use the information we collect to:"}),t.jsxs("ul",{style:{color:e.text.secondary,paddingLeft:"20px",marginTop:"10px"},children:[t.jsx("li",{children:"Process transactions and manage your account"}),t.jsx("li",{children:"Provide shuttle tracking and payment services"}),t.jsx("li",{children:"Send important notifications about your account"}),t.jsx("li",{children:"Improve our services and user experience"}),t.jsx("li",{children:"Ensure security and prevent fraud"})]})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"3. Information Sharing"}),t.jsx("p",{style:{color:e.text.secondary},children:"We do not sell, trade, or otherwise transfer your personal information to outside parties. Your information may be shared with:"}),t.jsxs("ul",{style:{color:e.text.secondary,paddingLeft:"20px",marginTop:"10px"},children:[t.jsx("li",{children:"National University administration for academic purposes"}),t.jsx("li",{children:"Authorized merchants for transaction processing"}),t.jsx("li",{children:"Law enforcement when required by law"})]})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"4. Data Security"}),t.jsx("p",{style:{color:e.text.secondary},children:"We implement appropriate security measures to protect your personal information:"}),t.jsxs("ul",{style:{color:e.text.secondary,paddingLeft:"20px",marginTop:"10px"},children:[t.jsx("li",{children:"Encrypted data transmission (HTTPS)"}),t.jsx("li",{children:"Secure password hashing (bcrypt)"}),t.jsx("li",{children:"Regular security audits"}),t.jsx("li",{children:"Access controls and authentication"})]})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"5. Data Retention"}),t.jsx("p",{style:{color:e.text.secondary},children:"We retain your personal information for as long as your account is active or as needed to provide you services. Transaction records are kept for a minimum of 5 years for auditing purposes."})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"6. Your Rights"}),t.jsx("p",{style:{color:e.text.secondary},children:"You have the right to:"}),t.jsxs("ul",{style:{color:e.text.secondary,paddingLeft:"20px",marginTop:"10px"},children:[t.jsx("li",{children:"Access your personal information"}),t.jsx("li",{children:"Request correction of inaccurate data"}),t.jsx("li",{children:"Request account deactivation"}),t.jsx("li",{children:"Receive a copy of your transaction history"})]})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"7. Cookies and Tracking"}),t.jsx("p",{style:{color:e.text.secondary},children:"We use local storage and session cookies to maintain your login session and preferences. These are essential for the proper functioning of the system."})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"8. Changes to This Policy"}),t.jsx("p",{style:{color:e.text.secondary},children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date.'})]}),t.jsxs("section",{style:{marginBottom:"30px"},children:[t.jsx("h2",{style:{color:e.accent.primary,fontSize:"20px",marginBottom:"12px"},children:"9. Contact Us"}),t.jsxs("p",{style:{color:e.text.secondary},children:["If you have any questions about this Privacy Policy, please contact us at"," ",t.jsx("a",{href:"mailto:nucashsystem@gmail.com",style:{color:e.accent.primary},children:"nucashsystem@gmail.com"})]})]})]}),t.jsx("div",{style:{textAlign:"center",marginTop:"40px"},children:t.jsx(zo,{to:"/login",style:{color:e.accent.primary,textDecoration:"none",fontWeight:"600",fontSize:"14px"},children:" Back to Login"})}),t.jsx("div",{style:{textAlign:"center",marginTop:"30px",paddingTop:"20px",borderTop:`1px solid ${e.border.primary}`},children:t.jsx("p",{style:{color:e.text.muted,fontSize:"12px"},children:" 2026 NUCash System | Jose Anjelo Abued, Ashley Gwyneth Cuevas, Jhustine Brylle Logronio"})})]})})}const Pt=({children:e})=>{const a=localStorage.getItem("adminToken");return JSON.parse(localStorage.getItem("adminData")||"{}"),a?t.jsx(D2,{children:e}):t.jsx(At,{to:"/login",replace:!0})},Nr=({children:e})=>localStorage.getItem("adminToken")?t.jsx(M2,{children:e}):t.jsx(At,{to:"/login",replace:!0}),ja=({children:e})=>localStorage.getItem("adminToken")?t.jsx(L2,{children:e}):t.jsx(At,{to:"/login",replace:!0}),Sr=({children:e})=>localStorage.getItem("adminToken")?t.jsx(O2,{children:e}):t.jsx(At,{to:"/login",replace:!0}),on=({children:e})=>localStorage.getItem("userToken")?t.jsx(W2,{children:e}):t.jsx(At,{to:"/login",replace:!0}),wr=({children:e})=>localStorage.getItem("adminToken")?t.jsx(P2,{children:e}):t.jsx(At,{to:"/login",replace:!0});function rN(){const{isMaintenanceMode:e,maintenanceMessage:a,isSysadmin:r}=E2();return e&&!r?t.jsx(Ux,{message:a}):t.jsxs(B1,{children:[t.jsx(le,{path:"/login",element:t.jsx(A2,{})}),t.jsx(le,{path:"/activate",element:t.jsx(z2,{})}),t.jsx(le,{path:"/maintenance",element:t.jsx(Ux,{})}),t.jsx(le,{path:"/terms",element:t.jsx(tN,{})}),t.jsx(le,{path:"/privacy",element:t.jsx(aN,{})}),t.jsx(le,{path:"/user/dashboard",element:t.jsx(on,{children:t.jsx(F4,{})})}),t.jsx(le,{path:"/user/history",element:t.jsx(on,{children:t.jsx(A4,{})})}),t.jsx(le,{path:"/user/concerns",element:t.jsx(on,{children:t.jsx(R4,{})})}),t.jsx(le,{path:"/user/profile",element:t.jsx(on,{children:t.jsx(z4,{})})}),t.jsx(le,{path:"/faq",element:t.jsx(on,{children:t.jsx(B4,{})})}),t.jsx(le,{path:"/users-dashboard",element:t.jsx(At,{to:"/user/dashboard",replace:!0})}),t.jsx(le,{path:"/admin/treasury/dashboard",element:t.jsx(ja,{children:t.jsx(t4,{})})}),t.jsx(le,{path:"/admin/treasury/cashin",element:t.jsx(ja,{children:t.jsx(r4,{})})}),t.jsx(le,{path:"/admin/treasury/register",element:t.jsx(ja,{children:t.jsx(n4,{})})}),t.jsx(le,{path:"/admin/treasury/transactions",element:t.jsx(ja,{children:t.jsx(Lx,{})})}),t.jsx(le,{path:"/admin/treasury/merchants",element:t.jsx(ja,{children:t.jsx(l4,{})})}),t.jsx(le,{path:"/admin/treasury/logs",element:t.jsx(ja,{children:t.jsx(ln,{})})}),t.jsx(le,{path:"/admin/treasury/concerns",element:t.jsx(ja,{children:t.jsx(u4,{})})}),t.jsx(le,{path:"/admin/treasury/config",element:t.jsx(ja,{children:t.jsx(p4,{})})}),t.jsx(le,{path:"/admin/treasury/profile",element:t.jsx(ja,{children:t.jsx(ts,{})})}),t.jsx(le,{path:"/admin/treasury",element:t.jsx(At,{to:"/admin/treasury/dashboard",replace:!0})}),t.jsx(le,{path:"/admin/accounting/home",element:t.jsx(Sr,{children:t.jsx(f4,{})})}),t.jsx(le,{path:"/admin/accounting/transactions",element:t.jsx(Sr,{children:t.jsx(Lx,{})})}),t.jsx(le,{path:"/admin/accounting/merchants",element:t.jsx(Sr,{children:t.jsx(g4,{})})}),t.jsx(le,{path:"/admin/accounting/logs",element:t.jsx(Sr,{children:t.jsx(ln,{})})}),t.jsx(le,{path:"/admin/accounting/concerns",element:t.jsx(Sr,{children:t.jsx(C4,{})})}),t.jsx(le,{path:"/admin/accounting/config",element:t.jsx(Sr,{children:t.jsx(k4,{})})}),t.jsx(le,{path:"/admin/accounting/profile",element:t.jsx(Sr,{children:t.jsx(ts,{})})}),t.jsx(le,{path:"/admin/accounting",element:t.jsx(At,{to:"/admin/accounting/home",replace:!0})}),t.jsx(le,{path:"/admin/sysad/dashboard",element:t.jsx(wr,{children:t.jsx(D4,{})})}),t.jsx(le,{path:"/admin/sysad/users",element:t.jsx(wr,{children:t.jsx(I4,{})})}),t.jsx(le,{path:"/admin/sysad/transfer-card",element:t.jsx(wr,{children:t.jsx(G4,{})})}),t.jsx(le,{path:"/admin/sysad/logs",element:t.jsx(wr,{children:t.jsx(ln,{})})}),t.jsx(le,{path:"/admin/sysad/concerns",element:t.jsx(wr,{children:t.jsx(V4,{})})}),t.jsx(le,{path:"/admin/sysad/config",element:t.jsx(wr,{children:t.jsx(J4,{})})}),t.jsx(le,{path:"/admin/sysad/profile",element:t.jsx(wr,{children:t.jsx(ts,{})})}),t.jsx(le,{path:"/admin/sysad",element:t.jsx(At,{to:"/admin/sysad/dashboard",replace:!0})}),t.jsx(le,{path:"/admin/motorpool",element:t.jsx(Pt,{children:t.jsx(N5,{})})}),t.jsx(le,{path:"/admin/motorpool/routes",element:t.jsx(Pt,{children:t.jsx(w5,{})})}),t.jsx(le,{path:"/admin/motorpool/drivers",element:t.jsx(Pt,{children:t.jsx(C5,{})})}),t.jsx(le,{path:"/admin/motorpool/shuttles",element:t.jsx(Pt,{children:t.jsx(k5,{})})}),t.jsx(le,{path:"/admin/motorpool/trips",element:t.jsx(Pt,{children:t.jsx(T5,{})})}),t.jsx(le,{path:"/admin/motorpool/phones",element:t.jsx(Pt,{children:t.jsx(E5,{})})}),t.jsx(le,{path:"/admin/motorpool/concerns",element:t.jsx(Pt,{children:t.jsx(A5,{})})}),t.jsx(le,{path:"/admin/motorpool/configurations",element:t.jsx(Pt,{children:t.jsx(R5,{})})}),t.jsx(le,{path:"/admin/motorpool/profile",element:t.jsx(Pt,{children:t.jsx(ts,{})})}),t.jsx(le,{path:"/admin/merchant",element:t.jsx(Nr,{children:t.jsx(D5,{})})}),t.jsx(le,{path:"/admin/merchant/merchants",element:t.jsx(Nr,{children:t.jsx(M5,{})})}),t.jsx(le,{path:"/admin/merchant/phones",element:t.jsx(Nr,{children:t.jsx(L5,{})})}),t.jsx(le,{path:"/admin/merchant/concerns",element:t.jsx(Nr,{children:t.jsx(U5,{})})}),t.jsx(le,{path:"/admin/merchant/configurations",element:t.jsx(Nr,{children:t.jsx(O5,{})})}),t.jsx(le,{path:"/admin/merchant/profile",element:t.jsx(Nr,{children:t.jsx(ts,{})})}),t.jsx(le,{path:"/admin/merchant/logs",element:t.jsx(Nr,{children:t.jsx(ln,{})})}),t.jsx(le,{path:"/admin/logs",element:t.jsx(Pt,{children:t.jsx(ln,{})})}),t.jsx(le,{path:"/admin/profile",element:t.jsx(Pt,{children:t.jsx(ts,{})})}),t.jsx(le,{path:"/admin/concerns",element:t.jsx(Pt,{children:t.jsx(w4,{})})}),t.jsx(le,{path:"/",element:t.jsx(At,{to:"/login",replace:!0})}),t.jsx(le,{path:"/admin",element:t.jsx(At,{to:"/admin/motorpool",replace:!0})}),t.jsx(le,{path:"*",element:t.jsx(At,{to:"/login",replace:!0})})]})}function sN(){return t.jsx(Y1,{children:t.jsx(G1,{children:t.jsxs($1,{children:[t.jsx(T2,{}),t.jsx(rN,{})]})})})}$0.createRoot(document.getElementById("root")).render(t.jsx(je.StrictMode,{children:t.jsx(sN,{})}));
